/*! For license information please see main.cddc0e4b.js.LICENSE.txt */
(()=>{var t={5513:(t,e,n)=>{"use strict";n.d(e,{A:()=>rt});var i=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(i){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),r=Math.abs,s=String.fromCharCode,o=Object.assign;function a(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function h(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function u(t,e,n){return t.slice(e,n)}function p(t){return t.length}function d(t){return t.length}function f(t,e){return e.push(t),t}var m=1,g=1,y=0,_=0,v=0,T="";function E(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:m,column:g,length:o,return:""}}function x(t,e){return o(E("",null,null,"",null,null,0),t,{length:-t.length},e)}function I(){return v=_>0?c(T,--_):0,g--,10===v&&(g=1,m--),v}function b(){return v=_<y?c(T,_++):0,g++,10===v&&(g=1,m++),v}function w(){return c(T,_)}function S(){return _}function A(t,e){return u(T,t,e)}function C(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(t){return m=g=1,y=p(T=t),_=0,[]}function D(t){return T="",t}function O(t){return a(A(_-1,P(91===t?t+2:40===t?t+1:t)))}function N(t){for(;(v=w())&&v<33;)b();return C(t)>2||C(v)>3?"":" "}function M(t,e){for(;--e&&b()&&!(v<48||v>102||v>57&&v<65||v>70&&v<97););return A(t,S()+(e<6&&32==w()&&32==b()))}function P(t){for(;b();)switch(v){case t:return _;case 34:case 39:34!==t&&39!==t&&P(v);break;case 40:41===t&&P(t);break;case 92:b()}return _}function F(t,e){for(;b()&&t+v!==57&&(t+v!==84||47!==w()););return"/*"+A(e,_-1)+"*"+s(47===t?t:b())}function L(t){for(;!C(w());)b();return A(t,_)}var k="-ms-",U="-moz-",B="-webkit-",z="comm",G="rule",H="decl",V="@keyframes";function j(t,e){for(var n="",i=d(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function W(t,e,n,i){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case H:return t.return=t.return||t.value;case z:return"";case V:return t.return=t.value+"{"+j(t.children,i)+"}";case G:t.value=t.props.join(",")}return p(n=j(t.children,i))?t.return=t.value+"{"+n+"}":""}function Y(t){return D(q("",null,null,null,[""],t=R(t),0,[0],t))}function q(t,e,n,i,r,o,a,u,d){for(var m=0,g=0,y=a,_=0,v=0,T=0,E=1,x=1,A=1,C=0,R="",D=r,P=o,k=i,U=R;x;)switch(T=C,C=b()){case 40:if(108!=T&&58==c(U,y-1)){-1!=h(U+=l(O(C),"&","&\f"),"&\f")&&(A=-1);break}case 34:case 39:case 91:U+=O(C);break;case 9:case 10:case 13:case 32:U+=N(T);break;case 92:U+=M(S()-1,7);continue;case 47:switch(w()){case 42:case 47:f(Z(F(b(),S()),e,n),d);break;default:U+="/"}break;case 123*E:u[m++]=p(U)*A;case 125*E:case 59:case 0:switch(C){case 0:case 125:x=0;case 59+g:-1==A&&(U=l(U,/\f/g,"")),v>0&&p(U)-y&&f(v>32?K(U+";",i,n,y-1):K(l(U," ","")+";",i,n,y-2),d);break;case 59:U+=";";default:if(f(k=X(U,e,n,m,g,r,u,R,D=[],P=[],y),o),123===C)if(0===g)q(U,e,k,k,D,o,y,u,P);else switch(99===_&&110===c(U,3)?100:_){case 100:case 108:case 109:case 115:q(t,k,k,i&&f(X(t,k,k,0,0,r,u,R,r,D=[],y),P),r,P,y,u,i?D:P);break;default:q(U,k,k,k,[""],P,0,u,P)}}m=g=v=0,E=A=1,R=U="",y=a;break;case 58:y=1+p(U),v=T;default:if(E<1)if(123==C)--E;else if(125==C&&0==E++&&125==I())continue;switch(U+=s(C),C*E){case 38:A=g>0?1:(U+="\f",-1);break;case 44:u[m++]=(p(U)-1)*A,A=1;break;case 64:45===w()&&(U+=O(b())),_=w(),g=y=p(R=U+=L(S())),C++;break;case 45:45===T&&2==p(U)&&(E=0)}}return o}function X(t,e,n,i,s,o,h,c,p,f,m){for(var g=s-1,y=0===s?o:[""],_=d(y),v=0,T=0,x=0;v<i;++v)for(var I=0,b=u(t,g+1,g=r(T=h[v])),w=t;I<_;++I)(w=a(T>0?y[I]+" "+b:l(b,/&\f/g,y[I])))&&(p[x++]=w);return E(t,e,n,0===s?G:c,p,f,m)}function Z(t,e,n){return E(t,e,n,z,s(v),u(t,2,-2),0)}function K(t,e,n,i){return E(t,e,n,H,u(t,0,i),u(t,i+1,-1),i)}var Q=function(t,e,n){for(var i=0,r=0;i=r,r=w(),38===i&&12===r&&(e[n]=1),!C(r);)b();return A(t,_)},J=function(t,e){return D(function(t,e){var n=-1,i=44;do{switch(C(i)){case 0:38===i&&12===w()&&(e[n]=1),t[n]+=Q(_-1,e,n);break;case 2:t[n]+=O(i);break;case 4:if(44===i){t[++n]=58===w()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=s(i)}}while(i=b());return t}(R(t),e))},$=new WeakMap,tt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||$.get(n))&&!i){$.set(t,!0);for(var r=[],s=J(e,r),o=n.props,a=0,l=0;a<s.length;a++)for(var h=0;h<o.length;h++,l++)t.props[l]=r[a]?s[a].replace(/&\f/g,o[h]):o[h]+" "+s[a]}}},et=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function nt(t,e){switch(function(t,e){return 45^c(t,0)?(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3):0}(t,e)){case 5103:return B+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return B+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return B+t+U+t+k+t+t;case 6828:case 4268:return B+t+k+t+t;case 6165:return B+t+k+"flex-"+t+t;case 5187:return B+t+l(t,/(\w+).+(:[^]+)/,B+"box-$1$2"+k+"flex-$1$2")+t;case 5443:return B+t+k+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return B+t+k+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return B+t+k+l(t,"shrink","negative")+t;case 5292:return B+t+k+l(t,"basis","preferred-size")+t;case 6060:return B+"box-"+l(t,"-grow","")+B+t+k+l(t,"grow","positive")+t;case 4554:return B+l(t,/([^-])(transform)/g,"$1"+B+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,B+"$1"),/(image-set)/,B+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,B+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,B+"box-pack:$3"+k+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+B+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,B+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+B+"$2-$3$1"+U+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~h(t,"stretch")?nt(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,p(t)-3-(~h(t,"!important")&&10))){case 107:return l(t,":",":"+B)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+B+(45===c(t,14)?"inline-":"")+"box$3$1"+B+"$2$3$1"+k+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return B+t+k+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return B+t+k+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return B+t+k+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return B+t+k+t+t}return t}var it=[function(t,e,n,i){if(t.length>-1&&!t.return)switch(t.type){case H:t.return=nt(t.value,t.length);break;case V:return j([x(t,{value:l(t.value,"@","@"+B)})],i);case G:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return j([x(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return j([x(t,{props:[l(e,/:(plac\w+)/,":"+B+"input-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,k+"input-$1")]})],i)}return""}))}}],rt=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||it;var s,o,a={},l=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;l.push(t)}));var h,c,u=[W,(c=function(t){h.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],p=function(t){var e=d(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}([tt,et].concat(r,u));o=function(t,e,n,i){h=n,j(Y(t?t+"{"+e.styles+"}":e.styles),p),i&&(f.inserted[e.name]=!0)};var f={key:e,sheet:new i({key:e,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(l),f}},918:(t,e,n)=>{"use strict";function i(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}n.d(e,{A:()=>i})},5025:(t,e,n)=>{"use strict";n.d(e,{T:()=>l,i:()=>s,w:()=>a});var i=n(5043),r=n(5513),s=(n(2830),n(9436),!0),o=i.createContext("undefined"!==typeof HTMLElement?(0,r.A)({key:"css"}):null);o.Provider;var a=function(t){return(0,i.forwardRef)((function(e,n){var r=(0,i.useContext)(o);return t(e,r,n)}))};s||(a=function(t){return function(e){var n=(0,i.useContext)(o);return null===n?(n=(0,r.A)({key:"css"}),i.createElement(o.Provider,{value:n},t(e,n))):t(e,n)}});var l=i.createContext({})},2830:(t,e,n)=>{"use strict";n.d(e,{J:()=>f});var i={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},r=n(918),s=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(t){return 45===t.charCodeAt(1)},l=function(t){return null!=t&&"boolean"!==typeof t},h=(0,r.A)((function(t){return a(t)?t:t.replace(s,"-$&").toLowerCase()})),c=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(o,(function(t,e,n){return p={name:e,styles:n,next:p},e}))}return 1===i[t]||a(t)||"number"!==typeof e||0===e?e:e+"px"};function u(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)p={name:i.name,styles:i.styles,next:p},i=i.next;return n.styles+";"}return function(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=u(t,e,n[r])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=e&&void 0!==e[o]?i+=s+"{"+e[o]+"}":l(o)&&(i+=h(s)+":"+c(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=e&&void 0!==e[o[0]]){var a=u(t,e,o);switch(s){case"animation":case"animationName":i+=h(s)+":"+a+";";break;default:i+=s+"{"+a+"}"}}else for(var p=0;p<o.length;p++)l(o[p])&&(i+=h(s)+":"+c(s,o[p])+";")}return i}(t,e,n);case"function":if(void 0!==t){var r=p,s=n(t);return p=r,u(t,e,s)}}if(null==e)return n;var o=e[n];return void 0!==o?o:n}var p,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,r="";p=void 0;var s=t[0];null==s||void 0===s.raw?(i=!1,r+=u(n,e,s)):r+=s[0];for(var o=1;o<t.length;o++)r+=u(n,e,t[o]),i&&(r+=s[o]);d.lastIndex=0;for(var a,l="";null!==(a=d.exec(r));)l+="-"+a[1];var h=function(t){for(var e,n=0,i=0,r=t.length;r>=4;++i,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+l;return{name:h,styles:r,next:p}}},9436:(t,e,n)=>{"use strict";var i;n.d(e,{i:()=>a,s:()=>o});var r=n(5043),s=!!(i||(i=n.t(r,2))).useInsertionEffect&&(i||(i=n.t(r,2))).useInsertionEffect,o=s||function(t){return t()},a=s||r.useLayoutEffect},1722:(t,e,n)=>{"use strict";n.d(e,{Rk:()=>i,SF:()=>r,sk:()=>s});function i(t,e,n){var i="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):i+=n+" "})),i}var r=function(t,e,n){var i=t.key+"-"+e.name;!1===n&&void 0===t.registered[i]&&(t.registered[i]=e.styles)},s=function(t,e,n){r(t,e,n);var i=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var s=e;do{t.insert(e===s?"."+i:"",s,t.sheet,!0),s=s.next}while(void 0!==s)}}},2125:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree")},5896:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft")},1707:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")},155:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},4802:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},611:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2m0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2m6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5M19 3l-6 6 2 2 7-7V3z"}),"ContentCut")},3471:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},6132:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M18 20V8.35L13.65 4h-2.83L16 9.18V20zm4 0V6.69L19.31 4h-2.83L20 7.52V20zM8 4l-6 6v10h5v-5h2v5h5V10zm1 9H7v-2h2z"}),"HolidayVillage")},1271:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M9 3 5 6.99h3V14h2V6.99h3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99z"}),"ImportExport")},8348:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},2462:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers")},1702:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout")},9611:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")},7603:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 5.63l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41"}),"Mode")},5573:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"MyLocation")},1359:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"m17.66 17.66-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06L9.7 9.7l-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06L4 4v14c0 1.1.9 2 2 2h14zM7 17v-5.76L12.76 17z"}),"SquareFoot")},7981:(t,e,n)=>{"use strict";var i=n(4994);e.A=void 0;var r=i(n(39)),s=n(579);e.A=(0,r.default)((0,s.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList")},39:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=n(4962)},5881:(t,e)=>{"use strict";var n,i=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),c=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case s:case a:case o:case p:case d:return t;default:switch(t=t&&t.$$typeof){case c:case h:case u:case m:case f:case l:return t;default:return e}}case r:return e}}}n=Symbol.for("react.module.reference")},805:(t,e,n)=>{"use strict";n(5881)},8279:(t,e,n)=>{"use strict";n.d(e,{A:()=>B});var i=n(8168),r=n(8587),s=n(6632),o=n(3216),a=n(7322),l=n(7758),h=n(8812);var c=n(3650);const u={black:"#000",white:"#fff"},p={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},_={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},v=["mode","contrastThreshold","tonalOffset"],T={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:u.white,default:u.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},E={text:{primary:u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function x(t,e,n,i){const r=i.light||i,s=i.dark||1.5*i;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,c.a)(t.main,r):"dark"===e&&(t.dark=(0,c.e$)(t.main,s)))}function I(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:a=.2}=t,l=(0,r.A)(t,v),h=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(e),I=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(e),b=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(e),w=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[700],light:y[500],dark:y[900]}}(e),S=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:_[400],light:_[300],dark:_[700]}:{main:_[800],light:_[500],dark:_[900]}}(e),A=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(e);function C(t){return(0,c.eM)(t,E.text.primary)>=n?E.text.primary:T.text.primary}const R=t=>{let{color:e,name:n,mainShade:r=500,lightShade:o=300,darkShade:l=700}=t;if(e=(0,i.A)({},e),!e.main&&e[r]&&(e.main=e[r]),!e.hasOwnProperty("main"))throw new Error((0,s.A)(11,n?" (".concat(n,")"):"",r));if("string"!==typeof e.main)throw new Error((0,s.A)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return x(e,"light",o,a),x(e,"dark",l,a),e.contrastText||(e.contrastText=C(e.main)),e},D={dark:E,light:T};return(0,o.A)((0,i.A)({common:(0,i.A)({},u),mode:e,primary:R({color:h,name:"primary"}),secondary:R({color:I,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:b,name:"error"}),warning:R({color:A,name:"warning"}),info:R({color:w,name:"info"}),success:R({color:S,name:"success"}),grey:p,contrastThreshold:n,getContrastText:C,augmentColor:R,tonalOffset:a},D[e]),l)}const b=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const w={textTransform:"uppercase"},S='"Roboto", "Helvetica", "Arial", sans-serif';function A(t,e){const n="function"===typeof e?e(t):e,{fontFamily:s=S,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:h=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:p=16,allVariants:d,pxToRem:f}=n,m=(0,r.A)(n,b);const g=a/14,y=f||(t=>"".concat(t/p*g,"rem")),_=(t,e,n,r,o)=>{return(0,i.A)({fontFamily:s,fontWeight:t,fontSize:y(e),lineHeight:n},s===S?{letterSpacing:"".concat((a=r/e,Math.round(1e5*a)/1e5),"em")}:{},o,d);var a},v={h1:_(l,96,1.167,-1.5),h2:_(l,60,1.2,-.5),h3:_(h,48,1.167,0),h4:_(h,34,1.235,.25),h5:_(h,24,1.334,0),h6:_(c,20,1.6,.15),subtitle1:_(h,16,1.75,.15),subtitle2:_(c,14,1.57,.1),body1:_(h,16,1.5,.15),body2:_(h,14,1.43,.15),button:_(c,14,1.75,.4,w),caption:_(h,12,1.66,.4),overline:_(h,12,2.66,1,w),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.A)((0,i.A)({htmlFontSize:p,pxToRem:y,fontFamily:s,fontSize:a,fontWeightLight:l,fontWeightRegular:h,fontWeightMedium:c,fontWeightBold:u},v),m,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const R=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],D=["duration","easing","delay"],O={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},N={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function M(t){return"".concat(Math.round(t),"ms")}function P(t){if(!t)return 0;const e=t/36;return Math.round(10*(4+15*e**.25+e/5))}function F(t){const e=(0,i.A)({},O,t.easing),n=(0,i.A)({},N,t.duration);return(0,i.A)({getAutoHeightDuration:P,create:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:o=e.easeInOut,delay:a=0}=i;(0,r.A)(i,D);return(Array.isArray(t)?t:[t]).map((t=>"".concat(t," ").concat("string"===typeof s?s:M(s)," ").concat(o," ").concat("string"===typeof a?a:M(a)))).join(",")}},t,{easing:e,duration:n})}const L={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},k=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function U(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:e={},palette:n={},transitions:c={},typography:u={}}=t,p=(0,r.A)(t,k);if(t.vars)throw new Error((0,s.A)(18));const d=I(n),f=(0,a.A)(t);let m=(0,o.A)(f,{mixins:(g=f.breakpoints,y=e,(0,i.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},y)),palette:d,shadows:R.slice(),typography:A(d,u),transitions:F(c),zIndex:(0,i.A)({},L)});var g,y;m=(0,o.A)(m,p);for(var _=arguments.length,v=new Array(_>1?_-1:0),T=1;T<_;T++)v[T-1]=arguments[T];return m=v.reduce(((t,e)=>(0,o.A)(t,e)),m),m.unstable_sxConfig=(0,i.A)({},l.A,null==p?void 0:p.unstable_sxConfig),m.unstable_sx=function(t){return(0,h.A)({sx:t,theme:this})},m}const B=U},5170:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=(0,n(8279).A)()},3375:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i="$$material"},5658:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>I,ep:()=>T,_n:()=>E});var i=n(8168),r=n(8587),s=n(4984),o=n(3216),a=n(7322),l=n(8812);const h=["ownerState"],c=["variants"],u=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const d=(0,a.A)(),f=t=>t?t.charAt(0).toLowerCase()+t.slice(1):t;function m(t){let{defaultTheme:e,theme:n,themeId:i}=t;return r=n,0===Object.keys(r).length?e:n[i]||n;var r}function g(t){return t?(e,n)=>n[t]:null}function y(t,e){let{ownerState:n}=e,s=(0,r.A)(e,h);const o="function"===typeof t?t((0,i.A)({ownerState:n},s)):t;if(Array.isArray(o))return o.flatMap((t=>y(t,(0,i.A)({ownerState:n},s))));if(o&&"object"===typeof o&&Array.isArray(o.variants)){const{variants:t=[]}=o;let e=(0,r.A)(o,c);return t.forEach((t=>{let r=!0;"function"===typeof t.props?r=t.props((0,i.A)({ownerState:n},s)):Object.keys(t.props).forEach((e=>{(null==n?void 0:n[e])!==t.props[e]&&s[e]!==t.props[e]&&(r=!1)})),r&&(Array.isArray(e)||(e=[e]),e.push("function"===typeof t.style?t.style((0,i.A)({ownerState:n},s)):t.style))})),e}return o}var _=n(5170),v=n(3375);const T=t=>p(t)&&"classes"!==t,E=p,x=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:e,defaultTheme:n=d,rootShouldForwardProp:a=p,slotShouldForwardProp:h=p}=t,c=t=>(0,l.A)((0,i.A)({},t,{theme:m((0,i.A)({},t,{defaultTheme:n,themeId:e}))}));return c.__mui_systemSx=!0,function(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.q_)(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:d,slot:_,skipVariantsResolver:v,skipSx:T,overridesResolver:E=g(f(_))}=l,x=(0,r.A)(l,u),I=void 0!==v?v:_&&"Root"!==_&&"root"!==_||!1,b=T||!1;let w=p;"Root"===_||"root"===_?w=a:_?w=h:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(w=void 0);const S=(0,s.Ay)(t,(0,i.A)({shouldForwardProp:w,label:undefined},x)),A=t=>"function"===typeof t&&t.__emotion_real!==t||(0,o.Q)(t)?r=>y(t,(0,i.A)({},r,{theme:m({theme:r.theme,defaultTheme:n,themeId:e})})):t,C=function(r){let s=A(r);for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];const h=a?a.map(A):[];d&&E&&h.push((t=>{const r=m((0,i.A)({},t,{defaultTheme:n,themeId:e}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const s=r.components[d].styleOverrides,o={};return Object.entries(s).forEach((e=>{let[n,s]=e;o[n]=y(s,(0,i.A)({},t,{theme:r}))})),E(t,o)})),d&&!I&&h.push((t=>{var r;const s=m((0,i.A)({},t,{defaultTheme:n,themeId:e}));return y({variants:null==s||null==(r=s.components)||null==(r=r[d])?void 0:r.variants},(0,i.A)({},t,{theme:s}))})),b||h.push(c);const u=h.length-a.length;if(Array.isArray(r)&&u>0){const t=new Array(u).fill("");s=[...r,...t],s.raw=[...r.raw,...t]}const p=S(s,...h);return t.muiName&&(p.muiName=t.muiName),p};return S.withConfig&&(C.withConfig=S.withConfig),C}}({themeId:v.A,defaultTheme:_.A,rootShouldForwardProp:T}),I=x},1070:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(2018);var r=n(8653);function s(t){let{props:e,name:n,defaultTheme:s,themeId:o}=t,a=(0,r.A)(s);o&&(a=a[o]||a);const l=function(t){const{theme:e,name:n,props:r}=t;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,i.A)(e.components[n].defaultProps,r):r}({theme:a,name:n,props:e});return l}var o=n(5170),a=n(3375);function l(t){let{props:e,name:n}=t;return s({props:e,name:n,defaultTheme:o.A,themeId:a.A})}},6803:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(410).A},9662:(t,e,n)=>{"use strict";n.d(e,{A:()=>v});var i=n(8168),r=n(5043),s=n(8587),o=n(8387),a=n(8606),l=n(6803),h=n(1070),c=n(5658),u=n(7056),p=n(2400);function d(t){return(0,p.Ay)("MuiSvgIcon",t)}(0,u.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(579);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,c.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"inherit"!==n.color&&e["color".concat((0,l.A)(n.color))],e["fontSize".concat((0,l.A)(n.fontSize))]]}})((t=>{let{theme:e,ownerState:n}=t;var i,r,s,o,a,l,h,c,u,p,d,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(i=e.transitions)||null==(r=i.create)?void 0:r.call(i,"fill",{duration:null==(s=e.transitions)||null==(s=s.duration)?void 0:s.shorter}),fontSize:{inherit:"inherit",small:(null==(o=e.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(l=e.typography)||null==(h=l.pxToRem)?void 0:h.call(l,24))||"1.5rem",large:(null==(c=e.typography)||null==(u=c.pxToRem)?void 0:u.call(c,35))||"2.1875rem"}[n.fontSize],color:null!=(p=null==(d=(e.vars||e).palette)||null==(d=d[n.color])?void 0:d.main)?p:{action:null==(f=(e.vars||e).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(e.vars||e).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),y=r.forwardRef((function(t,e){const n=(0,h.A)({props:t,name:"MuiSvgIcon"}),{children:c,className:u,color:p="inherit",component:y="svg",fontSize:_="medium",htmlColor:v,inheritViewBox:T=!1,titleAccess:E,viewBox:x="0 0 24 24"}=n,I=(0,s.A)(n,m),b=r.isValidElement(c)&&"svg"===c.type,w=(0,i.A)({},n,{color:p,component:y,fontSize:_,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:x,hasSvgAsChild:b}),S={};T||(S.viewBox=x);const A=(t=>{const{color:e,fontSize:n,classes:i}=t,r={root:["root","inherit"!==e&&"color".concat((0,l.A)(e)),"fontSize".concat((0,l.A)(n))]};return(0,a.A)(r,d,i)})(w);return(0,f.jsxs)(g,(0,i.A)({as:y,className:(0,o.A)(A.root,u),focusable:"false",color:v,"aria-hidden":!E||void 0,role:E?"img":void 0,ref:e},S,I,b&&c.props,{ownerState:w,children:[b?c.props.children:c,E?(0,f.jsx)("title",{children:E}):null]}))}));y.muiName="SvgIcon";const _=y;function v(t,e){function n(n,r){return(0,f.jsx)(_,(0,i.A)({"data-testid":"".concat(e,"Icon"),ref:r},n,{children:t}))}return n.muiName=_.muiName,r.memo(r.forwardRef(n))}},950:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(6440).A},4962:(t,e,n)=>{"use strict";n.r(e),n.d(e,{capitalize:()=>r.A,createChainedFunction:()=>s,createSvgIcon:()=>o.A,debounce:()=>a.A,deprecatedPropType:()=>l,isMuiElement:()=>h.A,ownerDocument:()=>c.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>d,unstable_ClassNameGenerator:()=>E,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>m,unsupportedProp:()=>g,useControlled:()=>y.A,useEventCallback:()=>_.A,useForkRef:()=>v.A,useIsFocusVisible:()=>T.A});var i=n(5430),r=n(6803);const s=n(4708).A;var o=n(9662),a=n(950);const l=function(t,e){return()=>null};var h=n(154),c=n(2427),u=n(6078);n(8168);const p=function(t,e){return()=>null};const d=n(9184).A;var f=n(5013);const m=n(992).A;const g=function(t,e,n,i,r){return null};var y=n(5242),_=n(3319),v=n(5849),T=n(2191);const E={configure:t=>{i.A.configure(t)}}},154:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(5043);const r=function(t,e){var n,r;return i.isValidElement(t)&&-1!==e.indexOf(null!=(n=t.type.muiName)?n:null==(r=t.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)}},2427:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(2144).A},6078:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(6288).A},5242:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(5043);const r=function(t){let{controlled:e,default:n,name:r,state:s="value"}=t;const{current:o}=i.useRef(void 0!==e),[a,l]=i.useState(n);return[o?e:a,i.useCallback((t=>{o||l(t)}),[])]}},5013:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(3844).A},3319:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(4626).A},5849:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(7042).A},2191:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});var i=n(5043),r=n(1140);let s=!0,o=!1;const a=new r.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function h(t){t.metaKey||t.altKey||t.ctrlKey||(s=!0)}function c(){s=!1}function u(){"hidden"===this.visibilityState&&o&&(s=!0)}function p(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(n){}return s||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!l[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}const d=function(){const t=i.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",h,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("touchstart",c,!0),e.addEventListener("visibilitychange",u,!0))}),[]),e=i.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!p(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(o=!0,a.start(100,(()=>{o=!1})),e.current=!1,!0)},ref:t}}},4984:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>_,q_:()=>v});var i=n(8168),r=n(5043),s=n(918),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,s.A)((function(t){return o.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),l=n(5025),h=n(1722),c=n(2830),u=n(9436),p=a,d=function(t){return"theme"!==t},f=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?p:d},m=function(t,e,n){var i;if(e){var r=e.shouldForwardProp;i=t.__emotion_forwardProp&&r?function(e){return t.__emotion_forwardProp(e)&&r(e)}:r}return"function"!==typeof i&&n&&(i=t.__emotion_forwardProp),i},g=function(t){var e=t.cache,n=t.serialized,i=t.isStringTag;return(0,h.SF)(e,n,i),(0,u.s)((function(){return(0,h.sk)(e,n,i)})),null},y=function t(e,n){var s,o,a=e.__emotion_real===e,u=a&&e.__emotion_base||e;void 0!==n&&(s=n.label,o=n.target);var p=m(e,n,a),d=p||f(u),y=!d("as");return function(){var _=arguments,v=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==s&&v.push("label:"+s+";"),null==_[0]||void 0===_[0].raw)v.push.apply(v,_);else{0,v.push(_[0][0]);for(var T=_.length,E=1;E<T;E++)v.push(_[E],_[0][E])}var x=(0,l.w)((function(t,e,n){var i=y&&t.as||u,s="",a=[],m=t;if(null==t.theme){for(var _ in m={},t)m[_]=t[_];m.theme=r.useContext(l.T)}"string"===typeof t.className?s=(0,h.Rk)(e.registered,a,t.className):null!=t.className&&(s=t.className+" ");var T=(0,c.J)(v.concat(a),e.registered,m);s+=e.key+"-"+T.name,void 0!==o&&(s+=" "+o);var E=y&&void 0===p?f(i):d,x={};for(var I in t)y&&"as"===I||E(I)&&(x[I]=t[I]);return x.className=s,x.ref=n,r.createElement(r.Fragment,null,r.createElement(g,{cache:e,serialized:T,isStringTag:"string"===typeof i}),r.createElement(i,x))}));return x.displayName=void 0!==s?s:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=u,x.__emotion_styles=v,x.__emotion_forwardProp=p,Object.defineProperty(x,"toString",{value:function(){return"."+o}}),x.withComponent=function(e,r){return t(e,(0,i.A)({},n,r,{shouldForwardProp:m(x,r,!0)})).apply(void 0,v)},x}}.bind();function _(t,e){return y(t,e)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){y[t]=y(t)}));const v=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},9751:(t,e,n)=>{"use strict";n.d(e,{EU:()=>o,NI:()=>s,vf:()=>a,zu:()=>i});const i={xs:0,sm:600,md:900,lg:1200,xl:1536},r={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(i[t],"px)")};function s(t,e,n){const s=t.theme||{};if(Array.isArray(e)){const t=s.breakpoints||r;return e.reduce(((i,r,s)=>(i[t.up(t.keys[s])]=n(e[s]),i)),{})}if("object"===typeof e){const t=s.breakpoints||r;return Object.keys(e).reduce(((r,s)=>{if(-1!==Object.keys(t.values||i).indexOf(s)){r[t.up(s)]=n(e[s],s)}else{const t=s;r[t]=e[t]}return r}),{})}return n(e)}function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;return(null==(e=t.keys)?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function a(t,e){return t.reduce(((t,e)=>{const n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}},3650:(t,e,n)=>{"use strict";n.d(e,{X4:()=>c,e$:()=>u,eM:()=>h,a:()=>p});var i=n(6632);const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(e,Math.min(t,n))};function s(t){return r(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function o(t){if(t.type)return t;if("#"===t.charAt(0))return o(function(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&1===n[0].length&&(n=n.map((t=>t+t))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((t,e)=>e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3)).join(", "),")"):""}(t));const e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.A)(9,t));let r,s=t.substring(e+1,t.length-1);if("color"===n){if(s=s.split(" "),r=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.A)(10,r))}else s=s.split(",");return s=s.map((t=>parseFloat(t))),{type:n,values:s,colorSpace:r}}function a(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return-1!==e.indexOf("rgb")?i=i.map(((t,e)=>e<3?parseInt(t,10):t)):-1!==e.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),i=-1!==e.indexOf("color")?"".concat(n," ").concat(i.join(" ")):"".concat(i.join(", ")),"".concat(e,"(").concat(i,")")}function l(t){let e="hsl"===(t=o(t)).type||"hsla"===t.type?o(function(t){t=o(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),l=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return r-s*Math.max(Math.min(e-3,9-e,1),-1)};let h="rgb";const c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===t.type&&(h+="a",c.push(e[3])),a({type:h,values:c})}(t)).values:t.values;return e=e.map((e=>("color"!==t.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4))),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function h(t,e){const n=l(t),i=l(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function c(t,e){return t=o(t),e=s(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,a(t)}function u(t,e){if(t=o(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return a(t)}function p(t,e){if(t=o(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return a(t)}},7322:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var i=n(8168),r=n(8587),s=n(3216);const o=["values","unit","step"],a=t=>{const e=Object.keys(t).map((e=>({key:e,val:t[e]})))||[];return e.sort(((t,e)=>t.val-e.val)),e.reduce(((t,e)=>(0,i.A)({},t,{[e.key]:e.val})),{})};const l={borderRadius:4};var h=n(8604);var c=n(8812),u=n(7758);function p(t,e){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){return{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}}return n.palette.mode===t?e:{}}const d=["breakpoints","palette","spacing","shape"];const f=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:e={},palette:n={},spacing:f,shape:m={}}=t,g=(0,r.A)(t,d),y=function(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=t,l=(0,r.A)(t,o),h=a(e),c=Object.keys(h);function u(t){const i="number"===typeof e[t]?e[t]:t;return"@media (min-width:".concat(i).concat(n,")")}function p(t){const i="number"===typeof e[t]?e[t]:t;return"@media (max-width:".concat(i-s/100).concat(n,")")}function d(t,i){const r=c.indexOf(i);return"@media (min-width:".concat("number"===typeof e[t]?e[t]:t).concat(n,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof e[c[r]]?e[c[r]]:i)-s/100).concat(n,")")}return(0,i.A)({keys:c,values:h,up:u,down:p,between:d,only:function(t){return c.indexOf(t)+1<c.length?d(t,c[c.indexOf(t)+1]):u(t)},not:function(t){const e=c.indexOf(t);return 0===e?u(c[1]):e===c.length-1?p(c[e]):d(t,c[c.indexOf(t)+1]).replace("@media","@media not all and")},unit:n},l)}(e),_=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;const e=(0,h.LX)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(0===n.length?[1]:n).map((t=>{const n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(f);let v=(0,s.A)({breakpoints:y,direction:"ltr",components:{},palette:(0,i.A)({mode:"light"},n),spacing:_,shape:(0,i.A)({},l,m)},g);v.applyStyles=p;for(var T=arguments.length,E=new Array(T>1?T-1:0),x=1;x<T;x++)E[x-1]=arguments[x];return v=E.reduce(((t,e)=>(0,s.A)(t,e)),v),v.unstable_sxConfig=(0,i.A)({},u.A,null==g?void 0:g.unstable_sxConfig),v.unstable_sx=function(t){return(0,c.A)({sx:t,theme:this})},v}},3815:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(3216);const r=function(t,e){return e?(0,i.A)(t,e,{clone:!1}):t}},8604:(t,e,n)=>{"use strict";n.d(e,{LX:()=>f,MA:()=>d,_W:()=>m,Lc:()=>_,Ms:()=>v});var i=n(9751),r=n(7162),s=n(3815);const o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},h=function(t){const e={};return n=>(void 0===e[n]&&(e[n]=t(n)),e[n])}((t=>{if(t.length>2){if(!l[t])return[t];t=l[t]}const[e,n]=t.split(""),i=o[e],r=a[n]||"";return Array.isArray(r)?r.map((t=>i+t)):[i+r]})),c=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[...c,...u];function d(t,e,n,i){var s;const o=null!=(s=(0,r.Yn)(t,e,!1))?s:n;return"number"===typeof o?t=>"string"===typeof t?t:o*t:Array.isArray(o)?t=>"string"===typeof t?t:o[t]:"function"===typeof o?o:()=>{}}function f(t){return d(t,"spacing",8)}function m(t,e){if("string"===typeof e||null==e)return e;const n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(t,e,n,r){if(-1===e.indexOf(n))return null;const s=function(t,e){return n=>t.reduce(((t,i)=>(t[i]=m(e,n),t)),{})}(h(n),r),o=t[n];return(0,i.NI)(t,o,s)}function y(t,e){const n=f(t.theme);return Object.keys(t).map((i=>g(t,e,i,n))).reduce(s.A,{})}function _(t){return y(t,c)}function v(t){return y(t,u)}function T(t){return y(t,p)}_.propTypes={},_.filterProps=c,v.propTypes={},v.filterProps=u,T.propTypes={},T.filterProps=p},7162:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>a,BO:()=>o,Yn:()=>s});var i=n(410),r=n(9751);function s(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){const n="vars.".concat(e).split(".").reduce(((t,e)=>t&&t[e]?t[e]:null),t);if(null!=n)return n}return e.split(".").reduce(((t,e)=>t&&null!=t[e]?t[e]:null),t)}function o(t,e,n){let i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return i="function"===typeof t?t(n):Array.isArray(t)?t[n]||r:s(t,n)||r,e&&(i=e(i,r,t)),i}const a=function(t){const{prop:e,cssProperty:n=t.prop,themeKey:a,transform:l}=t,h=t=>{if(null==t[e])return null;const h=t[e],c=s(t.theme,a)||{};return(0,r.NI)(t,h,(t=>{let r=o(c,l,t);return t===r&&"string"===typeof t&&(r=o(c,l,"".concat(e).concat("default"===t?"":(0,i.A)(t)),t)),!1===n?r:{[n]:r}}))};return h.propTypes={},h.filterProps=[e],h}},7758:(t,e,n)=>{"use strict";n.d(e,{A:()=>P});var i=n(8604),r=n(7162),s=n(3815);const o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.reduce(((t,e)=>(e.filterProps.forEach((n=>{t[n]=e})),t)),{}),r=t=>Object.keys(t).reduce(((e,n)=>i[n]?(0,s.A)(e,i[n](t)):e),{});return r.propTypes={},r.filterProps=e.reduce(((t,e)=>t.concat(e.filterProps)),[]),r};var a=n(9751);function l(t){return"number"!==typeof t?t:"".concat(t,"px solid")}function h(t,e){return(0,r.Ay)({prop:t,themeKey:"borders",transform:e})}const c=h("border",l),u=h("borderTop",l),p=h("borderRight",l),d=h("borderBottom",l),f=h("borderLeft",l),m=h("borderColor"),g=h("borderTopColor"),y=h("borderRightColor"),_=h("borderBottomColor"),v=h("borderLeftColor"),T=h("outline",l),E=h("outlineColor"),x=t=>{if(void 0!==t.borderRadius&&null!==t.borderRadius){const e=(0,i.MA)(t.theme,"shape.borderRadius",4,"borderRadius"),n=t=>({borderRadius:(0,i._W)(e,t)});return(0,a.NI)(t,t.borderRadius,n)}return null};x.propTypes={},x.filterProps=["borderRadius"];o(c,u,p,d,f,m,g,y,_,v,x,T,E);const I=t=>{if(void 0!==t.gap&&null!==t.gap){const e=(0,i.MA)(t.theme,"spacing",8,"gap"),n=t=>({gap:(0,i._W)(e,t)});return(0,a.NI)(t,t.gap,n)}return null};I.propTypes={},I.filterProps=["gap"];const b=t=>{if(void 0!==t.columnGap&&null!==t.columnGap){const e=(0,i.MA)(t.theme,"spacing",8,"columnGap"),n=t=>({columnGap:(0,i._W)(e,t)});return(0,a.NI)(t,t.columnGap,n)}return null};b.propTypes={},b.filterProps=["columnGap"];const w=t=>{if(void 0!==t.rowGap&&null!==t.rowGap){const e=(0,i.MA)(t.theme,"spacing",8,"rowGap"),n=t=>({rowGap:(0,i._W)(e,t)});return(0,a.NI)(t,t.rowGap,n)}return null};w.propTypes={},w.filterProps=["rowGap"];o(I,b,w,(0,r.Ay)({prop:"gridColumn"}),(0,r.Ay)({prop:"gridRow"}),(0,r.Ay)({prop:"gridAutoFlow"}),(0,r.Ay)({prop:"gridAutoColumns"}),(0,r.Ay)({prop:"gridAutoRows"}),(0,r.Ay)({prop:"gridTemplateColumns"}),(0,r.Ay)({prop:"gridTemplateRows"}),(0,r.Ay)({prop:"gridTemplateAreas"}),(0,r.Ay)({prop:"gridArea"}));function S(t,e){return"grey"===e?e:t}o((0,r.Ay)({prop:"color",themeKey:"palette",transform:S}),(0,r.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:S}),(0,r.Ay)({prop:"backgroundColor",themeKey:"palette",transform:S}));function A(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}const C=(0,r.Ay)({prop:"width",transform:A}),R=t=>{if(void 0!==t.maxWidth&&null!==t.maxWidth){const e=e=>{var n,i;const r=(null==(n=t.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[e])||a.zu[e];return r?"px"!==(null==(i=t.theme)||null==(i=i.breakpoints)?void 0:i.unit)?{maxWidth:"".concat(r).concat(t.theme.breakpoints.unit)}:{maxWidth:r}:{maxWidth:A(e)}};return(0,a.NI)(t,t.maxWidth,e)}return null};R.filterProps=["maxWidth"];const D=(0,r.Ay)({prop:"minWidth",transform:A}),O=(0,r.Ay)({prop:"height",transform:A}),N=(0,r.Ay)({prop:"maxHeight",transform:A}),M=(0,r.Ay)({prop:"minHeight",transform:A}),P=((0,r.Ay)({prop:"size",cssProperty:"width",transform:A}),(0,r.Ay)({prop:"size",cssProperty:"height",transform:A}),o(C,R,D,O,N,M,(0,r.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:x},color:{themeKey:"palette",transform:S},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:S},backgroundColor:{themeKey:"palette",transform:S},p:{style:i.Ms},pt:{style:i.Ms},pr:{style:i.Ms},pb:{style:i.Ms},pl:{style:i.Ms},px:{style:i.Ms},py:{style:i.Ms},padding:{style:i.Ms},paddingTop:{style:i.Ms},paddingRight:{style:i.Ms},paddingBottom:{style:i.Ms},paddingLeft:{style:i.Ms},paddingX:{style:i.Ms},paddingY:{style:i.Ms},paddingInline:{style:i.Ms},paddingInlineStart:{style:i.Ms},paddingInlineEnd:{style:i.Ms},paddingBlock:{style:i.Ms},paddingBlockStart:{style:i.Ms},paddingBlockEnd:{style:i.Ms},m:{style:i.Lc},mt:{style:i.Lc},mr:{style:i.Lc},mb:{style:i.Lc},ml:{style:i.Lc},mx:{style:i.Lc},my:{style:i.Lc},margin:{style:i.Lc},marginTop:{style:i.Lc},marginRight:{style:i.Lc},marginBottom:{style:i.Lc},marginLeft:{style:i.Lc},marginX:{style:i.Lc},marginY:{style:i.Lc},marginInline:{style:i.Lc},marginInlineStart:{style:i.Lc},marginInlineEnd:{style:i.Lc},marginBlock:{style:i.Lc},marginBlockStart:{style:i.Lc},marginBlockEnd:{style:i.Lc},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:I},rowGap:{style:w},columnGap:{style:b},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:A},maxWidth:{style:R},minWidth:{transform:A},height:{transform:A},maxHeight:{transform:A},minHeight:{transform:A},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8812:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var i=n(410),r=n(3815),s=n(7162),o=n(9751),a=n(7758);const l=function(){function t(t,e,n,r){const a={[t]:e,theme:n},l=r[t];if(!l)return{[t]:e};const{cssProperty:h=t,themeKey:c,transform:u,style:p}=l;if(null==e)return null;if("typography"===c&&"inherit"===e)return{[t]:e};const d=(0,s.Yn)(n,c)||{};if(p)return p(a);return(0,o.NI)(a,e,(e=>{let n=(0,s.BO)(d,u,e);return e===n&&"string"===typeof e&&(n=(0,s.BO)(d,u,"".concat(t).concat("default"===e?"":(0,i.A)(e)),e)),!1===h?n:{[h]:n}}))}return function e(n){var i;const{sx:s,theme:l={}}=n||{};if(!s)return null;const h=null!=(i=l.unstable_sxConfig)?i:a.A;function c(n){let i=n;if("function"===typeof n)i=n(l);else if("object"!==typeof n)return n;if(!i)return null;const s=(0,o.EU)(l.breakpoints),a=Object.keys(s);let c=s;return Object.keys(i).forEach((n=>{const s=(a=i[n],u=l,"function"===typeof a?a(u):a);var a,u;if(null!==s&&void 0!==s)if("object"===typeof s)if(h[n])c=(0,r.A)(c,t(n,s,l,h));else{const t=(0,o.NI)({theme:l},s,(t=>({[n]:t})));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.reduce(((t,e)=>t.concat(Object.keys(e))),[]),r=new Set(i);return e.every((t=>r.size===Object.keys(t).length))}(t,s)?c=(0,r.A)(c,t):c[n]=e({sx:s,theme:l})}else c=(0,r.A)(c,t(n,s,l,h))})),(0,o.vf)(a,c)}return Array.isArray(s)?s.map(c):c(s)}}();l.filterProps=["sx"];const h=l},8653:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(7322),r=n(5043),s=n(5025);const o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=r.useContext(s.T);return e&&(n=e,0!==Object.keys(n).length)?e:t;var n},a=(0,i.A)();const l=function(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a)}},5430:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const i=t=>t,r=(()=>{let t=i;return{configure(e){t=e},generate:e=>t(e),reset(){t=i}}})()},410:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(6632);function r(t){if("string"!==typeof t)throw new Error((0,i.A)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},8606:(t,e,n)=>{"use strict";function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i={};return Object.keys(t).forEach((r=>{i[r]=t[r].reduce(((t,i)=>{if(i){const r=e(i);""!==r&&t.push(r),n&&n[i]&&t.push(n[i])}return t}),[]).join(" ")})),i}n.d(e,{A:()=>i})},4708:(t,e,n)=>{"use strict";function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>null==e?t:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(this,i),e.apply(this,i)}),(()=>{}))}n.d(e,{A:()=>i})},6440:(t,e,n)=>{"use strict";function i(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];clearTimeout(e),e=setTimeout((()=>{t.apply(this,r)}),n)}return i.clear=()=>{clearTimeout(e)},i}n.d(e,{A:()=>i})},3216:(t,e,n)=>{"use strict";n.d(e,{A:()=>o,Q:()=>r});var i=n(8168);function r(t){if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function s(t){if(!r(t))return t;const e={};return Object.keys(t).forEach((n=>{e[n]=s(t[n])})),e}function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,i.A)({},t):t;return r(t)&&r(e)&&Object.keys(e).forEach((i=>{"__proto__"!==i&&(r(e[i])&&i in t&&r(t[i])?a[i]=o(t[i],e[i],n):n.clone?a[i]=r(e[i])?s(e[i]):e[i]:a[i]=e[i])})),a}},6632:(t,e,n)=>{"use strict";function i(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{A:()=>i})},2400:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>s});var i=n(5430);const r={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function s(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const s=r[e];return s?"".concat(n,"-").concat(s):"".concat(i.A.generate(t),"-").concat(e)}},7056:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(2400);function r(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return e.forEach((e=>{r[e]=(0,i.Ay)(t,e,n)})),r}},2144:(t,e,n)=>{"use strict";function i(t){return t&&t.ownerDocument||document}n.d(e,{A:()=>i})},6288:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(2144);function r(t){return(0,i.A)(t).defaultView||window}},2018:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(8168);function r(t,e){const n=(0,i.A)({},e);return Object.keys(t).forEach((s=>{if(s.toString().match(/^(components|slots)$/))n[s]=(0,i.A)({},t[s],n[s]);else if(s.toString().match(/^(componentsProps|slotProps)$/)){const o=t[s]||{},a=e[s];n[s]={},a&&Object.keys(a)?o&&Object.keys(o)?(n[s]=(0,i.A)({},a),Object.keys(o).forEach((t=>{n[s][t]=r(o[t],a[t])}))):n[s]=a:n[s]=o}else void 0===n[s]&&(n[s]=t[s])})),n}},9184:(t,e,n)=>{"use strict";function i(t,e){"function"===typeof t?t(e):t&&(t.current=e)}n.d(e,{A:()=>i})},3844:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(5043);const r="undefined"!==typeof window?i.useLayoutEffect:i.useEffect},4626:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(5043),r=n(3844);const s=function(t){const e=i.useRef(t);return(0,r.A)((()=>{e.current=t})),i.useRef((function(){return(0,e.current)(...arguments)})).current}},7042:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(5043),r=n(9184);function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.useMemo((()=>e.every((t=>null==t))?null:t=>{e.forEach((e=>{(0,r.A)(e,t)}))}),e)}},992:(t,e,n)=>{"use strict";var i;n.d(e,{A:()=>a});var r=n(5043);let s=0;const o=(i||(i=n.t(r,2)))["useId".toString()];function a(t){if(void 0!==o){const e=o();return null!=t?t:e}return function(t){const[e,n]=r.useState(t),i=t||e;return r.useEffect((()=>{null==e&&(s+=1,n("mui-".concat(s)))}),[e]),i}(t)}},1140:(t,e,n)=>{"use strict";n.d(e,{E:()=>o,A:()=>a});var i=n(5043);const r={};const s=[];class o{constructor(){this.currentId=0,this.clear=()=>{0!==this.currentId&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new o}start(t,e){this.clear(),this.currentId=setTimeout((()=>{this.currentId=0,e()}),t)}}function a(){const t=function(t,e){const n=i.useRef(r);return n.current===r&&(n.current=t(e)),n}(o.create).current;var e;return e=t.disposeEffect,i.useEffect(e,s),t}},219:(t,e,n)=>{"use strict";var i=n(3763),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return i.isMemo(t)?o:a[t.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=o;var h=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,i){if("string"!==typeof n){if(f){var r=d(n);r&&r!==f&&t(e,r,i)}var o=c(n);u&&(o=o.concat(u(n)));for(var a=l(e),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!i||!i[y])&&(!m||!m[y])&&(!a||!a[y])){var _=p(n,y);try{h(e,y,_)}catch(v){}}}}return e}},4983:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,T=n?Symbol.for("react.scope"):60119;function E(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case c:case u:case s:case a:case o:case d:return t;default:switch(t=t&&t.$$typeof){case h:case p:case g:case m:case l:return t;default:return e}}case r:return e}}}function x(t){return E(t)===u}e.AsyncMode=c,e.ConcurrentMode=u,e.ContextConsumer=h,e.ContextProvider=l,e.Element=i,e.ForwardRef=p,e.Fragment=s,e.Lazy=g,e.Memo=m,e.Portal=r,e.Profiler=a,e.StrictMode=o,e.Suspense=d,e.isAsyncMode=function(t){return x(t)||E(t)===c},e.isConcurrentMode=x,e.isContextConsumer=function(t){return E(t)===h},e.isContextProvider=function(t){return E(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return E(t)===p},e.isFragment=function(t){return E(t)===s},e.isLazy=function(t){return E(t)===g},e.isMemo=function(t){return E(t)===m},e.isPortal=function(t){return E(t)===r},e.isProfiler=function(t){return E(t)===a},e.isStrictMode=function(t){return E(t)===o},e.isSuspense=function(t){return E(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===u||t===a||t===o||t===d||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===h||t.$$typeof===p||t.$$typeof===_||t.$$typeof===v||t.$$typeof===T||t.$$typeof===y)},e.typeOf=E},3763:(t,e,n)=>{"use strict";t.exports=n(4983)},879:function(t){t.exports=function(){"use strict";var t,e,n;function i(i,r){if(t)if(e){var s="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",o={};t(o),n=r(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else e=r;else t=r}return i(["exports"],(function(t){var e="undefined"!=typeof self?self:{},n="2.12.1";let i;const r={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==i){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{i=null!={NODE_ENV:"production",PUBLIC_URL:"/ifc-app2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/ifc-app2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):t}catch(e){i=t}}return i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},s={supported:!1,testSupport:function(t){!l&&a&&(h?c(t):o=t)}};let o,a,l=!1,h=!1;function c(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.isContextLost())return;s.supported=!0}catch(t){}t.deleteTexture(e),l=!0}e.document&&(a=e.document.createElement("img"),a.onload=function(){o&&c(o),o=null,h=!0},a.onerror=function(){l=!0,o=null},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const u="01";var p=d;function d(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=i}d.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,i=0;i<8;i++){var r=this.sampleCurveX(n)-t;if(Math.abs(r)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=r/s}var o=0,a=1;for(n=t,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-t)<e));i++)t>r?o=n:a=n,n=.5*(a-o)+o;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var f=m;function m(t,e){this.x=t,this.y=e}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(t){return t instanceof m?t:Array.isArray(t)?new m(t[0],t[1]):t};const g=Math.PI/180,y=180/Math.PI;function _(t){return t*g}function v(t){return t*y}const T=[[0,0],[1,0],[1,1],[0,1]];function E(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function x(t,e,n,i){const r=new p(t,e,n,i);return function(t){return r.solve(t)}}const I=x(.25,.1,.25,1);function b(t,e,n){return Math.min(n,Math.max(e,t))}function w(t,e,n){return(n=b((n-t)/(e-t),0,1))*n*(3-2*n)}function S(t,e,n){const i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function A(t,e,n){if(!t.length)return n(null,[]);let i=t.length;const r=new Array(t.length);let s=null;t.forEach(((t,o)=>{e(t,((t,e)=>{t&&(s=t),r[o]=e,0==--i&&n(s,r)}))}))}function C(t){const e=[];for(const n in t)e.push(t[n]);return e}function R(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n)for(const e in r)t[e]=r[e];return t}let D=1;function O(){return D++}function N(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function M(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function P(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function F(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function L(t,e){return-1!==t.indexOf(e,t.length-e.length)}function k(t,e,n){const i={};for(const r in t)i[r]=e.call(n||this,t[r],r,t);return i}function U(t,e,n){const i={};for(const r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function B(t){return Array.isArray(t)?t.map(B):"object"==typeof t&&t?k(t,B):t}const z={};function G(t){z[t]||("undefined"!=typeof console&&console.warn(t),z[t]=!0)}function H(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function V(t){let e=0;for(let n,i,r=0,s=t.length,o=s-1;r<s;o=r++)n=t[r],i=t[o],e+=(i.x-n.x)*(n.y+i.y);return e}function j(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function W(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,i,r)=>{const s=i||r;return e[n]=!s||s.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let Y=null;function q(t){if(null==Y){const e=t.navigator?t.navigator.userAgent:null;Y=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Y}function X(t){try{const n=e[t];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function Z(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const K="mapbox-tiles";let Q,J,$=500,tt=50;function et(){try{return e.caches}catch(t){}}function nt(){et()&&!Q&&(Q=e.caches.open(K))}function it(t){const e=t.indexOf("?");if(e<0)return t;const n=function(t){const e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}(t),i=n.filter((t=>{const e=t.split("=");return"language"===e[0]||"worldview"===e[0]}));return i.length?"".concat(t.slice(0,e),"?").concat(i.join("&")):t.slice(0,e)}let rt=1/0;const st={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(st);class ot extends Error{constructor(t,e,n){401===e&&yt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}const at=j()?()=>self.worker&&self.worker.referrer:()=>("blob:"===e.location.protocol?e.parent:e).location.href,lt=function(t,n){if(!(/^file:/.test(i=t.url)||/^file:/.test(at())&&!/^\w+:/.test(i))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty("signal"))return function(t,n){const i=new e.AbortController,r=new e.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:at(),signal:i.signal});let s=!1,o=!1;const a=(l=r.url).indexOf("sku=")>0&&yt(l);var l;"json"===t.type&&r.headers.set("Accept","application/json");const h=(i,s,l)=>{if(o)return;if(i&&"SecurityError"!==i.message&&G(i),s&&l)return c(s);const h=Date.now();e.fetch(r).then((e=>{if(e.ok){const t=a?e.clone():null;return c(e,t,h)}return n(new ot(e.statusText,e.status,t.url))})).catch((t=>{20!==t.code&&n(new Error(t.message))}))},c=(i,a,l)=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((t=>{o||(a&&l&&function(t,n,i){if(nt(),!Q)return;const r={status:n.status,statusText:n.statusText,headers:new e.Headers};n.headers.forEach(((t,e)=>r.headers.set(e,t)));const s=W(n.headers.get("Cache-Control")||"");if(s["no-store"])return;s["max-age"]&&r.headers.set("Expires",new Date(i+1e3*s["max-age"]).toUTCString());const o=r.headers.get("Expires");o&&(new Date(o).getTime()-i<42e4||function(t,e){if(void 0===J)try{new Response(new ReadableStream),J=!0}catch(t){J=!1}J?e(t.body):t.blob().then(e)}(n,(n=>{const i=new e.Response(n,r);nt(),Q&&Q.then((e=>e.put(it(t.url),i))).catch((t=>G(t.message)))})))}(r,a,l),s=!0,n(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((t=>{o||n(new Error(t.message))}))};return a?function(t,e){if(nt(),!Q)return e(null);const n=it(t.url);Q.then((t=>{t.match(n).then((i=>{const r=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=W(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}(r,h):h(null,null),{cancel:()=>{o=!0,s||i.abort()}}}(t,n);if(j()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,n,void 0,!0)}var i;return function(t,n){const i=new e.XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const e in t.headers)i.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=()=>{n(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let e=i.response;if("json"===t.type)try{e=JSON.parse(i.response)}catch(t){return n(t)}n(null,e,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else n(new ot(i.statusText,i.status,t.url))},i.send(t.body),{cancel:()=>i.abort()}}(t,n)},ht=function(t,e){return lt(R(t,{type:"arrayBuffer"}),e)};function ct(t){const n=e.document.createElement("a");return n.href=t,n.protocol===e.document.location.protocol&&n.host===e.document.location.host}const ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let pt,dt;pt=[],dt=0;const ft=function(t,n){if(s.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),dt>=r.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return pt.push(e),e}dt++;let i=!1;const o=()=>{if(!i)for(i=!0,dt--;pt.length&&dt<r.MAX_PARALLEL_IMAGE_REQUESTS;){const t=pt.shift(),{requestParameters:e,callback:n,cancelled:i}=t;i||(t.cancel=ft(e,n).cancel)}},a=ht(t,((t,i,r,s)=>{o(),t?n(t):i&&(e.createImageBitmap?function(t,n){const i=new e.Blob([new Uint8Array(t)],{type:"image/png"});e.createImageBitmap(i).then((t=>{n(null,t)})).catch((t=>{n(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(i,((t,e)=>n(t,e,r,s))):function(t,n){const i=new e.Image,r=e.URL;i.onload=()=>{n(null,i),r.revokeObjectURL(i.src),i.onload=null,e.requestAnimationFrame((()=>{i.src=ut}))},i.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const s=new e.Blob([new Uint8Array(t)],{type:"image/png"});i.src=t.byteLength?r.createObjectURL(s):ut}(i,((t,e)=>n(t,e,r,s))))}));return{cancel:()=>{a.cancel(),o()}}},mt="NO_ACCESS_TOKEN";function gt(t){return 0===t.indexOf("mapbox:")}function yt(t){return r.API_URL_REGEX.test(t)}function _t(t){return r.API_CDN_URL_REGEX.test(t)}function vt(t){return r.API_STYLE_REGEX.test(t)&&!Tt(t)}function Tt(t){return r.API_SPRITE_REGEX.test(t)}const Et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function xt(t){const e=t.match(Et);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function It(t){const e=t.params.length?"?".concat(t.params.join("&")):"";return"".concat(t.protocol,"://").concat(t.authority).concat(t.path).concat(e)}function bt(t){if(!t)return null;const n=t.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(n[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class wt{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const n=bt(r.ACCESS_TOKEN);let i="";return i=n&&n.u?e.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):r.ACCESS_TOKEN||"",t?"mapbox.eventData.".concat(t,":").concat(i):"mapbox.eventData:".concat(i)}fetchEventData(){const t=X("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{const t=e.localStorage.getItem(n);t&&(this.eventData=JSON.parse(t));const r=e.localStorage.getItem(i);r&&(this.anonId=r)}catch(t){G("Unable to read from LocalStorage")}}saveEventData(){const t=X("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{e.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(t){G("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,n,i){if(!r.EVENTS_URL)return;const s=xt(r.EVENTS_URL);s.params.push("access_token=".concat(i||r.ACCESS_TOKEN||""));const o={event:this.type,created:new Date(t).toISOString()},a=e?R(o,e):o,l={url:It(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=function(t,e){return lt(R(t,{method:"POST"}),e)}(l,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const St=new class extends wt{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){r.EVENTS_URL&&r.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>gt(t)||yt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=bt(r.ACCESS_TOKEN),i=e?e.u:r.ACCESS_TOKEN;let s=i!==this.eventData.tokenU;P(this.anonId)||(this.anonId=N(),s=!0);const o=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(o),n=(o-this.eventData.lastSuccess)/864e5;s=s||n>=1||n<-1||t.getDate()!==e.getDate()}else s=!0;s?this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:u,"enabled.telemetry":!1,userId:this.anonId},(t=>{t||(this.eventData.lastSuccess=o,this.eventData.tokenU=i)}),t):this.processRequests()}},At=St.postTurnstileEvent.bind(St),Ct=new class extends wt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,i){this.skuToken=e,this.errorCb=i,r.EVENTS_URL&&(n||r.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(mt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),P(this.anonId)||(this.anonId=N()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:u,skuToken:this.skuToken,userId:this.anonId},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},Rt=Ct.postMapLoadEvent.bind(Ct),Dt=new class extends wt{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){r.EVENTS_URL&&(t||r.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:i,performanceData:r}=this.queue.shift(),s=function(t){const i=e.performance.getEntriesByType("resource"),r=e.performance.getEntriesByType("mark"),s=function(t){const e={};if(t)for(const n in t)if("other"!==n)for(const i of t[n]){const t="".concat(n,"ResolveRangeMin"),r="".concat(n,"ResolveRangeMax"),s="".concat(n,"RequestCount"),o="".concat(n,"RequestCachedCount");e[t]=Math.min(e[t]||1/0,i.startTime),e[r]=Math.max(e[r]||-1/0,i.responseEnd);const a=t=>{void 0===e[t]&&(e[t]=0),++e[t]};void 0!==i.transferSize&&0===i.transferSize&&a(o),a(s)}return e}(function(t,e){const n={};if(t)for(const i of t){const t=e(i);void 0===n[t]&&(n[t]=[]),n[t].push(i)}return n}(i,kt)),o=e.devicePixelRatio,a=e.navigator.connection||e.navigator.mozConnection||e.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},h=(t,e,n)=>{null!=n&&t.push({name:e,value:n.toString()})};for(const e in s)h(l.counters,e,s[e]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(h(l.counters,"interactionRangeMin",t.interactionRange[0]),h(l.counters,"interactionRangeMax",t.interactionRange[1])),r)for(const e of Object.keys(Ft)){const t=Ft[e],n=r.find((e=>e.name===t));n&&h(l.counters,t,n.startTime)}return h(l.counters,"visibilityHidden",t.visibilityHidden),h(l.attributes,"style",function(t){if(t)for(const e of t){const t=e.name.split("?")[0];if(vt(t)){const e=t.split("/").slice(-2);if(2===e.length)return"mapbox://styles/".concat(e[0],"/").concat(e[1])}}}(i)),h(l.attributes,"terrainEnabled",t.terrainEnabled?"true":"false"),h(l.attributes,"fogEnabled",t.fogEnabled?"true":"false"),h(l.attributes,"projection",t.projection),h(l.attributes,"zoom",t.zoom),h(l.metadata,"devicePixelRatio",o),h(l.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),h(l.metadata,"navigatorUserAgent",e.navigator.userAgent),h(l.metadata,"screenWidth",e.screen.width),h(l.metadata,"screenHeight",e.screen.height),h(l.metadata,"windowWidth",e.innerWidth),h(l.metadata,"windowHeight",e.innerHeight),h(l.metadata,"mapWidth",t.width/o),h(l.metadata,"mapHeight",t.height/o),h(l.metadata,"webglRenderer",t.renderer),h(l.metadata,"webglVendor",t.vendor),h(l.metadata,"sdkVersion",n),h(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(r);for(const e of s.metadata);for(const e of s.counters);for(const e of s.attributes);this.postEvent(i,s,(()=>{}),t)}},Ot=Dt.postPerformanceEvent.bind(Dt),Nt=new class extends wt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,i){if(!r.API_URL||!r.SESSION_PATH)return;const s=xt(r.API_URL+r.SESSION_PATH);s.params.push("sku=".concat(e||"")),s.params.push("access_token=".concat(i||r.ACCESS_TOKEN||""));const o={url:It(s),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(t,e){return lt(R(t,{method:"GET"}),e)}(o,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}getSessionAPI(t,e,n,i){this.skuToken=e,this.errorCb=i,r.SESSION_PATH&&r.API_URL&&(n||r.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(mt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},Mt=Nt.getSessionAPI.bind(Nt),Pt=new Set,Ft={create:"create",load:"load",fullLoad:"fullLoad"},Lt={mark(t){e.performance.mark(t)},measure(t,n,i){e.performance.measure(t,n,i)}};function kt(t){const e=t.name.split("?")[0];return _t(e)&&e.includes("mapbox-gl.js")?"javascript":_t(e)&&e.includes("mapbox-gl.css")?"css":function(t){return r.API_FONTS_REGEX.test(t)}(e)?"fontRange":Tt(e)?"sprite":vt(e)?"style":function(t){return r.API_TILEJSON_REGEX.test(t)}(e)?"tilejson":"other"}const Ut=e.performance;function Bt(t){const e=t?t.url.toString():void 0;return Ut.getEntriesByName(e)}let zt,Gt,Ht,Vt;const jt={now:()=>void 0!==Ht?Ht:e.performance.now(),setNow(t){Ht=t},restoreNow(){Ht=void 0},frame(t){const n=e.requestAnimationFrame(t);return{cancel:()=>e.cancelAnimationFrame(n)}},getImageData(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:i,height:r}=t;Vt||(Vt=e.document.createElement("canvas"));const s=Vt.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return(i>Vt.width||r>Vt.height)&&(Vt.width=i,Vt.height=r),s.clearRect(-n,-n,i+2*n,r+2*n),s.drawImage(t,0,0,i,r),s.getImageData(-n,-n,i+2*n,r+2*n)},resolveURL:t=>(zt||(zt=e.document.createElement("a")),zt.href=t,zt.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return!!e.matchMedia&&(null==Gt&&(Gt=e.matchMedia("(prefers-reduced-motion: reduce)")),Gt.matches)}};function Wt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Yt(t,e,n){if(n&&n[t]){const i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}class qt{constructor(t){R(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=t}}class Xt extends qt{constructor(t){super("error",R({error:t},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class Zt{on(t,e){return this._listeners=this._listeners||{},Wt(t,e,this._listeners),this}off(t,e){return Yt(t,e,this._listeners),Yt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Wt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new qt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const s of i)Yt(n,s,this._oneTimeListeners),s.call(this,t);const r=this._eventedParent;r&&(R(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof Xt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Kt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Qt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n)for(const e in r)t[e]=r[e];return t}function Jt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function $t(t){if(Array.isArray(t))return t.map($t);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=$t(t[n]);return e}return Jt(t)}class te extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var ee=te;class ne{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=t,this.bindings={};for(const[n,i]of e)this.bindings[n]=i}concat(t){return new ne(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var ie=ne;const re={kind:"null"},se={kind:"number"},oe={kind:"string"},ae={kind:"boolean"},le={kind:"color"},he={kind:"object"},ce={kind:"value"},ue={kind:"collator"},pe={kind:"formatted"},de={kind:"resolvedImage"};function fe(t,e){return{kind:"array",itemType:t,N:e}}function me(t){if("array"===t.kind){const e=me(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}const ge=[re,se,oe,ae,le,pe,he,fe(ce),de];function ye(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!ye(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of ge)if(!ye(t,e))return null}return"Expected ".concat(me(t)," but found ").concat(me(e)," instead.")}function _e(t,e){return e.some((e=>e.kind===t.kind))}function ve(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Te,Ee={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function xe(t){return(t=Math.round(t))<0?0:t>255?255:t}function Ie(t){return xe("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function be(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function we(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Te={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in Ee)return Ee[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var i=n.indexOf("("),r=n.indexOf(")");if(-1!==i&&r+1===n.length){var s=n.substr(0,i),o=n.substr(i+1,r-(i+1)).split(","),a=1;switch(s){case"rgba":if(4!==o.length)return null;a=be(o.pop());case"rgb":return 3!==o.length?null:[Ie(o[0]),Ie(o[1]),Ie(o[2]),a];case"hsla":if(4!==o.length)return null;a=be(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,h=be(o[1]),c=be(o[2]),u=c<=.5?c*(h+1):c+h-c*h,p=2*c-u;return[xe(255*we(p,u,l+1/3)),xe(255*we(p,u,l)),xe(255*we(p,u,l-1/3)),a];default:return null}}return null}}catch(t){}class Se{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=t,this.g=e,this.b=n,this.a=i}static parse(t){if(!t)return;if(t instanceof Se)return t;if("string"!=typeof t)return;const e=Te(t);return e?new Se(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,i]=this.toArray();return"rgba(".concat(Math.round(t),",").concat(Math.round(e),",").concat(Math.round(n),",").concat(i,")")}toArray(){const{r:t,g:e,b:n,a:i}=this;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*n/i,i]}toArray01(){const{r:t,g:e,b:n,a:i}=this;return 0===i?[0,0,0,0]:[t/i,e/i,n/i,i]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:n,a:i}=this;return[t,e,n,i]}}Se.black=new Se(0,0,0,1),Se.white=new Se(1,1,1,1),Se.transparent=new Se(0,0,0,0),Se.red=new Se(1,0,0,1),Se.blue=new Se(0,0,1,1);var Ae=Se;class Ce{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Re{constructor(t,e,n,i,r){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r}}class De{constructor(t){this.sections=t}static fromString(t){return new De([new Re(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof De?t:De.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class Oe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Oe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Ne(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value [".concat([t,e,n,i].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Me(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Ae)return!0;if(t instanceof Ce)return!0;if(t instanceof De)return!0;if(t instanceof Oe)return!0;if(Array.isArray(t)){for(const e of t)if(!Me(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Me(t[e]))return!1;return!0}return!1}function Pe(t){if(null===t)return re;if("string"==typeof t)return oe;if("boolean"==typeof t)return ae;if("number"==typeof t)return se;if(t instanceof Ae)return le;if(t instanceof Ce)return ue;if(t instanceof De)return pe;if(t instanceof Oe)return de;if(Array.isArray(t)){const e=t.length;let n;for(const i of t){const t=Pe(i);if(n){if(n===t)continue;n=ce;break}n=t}return fe(n||ce,e)}return he}function Fe(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ae||t instanceof De||t instanceof Oe?t.toString():JSON.stringify(t)}class Le{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Me(t[1]))return e.error("invalid value");const n=t[1];let i=Pe(n);const r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new Le(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ae?["rgba"].concat(this.value.toArray()):this.value instanceof De?this.value.serialize():this.value}}var ke=Le,Ue=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const Be={string:oe,number:se,boolean:ae,object:he};class ze{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,i=1;const r=t[0];if("array"===r){let r,s;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in Be)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=Be[n],i++}else r=ce;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}n=fe(r,s)}else n=Be[r];const s=[];for(;i<t.length;i++){const n=e.parse(t[i],i,ce);if(!n)return null;s.push(n)}return new ze(n,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!ye(this.type,Pe(n)))return n;if(e===this.args.length-1)throw new Ue("Expected value to be of type ".concat(me(this.type),", but found ").concat(me(Pe(n))," instead."))}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((t=>t.serialize())))}}var Ge=ze;class He{constructor(t){this.type=pe,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const i=[];let r=!1;for(let s=1;s<=t.length-1;++s){const n=t[s];if(r&&"object"==typeof n&&!Array.isArray(n)){r=!1;let t=null;if(n["font-scale"]&&(t=e.parse(n["font-scale"],1,se),!t))return null;let s=null;if(n["text-font"]&&(s=e.parse(n["text-font"],1,fe(oe)),!s))return null;let o=null;if(n["text-color"]&&(o=e.parse(n["text-color"],1,le),!o))return null;const a=i[i.length-1];a.scale=t,a.font=s,a.textColor=o}else{const n=e.parse(t[s],1,ce);if(!n)return null;const o=n.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:n,scale:null,font:null,textColor:null})}}return new He(i)}evaluate(t){return new De(this.sections.map((e=>{const n=e.content.evaluate(t);return Pe(n)===de?new Re("",n,null,null,null):new Re(Fe(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Ve{constructor(t){this.type=de,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,oe);return n?new Ve(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Oe.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const je={"to-boolean":ae,"to-color":le,"to-number":se,"to-string":oe};class We{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const i=je[n],r=[];for(let s=1;s<t.length;s++){const n=e.parse(t[s],s,ce);if(!n)return null;r.push(n)}return new We(i,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const i of this.args){if(e=i.evaluate(t),n=null,e instanceof Ae)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):Ne(e[0],e[1],e[2],e[3]),!n))return new Ae(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ue(n||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new Ue("Could not convert ".concat(JSON.stringify(e)," to number."))}return"formatted"===this.type.kind?De.fromString(Fe(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Oe.fromString(Fe(this.args[0].evaluate(t))):Fe(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new He([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ve(this.args[0]).serialize();const t=["to-".concat(this.type.kind)];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Ye=We;const qe=["Unknown","Point","LineString","Polygon"];var Xe=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?qe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:i}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(i*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ae.parse(t)),e}};class Ze{constructor(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],i=Ze.definitions[n];if(!i)return e.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);const r=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=s.filter((e=>{let[n]=e;return!Array.isArray(n)||n.length===t.length-1}));let a=null;for(const[l,h]of o){a=new In(e.registry,e.path,null,e.scope);const i=[];let s=!1;for(let e=1;e<t.length;e++){const n=t[e],r=Array.isArray(l)?l[e-1]:l.type,o=a.parse(n,1+i.length,r);if(!o){s=!0;break}i.push(o)}if(!s)if(Array.isArray(l)&&l.length!==i.length)a.error("Expected ".concat(l.length," arguments, but found ").concat(i.length," instead."));else{for(let t=0;t<i.length;t++){const e=Array.isArray(l)?l[t]:l.type,n=i[t];a.concat(t+1).checkSubtype(e,n.type)}if(0===a.errors.length)return new Ze(n,r,h,i)}}if(1===o.length)e.errors.push(...a.errors);else{const n=(o.length?o:s).map((t=>{let[e]=t;return n=e,Array.isArray(n)?"(".concat(n.map(me).join(", "),")"):"(".concat(me(n.type),"...)");var n})).join(" | "),i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],1+i.length);if(!n)return null;i.push(me(n.type))}e.error("Expected arguments of type ".concat(n,", but found (").concat(i.join(", "),") instead."))}return null}static register(t,e){Ze.definitions=e;for(const n in e)t[n]=Ze}}var Ke=Ze;class Qe{constructor(t,e,n){this.type=ue,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ae);if(!i)return null;const r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ae);if(!r)return null;let s=null;return n.locale&&(s=e.parse(n.locale,1,oe),!s)?null:new Qe(i,r,s)}evaluate(t){return new Ce(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Je=8192;function $e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function tn(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function en(t,e){const n=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(n*r*Je),Math.round(i*r*Je)]}function nn(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],s=t[0]-n[0],o=t[1]-n[1];return i*o-s*r==0&&i*s<=0&&r*o<=0}function rn(t,e){let n=!1;for(let o=0,a=e.length;o<a;o++){const a=e[o];for(let e=0,o=a.length;e<o-1;e++){if(nn(t,a[e],a[e+1]))return!1;(r=a[e])[1]>(i=t)[1]!=(s=a[e+1])[1]>i[1]&&i[0]<(s[0]-r[0])*(i[1]-r[1])/(s[1]-r[1])+r[0]&&(n=!n)}}var i,r,s;return n}function sn(t,e){for(let n=0;n<e.length;n++)if(rn(t,e[n]))return!0;return!1}function on(t,e,n,i){const r=i[0]-n[0],s=i[1]-n[1],o=(t[0]-n[0])*s-r*(t[1]-n[1]),a=(e[0]-n[0])*s-r*(e[1]-n[1]);return o>0&&a<0||o<0&&a>0}function an(t,e,n){for(const h of n)for(let n=0;n<h.length-1;++n)if(0!=(a=[(o=h[n+1])[0]-(s=h[n])[0],o[1]-s[1]])[0]*(l=[(r=e)[0]-(i=t)[0],r[1]-i[1]])[1]-a[1]*l[0]&&on(i,r,s,o)&&on(s,o,i,r))return!0;var i,r,s,o,a,l;return!1}function ln(t,e){for(let n=0;n<t.length;++n)if(!rn(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(an(t[n],t[n+1],e))return!1;return!0}function hn(t,e){for(let n=0;n<e.length;n++)if(ln(t,e[n]))return!0;return!1}function cn(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=[];for(let i=0;i<t[r].length;i++){const o=en(t[r][i],n);$e(e,o),s.push(o)}i.push(s)}return i}function un(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=cn(t[r],e,n);i.push(s)}return i}function pn(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const e=.5*i;let r=t[0]-n[0]>e?-i:n[0]-t[0]>e?i:0;0===r&&(r=t[0]-n[2]>e?-i:n[2]-t[0]>e?i:0),t[0]+=r}$e(e,t)}function dn(t,e,n,i){const r=Math.pow(2,i.z)*Je,s=[i.x*Je,i.y*Je],o=[];if(!t)return o;for(const a of t)for(const t of a){const i=[t.x+s[0],t.y+s[1]];pn(i,e,n,r),o.push(i)}return o}function fn(t,e,n,i){const r=Math.pow(2,i.z)*Je,s=[i.x*Je,i.y*Je],o=[];if(!t)return o;for(const l of t){const t=[];for(const n of l){const i=[n.x+s[0],n.y+s[1]];$e(e,i),t.push(i)}o.push(t)}if(e[2]-e[0]<=r/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of o)for(const i of t)pn(i,e,n,r)}var a;return o}class mn{constructor(t,e){this.type=ae,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Me(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new mn(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new mn(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new mn(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if("Polygon"===e.type){const s=cn(e.coordinates,i,r),o=dn(t.geometry(),n,i,r);if(!tn(n,i))return!1;for(const t of o)if(!rn(t,s))return!1}if("MultiPolygon"===e.type){const s=un(e.coordinates,i,r),o=dn(t.geometry(),n,i,r);if(!tn(n,i))return!1;for(const t of o)if(!sn(t,s))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if("Polygon"===e.type){const s=cn(e.coordinates,i,r),o=fn(t.geometry(),n,i,r);if(!tn(n,i))return!1;for(const t of o)if(!ln(t,s))return!1}if("MultiPolygon"===e.type){const s=un(e.coordinates,i,r),o=fn(t.geometry(),n,i,r);if(!tn(n,i))return!1;for(const t of o)if(!hn(t,s))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var gn=mn;function yn(t){if(t instanceof Ke){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof gn)return!1;let e=!0;return t.eachChild((t=>{e&&!yn(t)&&(e=!1)})),e}function _n(t){if(t instanceof Ke&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!_n(t)&&(e=!1)})),e}function vn(t,e){if(t instanceof Ke&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!vn(t,e)&&(n=!1)})),n}class Tn{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new Tn(n,e.scope.get(n)):e.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var En=Tn;class xn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ie,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.registry=t,this.path=e,this.key=e.map((t=>"[".concat(t,"]"))).join(""),this.scope=i,this.errors=r,this.expectedType=n}parse(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)}_parse(t,e){function n(t,e,n){return"assert"===n?new Ge(e,[t]):"coerce"===n?new Ye(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found ".concat(typeof i,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const r=this.registry[i];if(r){let i=r.parse(t,this);if(!i)return null;if(this.expectedType){const t=this.expectedType,r=i.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(t,r))return null}else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"assert")}if(!(i instanceof ke)&&"resolvedImage"!==i.type.kind&&bn(i)){const e=new Xe;try{i=new ke(i.type,i.evaluate(e))}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof t," instead."))}concat(t,e,n){const i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new xn(this.registry,i,e||null,r,this.errors)}error(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r="".concat(this.key).concat(n.map((t=>"[".concat(t,"]"))).join(""));this.errors.push(new ee(r,t))}checkSubtype(t,e){const n=ye(t,e);return n&&this.error(n),n}}var In=xn;function bn(t){if(t instanceof En)return bn(t.boundExpression);if(t instanceof Ke&&"error"===t.name)return!1;if(t instanceof Qe)return!1;if(t instanceof gn)return!1;const e=t instanceof Ye||t instanceof Ge;let n=!0;return t.eachChild((t=>{n=e?n&&bn(t):n&&t instanceof ke})),!!n&&yn(t)&&vn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function wn(t,e){const n=t.length-1;let i,r,s=0,o=n,a=0;for(;s<=o;)if(a=Math.floor((s+o)/2),i=t[a],r=t[a+1],i<=e){if(a===n||e<r)return a;s=a+1}else{if(!(i>e))throw new Ue("Input is not a number.");o=a-1}return 0}class Sn{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[i,r]of n)this.labels.push(i),this.outputs.push(r)}static parse(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,se);if(!n)return null;const i=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let s=1;s<t.length;s+=2){const n=1===s?-1/0:t[s],o=t[s+1],a=s,l=s+1;if("number"!=typeof n)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(i.length&&i[i.length-1][0]>=n)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const h=e.parse(o,l,r);if(!h)return null;r=r||h.type,i.push([n,h])}return new Sn(r,n,i)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[wn(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var An=Sn;function Cn(t,e,n){return t*(1-n)+e*n}var Rn=Object.freeze({__proto__:null,number:Cn,color:function(t,e,n){return new Ae(Cn(t.r,e.r,n),Cn(t.g,e.g,n),Cn(t.b,e.b,n),Cn(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,i)=>Cn(t,e[i],n)))}});const Dn=.95047,On=1.08883,Nn=4/29,Mn=6/29,Pn=3*Mn*Mn,Fn=Math.PI/180,Ln=180/Math.PI;function kn(t){return t>.008856451679035631?Math.pow(t,1/3):t/Pn+Nn}function Un(t){return t>Mn?t*t*t:Pn*(t-Nn)}function Bn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Gn(t){const e=zn(t.r),n=zn(t.g),i=zn(t.b),r=kn((.4124564*e+.3575761*n+.1804375*i)/Dn),s=kn((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*s-16,a:500*(r-s),b:200*(s-kn((.0193339*e+.119192*n+.9503041*i)/On)),alpha:t.a}}function Hn(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Un(e),n=Dn*Un(n),i=On*Un(i),new Ae(Bn(3.2404542*n-1.5371385*e-.4985314*i),Bn(-.969266*n+1.8760108*e+.041556*i),Bn(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function Vn(t,e,n){const i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}const jn={forward:Gn,reverse:Hn,interpolate:function(t,e,n){return{l:Cn(t.l,e.l,n),a:Cn(t.a,e.a,n),b:Cn(t.b,e.b,n),alpha:Cn(t.alpha,e.alpha,n)}}},Wn={forward:function(t){const{l:e,a:n,b:i}=Gn(t),r=Math.atan2(i,n)*Ln;return{h:r<0?r+360:r,c:Math.sqrt(n*n+i*i),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Fn,n=t.c;return Hn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Vn(t.h,e.h,n),c:Cn(t.c,e.c,n),l:Cn(t.l,e.l,n),alpha:Cn(t.alpha,e.alpha,n)}}};var Yn=Object.freeze({__proto__:null,lab:jn,hcl:Wn});class qn{constructor(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[s,o]of r)this.labels.push(s),this.outputs.push(o)}static interpolationFactor(t,e,n,i){let r=0;if("exponential"===t.name)r=Xn(e,t.base,n,i);else if("linear"===t.name)r=Xn(e,1,n,i);else if("cubic-bezier"===t.name){const s=t.controlPoints;r=new p(s[0],s[1],s[2],s[3]).solve(Xn(e,1,n,i))}return r}static parse(t,e){let[n,i,r,...s]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const t=i[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:t}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type ".concat(String(i[0])),1,0);{const t=i.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,se),!r)return null;const o=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=le:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let l=0;l<s.length;l+=2){const t=s[l],n=s[l+1],i=l+3,r=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(o.length&&o[o.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const h=e.parse(n,r,a);if(!h)return null;a=a||h.type,o.push([t,h])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new qn(a,n,i,r,o):e.error("Type ".concat(me(a)," is not interpolatable."))}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);const s=wn(e,i),o=qn.interpolationFactor(this.interpolation,i,e[s],e[s+1]),a=n[s].evaluate(t),l=n[s+1].evaluate(t);return"interpolate"===this.operator?Rn[this.type.kind.toLowerCase()](a,l,o):"interpolate-hcl"===this.operator?Wn.reverse(Wn.interpolate(Wn.forward(a),Wn.forward(l),o)):jn.reverse(jn.interpolate(jn.forward(a),jn.forward(l),o))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}function Xn(t,e,n,i){const r=i-n,s=t-n;return 0===r?0:1===e?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}var Zn=qn;class Kn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const i=e.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const o of t.slice(1)){const t=e.parse(o,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,r.push(t)}const s=i&&r.some((t=>ye(i,t.type)));return new Kn(s?ce:n,r)}evaluate(t){let e,n=null,i=0;for(const r of this.args){if(i++,n=r.evaluate(t),n&&n instanceof Oe&&!n.available&&(e||(e=n),n=null,i===this.args.length))return e;if(null!==n)break}return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Qn=Kn;class Jn{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));const n=[];for(let r=1;r<t.length-1;r+=2){const i=t[r];if("string"!=typeof i)return e.error("Expected string, but found ".concat(typeof i," instead."),r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const s=e.parse(t[r+1],r+1);if(!s)return null;n.push([i,s])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return i?new Jn(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}var $n=Jn;class ti{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,se),i=e.parse(t[2],2,fe(e.expectedType||ce));return n&&i?new ti(i.type.itemType,n,i):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Ue("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new Ue("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new Ue("Array index must be an integer, but found ".concat(e," instead."));return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ei=ti;class ni{constructor(t,e){this.type=ae,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,ce),i=e.parse(t[2],2,ce);return n&&i?_e(n.type,[ae,oe,se,re,ce])?new ni(n,i):e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(me(n.type)," instead")):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!ve(e,["boolean","string","number","null"]))throw new Ue("Expected first argument to be of type boolean, string, number or null, but found ".concat(me(Pe(e))," instead."));if(!ve(n,["string","array"]))throw new Ue("Expected second argument to be of type array or string, but found ".concat(me(Pe(n))," instead."));return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ii=ni;class ri{constructor(t,e,n){this.type=se,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,ce),i=e.parse(t[2],2,ce);if(!n||!i)return null;if(!_e(n.type,[ae,oe,se,re,ce]))return e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(me(n.type)," instead"));if(4===t.length){const r=e.parse(t[3],3,se);return r?new ri(n,i,r):null}return new ri(n,i)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!ve(e,["boolean","string","number","null"]))throw new Ue("Expected first argument to be of type boolean, string, number or null, but found ".concat(me(Pe(e))," instead."));if(!ve(n,["string","array"]))throw new Ue("Expected second argument to be of type array or string, but found ".concat(me(Pe(n))," instead."));if(this.fromIndex){const i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var si=ri;class oi{constructor(t,e,n,i,r,s){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=s}static parse(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r={},s=[];for(let l=2;l<t.length-1;l+=2){let o=t[l];const a=t[l+1];Array.isArray(o)||(o=[o]);const h=e.concat(l);if(0===o.length)return h.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return h.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof t&&Math.floor(t)!==t)return h.error("Numeric branch labels must be integer values.");if(n){if(h.checkSubtype(n,Pe(t)))return null}else n=Pe(t);if(void 0!==r[String(t)])return h.error("Branch labels must be unique.");r[String(t)]=s.length}const c=e.parse(a,l,i);if(!c)return null;i=i||c.type,s.push(c)}const o=e.parse(t[1],1,ce);if(!o)return null;const a=e.parse(t[t.length-1],t.length-1,i);return a?"value"!==o.type.kind&&e.concat(1).checkSubtype(n,o.type)?null:new oi(n,i,o,r,s,a):null}evaluate(t){const e=this.input.evaluate(t);return(Pe(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],i={};for(const s of e){const t=i[this.cases[s]];void 0===t?(i[this.cases[s]]=n.length,n.push([this.cases[s],[s]])):n[t][1].push(s)}const r=t=>"number"===this.inputType.kind?Number(t):t;for(const[s,o]of n)t.push(1===o.length?r(o[0]):o.map(r)),t.push(this.outputs[s].serialize());return t.push(this.otherwise.serialize()),t}}var ai=oi;class li{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i=[];for(let s=1;s<t.length-1;s+=2){const r=e.parse(t[s],s,ae);if(!r)return null;const o=e.parse(t[s+1],s+1,n);if(!o)return null;i.push([r,o]),n=n||o.type}const r=e.parse(t[t.length-1],t.length-1,n);return r?new li(n,i,r):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((t=>{let[e,n]=t;return n.outputDefined()}))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var hi=li;class ci{constructor(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,ce),i=e.parse(t[2],2,se);if(!n||!i)return null;if(!_e(n.type,[fe(ce),oe,ce]))return e.error("Expected first argument to be of type array or string, but found ".concat(me(n.type)," instead"));if(4===t.length){const r=e.parse(t[3],3,se);return r?new ci(n.type,n,i,r):null}return new ci(n.type,n,i)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!ve(e,["string","array"]))throw new Ue("Expected first argument to be of type array or string, but found ".concat(me(Pe(e))," instead."));if(this.endIndex){const i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ui=ci;function pi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function di(t,e,n,i){return 0===i.compare(e,n)}function fi(t,e,n){const i="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=ae,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let s=e.parse(t[1],1,ce);if(!s)return null;if(!pi(n,s.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(me(s.type),"'."));let o=e.parse(t[2],2,ce);if(!o)return null;if(!pi(n,o.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(me(o.type),"'."));if(s.type.kind!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '".concat(me(s.type),"' and '").concat(me(o.type),"'."));i&&("value"===s.type.kind&&"value"!==o.type.kind?s=new Ge(o.type,[s]):"value"!==s.type.kind&&"value"===o.type.kind&&(o=new Ge(s.type,[o])));let a=null;if(4===t.length){if("string"!==s.type.kind&&"string"!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,ue),!a)return null}return new r(s,o,a)}evaluate(r){const s=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const e=Pe(s),n=Pe(o);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new Ue('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(e.kind,", ").concat(n.kind,") instead."))}if(this.collator&&!i&&this.hasUntypedArgument){const t=Pe(s),n=Pe(o);if("string"!==t.kind||"string"!==n.kind)return e(r,s,o)}return this.collator?n(r,s,o,this.collator.evaluate(r)):e(r,s,o)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const mi=fi("==",(function(t,e,n){return e===n}),di),gi=fi("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!di(0,e,n,i)})),yi=fi("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),_i=fi(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),vi=fi("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),Ti=fi(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0}));class Ei{constructor(t,e,n,i,r,s){this.type=oe,this.number=t,this.locale=e,this.currency=n,this.unit=i,this.minFractionDigits=r,this.maxFractionDigits=s}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,se);if(!n)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=e.parse(i.locale,1,oe),!r))return null;let s=null;if(i.currency&&(s=e.parse(i.currency,1,oe),!s))return null;let o=null;if(i.unit&&(o=e.parse(i.unit,1,oe),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=e.parse(i["min-fraction-digits"],1,se),!a))return null;let l=null;return i["max-fraction-digits"]&&(l=e.parse(i["max-fraction-digits"],1,se),!l)?null:new Ei(n,r,s,o,a,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class xi{constructor(t){this.type=se,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found ".concat(me(n.type)," instead.")):new xi(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Ue("Expected value to be of type string or array, but found ".concat(me(Pe(e))," instead."))}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Ii={"==":mi,"!=":gi,">":_i,"<":yi,">=":Ti,"<=":vi,array:Ge,at:ei,boolean:Ge,case:hi,coalesce:Qn,collator:Qe,format:He,image:Ve,in:ii,"index-of":si,interpolate:Zn,"interpolate-hcl":Zn,"interpolate-lab":Zn,length:xi,let:$n,literal:ke,match:ai,number:Ge,"number-format":Ei,object:Ge,slice:ui,step:An,string:Ge,"to-boolean":Ye,"to-color":Ye,"to-number":Ye,"to-string":Ye,var:En,within:gn};function bi(t,e){let[n,i,r,s]=e;n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);const o=s?s.evaluate(t):1,a=Ne(n,i,r,o);if(a)throw new Ue(a);return new Ae(n/255*o,i/255*o,r/255*o,o)}function wi(t,e){return t in e}function Si(t,e){const n=e[t];return void 0===n?null:n}function Ai(t){return{type:t}}Ke.register(Ii,{error:[{kind:"error"},[oe],(t,e)=>{let[n]=e;throw new Ue(n.evaluate(t))}],typeof:[oe,[ce],(t,e)=>{let[n]=e;return me(Pe(n.evaluate(t)))}],"to-rgba":[fe(se,4),[le],(t,e)=>{let[n]=e;return n.evaluate(t).toArray()}],rgb:[le,[se,se,se],bi],rgba:[le,[se,se,se,se],bi],has:{type:ae,overloads:[[[oe],(t,e)=>{let[n]=e;return wi(n.evaluate(t),t.properties())}],[[oe,he],(t,e)=>{let[n,i]=e;return wi(n.evaluate(t),i.evaluate(t))}]]},get:{type:ce,overloads:[[[oe],(t,e)=>{let[n]=e;return Si(n.evaluate(t),t.properties())}],[[oe,he],(t,e)=>{let[n,i]=e;return Si(n.evaluate(t),i.evaluate(t))}]]},"feature-state":[ce,[oe],(t,e)=>{let[n]=e;return Si(n.evaluate(t),t.featureState||{})}],properties:[he,[],t=>t.properties()],"geometry-type":[oe,[],t=>t.geometryType()],id:[ce,[],t=>t.id()],zoom:[se,[],t=>t.globals.zoom],pitch:[se,[],t=>t.globals.pitch||0],"distance-from-center":[se,[],t=>t.distanceFromCenter()],"heatmap-density":[se,[],t=>t.globals.heatmapDensity||0],"line-progress":[se,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[se,[],t=>t.globals.skyRadialProgress||0],accumulated:[ce,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[se,Ai(se),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[se,Ai(se),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:se,overloads:[[[se,se],(t,e)=>{let[n,i]=e;return n.evaluate(t)-i.evaluate(t)}],[[se],(t,e)=>{let[n]=e;return-n.evaluate(t)}]]},"/":[se,[se,se],(t,e)=>{let[n,i]=e;return n.evaluate(t)/i.evaluate(t)}],"%":[se,[se,se],(t,e)=>{let[n,i]=e;return n.evaluate(t)%i.evaluate(t)}],ln2:[se,[],()=>Math.LN2],pi:[se,[],()=>Math.PI],e:[se,[],()=>Math.E],"^":[se,[se,se],(t,e)=>{let[n,i]=e;return Math.pow(n.evaluate(t),i.evaluate(t))}],sqrt:[se,[se],(t,e)=>{let[n]=e;return Math.sqrt(n.evaluate(t))}],log10:[se,[se],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN10}],ln:[se,[se],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))}],log2:[se,[se],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN2}],sin:[se,[se],(t,e)=>{let[n]=e;return Math.sin(n.evaluate(t))}],cos:[se,[se],(t,e)=>{let[n]=e;return Math.cos(n.evaluate(t))}],tan:[se,[se],(t,e)=>{let[n]=e;return Math.tan(n.evaluate(t))}],asin:[se,[se],(t,e)=>{let[n]=e;return Math.asin(n.evaluate(t))}],acos:[se,[se],(t,e)=>{let[n]=e;return Math.acos(n.evaluate(t))}],atan:[se,[se],(t,e)=>{let[n]=e;return Math.atan(n.evaluate(t))}],min:[se,Ai(se),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[se,Ai(se),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[se,[se],(t,e)=>{let[n]=e;return Math.abs(n.evaluate(t))}],round:[se,[se],(t,e)=>{let[n]=e;const i=n.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[se,[se],(t,e)=>{let[n]=e;return Math.floor(n.evaluate(t))}],ceil:[se,[se],(t,e)=>{let[n]=e;return Math.ceil(n.evaluate(t))}],"filter-==":[ae,[oe,ce],(t,e)=>{let[n,i]=e;return t.properties()[n.value]===i.value}],"filter-id-==":[ae,[ce],(t,e)=>{let[n]=e;return t.id()===n.value}],"filter-type-==":[ae,[oe],(t,e)=>{let[n]=e;return t.geometryType()===n.value}],"filter-<":[ae,[oe,ce],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r<s}],"filter-id-<":[ae,[ce],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[ae,[oe,ce],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r>s}],"filter-id->":[ae,[ce],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[ae,[oe,ce],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r<=s}],"filter-id-<=":[ae,[ce],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[ae,[oe,ce],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r>=s}],"filter-id->=":[ae,[ce],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[ae,[ce],(t,e)=>{let[n]=e;return n.value in t.properties()}],"filter-has-id":[ae,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ae,[fe(oe)],(t,e)=>{let[n]=e;return n.value.indexOf(t.geometryType())>=0}],"filter-id-in":[ae,[fe(ce)],(t,e)=>{let[n]=e;return n.value.indexOf(t.id())>=0}],"filter-in-small":[ae,[oe,fe(ce)],(t,e)=>{let[n,i]=e;return i.value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[ae,[oe,fe(ce)],(t,e)=>{let[n,i]=e;return function(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:ae,overloads:[[[ae,ae],(t,e)=>{let[n,i]=e;return n.evaluate(t)&&i.evaluate(t)}],[Ai(ae),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:ae,overloads:[[[ae,ae],(t,e)=>{let[n,i]=e;return n.evaluate(t)||i.evaluate(t)}],[Ai(ae),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[ae,[ae],(t,e)=>{let[n]=e;return!n.evaluate(t)}],"is-supported-script":[ae,[oe],(t,e)=>{let[n]=e;const i=t.globals&&t.globals.isSupportedScript;return!i||i(n.evaluate(t))}],upcase:[oe,[oe],(t,e)=>{let[n]=e;return n.evaluate(t).toUpperCase()}],downcase:[oe,[oe],(t,e)=>{let[n]=e;return n.evaluate(t).toLowerCase()}],concat:[oe,Ai(ce),(t,e)=>e.map((e=>Fe(e.evaluate(t)))).join("")],"resolved-locale":[oe,[ue],(t,e)=>{let[n]=e;return n.evaluate(t).resolvedLocale()}]});var Ci=Ii;function Ri(t){return{result:"success",value:t}}function Di(t){return{result:"error",value:t}}function Oi(t){return"data-driven"===t["property-type"]}function Ni(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Mi(t){return!!t.expression&&t.expression.interpolated}function Pi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Fi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Li(t){return t}function ki(t,e){const n="color"===e.type,i=t.stops&&"object"==typeof t.stops[0][0],r=i||!(i||void 0!==t.property),s=t.type||(Mi(e)?"exponential":"interval");if(n&&((t=Qt({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Ae.parse(t[1])]))),t.default=Ae.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Yn[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));let o,a,l;if("exponential"===s)o=Gi;else if("interval"===s)o=zi;else if("categorical"===s){o=Bi,a=Object.create(null);for(const e of t.stops)a[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==s)throw new Error('Unknown function type "'.concat(s,'"'));o=Hi}if(i){const n={},i=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],s=r[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default,stops:[]},i.push(s)),n[s].stops.push([r[0].value,r[1]])}const r=[];for(const t of i)r.push([n[t].zoom,ki(n[t],e)]);const s={name:"linear"};return{kind:"composite",interpolationType:s,interpolationFactor:Zn.interpolationFactor.bind(void 0,s),zoomStops:r.map((t=>t[0])),evaluate:(n,i)=>{let{zoom:s}=n;return Gi({stops:r,base:t.base},e,s).evaluate(s,i)}}}if(r){const n="exponential"===s?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Zn.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:n=>{let{zoom:i}=n;return o(t,e,i,a,l)}}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[t.property]:void 0;return void 0===r?Ui(t.default,e.default):o(t,e,r,a,l)}}}function Ui(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Bi(t,e,n,i,r){return Ui(typeof n===r?i[n]:void 0,t.default,e.default)}function zi(t,e,n){if("number"!==Pi(n))return Ui(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const r=wn(t.stops.map((t=>t[0])),n);return t.stops[r][1]}function Gi(t,e,n){const i=void 0!==t.base?t.base:1;if("number"!==Pi(n))return Ui(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const s=wn(t.stops.map((t=>t[0])),n),o=function(t,e,n,i){const r=i-n,s=t-n;return 0===r?0:1===e?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[s][0],t.stops[s+1][0]),a=t.stops[s][1],l=t.stops[s+1][1];let h=Rn[e.type]||Li;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Yn[t.colorSpace];h=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),o))}return"function"==typeof a.evaluate?{evaluate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=a.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==i&&void 0!==r)return h(i,r,o)}}:h(a,l,o)}function Hi(t,e,n){return"color"===e.type?n=Ae.parse(n):"formatted"===e.type?n=De.fromString(n.toString()):"resolvedImage"===e.type?n=Oe.fromString(n.toString()):Pi(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Ui(n,t.default,e.default)}class Vi{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Xe,this._defaultValue=e?function(t){return"color"===t.type&&(Fi(t.default)||Array.isArray(t.default))?new Ae(0,0,0,0):"color"===t.type?Ae.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,i,r,s,o,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,i,r,s,o,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Ue("Expected value to be one of ".concat(Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", "),", but found ").concat(JSON.stringify(t)," instead."));return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function ji(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Ci}function Wi(t,e){const n=new In(Ci,[],e?function(t){const e={color:le,string:oe,number:se,enum:oe,boolean:ae,formatted:pe,resolvedImage:de};return"array"===t.type?fe(e[t.value]||ce,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?Ri(new Vi(i,e)):Di(n.errors)}class Yi{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!_n(e.expression)}evaluateWithoutErrorHandling(t,e,n,i,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,s)}evaluate(t,e,n,i,r,s){return this._styleExpression.evaluate(t,e,n,i,r,s)}}class qi{constructor(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!_n(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,n,i,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,s)}evaluate(t,e,n,i,r,s){return this._styleExpression.evaluate(t,e,n,i,r,s)}interpolationFactor(t,e,n){return this.interpolationType?Zn.interpolationFactor(this.interpolationType,t,e,n):0}}function Xi(t,e){if("error"===(t=Wi(t,e)).result)return t;const n=t.value.expression,i=yn(n);if(!i&&!Oi(e))return Di([new ee("","data expressions not supported")]);const r=vn(n,["zoom","pitch","distance-from-center"]);if(!r&&!Ni(e))return Di([new ee("","zoom expressions not supported")]);const s=Ki(n);return s||r?s instanceof ee?Di([s]):s instanceof Zn&&!Mi(e)?Di([new ee("",'"interpolate" expressions cannot be used with this property')]):Ri(s?new qi(i?"camera":"composite",t.value,s.labels,s instanceof Zn?s.interpolation:void 0):new Yi(i?"constant":"source",t.value)):Di([new ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zi{constructor(t,e){this._parameters=t,this._specification=e,Qt(this,ki(this._parameters,this._specification))}static deserialize(t){return new Zi(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ki(t){let e=null;if(t instanceof $n)e=Ki(t.result);else if(t instanceof Qn){for(const n of t.args)if(e=Ki(n),e)break}else(t instanceof An||t instanceof Zn)&&t.input instanceof Ke&&"zoom"===t.input.name&&(e=t);return e instanceof ee||t.eachChild((t=>{const n=Ki(t);n instanceof ee?e=n:!e&&n?e=new ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new ee("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}class Qi{constructor(t,e,n,i){this.message=(t?"".concat(t,": "):"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}function Ji(t){const e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},s=t.style,o=t.styleSpec;let a=[];const l=Pi(n);if("object"!==l)return[new Qi(e,n,"object expected, ".concat(l," found"))];for(const h in n){const t=h.split(".")[0],l=i[t]||i["*"];let c;r[t]?c=r[t]:i[t]?c=Nr:r["*"]?c=r["*"]:i["*"]&&(c=Nr),c?a=a.concat(c({key:(e?"".concat(e,"."):e)+h,value:n[h],valueSpec:l,style:s,styleSpec:o,object:n,objectKey:h},n)):a.push(new Qi(e,n[h],'unknown property "'.concat(h,'"')))}for(const h in i)r[h]||i[h].required&&void 0===i[h].default&&void 0===n[h]&&a.push(new Qi(e,n,'missing required property "'.concat(h,'"')));return a}function $i(t){const e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,s=t.key,o=t.arrayElementValidator||Nr;if("array"!==Pi(e))return[new Qi(s,e,"array expected, ".concat(Pi(e)," found"))];if(n.length&&e.length!==n.length)return[new Qi(s,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new Qi(s,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];let a={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};r.$version<7&&(a.function=n.function),"object"===Pi(n.value)&&(a=n.value);let l=[];for(let h=0;h<e.length;h++)l=l.concat(o({array:e,arrayIndex:h,value:e[h],valueSpec:a,style:i,styleSpec:r,key:"".concat(s,"[").concat(h,"]")}));return l}function tr(t){const e=t.key,n=t.value,i=t.valueSpec;let r=Pi(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new Qi(e,n,"number expected, ".concat(r," found"))];if("minimum"in i){let r=i.minimum;if("array"===Pi(i.minimum)&&(r=i.minimum[t.arrayIndex]),n<r)return[new Qi(e,n,"".concat(n," is less than the minimum value ").concat(r))]}if("maximum"in i){let r=i.maximum;if("array"===Pi(i.maximum)&&(r=i.maximum[t.arrayIndex]),n>r)return[new Qi(e,n,"".concat(n," is greater than the maximum value ").concat(r))]}return[]}function er(t){const e=t.valueSpec,n=Jt(t.value.type);let i,r,s,o={};const a="categorical"!==n&&void 0===t.value.property,l=!a,h="array"===Pi(t.value.stops)&&"array"===Pi(t.value.stops[0])&&"object"===Pi(t.value.stops[0][0]),c=Ji({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new Qi(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const i=t.value;return e=e.concat($i({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:u})),"array"===Pi(i)&&0===i.length&&e.push(new Qi(t.key,i,"array must have at least one stop")),e},default:function(t){return Nr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&a&&c.push(new Qi(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new Qi(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Mi(t.valueSpec)&&c.push(new Qi(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Oi(t.valueSpec)?c.push(new Qi(t.key,t.value,"property functions not supported")):a&&!Ni(t.valueSpec)&&c.push(new Qi(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!h||void 0!==t.value.property||c.push(new Qi(t.key,t.value,'"property" property is required')),c;function u(t){let n=[];const i=t.value,a=t.key;if("array"!==Pi(i))return[new Qi(a,i,"array expected, ".concat(Pi(i)," found"))];if(2!==i.length)return[new Qi(a,i,"array length 2 expected, length ".concat(i.length," found"))];if(h){if("object"!==Pi(i[0]))return[new Qi(a,i,"object expected, ".concat(Pi(i[0])," found"))];if(void 0===i[0].zoom)return[new Qi(a,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Qi(a,i,"object stop key must have value")];const e=Jt(i[0].zoom);if("number"!=typeof e)return[new Qi(a,i[0].zoom,"stop zoom values must be numbers")];if(s&&s>e)return[new Qi(a,i[0].zoom,"stop zoom values must appear in ascending order")];e!==s&&(s=e,r=void 0,o={}),n=n.concat(Ji({key:"".concat(a,"[0]"),value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:tr,value:p}}))}else n=n.concat(p({key:"".concat(a,"[0]"),value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return ji($t(i[1]))?n.concat([new Qi("".concat(a,"[1]"),i[1],"expressions are not allowed in function stops.")]):n.concat(Nr({key:"".concat(a,"[1]"),value:i[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,s){const a=Pi(t.value),l=Jt(t.value),h=null!==t.value?t.value:s;if(i){if(a!==i)return[new Qi(t.key,h,"".concat(a," stop domain type must match previous stop domain type ").concat(i))]}else i=a;if("number"!==a&&"string"!==a&&"boolean"!==a&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new Qi(t.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let i="number expected, ".concat(a," found");return Oi(e)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qi(t.key,h,i)]}return"categorical"!==n||"number"!==a||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===a&&"number"==typeof l&&"number"==typeof r&&void 0!==r&&l<r?[new Qi(t.key,h,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in o?[new Qi(t.key,h,"stop domain values must be unique")]:(o[l]=!0,[])):[new Qi(t.key,h,"integer expected, found ".concat(String(l)))]}}function nr(t){const e=("property"===t.expressionContext?Xi:Wi)($t(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new Qi("".concat(t.key).concat(e.key),t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Qi(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!_n(n))return[new Qi(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return ir(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!vn(n,["zoom","feature-state"]))return[new Qi(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!yn(n))return[new Qi(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ir(t,e){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const r of e.valueSpec.expression.parameters)n.delete(r);if(0===n.size)return[];const i=[];return t instanceof Ke&&n.has(t.name)?[new Qi(e.key,e.value,'["'.concat(t.name,'"] expression is not supported in a filter for a ').concat(e.object.type," layer with id: ").concat(e.object.id))]:(t.eachChild((t=>{i.push(...ir(t,e))})),i)}function rr(t){const e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(Jt(n))&&r.push(new Qi(e,n,"expected one of [".concat(i.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(i.values).indexOf(Jt(n))&&r.push(new Qi(e,n,"expected one of [".concat(Object.keys(i.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),r}function sr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!sr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function or(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};sr(t)||(t=dr(t));const n=t;let i=!0;try{i=function(t){if(!hr(t))return t;let e=$t(t);return lr(e),e=ar(e),e}(n)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}const r=Kt["filter_".concat(e)],s=Wi(i,r);let o=null;if("error"===s.result)throw new Error(s.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));o=(t,e,n)=>s.value.evaluate(t,e,{},n);let a=null,l=null;if(i!==n){const t=Wi(n,r);if("error"===t.result)throw new Error(t.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));a=(e,n,i,r,s)=>t.value.evaluate(e,n,{},i,void 0,void 0,r,s),l=!yn(t.value.expression)}return{filter:o,dynamicFilter:a||void 0,needGeometry:pr(i),needFeature:!!l}}function ar(t){if(!Array.isArray(t))return t;const e=function(t){if(cr.has(t[0]))for(let e=1;e<t.length;e++)if(hr(t[e]))return!0;return t}(t);return!0===e?e:e.map((t=>ar(t)))}function lr(t){let e=!1;const n=[];if("case"===t[0]){for(let i=1;i<t.length-1;i+=2)e=e||hr(t[i]),n.push(t[i+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||hr(t[1]);for(let e=2;e<t.length-1;e+=2)n.push(t[e+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||hr(t[1]);for(let e=1;e<t.length-1;e+=2)n.push(t[e+1])}e&&(t.length=0,t.push("any",...n));for(let i=1;i<t.length;i++)lr(t[i])}function hr(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let n=1;n<t.length;n++)if(hr(t[n]))return!0;return!1}const cr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ur(t,e){return t<e?-1:t>e?1:0}function pr(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(pr(t[e]))return!0;return!1}function dr(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?fr(t[1],t[2],"=="):"!="===e?yr(fr(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?fr(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(dr))):"all"===e?["all"].concat(t.slice(1).map(dr)):"none"===e?["all"].concat(t.slice(1).map(dr).map(yr)):"in"===e?mr(t[1],t.slice(2)):"!in"===e?yr(mr(t[1],t.slice(2))):"has"===e?gr(t[1]):"!has"===e?yr(gr(t[1])):"within"!==e||t;var n}function fr(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function mr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(ur)]]:["filter-in-small",t,["literal",e]]}}function gr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function yr(t){return["!",t]}function _r(t){return sr($t(t.value))?nr(Qt({},t,{expressionContext:"filter",valueSpec:t.styleSpec["filter_".concat(t.layerType||"fill")]})):vr(t)}function vr(t){const e=t.value,n=t.key;if("array"!==Pi(e))return[new Qi(n,e,"array expected, ".concat(Pi(e)," found"))];const i=t.styleSpec;let r,s=[];if(e.length<1)return[new Qi(n,e,"filter array must have at least 1 element")];switch(s=s.concat(rr({key:"".concat(n,"[0]"),value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),Jt(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Jt(e[1])&&s.push(new Qi(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&s.push(new Qi(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&(r=Pi(e[1]),"string"!==r&&s.push(new Qi("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found"))));for(let o=2;o<e.length;o++)r=Pi(e[o]),"$type"===Jt(e[1])?s=s.concat(rr({key:"".concat(n,"[").concat(o,"]"),value:e[o],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&s.push(new Qi("".concat(n,"[").concat(o,"]"),e[o],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)s=s.concat(vr({key:"".concat(n,"[").concat(i,"]"),value:e[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=Pi(e[1]),2!==e.length?s.push(new Qi(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&s.push(new Qi("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=Pi(e[1]),2!==e.length?s.push(new Qi(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&s.push(new Qi("".concat(n,"[1]"),e[1],"object expected, ".concat(r," found")))}return s}function Tr(t,e){const n=t.key,i=t.style,r=t.styleSpec,s=t.value,o=t.objectKey,a=r["".concat(e,"_").concat(t.layerType)];if(!a)return[];const l=o.match(/^(.*)-transition$/);if("paint"===e&&l&&a[l[1]]&&a[l[1]].transition)return Nr({key:n,value:s,valueSpec:r.transition,style:i,styleSpec:r});const h=t.valueSpec||a[o];if(!h)return[new Qi(n,s,'unknown property "'.concat(o,'"'))];let c;if("string"===Pi(s)&&Oi(h)&&!h.tokens&&(c=/^{([^}]+)}$/.exec(s)))return[new Qi(n,s,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(c[1])," }`."))];const u=[];return"symbol"===t.layerType&&("text-field"===o&&i&&!i.glyphs&&u.push(new Qi(n,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Fi($t(s))&&"identity"===Jt(s.type)&&u.push(new Qi(n,s,'"text-font" does not support identity functions'))),u.concat(Nr({key:t.key,value:s,valueSpec:h,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:o}))}function Er(t){return Tr(t,"paint")}function xr(t){return Tr(t,"layout")}function Ir(t){let e=[];const n=t.value,i=t.key,r=t.style,s=t.styleSpec;n.type||n.ref||e.push(new Qi(i,n,'either "type" or "ref" is required'));let o=Jt(n.type);const a=Jt(n.ref);if(n.id){const s=Jt(n.id);for(let o=0;o<t.arrayIndex;o++){const t=r.layers[o];Jt(t.id)===s&&e.push(new Qi(i,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(t.id.__line__)))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new Qi(i,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),r.layers.forEach((e=>{Jt(e.id)===a&&(t=e)})),t?t.ref?e.push(new Qi(i,n.ref,"ref cannot reference another ref layer")):o=Jt(t.type):"string"==typeof a&&e.push(new Qi(i,n.ref,'ref layer "'.concat(a,'" not found')))}else if("background"!==o&&"sky"!==o)if(n.source){const t=r.sources&&r.sources[n.source],s=t&&Jt(t.type);t?"vector"===s&&"raster"===o?e.push(new Qi(i,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===s&&"raster"!==o?e.push(new Qi(i,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==s||n["source-layer"]?"raster-dem"===s&&"hillshade"!==o?e.push(new Qi(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===s&&t.lineMetrics||e.push(new Qi(i,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new Qi(i,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new Qi(i,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new Qi(i,n,'missing required property "source"'));return e=e.concat(Ji({key:i,value:n,valueSpec:s.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Nr({key:"".concat(i,".type"),value:n.type,valueSpec:s.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:t=>_r(Qt({layerType:o},t)),layout:t=>Ji({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>xr(Qt({layerType:o},t))}}),paint:t=>Ji({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Er(Qt({layerType:o},t))}})}})),e}function br(t){const e=t.value,n=t.key,i=Pi(e);return"string"!==i?[new Qi(n,e,"string expected, ".concat(i," found"))]:[]}const wr={promoteId:function(t){let{key:e,value:n}=t;if("string"===Pi(n))return br({key:e,value:n});{const t=[];for(const i in n)t.push(...br({key:"".concat(e,".").concat(i),value:n[i]}));return t}}};function Sr(t){const e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new Qi(n,e,'"type" is required')];const s=Jt(e.type);let o;switch(s){case"vector":case"raster":case"raster-dem":return o=Ji({key:n,value:e,valueSpec:i["source_".concat(s.replace("-","_"))],style:t.style,styleSpec:i,objectElementValidators:wr}),o;case"geojson":if(o=Ji({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:wr}),e.cluster)for(const t in e.clusterProperties){const[i,r]=e.clusterProperties[t],s="string"==typeof i?[i,["accumulated"],["get",t]]:i;o.push(...nr({key:"".concat(n,".").concat(t,".map"),value:r,expressionContext:"cluster-map"})),o.push(...nr({key:"".concat(n,".").concat(t,".reduce"),value:s,expressionContext:"cluster-reduce"}))}return o;case"video":return Ji({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Ji({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new Qi(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rr({key:"".concat(n,".type"),value:e.type,valueSpec:{values:Ar(i)},style:r,styleSpec:i})}}function Ar(t){return t.source.reduce(((e,n)=>{const i=t[n];return"enum"===i.type.type&&(e=e.concat(Object.keys(i.type.values))),e}),[])}function Cr(t){const e=t.value,n=t.styleSpec,i=n.light,r=t.style;let s=[];const o=Pi(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new Qi("light",e,"object expected, ".concat(o," found"))]),s;for(const a in e){const t=a.match(/^(.*)-transition$/);s=s.concat(t&&i[t[1]]&&i[t[1]].transition?Nr({key:a,value:e[a],valueSpec:n.transition,style:r,styleSpec:n}):i[a]?Nr({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:n}):[new Qi(a,e[a],'unknown property "'.concat(a,'"'))])}return s}function Rr(t){const e=t.value,n=t.key,i=t.style,r=t.styleSpec,s=r.terrain;let o=[];const a=Pi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new Qi("terrain",e,"object expected, ".concat(a," found"))]),o;for(const l in e){const t=l.match(/^(.*)-transition$/);o=o.concat(t&&s[t[1]]&&s[t[1]].transition?Nr({key:l,value:e[l],valueSpec:r.transition,style:i,styleSpec:r}):s[l]?Nr({key:l,value:e[l],valueSpec:s[l],style:i,styleSpec:r}):[new Qi(l,e[l],'unknown property "'.concat(l,'"'))])}if(e.source){const t=i.sources&&i.sources[e.source],r=t&&Jt(t.type);t?"raster-dem"!==r&&o.push(new Qi(n,e.source,"terrain cannot be used with a source of type ".concat(String(r),', it only be used with a "raster-dem" source type'))):o.push(new Qi(n,e.source,'source "'.concat(e.source,'" not found')))}else o.push(new Qi(n,e,'terrain is missing required property "source"'));return o}function Dr(t){const e=t.value,n=t.style,i=t.styleSpec,r=i.fog;let s=[];const o=Pi(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new Qi("fog",e,"object expected, ".concat(o," found"))]),s;for(const a in e){const t=a.match(/^(.*)-transition$/);s=s.concat(t&&r[t[1]]&&r[t[1]].transition?Nr({key:a,value:e[a],valueSpec:i.transition,style:n,styleSpec:i}):r[a]?Nr({key:a,value:e[a],valueSpec:r[a],style:n,styleSpec:i}):[new Qi(a,e[a],'unknown property "'.concat(a,'"'))])}return s}const Or={"*":()=>[],array:$i,boolean:function(t){const e=t.value,n=t.key,i=Pi(e);return"boolean"!==i?[new Qi(n,e,"boolean expected, ".concat(i," found"))]:[]},number:tr,color:function(t){const e=t.key,n=t.value,i=Pi(n);return"string"!==i?[new Qi(e,n,"color expected, ".concat(i," found"))]:null===Te(n)?[new Qi(e,n,'color expected, "'.concat(n,'" found'))]:[]},enum:rr,filter:_r,function:er,layer:Ir,object:Ji,source:Sr,light:Cr,terrain:Rr,fog:Dr,string:br,formatted:function(t){return 0===br(t).length?[]:nr(t)},resolvedImage:function(t){return 0===br(t).length?[]:nr(t)},projection:function(t){const e=t.value,n=t.styleSpec,i=n.projection,r=t.style;let s=[];const o=Pi(e);if("object"===o)for(const a in e)s=s.concat(Nr({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:n}));else"string"!==o&&(s=s.concat([new Qi("projection",e,"object or string expected, ".concat(o," found"))]));return s}};function Nr(t){const e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&Fi(Jt(e))?er(t):n.expression&&ji($t(e))?nr(t):n.type&&Or[n.type]?Or[n.type](t):Ji(Qt({},t,{valueSpec:n.type?i[n.type]:n}))}function Mr(t){const e=t.value,n=t.key,i=br(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new Qi(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new Qi(n,e,'"glyphs" url must include a "{range}" token'))),i}function Pr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kt;return kr(Nr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Mr,"*":()=>[]}}))}const Fr=t=>kr(Er(t)),Lr=t=>kr(xr(t));function kr(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function Ur(t,e){let n=!1;if(e&&e.length)for(const i of e)t.fire(new Xt(new Error(i.message))),n=!0;return n}var Br=zr;function zr(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(var s=0;s<this.d*this.d;s++){var o=r[3+s],a=r[3+s+1];i.push(o===a?null:r.subarray(o,a))}var l=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var h=0;h<this.d*this.d;h++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}zr.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},zr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},zr.prototype._insertCell=function(t,e,n,i,r,s){this.cells[r].push(s)},zr.prototype.query=function(t,e,n,i,r){var s=this.min,o=this.max;if(t<=s&&e<=s&&o<=n&&o<=i&&!r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,i,this._queryCell,a,{},r),a},zr.prototype._queryCell=function(t,e,n,i,r,s,o,a){var l=this.cells[r];if(null!==l)for(var h=this.keys,c=this.bboxes,u=0;u<l.length;u++){var p=l[u];if(void 0===o[p]){var d=4*p;(a?a(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&i>=c[d+1])?(o[p]=!0,s.push(h[p])):o[p]=!1}}},zr.prototype._forEachCell=function(t,e,n,i,r,s,o,a){for(var l=this._convertToCellCoord(t),h=this._convertToCellCoord(e),c=this._convertToCellCoord(n),u=this._convertToCellCoord(i),p=l;p<=c;p++)for(var d=h;d<=u;d++){var f=this.d*d+p;if((!a||a(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&r.call(this,t,e,n,i,f,s,o,a))return}},zr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},zr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},zr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var s=e,o=0;o<t.length;o++){var a=t[o];r[3+o]=s,r.set(a,s),s+=a.length}return r[3+t.length]=s,r.set(this.keys,s),r[3+t.length+1]=s+=this.keys.length,r.set(this.bboxes,s),s+=this.bboxes.length,r.buffer};const Gr={};function Hr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Gr[e]={klass:t,omit:n.omit||[]}}Hr(Object,"Object"),Br.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Br.deserialize=function(t){return new Br(t.buffer)},Object.defineProperty(Br,"name",{value:"Grid"}),Hr(Br,"Grid"),Hr(Ae,"Color"),Hr(Error,"Error"),Hr(ot,"AJAXError"),Hr(Oe,"ResolvedImage"),Hr(Zi,"StylePropertyFunction"),Hr(Vi,"StyleExpression",{omit:["_evaluator"]}),Hr(qi,"ZoomDependentExpression"),Hr(Yi,"ZoomConstantExpression"),Hr(Ke,"CompoundExpression",{omit:["_evaluate"]});for(const gm in Ci)Gr[Ci[gm]._classRegistryKey]||Hr(Ci[gm],"Expression".concat(gm));function Vr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function jr(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function Wr(t,n){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Vr(t)||jr(t))return n&&n.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return n&&n.push(e.buffer),e}if(t instanceof e.ImageData)return n&&n.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const i of t)e.push(Wr(i,n));return e}if("object"==typeof t){const e=t.constructor,i=e._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class ".concat(i));const r=e.serialize?e.serialize(t,n):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&(Gr[i].omit.indexOf(e)>=0||(r[e]=Wr(t[e],n)));t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(r.$name=i),r}throw new Error("can't serialize object of type "+typeof t)}function Yr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Vr(t)||jr(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map(Yr);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=Gr[e];if(!n)throw new Error("can't deserialize unregistered class ".concat(e));if(n.deserialize)return n.deserialize(t);const i=Object.create(n.prototype);for(const r of Object.keys(t))"$name"!==r&&(i[r]=Yr(t[r]));return i}throw new Error("can't deserialize object of type "+typeof t)}const qr=t=>t>=1536&&t<=1791,Xr=t=>t>=1872&&t<=1919,Zr=t=>t>=2208&&t<=2303,Kr=t=>t>=11904&&t<=12031,Qr=t=>t>=12032&&t<=12255,Jr=t=>t>=12272&&t<=12287,$r=t=>t>=12288&&t<=12351,ts=t=>t>=12352&&t<=12447,es=t=>t>=12448&&t<=12543,ns=t=>t>=12544&&t<=12591,is=t=>t>=12704&&t<=12735,rs=t=>t>=12736&&t<=12783,ss=t=>t>=12784&&t<=12799,os=t=>t>=12800&&t<=13055,as=t=>t>=13056&&t<=13311,ls=t=>t>=13312&&t<=19903,hs=t=>t>=19968&&t<=40959,cs=t=>t>=40960&&t<=42127,us=t=>t>=42128&&t<=42191,ps=t=>t>=44032&&t<=55215,ds=t=>t>=63744&&t<=64255,fs=t=>t>=64336&&t<=65023,ms=t=>t>=65040&&t<=65055,gs=t=>t>=65072&&t<=65103,ys=t=>t>=65104&&t<=65135,_s=t=>t>=65136&&t<=65279,vs=t=>t>=65280&&t<=65519;function Ts(t){for(const e of t)if(Is(e.charCodeAt(0)))return!0;return!1}function Es(t){for(const e of t)if(!xs(e.charCodeAt(0)))return!1;return!0}function xs(t){return!(qr(t)||Xr(t)||Zr(t)||fs(t)||_s(t))}function Is(t){return!(746!==t&&747!==t&&(t<4352||!(is(t)||ns(t)||gs(t)&&!(t>=65097&&t<=65103)||ds(t)||as(t)||Kr(t)||rs(t)||!(!$r(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ls(t)||hs(t)||os(t)||(t=>t>=12592&&t<=12687)(t)||(t=>t>=43360&&t<=43391)(t)||(t=>t>=55216&&t<=55295)(t)||(t=>t>=4352&&t<=4607)(t)||ps(t)||ts(t)||Jr(t)||(t=>t>=12688&&t<=12703)(t)||Qr(t)||ss(t)||es(t)&&12540!==t||!(!vs(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ys(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(t=>t>=5120&&t<=5759)(t)||(t=>t>=6320&&t<=6399)(t)||ms(t)||(t=>t>=19904&&t<=19967)(t)||cs(t)||us(t))))}function bs(t){return!(Is(t)||function(t){return!!((t=>t>=128&&t<=255)(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(t=>t>=8192&&t<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(t=>t>=8448&&t<=8527)(t)||(t=>t>=8528&&t<=8591)(t)||(t=>t>=8960&&t<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(t=>t>=9216&&t<=9279)(t)&&9251!==t||(t=>t>=9280&&t<=9311)(t)||(t=>t>=9312&&t<=9471)(t)||(t=>t>=9632&&t<=9727)(t)||(t=>t>=9728&&t<=9983)(t)&&!(t>=9754&&t<=9759)||(t=>t>=11008&&t<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||$r(t)||es(t)||(t=>t>=57344&&t<=63743)(t)||gs(t)||ys(t)||vs(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function ws(t){return t>=1424&&t<=2303||fs(t)||_s(t)}function Ss(t,e){return!(!e&&ws(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(t=>t>=6016&&t<=6143)(t))}function As(t){for(const e of t)if(ws(e.charCodeAt(0)))return!0;return!1}const Cs="deferred",Rs="loading",Ds="loaded";let Os=null,Ns="unavailable",Ms=null;const Ps=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Ns="error"),Os&&Os(t)};function Fs(){Ls.fire(new qt("pluginStateChange",{pluginStatus:Ns,pluginURL:Ms}))}const Ls=new Zt,ks=function(){return Ns},Us=function(){if(Ns!==Cs||!Ms)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ns=Rs,Fs(),Ms&&ht({url:Ms},(t=>{t?Ps(t):(Ns=Ds,Fs())}))},Bs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ns===Ds||null!=Bs.applyArabicShaping,isLoading:()=>Ns===Rs,setState(t){Ns=t.pluginStatus,Ms=t.pluginURL},isParsed:()=>null!=Bs.applyArabicShaping&&null!=Bs.processBidirectionalText&&null!=Bs.processStyledBidirectionalText,getPluginURL:()=>Ms};class zs{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(t,e){for(const n of t)if(!Ss(n.charCodeAt(0),e))return!1;return!0}(t,Bs.isLoaded())}}class Gs{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Fi(t))return new Zi(t,e);if(ji(t)){const n=Xi(t,e);if("error"===n.result)throw new Error(n.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Ae.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class Hs{constructor(t){this.property=t,this.value=new Gs(t,void 0)}transitioned(t,e){return new js(this.property,this.value,e,R({},t.transition,this.transition),t.now)}untransitioned(){return new js(this.property,this.value,null,{},0)}}class Vs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return B(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Hs(this._values[t].property)),this._values[t].value=new Gs(this._values[t].property,null===e?void 0:B(e))}getTransition(t){return B(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Hs(this._values[t].property)),this._values[t].transition=B(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const i=this.getTransition(e);void 0!==i&&(t["".concat(e,"-transition")]=i)}return t}transitioned(t,e){const n=new Ws(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(t,e._values[i]);return n}untransitioned(){const t=new Ws(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class js{constructor(t,e,n,i,r){const s=i.delay||0,o=i.duration||0;r=r||0,this.property=t,this.value=e,this.begin=r+s,this.end=this.begin+o,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),s=this.prior;if(s){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return s.possiblyEvaluate(t,e,n);{const o=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(t,e,n),r,E(o))}}return r}}class Ws{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const i=new Xs(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Ys{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return B(this._values[t].value)}setValue(t,e){this._values[t]=new Gs(this._values[t].property,null===e?void 0:B(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const i=new Xs(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}}class qs{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)}}class Xs{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Zs{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const i=Rn[this.specification.type];return i?i(t,e,n):t}}class Ks{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,i){return new qs(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new qs(this,{kind:"constant",value:void 0},t.parameters);const i=Rn[this.specification.type];return i?new qs(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,i,r,s){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,s)}}class Qs{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)}interpolate(){return!1}}class Js{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new zs(0,{});for(const n in t){const i=t[n];i.specification.overridable&&this.overridableProperties.push(n);const r=this.defaultPropertyValues[n]=new Gs(i,void 0),s=this.defaultTransitionablePropertyValues[n]=new Hs(i);this.defaultTransitioningPropertyValues[n]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=r.possiblyEvaluate(e)}}}function $s(t,e){return 256*(t=b(Math.floor(t),0,255))+b(Math.floor(e),0,255)}Hr(Ks,"DataDrivenProperty"),Hr(Zs,"DataConstantProperty"),Hr(Qs,"ColorRampProperty");const to={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class eo{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class no{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function io(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;return{members:t.map((t=>{const r=to[t.type].BYTES_PER_ELEMENT,s=n=ro(n,Math.max(e,r)),o=t.components||1;return i=Math.max(i,r),n+=r*o,{name:t.name,type:t.type,components:o,offset:s}})),size:ro(n,Math.max(i,e)),alignment:e}}function ro(t,e){return Math.ceil(t/e)*e}class so extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t}}so.prototype.bytesPerElement=4,Hr(so,"StructArrayLayout2i4");class oo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t}}oo.prototype.bytesPerElement=6,Hr(oo,"StructArrayLayout3i6");class ao extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=4*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,t}}ao.prototype.bytesPerElement=8,Hr(ao,"StructArrayLayout4i8");class lo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,s,o)}emplace(t,e,n,i,r,s,o,a){const l=6*t,h=12*t,c=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[h+4]=i,this.uint8[h+5]=r,this.uint8[h+6]=s,this.uint8[h+7]=o,this.float32[c+2]=a,t}}lo.prototype.bytesPerElement=12,Hr(lo,"StructArrayLayout2i4ub1f12");class ho extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=4*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=i,this.float32[s+3]=r,t}}ho.prototype.bytesPerElement=16,Hr(ho,"StructArrayLayout4f16");class co extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r)}emplace(t,e,n,i,r,s){const o=6*t,a=3*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=i,this.uint16[o+3]=r,this.float32[a+2]=s,t}}co.prototype.bytesPerElement=12,Hr(co,"StructArrayLayout4ui1f12");class uo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=4*t;return this.uint16[s+0]=e,this.uint16[s+1]=n,this.uint16[s+2]=i,this.uint16[s+3]=r,t}}uo.prototype.bytesPerElement=8,Hr(uo,"StructArrayLayout4ui8");class po extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r,s)}emplace(t,e,n,i,r,s,o){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,this.int16[a+4]=s,this.int16[a+5]=o,t}}po.prototype.bytesPerElement=12,Hr(po,"StructArrayLayout6i12");class fo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,i,r,s,o,a,l,h,c,u)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p){const d=12*t;return this.int16[d+0]=e,this.int16[d+1]=n,this.int16[d+2]=i,this.int16[d+3]=r,this.uint16[d+4]=s,this.uint16[d+5]=o,this.uint16[d+6]=a,this.uint16[d+7]=l,this.int16[d+8]=h,this.int16[d+9]=c,this.int16[d+10]=u,this.int16[d+11]=p,t}}fo.prototype.bytesPerElement=24,Hr(fo,"StructArrayLayout4i4ui4i24");class mo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r,s)}emplace(t,e,n,i,r,s,o){const a=10*t,l=5*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.float32[l+2]=r,this.float32[l+3]=s,this.float32[l+4]=o,t}}mo.prototype.bytesPerElement=20,Hr(mo,"StructArrayLayout3i3f20");class go extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}go.prototype.bytesPerElement=4,Hr(go,"StructArrayLayout1ul4");class yo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u,p){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,r,s,o,a,l,h,c,u,p)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p,d){const f=20*t,m=10*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=i,this.int16[f+3]=r,this.int16[f+4]=s,this.float32[m+3]=o,this.float32[m+4]=a,this.float32[m+5]=l,this.float32[m+6]=h,this.int16[f+14]=c,this.uint32[m+8]=u,this.uint16[f+18]=p,this.uint16[f+19]=d,t}}yo.prototype.bytesPerElement=40,Hr(yo,"StructArrayLayout5i4f1i1ul2ui40");class _o extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,s,o)}emplace(t,e,n,i,r,s,o,a){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+4]=r,this.int16[l+5]=s,this.int16[l+6]=o,this.int16[l+7]=a,t}}_o.prototype.bytesPerElement=16,Hr(_o,"StructArrayLayout3i2i2i16");class vo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r)}emplace(t,e,n,i,r,s){const o=4*t,a=8*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.int16[a+6]=r,this.int16[a+7]=s,t}}vo.prototype.bytesPerElement=16,Hr(vo,"StructArrayLayout2f1f2i16");class To extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=12*t,o=3*t;return this.uint8[s+0]=e,this.uint8[s+1]=n,this.float32[o+1]=i,this.float32[o+2]=r,t}}To.prototype.bytesPerElement=12,Hr(To,"StructArrayLayout2ub2f12");class Eo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t}}Eo.prototype.bytesPerElement=12,Hr(Eo,"StructArrayLayout3f12");class xo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t}}xo.prototype.bytesPerElement=6,Hr(xo,"StructArrayLayout3ui6");class Io extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T){const E=this.length;return this.resize(E+1),this.emplace(E,t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E){const x=30*t,I=15*t,b=60*t;return this.int16[x+0]=e,this.int16[x+1]=n,this.int16[x+2]=i,this.float32[I+2]=r,this.float32[I+3]=s,this.uint16[x+8]=o,this.uint16[x+9]=a,this.uint32[I+5]=l,this.uint32[I+6]=h,this.uint32[I+7]=c,this.uint16[x+16]=u,this.uint16[x+17]=p,this.uint16[x+18]=d,this.float32[I+10]=f,this.float32[I+11]=m,this.uint8[b+48]=g,this.uint8[b+49]=y,this.uint8[b+50]=_,this.uint32[I+13]=v,this.int16[x+28]=T,this.uint8[b+58]=E,t}}Io.prototype.bytesPerElement=60,Hr(Io,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class bo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x,I,b,w,S,A,C,R){const D=this.length;return this.resize(D+1),this.emplace(D,t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x,I,b,w,S,A,C,R)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x,I,b,w,S,A,C,R,D){const O=38*t,N=19*t;return this.int16[O+0]=e,this.int16[O+1]=n,this.int16[O+2]=i,this.float32[N+2]=r,this.float32[N+3]=s,this.int16[O+8]=o,this.int16[O+9]=a,this.int16[O+10]=l,this.int16[O+11]=h,this.int16[O+12]=c,this.int16[O+13]=u,this.uint16[O+14]=p,this.uint16[O+15]=d,this.uint16[O+16]=f,this.uint16[O+17]=m,this.uint16[O+18]=g,this.uint16[O+19]=y,this.uint16[O+20]=_,this.uint16[O+21]=v,this.uint16[O+22]=T,this.uint16[O+23]=E,this.uint16[O+24]=x,this.uint16[O+25]=I,this.uint16[O+26]=b,this.uint16[O+27]=w,this.uint16[O+28]=S,this.uint32[N+15]=A,this.float32[N+16]=C,this.float32[N+17]=R,this.float32[N+18]=D,t}}bo.prototype.bytesPerElement=76,Hr(bo,"StructArrayLayout3i2f6i15ui1ul3f76");class wo extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}wo.prototype.bytesPerElement=4,Hr(wo,"StructArrayLayout1f4");class So extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r)}emplace(t,e,n,i,r,s){const o=5*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,this.float32[o+4]=s,t}}So.prototype.bytesPerElement=20,Hr(So,"StructArrayLayout5f20");class Ao extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=6*t;return this.uint32[3*t+0]=e,this.uint16[s+2]=n,this.uint16[s+3]=i,this.uint16[s+4]=r,t}}Ao.prototype.bytesPerElement=12,Hr(Ao,"StructArrayLayout1ul3ui12");class Co extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t}}Co.prototype.bytesPerElement=4,Hr(Co,"StructArrayLayout2ui4");class Ro extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Ro.prototype.bytesPerElement=2,Hr(Ro,"StructArrayLayout1ui2");class Do extends no{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t}}Do.prototype.bytesPerElement=8,Hr(Do,"StructArrayLayout2f8");class Oo extends eo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Oo.prototype.size=40;class No extends yo{get(t){return new Oo(this,t)}}Hr(No,"CollisionBoxArray");class Mo extends eo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Mo.prototype.size=60;class Po extends Io{get(t){return new Mo(this,t)}}Hr(Po,"PlacedSymbolArray");class Fo extends eo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Fo.prototype.size=76;class Lo extends bo{get(t){return new Fo(this,t)}}Hr(Lo,"SymbolInstanceArray");class ko extends wo{getoffsetX(t){return this.float32[1*t+0]}}Hr(ko,"GlyphOffsetArray");class Uo extends so{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Hr(Uo,"SymbolLineVertexArray");class Bo extends eo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Bo.prototype.size=12;class zo extends Ao{get(t){return new Bo(this,t)}}Hr(zo,"FeatureIndexArray");class Go extends Co{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Hr(Go,"FillExtrusionCentroidArray");const Ho=io([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Vo=io([{name:"a_dash",components:4,type:"Uint16"}]);var jo={exports:{}},Wo={exports:{}};Wo.exports=function(t,e){var n,i,r,s,o,a,l,h;for(i=t.length-(n=3&t.length),r=e,o=3432918353,a=461845907,h=0;h<i;)l=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24,++h,r=27492+(65535&(s=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(h+2))<<16;case 2:l^=(255&t.charCodeAt(h+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(h)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0};var Yo={exports:{}};Yo.exports=function(t,e){for(var n,i=t.length,r=e^i,s=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++s;switch(i){case 3:r^=(255&t.charCodeAt(s+2))<<16;case 2:r^=(255&t.charCodeAt(s+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(s)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0};var qo=Wo.exports,Xo=Yo.exports;jo.exports=qo,jo.exports.murmur3=qo,jo.exports.murmur2=Xo;class Zo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,i){this.ids.push(Ko(t)),this.positions.push(e,n,i)}getPositions(t){const e=Ko(t);let n=0,i=this.ids.length-1;for(;n<i;){const t=n+i>>1;this.ids[t]>=e?i=t:n=t+1}const r=[];for(;this.ids[n]===e;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(t,e){const n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return Qo(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(t){const e=new Zo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ko(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:jo.exports(String(t))}function Qo(t,e,n,i){for(;n<i;){const r=t[n+i>>1];let s=n-1,o=i+1;for(;;){do{s++}while(t[s]<r);do{o--}while(t[o]>r);if(s>=o)break;Jo(t,s,o),Jo(e,3*s,3*o),Jo(e,3*s+1,3*o+1),Jo(e,3*s+2,3*o+2)}o-n<i-o?(Qo(t,e,n,o),n=o+1):(Qo(t,e,o+1,i),i=o)}}function Jo(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}Hr(Zo,"FeaturePositionMap");class $o{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class ta extends $o{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ea extends $o{constructor(t){super(t),this.current=[0,0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class na extends $o{constructor(t){super(t),this.current=Ae.transparent}set(t,e,n){this.fetchUniformLocation(t,e)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const ia=new Float32Array(16),ra=new Float32Array(9),sa=new Float32Array(4);function oa(t){return[$s(255*t.r,255*t.g),$s(255*t.b,255*t.a)]}class aa{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>"u_".concat(t))),this.type=n}setUniform(t,e,n,i,r){e.set(t,r,i.constantOr(this.value))}getBinding(t,e){return"color"===this.type?new na(t):new ta(t)}}class la{constructor(t,e){this.uniformNames=e.map((t=>"u_".concat(t))),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,e,n,i,r){const s="u_pattern"===r||"u_dash"===r?this.pattern:"u_pixel_ratio"===r?this.pixelRatio:null;s&&e.set(t,r,s)}getBinding(t,e){return"u_pattern"===e||"u_dash"===e?new ea(t):new ta(t)}}class ha{constructor(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(t,e,n,i,r,s){const o=this.paintVertexArray.length,a=this.expression.evaluate(new zs(0),e,{},r,i,s);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,n,i,r){const s=this.expression.evaluate({zoom:0},n,i,void 0,r);this._setPaintValue(t,e,s)}_setPaintValue(t,e,n){if("color"===this.type){const i=oa(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ca{constructor(t,e,n,i,r,s){this.expression=t,this.uniformNames=e.map((t=>"u_".concat(t,"_t"))),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new s}populatePaintArray(t,e,n,i,r,s){const o=this.expression.evaluate(new zs(this.zoom),e,{},r,i,s),a=this.expression.evaluate(new zs(this.zoom+1),e,{},r,i,s),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,o,a)}updatePaintArray(t,e,n,i,r){const s=this.expression.evaluate({zoom:this.zoom},n,i,void 0,r),o=this.expression.evaluate({zoom:this.zoom+1},n,i,void 0,r);this._setPaintValue(t,e,s,o)}_setPaintValue(t,e,n,i){if("color"===this.type){const r=oa(n),s=oa(i);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1],s[0],s[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e,n,i,r){const s=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,o=b(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);e.set(t,r,o)}getBinding(t,e){return new ta(t)}}class ua{constructor(t,e,n,i,r){this.expression=t,this.layerId=r,this.paintVertexAttributes=("array"===n?Vo:Ho).members;for(let s=0;s<e.length;++s);this.paintVertexArray=new i}populatePaintArray(t,e,n){const i=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,i,r,s){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],s)}_setPaintValues(t,e,n,i){if(!i||!n)return;const r=i[n];if(!r)return;const{tl:s,br:o,pixelRatio:a}=r;for(let l=t;l<e;l++)this.paintVertexArray.emplace(l,s[0],s[1],o[0],o[1],a)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pa{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.binders={},this._buffers=[];const i=[];for(const r in t.paint._values){if(!n(r))continue;const s=t.paint.get(r);if(!(s instanceof qs&&Oi(s.property.specification)))continue;const o=ma(r,t.type),a=s.value,l=s.property.specification.type,h=s.property.useIntegerZoom,c="line-dasharray"===r||r.endsWith("pattern"),u="line-dasharray"===r&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==a.kind||u)if("source"===a.kind||u||c){const e=_a(r,l,"source");this.binders[r]=c?new ua(a,o,l,e,t.id):new ha(a,o,l,e),i.push("/a_".concat(r))}else{const t=_a(r,l,"composite");this.binders[r]=new ca(a,o,l,h,e,t),i.push("/z_".concat(r))}else this.binders[r]=c?new la(a.value,o):new aa(a.value,o,l),i.push("/u_".concat(r))}this.cacheKey=i.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof ha||e instanceof ca?e.maxValue:0}populatePaintArrays(t,e,n,i,r,s){for(const o in this.binders){const a=this.binders[o];(a instanceof ha||a instanceof ca||a instanceof ua)&&a.populatePaintArray(t,e,n,i,r,s)}}setConstantPatternPositions(t){for(const e in this.binders){const n=this.binders[e];n instanceof la&&n.setConstantPatternPositions(t)}}updatePaintArrays(t,e,n,i,r,s){let o=!1;for(const a in t){const l=e.getPositions(a);for(const e of l){const l=n.feature(e.index);for(const n in this.binders){const h=this.binders[n];if((h instanceof ha||h instanceof ca||h instanceof ua)&&!0===h.expression.isStateDependent){const c=i.paint.get(n);h.expression=c.value,h.updatePaintArray(e.start,e.end,l,t[a],r,s),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof aa||n instanceof la)&&t.push(...n.uniformNames.map((t=>"#define HAS_UNIFORM_".concat(t))))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof ha||n instanceof ca||n instanceof ua)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof aa||n instanceof la||n instanceof ca)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const n in this.binders){const i=this.binders[n];if(i instanceof aa||i instanceof la||i instanceof ca)for(const r of i.uniformNames)e.push({name:r,property:n,binding:i.getBinding(t,r)})}return e}setUniforms(t,e,n,i,r){for(const{name:s,property:o,binding:a}of n)this.binders[o].setUniform(t,a,r,i.get(o),s)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof ha||e instanceof ca||e instanceof ua)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof ha||n instanceof ca||n instanceof ua)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof ha||e instanceof ca||e instanceof ua)&&e.destroy()}}}class da{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const i of t)this.programConfigurations[i.id]=new pa(i,e,n);this.needsUpload=!1,this._featureMap=new Zo,this._bufferOffset=0}populatePaintArrays(t,e,n,i,r,s,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,i,r,s,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,i,r){for(const s of n)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(t,this._featureMap,e,s,i,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const fa={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function ma(t,e){return fa[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}const ga={"line-pattern":{source:co,composite:co},"fill-pattern":{source:co,composite:co},"fill-extrusion-pattern":{source:co,composite:co},"line-dasharray":{source:uo,composite:uo}},ya={color:{source:Do,composite:ho},number:{source:wo,composite:Do}};function _a(t,e,n){const i=ga[t];return i&&i[n]||ya[e][n]}Hr(aa,"ConstantBinder"),Hr(la,"PatternConstantBinder"),Hr(ha,"SourceExpressionBinder"),Hr(ua,"PatternCompositeBinder"),Hr(ca,"CompositeExpressionBinder"),Hr(pa,"ProgramConfiguration",{omit:["_buffers"]}),Hr(da,"ProgramConfigurationSet");const va="-transition";class Ta extends Zt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Ys(e.layout)),e.paint)){this._transitionablePaint=new Vs(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xs(e.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(Lr,"layers.".concat(this.id,".layout.").concat(t),t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return L(t,va)?this._transitionablePaint.getTransition(t.slice(0,-va.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(Fr,"layers.".concat(this.id,".paint.").concat(t),t,e,n))return!1;if(L(t,va))return this._transitionablePaint.setTransition(t.slice(0,-va.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],i=n.value.isDataDriven(),r=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value,o=s.isDataDriven(),a=L(t,"pattern")||"line-dasharray"===t;return o||i||a||this._handleOverridablePaintPropertyUpdate(t,r,s)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),U(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&Ur(this,t.call(Pr,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:Kt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof qs&&Oi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=or(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Ea=io([{name:"a_pos",components:2,type:"Int16"}],4),xa=io([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ia{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=t}prepareSegment(t,e,n,i){let r=this.segments[this.segments.length-1];return t>Ia.MAX_VERTEX_ARRAY_LENGTH&&G("Max vertices per segment is ".concat(Ia.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!r||r.vertexLength+t>Ia.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,i){return new Ia([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}Ia.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Hr(Ia,"SegmentVector");var ba=8192;class wa{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Aa?new Aa(t.lng,t.lat):Aa.convert(t),this}setSouthWest(t){return this._sw=t instanceof Aa?new Aa(t.lng,t.lat):Aa.convert(t),this}extend(t){const e=this._sw,n=this._ne;let i,r;if(t instanceof Aa)i=t,r=t;else{if(!(t instanceof wa))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(wa.convert(t)):this.extend(Aa.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&t.hasOwnProperty("lon")?this.extend(Aa.convert(t)):this;if(i=t._sw,r=t._ne,!i||!r)return this}return e||n?(e.lng=Math.min(i.lng,e.lng),e.lat=Math.min(i.lat,e.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new Aa(i.lng,i.lat),this._ne=new Aa(r.lng,r.lat)),this}getCenter(){return new Aa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Aa(this.getWest(),this.getNorth())}getSouthEast(){return new Aa(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Aa.convert(t);let i=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}static convert(t){return!t||t instanceof wa?t:new wa(t)}}const Sa=6371008.8;class Aa{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(e,")"));if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Aa(S(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(t){const e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return Sa*Math.acos(Math.min(r,1))}toBounds(){const t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,e=t/Math.cos(Math.PI/180*this.lat);return new wa(new Aa(this.lng-e,this.lat-t),new Aa(this.lng+e,this.lat+t))}static convert(t){if(t instanceof Aa)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Aa(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Aa(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ca=2*Math.PI*Sa;function Ra(t){return Ca*Math.cos(t*Math.PI/180)}function Da(t){return(180+t)/360}function Oa(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Na(t,e){return t/Ra(e)}function Ma(t){return 360*t-180}function Pa(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Fa(t,e){return t*Ra(Pa(e))}const La=85.051129;function ka(t){return 1/Math.cos(t*Math.PI/180)}class Ua{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Aa.convert(t);return new Ua(Da(n.lng),Oa(n.lat),Na(e,n.lat))}toLngLat(){return new Aa(Ma(this.x),Pa(this.y))}toAltitude(){return Fa(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ca*ka(Pa(this.y))}}function Ba(t,e,n,i,r,s,o,a,l){const h=(e+i)/2,c=(n+r)/2,u=new f(h,c);a(u),function(t,e,n,i,r,s){const o=n-r,a=i-s;return Math.abs((i-e)*o-(n-t)*a)/Math.hypot(o,a)}(u.x,u.y,s.x,s.y,o.x,o.y)>=l?(Ba(t,e,n,h,c,s,u,a,l),Ba(t,h,c,i,r,u,o,a,l)):t.push(o)}function za(t,e,n){let i=t[0],r=i.x,s=i.y;e(i);const o=[i];for(let a=1;a<t.length;a++){const l=t[a],{x:h,y:c}=l;e(l),Ba(o,r,s,h,c,i,l,e,n),r=h,s=c,i=l}return o}function Ga(t,e,n,i){if(i(e,n)){const r=e.add(n)._mult(.5);Ga(t,e,r,i),Ga(t,r,n,i)}else t.push(n)}function Ha(t,e){let n=t[0];const i=[n];for(let r=1;r<t.length;r++){const s=t[r];Ga(i,n,s,e),n=s}return i}const Va=Math.pow(2,14)-1,ja=-Va-1;function Wa(t,e){const n=Math.round(t.x*e),i=Math.round(t.y*e);return t.x=b(n,ja,Va),t.y=b(i,ja,Va),(n<t.x||n>t.x+1||i<t.y||i>t.y+1)&&G("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function Ya(t,e,n){const i=t.loadGeometry(),r=t.extent,s=ba/r;if(e&&n&&n.projection.isReprojectedInTileSpace){const s=1<<e.z,{scale:o,x:a,y:l,projection:h}=n,c=t=>{const n=Ma((e.x+t.x/r)/s),i=Pa((e.y+t.y/r)/s),c=h.project(n,i);t.x=(c.x*o-a)*r,t.y=(c.y*o-l)*r};for(let e=0;e<i.length;e++)if(1!==t.type)i[e]=za(i[e],c,1);else{const t=[];for(const n of i[e])n.x<0||n.x>=r||n.y<0||n.y>=r||(c(n),t.push(n));i[e]=t}}for(const o of i)for(const t of o)Wa(t,s);return i}function qa(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Ya(t):[]}}function Xa(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}function Za(t,e,n){const i=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*i,n[1]*i,n[2]*i)}class Ka{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new so,this.indexArray=new xo,this.segments=new Ia,this.programConfigurations=new da(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,i){const r=this.layers[0],s=[];let o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(const{feature:l,id:h,index:c,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,e=qa(l,t);if(!this.layers[0]._featureFilter.filter(new zs(this.zoom),e,n))continue;const r=o?o.evaluate(e,{},n):void 0,a={id:h,properties:l.properties,type:l.type,sourceLayerIndex:u,index:c,geometry:t?e.geometry:Ya(l,n,i),patterns:{},sortKey:r};s.push(a)}o&&s.sort(((t,e)=>t.sortKey-e.sortKey));let a=null;"globe"===i.projection.name&&(this.globeExtVertexArray=new po,a=i.projection);for(const l of s){const{geometry:i,index:r,sourceLayerIndex:s}=l,o=t[r].feature;this.addFeature(l,i,r,e.availableImages,n,a),e.featureIndex.insert(o,i,r,s,this.index)}}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ea.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,xa.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,e,n,i,r,s){for(const o of e)for(const e of o){const n=e.x,i=e.y;if(n<0||n>=ba||i<0||i>=ba)continue;if(s){const t=s.projectTilePoint(n,i,r),e=s.upVector(r,n,i),o=this.globeExtVertexArray;Za(o,t,e),Za(o,t,e),Za(o,t,e),Za(o,t,e)}const o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),a=o.vertexLength;Xa(this.layoutVertexArray,n,i,-1,-1),Xa(this.layoutVertexArray,n,i,1,-1),Xa(this.layoutVertexArray,n,i,1,1),Xa(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+2,a+3),o.vertexLength+=4,o.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i,r)}}function Qa(t,e){for(let n=0;n<t.length;n++)if(ol(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(ol(t,e[n]))return!0;return!!el(t,e)}function Ja(t,e,n){return!!ol(t,e)||!!il(e,t,n)}function $a(t,e){if(1===t.length)return sl(e,t[0]);for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(ol(t,i[e]))return!0}for(let n=0;n<t.length;n++)if(sl(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(el(t,e[n]))return!0;return!1}function tl(t,e,n){if(t.length>1){if(el(t,e))return!0;for(let i=0;i<e.length;i++)if(il(e[i],t,n))return!0}for(let i=0;i<t.length;i++)if(il(t[i],e,n))return!0;return!1}function el(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1];for(let t=0;t<e.length-1;t++)if(nl(i,r,e[t],e[t+1]))return!0}return!1}function nl(t,e,n,i){return H(t,n,i)!==H(e,n,i)&&H(t,e,n)!==H(t,e,i)}function il(t,e,n){const i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(let r=1;r<e.length;r++)if(rl(t,e[r-1],e[r])<i)return!0;return!1}function rl(t,e,n){const i=e.distSqr(n);if(0===i)return t.distSqr(e);const r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function sl(t,e){let n,i,r,s=!1;for(let o=0;o<t.length;o++){n=t[o];for(let t=0,o=n.length-1;t<n.length;o=t++)i=n[t],r=n[o],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(s=!s)}return s}function ol(t,e){let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++){const s=t[i],o=t[r];s.y>e.y!=o.y>e.y&&e.x<(o.x-s.x)*(e.y-s.y)/(o.y-s.y)+s.x&&(n=!n)}return n}function al(t,e,n,i,r){for(const o of t)if(e<=o.x&&n<=o.y&&i>=o.x&&r>=o.y)return!0;const s=[new f(e,n),new f(e,r),new f(i,r),new f(i,n)];if(t.length>2)for(const o of s)if(ol(t,o))return!0;for(let o=0;o<t.length-1;o++)if(ll(t[o],t[o+1],s))return!0;return!1}function ll(t,e,n){const i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;const s=H(t,e,n[0]);return s!==H(t,e,n[1])||s!==H(t,e,n[2])||s!==H(t,e,n[3])}function hl(t,e,n){const i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function cl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ul(t,e,n,i,r){if(!e[0]&&!e[1])return t;const s=f.convert(e)._mult(r);"viewport"===n&&s._rotate(-i);const o=[];for(let a=0;a<t.length;a++)o.push(t[a].sub(s));return o}function pl(t,e,n,i){const r=f.convert(t)._mult(i);return"viewport"===e&&r._rotate(-n),r}Hr(Ka,"CircleBucket",{omit:["layers"]});const dl=new Js({"circle-sort-key":new Ks(Kt.layout_circle["circle-sort-key"])});var fl={paint:new Js({"circle-radius":new Ks(Kt.paint_circle["circle-radius"]),"circle-color":new Ks(Kt.paint_circle["circle-color"]),"circle-blur":new Ks(Kt.paint_circle["circle-blur"]),"circle-opacity":new Ks(Kt.paint_circle["circle-opacity"]),"circle-translate":new Zs(Kt.paint_circle["circle-translate"]),"circle-translate-anchor":new Zs(Kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zs(Kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zs(Kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ks(Kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ks(Kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ks(Kt.paint_circle["circle-stroke-opacity"])}),layout:dl},ml=1e-6,gl="undefined"!=typeof Float32Array?Float32Array:Array;function yl(){var t=new gl(9);return gl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function _l(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],p=n[0],d=n[1],f=n[2],m=n[3],g=n[4],y=n[5],_=n[6],v=n[7],T=n[8];return t[0]=p*i+d*o+f*h,t[1]=p*r+d*a+f*c,t[2]=p*s+d*l+f*u,t[3]=m*i+g*o+y*h,t[4]=m*r+g*a+y*c,t[5]=m*s+g*l+y*u,t[6]=_*i+v*o+T*h,t[7]=_*r+v*a+T*c,t[8]=_*s+v*l+T*u,t}function vl(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tl(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8],u=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=n*a-i*o,v=n*l-r*o,T=n*h-s*o,E=i*l-r*a,x=i*h-s*a,I=r*h-s*l,b=c*m-u*f,w=c*g-p*f,S=c*y-d*f,A=u*g-p*m,C=u*y-d*m,R=p*y-d*g,D=_*R-v*C+T*A+E*S-x*w+I*b;return D?(t[0]=(a*R-l*C+h*A)*(D=1/D),t[1]=(r*C-i*R-s*A)*D,t[2]=(m*I-g*x+y*E)*D,t[3]=(p*x-u*I-d*E)*D,t[4]=(l*S-o*R-h*w)*D,t[5]=(n*R-r*S+s*w)*D,t[6]=(g*T-f*I-y*v)*D,t[7]=(c*I-p*T+d*v)*D,t[8]=(o*C-a*S+h*b)*D,t[9]=(i*S-n*C-s*b)*D,t[10]=(f*x-m*T+y*_)*D,t[11]=(u*T-c*x-d*_)*D,t[12]=(a*w-o*A-l*b)*D,t[13]=(n*A-i*w+r*b)*D,t[14]=(m*v-f*E-g*_)*D,t[15]=(c*E-u*v+p*_)*D,t):null}function El(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],p=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],_=e[15],v=n[0],T=n[1],E=n[2],x=n[3];return t[0]=v*i+T*a+E*u+x*m,t[1]=v*r+T*l+E*p+x*g,t[2]=v*s+T*h+E*d+x*y,t[3]=v*o+T*c+E*f+x*_,t[4]=(v=n[4])*i+(T=n[5])*a+(E=n[6])*u+(x=n[7])*m,t[5]=v*r+T*l+E*p+x*g,t[6]=v*s+T*h+E*d+x*y,t[7]=v*o+T*c+E*f+x*_,t[8]=(v=n[8])*i+(T=n[9])*a+(E=n[10])*u+(x=n[11])*m,t[9]=v*r+T*l+E*p+x*g,t[10]=v*s+T*h+E*d+x*y,t[11]=v*o+T*c+E*f+x*_,t[12]=(v=n[12])*i+(T=n[13])*a+(E=n[14])*u+(x=n[15])*m,t[13]=v*r+T*l+E*p+x*g,t[14]=v*s+T*h+E*d+x*y,t[15]=v*o+T*c+E*f+x*_,t}function xl(t,e,n){var i,r,s,o,a,l,h,c,u,p,d,f,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],p=e[9],d=e[10],f=e[11],t[0]=i=e[0],t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=h,t[7]=c,t[8]=u,t[9]=p,t[10]=d,t[11]=f,t[12]=i*m+a*g+u*y+e[12],t[13]=r*m+l*g+p*y+e[13],t[14]=s*m+h*g+d*y+e[14],t[15]=o*m+c*g+f*y+e[15]),t}function Il(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function bl(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],h=e[8],c=e[9],u=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+h*i,t[5]=o*r+c*i,t[6]=a*r+u*i,t[7]=l*r+p*i,t[8]=h*r-s*i,t[9]=c*r-o*i,t[10]=u*r-a*i,t[11]=p*r-l*i,t}function wl(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],h=e[8],c=e[9],u=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-h*i,t[1]=o*r-c*i,t[2]=a*r-u*i,t[3]=l*r-p*i,t[8]=s*i+h*r,t[9]=o*i+c*r,t[10]=a*i+u*r,t[11]=l*i+p*r,t}function Sl(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Al(t,e,n){var i,r,s,o=n[0],a=n[1],l=n[2],h=Math.hypot(o,a,l);return h<ml?null:(o*=h=1/h,a*=h,l*=h,i=Math.sin(e),r=Math.cos(e),t[0]=o*o*(s=1-r)+r,t[1]=a*o*s+l*i,t[2]=l*o*s-a*i,t[3]=0,t[4]=o*a*s-l*i,t[5]=a*a*s+r,t[6]=l*a*s+o*i,t[7]=0,t[8]=o*l*s+a*i,t[9]=a*l*s-o*i,t[10]=l*l*s+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Cl=El;function Rl(){var t=new gl(3);return gl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Dl(t){var e=new gl(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ol(t){return Math.hypot(t[0],t[1],t[2])}function Nl(t,e,n){var i=new gl(3);return i[0]=t,i[1]=e,i[2]=n,i}function Ml(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Pl(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Fl(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ll(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function kl(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Ul(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Bl(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function zl(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Gl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hl(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function Vl(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function jl(t,e,n){var i=n[0],r=n[1],s=n[2],o=e[0],a=e[1],l=e[2],h=r*l-s*a,c=s*o-i*l,u=i*a-r*o,p=r*u-s*c,d=s*h-i*u,f=i*c-r*h,m=2*n[3];return c*=m,u*=m,d*=2,f*=2,t[0]=o+(h*=m)+(p*=2),t[1]=a+c+d,t[2]=l+u+f,t}var Wl,Yl=Pl,ql=Fl,Xl=Ol;function Zl(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Kl(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}function Ql(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}function Jl(){var t=new gl(4);return gl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function $l(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function th(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a,t}function eh(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a,t}Rl(),Wl=new gl(4),gl!=Float32Array&&(Wl[0]=0,Wl[1]=0,Wl[2]=0,Wl[3]=0);var nh=Kl;Rl(),Nl(1,0,0),Nl(0,1,0),Jl(),Jl(),yl();class ih{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,n){const i=Gl(e,this.dir);if(Math.abs(i)<1e-6)return!1;const r=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/i;return n[0]=this.pos[0]+this.dir[0]*r,n[1]=this.pos[1]+this.dir[1]*r,n[2]=this.pos[2]+this.dir[2]*r,!0}closestPointOnSphere(t,e,n){if(function(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(n-s)<=ml*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=ml*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=ml*Math.max(1,Math.abs(r),Math.abs(a))}(this.pos,t)||0===e)return n[0]=n[1]=n[2]=0,!1;const[i,r,s]=this.dir,o=this.pos[0]-t[0],a=this.pos[1]-t[1],l=this.pos[2]-t[2],h=i*i+r*r+s*s,c=2*(o*i+a*r+l*s),u=c*c-4*h*(o*o+a*a+l*l-e*e);if(u<0){const t=Math.max(-c/2,0),h=o+i*t,u=a+r*t,p=l+s*t,d=Math.hypot(h,u,p);return n[0]=h*e/d,n[1]=u*e/d,n[2]=p*e/d,!1}{const t=(-c-Math.sqrt(u))/(2*h);if(t<0){const t=Math.hypot(o,a,l);return n[0]=o*e/t,n[1]=a*e/t,n[2]=l*e/t,!1}return n[0]=o+i*t,n[1]=a+r*t,n[2]=l+s*t,!0}}}class rh{constructor(t,e,n,i,r){this.TL=t,this.TR=e,this.BR=n,this.BL=i,this.horizon=r}static fromInvProjectionMatrix(t,e,n){const i=[-1,1,1],r=[1,1,1],s=[1,-1,1],o=[-1,-1,1],a=Vl(i,i,t),l=Vl(r,r,t),h=Vl(s,s,t),c=Vl(o,o,t);return new rh(a,l,h,c,e/n)}}class sh{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,n,i){const r=Math.pow(2,n),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const s=Ql([],n,t),o=1/s[3]/e*r;return function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}(s,s,[o,o,i?1/s[3]:o,o])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=zl([],Hl([],Yl([],s[t[0]],s[t[1]]),Yl([],s[t[2]],s[t[1]]))),n=-Gl(e,s[t[1]]);return e.concat(n)}));return new sh(s,o)}}class oh{static fromPoints(t){const e=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const i of t)Ll(e,e,i),kl(n,n,i);return new oh(e,n)}static applyTransform(t,e){const n=t.getCorners();for(let i=0;i<n.length;++i)Vl(n[i],n[i],e);return oh.fromPoints(n)}constructor(t,e){this.min=t,this.max=e,this.center=Ul([],Ml([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],n=Dl(this.min),i=Dl(this.max);for(let r=0;r<e.length;r++)n[r]=e[r]?this.min[r]:this.center[r],i[r]=e[r]?this.center[r]:this.max[r];return i[2]=this.max[2],new oh(n,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return[[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let n=!0;for(let i=0;i<t.planes.length;i++){const r=t.planes[i];let s=0;for(let t=0;t<e.length;t++)s+=Gl(r,e[t])+r[3]>=0;if(0===s)return 0;s!==e.length&&(n=!1)}if(n)return 2;for(let i=0;i<3;i++){let e=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let r=0;r<t.points.length;r++){const s=t.points[r][i]-this.min[i];e=Math.min(e,s),n=Math.max(n,s)}if(n<0||e>this.max[i]-this.min[i])return 0}return 1}}function ah(t,e,n,i,r,s,o,a,l){if(s&&t.queryGeometry.isAboveHorizon)return!1;s&&(l*=t.pixelToTileUnitsFactor);const h=t.tileID.canonical,c=n.projection.upVectorScale(h,n.center.lat,n.worldSize).metersToTile;for(const u of e)for(const e of u){const u=e.add(a),p=r&&n.elevation?n.elevation.exaggeration()*r.getElevationAt(u.x,u.y,!0):0,d=n.projection.projectTilePoint(u.x,u.y,h);if(p>0){const t=n.projection.upVector(h,u.x,u.y);d.x+=t[0]*c*p,d.y+=t[1]*c*p,d.z+=t[2]*c*p}const f=s?u:lh(d.x,d.y,d.z,i),m=s?t.tilespaceRays.map((t=>uh(t,p))):t.queryGeometry.screenGeometry,g=Ql([],[d.x,d.y,d.z,1],i);if(!o&&s?l*=g[3]/n.cameraToCenterDistance:o&&!s&&(l*=n.cameraToCenterDistance/g[3]),s){const t=Pa((e.y/ba+h.y)/(1<<h.z));l/=n.projection.pixelsPerMeter(t,1)/Na(1,t)}if(Ja(m,f,l))return!0}return!1}function lh(t,e,n,i){const r=Ql([],[t,e,n,1],i);return new f(r[0]/r[3],r[1]/r[3])}const hh=Nl(0,0,0),ch=Nl(0,0,1);function uh(t,e){const n=Rl();return hh[2]=e,t.intersectsPlane(hh,ch,n),new f(n[0],n[1])}class ph extends Ka{}function dh(t,e,n,i){let{width:r,height:s}=e;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*s*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*s*n);return t.width=r,t.height=s,t.data=i,t}function fh(t,e,n){const{width:i,height:r}=e;i===t.width&&r===t.height||(mh(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=e.data)}function mh(t,e,n,i,r,s){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const o=t.data,a=e.data;for(let l=0;l<r.height;l++){const h=((n.y+l)*t.width+n.x)*s,c=((i.y+l)*e.width+i.x)*s;for(let t=0;t<r.width*s;t++)a[c+t]=o[h+t]}return e}Hr(ph,"HeatmapBucket",{omit:["layers"]});class gh{constructor(t,e){dh(this,t,1,e)}resize(t){fh(this,new gh(t),1)}clone(){return new gh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){mh(t,e,n,i,r,1)}}class yh{constructor(t,e){dh(this,t,4,e)}resize(t){fh(this,new yh(t),4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new yh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){mh(t,e,n,i,r,4)}}Hr(gh,"AlphaImage"),Hr(yh,"RGBAImage");var _h={paint:new Js({"heatmap-radius":new Ks(Kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ks(Kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zs(Kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qs(Kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zs(Kt.paint_heatmap["heatmap-opacity"])})};function vh(t){const e={},n=t.resolution||256,i=t.clips?t.clips.length:1,r=t.image||new yh({width:n,height:i}),s=(n,i,s)=>{e[t.evaluationKey]=s;const o=t.expression.evaluate(e);r.data[n+i+0]=Math.floor(255*o.r/o.a),r.data[n+i+1]=Math.floor(255*o.g/o.a),r.data[n+i+2]=Math.floor(255*o.b/o.a),r.data[n+i+3]=Math.floor(255*o.a)};if(t.clips)for(let o=0,a=0;o<i;++o,a+=4*n)for(let e=0,i=0;e<n;e++,i+=4){const r=e/(n-1),{start:l,end:h}=t.clips[o];s(a,i,l*(1-r)+h*r)}else for(let o=0,a=0;o<n;o++,a+=4)s(0,a,o/(n-1));return r}var Th={paint:new Js({"hillshade-illumination-direction":new Zs(Kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zs(Kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zs(Kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zs(Kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zs(Kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zs(Kt.paint_hillshade["hillshade-accent-color"])})};const Eh=io([{name:"a_pos",components:2,type:"Int16"}],4),{members:xh}=Eh;var Ih={exports:{}};function bh(t,e,n){n=n||2;var i,r,s,o,a,l,h,c=e&&e.length,u=c?e[0]*n:t.length,p=wh(t,0,u,n,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(t,e,n,i){var r,s,o,a=[];for(r=0,s=e.length;r<s;r++)(o=wh(t,e[r]*i,r<s-1?e[r+1]*i:t.length,i,!1))===o.next&&(o.steiner=!0),a.push(Lh(o));for(a.sort(Nh),r=0;r<a.length;r++)n=Mh(a[r],n);return n}(t,e,p,n)),t.length>80*n){i=s=t[0],r=o=t[1];for(var f=n;f<u;f+=n)(a=t[f])<i&&(i=a),(l=t[f+1])<r&&(r=l),a>s&&(s=a),l>o&&(o=l);h=0!==(h=Math.max(s-i,o-r))?32767/h:0}return Ah(p,d,n,i,r,h,0),d}function wh(t,e,n,i,r){var s,o;if(r===Zh(t,e,n,i)>0)for(s=e;s<n;s+=i)o=Yh(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=Yh(s,t[s],t[s+1],o);return o&&zh(o,o.next)&&(qh(o),o=o.next),o}function Sh(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!zh(i,i.next)&&0!==Bh(i.prev,i,i.next))i=i.next;else{if(qh(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Ah(t,e,n,i,r,s,o){if(t){!o&&s&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=Fh(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,s,o,a,l,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<h&&(a++,i=i.nextZ);e++);for(l=h;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,h*=2}while(o>1)}(r)}(t,i,r,s);for(var a,l,h=t;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Rh(t,i,r,s):Ch(t))e.push(a.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),qh(t),t=l.next,h=l.next;else if((t=l)===h){o?1===o?Ah(t=Dh(Sh(t),e,n),e,n,i,r,s,2):2===o&&Oh(t,e,n,i,r,s):Ah(Sh(t),e,n,i,r,s,1);break}}}function Ch(t){var e=t.prev,n=t,i=t.next;if(Bh(e,n,i)>=0)return!1;for(var r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,h=i.y,c=r<s?r<o?r:o:s<o?s:o,u=a<l?a<h?a:h:l<h?l:h,p=r>s?r>o?r:o:s>o?s:o,d=a>l?a>h?a:h:l>h?l:h,f=i.next;f!==e;){if(f.x>=c&&f.x<=p&&f.y>=u&&f.y<=d&&kh(r,a,s,l,o,h,f.x,f.y)&&Bh(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Rh(t,e,n,i){var r=t.prev,s=t,o=t.next;if(Bh(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,h=o.x,c=r.y,u=s.y,p=o.y,d=a<l?a<h?a:h:l<h?l:h,f=c<u?c<p?c:p:u<p?u:p,m=a>l?a>h?a:h:l>h?l:h,g=c>u?c>p?c:p:u>p?u:p,y=Fh(d,f,e,n,i),_=Fh(m,g,e,n,i),v=t.prevZ,T=t.nextZ;v&&v.z>=y&&T&&T.z<=_;){if(v.x>=d&&v.x<=m&&v.y>=f&&v.y<=g&&v!==r&&v!==o&&kh(a,c,l,u,h,p,v.x,v.y)&&Bh(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,T.x>=d&&T.x<=m&&T.y>=f&&T.y<=g&&T!==r&&T!==o&&kh(a,c,l,u,h,p,T.x,T.y)&&Bh(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;v&&v.z>=y;){if(v.x>=d&&v.x<=m&&v.y>=f&&v.y<=g&&v!==r&&v!==o&&kh(a,c,l,u,h,p,v.x,v.y)&&Bh(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;T&&T.z<=_;){if(T.x>=d&&T.x<=m&&T.y>=f&&T.y<=g&&T!==r&&T!==o&&kh(a,c,l,u,h,p,T.x,T.y)&&Bh(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Dh(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!zh(r,s)&&Gh(r,i,i.next,s)&&jh(r,s)&&jh(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),qh(i),qh(i.next),i=t=s),i=i.next}while(i!==t);return Sh(i)}function Oh(t,e,n,i,r,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Uh(o,a)){var l=Wh(o,a);return o=Sh(o,o.next),l=Sh(l,l.next),Ah(o,e,n,i,r,s,0),void Ah(l,e,n,i,r,s,0)}a=a.next}o=o.next}while(o!==t)}function Nh(t,e){return t.x-e.x}function Mh(t,e){var n=function(t,e){var n,i=e,r=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>o&&(o=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,h=n,c=n.x,u=n.y,p=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&kh(s<u?r:o,s,c,u,s<u?o:r,s,i.x,i.y)&&(l=Math.abs(s-i.y)/(r-i.x),jh(i,t)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&Ph(n,i)))&&(n=i,p=l)),i=i.next}while(i!==h);return n}(t,e);if(!n)return e;var i=Wh(n,t);return Sh(i,i.next),Sh(n,n.next)}function Ph(t,e){return Bh(t.prev,t,e.prev)<0&&Bh(e.next,t,t.next)<0}function Fh(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Lh(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function kh(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function Uh(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Gh(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(jh(t,e)&&jh(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Bh(t.prev,t,e.prev)||Bh(t,e.prev,e))||zh(t,e)&&Bh(t.prev,t,t.next)>0&&Bh(e.prev,e,e.next)>0)}function Bh(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function zh(t,e){return t.x===e.x&&t.y===e.y}function Gh(t,e,n,i){var r=Vh(Bh(t,e,n)),s=Vh(Bh(t,e,i)),o=Vh(Bh(n,i,t)),a=Vh(Bh(n,i,e));return r!==s&&o!==a||!(0!==r||!Hh(t,n,e))||!(0!==s||!Hh(t,i,e))||!(0!==o||!Hh(n,t,i))||!(0!==a||!Hh(n,e,i))}function Hh(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Vh(t){return t>0?1:t<0?-1:0}function jh(t,e){return Bh(t.prev,t,t.next)<0?Bh(t,e,t.next)>=0&&Bh(t,t.prev,e)>=0:Bh(t,e,t.prev)<0||Bh(t,t.next,e)<0}function Wh(t,e){var n=new Xh(t.i,t.x,t.y),i=new Xh(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function Yh(t,e,n,i){var r=new Xh(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function qh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xh(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zh(t,e,n,i){for(var r=0,s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}function Kh(t,e,n,i,r){Qh(t,e,n||0,i||t.length-1,r||$h)}function Qh(t,e,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);Qh(t,e,Math.max(n,Math.floor(e-o*l/s+h)),Math.min(i,Math.floor(e+(s-o)*l/s+h)),r)}var c=t[e],u=n,p=i;for(Jh(t,n,e),r(t[i],c)>0&&Jh(t,n,i);u<p;){for(Jh(t,u,p),u++,p--;r(t[u],c)<0;)u++;for(;r(t[p],c)>0;)p--}0===r(t[n],c)?Jh(t,n,p):Jh(t,++p,i),p<=e&&(n=p+1),e<=p&&(i=p-1)}}function Jh(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function $h(t,e){return t<e?-1:t>e?1:0}function tc(t,e){const n=t.length;if(n<=1)return[t];const i=[];let r,s;for(let o=0;o<n;o++){const e=V(t[o]);0!==e&&(t[o].area=Math.abs(e),void 0===s&&(s=e<0),s===e<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}if(r&&i.push(r),e>1)for(let o=0;o<i.length;o++)i[o].length<=e||(Kh(i[o],e,1,i[o].length-1,ec),i[o]=i[o].slice(0,e));return i}function ec(t,e){return e.area-t.area}function nc(t,e,n){const i=n.patternDependencies;let r=!1;for(const s of e){const e=s.paint.get("".concat(t,"-pattern"));e.isConstant()||(r=!0);const n=e.constantOr(null);n&&(r=!0,i[n]=!0)}return r}function ic(t,e,n,i,r){const s=r.patternDependencies;for(const o of e){const e=o.paint.get("".concat(t,"-pattern")).value;if("constant"!==e.kind){let t=e.evaluate({zoom:i},n,{},r.availableImages);t=t&&t.name?t.name:t,s[t]=!0,n.patterns[o.id]=t}}return n}Ih.exports=bh,Ih.exports.default=bh,bh.deviation=function(t,e,n,i){var r=e&&e.length,s=Math.abs(Zh(t,0,r?e[0]*n:t.length,n));if(r)for(var o=0,a=e.length;o<a;o++)s-=Math.abs(Zh(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n));var l=0;for(o=0;o<i.length;o+=3){var h=i[o]*n,c=i[o+1]*n,u=i[o+2]*n;l+=Math.abs((t[h]-t[u])*(t[c+1]-t[h+1])-(t[h]-t[c])*(t[u+1]-t[h+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},bh.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[r][s][o]);r>0&&n.holes.push(i+=t[r-1].length)}return n};class rc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new so,this.indexArray=new xo,this.indexArray2=new Co,this.programConfigurations=new da(t.layers,t.zoom),this.segments=new Ia,this.segments2=new Ia,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection}populate(t,e,n,i){this.hasPattern=nc("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),s=[];for(const{feature:o,id:a,index:l,sourceLayerIndex:h}of t){const t=this.layers[0]._featureFilter.needGeometry,c=qa(o,t);if(!this.layers[0]._featureFilter.filter(new zs(this.zoom),c,n))continue;const u=r?r.evaluate(c,{},n,e.availableImages):void 0,p={id:a,properties:o.properties,type:o.type,sourceLayerIndex:h,index:l,geometry:t?c.geometry:Ya(o,n,i),patterns:{},sortKey:u};s.push(p)}r&&s.sort(((t,e)=>t.sortKey-e.sortKey));for(const o of s){const{geometry:i,index:r,sourceLayerIndex:s}=o;if(this.hasPattern){const t=ic("fill",this.layers,o,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(o,i,r,n,{},e.availableImages);e.featureIndex.insert(t[r].feature,i,r,s,this.index)}}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}addFeatures(t,e,n,i,r){for(const s of this.patternFeatures)this.addFeature(s,s.geometry,s.index,e,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xh),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];for(const o of tc(e,500)){let t=0;for(const a of o)t+=a.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=e.vertexLength,i=[],r=[];for(const a of o){if(0===a.length)continue;a!==o[0]&&r.push(i.length/2);const t=this.segments2.prepareSegment(a.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(a[0].x,a[0].y),this.indexArray2.emplaceBack(e+a.length-1,e),i.push(a[0].x),i.push(a[0].y);for(let n=1;n<a.length;n++)this.layoutVertexArray.emplaceBack(a[n].x,a[n].y),this.indexArray2.emplaceBack(e+n-1,e+n),i.push(a[n].x),i.push(a[n].y);t.vertexLength+=a.length,t.primitiveLength+=a.length}const s=Ih.exports(i,r);for(let o=0;o<s.length;o+=3)this.indexArray.emplaceBack(n+s[o],n+s[o+1],n+s[o+2]);e.vertexLength+=t,e.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,s,i)}}Hr(rc,"FillBucket",{omit:["layers","patternFeatures"]});const sc=new Js({"fill-sort-key":new Ks(Kt.layout_fill["fill-sort-key"])});var oc={paint:new Js({"fill-antialias":new Zs(Kt.paint_fill["fill-antialias"]),"fill-opacity":new Ks(Kt.paint_fill["fill-opacity"]),"fill-color":new Ks(Kt.paint_fill["fill-color"]),"fill-outline-color":new Ks(Kt.paint_fill["fill-outline-color"]),"fill-translate":new Zs(Kt.paint_fill["fill-translate"]),"fill-translate-anchor":new Zs(Kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ks(Kt.paint_fill["fill-pattern"])}),layout:sc};const ac=io([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),lc=io([{name:"a_centroid_pos",components:2,type:"Uint16"}]),hc=io([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:cc}=ac;var uc={},pc=f,dc=fc;function fc(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(mc,this,e)}function mc(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function gc(t){for(var e,n,i=0,r=0,s=t.length,o=s-1;r<s;o=r++)i+=((n=t[o]).x-(e=t[r]).x)*(e.y+n.y);return i}fc.types=["Unknown","Point","LineString","Polygon"],fc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,s=0,o=0,a=[];t.pos<n;){if(r<=0){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)s+=t.readSVarint(),o+=t.readSVarint(),1===i&&(e&&a.push(e),e=[]),e.push(new pc(s,o));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&a.push(e),a},fc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,s=0,o=1/0,a=-1/0,l=1/0,h=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<o&&(o=r),r>a&&(a=r),(s+=t.readSVarint())<l&&(l=s),s>h&&(h=s);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,a,h]},fc.prototype.toGeoJSON=function(t,e,n){var i,r,s=this.extent*Math.pow(2,n),o=this.extent*t,a=this.extent*e,l=this.loadGeometry(),h=fc.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+o)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+a)/s)*Math.PI/180))-90]}}switch(this.type){case 1:var u=[];for(i=0;i<l.length;i++)u[i]=l[i][0];c(l=u);break;case 2:for(i=0;i<l.length;i++)c(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],s=0;s<e;s++){var o=gc(t[s]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[t[s]]):n.push(t[s]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)c(l[i][r])}1===l.length?l=l[0]:h="Multi"+h;var p={type:"Feature",geometry:{type:h,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var yc=dc,_c=vc;function vc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Tc,this,e),this.length=this._features.length}function Tc(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}vc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new yc(this._pbf,e,this.extent,this._keys,this._values)};var Ec=_c;function xc(t,e,n){if(3===t){var i=new Ec(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var Ic=uc.VectorTile=function(t,e){this.layers=t.readFields(xc,{},e)},bc=uc.VectorTileFeature=dc;function wc(t,e,n,i){const r=[],s=0===i?(t,e,n,i,r,s)=>{t.push(new f(s,n+(s-e)/(i-e)*(r-n)))}:(t,e,n,i,r,s)=>{t.push(new f(e+(s-n)/(r-n)*(i-e),s))};for(const o of t){const t=[];for(const r of o){if(r.length<=2)continue;const o=[];for(let t=0;t<r.length-1;t++){const a=r[t].x,l=r[t].y,h=r[t+1].x,c=r[t+1].y,u=0===i?a:l,p=0===i?h:c;u<e?p>e&&s(o,a,l,h,c,e):u>n?p<n&&s(o,a,l,h,c,n):o.push(r[t]),p<e&&u>=e&&s(o,a,l,h,c,e),p>n&&u<=n&&s(o,a,l,h,c,n)}let a=r[r.length-1];const l=0===i?a.x:a.y;l>=e&&l<=n&&o.push(a),o.length&&(a=o[o.length-1],o[0].x===a.x&&o[0].y===a.y||o.push(o[0]),t.push(o))}t.length&&r.push(t)}return r}uc.VectorTileLayer=_c;const Sc=bc.types,Ac=Math.pow(2,13);function Cc(t,e,n,i,r,s,o,a){t.emplaceBack((e<<1)+o,(n<<1)+s,(Math.floor(i*Ac)<<1)+r,Math.round(a))}function Rc(t,e,n){const i=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*i,n[1]*i,n[2]*i)}class Dc{constructor(){this.acc=new f(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new f(t.x,t.y),this.max=new f(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const n=this.min,i=this.max;t.x<n.x?n.x=t.x:t.x>i.x&&(i.x=t.x),t.y<n.y?n.y=t.y:t.y>i.y&&(i.y=t.y),((0===t.x||t.x===ba)&&t.x===e.x)!=((0===t.y||t.y===ba)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,Cn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ba!=t.x>ba&&this.addBorderIntersection(1,Cn(e.y,t.y,(ba-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Cn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ba!=t.y>ba&&this.addBorderIntersection(3,Cn(e.x,t.x,(ba-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new f(0,0)}span(){return new f(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class Oc{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new ao,this.centroidVertexArray=new Go,this.indexArray=new xo,this.programConfigurations=new da(t.layers,t.zoom),this.segments=new Ia,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n,i){this.features=[],this.hasPattern=nc("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ba/(1<<t.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:r,id:s,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,l=qa(r,t);if(!this.layers[0]._featureFilter.filter(new zs(this.zoom),l,n))continue;const h={id:s,sourceLayerIndex:a,index:o,geometry:t?l.geometry:Ya(r,n,i),properties:r.properties,type:r.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(ic("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,o,n,{},e.availableImages,i),e.featureIndex.insert(r,h.geometry,o,a,this.index,c)}this.sortBorders()}addFeatures(t,e,n,i,r){for(const s of this.features){const{geometry:t}=s;this.addFeature(s,t,s.index,e,n,i,r)}this.sortBorders()}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,cc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,hc.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,lc.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i,r,s,o){const a=[new f(0,0),new f(ba,ba)],l=o.projection,h="globe"===l.name,c=this.enableTerrain&&!h?new Dc:null,u="Polygon"===Sc[t.type];h&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new po);const p=tc(e,500);for(let f=p.length-1;f>=0;f--){const t=p[f];(0===t.length||(d=t[0]).every((t=>t.x<=0))||d.every((t=>t.x>=ba))||d.every((t=>t.y<=0))||d.every((t=>t.y>=ba)))&&p.splice(f,1)}var d;let m;if(h)m=Bc(p,a,i);else{m=[];for(const t of p)m.push({polygon:t,bounds:a})}const g=u?this.edgeRadius:0;for(const{polygon:f,bounds:y}of m){let t=0,e=0;for(const i of f)u&&!i[0].equals(i[i.length-1])&&i.push(i[0]),e+=u?i.length-1:i.length;const n=this.segments.prepareSegment((u?5:4)*e,this.layoutVertexArray,this.indexArray);if(u){const e=[],r=[];t=n.vertexLength;for(const t of f){let s,o;t.length&&t!==f[0]&&r.push(e.length/2),s=t[1].sub(t[0])._perp()._unit();for(let r=1;r<t.length;r++){const a=t[r],c=t[r===t.length-1?1:r+1];let{x:u,y:p}=a;if(g){o=c.sub(a)._perp()._unit();const t=s.add(o)._unit(),e=g*Math.min(4,1/(s.x*t.x+s.y*t.y));u+=e*t.x,p+=e*t.y,s=o}Cc(this.layoutVertexArray,u,p,0,0,1,1,0),n.vertexLength++,e.push(a.x,a.y),h&&Rc(this.layoutVertexExtArray,l.projectTilePoint(u,p,i),l.upVector(i,u,p))}}const s=Ih.exports(e,r);for(let i=0;i<s.length;i+=3)this.indexArray.emplaceBack(t+s[i],t+s[i+2],t+s[i+1]),n.primitiveLength++}for(const r of f){c&&r.length&&c.startRing(r[0]);let e,s,o,a=r.length>4&&Lc(r[r.length-2],r[0],r[1]),p=g?Mc(r[r.length-2],r[0],r[1],g):0;s=r[1].sub(r[0])._perp()._unit();let d=!0;for(let f=1,m=0;f<r.length;f++){let _=r[f-1],v=r[f];const T=r[f===r.length-1?1:f+1];if(c&&u&&c.currentPolyCount.top++,Fc(v,_,y)){g&&(s=T.sub(v)._perp()._unit(),d=!d);continue}c&&c.append(v,_);const E=v.sub(_)._perp(),x=E.x/(Math.abs(E.x)+Math.abs(E.y)),I=E.y>0?1:0,b=_.dist(v);if(m+b>32768&&(m=0),g){o=T.sub(v)._perp()._unit();let t=Pc(_,v,T,Nc(s,o),g);isNaN(t)&&(t=0);const e=v.sub(_)._unit();_=_.add(e.mult(p))._round(),v=v.add(e.mult(-t))._round(),p=t,s=o}const w=n.vertexLength,S=r.length>4&&Lc(_,v,T);let A=kc(m,a,d);if(Cc(this.layoutVertexArray,_.x,_.y,x,I,0,0,A),Cc(this.layoutVertexArray,_.x,_.y,x,I,0,1,A),m+=b,A=kc(m,S,!d),a=S,Cc(this.layoutVertexArray,v.x,v.y,x,I,0,0,A),Cc(this.layoutVertexArray,v.x,v.y,x,I,0,1,A),n.vertexLength+=4,this.indexArray.emplaceBack(w+0,w+1,w+2),this.indexArray.emplaceBack(w+1,w+3,w+2),n.primitiveLength+=2,g){const i=t+(1===f?r.length-2:f-2),s=1===f?t:i+1;if(this.indexArray.emplaceBack(w+1,i,w+3),this.indexArray.emplaceBack(i,s,w+3),n.primitiveLength+=2,void 0===e&&(e=w),!Fc(T,r[f],y)){const t=f===r.length-1?e:n.vertexLength;this.indexArray.emplaceBack(w+2,w+3,t),this.indexArray.emplaceBack(w+3,t+1,t),this.indexArray.emplaceBack(w+3,s,t+1),n.primitiveLength+=3}d=!d}if(h){const t=this.layoutVertexExtArray,e=l.projectTilePoint(_.x,_.y,i),n=l.projectTilePoint(v.x,v.y,i),r=l.upVector(i,_.x,_.y),s=l.upVector(i,v.x,v.y);Rc(t,e,r),Rc(t,e,r),Rc(t,n,s),Rc(t,n,s)}}u&&(t+=r.length-1)}}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;const t=c.borders,e=this.featuresOnBorder.push(c)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,s,i)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e){let n,i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(0!==t.y){const r=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(r.y/10))}else n=Math.ceil(7*(t.x+450)),i=0;else n=0,i=+r;let s=r?this.centroidVertexArray.length:e.vertexArrayOffset;for(const o of e.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*o.edges+o.top);for(let t=0;t<o.top;t++)this.centroidVertexArray.emplace(s++,n,i);for(let t=0;t<2*o.edges;t++)this.centroidVertexArray.emplace(s++,0,i),this.centroidVertexArray.emplace(s++,n,i)}}}function Nc(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function Mc(t,e,n,i){const r=e.sub(t)._perp()._unit(),s=n.sub(e)._perp()._unit();return Pc(t,e,n,Nc(r,s),i)}function Pc(t,e,n,i,r){const s=Math.sqrt(1-i*i);return Math.min(t.dist(e)/3,e.dist(n)/3,r*s/i)}function Fc(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function Lc(t,e,n){if(t.x<0||t.x>=ba||e.x<0||e.x>=ba||n.x<0||n.x>=ba)return!1;const i=n.sub(e),r=i.perp(),s=t.sub(e);return(i.x*s.x+i.y*s.y)/Math.sqrt((i.x*i.x+i.y*i.y)*(s.x*s.x+s.y*s.y))>-.866&&r.x*s.x+r.y*s.y<0}function kc(t,e,n){const i=e?2|t:-3&t;return n?1|i:-2&i}function Uc(){const t=Math.PI/32,e=Math.tan(t),n=Sa;return n*Math.sqrt(1+2*e*e)-n}function Bc(t,e,n){const i=1<<n.z,r=Ma(n.x/i),s=Ma((n.x+1)/i),o=Pa(n.y/i),a=Pa((n.y+1)/i);return function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;const o=[];if(!t.length||!n||!i)return o;const a=(t,e)=>{for(const n of t)o.push({polygon:n,bounds:e})},l=Math.ceil(Math.log2(n)),h=Math.ceil(Math.log2(i)),c=l-h,u=[];for(let f=0;f<Math.abs(c);f++)u.push(c>0?0:1);for(let f=0;f<Math.min(l,h);f++)u.push(0),u.push(1);let p=t;if(p=wc(p,e[0].y-r,e[1].y+r,1),p=wc(p,e[0].x-r,e[1].x+r,0),!p.length)return o;const d=[];for(u.length?d.push({polygons:p,bounds:e,depth:0}):a(p,e);d.length;){const t=d.pop(),e=t.depth,n=u[e],i=t.bounds[0],o=t.bounds[1],l=0===n?i.x:i.y,h=0===n?o.x:o.y,c=s?s(n,l,h):.5*(l+h),p=wc(t.polygons,l-r,c+r,n),m=wc(t.polygons,c-r,h+r,n);if(p.length){const t=[i,new f(0===n?c:o.x,1===n?c:o.y)];u.length>e+1?d.push({polygons:p,bounds:t,depth:e+1}):a(p,t)}if(m.length){const t=[new f(0===n?c:i.x,1===n?c:i.y),o];u.length>e+1?d.push({polygons:m,bounds:t,depth:e+1}):a(m,t)}}return o}(t,e,Math.ceil((s-r)/11.25),Math.ceil((o-a)/11.25),1,((t,e,r)=>{if(0===t)return.5*(e+r);{const t=Pa((n.y+e/ba)/i);return(Oa(.5*(Pa((n.y+r/ba)/i)+t))*i-n.y)*ba}}))}Hr(Oc,"FillExtrusionBucket",{omit:["layers","features"]}),Hr(Dc,"PartMetadata");const zc=new Js({"fill-extrusion-edge-radius":new Zs(Kt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Gc={paint:new Js({"fill-extrusion-opacity":new Zs(Kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ks(Kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zs(Kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zs(Kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ks(Kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ks(Kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ks(Kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zs(Kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Zs(Kt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Zs(Kt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:zc};function Hc(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}class Vc{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Yc(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=function(t,e,n){var i=Hc(256*t,256*(e=Math.pow(2,n)-e-1),n),r=Hc(256*(t+1),256*(e+1),n);return i[0]+","+i[1]+","+r[0]+","+r[1]}(this.x,this.y,this.z),i=function(t,e,n){let i,r="";for(let s=t;s>0;s--)i=1<<s-1,r+=(e&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class jc{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Yc(t,e.z,e.z,e.x,e.y)}}class Wc{constructor(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Vc(n,+i,+r),this.key=0===e&&t===n?this.canonical.key:Yc(e,t,n,i,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Wc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Yc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return Yc(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Wc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Wc(e,this.wrap,e,n,i),new Wc(e,this.wrap,e,n+1,i),new Wc(e,this.wrap,e,n,i+1),new Wc(e,this.wrap,e,n+1,i+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Wc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Wc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jc(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}function Yc(t,e,n,i,r){const s=1<<Math.min(n,22);let o=s*(r%s)+i%s;return t&&n<22&&(o+=s*s*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*o+n)+(e-n)}Hr(Vc,"CanonicalTileID"),Hr(Wc,"OverscaledTileID",{omit:["projMatrix"]});class qc extends f{constructor(t,e,n){super(t,e),this.z=n}}function Xc(t,e){return t.x*e.x+t.y*e.y}function Zc(t,e){if(1===t.length){let n=0;const i=e[n++];let r;for(;!r||i.equals(r);)if(r=e[n++],!r)return 1/0;for(;n<e.length;n++){const s=e[n],o=t[0],a=r.sub(i),l=s.sub(i),h=o.sub(i),c=Xc(a,a),u=Xc(a,l),p=Xc(l,l),d=Xc(h,a),f=Xc(h,l),m=c*p-u*u,g=(p*d-u*f)/m,y=(c*f-u*d)/m,_=i.z*(1-g-y)+r.z*g+s.z*y;if(isFinite(_))return _}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function Kc(t,e,n,i,r,s,o,a){const l=o*r.getElevationAt(t,e,!0,!0),h=0!==s[0],c=h?0===s[1]?o*(s[0]/7-450):o*function(t,e,n){const i=Math.floor(e[0]/8),r=Math.floor(e[1]/8),s=10*(e[0]-8*i),o=10*(e[1]-8*r),a=t.getElevationAt(i,r,!0,!0),l=t.getMeterToDEM(n),h=Math.floor(.5*(s*l-1)),c=Math.floor(.5*(o*l-1)),u=t.tileCoordToPixel(i,r),p=2*h+1,d=2*c+1,f=function(t,e,n,i,r){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+r,n,!0),t.getElevationAtPixel(e,n+r,!0),t.getElevationAtPixel(e+i,n+r,!0)]}(t,u.x-h,u.y-c,p,d),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),_=Math.min(.25,.5*l*(m+g)/p),v=Math.min(.25,.5*l*y/d);return a+Math.max(_*s,v*o)}(r,s,a):l;return{base:l+(0===n)?-1:n,top:h?Math.max(c+i,l+n+2):l+i}}const Qc=io([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Jc}=Qc,$c=io([{name:"a_packed",components:4,type:"Float32"}]),{members:tu}=$c,eu=bc.types,nu=Math.cos(Math.PI/180*37.5);class iu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new lo,this.layoutVertexArray2=new ho,this.indexArray=new xo,this.programConfigurations=new da(t.layers,t.zoom),this.segments=new Ia,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,i){this.hasPattern=nc("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),s=[];for(const{feature:h,id:c,index:u,sourceLayerIndex:p}of t){const t=this.layers[0]._featureFilter.needGeometry,e=qa(h,t);if(!this.layers[0]._featureFilter.filter(new zs(this.zoom),e,n))continue;const o=r?r.evaluate(e,{},n):void 0,a={id:c,properties:h.properties,type:h.type,sourceLayerIndex:p,index:u,geometry:t?e.geometry:Ya(h,n,i),patterns:{},sortKey:o};s.push(a)}r&&s.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:o,featureIndex:a}=e,l=this.addConstantDashes(o);for(const h of s){const{geometry:i,index:r,sourceLayerIndex:s}=h;if(l&&this.addFeatureDashes(h,o),this.hasPattern){const t=ic("line",this.layers,h,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(h,i,r,n,o.positions,e.availableImages);a.insert(t[r].feature,i,r,s,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,r=n.layout.get("line-cap").value;if("constant"!==i.kind||"constant"!==r.kind)e=!0;else{const e=r.value,n=i.value;if(!n)continue;t.addDash(n,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const i of this.layers){const r=i.paint.get("line-dasharray").value,s=i.layout.get("line-cap").value;if("constant"===r.kind&&"constant"===s.kind)continue;let o,a;if("constant"===r.kind){if(o=r.value,!o)continue}else o=r.evaluate({zoom:n},t);a="constant"===s.kind?s.value:s.evaluate({zoom:n},t),e.addDash(o,a),t.patterns[i.id]=e.getKey(o,a)}}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}addFeatures(t,e,n,i,r){for(const s of this.patternFeatures)this.addFeature(s,s.geometry,s.index,e,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,tu)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Jc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,i,r,s){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),l=o.get("line-cap").evaluate(t,{}),h=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const u of e)this.addLine(u,t,a,l,h,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,s,i)}addLine(t,e,n,i,r,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===eu[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let l=0;for(;l<a-1&&t[l].equals(t[l+1]);)l++;if(a<(o?3:2))return;"bevel"===n&&(r=1.05);const h=this.overscaling<=16?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let u,p,d,f,m;this.e1=this.e2=-1,o&&(u=t[a-2],m=t[l].sub(u)._unit()._perp());for(let g=l;g<a;g++){if(d=g===a-1?o?t[l+1]:void 0:t[g+1],d&&t[g].equals(d))continue;m&&(f=m),u&&(p=u),u=t[g],m=d?d.sub(u)._unit()._perp():f,f=f||m;let e=f.add(m);0===e.x&&0===e.y||e._unit();const y=f.x*m.x+f.y*m.y,_=e.x*m.x+e.y*m.y,v=0!==_?1/_:1/0,T=2*Math.sqrt(2-2*_),E=_<nu&&p&&d,x=f.x*m.y-f.y*m.x>0;if(E&&g>l){const t=u.dist(p);if(t>2*h){const e=u.sub(u.sub(p)._mult(h/t)._round());this.updateDistance(p,e),this.addCurrentVertex(e,f,0,0,c),p=e}}const I=p&&d;let b=I?n:o?"butt":i;if(I&&"round"===b&&(v<s?b="miter":v<=2&&(b="fakeround")),"miter"===b&&v>r&&(b="bevel"),"bevel"===b&&(v>2&&(b="flipbevel"),v<r&&(b="miter")),p&&this.updateDistance(p,u),"miter"===b)e._mult(v),this.addCurrentVertex(u,e,0,0,c);else if("flipbevel"===b){if(v>100)e=m.mult(-1);else{const t=v*f.add(m).mag()/f.sub(m).mag();e._perp()._mult(t*(x?-1:1))}this.addCurrentVertex(u,e,0,0,c),this.addCurrentVertex(u,e.mult(-1),0,0,c)}else if("bevel"===b||"fakeround"===b){const t=-Math.sqrt(v*v-1),e=x?t:0,n=x?0:t;if(p&&this.addCurrentVertex(u,f,e,n,c),"fakeround"===b){const t=Math.round(180*T/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const i=m.sub(f)._mult(n)._add(f)._unit()._mult(x?-1:1);this.addHalfVertex(u,i.x,i.y,!1,x,0,c)}}d&&this.addCurrentVertex(u,m,-e,-n,c)}else if("butt"===b)this.addCurrentVertex(u,e,0,0,c);else if("square"===b){const t=p?1:-1;p||this.addCurrentVertex(u,e,t,t,c),this.addCurrentVertex(u,e,0,0,c),p&&this.addCurrentVertex(u,e,t,t,c)}else"round"===b&&(p&&(this.addCurrentVertex(u,f,0,0,c),this.addCurrentVertex(u,f,1,1,c,!0)),d&&(this.addCurrentVertex(u,m,-1,-1,c,!0),this.addCurrentVertex(u,m,0,0,c)));if(E&&g<a-1){const t=u.dist(d);if(t>2*h){const e=u.add(d.sub(u)._mult(h/t)._round());this.updateDistance(u,e),this.addCurrentVertex(e,m,0,0,c),u=e}}}}addCurrentVertex(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=e.y*i-e.x,a=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,s,!1,n,r),this.addHalfVertex(t,o,a,s,!0,-i,r)}addHalfVertex(t,e,n,i,r,s,o){let{x:a,y:l}=t;this.layoutVertexArray.emplaceBack((a<<1)+(i?1:0),(l<<1)+(r?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===s?0:s<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const h=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,h),o.primitiveLength++),r?this.e2=h:this.e1=h}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Hr(iu,"LineBucket",{omit:["layers","patternFeatures"]});const ru=new Js({"line-cap":new Ks(Kt.layout_line["line-cap"]),"line-join":new Ks(Kt.layout_line["line-join"]),"line-miter-limit":new Zs(Kt.layout_line["line-miter-limit"]),"line-round-limit":new Zs(Kt.layout_line["line-round-limit"]),"line-sort-key":new Ks(Kt.layout_line["line-sort-key"])});var su={paint:new Js({"line-opacity":new Ks(Kt.paint_line["line-opacity"]),"line-color":new Ks(Kt.paint_line["line-color"]),"line-translate":new Zs(Kt.paint_line["line-translate"]),"line-translate-anchor":new Zs(Kt.paint_line["line-translate-anchor"]),"line-width":new Ks(Kt.paint_line["line-width"]),"line-gap-width":new Ks(Kt.paint_line["line-gap-width"]),"line-offset":new Ks(Kt.paint_line["line-offset"]),"line-blur":new Ks(Kt.paint_line["line-blur"]),"line-dasharray":new Ks(Kt.paint_line["line-dasharray"]),"line-pattern":new Ks(Kt.paint_line["line-pattern"]),"line-gradient":new Qs(Kt.paint_line["line-gradient"]),"line-trim-offset":new Zs(Kt.paint_line["line-trim-offset"])}),layout:ru};const ou=new class extends Ks{possiblyEvaluate(t,e){return e=new zs(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,i){return e=R({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,i)}}(su.paint.properties["line-width"].specification);function au(t,e){return e>0?e+2*t:t}ou.useIntegerZoom=!0;const lu=io([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hu=io([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),cu=io([{name:"a_projected_pos",components:4,type:"Float32"}],4);io([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const uu=io([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),pu=io([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);io([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const du=io([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fu=io([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);io([{name:"triangle",components:3,type:"Uint16"}]),io([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),io([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),io([{type:"Float32",name:"offsetX"}]),io([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var mu=24;const gu=128;function yu(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new zs(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:i}=n;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let s=r;for(;s<e.length&&e[s]<t+1;)s++;s=Math.min(e.length-1,s);const o=e[r],a=e[s];return"composite"===n.kind?{kind:"composite",minZoom:o,maxZoom:a,interpolationType:i}:{kind:"camera",minZoom:o,maxZoom:a,minSize:n.evaluate(new zs(o)),maxSize:n.evaluate(new zs(a)),interpolationType:i}}}function _u(t,e,n){let{uSize:i,uSizeT:r}=e,{lowerSize:s,upperSize:o}=n;return"source"===t.kind?s/gu:"composite"===t.kind?Cn(s/gu,o/gu,r):i}function vu(t,e){let n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:s,maxZoom:o}=t,a=r?b(Zn.interpolationFactor(r,e,s,o),0,1):0;"camera"===t.kind?i=Cn(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:i}}var Tu=Object.freeze({__proto__:null,getSizeData:yu,evaluateSizeForFeature:_u,evaluateSizeForZoom:vu,SIZE_PACK_FACTOR:gu});function Eu(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Bs.applyArabicShaping&&(t=Bs.applyArabicShaping(t)),t}(t.text,e,n)})),t}const xu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Iu(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function bu(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var wu=Cu,Su=function(t,e,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,h=l>>1,c=-7,u=n?r-1:0,p=n?-1:1,d=t[e+u];for(u+=p,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+t[e+u],u+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=i;c>0;o=256*o+t[e+u],u+=p,c-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=h}return(d?-1:1)*o*Math.pow(2,s-i)},Au=function(t,e,n,i,r,s){var o,a,l,h=8*s-r-1,c=(1<<h)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+u>=1?p/l:p*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,r),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(o=o<<r|a,h+=r;h>0;t[n+d]=255&o,d+=f,o/=256,h-=8);t[n+d-f]|=128*m};function Cu(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Cu.Varint=0,Cu.Fixed64=1,Cu.Bytes=2,Cu.Fixed32=5;var Ru=4294967296,Du=1/Ru,Ou="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Nu(t){return t.type===Cu.Bytes?t.readVarint()+t.pos:t.pos+1}function Mu(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Pu(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function Fu(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Lu(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ku(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Uu(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Bu(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function zu(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Gu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Hu(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Vu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function ju(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Wu(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Yu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function qu(t,e,n){e.glyphs=[],1===t&&n.readMessage(Xu,e)}function Xu(t,e,n){if(3===t){const{id:t,bitmap:i,width:r,height:s,left:o,top:a,advance:l}=n.readMessage(Zu,{});e.glyphs.push({id:t,bitmap:new gh({width:r+6,height:s+6},i),metrics:{width:r,height:s,left:o,top:a,advance:l}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function Zu(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Ku(t){let e=0,n=0;for(const o of t)e+=o.w*o.h,n=Math.max(n,o.w);t.sort(((t,e)=>e.h-t.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let r=0,s=0;for(const o of t)for(let t=i.length-1;t>=0;t--){const e=i[t];if(!(o.w>e.w||o.h>e.h)){if(o.x=e.x,o.y=e.y,s=Math.max(s,o.y+o.h),r=Math.max(r,o.x+o.w),o.w===e.w&&o.h===e.h){const e=i.pop();t<i.length&&(i[t]=e)}else o.h===e.h?(e.x+=o.w,e.w-=o.w):o.w===e.w?(e.y+=o.h,e.h-=o.h):(i.push({x:e.x+o.w,y:e.y,w:e.w-o.w,h:o.h}),e.y+=o.h,e.h-=o.h);break}}return{w:r,h:s,fill:e/(r*s)||0}}Cu.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,s=this.pos;this.type=7&i,t(r,e,this),this.pos===s&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=ju(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Yu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=ju(this.buf,this.pos)+ju(this.buf,this.pos+4)*Ru;return this.pos+=8,t},readSFixed64:function(){var t=ju(this.buf,this.pos)+Yu(this.buf,this.pos+4)*Ru;return this.pos+=8,t},readFloat:function(){var t=Su(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Su(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,s=n.buf;if(i=(112&(r=s[n.pos++]))>>4,r<128)return Mu(t,i,e);if(i|=(127&(r=s[n.pos++]))<<3,r<128)return Mu(t,i,e);if(i|=(127&(r=s[n.pos++]))<<10,r<128)return Mu(t,i,e);if(i|=(127&(r=s[n.pos++]))<<17,r<128)return Mu(t,i,e);if(i|=(127&(r=s[n.pos++]))<<24,r<128)return Mu(t,i,e);if(i|=(1&(r=s[n.pos++]))<<31,r<128)return Mu(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ou?function(t,e,n){return Ou.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var s,o,a,l=t[r],h=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>n)break;1===c?l<128&&(h=l):2===c?128==(192&(s=t[r+1]))&&(h=(31&l)<<6|63&s)<=127&&(h=null):3===c?(o=t[r+2],128==(192&(s=t[r+1]))&&128==(192&o)&&((h=(15&l)<<12|(63&s)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===c&&(o=t[r+2],a=t[r+3],128==(192&(s=t[r+1]))&&128==(192&o)&&128==(192&a)&&((h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,c=1):h>65535&&(h-=65536,i+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),i+=String.fromCharCode(h),r+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Cu.Bytes)return t.push(this.readVarint(e));var n=Nu(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Cu.Bytes)return t.push(this.readSVarint());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Cu.Bytes)return t.push(this.readBoolean());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Cu.Bytes)return t.push(this.readFloat());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Cu.Bytes)return t.push(this.readDouble());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Cu.Bytes)return t.push(this.readFixed32());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Cu.Bytes)return t.push(this.readSFixed32());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Cu.Bytes)return t.push(this.readFixed64());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Cu.Bytes)return t.push(this.readSFixed64());var e=Nu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Cu.Varint)for(;this.buf[this.pos++]>127;);else if(e===Cu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Cu.Fixed32)this.pos+=4;else{if(e!==Cu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Wu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Wu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Wu(this.buf,-1&t,this.pos),Wu(this.buf,Math.floor(t*Du),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Wu(this.buf,-1&t,this.pos),Wu(this.buf,Math.floor(t*Du),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,s=0;s<e.length;s++){if((i=e.charCodeAt(s))>55295&&i<57344){if(!r){i>56319||s+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Pu(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Au(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Au(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Pu(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Cu.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Fu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Lu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Bu,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ku,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Uu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,zu,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Gu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Hu,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Vu,e)},writeBytesField:function(t,e){this.writeTag(t,Cu.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Cu.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Cu.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Cu.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Cu.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Cu.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Cu.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Cu.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Cu.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Cu.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Qu{constructor(t,e){let{pixelRatio:n,version:i,stretchX:r,stretchY:s,content:o}=e;this.paddedRect=t,this.pixelRatio=n,this.stretchX=r,this.stretchY=s,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ju{constructor(t,e){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,n,r),this.addImages(e,i,r);const{w:s,h:o}=Ku(r),a=new yh({width:s||1,height:o||1});for(const l in t){const e=t[l],i=n[l].paddedRect;yh.copy(e.data,a,{x:0,y:0},{x:i.x+1,y:i.y+1},e.data)}for(const l in e){const t=e[l],n=i[l].paddedRect,r=n.x+1,s=n.y+1,o=t.data.width,h=t.data.height;yh.copy(t.data,a,{x:0,y:0},{x:r,y:s},t.data),yh.copy(t.data,a,{x:0,y:h-1},{x:r,y:s-1},{width:o,height:1}),yh.copy(t.data,a,{x:0,y:0},{x:r,y:s+h},{width:o,height:1}),yh.copy(t.data,a,{x:o-1,y:0},{x:r-1,y:s},{width:1,height:h}),yh.copy(t.data,a,{x:0,y:0},{x:r+o,y:s},{width:1,height:h})}this.image=a,this.iconPositions=n,this.patternPositions=i}addImages(t,e,n){for(const i in t){const r=t[i],s={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(s),e[i]=new Qu(s,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[i,r]=t.tl;n.update(e.data,void 0,{x:i,y:r})}}Hr(Qu,"ImagePosition"),Hr(Ju,"ImageAtlas");const $u={horizontal:1,vertical:2,horizontalOnly:3};class tp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new tp;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new tp;return e.imageName=t,e}}class ep{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new ep;for(let i=0;i<t.sections.length;i++){const r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i+1)||null,s=t.charCodeAt(i-1)||null;n+=!e&&(r&&bs(r)&&!xu[t[i+1]]||s&&bs(s)&&!xu[t[i-1]])||!xu[t[i]]?t[i]:xu[t[i]]}return n}(this.text,t)}trim(){let t=0;for(let n=0;n<this.text.length&&ip[this.text.charCodeAt(n)];n++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&ip[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new ep;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(tp.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let i=0;i<t.text.length;++i)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void G("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(tp.forImage(e)),this.sectionIndex.push(this.sections.length-1)):G("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function np(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){const m=ep.fromFeature(t,r);u===$u.vertical&&m.verticalizePunctuation(p);let g=[];const y=function(t,e,n,i,r,s){if(!t)return[];const o=[],a=function(t,e,n,i,r,s){let o=0;for(let a=0;a<t.length();a++){const n=t.getSection(a);o+=sp(t.getCharCode(a),n,i,r,e,s)}return o/Math.max(1,Math.ceil(o/n))}(t,e,n,i,r,s),l=t.text.indexOf("\u200b")>=0;let h=0;for(let u=0;u<t.length();u++){const n=t.getSection(u),p=t.getCharCode(u);if(ip[p]||(h+=sp(p,n,i,r,e,s)),u<t.length()-1){const e=!((c=p)<11904||!(is(c)||ns(c)||gs(c)||ds(c)||as(c)||Kr(c)||rs(c)||$r(c)||ls(c)||hs(c)||os(c)||vs(c)||ts(c)||Jr(c)||Qr(c)||ss(c)||es(c)||ms(c)||us(c)||cs(c)));(rp[p]||e||n.imageName)&&o.push(lp(u+1,h,a,o,ap(p,t.getCharCode(u+1),e&&l),!1))}}var c;return hp(lp(t.length(),h,a,o,0,!0))}(m,h,s,e,i,d),{processBidirectionalText:_,processStyledBidirectionalText:v}=Bs;if(_&&1===m.sections.length){const t=_(m.toString(),y);for(const e of t){const t=new ep;t.text=e,t.sections=m.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);g.push(t)}}else if(v){const t=v(m.text,m.sectionIndex,y);for(const e of t){const t=new ep;t.text=e[0],t.sectionIndex=e[1],t.sections=m.sections,g.push(t)}}else g=function(t,e){const n=[],i=t.text;let r=0;for(const s of e)n.push(t.substring(r,s)),r=s;return r<i.length&&n.push(t.substring(r,i.length)),n}(m,y);const T=[],E={positionedLines:T,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:u,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,i,r,s,o,a,l,h,c,u){let p=0,d=0,f=0;const m="right"===a?1:"left"===a?0:.5;let g=!1;for(const x of r){const t=x.getSections();for(const n of t){if(n.imageName)continue;const t=e[n.fontStack];if(t&&(g=void 0!==t.ascender&&void 0!==t.descender,!g))break}if(!g)break}let y=0;for(const x of r){x.trim();const r=x.getMaxScale(),o=(r-1)*mu,a={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=a;const v=a.positionedGlyphs;let T=0;if(!x.length()){d+=s,++y;continue}let E=0,I=0;for(let s=0;s<x.length();s++){const o=x.getSection(s),a=x.getSectionIndex(s),f=x.getCharCode(s);let m=o.scale,y=null,b=null,w=null,S=mu,A=0;const C=!(l===$u.horizontal||!c&&!Is(f)||c&&(ip[f]||(_=f,qr(_)||Xr(_)||Zr(_)||fs(_)||_s(_))));if(o.imageName){const e=i[o.imageName];if(!e)continue;w=o.imageName,t.iconsInText=t.iconsInText||!0,b=e.paddedRect;const n=e.displaySize;m=m*mu/u,y={width:n[0],height:n[1],left:1,top:-3,advance:C?n[1]:n[0],localGlyph:!1},A=g?-y.height*m:r*mu-17-n[1]*m,S=y.advance;const s=(C?n[0]:n[1])*m-mu*r;s>0&&s>T&&(T=s)}else{const t=n[o.fontStack];if(!t)continue;t[f]&&(b=t[f]);const i=e[o.fontStack];if(!i)continue;const s=i.glyphs[f];if(!s)continue;if(y=s.metrics,S=8203!==f?mu:0,g){const t=void 0!==i.ascender?Math.abs(i.ascender):0,e=void 0!==i.descender?Math.abs(i.descender):0,n=(t+e)*m;E<n&&(E=n,I=(t-e)/2*m),A=-t*m}else A=(r-m)*mu-17}C?(t.verticalizable=!0,v.push({glyph:f,imageName:w,x:p,y:d+A,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:o.fontStack,sectionIndex:a,metrics:y,rect:b}),p+=S*m+h):(v.push({glyph:f,imageName:w,x:p,y:d+A,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:o.fontStack,sectionIndex:a,metrics:y,rect:b}),p+=y.advance*m+h)}0!==v.length&&(f=Math.max(p-h,f),g?up(v,m,T,I,s*r/2):up(v,m,T,0,s/2)),p=0;const b=s*r+T;a.lineOffset=Math.max(T,o),d+=b,++y}var _;const v=d,{horizontalAlign:T,verticalAlign:E}=cp(o);(function(t,e,n,i,r,s){const o=(e-n)*r,a=-s*i;for(const l of t)for(const t of l.positionedGlyphs)t.x+=o,t.y+=a})(t.positionedLines,m,T,E,f,v),t.top+=-E*v,t.bottom=t.top+v,t.left+=-T*f,t.right=t.left+f,t.hasBaseline=g}(E,e,n,i,g,o,a,l,u,h,p,f),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(T)&&E}const ip={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rp={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function sp(t,e,n,i,r,s){if(e.imageName){const t=i[e.imageName];return t?t.displaySize[0]*e.scale*mu/s+r:0}{const i=n[e.fontStack],s=i&&i.glyphs[t];return s?s.metrics.advance*e.scale+r:0}}function op(t,e,n,i){const r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function ap(t,e,n){let i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function lp(t,e,n,i,r,s){let o=null,a=op(e,n,r,s);for(const l of i){const t=op(e-l.x,n,r,s)+l.badness;t<=a&&(o=l,a=t)}return{index:t,x:e,priorBreak:o,badness:a}}function hp(t){return t?hp(t.priorBreak).concat(t.index):[]}function cp(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function up(t,e,n,i,r){if(!(e||n||i||r))return;const s=t.length-1,o=t[s],a=(o.x+o.metrics.advance*o.scale)*e;for(let l=0;l<=s;l++)t[l].x-=a,t[l].y+=n+i+r}function pp(t,e,n){const{horizontalAlign:i,verticalAlign:r}=cp(n),s=e[0]-t.displaySize[0]*i,o=e[1]-t.displaySize[1]*r;return{image:t,top:o,bottom:o+t.displaySize[1],left:s,right:s+t.displaySize[0]}}function dp(t,e,n,i,r,s){const o=t.image;let a;if(o.content){const t=o.content,e=o.pixelRatio||1;a=[t[0]/e,t[1]/e,o.displaySize[0]-t[2]/e,o.displaySize[1]-t[3]/e]}const l=e.left*s,h=e.right*s;let c,u,p,d;"width"===n||"both"===n?(d=r[0]+l-i[3],u=r[0]+h+i[1]):(d=r[0]+(l+h-o.displaySize[0])/2,u=d+o.displaySize[0]);const f=e.top*s,m=e.bottom*s;return"height"===n||"both"===n?(c=r[1]+f-i[0],p=r[1]+m+i[2]):(c=r[1]+(f+m-o.displaySize[1])/2,p=c+o.displaySize[1]),{image:o,top:c,right:u,bottom:p,left:d,collisionPadding:a}}class fp extends f{constructor(t,e,n,i,r){super(t,e),this.angle=i,this.z=n,void 0!==r&&(this.segment=r)}clone(){return new fp(this.x,this.y,this.z,this.angle,this.segment)}}function mp(t,e,n,i,r){if(void 0===e.segment)return!0;let s=e,o=e.segment+1,a=0;for(;a>-n/2;){if(o--,o<0)return!1;a-=t[o].dist(s),s=t[o]}a+=t[o].dist(t[o+1]),o++;const l=[];let h=0;for(;a<n/2;){const e=t[o],n=t[o+1];if(!n)return!1;let s=t[o-1].angleTo(e)-e.angleTo(n);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:s}),h+=s;a-l[0].distance>i;)h-=l.shift().angleDelta;if(h>r)return!1;o++,a+=e.dist(n)}return!0}function gp(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function yp(t,e,n){return t?.6*e*n:0}function _p(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function vp(t,e,n,i,r,s){const o=yp(n,r,s),a=_p(n,i)*s;let l=0;const h=gp(t)/2;for(let c=0;c<t.length-1;c++){const n=t[c],i=t[c+1],r=n.dist(i);if(l+r>h){const s=(h-l)/r,u=Cn(n.x,i.x,s),p=Cn(n.y,i.y,s),d=new fp(u,p,0,i.angleTo(n),c);return!o||mp(t,d,a,o,e)?d:void 0}l+=r}}function Tp(t,e,n,i,r,s,o,a,l){const h=yp(i,s,o),c=_p(i,r),u=c*o,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-u<e/4&&(e=u+e/4),Ep(t,p?e/2*a%e:(c/2+2*s)*o*a%e,e,h,n,u,p,!1,l)}function Ep(t,e,n,i,r,s,o,a,l){const h=s/2,c=gp(t);let u=0,p=e-n,d=[];for(let f=0;f<t.length-1;f++){const e=t[f],o=t[f+1],a=e.dist(o),m=o.angleTo(e);for(;p+n<u+a;){p+=n;const g=(p-u)/a,y=Cn(e.x,o.x,g),_=Cn(e.y,o.y,g);if(y>=0&&y<l&&_>=0&&_<l&&p-h>=0&&p+h<=c){const e=new fp(y,_,0,m,f);e._round(),i&&!mp(t,e,s,i,r)||d.push(e)}}u+=a}return a||d.length||o||(d=Ep(t,u/2,n,i,r,s,o,!0,l)),d}function xp(t,e,n,i,r){const s=[];for(let o=0;o<t.length;o++){const a=t[o];let l;for(let t=0;t<a.length-1;t++){let o=a[t],h=a[t+1];o.x<e&&h.x<e||(o.x<e?o=new f(e,o.y+(e-o.x)/(h.x-o.x)*(h.y-o.y))._round():h.x<e&&(h=new f(e,o.y+(e-o.x)/(h.x-o.x)*(h.y-o.y))._round()),o.y<n&&h.y<n||(o.y<n?o=new f(o.x+(n-o.y)/(h.y-o.y)*(h.x-o.x),n)._round():h.y<n&&(h=new f(o.x+(n-o.y)/(h.y-o.y)*(h.x-o.x),n)._round()),o.x>=i&&h.x>=i||(o.x>=i?o=new f(i,o.y+(i-o.x)/(h.x-o.x)*(h.y-o.y))._round():h.x>=i&&(h=new f(i,o.y+(i-o.x)/(h.x-o.x)*(h.y-o.y))._round()),o.y>=r&&h.y>=r||(o.y>=r?o=new f(o.x+(r-o.y)/(h.y-o.y)*(h.x-o.x),r)._round():h.y>=r&&(h=new f(o.x+(r-o.y)/(h.y-o.y)*(h.x-o.x),r)._round()),l&&o.equals(l[l.length-1])||(l=[o],s.push(l)),l.push(h)))))}}return s}Hr(fp,"Anchor");const Ip=1e20;function bp(t,e,n,i,r,s,o,a,l){for(let h=e;h<e+i;h++)wp(t,n*s+h,s,r,o,a,l);for(let h=n;h<n+r;h++)wp(t,h*s+e,1,i,o,a,l)}function wp(t,e,n,i,r,s,o){s[0]=0,o[0]=-Ip,o[1]=Ip,r[0]=t[e];for(let a=1,l=0,h=0;a<i;a++){r[a]=t[e+a*n];const i=a*a;do{const t=s[l];h=(r[a]-r[t]+i-t*t)/(a-t)/2}while(h<=o[l]&&--l>-1);l++,s[l]=a,o[l]=h,o[l+1]=Ip}for(let a=0,l=0;a<i;a++){for(;o[l+1]<a;)l++;const i=s[l],h=a-i;t[e+a*n]=r[i]+h*h}}const Sp={none:0,ideographs:1,all:2};class Ap{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const i in t)for(const e of t[i])n.push({stack:i,id:e});A(n,((t,e)=>{let{stack:n,id:i}=t,r=this.entries[n];r||(r=this.entries[n]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let s=r.glyphs[i];if(void 0!==s)return void e(null,{stack:n,id:i,glyph:s});if(s=this._tinySDF(r,n,i),s)return r.glyphs[i]=s,void e(null,{stack:n,id:i,glyph:s});const o=Math.floor(i/256);if(256*o>65535)return void e(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void e(null,{stack:n,id:i,glyph:s});let a=r.requests[o];a||(a=r.requests[o]=[],Ap.loadGlyphRange(n,o,this.url,this.requestManager,((t,e)=>{if(e){r.ascender=e.ascender,r.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e.glyphs[+t]);r.ranges[o]=!0}for(const n of a)n(t,e);delete r.requests[o]}))),a.push(((t,r)=>{t?e(t):r&&e(null,{stack:n,id:i,glyph:r.glyphs[i]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:i,glyph:r}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[i]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Sp.none&&(this.localGlyphMode===Sp.all?!!this.localFontFamily:!!this.localFontFamily&&(hs(t)||ps(t)||ts(t)||es(t)||$r(t)))}_tinySDF(t,e,n){const i=this.localFontFamily;if(!i||!this._doesCharSupportLocalGlyph(n))return;let r=t.tinySDF;if(!r){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),r=t.tinySDF=new Ap.TinySDF({fontFamily:i,fontWeight:n,fontSize:48,buffer:6,radius:16}),r.fontWeight=n}if(this.localGlyphs[r.fontWeight][n])return this.localGlyphs[r.fontWeight][n];const s=String.fromCharCode(n),{data:o,width:a,height:l,glyphWidth:h,glyphHeight:c,glyphLeft:u,glyphTop:p,glyphAdvance:d}=r.draw(s);return this.localGlyphs[r.fontWeight][n]={id:n,bitmap:new gh({width:a,height:l},o),metrics:{width:h/2,height:c/2,left:u/2,top:p/2-27,advance:d/2,localGlyph:!0}}}}function Cp(t,e,n,i){const r=[],s=t.image,o=s.pixelRatio,a=s.paddedRect.w-2,l=s.paddedRect.h-2,h=t.right-t.left,c=t.bottom-t.top,u=s.stretchX||[[0,a]],p=s.stretchY||[[0,l]],d=(t,e)=>t+e[1]-e[0],m=u.reduce(d,0),g=p.reduce(d,0),y=a-m,_=l-g;let v=0,T=m,E=0,x=g,I=0,b=y,w=0,S=_;if(s.content&&i){const t=s.content;v=Rp(u,0,t[0]),E=Rp(p,0,t[1]),T=Rp(u,t[0],t[2]),x=Rp(p,t[1],t[3]),I=t[0]-v,w=t[1]-E,b=t[2]-t[0]-T,S=t[3]-t[1]-x}const A=(i,r,a,l)=>{const u=Op(i.stretch-v,T,h,t.left),p=Np(i.fixed-I,b,i.stretch,m),d=Op(r.stretch-E,x,c,t.top),y=Np(r.fixed-w,S,r.stretch,g),_=Op(a.stretch-v,T,h,t.left),A=Np(a.fixed-I,b,a.stretch,m),C=Op(l.stretch-E,x,c,t.top),R=Np(l.fixed-w,S,l.stretch,g),D=new f(u,d),O=new f(_,d),N=new f(_,C),M=new f(u,C),P=new f(p/o,y/o),F=new f(A/o,R/o),L=e*Math.PI/180;if(L){const t=Math.sin(L),e=Math.cos(L),n=[e,-t,t,e];D._matMult(n),O._matMult(n),M._matMult(n),N._matMult(n)}const k=i.stretch+i.fixed,U=r.stretch+r.fixed;return{tl:D,tr:O,bl:M,br:N,tex:{x:s.paddedRect.x+1+k,y:s.paddedRect.y+1+U,w:a.stretch+a.fixed-k,h:l.stretch+l.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:P,pixelOffsetBR:F,minFontScaleX:b/o/h,minFontScaleY:S/o/c,isSDF:n}};if(i&&(s.stretchX||s.stretchY)){const t=Dp(u,y,m),e=Dp(p,_,g);for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1];for(let t=0;t<e.length-1;t++)r.push(A(i,e[t],s,e[t+1]))}}else r.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:l+1}));return r}function Rp(t,e,n){let i=0;for(const r of t)i+=Math.max(e,Math.min(n,r[1]))-Math.max(e,Math.min(n,r[0]));return i}function Dp(t,e,n){const i=[{fixed:-1,stretch:0}];for(const[r,s]of t){const t=i[i.length-1];i.push({fixed:r-t.stretch,stretch:t.stretch}),i.push({fixed:r-t.stretch,stretch:t.stretch+(s-r)})}return i.push({fixed:e+1,stretch:n}),i}function Op(t,e,n,i){return t/e*n+i}function Np(t,e,n,i){return t-e*n/i}function Mp(t,e,n,i){const r=e+t.positionedLines[i].lineOffset;return 0===i?n+r/2:n+(r+(e+t.positionedLines[i-1].lineOffset))/2}Ap.loadGlyphRange=function(t,e,n,i,r){const s=256*e,o=s+255,a=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}","".concat(s,"-").concat(o)),st.Glyphs);ht(a,((t,e)=>{if(t)r(t);else if(e){const t={},n=function(t){return new wu(t).readFields(qu,{})}(e);for(const e of n.glyphs)t[e.id]=e;r(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}}))},Ap.TinySDF=class{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:s="normal",fontStyle:o="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=i,this.radius=n;const a=this.size=t+4*e,l=this._createCanvas(a),h=this.ctx=l.getContext("2d",{willReadFrequently:!0});h.font="".concat(o," ").concat(s," ").concat(t,"px ").concat(r),h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:s}=this.ctx.measureText(t),o=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-r))),l=Math.min(this.size-this.buffer,o+Math.ceil(i)),h=a+2*this.buffer,c=l+2*this.buffer,u=Math.max(h*c,0),p=new Uint8ClampedArray(u),d={data:p,width:h,height:c,glyphWidth:a,glyphHeight:l,glyphTop:o,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return d;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,a,l),f.fillText(t,m,m+o);const _=f.getImageData(m,m,a,l);y.fill(Ip,0,u),g.fill(0,0,u);for(let v=0;v<l;v++)for(let t=0;t<a;t++){const e=_.data[4*(v*a+t)+3]/255;if(0===e)continue;const n=(v+m)*h+t+m;if(1===e)y[n]=0,g[n]=Ip;else{const t=.5-e;y[n]=t>0?t*t:0,g[n]=t<0?t*t:0}}bp(y,0,0,h,c,h,this.f,this.v,this.z),bp(g,m,m,a,l,h,this.f,this.v,this.z);for(let v=0;v<u;v++){const t=Math.sqrt(y[v])-Math.sqrt(g[v]);p[v]=Math.round(255-255*(t/this.radius+this.cutoff))}return d}};class Pp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fp;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,s=e[r];if(n(i,s)>=0)break;e[t]=s,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),s=e[i];const o=i+1;if(o<this.length&&n(e[o],s)<0&&(i=o,s=e[o]),n(s,r)>=0)break;e[t]=s,t=i}e[t]=r}}function Fp(t,e){return t<e?-1:t>e?1:0}function Lp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1/0,r=1/0,s=-1/0,o=-1/0;const a=t[0];for(let d=0;d<a.length;d++){const t=a[d];(!d||t.x<i)&&(i=t.x),(!d||t.y<r)&&(r=t.y),(!d||t.x>s)&&(s=t.x),(!d||t.y>o)&&(o=t.y)}const l=Math.min(s-i,o-r);let h=l/2;const c=new Pp([],kp);if(0===l)return new f(i,r);for(let d=i;d<s;d+=l)for(let e=r;e<o;e+=l)c.push(new Up(d+h,e+h,h,t));let u=function(t){let e=0,n=0,i=0;const r=t[0];for(let s=0,o=r.length,a=o-1;s<o;a=s++){const t=r[s],o=r[a],l=t.x*o.y-o.x*t.y;n+=(t.x+o.x)*l,i+=(t.y+o.y)*l,e+=3*l}return new Up(n/e,i/e,0,t)}(t),p=c.length;for(;c.length;){const i=c.pop();(i.d>u.d||!u.d)&&(u=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-u.d<=e||(h=i.h/2,c.push(new Up(i.p.x-h,i.p.y-h,h,t)),c.push(new Up(i.p.x+h,i.p.y-h,h,t)),c.push(new Up(i.p.x-h,i.p.y+h,h,t)),c.push(new Up(i.p.x+h,i.p.y+h,h,t)),p+=4)}return n&&(console.log("num probes: ".concat(p)),console.log("best distance: ".concat(u.d))),u.p}function kp(t,e){return e.max-t.max}function Up(t,e,n,i){this.p=new f(t,e),this.h=n,this.d=function(t,e){let n=!1,i=1/0;for(let r=0;r<e.length;r++){const s=e[r];for(let e=0,r=s.length,o=r-1;e<r;o=e++){const r=s[e],a=s[o];r.y>t.y!=a.y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(n=!n),i=Math.min(i,rl(t,r,a))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}const Bp=Number.POSITIVE_INFINITY,zp=Math.sqrt(2);function Gp(t,e){let[n,i]=e,r=0,s=0;if(i===Bp){n<0&&(n=0);const e=n/zp;switch(t){case"top-right":case"top-left":s=e-7;break;case"bottom-right":case"bottom-left":s=7-e;break;case"bottom":s=7-n;break;case"top":s=n-7}switch(t){case"top-right":case"bottom-right":r=-e;break;case"top-left":case"bottom-left":r=e;break;case"left":r=n;break;case"right":r=-n}}else{switch(n=Math.abs(n),i=Math.abs(i),t){case"top-right":case"top-left":case"top":s=i-7;break;case"bottom-right":case"bottom-left":case"bottom":s=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-n;break;case"top-left":case"bottom-left":case"left":r=n}}return[r,s]}function Hp(t,e,n,i,r,s,o,a,l,h){t.createArrays(),t.tilePixelRatio=ba/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const c=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;p.compositeTextSizes=[u["text-size"].possiblyEvaluate(new zs(e),a),u["text-size"].possiblyEvaluate(new zs(n),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;p.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new zs(e),a),u["icon-size"].possiblyEvaluate(new zs(n),a)]}p.layoutTextSize=u["text-size"].possiblyEvaluate(new zs(l+1),a),p.layoutIconSize=u["icon-size"].possiblyEvaluate(new zs(l+1),a),p.textMaxSize=u["text-size"].possiblyEvaluate(new zs(18),a);const d="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),f=c.get("text-size");for(const m of t.features){const s=c.get("text-font").evaluate(m,{},a).join(","),l=f.evaluate(m,{},a),u=p.layoutTextSize.evaluate(m,{},a),g=(p.layoutIconSize.evaluate(m,{},a),{horizontal:{},vertical:void 0}),y=m.text;let _,v=[0,0];if(y){const i=y.toString(),o=c.get("text-letter-spacing").evaluate(m,{},a)*mu,h=c.get("text-line-height").evaluate(m,{},a)*mu,p=Es(i)?o:0,f=c.get("text-anchor").evaluate(m,{},a),_=c.get("text-variable-anchor");if(!_){const t=c.get("text-radial-offset").evaluate(m,{},a);v=t?Gp(f,[t*mu,Bp]):c.get("text-offset").evaluate(m,{},a).map((t=>t*mu))}let T=d?"center":c.get("text-justify").evaluate(m,{},a);const E="point"===c.get("symbol-placement"),x=E?c.get("text-max-width").evaluate(m,{},a)*mu:1/0,I=o=>{t.allowVerticalPlacement&&Ts(i)&&(g.vertical=np(y,e,n,r,s,x,h,f,o,p,v,$u.vertical,!0,u,l))};if(!d&&_){const t="auto"===T?_.map((t=>Vp(t))):[T];let i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(!g.horizontal[a])if(i)g.horizontal[a]=g.horizontal[0];else{const t=np(y,e,n,r,s,x,h,"center",a,p,v,$u.horizontal,!1,u,l);t&&(g.horizontal[a]=t,i=1===t.positionedLines.length)}}I("left")}else{if("auto"===T&&(T=Vp(f)),E||c.get("text-writing-mode").indexOf("horizontal")>=0||!Ts(i)){const t=np(y,e,n,r,s,x,h,f,T,p,v,$u.horizontal,!1,u,l);t&&(g.horizontal[T]=t)}I(E?"left":T)}}let T=!1;if(m.icon&&m.icon.name){const e=i[m.icon.name];e&&(_=pp(r[m.icon.name],c.get("icon-offset").evaluate(m,{},a),c.get("icon-anchor").evaluate(m,{},a)),T=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&G("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const E=qp(g.horizontal)||g.vertical;t.iconsInText||(t.iconsInText=!!E&&E.iconsInText),(E||_)&&jp(t,m,g,_,i,p,u,0,v,T,o,a,h)}s&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray)}function Vp(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jp(t,e,n,i,r,s,o,a,l,h,c,u,p){let d=s.textMaxSize.evaluate(e,{},u);void 0===d&&(d=o);const f=t.layers[0].layout,m=f.get("icon-offset").evaluate(e,{},u),g=qp(n.horizontal)||n.vertical,y="globe"===p.name,v=o/24,T=t.tilePixelRatio*d/24,E=(R=t.overscaling,t.zoom>18&&R>2&&(R>>=1),Math.max(ba/(512*R),1)*f.get("symbol-spacing")),x=f.get("text-padding")*t.tilePixelRatio,I=f.get("icon-padding")*t.tilePixelRatio,b=_(f.get("text-max-angle")),w="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),S="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),A=f.get("symbol-placement"),C=E/2;var R;const D=f.get("icon-text-fit");let O;i&&"none"!==D&&(t.allowVerticalPlacement&&n.vertical&&(O=dp(i,n.vertical,D,f.get("icon-text-fit-padding"),m,v)),g&&(i=dp(i,g,D,f.get("icon-text-fit-padding"),m,v)));const N=(o,a,d)=>{if(a.x<0||a.x>=ba||a.y<0||a.y>=ba)return;let f=null;if(y){const{x:t,y:e,z:n}=p.projectTilePoint(a.x,a.y,d);f={anchor:new fp(t,e,n,0,void 0),up:p.upVector(d,a.x,a.y)}}!function(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x,I,b){const w=t.addToLineVertexArray(e,i);let S,A,C,R,D,O,N,M=0,P=0,F=0,L=0,k=-1,U=-1;const B={};let z=jo.exports("");const H=n?n.anchor:e;let V=0,j=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[V,j]=l.layout.get("text-offset").evaluate(T,{},b).map((t=>t*mu)):(V=l.layout.get("text-radial-offset").evaluate(T,{},b)*mu,j=Bp),t.allowVerticalPlacement&&r.vertical){const t=r.vertical;if(f)O=Zp(t),a&&(N=Zp(a));else{const n=l.layout.get("text-rotate").evaluate(T,{},b)+90;C=Xp(h,H,e,c,u,p,t,d,n,m),a&&(R=Xp(h,H,e,c,u,p,a,y,n))}}if(s){const i=l.layout.get("icon-rotate").evaluate(T,{},b),r="none"!==l.layout.get("icon-text-fit"),o=Cp(s,i,x,r),d=a?Cp(a,i,x,r):void 0;A=Xp(h,H,e,c,u,p,s,y,i),M=4*o.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[gu*l.layout.get("icon-size").evaluate(T,{},b)],m[0]>Wp&&G("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[gu*E.compositeIconSizes[0].evaluate(T,{},b),gu*E.compositeIconSizes[1].evaluate(T,{},b)],(m[0]>Wp||m[1]>Wp)&&G("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))),t.addSymbols(t.icon,o,m,v,_,T,!1,n,e,w.lineStartIndex,w.lineLength,-1,I,b),k=t.icon.placedSymbolArray.length-1,d&&(P=4*d.length,t.addSymbols(t.icon,d,m,v,_,T,$u.vertical,n,e,w.lineStartIndex,w.lineLength,-1,I,b),U=t.icon.placedSymbolArray.length-1)}for(const G in r.horizontal){const i=r.horizontal[G];S||(z=jo.exports(i.text),f?D=Zp(i):S=Xp(h,H,e,c,u,p,i,d,l.layout.get("text-rotate").evaluate(T,{},b),m));const s=1===i.positionedLines.length;if(F+=Yp(t,n,e,i,o,l,f,T,m,w,r.vertical?$u.horizontal:$u.horizontalOnly,s?Object.keys(r.horizontal):[G],B,k,E,I,b),s)break}r.vertical&&(L+=Yp(t,n,e,r.vertical,o,l,f,T,m,w,$u.vertical,["vertical"],B,U,E,I,b));let W=-1;const Y=(t,e)=>t?Math.max(t,e):e;W=Y(D,W),W=Y(O,W),W=Y(N,W);const q=W>-1?1:0;t.glyphOffsetArray.length>=cf.MAX_GLYPHS&&G("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==T.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,T.sortKey),t.symbolInstances.emplaceBack(H.x,H.y,H.z,e.x,e.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,k,U,z,void 0!==S?S:t.collisionBoxArray.length,void 0!==S?S+1:t.collisionBoxArray.length,void 0!==C?C:t.collisionBoxArray.length,void 0!==C?C+1:t.collisionBoxArray.length,void 0!==A?A:t.collisionBoxArray.length,void 0!==A?A+1:t.collisionBoxArray.length,R||t.collisionBoxArray.length,R?R+1:t.collisionBoxArray.length,c,F,L,M,P,q,0,V,j,W)}(t,a,f,o,n,i,r,O,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,x,w,l,0,I,S,m,e,s,h,c,u)};if("line"===A)for(const _ of xp(e.geometry,0,0,ba,ba)){const e=Tp(_,E,b,n.vertical||g,i,24,T,t.overscaling,ba);for(const n of e)g&&Kp(t,g.text,C,n)||N(_,n,u)}else if("line-center"===A){for(const _ of e.geometry)if(_.length>1){const t=vp(_,b,n.vertical||g,i,24,T);t&&N(_,t,u)}}else if("Polygon"===e.type)for(const _ of tc(e.geometry,0)){const t=Lp(_,16);N(_[0],new fp(t.x,t.y,0,0,void 0),u)}else if("LineString"===e.type)for(const _ of e.geometry)N(_,new fp(_[0].x,_[0].y,0,0,void 0),u);else if("Point"===e.type)for(const _ of e.geometry)for(const t of _)N([t],new fp(t.x,t.y,0,0,void 0),u)}const Wp=32640;function Yp(t,e,n,i,r,s,o,a,l,h,c,u,p,d,m,g,y){const _=function(t,e,n,i,r,s,o,a){const l=[];if(0===e.positionedLines.length)return l;const h=i.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,c=function(t){const e=t[0],n=t[1],i=e*n;return i>0?[e,-n]:i<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let u=Math.abs(e.top-e.bottom);for(const f of e.positionedLines)u-=f.lineOffset;const p=e.positionedLines.length,d=u/p;let m=e.top-n[1];for(let g=0;g<p;++g){const t=e.positionedLines[g];m=Mp(e,d,m,g);for(const i of t.positionedGlyphs){if(!i.rect)continue;const t=i.rect||{};let s=4,u=!0,p=1,d=0;if(i.imageName){const t=o[i.imageName];if(!t)continue;if(t.sdf){G("SDF images are not supported in formatted text and will be ignored.");continue}u=!1,p=t.pixelRatio,s=1/p}const g=(r||a)&&i.vertical,y=i.metrics.advance*i.scale/2,_=i.metrics,v=i.rect;if(null===v)continue;a&&e.verticalizable&&(d=i.imageName?y-i.metrics.width*i.scale/2:0);const T=r?[i.x+y,i.y]:[0,0];let E=[0,0],x=[0,0],I=!1;r||(g?(x=[i.x+y+c[0],i.y+c[1]-d],I=!0):E=[i.x+y+n[0],i.y+n[1]-d]);const b=v.w*i.scale/(p*(i.localGlyph?2:1)),w=v.h*i.scale/(p*(i.localGlyph?2:1));let S,A,C,R;if(g){const t=i.y-m,e=new f(-y,y-t),n=-Math.PI/2,r=new f(...x);S=new f(-y+E[0],E[1]),S._rotateAround(n,e)._add(r),S.x+=-t+y,S.y-=(_.left-s)*i.scale;const o=i.imageName?_.advance*i.scale:mu*i.scale,a=String.fromCharCode(i.glyph);Iu(a)?S.x+=(1-s)*i.scale:bu(a)?S.x+=o-_.height*i.scale+(-s-1)*i.scale:S.x+=i.imageName||_.width+2*s===v.w&&_.height+2*s===v.h?(o-w)/2:(o-(_.height+2*s)*i.scale)/2,A=new f(S.x,S.y-b),C=new f(S.x+w,S.y),R=new f(S.x+w,S.y-b)}else{const t=(_.left-s)*i.scale-y+E[0],e=(-_.top-s)*i.scale+E[1],n=t+b,r=e+w;S=new f(t,e),A=new f(n,e),C=new f(t,r),R=new f(n,r)}if(h){let t;t=r?new f(0,0):I?new f(c[0],c[1]):new f(n[0],n[1]),S._rotateAround(h,t),A._rotateAround(h,t),C._rotateAround(h,t),R._rotateAround(h,t)}const D=new f(0,0),O=new f(0,0);l.push({tl:S,tr:A,bl:C,br:R,tex:t,writingMode:e.writingMode,glyphOffset:T,sectionIndex:i.sectionIndex,isSDF:u,pixelOffsetTL:D,pixelOffsetBR:O,minFontScaleX:0,minFontScaleY:0})}}return l}(0,i,l,s,o,a,r,t.allowVerticalPlacement),v=t.textSizeData;let T=null;"source"===v.kind?(T=[gu*s.layout.get("text-size").evaluate(a,{},y)],T[0]>Wp&&G("".concat(t.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))):"composite"===v.kind&&(T=[gu*m.compositeTextSizes[0].evaluate(a,{},y),gu*m.compositeTextSizes[1].evaluate(a,{},y)],(T[0]>Wp||T[1]>Wp)&&G("".concat(t.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))),t.addSymbols(t.text,_,T,l,o,a,c,e,n,h.lineStartIndex,h.lineLength,d,g,y);for(const f of u)p[f]=t.text.placedSymbolArray.length-1;return 4*_.length}function qp(t){for(const e in t)return t[e];return null}function Xp(t,e,n,i,r,s,o,a,l,h){let c=o.top,u=o.bottom,p=o.left,d=o.right;const m=o.collisionPadding;if(m&&(p-=m[0],c-=m[1],d+=m[2],u+=m[3]),l){const t=new f(p,c),e=new f(d,c),n=new f(p,u),i=new f(d,u),r=_(l);let s=new f(0,0);h&&(s=new f(h[0],h[1])),t._rotateAround(r,s),e._rotateAround(r,s),n._rotateAround(r,s),i._rotateAround(r,s),p=Math.min(t.x,e.x,n.x,i.x),d=Math.max(t.x,e.x,n.x,i.x),c=Math.min(t.y,e.y,n.y,i.y),u=Math.max(t.y,e.y,n.y,i.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,p,c,d,u,a,i,r,s),t.length-1}function Zp(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Kp(t,e,n,i){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(i.dist(t[e])<n)return!0}else r[e]=[];return r[e].push(i),!1}const Qp=io([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Jp}=Qp,$p=io([{name:"a_pos_3",components:3,type:"Int16"}]);var td=io([{name:"a_pos",type:"Int16",components:2}]);const ed=ba/Math.PI/2,nd=2*Na(1,0)*ed*Math.PI,id=64,rd=[id,32,16],sd=-ed,od=ed,ad=[new oh([sd,sd,sd],[od,od,od]),new oh([sd,sd,sd],[0,0,od]),new oh([0,sd,sd],[od,0,od]),new oh([sd,0,sd],[0,od,od]),new oh([0,0,sd],[od,od,od])];function ld(t,e,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=Ul([],t._camera.position,t.worldSize),s=[e,n,1,1];Ql(s,s,t.pixelMatrixInverse),Zl(s,s,1/s[3]);const o=zl([],Yl([],s,r)),a=t.globeMatrix,l=[a[12],a[13],a[14]],h=Yl([],l,r),c=Ol(h),u=zl([],h),p=t.worldSize/(2*Math.PI),d=Gl(u,o),f=Math.asin(p/c);if(f<Math.acos(d)){if(!i)return null;const t=[],e=[];Ul(t,o,c/d),zl(e,Yl(e,t,h)),zl(o,Ml(o,h,Ul(o,e,Math.tan(f)*c)))}const m=[];new ih(r,o).closestPointOnSphere(l,p,m);const g=zl([],Z(a,0)),y=zl([],Z(a,1)),_=zl([],Z(a,2)),T=Gl(g,m),E=Gl(y,m),x=Gl(_,m),I=v(Math.asin(-E/p));let w=v(Math.atan2(T,x));w=t.center.lng+function(t,e){const n=(e-t+180)%360-180;return n<-180?n+360:n}(t.center.lng,w);const S=Da(w),A=b(Oa(I),0,1);return new Ua(S,A)}class hd{constructor(t,e,n){this.a=Yl([],t,n),this.b=Yl([],e,n),this.center=n;const i=zl([],this.a),r=zl([],this.b);this.angle=Math.acos(Gl(i,r))}}function cd(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(t,e,n,i){const r=Math.sin(n);return t*(Math.sin((1-i)*n)/r)+e*(Math.sin(i*n)/r)}(t.a[e],t.b[e],t.angle,b(n,0,1))+t.center[e]}function ud(t){if(t.z<=1)return ad[t.z+2*t.y+t.x];const e=yd(gd(t));return oh.fromPoints(e)}function pd(t,e,n){return Ul(t,t,1-n),Bl(t,t,e,n)}function dd(t,e){const n=Sd(e.zoom);if(0===n)return ud(t);const i=gd(t),r=yd(i),s=Da(i.getWest())*e.worldSize,o=Da(i.getEast())*e.worldSize,a=Oa(i.getNorth())*e.worldSize,l=Oa(i.getSouth())*e.worldSize,h=[s,a,0],c=[o,a,0],u=[s,l,0],p=[o,l,0],d=Tl([],e.globeMatrix);return Vl(h,h,d),Vl(c,c,d),Vl(u,u,d),Vl(p,p,d),r[0]=pd(r[0],u,n),r[1]=pd(r[1],p,n),r[2]=pd(r[2],c,n),r[3]=pd(r[3],h,n),oh.fromPoints(r)}function fd(t,e,n){for(const i of t)Vl(i,i,e),Ul(i,i,n)}function md(t,e,n){const i=e/t.worldSize,r=t.globeMatrix;if(n.z<=1){const t=ud(n).getCorners();return fd(t,r,i),oh.fromPoints(t)}const s=gd(n),o=yd(s);fd(o,r,i);const a=Number.MAX_VALUE,l=[-a,-a,-a],h=[a,a,a];if(s.contains(t.center)){for(const t of o)Ll(h,h,t),kl(l,l,t);l[2]=0;const e=t.point,n=[e.x*i,e.y*i,0];return Ll(h,h,n),kl(l,l,n),new oh(h,l)}const c=[r[12]*i,r[13]*i,r[14]*i],u=s.getCenter(),p=b(t.center.lat,-85.051129,La),d=b(u.lat,-85.051129,La),f=Da(t.center.lng),m=Oa(p);let g=f-Da(u.lng);const y=m-Oa(d);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,Bl(c,c,[r[4]*i,r[5]*i,r[6]*i],-Math.sin(_(y>=0?s.getSouth():s.getNorth()))*ed));const T=o[v],E=o[(v+1)%4],x=new hd(T,E,c),I=[cd(x,0)||T[0],cd(x,1)||T[1],cd(x,2)||T[2]],w=Sd(t.zoom);if(w>0){const i=function(t,e,n,i,r){let{x:s,y:o,z:a}=t;const l=1/(1<<a);let h=s*l,c=h+l,u=o*l,p=u+l,d=0;const f=(h+c)/2-i;return f>.5?d=-1:f<-.5&&(d=1),h=((h+d)*e-(i*=e))*n+i,c=((c+d)*e-i)*n+i,u=(u*e-(r*=e))*n+r,p=(p*e-r)*n+r,[[h,p,0],[c,p,0],[c,u,0],[h,u,0]]}(n,e,t._pixelsPerMercatorPixel,f,m);for(let t=0;t<o.length;t++)pd(o[t],i[t],w);const r=Ml([],i[v],i[(v+1)%4]);Ul(r,r,.5),pd(I,r,w)}for(const _ of o)Ll(h,h,_),kl(l,l,_);return h[2]=Math.min(T[2],E[2]),Ll(h,h,I),kl(l,l,I),new oh(h,l)}function gd(t){let{x:e,y:n,z:i}=t;const r=1/(1<<i),s=new Aa(Ma(e*r),Pa((n+1)*r)),o=new Aa(Ma((e+1)*r),Pa(n*r));return new wa(s,o)}function yd(t){const e=_(t.getNorth()),n=_(t.getSouth()),i=Math.cos(e),r=Math.cos(n),s=Math.sin(e),o=Math.sin(n),a=t.getWest(),l=t.getEast();return[_d(r,o,a),_d(r,o,l),_d(i,s,l),_d(i,s,a)]}function _d(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ed;return n=_(n),[t*Math.sin(n)*i,-e*i,t*Math.cos(n)*i]}function vd(t,e,n){return _d(Math.cos(_(t)),Math.sin(_(t)),e,n)}function Td(t,e,n,i){const r=1<<n.z,s=(t/ba+n.x)/r;return vd(Pa((e/ba+n.y)/r),Ma(s),i)}function Ed(t){let{min:e,max:n}=t;return 16383/Math.max(n[0]-e[0],n[1]-e[1],n[2]-e[2])}const xd=new Float64Array(16);function Id(t){const e=Ed(t),n=Sl(xd,[e,e,e]);return xl(n,n,((i=[])[0]=-(r=t.min)[0],i[1]=-r[1],i[2]=-r[2],i));var i,r}function bd(t){const e=(i=t.min,(n=xd)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n);var n,i;const r=1/Ed(t);return Il(e,e,[r,r,r])}function wd(t,e,n,i,r){const s=function(t){const e=ba/(2*Math.PI);return t/(2*Math.PI)/e}(n),o=[t,e,-n/(2*Math.PI)],a=vl(new Float64Array(16));return xl(a,a,o),Il(a,a,[s,s,s]),bl(a,a,_(-r)),wl(a,a,_(-i)),a}function Sd(t){return w(5,6,t)}function Ad(t,e){const n=vd(e.lat,e.lng),i=function(t){const e=vd(t._center.lat,t._center.lng);let n=Hl([],Nl(0,1,0),e);const i=Al([],-t.angle,e);n=Vl(n,n,i),Al(i,-t._pitch,n);const r=zl([],e);return Ul(r,r,t.cameraToCenterDistance/t.pixelsPerMeter*nd),Vl(r,r,i),Ml([],e,r)}(t);return o=(r=Pl([],i,n))[0],a=r[1],l=r[2],h=(s=n)[0],c=s[1],u=s[2],d=(p=Math.sqrt(o*o+a*a+l*l)*Math.sqrt(h*h+c*c+u*u))&&Gl(r,s)/p,Math.acos(Math.min(Math.max(d,-1),1));var r,s,o,a,l,h,c,u,p,d}function Cd(t,e){return Ad(t,e)>Math.PI/2*1.01}const Rd=_(85),Dd=Math.cos(Rd),Od=Math.sin(Rd);function Nd(t,e){const n=t.fovAboveCenter,i=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,r=(t._camera.position[2]*t.worldSize-i)/Math.cos(t._pitch),s=Math.sin(n)*r/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),o=Math.sin(t._pitch)*s+r;return Math.min(1.01*o,r*(1/t._horizonShift))}function Md(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),i=t.x*n,r=(t.x+1)*n,s=t.y*n,o=(t.y+1)*n,a=Ma(i),l=Ma(r),h=Pa(s),c=Pa(o),u=e.project(a,h),p=e.project(l,h),d=e.project(l,c),f=e.project(a,c);let m=Math.min(u.x,p.x,d.x,f.x),g=Math.min(u.y,p.y,d.y,f.y),y=Math.max(u.x,p.x,d.x,f.x),_=Math.max(u.y,p.y,d.y,f.y);const v=n/16;function T(t,n,i,r,s,o){const a=(i+s)/2,l=(r+o)/2,h=e.project(Ma(a),Pa(l)),c=Math.max(0,m-h.x,g-h.y,h.x-y,h.y-_);m=Math.min(m,h.x),y=Math.max(y,h.x),g=Math.min(g,h.y),_=Math.max(_,h.y),c>v&&(T(t,h,i,r,a,l),T(h,n,a,l,s,o))}T(u,p,i,s,r,s),T(p,d,r,s,r,o),T(d,f,r,o,i,o),T(f,u,i,o,i,s),m-=v,g-=v,y+=v,_+=v;const E=1/Math.max(y-m,_-g);return{scale:E,x:m*E,y:g*E,x2:y*E,y2:_*E,projection:e}}const Pd=vl(new Float32Array(16));class Fd{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,e){return{x:0,y:0,z:0}}unproject(t,e){return new Aa(0,0)}projectTilePoint(t,e,n){return{x:t,y:e,z:0}}locationPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t._coordinatePoint(t.locationCoordinate(e),n)}pixelsPerMeter(t,e){return Na(1,t)*e}pixelSpaceConversion(t,e,n){return 1}farthestPixelDistance(t){return Nd(t,t.pixelsPerMeter)}pointCoordinate(t,e,n,i){const r=t.horizonLineFromTop(!1),s=new f(e,Math.max(r,n));return t.rayIntersectionCoordinate(t.pointRayIntersection(s,i))}pointCoordinate3D(t,e,n){const i=new f(e,n);if(t.elevation)return t.elevation.pointCoordinate(i);{const e=this.pointCoordinate(t,i.x,i.y,0);return[e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return!this.pointCoordinate3D(t,e.x,e.y);const n=t.horizonLineFromTop();return e.y<n}createInversionMatrix(t,e){return Pd}createTileMatrix(t,e,n){let i,r,s;const o=n.canonical,a=vl(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Md(o,this);i=1,r=l.x+n.wrap*l.scale,s=l.y,Il(a,a,[i/l.scale,i/l.scale,t.pixelsPerMeter/e])}else i=e/t.zoomScale(o.z),r=(o.x+Math.pow(2,o.z)*n.wrap)*i,s=o.y*i;return xl(a,a,[r,s,0]),Il(a,a,[i/ba,i/ba,1]),a}upVector(t,e,n){return[0,0,1]}upVectorScale(t,e,n){return{metersToTile:1}}}class Ld extends Fd{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,n]=this.parallels=t.parallels||[29.5,45.5],i=Math.sin(_(e));this.n=(i+Math.sin(_(n)))/2,this.c=1+i*(2*this.n-i),this.r0=Math.sqrt(this.c)/this.n}project(t,e){const{n:n,c:i,r0:r}=this,s=_(t-this.center[0]),o=_(e),a=Math.sqrt(i-2*n*Math.sin(o))/n;return{x:a*Math.sin(s*n),y:a*Math.cos(s*n)-r,z:0}}unproject(t,e){const{n:n,c:i,r0:r}=this,s=r+e;let o=Math.atan2(t,Math.abs(s))*Math.sign(s);s*n<0&&(o-=Math.PI*Math.sign(t)*Math.sign(s));const a=_(this.center[0])*n;o=S(o,-Math.PI-a,Math.PI-a);const l=b(v(o/n)+this.center[0],-180,180),h=Math.asin(b((i-(t*t+s*s)*n*n)/(2*n),-1,1)),c=b(v(h),-85.051129,La);return new Aa(l,c)}}const kd=1.340264,Ud=-.081106,Bd=893e-6,zd=.003796,Gd=Math.sqrt(3)/2;class Hd extends Fd{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const n=Math.asin(Gd*Math.sin(e)),i=n*n,r=i*i*i;return{x:.5*(t*Math.cos(n)/(Gd*(kd+3*Ud*i+r*(7*Bd+9*zd*i)))/Math.PI+.5),y:1-.5*(n*(kd+Ud*i+r*(Bd+zd*i))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,i=n*n,r=i*i*i;for(let h,c,u,p=0;p<12&&(c=n*(kd+Ud*i+r*(Bd+zd*i))-e,u=kd+3*Ud*i+r*(7*Bd+9*zd*i),h=c/u,n=b(n-h,-Math.PI/3,Math.PI/3),i=n*n,r=i*i*i,!(Math.abs(h)<1e-12));++p);const s=Gd*t*(kd+3*Ud*i+r*(7*Bd+9*zd*i))/Math.cos(n),o=Math.asin(Math.sin(n)/Gd),a=b(180*s/Math.PI,-180,180),l=b(180*o/Math.PI,-85.051129,La);return new Aa(a,l)}}class Vd extends Fd{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const n=360*(t-.5),i=b(360*(.5-e),-85.051129,La);return new Aa(n,i)}}const jd=Math.PI/2;function Wd(t){return Math.tan((jd+t)/2)}class Yd extends Fd{constructor(t){super(t),this.center=t.center||[0,30];const[e,n]=this.parallels=t.parallels||[30,30];let i=_(e),r=_(n);this.southernCenter=i+r<0,this.southernCenter&&(i=-i,r=-r);const s=Math.cos(i),o=Wd(i);this.n=i===r?Math.sin(i):Math.log(s/Math.cos(r))/Math.log(Wd(r)/o),this.f=s*Math.pow(Wd(i),this.n)/this.n}project(t,e){e=_(e),this.southernCenter&&(e=-e),t=_(t-this.center[0]);const n=1e-6,{n:i,f:r}=this;r>0?e<-jd+n&&(e=-jd+n):e>jd-n&&(e=jd-n);const s=r/Math.pow(Wd(e),i);let o=s*Math.sin(i*t),a=r-s*Math.cos(i*t);return o=.5*(o/Math.PI+.5),a=.5*(a/Math.PI+.5),{x:o,y:this.southernCenter?a:1-a,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n:n,f:i}=this,r=i-e,s=Math.sign(r),o=Math.sign(n)*Math.sqrt(t*t+r*r);let a=Math.atan2(t,Math.abs(r))*s;r*n<0&&(a-=Math.PI*Math.sign(t)*s);const l=b(v(a/n)+this.center[0],-180,180),h=b(v(2*Math.atan(Math.pow(i/o,1/n))-jd),-85.051129,La);return new Aa(l,this.southernCenter?-h:h)}}class qd extends Fd{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,e){return{x:Da(t),y:Oa(e),z:0}}unproject(t,e){const n=Ma(t),i=Pa(e);return new Aa(n,i)}}const Xd=_(La);class Zd extends Fd{project(t,e){const n=(e=_(e))*e,i=n*n;return{x:.5*((t=_(t))*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,i=25,r=0,s=n*n;do{s=n*n;const t=s*s;r=(n*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))-e)/(1.007226+s*(.045255+t*(.259866*s-.311325-.005916*11*t))),n=b(n-r,-Xd,Xd)}while(Math.abs(r)>1e-6&&--i>0);s=n*n;const o=b(v(t/(.8707+s*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979))),-180,180),a=v(n);return new Aa(o,a)}}const Kd=_(La);class Qd extends Fd{project(t,e){e=_(e),t=_(t);const n=Math.cos(e),i=2/Math.PI,r=Math.acos(n*Math.cos(t/2)),s=Math.sin(r)/r,o=.5*(t*i+2*n*Math.sin(t/2)/s)||0,a=.5*(e+Math.sin(e)/s)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(a/Math.PI+1),z:0}}unproject(t,e){let n=t=(2*t-.5)*Math.PI,i=e=(2*(1-e)-1)*Math.PI,r=25;const s=1e-6;let o=0,a=0;do{const r=Math.cos(i),s=Math.sin(i),l=2*s*r,h=s*s,c=r*r,u=Math.cos(n/2),p=Math.sin(n/2),d=2*u*p,f=p*p,m=1-c*u*u,g=m?1/m:0,y=m?Math.acos(r*u)*Math.sqrt(1/m):0,_=.5*(2*y*r*p+2*n/Math.PI)-t,v=.5*(y*s+i)-e,T=.5*g*(c*f+y*r*u*h)+1/Math.PI,E=g*(d*l/4-y*s*p),x=.125*g*(l*p-y*s*c*d),I=.5*g*(h*u+y*f*r)+.5,w=E*x-I*T;o=(v*E-_*I)/w,a=(_*x-v*T)/w,n=b(n-o,-Math.PI,Math.PI),i=b(i-a,-Kd,Kd)}while((Math.abs(o)>s||Math.abs(a)>s)&&--r>0);return new Aa(v(n),v(i))}}class Jd extends Fd{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(_(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){const{scale:n,cosPhi:i}=this;return{x:_(t)*i*n+.5,y:-Math.sin(_(e))/i*n+.5,z:0}}unproject(t,e){const{scale:n,cosPhi:i}=this,r=-(e-.5)/n,s=b(v((t-.5)/n)/i,-180,180),o=Math.asin(b(r*i,-1,1)),a=b(v(o),-85.051129,La);return new Aa(s,a)}}class $d extends qd{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(t,e,n){const i=Td(t,e,n);return Vl(i,i,Id(ud(n))),{x:i[0],y:i[1],z:i[2]}}locationPoint(t,e){const n=vd(e.lat,e.lng),i=zl([],n),r=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Bl(n,n,i,Na(1,0)*ba*r);const s=vl(new Float64Array(16));return El(s,t.pixelMatrix,t.globeMatrix),Vl(n,n,s),new f(n[0],n[1])}pixelsPerMeter(t,e){return Na(1,0)*e}pixelSpaceConversion(t,e,n){const i=Na(1,t)*e,r=Cn(Na(1,45)*e,i,n);return this.pixelsPerMeter(t,e)/r}createTileMatrix(t,e,n){const i=bd(ud(n.canonical));return El(new Float64Array(16),t.globeMatrix,i)}createInversionMatrix(t,e){const{center:n}=t,i=Id(ud(e));return wl(i,i,_(n.lng)),bl(i,i,_(n.lat)),Il(i,i,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(i)}pointCoordinate(t,e,n,i){return ld(t,e,n,!0)||new Ua(0,0)}pointCoordinate3D(t,e,n){const i=this.pointCoordinate(t,e,n,0);return[i.x,i.y,i.z]}isPointAboveHorizon(t,e){return!ld(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const n=t.cameraToCenterDistance,i=t._centerAltitude*e,r=t._camera,s=t._camera.forward(),o=Ml([],Ul([],s,-n),[0,0,i]),a=t.worldSize/(2*Math.PI),l=[0,0,-a],h=t.width/t.height,c=Math.tan(t.fovAboveCenter),u=Ul([],r.up(),c),p=Ul([],r.right(),c*h),d=zl([],Ml([],Ml([],s,u),p)),f=[];let m;if(new ih(o,d).closestPointOnSphere(l,a,f)){const e=Ml([],f,l),n=Yl([],e,o);m=Math.cos(t.fovAboveCenter)*Ol(n)}else{const t=Yl([],o,l),e=Yl([],l,o);zl(e,e);const n=Ol(t)-a;m=Math.sqrt(n*(n+2*a));const i=Math.acos(m/(a+n))-Math.acos(Gl(s,e));m*=Math.cos(i)}return 1.01*m}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),n=Sd(t.zoom);if(n>0){const i=Nd(t,Na(1,t.center.lat)*t.worldSize),r=t.worldSize/(2*Math.PI),s=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Cn(e,i+r*(1-Math.cos(s)),Math.pow(n,10))}return e}upVector(t,e,n){return Td(e,n,t,1)}upVectorScale(t){return{metersToTile:nd*Ed(ud(t))}}}function tf(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new qd(t);case"equirectangular":return new Vd(t);case"naturalEarth":return new Zd(t);case"equalEarth":return new Hd(t);case"winkelTripel":return new Qd(t);case"albers":return n?new Jd(t):new Ld(t);case"lambertConformalConic":return n?new Jd(t):new Yd(t);case"globe":return new $d(t)}throw new Error("Invalid projection name: ".concat(t.name))}const ef=bc.types,nf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rf(t,e,n,i,r,s,o,a,l,h,c,u,p){const d=a?Math.min(Wp,Math.round(a[0])):0,f=a?Math.min(Wp,Math.round(a[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),s,o,(d<<1)+(l?1:0),f,16*h,16*c,256*u,256*p)}function sf(t,e,n,i,r,s,o){t.emplaceBack(e,n,i,r,s,o)}function of(t,e,n,i,r){t.emplaceBack(e,n,i,r),t.emplaceBack(e,n,i,r),t.emplaceBack(e,n,i,r),t.emplaceBack(e,n,i,r)}function af(t){for(const e of t.sections)if(As(e.text))return!0;return!1}class lf{constructor(t){this.layoutVertexArray=new fo,this.indexArray=new xo,this.programConfigurations=t,this.segments=new Ia,this.dynamicLayoutVertexArray=new ho,this.opacityVertexArray=new go,this.placedSymbolArray=new Po,this.globeExtVertexArray=new mo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,lu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,cu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,nf,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,hu.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Hr(lf,"SymbolBuffers");class hf{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Ia,this.collisionVertexArray=new To,this.collisionVertexArrayExt=new Eo}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,uu.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,pu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Hr(hf,"CollisionBuffers");class cf{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=vl([]),this.placementViewportMatrix=vl([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yu(this.zoom,e["text-size"]),this.iconSizeData=yu(this.zoom,e["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>$u[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new lf(new da(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new lf(new da(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new ko,this.lineVertexArray=new Uo,this.symbolInstances=new Lo}calculateGlyphDependencies(t,e,n,i,r){for(let s=0;s<t.length;s++)if(e[t.charCodeAt(s)]=!0,i&&r){const n=xu[t.charAt(s)];n&&(e[n.charCodeAt(0)]=!0)}}populate(t,e,n,i){const r=this.layers[0],s=r.layout,o="globe"===this.projection.name,a=s.get("text-font"),l=s.get("text-field"),h=s.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof De&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==h.value.kind||!!h.value.value||Object.keys(h.parameters).length>0,p=s.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=e.iconDependencies,f=e.glyphDependencies,m=e.availableImages,g=new zs(this.zoom);for(const{feature:y,id:_,index:v,sourceLayerIndex:T}of t){const t=r._featureFilter.needGeometry,e=qa(y,t);if(!r._featureFilter.filter(g,e,n))continue;if(t||(e.geometry=Ya(y,n,i)),o&&1!==y.type&&n.z<=5){const t=e.geometry,i=.98078528056,r=(t,e)=>Gl(Td(t.x,t.y,n,1),Td(e.x,e.y,n,1))<i;for(let e=0;e<t.length;e++)t[e]=Ha(t[e],r)}let l,h;if(c){const t=r.getValueAndResolveTokens("text-field",e,n,m),i=De.factory(t);af(i)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ks()||this.hasRTLText&&Bs.isParsed())&&(l=Eu(i,r,e))}if(u){const t=r.getValueAndResolveTokens("icon-image",e,n,m);h=t instanceof Oe?t:Oe.fromString(t)}if(!l&&!h)continue;const E=this.sortFeaturesByKey?p.evaluate(e,{},n):void 0;if(this.features.push({id:_,text:l,icon:h,index:v,sourceLayerIndex:T,geometry:e.geometry,properties:y.properties,type:ef[y.type],sortKey:E}),h&&(d[h.name]=!0),l){const t=a.evaluate(e,{},n).join(","),i="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf($u.vertical)>=0;for(const e of l.sections)if(e.image)d[e.image.name]=!0;else{const n=Ts(l.toString()),r=e.fontStack||t,s=f[r]=f[r]||{};this.calculateGlyphDependencies(e.text,s,i,this.allowVerticalPlacement,n)}}}"line"===s.get("symbol-placement")&&(this.features=function(t){const e={},n={},i=[];let r=0;function s(e){i.push(t[e]),r++}function o(t,e,r){const s=n[t];return delete n[t],n[e]=s,i[s].geometry[0].pop(),i[s].geometry[0]=i[s].geometry[0].concat(r[0]),s}function a(t,n,r){const s=e[n];return delete e[n],e[t]=s,i[s].geometry[0].shift(),i[s].geometry[0]=r[0].concat(i[s].geometry[0]),s}function l(t,e,n){const i=n?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(i.x,":").concat(i.y)}for(let h=0;h<t.length;h++){const c=t[h],u=c.geometry,p=c.text?c.text.toString():null;if(!p){s(h);continue}const d=l(p,u),f=l(p,u,!0);if(d in n&&f in e&&n[d]!==e[f]){const t=a(d,f,u),r=o(d,f,i[t].geometry);delete e[d],delete n[f],n[l(p,i[r].geometry,!0)]=r,i[t].geometry=null}else d in n?o(d,f,u):f in e?a(d,f,u):(s(h),e[d]=r-1,n[f]=r-1)}return i.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=tf(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:i,y:r}of e)this.lineVertexArray.emplaceBack(i,r);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,i,r,s,o,a,l,h,c,u,p,d){const f=t.indexArray,m=t.layoutVertexArray,g=t.globeExtVertexArray,y=t.segments.prepareSegment(4*e.length,m,f,this.canOverlap?s.sortKey:void 0),_=this.glyphOffsetArray.length,v=y.vertexLength,T=this.allowVerticalPlacement&&o===$u.vertical?Math.PI/2:0,E=s.text&&s.text.sections;for(let I=0;I<e.length;I++){const{tl:i,tr:r,bl:o,br:h,tex:c,pixelOffsetTL:u,pixelOffsetBR:_,minFontScaleX:v,minFontScaleY:x,glyphOffset:b,isSDF:w,sectionIndex:S}=e[I],A=y.vertexLength,C=b[1];if(rf(m,l.x,l.y,i.x,C+i.y,c.x,c.y,n,w,u.x,u.y,v,x),rf(m,l.x,l.y,r.x,C+r.y,c.x+c.w,c.y,n,w,_.x,u.y,v,x),rf(m,l.x,l.y,o.x,C+o.y,c.x,c.y+c.h,n,w,u.x,_.y,v,x),rf(m,l.x,l.y,h.x,C+h.y,c.x+c.w,c.y+c.h,n,w,_.x,_.y,v,x),a){const{x:e,y:n,z:i}=a.anchor,[r,s,o]=a.up;sf(g,e,n,i,r,s,o),sf(g,e,n,i,r,s,o),sf(g,e,n,i,r,s,o),sf(g,e,n,i,r,s,o),of(t.dynamicLayoutVertexArray,e,n,i,T)}else of(t.dynamicLayoutVertexArray,l.x,l.y,l.z,T);f.emplaceBack(A,A+1,A+2),f.emplaceBack(A+1,A+2,A+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),I!==e.length-1&&S===e[I+1].sectionIndex||t.programConfigurations.populatePaintArrays(m.length,s,s.index,{},p,d,E&&E[S])}const x=a?a.anchor:l;t.placedSymbolArray.emplaceBack(x.x,x.y,x.z,l.x,l.y,_,this.glyphOffsetArray.length-_,v,h,c,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,0,!1,0,u,0)}_commitLayoutVertex(t,e,n,i,r,s,o){t.emplaceBack(e,n,i,r,s,Math.round(o.x),Math.round(o.y))}_addCollisionDebugVertices(t,e,n,i,r,s,o){const a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=a.vertexLength,h=o.tileAnchorX,c=o.tileAnchorY;for(let p=0;p<4;p++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new f(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new f(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new f(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new f(t.x1,t.y2)),a.vertexLength+=4;const u=n.indexArray;u.emplaceBack(l,l+1),u.emplaceBack(l+1,l+2),u.emplaceBack(l+2,l+3),u.emplaceBack(l+3,l),a.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceTextSize(t,s,e,o);this._addCollisionDebugVertices(i,r,this.textCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,s)}}_addIconDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(t,e,s.placedIconSymbolIndex);this._addCollisionDebugVertices(i,r,this.iconCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,s)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hf(_o,du.members,Co),this.iconCollisionBox=new hf(_o,du.members,Co);const n=vu(this.iconSizeData,t),i=vu(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(i,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(n,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(n,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s)}}getSymbolInstanceTextSize(t,e,n,i){const r=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:i),s=_u(this.textSizeData,t,r)/mu;return this.tilePixelRatio*s}getSymbolInstanceIconSize(t,e,n){const i=this.icon.placedSymbolArray.get(n),r=_u(this.iconSizeData,t,i);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceTextSize(t,s,e,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,r,i.padding)}}_updateIconDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(t,e,s);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,r,i.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=vu(this.iconSizeData,t),i=vu(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(i,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(n,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,i,r,s,o,a,l){const h={};if(e<n){const{x1:n,y1:i,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(e);h.textBox={x1:n,y1:i,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.textFeatureIndex=d}if(i<r){const{x1:e,y1:n,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(i);h.verticalTextBox={x1:e,y1:n,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.verticalTextFeatureIndex=d}if(s<o){const{x1:e,y1:n,x2:i,y2:r,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(s);h.iconBox={x1:e,y1:n,x2:i,y2:r,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.iconFeatureIndex=d}if(a<l){const{x1:e,y1:n,x2:i,y2:r,padding:s,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(a);h.verticalIconBox={x1:e,y1:n,x2:i,y2:r,padding:s,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.verticalIconFeatureIndex=d}return h}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs;for(let r=n.vertexStartIndex;r<i;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),i=[],r=[],s=[];for(let o=0;o<this.symbolInstances.length;++o){s.push(o);const t=this.symbolInstances.get(o);i.push(0|Math.round(e*t.tileAnchorX+n*t.tileAnchorY)),r.push(t.featureIndex)}return s.sort(((t,e)=>i[t]-i[e]||r[e]-r[t])),s}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:i,leftJustifiedTextSymbolIndex:r,verticalPlacedTextSymbolIndex:s,placedIconSymbolIndex:o,verticalPlacedIconSymbolIndex:a}=e;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),i>=0&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),r>=0&&r!==i&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),s>=0&&this.addIndicesForPlacedSymbol(this.text,s),o>=0&&this.addIndicesForPlacedSymbol(this.icon,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Hr(cf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),cf.MAX_GLYPHS=65535,cf.addDynamicAttributes=of;const uf=new Js({"symbol-placement":new Zs(Kt.layout_symbol["symbol-placement"]),"symbol-spacing":new Zs(Kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zs(Kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ks(Kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zs(Kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zs(Kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Zs(Kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zs(Kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zs(Kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ks(Kt.layout_symbol["icon-size"]),"icon-text-fit":new Zs(Kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zs(Kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ks(Kt.layout_symbol["icon-image"]),"icon-rotate":new Ks(Kt.layout_symbol["icon-rotate"]),"icon-padding":new Zs(Kt.layout_symbol["icon-padding"]),"icon-keep-upright":new Zs(Kt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ks(Kt.layout_symbol["icon-offset"]),"icon-anchor":new Ks(Kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zs(Kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zs(Kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zs(Kt.layout_symbol["text-rotation-alignment"]),"text-field":new Ks(Kt.layout_symbol["text-field"]),"text-font":new Ks(Kt.layout_symbol["text-font"]),"text-size":new Ks(Kt.layout_symbol["text-size"]),"text-max-width":new Ks(Kt.layout_symbol["text-max-width"]),"text-line-height":new Ks(Kt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ks(Kt.layout_symbol["text-letter-spacing"]),"text-justify":new Ks(Kt.layout_symbol["text-justify"]),"text-radial-offset":new Ks(Kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zs(Kt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ks(Kt.layout_symbol["text-anchor"]),"text-max-angle":new Zs(Kt.layout_symbol["text-max-angle"]),"text-writing-mode":new Zs(Kt.layout_symbol["text-writing-mode"]),"text-rotate":new Ks(Kt.layout_symbol["text-rotate"]),"text-padding":new Zs(Kt.layout_symbol["text-padding"]),"text-keep-upright":new Zs(Kt.layout_symbol["text-keep-upright"]),"text-transform":new Ks(Kt.layout_symbol["text-transform"]),"text-offset":new Ks(Kt.layout_symbol["text-offset"]),"text-allow-overlap":new Zs(Kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Zs(Kt.layout_symbol["text-ignore-placement"]),"text-optional":new Zs(Kt.layout_symbol["text-optional"])});var pf={paint:new Js({"icon-opacity":new Ks(Kt.paint_symbol["icon-opacity"]),"icon-color":new Ks(Kt.paint_symbol["icon-color"]),"icon-halo-color":new Ks(Kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ks(Kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ks(Kt.paint_symbol["icon-halo-blur"]),"icon-translate":new Zs(Kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zs(Kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ks(Kt.paint_symbol["text-opacity"]),"text-color":new Ks(Kt.paint_symbol["text-color"],{runtimeType:le,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Ks(Kt.paint_symbol["text-halo-color"]),"text-halo-width":new Ks(Kt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ks(Kt.paint_symbol["text-halo-blur"]),"text-translate":new Zs(Kt.paint_symbol["text-translate"]),"text-translate-anchor":new Zs(Kt.paint_symbol["text-translate-anchor"])}),layout:uf};class df{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:re,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Hr(df,"FormatSectionOverride",{omit:["defaultValue"]});class ff extends Ta{constructor(t){super(t,pf)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,i){const r=this.layout.get(t).evaluate(e,{},n,i),s=this._unevaluatedLayout._values[t];return s.isDataDriven()||ji(s.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,r)}createBucket(t){return new cf(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of pf.paint.overridableProperties){if(!ff.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new df(e),i=new Vi(n,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new Yi("source",i):new qi("composite",i,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new qs(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&ff.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),i=pf.paint.properties[e];let r=!1;const s=t=>{for(const e of t)if(i.overrides&&i.overrides.hasOverride(e))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof De)s(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{r||(e instanceof ke&&Pe(e.value)===pe?s(e.value.sections):e instanceof He?s(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return r}getProgramConfiguration(t){return new pa(this,t)}}var mf={paint:new Js({"background-color":new Zs(Kt.paint_background["background-color"]),"background-pattern":new Zs(Kt.paint_background["background-pattern"]),"background-opacity":new Zs(Kt.paint_background["background-opacity"])})},gf={paint:new Js({"raster-opacity":new Zs(Kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zs(Kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zs(Kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zs(Kt.paint_raster["raster-brightness-max"]),"raster-saturation":new Zs(Kt.paint_raster["raster-saturation"]),"raster-contrast":new Zs(Kt.paint_raster["raster-contrast"]),"raster-resampling":new Zs(Kt.paint_raster["raster-resampling"]),"raster-fade-duration":new Zs(Kt.paint_raster["raster-fade-duration"])})};class yf extends Ta{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var _f={paint:new Js({"sky-type":new Zs(Kt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Zs(Kt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Zs(Kt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Zs(Kt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Zs(Kt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Qs(Kt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Zs(Kt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Zs(Kt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Zs(Kt.paint_sky["sky-opacity"])})};function vf(t,e,n){const i=[0,0,1],r=$l([]);return eh(r,r,n?-_(t)+Math.PI:_(t)),th(r,r,-_(e)),jl(i,i,r),zl(i,i)}const Tf={circle:class extends Ta{constructor(t){super(t,fl)}createBucket(t){return new Ka(t)}queryRadius(t){const e=t;return hl("circle-radius",this,e)+hl("circle-stroke-width",this,e)+cl(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,i,r,s,o,a){const l=pl(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),h=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return ah(t,i,s,o,a,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,h)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new pa(this,t)}},heatmap:class extends Ta{createBucket(t){return new ph(t)}constructor(t){super(t,_h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return hl("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,i,r,s,o,a){const l=this.paint.get("heatmap-radius").evaluate(e,n);return ah(t,i,s,o,a,!0,!0,new f(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new pa(this,t)}},hillshade:class extends Ta{constructor(t){super(t,Th)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ta{constructor(t){super(t,oc)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new pa(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new rc(t)}queryRadius(){return cl(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,i,r,s){return!t.queryGeometry.isAboveHorizon&&$a(ul(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Ta{constructor(t){super(t,Gc)}createBucket(t){return new Oc(t)}queryRadius(){return cl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new pa(this,t)}queryIntersectsFeature(t,e,n,i,r,s,o,a,l){const h=pl(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(e,n),u=this.paint.get("fill-extrusion-base").evaluate(e,n),p=[0,0],d=a&&s.elevation,m=s.elevation?s.elevation.exaggeration():1,g=t.tile.getBucket(this);if(d&&g instanceof Oc){const t=g.centroidVertexArray,e=l+1;e<t.length&&(p[0]=t.geta_centroid_pos0(e),p[1]=t.geta_centroid_pos1(e))}if(0===p[0]&&1===p[1])return!1;"globe"===s.projection.name&&(i=Bc([i],[new f(0,0),new f(ba,ba)],t.tileID.canonical).map((t=>t.polygon)).flat());const y=d?a:null,[_,v]=function(t,e,n,i,r,s,o,a,l,h,c){return"globe"===t.projection.name?function(t,e,n,i,r,s,o,a,l,h,c){const u=[],p=[],d=t.projection.upVectorScale(c,t.center.lat,t.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(t,e,n,i)=>{t[0]=e,t[1]=n,t[2]=i,t[3]=1},y=Uc();n>0&&(n+=y),i+=y;for(const _ of e){const e=[],y=[];for(const u of _){const p=u.x+r.x,_=u.y+r.y,v=t.projection.projectTilePoint(p,_,c),T=t.projection.upVector(c,u.x,u.y);let E=n,x=i;if(o){const t=Kc(p,_,n,i,o,a,l,h);E+=t.base,x+=t.top}0!==n?g(f,v.x+T[0]*d*E,v.y+T[1]*d*E,v.z+T[2]*d*E):g(f,v.x,v.y,v.z),g(m,v.x+T[0]*d*x,v.y+T[1]*d*x,v.z+T[2]*d*x),Vl(f,f,s),Vl(m,m,s),e.push(new qc(f[0],f[1],f[2])),y.push(new qc(m[0],m[1],m[2]))}u.push(e),p.push(y)}return[u,p]}(t,e,n,i,r,s,o,a,l,h,c):o?function(t,e,n,i,r,s,o,a,l){const h=[],c=[],u=[0,0,0,1];for(const p of t){const t=[],d=[];for(const h of p){const c=h.x+i.x,p=h.y+i.y,f=Kc(c,p,e,n,s,o,a,l);u[0]=c,u[1]=p,u[2]=f.base,u[3]=1,Ql(u,u,r),u[3]=Math.max(u[3],1e-5);const m=new qc(u[0]/u[3],u[1]/u[3],u[2]/u[3]);u[0]=c,u[1]=p,u[2]=f.top,u[3]=1,Ql(u,u,r),u[3]=Math.max(u[3],1e-5);const g=new qc(u[0]/u[3],u[1]/u[3],u[2]/u[3]);t.push(m),d.push(g)}h.push(t),c.push(d)}return[h,c]}(e,n,i,r,s,o,a,l,h):function(t,e,n,i,r){const s=[],o=[],a=r[8]*e,l=r[9]*e,h=r[10]*e,c=r[11]*e,u=r[8]*n,p=r[9]*n,d=r[10]*n,f=r[11]*n;for(const m of t){const t=[],e=[];for(const n of m){const s=n.x+i.x,o=n.y+i.y,m=r[0]*s+r[4]*o+r[12],g=r[1]*s+r[5]*o+r[13],y=r[2]*s+r[6]*o+r[14],_=r[3]*s+r[7]*o+r[15],v=m+a,T=g+l,E=y+h,x=Math.max(_+c,1e-5),I=m+u,b=g+p,w=y+d,S=Math.max(_+f,1e-5);t.push(new qc(v/x,T/x,E/x)),e.push(new qc(I/S,b/S,w/S))}s.push(t),o.push(e)}return[s,o]}(e,n,i,r,s)}(s,i,u,c,h,o,y,p,m,s.center.lat,t.tileID.canonical),T=t.queryGeometry;return function(t,e,n){let i=1/0;$a(n,e)&&(i=Zc(n,e[0]));for(let r=0;r<e.length;r++){const s=e[r],o=t[r];for(let t=0;t<s.length-1;t++){const e=s[t],r=[e,s[t+1],o[t+1],o[t],e];Qa(n,r)&&(i=Math.min(i,Zc(n,r)))}}return i!==1/0&&i}(_,v,T.isPointQuery()?T.screenBounds:T.screenGeometry)}},line:class extends Ta{constructor(t){super(t,su),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof An,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=ou.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new iu(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new pa(this,t)}queryRadius(t){const e=t,n=au(hl("line-width",this,e),hl("line-gap-width",this,e)),i=hl("line-offset",this,e);return n/2+Math.abs(i)+cl(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,i,r,s){if(t.queryGeometry.isAboveHorizon)return!1;const o=ul(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),a=t.pixelToTileUnitsFactor/2*au(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(i=function(t,e){const n=[],i=new f(0,0);for(let r=0;r<t.length;r++){const s=t[r],o=[];for(let t=0;t<s.length;t++){const n=s[t-1],r=s[t],a=s[t+1],l=0===t?i:r.sub(n)._unit()._perp(),h=t===s.length-1?i:a.sub(r)._unit()._perp(),c=l._add(h)._unit();c._mult(1/(c.x*h.x+c.y*h.y)),o.push(c._mult(e)._add(r))}n.push(o)}return n}(i,l*t.pixelToTileUnitsFactor)),function(t,e,n){for(let i=0;i<e.length;i++){const r=e[i];if(t.length>=3)for(let e=0;e<r.length;e++)if(ol(t,r[e]))return!0;if(tl(t,r,n))return!0}return!1}(o,i,a)}isTileClipped(){return!0}},symbol:ff,background:class extends Ta{constructor(t){super(t,mf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ta{constructor(t){super(t,gf)}getProgramIds(){return["raster"]}},sky:class extends Ta{constructor(t){super(t,_f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=vh({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),i=!n,r=t.style.light,s=r.properties.get("position");return i&&"viewport"===r.properties.get("anchor")&&G("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?vf(s.azimuthal,90-s.polar,e):vf(n[0],90-n[1],e)}const n=this.paint.get("sky-gradient-center");return vf(n[0],90-n[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class Ef{constructor(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)}update(t,n,i){const{width:r,height:s}=t,{context:o}=this,{gl:a}=o,{HTMLImageElement:l,HTMLCanvasElement:h,HTMLVideoElement:c,ImageData:u,ImageBitmap:p}=e;if(a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!n||!1!==n.premultiply)),i||this.size&&this.size[0]===r&&this.size[1]===s){const{x:e,y:n}=i||{x:0,y:0};t instanceof l||t instanceof h||t instanceof c||t instanceof u||p&&t instanceof p?a.texSubImage2D(a.TEXTURE_2D,0,e,n,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,e,n,r,s,a.RGBA,a.UNSIGNED_BYTE,t.data)}else this.size=[r,s],t instanceof l||t instanceof h||t instanceof c||t instanceof u||p&&t instanceof p?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,r,s,0,this.format,a.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}bind(t,e){const{context:n}=this,{gl:i}=n;i.bindTexture(i.TEXTURE_2D,this.texture),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,this.useMipmap?t===i.NEAREST?i.NEAREST_MIPMAP_NEAREST:i.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class xf{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class If{constructor(){this.tasks={},this.taskQueue=[],F(["process"],this),this.invoker=new xf(this.process),this.nextId=0}add(t,e){const n=this.nextId++,i=function(t){let{type:e,isSymbolTile:n,zoom:i}=t;return i=i||0,"message"===e?0:"maybePrepare"!==e||n?"parseTile"!==e||n?"parseTile"===e&&n?300-i:"maybePrepare"===e&&n?400-i:500:200-i:100-i}(e);if(0===i){j();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){j();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let i=0;i<this.taskQueue.length;i++){const n=this.tasks[this.taskQueue[i]];n.priority<e&&(e=n.priority,t=i)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}class bf{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const wf=["tile","layer","source","sourceLayer","state"];class Sf{constructor(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=n,this._y=i,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of wf)void 0!==this[e]&&(t[e]=this[e]);return t}}const Af=32,Cf=33,Rf=new Uint16Array(8184);for(let gm=0;gm<2046;gm++){let t=gm+2,e=0,n=0,i=0,r=0,s=0,o=0;for(1&t?i=r=s=Af:e=n=o=Af;(t>>=1)>1;){const a=e+i>>1,l=n+r>>1;1&t?(i=e,r=n,e=s,n=o):(e=i,n=r,i=s,r=o),s=a,o=l}const a=4*gm;Rf[a+0]=e,Rf[a+1]=n,Rf[a+2]=i,Rf[a+3]=r}const Df=new Uint16Array(2178),Of=new Uint8Array(1089),Nf=new Uint16Array(1089);function Mf(t){return 0===t?-.03125:32===t?.03125:0}var Pf=io([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Ff={type:2,extent:ba,loadGeometry:()=>[[new f(0,0),new f(8193,0),new f(8193,8193),new f(0,8193),new f(0,0)]]};class Lf{constructor(t,e,n,i,r){this.tileID=t,this.uid=O(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=r,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}registerFadeDuration(t){const e=t+this.timeAdded;e<jt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Md(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,n){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const i of t){const t=i.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){i.layers=t,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=i}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof cf){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof cf&&e.hasRTLText){this.hasRTLText=!0,Bs.isLoading()||Bs.isLoaded()||"deferred"!==ks()||Us();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new No}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const n in this.buckets){const e=this.buckets[n];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ef(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ef(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ef(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,i,r,s,o,a){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:o,transform:s,params:r,tileTransform:this.tileTransform},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),r=e?e.sourceLayer:"",s=i._geojsonTileLayer||i[r];if(!s)return;const o=or(e&&e.filter),{z:a,x:l,y:h}=this.tileID.canonical,c={z:a,x:l,y:h};for(let u=0;u<s.length;u++){const e=s.feature(u);if(o.needGeometry){const t=qa(e,!0);if(!o.filter(new zs(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!o.filter(new zs(this.tileID.overscaledZ),e))continue;const i=n.getId(e,r),p=new Sf(e,a,l,h,i);p.tile=c,t.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=W(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const i=this.expirationTime-e;i?this.expirationTime=t+Math.max(i,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const n=this.latestFeatureIndex.loadVTLayers(),i=e.style.listImages();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const s=this.buckets[r],o=s.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],l=t[o];if(!a||!l||0===Object.keys(l).length)continue;if(s.update(l,a,i,this.imageAtlas&&this.imageAtlas.patternPositions||{}),s instanceof iu||s instanceof rc){const t=e.style._getSourceCache(s.layers[0].source);e._terrain&&e._terrain.enabled&&t&&s.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID)}const h=e&&e.style&&e.style.getLayer(r);h&&(this.queryPadding=Math.max(this.queryPadding,h.queryRadius(s)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<jt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=jt.now()+t}setTexture(t,e){const n=e.context,i=n.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new Ef(n,t,i.RGBA,{useMipmap:!0}),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&i.texParameterf(i.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}setDependencies(t,e){const n={};for(const i of e)n[i]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const n=Ya(Ff,this.tileID.canonical,this.tileTransform)[0],i=new so,r=new Ro;for(let s=0;s<n.length;s++){const{x:t,y:e}=n[s];i.emplaceBack(t,e),r.emplaceBack(s)}r.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(r),this._tileDebugBuffer=t.createVertexBuffer(i,td.members),this._tileDebugSegments=Ia.simpleSegment(0,0,i.length,r.length)}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const n=Ya(Ff,this.tileID.canonical,this.tileTransform)[0];let i,r;if(this.isRaster){const t=function(t,e){const n=Md(t,e),i=Math.pow(2,t.z);for(let h=0;h<Cf;h++)for(let r=0;r<Cf;r++){const s=Ma((t.x+(r+Mf(r))/Af)/i),o=Pa((t.y+(h+Mf(h))/Af)/i),a=e.project(s,o),l=h*Cf+r;Df[2*l+0]=Math.round((a.x*n.scale-n.x)*ba),Df[2*l+1]=Math.round((a.y*n.scale-n.y)*ba)}Of.fill(0),Nf.fill(0);for(let h=2045;h>=0;h--){const t=4*h,e=Rf[t+0],n=Rf[t+1],i=Rf[t+2],r=Rf[t+3],s=e+i>>1,o=n+r>>1,a=s+o-n,l=o+e-s,c=n*Cf+e,u=r*Cf+i,p=o*Cf+s,d=Math.hypot((Df[2*c+0]+Df[2*u+0])/2-Df[2*p+0],(Df[2*c+1]+Df[2*u+1])/2-Df[2*p+1])>=16;if(Of[p]=Of[p]||(d?1:0),h<1022){const t=(n+l>>1)*Cf+(e+a>>1),s=(r+l>>1)*Cf+(i+a>>1);Of[p]=Of[p]||Of[t]||Of[s]}}const r=new ao,s=new xo;let o=0;function a(t,e){const n=e*Cf+t;return 0===Nf[n]&&(r.emplaceBack(Df[2*n+0],Df[2*n+1],t*ba/Af,e*ba/Af),Nf[n]=++o),Nf[n]-1}function l(t,e,n,i,r,o){const h=t+n>>1,c=e+i>>1;if(Math.abs(t-r)+Math.abs(e-o)>1&&Of[c*Cf+h])l(r,o,t,e,h,c),l(n,i,r,o,h,c);else{const l=a(t,e),h=a(n,i),c=a(r,o);s.emplaceBack(l,h,c)}}return l(0,0,Af,Af,Af,0),l(Af,Af,0,0,0,Af),{vertices:r,indices:s}}(this.tileID.canonical,e);i=t.vertices,r=t.indices}else{i=new ao,r=new xo;for(const{x:e,y:r}of n)i.emplaceBack(e,r,0,0);const t=Ih.exports(i.int16,void 0,4);for(let e=0;e<t.length;e+=3)r.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(i,Pf.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(r),this._tileBoundsSegments=Ia.simpleSegment(0,0,i.length,r.length)}_makeGlobeTileDebugBuffers(t,e){const n=e.projection;if(!n||"globe"!==n.name||e.freezeTileCoverage)return;const i=this.tileID.canonical,r=Id(dd(i,e)),s=Sd(e.zoom);let o;s>0&&(o=Tl(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,i,e,r,o,s),this._makeGlobeTileDebugTextBuffer(t,i,e,r,o,s)}_globePoint(t,e,n,i,r,s,o){let a=Td(t,e,n);if(s){const r=1<<n.z,l=Da(i.center.lng),h=Oa(i.center.lat),c=(n.x+.5)/r-l;let u=0;c>.5?u=-1:c<-.5&&(u=1);let p=(t/ba+n.x)/r+u,d=(e/ba+n.y)/r;p=(p-l)*i._pixelsPerMercatorPixel+l,d=(d-h)*i._pixelsPerMercatorPixel+h;const f=[p*i.worldSize,d*i.worldSize,0];Vl(f,f,s),a=pd(a,f,o)}return Vl(a,a,r)}_makeGlobeTileDebugBorderBuffer(t,e,n,i,r,s){const o=new so,a=new Ro,l=new oo,h=(t,h,c,u,p)=>{const d=(c-t)/(p-1),f=(u-h)/(p-1),m=o.length;for(let g=0;g<p;g++){const c=t+g*d,u=h+g*f;o.emplaceBack(c,u);const p=this._globePoint(c,u,e,n,i,r,s);l.emplaceBack(p[0],p[1],p[2]),a.emplaceBack(m+g)}},c=ba;h(0,0,c,0,16),h(c,0,c,c,16),h(c,c,0,c,16),h(0,c,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(a),this._tileDebugBuffer=t.createVertexBuffer(o,td.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(l,$p.members),this._tileDebugSegments=Ia.simpleSegment(0,0,o.length,a.length)}_makeGlobeTileDebugTextBuffer(t,e,n,i,r,s){const o=new so,a=new xo,l=new oo,h=25;a.reserve(32),o.reserve(h),l.reserve(h);const c=(t,e)=>h*t+e;for(let u=0;u<h;u++){const t=2048*u;for(let a=0;a<h;a++){const h=2048*a;o.emplaceBack(h,t);const c=this._globePoint(h,t,e,n,i,r,s);l.emplaceBack(c[0],c[1],c[2])}}for(let u=0;u<4;u++)for(let t=0;t<4;t++){const e=c(u,t),n=c(u,t+1),i=c(u+1,t),r=c(u+1,t+1);a.emplaceBack(e,n,i),a.emplaceBack(i,n,r)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(a),this._tileDebugTextBuffer=t.createVertexBuffer(o,td.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(l,$p.members),this._tileDebugTextSegments=Ia.simpleSegment(0,0,h,32)}}class kf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},R(this.stateChanges[t][i],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==i&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][i]){this.deletedStates[t][i]={};for(const e in this.state[t][i])n[e]||(this.deletedStates[t][i][e]=null)}else for(const r in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][r]&&delete this.deletedStates[t][i][r]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),i=R({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete i[t]}return i}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const t={};for(const e in this.stateChanges[i])this.state[i][e]||(this.state[i][e]={}),R(this.state[i][e],this.stateChanges[i][e]),t[e]=this.state[i][e];n[i]=t}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const t={};if(null===this.deletedStates[i])for(const e in this.state[i])t[e]={},this.state[i][e]={};else for(const e in this.deletedStates[i]){if(null===this.deletedStates[i][e])this.state[i][e]={};else for(const t of Object.keys(this.deletedStates[i][e]))delete this.state[i][e][t];t[e]=this.state[i][e]}n[i]=n[i]||{},R(n[i],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const i in t)t[i].setFeatureState(n,e)}}class Uf{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function Bf(t,e,n,i){let r=0,s=Number.MAX_VALUE;for(let o=0;o<3;o++)if(Math.abs(i[o])<1e-15){if(n[o]<t[o]||n[o]>e[o])return null}else{const a=1/i[o];let l=(t[o]-n[o])*a,h=(e[o]-n[o])*a;if(l>h){const t=l;l=h,h=t}if(l>r&&(r=l),h<s&&(s=h),r>s)return null}return r}function zf(t,e,n,i,r,s,o,a,l,h,c){const u=i-t,p=r-e,d=s-n,f=o-t,m=a-e,g=l-n,y=c[1]*g-c[2]*m,_=c[2]*f-c[0]*g,v=c[0]*m-c[1]*f,T=u*y+p*_+d*v;if(Math.abs(T)<1e-15)return null;const E=1/T,x=h[0]-t,I=h[1]-e,b=h[2]-n,w=(x*y+I*_+b*v)*E;if(w<0||w>1)return null;const S=I*d-b*p,A=b*u-x*d,C=x*p-I*u,R=(c[0]*S+c[1]*A+c[2]*C)*E;return R<0||w+R>1?null:(f*S+m*A+g*C)*E}function Gf(t,e,n){return(t-e)/(n-e)}function Hf(t,e,n,i,r,s,o,a,l){const h=1<<n,c=s-i,u=o-r,p=(t+1)/h*c+i,d=(e+0)/h*u+r,f=(e+1)/h*u+r;a[0]=(t+0)/h*c+i,a[1]=d,l[0]=p,l[1]=f}class Vf{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),n=[];let i=Math.ceil(Math.pow(2,e));const r=1/i,s=(t,e,n,i,r)=>{const s=i?1:0,o=(t+1)*n-s,a=e*n,l=(e+1)*n-s;r[0]=t*n,r[1]=a,r[2]=o,r[3]=l};let o=new Uf(i);const a=[];for(let l=0;l<i*i;l++){s(l%i,Math.floor(l/i),r,!1,a);const e=Wf(a[0],a[1],t),n=Wf(a[2],a[1],t),h=Wf(a[2],a[3],t),c=Wf(a[0],a[3],t);o.minimums.push(Math.min(e,n,h,c)),o.maximums.push(Math.max(e,n,h,c)),o.leaves.push(1)}for(n.push(o),i/=2;i>=1;i/=2){const t=n[n.length-1];o=new Uf(i);for(let e=0;e<i*i;e++){s(e%i,Math.floor(e/i),2,!0,a);const n=t.getElevation(a[0],a[1]),r=t.getElevation(a[2],a[1]),l=t.getElevation(a[2],a[3]),h=t.getElevation(a[0],a[3]),c=t.isLeaf(a[0],a[1]),u=t.isLeaf(a[2],a[1]),p=t.isLeaf(a[2],a[3]),d=t.isLeaf(a[0],a[3]),f=Math.min(n.min,r.min,l.min,h.min),m=Math.max(n.max,r.max,l.max,h.max),g=c&&u&&p&&d;o.maximums.push(m),o.minimums.push(f),o.leaves.push(m-f<=5&&g?1:0)}n.push(o)}return n}(this.dem),n=e.length-1,i=e[n];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Bf([t,e,-100],[n,i,this.maximums[0]*o],r,s)}raycast(t,e,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;const a=this.raycastRoot(t,e,n,i,r,s,o);if(null==a)return null;const l=[],h=[],c=[],u=[],p=[{idx:0,t:a,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:a,t:d,nodex:f,nodey:m,depth:g}=p.pop();if(this.leaves[a]){Hf(f,m,g,t,e,n,i,c,u);const a=1<<g,l=(f+0)/a,h=(f+1)/a,p=(m+0)/a,y=(m+1)/a,_=Wf(l,p,this.dem)*o,v=Wf(h,p,this.dem)*o,T=Wf(h,y,this.dem)*o,E=Wf(l,y,this.dem)*o,x=zf(c[0],c[1],_,u[0],c[1],v,u[0],u[1],T,r,s),I=zf(u[0],u[1],T,c[0],u[1],E,c[0],c[1],_,r,s),b=Math.min(null!==x?x:Number.MAX_VALUE,null!==I?I:Number.MAX_VALUE);if(b!==Number.MAX_VALUE)return b;{const t=Bl([],r,s,d);if(jf(_,v,E,T,Gf(t[0],c[0],u[0]),Gf(t[1],c[1],u[1]))>=t[2])return d}continue}let y=0;for(let p=0;p<this._siblingOffset.length;p++){Hf((f<<1)+this._siblingOffset[p][0],(m<<1)+this._siblingOffset[p][1],g+1,t,e,n,i,c,u),c[2]=-100,u[2]=this.maximums[this.childOffsets[a]+p]*o;const d=Bf(c,u,r,s);if(null!=d){const t=d;l[p]=t;let e=!1;for(let n=0;n<y&&!e;n++)t>=l[h[n]]&&(h.splice(n,0,p),e=!0);e||(h[y]=p),y++}}for(let t=0;t<y;t++){const e=h[t];p.push({idx:this.childOffsets[a]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:g+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,i,r){if(1===t[i].isLeaf(e,n))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const s=i-1,o=t[s];let a=0,l=0;for(let h=0;h<this._siblingOffset.length;h++){const t=2*e+this._siblingOffset[h][0],i=2*n+this._siblingOffset[h][1],r=o.getElevation(t,i),s=o.isLeaf(t,i),c=this._addNode(r.min,r.max,s);s&&(a|=1<<h),l||(l=c)}for(let h=0;h<this._siblingOffset.length;h++)a&1<<h||this._construct(t,2*e+this._siblingOffset[h][0],2*n+this._siblingOffset[h][1],s,l+h)}}function jf(t,e,n,i,r,s){return Cn(Cn(t,n,s),Cn(e,i,s),r)}function Wf(t,e,n){const i=n.dim,r=b(t*i-.5,0,i-1),s=b(e*i-.5,0,i-1),o=Math.floor(r),a=Math.floor(s),l=Math.min(o+1,i-1),h=Math.min(a+1,i-1);return jf(n.get(o,a),n.get(l,a),n.get(o,h),n.get(l,h),r-o,s-a)}const Yf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class qf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return G('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=e.height;const s=this.dim=e.height-2,o=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(let t=0;t<s;t++)o[this._idx(-1,t)]=o[this._idx(0,t)],o[this._idx(s,t)]=o[this._idx(s-1,t)],o[this._idx(t,-1)]=o[this._idx(t,0)],o[this._idx(t,s)]=o[this._idx(t,s-1)];o[this._idx(-1,-1)]=o[this._idx(0,0)],o[this._idx(s,-1)]=o[this._idx(s-1,0)],o[this._idx(-1,s)]=o[this._idx(0,s-1)],o[this._idx(s,s)]=o[this._idx(s-1,s-1)],r&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Vf(this)}get(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(t=b(t,-1,this.dim),e=b(e,-1,this.dim));const n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(t){return Yf[t]}get unpackVector(){return Yf[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}static pack(t,e){const n=[0,0,0,0],i=qf.getUnpackVector(e);let r=Math.floor((t+i[3])/i[2]);return n[2]=r%256,r=Math.floor(r/256),n[1]=r%256,r=Math.floor(r/256),n[0]=r,n}getPixels(){return new yh({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let i=e*this.dim,r=e*this.dim+this.dim,s=n*this.dim,o=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:s=o-1;break;case 1:o=s+1}const a=-e*this.dim,l=-n*this.dim;for(let h=s;h<o;h++)for(let e=i;e<r;e++){const n=4*this._idx(e,h),i=4*this._idx(e+a,h+l);this.pixels[n+0]=t.pixels[i+0],this.pixels[n+1]=t.pixels[i+1],this.pixels[n+2]=t.pixels[i+2],this.pixels[n+3]=t.pixels[i+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Hr(qf,"DEMData"),Hr(Vf,"DemMinMaxQuadTree",{omit:["dem"]});class Xf{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:e,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const i of this.data[n])t(i.value)||e.push(i);for(const n of e)this.remove(n.value.tileID,n)}}class Zf{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}Zf.ReadOnly=!1,Zf.ReadWrite=!0,Zf.disabled=new Zf(519,Zf.ReadOnly,[0,1]);const Kf=7680;class Qf{constructor(t,e,n,i,r,s){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=s}}Qf.disabled=new Qf({func:519,mask:0},0,0,Kf,Kf,Kf);class Jf{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}Jf.Replace=[1,0],Jf.disabled=new Jf(Jf.Replace,Ae.transparent,[!1,!1,!1,!1]),Jf.unblended=new Jf(Jf.Replace,Ae.transparent,[!0,!0,!0,!0]),Jf.alphaBlended=new Jf([1,771],Ae.transparent,[!0,!0,!0,!0]);const $f=1029,tm=2305;class em{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}em.disabled=new em(!1,$f,tm),em.backCCW=new em(!0,$f,tm),em.backCW=new em(!0,$f,2304),em.frontCW=new em(!0,1028,2304),em.frontCCW=new em(!0,1028,tm);class nm extends Zt{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Xf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new kf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return C(this._tiles).map((t=>t.tileID)).sort(im).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,i=e.tileID,r=new f(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),s=new f(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||s.y-r.y||s.x-r.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(im).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,i){if(i)if(t.state="errored",404!==i.status)this._source.fire(new Xt(i,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=jt.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new qt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let i=0;i<e.length;i++){const r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),s=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[s]&&(t.neighboringTiles[s].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,i){for(const r in this._tiles){let s=this._tiles[r];if(i[r]||!s.hasData()||s.tileID.overscaledZ<=e||s.tileID.overscaledZ>n)continue;let o=s.tileID;for(;s&&s.tileID.overscaledZ>e+1;){const t=s.tileID.scaledTo(s.tileID.overscaledZ-1);s=this._tiles[t.key],s&&s.hasData()&&(o=t)}let a=o;for(;a.overscaledZ>e;)if(a=a.scaledTo(a.overscaledZ-1),t[a.key]){i[o.key]=o;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),i=this._getLoadedTile(e);if(i)return i}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=Math.ceil(t.width/e)+1,i=Math.ceil(t.height/e)+1,r=Math.floor(n*i*5),s="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,r):r,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(o)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),t[i.tileID.key]=i}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let i;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new Wc(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(i=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(i=i.filter((t=>this._source.hasTile(t))))):i=[];const r=this._updateRetainedTiles(i);if(rm(this._source.type)&&0!==i.length){const t={},e={},n=Object.keys(r);for(const i of n){const n=r[i],s=this._tiles[i];if(!s||s.fadeEndTime&&s.fadeEndTime<=jt.now())continue;const o=this.findLoadedParent(n,Math.max(n.overscaledZ-nm.maxOverzooming,this._source.minzoom));o&&(this._addTile(o.tileID),t[o.tileID.key]=o.tileID),e[i]=n}const s=i[i.length-1].overscaledZ;for(const i in this._tiles){const t=this._tiles[i];if(r[i]||!t.hasData())continue;let n=t.tileID;for(;n.overscaledZ>s;){n=n.scaledTo(n.overscaledZ-1);const s=this._tiles[n.key];if(s&&s.hasData()&&e[n.key]){r[i]=t.tileID;break}}}for(const i in t)r[i]||(this._coveredTiles[i]=!0,r[i]=t[i])}for(const o in r)this._tiles[o].clearFadeHold();const s=function(t,e){const n=[];for(const i in t)i in e||n.push(i);return n}(this._tiles,r);for(const o of s){const t=this._tiles[o];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+o)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},i=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),r=t[0].overscaledZ,s=Math.max(r-nm.maxOverzooming,this._source.minzoom),o=Math.max(r+nm.maxUnderzooming,this._source.minzoom),a={};for(const l of t){const t=this._addTile(l);e[l.key]=l,t.hasData()||i<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,i,o,e);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let i=t.wasRequested();for(let r=l.overscaledZ-1;r>=s;--r){const s=l.scaledTo(r);if(n[s.key])break;if(n[s.key]=!0,t=this.getTile(s),!t&&i&&(t=this._addTile(s)),t&&(e[s.key]=s,i=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,i=this._tiles[t].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);const t=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;i=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);if(!n){const n=this.map?this.map.painter:null;e=new Lf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new qt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,e,n){const i=[],r=this.transform;if(!r)return i;const s="globe"===r.projection.name,o=Da(r.center.lng);for(const a in this._tiles){const l=this._tiles[a];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let h;if(s){const t=l.tileID.canonical;if(0===t.z){const e=[Math.abs(b(o,...sm(t,-1))-o),Math.abs(b(o,...sm(t,1))-o)];h=[0,2*e.indexOf(Math.min(...e))-1]}else{const e=[Math.abs(b(o,...sm(t,-1))-o),Math.abs(b(o,...sm(t,0))-o),Math.abs(b(o,...sm(t,1))-o)];h=[e.indexOf(Math.min(...e))-1]}}else h=[0];for(const n of h){const s=t.containsTile(l,r,e,n);s&&i.push(s)}}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const n of e)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(rm(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=jt.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const i=this._tiles[t];i&&i.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}_preloadTiles(t,e){const n=new Map,i=Array.isArray(t)?t:[t],r=this.map.painter.terrain,s=this.usedForTerrain&&r?r.getScaledDemTileSize():this._source.tileSize;for(const o of i){const t=o.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&o.updateElevation(!1)}A(Array.from(n.values()),((t,e)=>{const n=new Lf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(t=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),e(t,n)}))}),e)}}function im(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function rm(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function sm(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}nm.maxOverzooming=10,nm.maxUnderzooming=3;class om{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const i=n||t.findDEMTileFor(e);if(!i||!i.dem)return;const r=i.dem,s=i.tileID,o=1<<e.canonical.z-s.canonical.z;return new om(i,i.tileSize/ba/o,[(e.canonical.x/o-s.canonical.x)*r.dim,(e.canonical.y/o-s.canonical.y)*r.dim])}tileCoordToPixel(t,e){const n=e*this._scale+this._offset[1],i=Math.floor(t*this._scale+this._offset[0]),r=Math.floor(n);return new f(i,r)}getElevationAt(t,e,n,i){const r=t*this._scale+this._offset[0],s=e*this._scale+this._offset[1],o=Math.floor(r),a=Math.floor(s),l=this._dem;return i=!!i,n?Cn(Cn(l.get(o,a,i),l.get(o,a+1,i),s-a),Cn(l.get(o+1,a,i),l.get(o+1,a+1,i),s-a),r-o):l.get(o,a,i)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Na(1,t)*this._dem.stride}}class am{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Br(ba,16,0),this.featureIndexArray=new zo,this.promoteId=e}insert(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,s);const a=this.grid;for(let l=0;l<e.length;l++){const t=e[l],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const i=t[e];n[0]=Math.min(n[0],i.x),n[1]=Math.min(n[1],i.y),n[2]=Math.max(n[2],i.x),n[3]=Math.max(n[3],i.y)}n[0]<ba&&n[1]<ba&&n[2]>=0&&n[3]>=0&&a.insert(o,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ic(new wu(this.rawTileData)).layers,this.sourceLayerCoder=new bf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,n,i){var r=this;this.loadVTLayers();const s=t.params||{},o=or(s.filter),a=t.tileResult,l=t.transform,h=a.bufferedTilespaceBounds,c=this.grid.query(h.min.x,h.min.y,h.max.x,h.max.y,((t,e,n,i)=>al(a.bufferedTilespaceGeometry,t,e,n,i)));c.sort(hm);let u=null;l.elevation&&c.length>0&&(u=om.create(l.elevation,this.tileID));const p={};let d;for(let f=0;f<c.length;f++){const l=c[f];if(l===d)continue;d=l;const h=this.featureIndexArray.get(l);let m=null;this.loadMatchingFeature(p,h,o,s.layers,s.availableImages,e,n,i,(function(e,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=Ya(e,r.tileID.canonical,t.tileTransform)),n.queryIntersectsFeature(a,e,i,m,r.z,t.transform,t.pixelPosMatrix,u,s)}))}return p}loadMatchingFeature(t,e,n,i,r,s,o,a,l){const{featureIndex:h,bucketIndex:c,sourceLayerIndex:u,layoutVertexArrayOffset:p}=e,d=this.bucketLayerIDs[c];if(i&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(i,d))return;const f=this.sourceLayerCoder.decode(u),m=this.vtLayers[f].feature(h);if(n.needGeometry){const t=qa(m,!0);if(!n.filter(new zs(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new zs(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let y=0;y<d.length;y++){const e=d[y];if(i&&i.indexOf(e)<0)continue;const n=s[e];if(!n)continue;let c={};void 0!==g&&a&&(c=a.getState(n.sourceLayer||"_geojsonTileLayer",g));const u=R({},o[e]);u.paint=lm(u.paint,n.paint,m,c,r),u.layout=lm(u.layout,n.layout,m,c,r);const f=!l||l(m,n,c,p);if(!f)continue;const _=new Sf(m,this.z,this.x,this.y,g);_.layer=u;let v=t[e];void 0===v&&(v=t[e]=[]),v.push({featureIndex:h,feature:_,intersectionZ:f})}}lookupSymbolFeatures(t,e,n,i,r,s,o,a){const l={};this.loadVTLayers();const h=or(r);for(const c of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:c,layoutVertexArrayOffset:0},h,s,o,a,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:n}=t;this.loadVTLayers();const i=this.sourceLayerCoder.decode(n),r=this.vtFeatures[i];if(r[e])return r[e];const s=this.vtLayers[i].feature(e);return r[e]=s,s}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const i="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=i&&(n=t.properties[i]),"boolean"==typeof n&&(n=Number(n))}return n}}function lm(t,e,n,i,r){return k(t,((t,s)=>{const o=e instanceof Xs?e.get(s):null;return o&&o.evaluate?o.evaluate(n,i,r):o}))}function hm(t,e){return e-t}Hr(am,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cm{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new gh({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=M(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const i=[];let r=t.length%2==1?-t[t.length-1]*n:0,s=t[0]*n,o=!0;i.push({left:r,right:s,isDash:o,zeroLength:0===t[0]});let a=t[0];for(let l=1;l<t.length;l++){o=!o;const e=t[l];r=a*n,a+=e,s=a*n,i.push({left:r,right:s,isDash:o,zeroLength:0===e})}return i}addRoundDash(t,e,n){const i=e/2;for(let r=-n;r<=n;r++){const e=this.width*(this.nextRow+n+r);let s=0,o=t[s];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++s]);const l=Math.abs(a-o.left),h=Math.abs(a-o.right),c=Math.min(l,h);let u;const p=r/n*(i+1);if(o.isDash){const t=i-Math.abs(p);u=Math.sqrt(c*c+t*t)}else u=i-Math.sqrt(c*c+p*p);this.image.data[e+a]=Math.max(0,Math.min(255,u+128))}}}addRegularDash(t,e){for(let a=t.length-1;a>=0;--a){const e=t[a],n=t[a+1];e.zeroLength?t.splice(a,1):n&&n.isDash===e.isDash&&(n.left=e.left,t.splice(a,1))}const n=t[0],i=t[t.length-1];n.isDash===i.isDash&&(n.left=i.left-this.width,i.right=n.right+this.width);const r=this.width*this.nextRow;let s=0,o=t[s];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++s]);const n=Math.abs(a-o.left),i=Math.abs(a-o.right),l=Math.min(n,i);this.image.data[r+a]=Math.max(0,Math.min(255,(o.isDash?l:-l)+e+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const i="round"===e,r=i?7:0,s=2*r+1;if(this.nextRow+s>this.height)return G("LineAtlas out of space"),null;0===t.length&&t.push(1);let o=0;for(let h=0;h<t.length;h++)t[h]<0&&(G("Negative value is found in line dasharray, replacing values with 0"),t[h]=0),o+=t[h];if(0!==o){const n=this.width/o,s=this.getDashRanges(t,this.width,n);i?this.addRoundDash(s,n,r):this.addRegularDash(s,"square"===e?.5*n:0)}const a=this.nextRow+r;this.nextRow+=s;const l={tl:[a,r],br:[o,0]};return this.positions[n]=l,l}}Hr(cm,"LineAtlas");class um{constructor(t){const e={},n=[];for(const o in t){const i=t[o],r=e[o]={};for(const t in i.glyphs){const e=i.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const s=e.metrics.localGlyph?2:1,o={x:0,y:0,w:e.bitmap.width+2*s,h:e.bitmap.height+2*s};n.push(o),r[t]=o}}const{w:i,h:r}=Ku(n),s=new gh({width:i||1,height:r||1});for(const o in t){const n=t[o];for(const t in n.glyphs){const i=n.glyphs[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const r=e[o][t],a=i.metrics.localGlyph?2:1;gh.copy(i.bitmap,s,{x:0,y:0},{x:r.x+a,y:r.y+a},i.bitmap)}}this.image=s,this.positions=e}}Hr(um,"GlyphAtlas");class pm{constructor(t){this.tileID=new Wc(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Md(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,e,n,i,r){this.status="parsing",this.data=t,this.collisionBoxArray=new No;const s=new bf(Object.keys(t.layers).sort()),o=new am(this.tileID,this.promoteId);o.bucketLayerIDs=[];const a={},l=new cm(256,256),h={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},c=e.familiesBySource[this.source];for(const T in c){const e=t.layers[T];if(!e)continue;let i=!1,r=!1;for(const t of c[T])"symbol"===t[0].type?i=!0:r=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!r)continue;1===e.version&&G('Vector tile source "'.concat(this.source,'" layer "').concat(T,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const l=s.encode(T),u=[];for(let t=0;t<e.length;t++){const n=e.feature(t),i=o.getId(n,T);u.push({feature:n,id:i,index:t,sourceLayerIndex:l})}for(const t of c[T]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(dm(t,this.zoom,n),(a[e.id]=e.createBucket({index:o.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(u,h,this.tileID.canonical,this.tileTransform),o.bucketLayerIDs.push(t.map((t=>t.id))))}}let u,p,d,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=k(h.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(g).length?i.send("getGlyphs",{uid:this.uid,stacks:g},((t,e)=>{u||(u=t,p=e,v.call(this))}),void 0,!1,m):p={};const y=Object.keys(h.iconDependencies);y.length?i.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{u||(u=t,d=e,v.call(this))}),void 0,!1,m):d={};const _=Object.keys(h.patternDependencies);function v(){if(u)return r(u);if(p&&d&&f){const t=new um(p),e=new Ju(d,f);for(const i in a){const r=a[i];r instanceof cf?(dm(r.layers,this.zoom,n),Hp(r,p,t.positions,d,e.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):r.hasPattern&&(r instanceof iu||r instanceof rc||r instanceof Oc)&&(dm(r.layers,this.zoom,n),r.addFeatures(h,this.tileID.canonical,e.patternPositions,n,this.tileTransform))}this.status="done",r(null,{buckets:C(a).filter((t=>!t.isEmpty())),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}}_.length?i.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{u||(u=t,f=e,v.call(this))}),void 0,!1,m):f={},v.call(this)}}function dm(t,e,n){const i=new zs(e);for(const r of t)r.recalculate(i,n)}class fm{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,i){const r=this.entries[t]=this.entries[t]||{callbacks:[]};if(r.result){const[t,n]=r.result;return this.scheduler?this.scheduler.add((()=>{i(t,n)}),e):i(t,n),()=>{}}return r.callbacks.push(i),r.cancel||(r.cancel=n(((n,i)=>{r.result=[n,i];for(const t of r.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,i)}),e):t(n,i);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{r.result||(r.callbacks=r.callbacks.filter((t=>t!==i)),r.callbacks.length||(r.cancel(),delete this.entries[t]))}}}function mm(t,e,n){const i=JSON.stringify(t.request);return t.data&&(this.deduped.entries[i]={result:[null,t.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const i=ht(t.request,((t,i,r,s)=>{t?e(t):i&&e(null,{vectorTile:n?void 0:new Ic(new wu(i)),rawData:i,cacheControl:r,expires:s})}));return()=>{i.cancel(),e()}}),e)}t.ARRAY_TYPE=gl,t.AUTH_ERR_MSG=mt,t.Aabb=oh,t.Actor=class{constructor(t,n,i){this.target=t,this.parent=n,this.mapId=i,this.callbacks={},this.cancelCallbacks={},F(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=j()?t:e,this.scheduler=new If}send(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=s,this.callbacks[o]=n);const a=q(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:Wr(e,a)},a),{cancel:()=>{n&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||j()){const t=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),t&&t.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Yr(e.error)):n(null,Yr(e.data)))}else{const n=q(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Wr(e):null,data:Wr(i,n)},n)}:t=>{},r=Yr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,r,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,i)}else i(new Error("Could not find function ".concat(e.type)))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=Vc,t.Color=Ae,t.ColorMode=Jf,t.CullFaceMode=em,t.DEMData=qf,t.DataConstantProperty=Zs,t.DedupedRequest=fm,t.DepthMode=Zf,t.EXTENT=ba,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,i=1<<n,r=Math.floor(t.x),s=Math.floor((t.x-r)*i),o=Math.floor(t.y*i),a=this.findDEMTileFor(new Wc(n,r,n,s,o));return!(!a||!a.dem)}getAtPointOrZero(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(t,e)||0}getAtPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==e&&(e=null);const i=this._source();if(!i)return e;if(t.y<0||t.y>1)return e;const r=i.getSource().maxzoom,s=1<<r,o=Math.floor(t.x),a=t.x-o,l=new Wc(r,o,r,Math.floor(a*s),Math.floor(t.y*s)),h=this.findDEMTileFor(l);if(!h||!h.dem)return e;const c=h.dem,u=1<<h.tileID.canonical.z,p=(a*u-h.tileID.canonical.x)*c.dim,d=(t.y*u-h.tileID.canonical.y)*c.dim,f=Math.floor(p),m=Math.floor(d);return(n?this.exaggeration():1)*Cn(Cn(c.get(f,m),c.get(f,m+1),d-m),Cn(c.get(f+1,m),c.get(f+1,m+1),d-m),p-f)}getAtTileOffset(t,e,n){const i=1<<t.canonical.z;return this.getAtPointOrZero(new Ua(t.wrap+(t.canonical.x+e/ba)/i,(t.canonical.y+n/ba)/i))}getAtTileOffsetFunc(t,e,n,i){return r=>{const s=this.getAtTileOffset(t,r.x,r.y),o=i.upVector(t.canonical,r.x,r.y);return Ul(o,o,s*i.upVectorScale(t.canonical,e,n).metersToTile),o}}getForTilePoints(t,e,n,i){if(this.isUsingMockSource())return!1;const r=om.create(this,t,i);return!!r&&(e.forEach((t=>{t[2]=this.exaggeration()*r.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,i=e.tileID,r=1<<t.canonical.z-i.canonical.z;let s=t.canonical.x/r-i.canonical.x,o=t.canonical.y/r-i.canonical.y,a=0;for(let l=0;l<t.canonical.z-i.canonical.z&&!n.leaves[a];l++){s*=2,o*=2;const t=2*Math.floor(o)+Math.floor(s);a=n.childOffsets[a]+t,s%=1,o%=1}return{min:this.exaggeration()*n.minimums[a],max:this.exaggeration()*n.maximums[a]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Xt,t.EvaluationParameters=zs,t.Event=qt,t.Evented=Zt,t.FillExtrusionBucket=Oc,t.Frustum=sh,t.FrustumCorners=rh,t.GLOBE_METERS_TO_ECEF=nd,t.GLOBE_RADIUS=ed,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=6,t.GLOBE_ZOOM_THRESHOLD_MIN=5,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_createGrid(t){const e=new so,n=new xo,i=65;for(let r=0;r<i;r++)for(let t=0;t<i;t++)e.emplaceBack(t,r);this._gridSegments=[];for(let r=0,s=0;r<rd.length;r++){const t=rd[r];for(let r=0;r<t;r++)for(let t=0;t<64;t++){const e=r*i+t;n.emplaceBack(e+1,e,e+i),n.emplaceBack(e+i,e+i+1,e+1)}const e=64*t*2;this._gridSegments.push(Ia.simpleSegment(0,s,(t+1)*i,e)),s+=e}this._gridBuffer=t.createVertexBuffer(e,td.members),this._gridIndexBuffer=t.createIndexBuffer(n,!0)}_createPoles(t){const e=new xo;for(let r=0;r<=id;r++)e.emplaceBack(0,r+1,r+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new So,i=new So;this._poleSegments=[];for(let r=0,s=0;r<5;r++){const t=360/(1<<r);n.emplaceBack(0,-ed,0,.5,0),i.emplaceBack(0,-ed,0,.5,1);for(let e=0;e<=id;e++){const r=e/id,s=Cn(0,t,r),[o,a,l]=_d(Dd,Od,s,ed);n.emplaceBack(o,a,l,r,0),i.emplaceBack(o,a,l,r,1)}this._poleSegments.push(Ia.simpleSegment(s,0,66,64)),s+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Jp,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(i,Jp,!1)}getGridBuffers(t){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[t]]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new Co,n=id,i=n+1;this._wireframeSegments=[];for(let t=0,r=0;t<rd.length;t++){const s=rd[t];for(let t=0;t<s;t++)for(let r=0;r<n;r++){const n=t*i+r;e.emplaceBack(n,n+1),e.emplaceBack(n,n+i),e.emplaceBack(n,n+i+1)}const o=s*n*3;this._wireframeSegments.push(Ia.simpleSegment(0,r,(s+1)*i,o)),r+=o}this._wireframeIndexBuffer=t.createIndexBuffer(e)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=Ap,t.ImagePosition=Qu,t.LivePerformanceUtils=Lt,t.LngLat=Aa,t.LngLatBounds=wa,t.LocalGlyphMode=Sp,t.MAX_MERCATOR_LATITUDE=La,t.MercatorCoordinate=Ua,t.ONE_EM=mu,t.OverscaledTileID=Wc,t.PerformanceMarkers=Ft,t.Properties=Js,t.RGBAImage=yh,t.Ray=ih,t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",u,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!gt(t))return t;const n=xt(t);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!gt(t))return t;const n=xt(t);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,i){if(!gt(t))return t;const r=xt(t);return r.path="/v4/".concat(r.authority,".json"),r.params.push("secure"),n&&r.params.push("language=".concat(n)),i&&r.params.push("worldview=".concat(i)),this._makeAPIURL(r,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,i){const r=xt(t);return gt(t)?(r.path="/styles/v1".concat(r.path,"/sprite").concat(e).concat(n),this._makeAPIURL(r,this._customAccessToken||i)):(r.path+="".concat(e).concat(n),It(r))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!gt(t))return t;const i=xt(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(e||n&&"raster"!==i.authority&&512===n?"@2x":"").concat(s.supported?".webp":"$1")),"raster"===i.authority?i.path="/".concat(r.RASTER_URL_PREFIX).concat(i.path):(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/".concat(r.TILE_URL_VERSION).concat(i.path));const o=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(i.params)||r.ACCESS_TOKEN;return r.REQUIRE_ACCESS_TOKEN&&o&&this._skuToken&&i.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(i,o)}canonicalizeTileURL(t,e){const n=xt(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let i="mapbox://";n.path.match(/^\/raster\/v1\//)?i+="raster/".concat(n.path.replace("/".concat(r.RASTER_URL_PREFIX,"/"),"")):i+="tiles/".concat(n.path.replace("/".concat(r.TILE_URL_VERSION,"/"),""));let s=n.params;return e&&(s=s.filter((t=>!t.match(/^access_token=/)))),s.length&&(i+="?".concat(s.join("&"))),i}canonicalizeTileset(t,e){const n=!!e&&gt(e),i=[];for(const r of t.tiles||[])yt(r)?i.push(this.canonicalizeTileURL(r,n)):i.push(r);return i}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",i=xt(r.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==i.path&&(t.path="".concat(i.path).concat(t.path)),!r.REQUIRE_ACCESS_TOKEN)return It(t);if(e=e||r.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push("access_token=".concat(e||"")),It(t)}},t.ResourceType=st,t.SegmentVector=Ia,t.SourceCache=nm,t.StencilMode=Qf,t.StructArrayLayout1ui2=Ro,t.StructArrayLayout2f1f2i16=vo,t.StructArrayLayout2i4=so,t.StructArrayLayout2ui4=Co,t.StructArrayLayout3f12=Eo,t.StructArrayLayout3ui6=xo,t.StructArrayLayout4i8=ao,t.StructArrayLayout5f20=So,t.Texture=Ef,t.Tile=Lf,t.Transitionable=Vs,t.Uniform1f=ta,t.Uniform1i=class extends $o{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},t.Uniform2f=class extends $o{constructor(t){super(t),this.current=[0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},t.Uniform3f=class extends $o{constructor(t){super(t),this.current=[0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},t.Uniform4f=ea,t.UniformColor=na,t.UniformMatrix2f=class extends $o{constructor(t){super(t),this.current=sa}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let i=0;i<4;i++)if(n[i]!==this.current[i]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},t.UniformMatrix3f=class extends $o{constructor(t){super(t),this.current=ra}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let i=0;i<9;i++)if(n[i]!==this.current[i]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},t.UniformMatrix4f=class extends $o{constructor(t){super(t),this.current=ia}set(t,e,n){if(this.fetchUniformLocation(t,e)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},t.UnwrappedTileID=jc,t.ValidationError=Qi,t.VectorTileFeature=bc,t.VectorTileWorkerSource=class extends Zt{constructor(t,e,n,i,r){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||mm,this.loading={},this.loaded={},this.deduped=new fm(t.scheduler),this.isSpriteLoaded=i,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,i=t&&t.request,r=i&&i.collectResourceTiming,s=this.loading[n]=new pm(t);s.abort=this.loadVectorData(t,((o,a)=>{const l=!this.loading[n];if(delete this.loading[n],l||o||!a)return s.status="done",l||(this.loaded[n]=s),e(o);const h=a.rawData,c={};a.expires&&(c.expires=a.expires),a.cacheControl&&(c.cacheControl=a.cacheControl),s.vectorTile=a.vectorTile||new Ic(new wu(h));const u=()=>{s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const s={};if(r){const t=Bt(i);t.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,R({rawTileData:h.slice(0)},n,c,s))}))};this.isSpriteLoaded?u():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(u,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):u()})),this.loaded=this.loaded||{},this.loaded[n]=s}))}reloadTile(t,e){const n=this.loaded,i=t.uid,r=this;if(n&&n[i]){const s=n[i];s.showCollisionBoxes=t.showCollisionBoxes,s.enableTerrain=!!t.enableTerrain,s.projection=t.projection,s.tileTransform=Md(t.tileID.canonical,t.projection);const o=(t,n)=>{const i=s.reloadCallback;i&&(delete s.reloadCallback,s.parse(s.vectorTile,r.layerIndex,this.availableImages,r.actor,i)),e(t,n)};"parsing"===s.status?s.reloadCallback=o:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}abortTile(t,e){const n=t.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()}},t.WritingMode=$u,t.add=Ml,t.addDynamicAttributes=of,t.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8];return t[0]=o*c-a*h,t[1]=r*h-i*c,t[2]=i*a-r*o,t[3]=a*l-s*c,t[4]=n*c-r*l,t[5]=r*s-n*a,t[6]=s*h-o*l,t[7]=i*l-n*h,t[8]=n*o-i*s,t},t.asyncAll=A,t.bezier=x,t.bindAll=F,t.boundsAttributes=Pf,t.bufferConvexPolygon=function(t,e){const n=[];for(let i=0;i<t.length;i++){const r=S(i-1,-1,t.length-1),s=S(i+1,-1,t.length-1),o=t[i],a=t[s],l=t[r].sub(o).unit(),h=a.sub(o).unit(),c=h.angleWithSep(l.x,l.y),u=l.add(h).unit().mult(-1*e/Math.sin(c/2));n.push(o.add(u))}return n},t.cacheEntryPossiblyAdded=function(t){rt++,rt>tt&&(t.getActor().send("enforceCacheSizeLimit",$),rt=0)},t.calculateGlobeLabelMatrix=function(t,e){const{x:n,y:i}=t.point,r=wd(n,i,t.worldSize/t._pixelsPerMercatorPixel,0,0);return El(r,r,bd(ud(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:n}=t.point,{lng:i,lat:r}=t._center;return wd(e,n,t.worldSize,i,r)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,n=e/Na(1,t.center.lat),i=vl(new Float64Array(16));return xl(i,i,[t.point.x,t.point.y,0]),Il(i,i,[n,n,e]),Float32Array.from(i)},t.circumferenceAtLatitude=Ra,t.clamp=b,t.clearTileCache=function(t){if(!et())return;const n=e.caches.delete(K);t&&n.catch(t).then((()=>t()))},t.clipLine=xp,t.clone=function(t){var e=new gl(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=B,t.collisionCircleLayout=fu,t.config=r,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new gl(16);return gl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=yl,t.createExpression=Wi,t.createLayout=io,t.createStyleLayer=function(t){return"custom"===t.type?new yf(t):new Tf[t.type](t)},t.cross=Hl,t.degToRad=_,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=Gl,t.earthRadius=Sa,t.ease=I,t.easeCubicInOut=E,t.ecefToLatLng=function(t){let[e,n,i]=t;const r=Math.hypot(e,n,i),s=Math.atan2(e,i),o=.5*Math.PI-Math.acos(-n/r);return new Aa(v(s),v(o))},t.emitValidationErrors=Ur,t.endsWith=L,t.enforceCacheSizeLimit=function(t){nt(),Q&&Q.then((e=>{e.keys().then((n=>{for(let i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=_u,t.evaluateSizeForZoom=vu,t.evaluateVariableOffset=Gp,t.evented=Ls,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=jt,t.exported$1=s,t.extend=R,t.extend$1=Qt,t.fillExtrusionHeightLift=Uc,t.filterObject=U,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,h=n*o,c=i*o,u=i*a,p=r*o,d=r*a,f=r*l,m=s*o,g=s*a,y=s*l;return t[0]=1-u-f,t[1]=c+y,t[2]=p-g,t[3]=0,t[4]=c-y,t[5]=1-h-f,t[6]=d+m,t[7]=0,t[8]=p+g,t[9]=d-m,t[10]=1-h-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=Sl,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return T[e]},t.getAABBPointSquareDist=function(t,e,n){let i=0;for(let r=0;r<2;++r){const s=n?n[r]:0;t[r]>s&&(i+=(t[r]-s)*(t[r]-s)),e[r]<s&&(i+=(s-e[r])*(s-e[r]))}return i},t.getAnchorAlignment=cp,t.getAnchorJustification=Vp,t.getBounds=function(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(const s of t)e=Math.min(e,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x),r=Math.max(r,s.y);return{min:new f(e,n),max:new f(i,r)}},t.getColumn=Z,t.getGridMatrix=function(t,e,n,i){const r=e.getNorth(),s=e.getSouth(),o=e.getWest(),a=e.getEast(),l=1<<t.z,h=a-o,c=r-s,u=h/id,p=-c/rd[n],d=[0,u,0,p,0,0,r,o,0];if(t.z>0){const t=180/i;_l(d,d,[t/h+1,0,0,0,t/c+1,0,-.5*t/u,.5*t/p,1])}return d[2]=l,d[5]=t.x,d[8]=t.y,d},t.getImage=ft,t.getJSON=function(t,e){return lt(R(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){const e=80.051129;t=b(t,-80.051129,e)/e*90;const n=Math.pow(Math.abs(Math.sin(_(t))),3);return Math.round(n*(rd.length-1))},t.getMapSessionAPI=Mt,t.getPerformanceMeasurement=Bt,t.getProjection=tf,t.getRTLTextPluginStatus=ks,t.getReferrer=at,t.getTilePoint=function(t,e){let{x:n,y:i}=e;return new f(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*t.scale-t.x)*ba,(i*t.scale-t.y)*ba)},t.getTileVec3=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Nl(((e.x-n)*t.scale-t.x)*ba,(e.y*t.scale-t.y)*ba,Fa(e.z,e.y))},t.getVideo=function(t,n){const i=e.document.createElement("video");i.muted=!0,i.onloadstart=function(){n(null,i)};for(let r=0;r<t.length;r++){const n=e.document.createElement("source");ct(t[r])||(i.crossOrigin="Anonymous"),n.src=t[r],i.appendChild(n)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],n=vl(new Float64Array(16));return El(n,t.pixelMatrix,t.globeMatrix),Vl(e,e,n),new f(e[0],e[1])},t.globeDenormalizeECEF=bd,t.globeECEFOrigin=function(t,e){const n=[0,0,0];return Vl(n,n,Id(ud(e.canonical))),Vl(n,n,t),n},t.globeNormalizeECEF=Id,t.globePixelsToTileUnits=function(t,e){return ba/(512*Math.pow(2,t))*Ed(ud(e))},t.globePoleMatrixForTile=function(t,e,n){const i=vl(new Float64Array(16)),r=(e/(1<<t)-.5)*Math.PI*2;return wl(i,n.globeMatrix,r),Float32Array.from(i)},t.globeTileBounds=ud,t.globeTiltAtLngLat=Ad,t.globeToMercatorTransition=Sd,t.globeUseCustomAntiAliasing=function(t,e,n){const i=Sd(n.zoom),r=t.style.map._antialias,s=!!e.extStandardDerivatives,o=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===i&&!r&&!o&&s},t.identity=vl,t.identity$1=$l,t.invert=Tl,t.isFullscreen=function(){return!!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=Cd,t.isMapAuthenticated=function(t){return Pt.has(t)},t.isMapboxURL=gt,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!q(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Pa,t.latLngToECEF=vd,t.len=Xl,t.length=Ol,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=Ma,t.loadVectorTile=mm,t.makeRequest=lt,t.mapValue=function(t,e,n,i,r){return b((t-e)/(n-e)*(r-i)+i,i,r)},t.mercatorScale=ka,t.mercatorXfromLng=Da,t.mercatorYfromLat=Oa,t.mercatorZfromAltitude=Na,t.mul=Cl,t.mul$1=ql,t.multiply=El,t.multiply$1=_l,t.multiply$2=Fl,t.nextPowerOfTwo=M,t.normalize=zl,t.normalize$1=nh,t.normalize$2=Kl,t.number=Cn,t.ortho=function(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),h=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(o+s)*h,t[15]=1,t},t.pbf=wu,t.perspective=function(t,e,n,i,r){var s,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){const n={};for(let i=0;i<e.length;i++){const r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=Bs,t.pointGeometry=f,t.polesInViewport=function(t){const e=vl(new Float64Array(16));El(e,t.pixelMatrix,t.globeMatrix);const n=[0,sd,0],i=[0,od,0];return Vl(n,n,e),Vl(i,i,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!Cd(t,new Aa(t.center.lat,90)),i[0]>0&&i[0]<=t.width&&i[1]>0&&i[1]<=t.height&&!Cd(t,new Aa(t.center.lat,-90))]},t.polygonContainsPoint=ol,t.polygonIntersectsBox=al,t.polygonIntersectsPolygon=Qa,t.polygonizeBounds=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=new f(n,n),s=t.sub(r),o=e.add(r),a=[s,new f(o.x,s.y),o,new f(s.x,o.y)];return i&&a.push(s.clone()),a},t.posAttributes=td,t.postMapLoadEvent=Rt,t.postPerformanceEvent=Ot,t.postTurnstileEvent=At,t.potpack=Ku,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=v,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Ns,pluginURL:Ms}),Ls.on("pluginStateChange",t),t},t.removeAuthState=function(t){Pt.delete(t)},t.renderColorRamp=vh,t.resample=za,t.rotateX=bl,t.rotateX$1=th,t.rotateY=wl,t.rotateY$1=eh,t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],h=e[4],c=e[5],u=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+h*i,t[1]=o*r+c*i,t[2]=a*r+u*i,t[3]=l*r+p*i,t[4]=h*r-s*i,t[5]=c*r-o*i,t[6]=u*r-a*i,t[7]=p*r-l*i,t},t.rotateZ$1=function(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t},t.scale=Il,t.scale$1=Zl,t.scale$2=Ul,t.scaleAndAdd=Bl,t.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},t.setCacheLimits=function(t,e){$=t,tt=e},t.setColumn=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},t.setRTLTextPlugin=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ns===Cs||Ns===Rs||Ns===Ds)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ms=jt.resolveURL(t),Ns=Cs,Os=e,Fs(),n||Us()},t.smoothstep=w,t.spec=Kt,t.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},t.storeAuthState=function(t,e){e?Pt.add(t):Pt.delete(t)},t.sub=Yl,t.subtract=Pl,t.symbolSize=Tu,t.tileAABB=function(t,e,n,i,r,s,o,a,l){if("globe"===l.name)return md(t,e,new Vc(n,i,r));const h=Md({z:n,x:i,y:r},l);return new oh([(s+h.x/h.scale)*e,e*(h.y/h.scale),o],[(s+h.x2/h.scale)*e,e*(h.y2/h.scale),a])},t.tileCornersToBounds=gd,t.tileTransform=Md,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t},t.transformMat4=Vl,t.transformMat4$1=Ql,t.transformQuat=jl,t.transitionTileAABBinECEF=dd,t.translate=xl,t.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=Ps,t.uniqueId=O,t.updateGlobeVertexNormal=function(t,e,n,i,r){const s=5*e+2;t.float32[s+0]=n,t.float32[s+1]=i,t.float32[s+2]=r},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(n,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),e},t.validateFilter=t=>kr(_r(t)),t.validateFog=t=>kr(Dr(t)),t.validateLayer=t=>kr(Ir(t)),t.validateLight=t=>kr(Cr(t)),t.validateSource=t=>kr(Sr(t)),t.validateStyle=Pr,t.validateTerrain=t=>kr(Rr(t)),t.values=C,t.vectorTile=uc,t.version=n,t.warnOnce=G,t.window=e,t.wrap=S})),i(["./shared"],(function(t){function e(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const i of t)n+="".concat(e(i),",");return"".concat(n,"]")}let n="{";for(const i of Object.keys(t).sort())n+="".concat(i,":").concat(e(t[i]),",");return"".concat(n,"}")}function n(n){let i="";for(const r of t.refProperties)i+="/".concat(e(n[r]));return i}class i{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,i){for(const n of e)this._layerConfigs[n.id]=n,(this._layers[n.id]=t.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const t of i)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const i={};for(let s=0;s<t.length;s++){const r=e&&e[t[s].id]||n(t[s]);e&&(e[t[s].id]=r);let o=i[r];o||(o=i[r]=[]),o.push(t[s])}const r=[];for(const n in i)r.push(i[n]);return r}(t.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const s=n.sourceLayer||"_geojsonTileLayer";let o=r[s];o||(o=r[s]=[]),o.push(e)}}}class r{loadTile(e,n){const{uid:i,encoding:r,rawImageData:s,padding:o,buildQuadTree:a}=e,l=t.window.ImageBitmap&&s instanceof t.window.ImageBitmap?this.getImageData(s,o):s;n(null,new t.DEMData(i,l,r,o<1,a))}getImageData(t,e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const n=this.offscreenCanvasContext.getImageData(-e,-e,t.width+2*e,t.height+2*e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}var s=function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)o(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)o(e.coordinates[i],n);return e};function o(t,e){if(0!==t.length){a(t[0],e);for(var n=1;n<t.length;n++)a(t[n],!e)}}function a(t,e){for(var n=0,i=0,r=0,s=t.length,o=s-1;r<s;o=r++){var a=(t[r][0]-t[o][0])*(t[o][1]+t[r][1]),l=n+a;i+=Math.abs(n)>=Math.abs(a)?n-l+a:a-l+n,n=l}n+i>=0!=!!e&&t.reverse()}const l=t.VectorTileFeature.prototype.toGeoJSON;class h{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const i=[];for(const e of n)i.push(new t.pointGeometry(e[0],e[1]));e.push(i)}return e}}toGeoJSON(t,e,n){return l.call(this,t,e,n)}}class c{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new h(this._features[t])}}var u={exports:{}},p=t.pointGeometry,d=t.vectorTile.VectorTileFeature,f=m;function m(t,e){this.options=e||{},this.features=t,this.length=t.length}function g(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}m.prototype.feature=function(t){return new g(this.features[t],this.options.extent)},g.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],i=[],r=0;r<n.length;r++)i.push(new p(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.length;a++){var l=o[a];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[e,i,n,r]},g.prototype.toGeoJSON=d.prototype.toGeoJSON;var y=t.pbf,_=f;function v(t){var e=new y;return function(t,e){for(var n in t.layers)e.writeMessage(3,T,t.layers[n])}(t,e),e.finish()}function T(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,E,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var s=i.values;for(n=0;n<s.length;n++)e.writeMessage(4,S,s[n])}function E(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,x,t),e.writeVarintField(3,n.type),e.writeMessage(4,w,n)}function x(t,e){var n=t.feature,i=t.keys,r=t.values,s=t.keycache,o=t.valuecache;for(var a in n.properties){var l=n.properties[a],h=s[a];if(null!==l){void 0===h&&(i.push(a),s[a]=h=i.length-1),e.writeVarint(h);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var u=c+":"+l,p=o[u];void 0===p&&(r.push(l),o[u]=p=r.length-1),e.writeVarint(p)}}}function I(t,e){return(e<<3)+(7&t)}function b(t){return t<<1^t>>31}function w(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,s=0,o=n.length,a=0;a<o;a++){var l=n[a],h=1;1===i&&(h=l.length),e.writeVarint(I(1,h));for(var c=3===i?l.length-1:l.length,u=0;u<c;u++){1===u&&1!==i&&e.writeVarint(I(2,c-1));var p=l[u].x-r,d=l[u].y-s;e.writeVarint(b(p)),e.writeVarint(b(d)),r+=p,s+=d}3===i&&e.writeVarint(I(7,1))}}function S(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function A(t,e,n,i,r,s){if(r-i<=n)return;const o=i+r>>1;C(t,e,o,i,r,s%2),A(t,e,n,i,o-1,s+1),A(t,e,n,o+1,r,s+1)}function C(t,e,n,i,r,s){for(;r>i;){if(r-i>600){const o=r-i+1,a=n-i+1,l=Math.log(o),h=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*h*(o-h)/o)*(a-o/2<0?-1:1);C(t,e,n,Math.max(i,Math.floor(n-a*h/o+c)),Math.min(r,Math.floor(n+(o-a)*h/o+c)),s)}const o=e[2*n+s];let a=i,l=r;for(R(t,e,i,n),e[2*r+s]>o&&R(t,e,i,r);a<l;){for(R(t,e,a,l),a++,l--;e[2*a+s]<o;)a++;for(;e[2*l+s]>o;)l--}e[2*i+s]===o?R(t,e,i,l):(l++,R(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function R(t,e,n,i){D(t,n,i),D(e,2*n,2*i),D(e,2*n+1,2*i+1)}function D(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function O(t,e,n,i){const r=t-n,s=e-i;return r*r+s*s}u.exports=v,u.exports.fromVectorTileJs=v,u.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new _(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return v({layers:n})},u.exports.GeoJSONWrapper=_;const N=t=>t[0],M=t=>t[1];class P{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;this.nodeSize=i,this.points=t;const s=t.length<65536?Uint16Array:Uint32Array,o=this.ids=new s(t.length),a=this.coords=new r(2*t.length);for(let l=0;l<t.length;l++)o[l]=l,a[2*l]=e(t[l]),a[2*l+1]=n(t[l]);A(o,a,i,0,o.length-1,0)}range(t,e,n,i){return function(t,e,n,i,r,s,o){const a=[0,t.length-1,0],l=[];let h,c;for(;a.length;){const u=a.pop(),p=a.pop(),d=a.pop();if(p-d<=o){for(let o=d;o<=p;o++)h=e[2*o],c=e[2*o+1],h>=n&&h<=r&&c>=i&&c<=s&&l.push(t[o]);continue}const f=Math.floor((d+p)/2);h=e[2*f],c=e[2*f+1],h>=n&&h<=r&&c>=i&&c<=s&&l.push(t[f]);const m=(u+1)%2;(0===u?n<=h:i<=c)&&(a.push(d),a.push(f-1),a.push(m)),(0===u?r>=h:s>=c)&&(a.push(f+1),a.push(p),a.push(m))}return l}(this.ids,this.coords,t,e,n,i,this.nodeSize)}within(t,e,n){return function(t,e,n,i,r,s){const o=[0,t.length-1,0],a=[],l=r*r;for(;o.length;){const h=o.pop(),c=o.pop(),u=o.pop();if(c-u<=s){for(let r=u;r<=c;r++)O(e[2*r],e[2*r+1],n,i)<=l&&a.push(t[r]);continue}const p=Math.floor((u+c)/2),d=e[2*p],f=e[2*p+1];O(d,f,n,i)<=l&&a.push(t[p]);const m=(h+1)%2;(0===h?n-r<=d:i-r<=f)&&(o.push(u),o.push(p-1),o.push(m)),(0===h?n+r>=d:i+r>=f)&&(o.push(p+1),o.push(c),o.push(m))}return a}(this.ids,this.coords,t,e,n,this.nodeSize)}}const F={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},L=Math.fround||(k=new Float32Array(1),t=>(k[0]=+t,k[0]));var k;class U{constructor(t){this.options=Y(Object.create(F),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:i,nodeSize:r}=this.options;e&&console.time("total time");const s="prepare ".concat(t.length," points");e&&console.time(s),this.points=t;let o=[];for(let a=0;a<t.length;a++)t[a].geometry&&o.push(z(t[a],a));this.trees[i+1]=new P(o,q,X,r,Float32Array),e&&console.timeEnd(s);for(let a=i;a>=n;a--){const t=+Date.now();o=this._cluster(o,a),this.trees[a]=new P(o,q,X,r,Float32Array),e&&console.log("z%d: %d clusters in %dms",a,o.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,s],e),o=this.getClusters([-180,i,r,s],e);return t.concat(o)}const o=this.trees[this._limitZoom(e)],a=o.range(V(n),j(s),V(r),j(i)),l=[];for(const h of a){const t=o.points[h];l.push(t.numPoints?G(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const s=r.points[e];if(!s)throw new Error(i);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=r.within(s.x,s.y,o),l=[];for(const h of a){const e=r.points[h];e.parentId===t&&l.push(e.numPoints?G(e):this.points[e.index])}if(0===l.length)throw new Error(i);return l}getLeaves(t,e,n){const i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:s,radius:o}=this.options,a=o/s,l=(n-a)/r,h=(n+1+a)/r,c={features:[]};return this._addTileFeatures(i.range((e-a)/r,l,(e+1+a)/r,h),i.points,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-a/r,l,1,h),i.points,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,l,a/r,h),i.points,-1,n,r,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const s=this.getChildren(e);for(const o of s){const e=o.properties;if(e&&e.cluster?r+e.point_count<=i?r+=e.point_count:r=this._appendLeaves(t,e.cluster_id,n,i,r):r<i?r++:t.push(o),t.length===n)break}return r}_addTileFeatures(t,e,n,i,r,s){for(const o of t){const t=e[o],a=t.numPoints;let l,h,c;if(a)l=H(t),h=t.x,c=t.y;else{const e=this.points[t.index];l=e.properties,h=V(e.geometry.coordinates[0]),c=j(e.geometry.coordinates[1])}const u={type:1,geometry:[[Math.round(this.options.extent*(h*r-n)),Math.round(this.options.extent*(c*r-i))]],tags:l};let p;a?p=t.id:this.options.generateId?p=t.index:this.points[t.index].id&&(p=this.points[t.index].id),void 0!==p&&(u.id=p),s.features.push(u)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:i,extent:r,reduce:s,minPoints:o}=this.options,a=i/(r*Math.pow(2,e));for(let l=0;l<t.length;l++){const i=t[l];if(i.zoom<=e)continue;i.zoom=e;const r=this.trees[e+1],h=r.within(i.x,i.y,a),c=i.numPoints||1;let u=c;for(const t of h){const n=r.points[t];n.zoom>e&&(u+=n.numPoints||1)}if(u>c&&u>=o){let t=i.x*c,o=i.y*c,a=s&&c>1?this._map(i,!0):null;const p=(l<<5)+(e+1)+this.points.length;for(const n of h){const l=r.points[n];if(l.zoom<=e)continue;l.zoom=e;const h=l.numPoints||1;t+=l.x*h,o+=l.y*h,l.parentId=p,s&&(a||(a=this._map(i,!0)),s(a,this._map(l)))}i.parentId=p,n.push(B(t/u,o/u,p,u,a))}else if(n.push(i),u>1)for(const t of h){const i=r.points[t];i.zoom<=e||(i.zoom=e,n.push(i))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?Y({},t.properties):t.properties;const n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?Y({},i):i}}function B(t,e,n,i,r){return{x:L(t),y:L(e),zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function z(t,e){const[n,i]=t.geometry.coordinates;return{x:L(V(n)),y:L(j(i)),zoom:1/0,index:e,parentId:-1}}function G(t){return{type:"Feature",id:t.id,properties:H(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),W(t.y)]}};var e}function H(t){const e=t.numPoints,n=e>=1e4?"".concat(Math.round(e/1e3),"k"):e>=1e3?Math.round(e/100)/10+"k":e;return Y(Y({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function V(t){return t/360+.5}function j(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function W(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function Y(t,e){for(const n in e)t[n]=e[n];return t}function q(t){return t.x}function X(t){return t.y}function Z(t,e,n,i){for(var r,s=i,o=n-e>>1,a=n-e,l=t[e],h=t[e+1],c=t[n],u=t[n+1],p=e+3;p<n;p+=3){var d=K(t[p],t[p+1],l,h,c,u);if(d>s)r=p,s=d;else if(d===s){var f=Math.abs(p-o);f<a&&(r=p,a=f)}}s>i&&(r-e>3&&Z(t,e,r,i),t[r+2]=s,n-r>3&&Z(t,r,n,i))}function K(t,e,n,i,r,s){var o=r-n,a=s-i;if(0!==o||0!==a){var l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return(o=t-n)*o+(a=e-i)*a}function Q(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)J(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)J(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)J(t,e[i][r])}(r),r}function J(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function $(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,s=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===s)tt(r,a);else if("MultiPoint"===s)for(var h=0;h<r.length;h++)tt(r[h],a);else if("LineString"===s)et(r,a,o,!1);else if("MultiLineString"===s){if(n.lineMetrics){for(h=0;h<r.length;h++)et(r[h],a=[],o,!1),t.push(Q(l,"LineString",a,e.properties));return}nt(r,a,o,!1)}else if("Polygon"===s)nt(r,a,o,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(h=0;h<e.geometry.geometries.length;h++)$(t,{id:l,geometry:e.geometry.geometries[h],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(h=0;h<r.length;h++){var c=[];nt(r[h],c,o,!0),a.push(c)}}t.push(Q(l,s,a,e.properties))}}function tt(t,e){e.push(it(t[0])),e.push(rt(t[1])),e.push(0)}function et(t,e,n,i){for(var r,s,o=0,a=0;a<t.length;a++){var l=it(t[a][0]),h=rt(t[a][1]);e.push(l),e.push(h),e.push(0),a>0&&(o+=i?(r*h-l*s)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(h-s,2))),r=l,s=h}var c=e.length-3;e[2]=1,Z(e,0,c,n),e[c+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function nt(t,e,n,i){for(var r=0;r<t.length;r++){var s=[];et(t[r],s,n,i),e.push(s)}}function it(t){return t/360+.5}function rt(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function st(t,e,n,i,r,s,o,a){if(i/=e,s>=(n/=e)&&o<i)return t;if(o<n||s>=i)return null;for(var l=[],h=0;h<t.length;h++){var c=t[h],u=c.geometry,p=c.type,d=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(d>=n&&f<i)l.push(c);else if(!(f<n||d>=i)){var m=[];if("Point"===p||"MultiPoint"===p)ot(u,m,n,i,r);else if("LineString"===p)at(u,m,n,i,r,!1,a.lineMetrics);else if("MultiLineString"===p)ht(u,m,n,i,r,!1);else if("Polygon"===p)ht(u,m,n,i,r,!0);else if("MultiPolygon"===p)for(var g=0;g<u.length;g++){var y=[];ht(u[g],y,n,i,r,!0),y.length&&m.push(y)}if(m.length){if(a.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push(Q(c.id,p,m[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(Q(c.id,p,m,c.tags))}}}return l.length?l:null}function ot(t,e,n,i,r){for(var s=0;s<t.length;s+=3){var o=t[s+r];o>=n&&o<=i&&(e.push(t[s]),e.push(t[s+1]),e.push(t[s+2]))}}function at(t,e,n,i,r,s,o){for(var a,l,h=lt(t),c=0===r?ut:pt,u=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],g=t[p+3],y=t[p+4],_=0===r?d:f,v=0===r?g:y,T=!1;o&&(a=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-y,2))),_<n?v>n&&(l=c(h,d,f,g,y,n),o&&(h.start=u+a*l)):_>i?v<i&&(l=c(h,d,f,g,y,i),o&&(h.start=u+a*l)):ct(h,d,f,m),v<n&&_>=n&&(l=c(h,d,f,g,y,n),T=!0),v>i&&_<=i&&(l=c(h,d,f,g,y,i),T=!0),!s&&T&&(o&&(h.end=u+a*l),e.push(h),h=lt(t)),o&&(u+=a)}var E=t.length-3;d=t[E],f=t[E+1],m=t[E+2],(_=0===r?d:f)>=n&&_<=i&&ct(h,d,f,m),E=h.length-3,s&&E>=3&&(h[E]!==h[0]||h[E+1]!==h[1])&&ct(h,h[0],h[1],h[2]),h.length&&e.push(h)}function lt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ht(t,e,n,i,r,s){for(var o=0;o<t.length;o++)at(t[o],e,n,i,r,s,!1)}function ct(t,e,n,i){t.push(e),t.push(n),t.push(i)}function ut(t,e,n,i,r,s){var o=(s-e)/(i-e);return t.push(s),t.push(n+(r-n)*o),t.push(1),o}function pt(t,e,n,i,r,s){var o=(s-n)/(r-n);return t.push(e+(i-e)*o),t.push(s),t.push(1),o}function dt(t,e){for(var n=[],i=0;i<t.length;i++){var r,s=t[i],o=s.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)r=ft(s.geometry,e);else if("MultiLineString"===o||"Polygon"===o){r=[];for(var a=0;a<s.geometry.length;a++)r.push(ft(s.geometry[a],e))}else if("MultiPolygon"===o)for(r=[],a=0;a<s.geometry.length;a++){for(var l=[],h=0;h<s.geometry[a].length;h++)l.push(ft(s.geometry[a][h],e));r.push(l)}n.push(Q(s.id,o,r,s.tags))}return n}function ft(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function mt(t,e){if(t.transformed)return t;var n,i,r,s=1<<t.z,o=t.x,a=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],h=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<h.length;i+=2)l.geometry.push(gt(h[i],h[i+1],e,s,o,a));else for(i=0;i<h.length;i++){var u=[];for(r=0;r<h[i].length;r+=2)u.push(gt(h[i][r],h[i][r+1],e,s,o,a));l.geometry.push(u)}}return t.transformed=!0,t}function gt(t,e,n,i,r,s){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-s))]}function yt(t,e,n,i,r){for(var s=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){o.numFeatures++,_t(o,t[a],s,r);var l=t[a].minX,h=t[a].minY,c=t[a].maxX,u=t[a].maxY;l<o.minX&&(o.minX=l),h<o.minY&&(o.minY=h),c>o.maxX&&(o.maxX=c),u>o.maxY&&(o.maxY=u)}return o}function _t(t,e,n,i){var r=e.geometry,s=e.type,o=[];if("Point"===s||"MultiPoint"===s)for(var a=0;a<r.length;a+=3)o.push(r[a]),o.push(r[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===s)vt(o,r,t,n,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(a=0;a<r.length;a++)vt(o,r[a],t,n,"Polygon"===s,0===a);else if("MultiPolygon"===s)for(var l=0;l<r.length;l++){var h=r[l];for(a=0;a<h.length;a++)vt(o,h[a],t,n,!0,0===a)}if(o.length){var c=e.tags||null;if("LineString"===s&&i.lineMetrics){for(var u in c={},e.tags)c[u]=e.tags[u];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var p={geometry:o,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function vt(t,e,n,i,r,s){var o=i*i;if(i>0&&e.size<(r?o:i))n.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>o)&&(n.numSimplified++,a.push(e[l]),a.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,s=r-2;i<r;s=i,i+=2)n+=(t[i]-t[s])*(t[i+1]+t[s+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var o=t[i],a=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=o,t[r-1-i]=a}}(a,s),t.push(a)}}function Tt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)$(n,t.features[i],e,i);else $(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=function(t,e){var n=e.buffer/e.extent,i=t,r=st(t,1,-1-n,n,0,-1,2,e),s=st(t,1,1-n,2+n,0,-1,2,e);return(r||s)&&(i=st(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=dt(r,1).concat(i)),s&&(i=i.concat(dt(s,-1)))),i}(i,e),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Et(t,e,n){return 32*((1<<t)*n+e)+t}function xt(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);const r=new c(i.features);let s=u.exports(r);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),e(null,{vectorTile:r,rawData:s.buffer})}Tt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Tt.prototype.splitTile=function(t,e,n,i,r,s,o){for(var a=[t,e,n,i],l=this.options,h=l.debug;a.length;){i=a.pop(),n=a.pop(),e=a.pop(),t=a.pop();var c=1<<e,u=Et(e,n,i),p=this.tiles[u];if(!p&&(h>1&&console.time("creation"),p=this.tiles[u]=yt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(s/f)||i!==Math.floor(o/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){h>1&&console.time("clipping");var m,g,y,_,v,T,E=.5*l.buffer/l.extent,x=.5-E,I=.5+E,b=1+E;m=g=y=_=null,v=st(t,c,n-E,n+I,0,p.minX,p.maxX,l),T=st(t,c,n+x,n+b,0,p.minX,p.maxX,l),t=null,v&&(m=st(v,c,i-E,i+I,1,p.minY,p.maxY,l),g=st(v,c,i+x,i+b,1,p.minY,p.maxY,l),v=null),T&&(y=st(T,c,i-E,i+I,1,p.minY,p.maxY,l),_=st(T,c,i+x,i+b,1,p.minY,p.maxY,l),T=null),h>1&&console.timeEnd("clipping"),a.push(m||[],e+1,2*n,2*i),a.push(g||[],e+1,2*n,2*i+1),a.push(y||[],e+1,2*n+1,2*i),a.push(_||[],e+1,2*n+1,2*i+1)}}},Tt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,s=i.debug;if(t<0||t>24)return null;var o=1<<t,a=Et(t,e=(e%o+o)%o,n);if(this.tiles[a])return mt(this.tiles[a],r);s>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,h=t,c=e,u=n;!l&&h>0;)h--,c=Math.floor(c/2),u=Math.floor(u/2),l=this.tiles[Et(h,c,u)];return l&&l.source?(s>1&&console.log("found parent tile z%d-%d-%d",h,c,u),s>1&&console.time("drilling down"),this.splitTile(l.source,h,c,u,t,e,n),s>1&&console.timeEnd("drilling down"),this.tiles[a]?mt(this.tiles[a],r):null):null};class It extends t.VectorTileWorkerSource{constructor(t,e,n,i,r){super(t,e,n,i,xt),r&&(this.loadGeoJSON=r)}loadData(e,n){const i=e&&e.request,r=i&&i.collectResourceTiming;this.loadGeoJSON(e,((o,a)=>{if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));{s(a,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));const i=a.features.filter((t=>n.value.evaluate({zoom:0},t)));a={type:"FeatureCollection",features:i}}this._geoJSONIndex=e.cluster?new U(function(e){let{superclusterOptions:n,clusterProperties:i}=e;if(!i||!n)return n;const r={},s={},o={accumulated:null,zoom:0},a={properties:null},l=Object.keys(i);for(const h of l){const[e,n]=i[h],o=t.createExpression(n),a=t.createExpression("string"==typeof e?[e,["accumulated"],["get",h]]:e);r[h]=o.value,s[h]=a.value}return n.map=t=>{a.properties=t;const e={};for(const n of l)e[n]=r[n].evaluate(o,a);return e},n.reduce=(t,e)=>{a.properties=e;for(const n of l)o.accumulated=t[n],t[n]=s[n].evaluate(o,a)},n}(e)).load(a.features):function(t,e){return new Tt(t,e)}(a,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(r){const n=t.getPerformanceMeasurement(i);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class bt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:It},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}clearCaches(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],n()}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded[e]=n;for(const i in this.workerSources[e]){const r=this.workerSources[e][i];for(const e in r)r[e]instanceof t.VectorTileWorkerSource&&(r[e].isSpriteLoaded=n,r[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const i in this.workerSources[t]){const n=this.workerSources[t][i];for(const t in n)n[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setProjection(e,n){this.projections[e]=t.getProjection(n)}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,i){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).loadTile(r,i)}loadDEMTile(e,n,i){const r=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(r,i)}reloadTile(e,n,i){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).reloadTile(r,i)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,i){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();i(n?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(e)),n)}}catch(t){i(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const i={send:(e,n,i,r,s,o)=>{this.actor.send(e,n,i,t,s,o)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new r),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(t,e,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new bt(self)),bt})),i(["./shared"],(function(t){function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(!e(t[i],n[i]))return!1;return!0}return t===n}var n=i;function i(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};function s(e,n,i){const r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r}function o(e,n,i){const r=t.window.document.createElementNS("http://www.w3.org/2000/svg",e);for(const t of Object.keys(n))r.setAttributeNS(null,t,n[t]);return i&&i.appendChild(r),r}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const a=t.window.document&&t.window.document.documentElement.style,l=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let h;function c(){a&&l&&(h=a[l],a[l]="none")}function u(){a&&l&&(a[l]=h)}function p(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",p,!0)}function d(){t.window.addEventListener("click",p,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",p,!0)}),0)}function f(t,e){const n=t.getBoundingClientRect();return y(t,n,e)}function m(t,e){const n=t.getBoundingClientRect(),i=[];for(let r=0;r<e.length;r++)i.push(y(t,n,e[r]));return i}function g(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function y(e,n,i){const r=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.pointGeometry((i.clientX-n.left)*r,(i.clientY-n.top)*r)}function _(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*s-r*i;return o?(t[0]=s*(o=1/o),t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t):null}function v(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class T extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "content" value')))),i=!1),i}_validateStretch(t,e){if(!t)return!0;let n=0;for(const i of t){if(i[0]<n||i[1]<i[0]||e<i[1])return!1;n=i[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const i of t)this.images[i]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const i={};for(const r of e){this.images[r]||this.fire(new t.Event("styleimagemissing",{id:r}));const e=this.images[r];e?i[r]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce('Image "'.concat(r,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}n(null,i)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.potpack(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const s in this.patterns){const{bin:e}=this.patterns[s],n=e.x+1,i=e.y+1,o=this.images[s].data,a=o.width,l=o.height;t.RGBAImage.copy(o,r,{x:0,y:0},{x:n,y:i},{width:a,height:l}),t.RGBAImage.copy(o,r,{x:0,y:l-1},{x:n,y:i-1},{width:a,height:1}),t.RGBAImage.copy(o,r,{x:0,y:0},{x:n,y:i+l},{width:a,height:1}),t.RGBAImage.copy(o,r,{x:a-1,y:0},{x:n-1,y:i},{width:1,height:l}),t.RGBAImage.copy(o,r,{x:0,y:0},{x:n+a,y:i},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];v(t)&&this.updateImage(e,t)}}}const E=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function(e){let[n,i,r]=e;const s=t.degToRad(i+90),o=t.degToRad(r);return{x:n*Math.cos(s)*Math.sin(o),y:n*Math.sin(s)*Math.sin(o),z:n*Math.cos(o),azimuthal:i,polar:r}}(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i),azimuthal:t.number(e.azimuthal,n.azimuthal,i),polar:t.number(e.polar,n.polar,i)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),x="-transition";class I extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(E),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateLight,e,n))for(const i in e){const n=e[i];t.endsWith(i,x)?this._transitionable.setTransition(i.slice(0,-x.length),n):this._transitionable.setValue(i,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const b=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),w="-transition";class S extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(b),this.set(e),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(e){for(const n in e){const i=e[n];t.endsWith(n,w)?this._transitionable.setTransition(n.slice(0,-w.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function A(e,n,i,r){const s=t.smoothstep(45,65,i),[o,a]=C(e,r),l=t.length(n);let h=1-Math.min(1,Math.exp((l-o)/(a-o)*-6));return h*=h*h,h=Math.min(1,1.00747*h),h*s*e.alpha}function C(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const R=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])}),D="-transition";class O extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(R),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const e=this._transform,n="globe"===e.projection.name,i=t.globeToMercatorTransition(e.zoom),r=this.properties.get("range"),s=[.5,3];return{range:n?[t.number(s[0],r[0],i),t.number(s[1],r[1],i)]:r,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateFog,e,n)){for(const n of Object.keys(t.spec.fog))e&&void 0===e[n]&&(e[n]=t.spec.fog[n].default);for(const n in e){const i=e[n];t.endsWith(n,D)?this._transitionable.setTransition(n.slice(0,-D.length),i):this._transitionable.setValue(n,i)}}}getOpacity(e){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,e))*n.a}getOpacityAtLatLng(e,n){return this._transform.projection.supportsFog?function(e,n,i){const r=t.MercatorCoordinate.fromLngLat(n),s=i.elevation?i.elevation.getAtPointOrZero(r):0,o=[r.x,r.y,s];return t.transformMat4(o,o,i.mercatorFogMatrix),A(e,o,i.pitch,i._fov)}(this.state,e,n):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?C(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class N{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const i=this.workerPool.acquire(this.id);for(let t=0;t<i.length;t++){const e=new N.Actor(i[t],n,this.id);e.name="Worker ".concat(t),this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,i){t.asyncAll(this.actors,((t,i)=>{t.send(e,n,i)}),i=i||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function M(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}N.Actor=t.Actor;class P{constructor(t,e,n,i){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}static createFromScreenPoints(e,n){let i,r;if(e instanceof t.pointGeometry||"number"==typeof e[0]){const s=t.pointGeometry.convert(e);i=[s],r=n.isPointAboveHorizon(s)}else{const s=t.pointGeometry.convert(e[0]),o=t.pointGeometry.convert(e[1]);i=[s,o],r=t.polygonizeBounds(s,o).every((t=>n.isPointAboveHorizon(t)))}return new P(i,n.getCameraPoint(),r,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],r=t.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?r[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(r[3]=this.cameraPoint)),t.bufferConvexPolygon(r,e)}bufferedCameraGeometryGlobe(e){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],r=t.polygonizeBounds(n,i,e),s=this.cameraPoint.clone();switch(3*((s.y>n.y)+(s.y>i.y))+((s.x>n.x)+(s.x>i.x))){case 0:r[0]=s,r[4]=s.clone();break;case 1:r.splice(1,0,s);break;case 2:r[1]=s;break;case 3:r.splice(4,0,s);break;case 5:r.splice(2,0,s);break;case 6:r[3]=s;break;case 7:r.splice(3,0,s);break;case 8:r[2]=s}return r}containsTile(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=e.queryPadding/n._pixelsPerMercatorPixel+1,o=i?this._bufferedCameraMercator(s,n):this._bufferedScreenMercator(s,n);let a=e.tileID.wrap+(o.unwrapped?r:0);const l=o.polygon.map((n=>t.getTilePoint(e.tileTransform,n,a)));if(!t.polygonIntersectsBox(l,0,0,t.EXTENT,t.EXTENT))return;a=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?r:0);const h=this.screenGeometryMercator.polygon.map((n=>t.getTileVec3(e.tileTransform,n,a))),c=h.map((e=>new t.pointGeometry(e[0],e[1]))),u=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),p=t.getTileVec3(e.tileTransform,u,a),d=h.map((e=>{const n=t.sub(e,e,p);return t.normalize(n,n),new t.Ray(p,n)})),f=M(e,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:c,tilespaceRays:d,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=t.getBounds(l),m.min.x=t.clamp(m.min.x,0,t.EXTENT),m.min.y=t.clamp(m.min.y,0,t.EXTENT),m.max.x=t.clamp(m.max.x,0,t.EXTENT),m.max.y=t.clamp(m.max.y,0,t.EXTENT),m),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(t,e){const n=k(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let i;return i="globe"===e.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),e):{polygon:this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._screenRaycastCache[n]=i,i}}_bufferedCameraMercator(t,e){const n=k(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let i;return i="globe"===e.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),e):{polygon:this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._cameraRaycastCache[n]=i,i}}_projectAndResample(e,n){const i=function(e,n){const i=t.multiply([],n.pixelMatrix,n.globeMatrix),r=[0,-t.GLOBE_RADIUS,0,1],s=[0,t.GLOBE_RADIUS,0,1],o=[0,0,0,1];t.transformMat4$1(r,r,i),t.transformMat4$1(s,s,i),t.transformMat4$1(o,o,i);const a=new t.pointGeometry(r[0]/r[3],r[1]/r[3]),l=new t.pointGeometry(s[0]/s[3],s[1]/s[3]),h=t.polygonContainsPoint(e,a)&&r[3]<o[3],c=t.polygonContainsPoint(e,l)&&s[3]<o[3];if(!h&&!c)return null;const u=function(t,e,n){for(let i=1;i<t.length;i++){const r=L(e.pointCoordinate3D(t[i-1]).x),s=L(e.pointCoordinate3D(t[i]).x);if(n<0){if(r<s)return{idx:i,t:-r/(s-1-r)}}else if(s<r)return{idx:i,t:(1-r)/(s+1-r)}}return null}(e,n,h?-1:1);if(!u)return null;const{idx:p,t:d}=u;let f=p>1?F(e.slice(0,p),n):[],m=p<e.length?F(e.slice(p),n):[];f=f.map((e=>new t.pointGeometry(L(e.x),e.y))),m=m.map((e=>new t.pointGeometry(L(e.x),e.y)));const g=[...f];0===g.length&&g.push(m[m.length-1]);const y=t.number(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,d);let _;return _=h?[new t.pointGeometry(0,y),new t.pointGeometry(0,0),new t.pointGeometry(1,0),new t.pointGeometry(1,y)]:[new t.pointGeometry(1,y),new t.pointGeometry(1,1),new t.pointGeometry(0,1),new t.pointGeometry(0,y)],g.push(..._),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:!1}}(e,n);if(i)return i;const r=function(e,n){let i=!1,r=-1/0,s=0;for(let t=0;t<e.length-1;t++)e[t].x>r&&(r=e[t].x,s=t);for(let t=0;t<e.length-1;t++){const n=(s+t)%(e.length-1),r=e[n],o=e[n+1];Math.abs(r.x-o.x)>.5&&(r.x<o.x?(r.x+=1,0===n&&(e[e.length-1].x+=1)):(o.x+=1,n+1===e.length-1&&(e[0].x+=1)),i=!0)}const o=t.mercatorXfromLng(n.center.lng);return i&&o<Math.abs(o-1)&&e.forEach((t=>{t.x-=1})),{polygon:e,unwrapped:i}}(F(e,n).map((e=>new t.pointGeometry(L(e.x),e.y))),n);return{polygon:r.polygon.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:r.unwrapped}}}function F(e,n){return t.resample(e,(t=>{const e=n.pointCoordinate3D(t);t.x=e.x,t.y=e.y}),1/256)}function L(t){return t<0?1+t%1:t%1}function k(t){return 100*t|0}function U(e,n,i,r,s){const o=function(i,r){if(i)return s(i);if(r){e.url&&r.tiles&&e.tiles&&delete e.tiles;const i=t.pick(t.extend(r,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);r.vector_layers&&(i.vectorLayers=r.vector_layers,i.vectorLayerIds=i.vectorLayers.map((t=>t.id))),i.tiles=n.canonicalizeTileset(i,e.url),s(null,i)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url,null,i,r),t.ResourceType.Source),o):t.exported.frame((()=>o(null,e)))}class B{constructor(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),s=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<s&&e.y>=r&&e.y<o}}class z{constructor(t,e,n){this.context=t;const i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const G={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class H{constructor(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}}setVertexAttribPointers(t,e,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],s=e.attributes[r.name];void 0!==s&&t.vertexAttribPointer(s,r.components,t[G[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class V{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class j extends V{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class W extends V{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Y extends V{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class q extends V{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class X extends V{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Z extends V{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class K extends V{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Q extends V{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class J extends V{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class $ extends V{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class tt extends V{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class et extends V{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class nt extends V{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class it extends V{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class rt extends V{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class st extends V{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class ot extends V{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class at extends V{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class lt extends V{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class ht extends V{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ct extends V{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ut extends V{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class pt extends V{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class dt extends V{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ft extends V{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class mt extends V{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class gt extends V{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class yt extends V{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class _t extends V{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class vt extends V{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Tt extends V{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Et extends V{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class xt extends Et{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class It extends Et{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bt extends It{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class wt{constructor(t,e,n,i){this.context=t,this.width=e,this.height=n;const r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new xt(t,r),i&&(this.depthAttachment=new It(t,r))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class St{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new j(this),this.clearDepth=new W(this),this.clearStencil=new Y(this),this.colorMask=new q(this),this.depthMask=new X(this),this.stencilMask=new Z(this),this.stencilFunc=new K(this),this.stencilOp=new Q(this),this.stencilTest=new J(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new it(this),this.blendColor=new rt(this),this.blendEquation=new st(this),this.cullFace=new ot(this),this.cullFaceSide=new at(this),this.frontFace=new lt(this),this.program=new ht(this),this.activeTexture=new ct(this),this.viewport=new ut(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new _t(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new Tt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new z(this,t,e)}createVertexBuffer(t,e,n){return new H(this,t,e,n)}createRenderbuffer(t,e,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,n){return new wt(this,t,e,n)}clear(t){let{color:e,depth:n,stencil:i}=t;const r=this.gl;let s=0;e&&(s|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(s|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(s|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(s)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(n){e(n.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class At extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,null,null,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new B(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const i=t.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((i,r,s,o)=>(delete e.request,e.aborted?(e.state="unloaded",n(null)):i?(e.state="errored",n(i)):r?(this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:s,expires:o}),e.setTexture(r,this.map.painter),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(t,e,n){t.setTexture(e,n)}static unloadTileData(t,e){t.texture&&e.saveTileTexture(t.texture)}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let Ct;function Rt(e,n,i,r,s,o,a,l){const h=[e,i,s,n,r,o,1,1,1],c=[a,l,1],u=t.adjoint([],h),[p,d,f]=t.transformMat3(c,c,t.transpose(u,u));return t.multiply$1(h,[p,0,0,0,d,0,0,0,f],h)}class Dt extends t.Evented{constructor(t,e,n,i){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=e,this._dirty=!1}load(e,n){this._loaded=n||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,i)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new t.ErrorEvent(n));else if(i){const{HTMLImageElement:n}=t.window;this.image=i instanceof n?t.exported.getImageData(i):i,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(e){this.coordinates=e,this._boundsArray=void 0;const n=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){let n=1/0,i=1/0,r=-1/0,s=-1/0;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),s=Math.max(s,t.y);const o=Math.max(r-n,s-i),a=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,a);return new t.CanonicalTileID(a,Math.floor((n+r)/2*l),Math.floor((i+s)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(e){for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}if(this._boundsArray)return;const n=t.tileTransform(this.tileID,this.map.transform.projection),[i,r,s,o]=this.coordinates.map((e=>{const i=n.projection.project(e[0],e[1]);return t.getTilePoint(n,i)._round()}));this.perspectiveTransform=function(e,n,i,r,s,o,a,l,h,c){const u=Rt(0,0,e,0,0,n,e,n),p=Rt(i,r,s,o,a,l,h,c);return t.multiply$1(p,t.adjoint(u,u),p),[p[6]/p[8]*e/t.EXTENT,p[7]/p[8]*n/t.EXTENT]}(this.width,this.height,i.x,i.y,r.x,r.y,o.x,o.y,s.x,s.y);const a=this._boundsArray=new t.StructArrayLayout4i8;a.emplaceBack(i.x,i.y,0,0),a.emplaceBack(r.x,r.y,t.EXTENT,0),a.emplaceBack(o.x,o.y,0,t.EXTENT),a.emplaceBack(s.x,s.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(a,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(e)}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ot={vector:class extends t.Evented{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=U(this._options,this.map._requestManager,n,i,((r,s)=>{this._tileJSONRequest=null,this._loaded=!0,r?(n&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(n)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),this.fire(new t.ErrorEvent(r))):s&&(t.extend(this,s),s.bounds&&(this.tileBounds=new B(s.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(s.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(r)}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>{const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles()}))}setSourceProperty(t){t(),this.reload()}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,s.bind(this));else if(e.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,s.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},r,((t,n)=>{t||!n?s.call(this,t):(r.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,s.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function s(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:At,"raster-dem":class extends At{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,s,o,a){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(s){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a});const n=t.window.ImageBitmap&&s instanceof t.window.ImageBitmap&&(null==Ct&&(Ct=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),Ct),i=1-(s.width-t.prevPowerOfTwo(s.width))/2;i<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?s:t.exported.getImageData(s,i),h={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:i};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",h,r.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,s=0===n.x?e.wrap-1:e.wrap,o=(n.x+1+i)%i,a=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,s,n.z,r,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,s,n.z,r,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,s,n.z,r,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,o,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const s=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*s,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*s,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*s,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,r)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(r,this.map.painter,"reloadTile"===i),n(null)))),void 0,"loadTile"===i)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Dt{constructor(t,e,n,i){super(t,e,n,i),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(e)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Dt,canvas:class extends Dt{constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}},custom:class extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.type="custom",this._dataType="raster",this._dispatcher=i,this._implementation=n,this.setEventedParent(r),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error("Missing implementation for ".concat(this.id," custom source")))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error("Missing loadTile implementation for ".concat(this.id," custom source")))),this._implementation.bounds&&(this.tileBounds=new B(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(e){this._map=e,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(e),this.load()}onRemove(t){this._implementation.onRemove&&this._implementation.onRemove(t)}hasTile(t){if(this._implementation.hasTile){const{x:e,y:n,z:i}=t.canonical;return this._implementation.hasTile({x:e,y:n,z:i})}return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const{x:i,y:r,z:s}=e.tileID.canonical,o=new t.window.AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:i,y:r,z:s},{signal:o.signal})).then(function(i){return delete e.request,e.aborted?(e.state="unloaded",n(null)):void 0===i?(e.state="errored",n(null)):null===i?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",n(null)):function(e){return e instanceof t.window.ImageData||e instanceof t.window.HTMLCanvasElement||e instanceof t.window.ImageBitmap||e instanceof t.window.HTMLImageElement}(i)?(this.loadTileData(e,i),e.state="loaded",void n(null)):(e.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((t=>{20!==t.code&&(e.state="errored",n(t))})),e.request.cancel=()=>o.abort()}loadTileData(t,e){At.loadTileData(t,e,this._map.painter)}unloadTileData(t){At.unloadTileData(t,this._map.painter)}unloadTile(t,e){if(this.unloadTileData(t),this._implementation.unloadTile){const{x:e,y:n,z:i}=t.tileID.canonical;this._implementation.unloadTile({x:e,y:n,z:i})}e()}abortTile(t,e){t.request&&t.request.cancel&&(t.request.cancel(),delete t.request),e()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((t=>({x:t.canonical.x,y:t.canonical.y,z:t.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Nt=function(e,n,i,r){const s=new Ot[n.type](e,n,i,r);if(s.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(s.id));return t.bindAll(["load","abort","unload","serialize","prepare"],s),s};function Mt(e,n){const i=t.identity([]);return t.scale(i,i,[.5*e.width,.5*-e.height,1]),t.translate(i,i,[1,-1,0]),t.multiply(i,i,e.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(i)}function Pt(t,e,n,i,r,s,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=t.tilesIn(i,o,a);l.sort(Lt);const h=[];for(const u of l)h.push({wrappedTileID:u.tile.tileID.wrapped().key,queryResults:u.tile.queryRenderedFeatures(e,n,t._state,u,r,s,Mt(t.transform,u.tile.tileID),a)});const c=function(t){const e={},n={};for(const i of t){const t=i.queryResults,r=i.wrappedTileID,s=n[r]=n[r]||{};for(const n in t){const i=t[n],r=s[n]=s[n]||{},o=e[n]=e[n]||[];for(const t of i)r[t.featureIndex]||(r[t.featureIndex]=!0,o.push(t))}}return e}(h);for(const u in c)c[u].forEach((e=>{const n=e.feature,i=n.layer;i&&"background"!==i.type&&"sky"!==i.type&&(n.source=i.source,i["source-layer"]&&(n.sourceLayer=i["source-layer"]),n.state=void 0!==n.id?t.getFeatureState(i["source-layer"],n.id):{})}));return c}function Ft(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),i=[],r={};for(let s=0;s<n.length;s++){const t=n[s],o=t.tileID.canonical.key;r[o]||(r[o]=!0,t.querySourceFeatures(i,e))}return i}function Lt(t,e){const n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function kt(){return null!=ds.workerClass?new ds.workerClass:new t.window.Worker(ds.workerUrl)}const Ut="mapboxgl_preloaded_worker_pool";class Bt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Bt.workerCount;)this.workers.push(new kt);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ut]}numActive(){return Object.keys(this.active).length}}let zt;function Gt(){return zt||(zt=new Bt),zt}function Ht(e,n){const i={};for(const t in e)"ref"!==t&&(i[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(i[t]=n[t])})),i}function Vt(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Ht(t[n],e[t[n].ref]));return t}Bt.workerCount=2;const jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Wt(t,e,n){n.push({command:jt.addSource,args:[t,e[t]]})}function Yt(t,e,n){e.push({command:jt.removeSource,args:[t]}),n[t]=!0}function qt(t,e,n,i){Yt(t,n,i),Wt(t,e,n)}function Xt(t,n,i){let r;for(r in t[i])if(t[i].hasOwnProperty(r)&&"data"!==r&&!e(t[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!e(t[i][r],n[i][r]))return!1;return!0}function Zt(t,n,i,r,s,o){let a;for(a in n=n||{},t=t||{})t.hasOwnProperty(a)&&(e(t[a],n[a])||i.push({command:o,args:[r,a,n[a],s]}));for(a in n)n.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(e(t[a],n[a])||i.push({command:o,args:[r,a,n[a],s]}))}function Kt(t){return t.id}function Qt(t,e){return t[e.id]=e,t}class Jt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const s=n-1,o=this._distances[s],a=i-o,l=a>0?(r-o)/a:0;return this.points[s].mult(1-l).add(this.points[n].mult(l))}}class $t{constructor(t,e,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let s=0;s<this.xCellCount*this.yCellCount;s++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)}_insertBoxCell(t,e,n,i,r,s){this.boxCells[r].push(s)}_insertCircleCell(t,e,n,i,r,s){this.circleCells[r].push(s)}_query(t,e,n,i,r,s){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];const o=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(let t=0;t<this.boxKeys.length;t++)o.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],i=this.circles[3*t+2];o.push({key:this.circleKeys[t],x1:e-i,y1:n-i,x2:e+i,y2:n+i})}return s?o.filter(s):o}return this._forEachCell(t,e,n,i,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}},s),r?o.length>0:o}_queryCircle(t,e,n,i,r){const s=t-n,o=t+n,a=e-n,l=e+n;if(o<0||s>this.width||l<0||a>this.height)return!i&&[];const h=[];return this._forEachCell(s,a,o,l,this._queryCellCircle,h,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),i?h.length>0:h}query(t,e,n,i,r){return this._query(t,e,n,i,!1,r)}hitTest(t,e,n,i,r){return this._query(t,e,n,i,!0,r)}hitTestCircle(t,e,n,i){return this._queryCircle(t,e,n,!0,i)}_queryCell(t,e,n,i,r,s,o,a){const l=o.seenUids,h=this.boxCells[r];if(null!==h){const r=this.bboxes;for(const c of h)if(!l.box[c]){l.box[c]=!0;const h=4*c;if(t<=r[h+2]&&e<=r[h+3]&&n>=r[h+0]&&i>=r[h+1]&&(!a||a(this.boxKeys[c]))){if(o.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[c],x1:r[h],y1:r[h+1],x2:r[h+2],y2:r[h+3]})}}}const c=this.circleCells[r];if(null!==c){const r=this.circles;for(const h of c)if(!l.circle[h]){l.circle[h]=!0;const c=3*h;if(this._circleAndRectCollide(r[c],r[c+1],r[c+2],t,e,n,i)&&(!a||a(this.circleKeys[h]))){if(o.hitTest)return s.push(!0),!0;{const t=r[c],e=r[c+1],n=r[c+2];s.push({key:this.circleKeys[h],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,i,r,s,o,a){const l=o.circle,h=o.seenUids,c=this.boxCells[r];if(null!==c){const t=this.bboxes;for(const e of c)if(!h.box[e]){h.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!a||a(this.boxKeys[e])))return s.push(!0),!0}}const u=this.circleCells[r];if(null!==u){const t=this.circles;for(const e of u)if(!h.circle[e]){h.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[e])))return s.push(!0),!0}}}_forEachCell(t,e,n,i,r,s,o,a){const l=this._convertToXCellCoord(t),h=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),u=this._convertToYCellCoord(i);for(let p=l;p<=c;p++)for(let l=h;l<=u;l++)if(r.call(this,t,e,n,i,this.xCellCount*l+p,s,o,a))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,i,r,s){const o=i-t,a=r-e,l=n+s;return l*l>o*o+a*a}_circleAndRectCollide(t,e,n,i,r,s,o){const a=(s-i)/2,l=Math.abs(t-(i+a));if(l>a+n)return!1;const h=(o-r)/2,c=Math.abs(e-(r+h));if(c>h+n)return!1;if(l<=a||c<=h)return!0;const u=l-a,p=c-h;return u*u+p*p<=n*n}}const te=Math.tan(85*Math.PI/180);function ee(e,n,i,r,s,o,a){const l=t.create();if(i)if("globe"===o.name){const e=t.calculateGlobeLabelMatrix(s,n);t.multiply(l,l,e)}else{const e=_([],a);l[0]=e[0],l[1]=e[1],l[4]=e[2],l[5]=e[3],r||t.rotateZ(l,l,s.angle)}else t.multiply(l,s.labelPlaneMatrix,e);return l}function ne(t,e,n,i,r,s,o){const a=ee(t,e,n,i,r,s,o);return"globe"===s.name&&n||(a[2]=a[6]=a[10]=a[14]=0),a}function ie(e,n,i,r,s,o,a){if(i){if("globe"===o.name){const l=ee(e,n,i,r,s,o,a);return t.invert(l,l),t.multiply(l,e,l),l}{const n=t.clone(e),i=t.identity([]);return i[0]=a[0],i[1]=a[1],i[4]=a[2],i[5]=a[3],t.multiply(n,n,i),r||t.rotateZ(n,n,-s.angle),n}}return s.glCoordMatrix}function re(e,n,i,r){const s=[e,n,i,1];i?t.transformMat4$1(s,s,r):me(s,s,r);const o=s[3];return s[0]/=o,s[1]/=o,s[2]/=o,s}function se(t,e){return Math.min(.5+t/e*.5,1.5)}function oe(t,e){const n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function ae(e,n,i,r,s,o,a,l,h,c){const u=i.transform,p=r?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(p,i.transform.zoom),f="globe"===u.projection.name,m=[256/i.width*2+1,256/i.height*2+1],g=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();let y=null;f&&(y=r?e.text.globeExtVertexArray:e.icon.globeExtVertexArray);const _=e.lineVertexArray,v=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,T=i.transform.width/i.transform.height;let E,x=!1;for(let I=0;I<v.length;I++){const r=v.get(I),{numGlyphs:f,writingMode:b}=r;if(b!==t.WritingMode.vertical||x||E===t.WritingMode.horizontal||(x=!0),E=b,(r.hidden||b===t.WritingMode.vertical)&&!x){fe(f,g);continue}x=!1;const w=new t.pointGeometry(r.tileAnchorX,r.tileAnchorY);let{x:S,y:A,z:C}=u.projection.projectTilePoint(w.x,w.y,c.canonical);if(h){const[t,e,n]=h(w);S+=t,A+=e,C+=n}const R=[S,A,C,1];if(t.transformMat4$1(R,R,n),!oe(R,m)){fe(f,g);continue}const D=se(i.transform.cameraToCenterDistance,R[3]),O=t.evaluateSizeForFeature(p,d,r),N=a?O/D:O*D,M=re(S,A,C,s);if(M[3]<=0){fe(f,g);continue}let P={};const F=a?null:h,L=ce(r,N,!1,l,n,s,o,e.glyphOffsetArray,_,g,y,M,w,P,T,F,u.projection,c,a);x=L.useVertical,F&&L.needsFlipping&&(P={}),(L.notEnoughRoom||x||L.needsFlipping&&ce(r,N,!0,l,n,s,o,e.glyphOffsetArray,_,g,y,M,w,P,T,F,u.projection,c,a).notEnoughRoom)&&fe(f,g)}r?(e.text.dynamicLayoutVertexBuffer.updateData(g),y&&e.text.globeExtVertexBuffer.updateData(y)):(e.icon.dynamicLayoutVertexBuffer.updateData(g),y&&e.icon.globeExtVertexBuffer.updateData(y))}function le(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){const{lineStartIndex:g,glyphStartIndex:y,segment:_}=a,v=y+a.numGlyphs,T=g+a.lineLength,E=e.getoffsetX(y),x=e.getoffsetX(v-1),I=de(t*E,n,i,r,s,o,_,g,T,l,h,c,u,p,!0,d,f,m);if(!I)return null;const b=de(t*x,n,i,r,s,o,_,g,T,l,h,c,u,p,!0,d,f,m);return b?{first:I,last:b}:null}function he(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(r)>Math.abs(i)?{useVertical:!0}:e===t.WritingMode.vertical?r>0?{needsFlipping:!0}:null:0!==n&&function(t,e){return 0===t||Math.abs(e/t)>te}(i,r)?1===n?{needsFlipping:!0}:null:i<0?{needsFlipping:!0}:null}function ce(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v){const T=n/24,E=e.lineOffsetX*T,x=e.lineOffsetY*T,{lineStartIndex:I,glyphStartIndex:b,numGlyphs:w,segment:S,writingMode:A,flipState:C}=e,R=I+e.lineLength,D=e=>{if(u){const[n,i,r]=e.up,s=c.length;t.updateGlobeVertexNormal(u,s+0,n,i,r),t.updateGlobeVertexNormal(u,s+1,n,i,r),t.updateGlobeVertexNormal(u,s+2,n,i,r),t.updateGlobeVertexNormal(u,s+3,n,i,r)}const[n,i,r]=e.point;t.addDynamicAttributes(c,n,i,r,e.angle)};if(w>1){const t=le(T,l,E,x,i,p,d,e,h,o,f,g,!1,y,_,v);if(!t)return{notEnoughRoom:!0};if(r&&!i){let[n,i,r]=t.first.point,[s,o,l]=t.last.point;[n,i]=re(n,i,r,a),[s,o]=re(s,o,l,a);const h=he(A,C,(s-n)*m,o-i);if(e.flipState=h&&h.needsFlipping?1:2,h)return h}D(t.first);for(let e=b+1;e<b+w-1;e++){const t=de(T*l.getoffsetX(e),E,x,i,p,d,S,I,R,h,o,f,g,!1,!1,y,_,v);if(!t)return c.length-=4*(e-b),{notEnoughRoom:!0};D(t)}D(t.last)}else{if(r&&!i){const n=re(d.x,d.y,0,s),i=I+S+1,r=new t.pointGeometry(h.getx(i),h.gety(i)),o=re(r.x,r.y,0,s),a=o[3]>0?o:pe(d,r,n,1,s,void 0,y,_.canonical),l=he(A,C,(a[0]-n[0])*m,a[1]-n[1]);if(e.flipState=l&&l.needsFlipping?1:2,l)return l}const n=de(T*l.getoffsetX(b),E,x,i,p,d,S,I,R,h,o,f,g,!1,!1,y,_,v);if(!n)return{notEnoughRoom:!0};D(n)}return{}}function ue(t,e,n,i,r){const{x:s,y:o,z:a}=i.projectTilePoint(t.x,t.y,e);if(!r)return re(s,o,a,n);const[l,h,c]=r(t);return re(s+l,o+h,a+c,n)}function pe(e,n,i,r,s,o,a,l){const h=ue(e.sub(n)._unit()._add(e),l,s,a,o);return t.sub(h,i,h),t.normalize(h,h),t.scaleAndAdd(h,i,h,r)}function de(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_){const v=r?e-n:e+n;let T=v>0?1:-1,E=0;r&&(T*=-1,E=Math.PI),T<0&&(E+=Math.PI);let x=l+a+(T>0?0:1)|0,I=s,b=s,w=0,S=0;const A=Math.abs(v),C=[],R=[];let D=o,O=D;const N=()=>pe(O,D,b,A-w+1,u,d,g,y.canonical);for(;w+S<=A;){if(x+=T,x<l||x>=h)return null;if(b=I,O=D,C.push(b),f&&R.push(O),D=new t.pointGeometry(c.getx(x),c.gety(x)),I=p[x],!I){const t=ue(D,y.canonical,u,g,d);I=t[3]>0?p[x]=t:N()}w+=S,S=t.distance(b,I)}m&&d&&(p[x]&&(I=N(),S=t.distance(b,I)),p[x]=I);const M=(A-w)/S,P=D.sub(O)._mult(M)._add(O),F=t.sub([],I,b),L=t.scaleAndAdd([],b,F,M);let k=[0,0,1],U=F[0],B=F[1];if(_&&(k=g.upVector(y.canonical,P.x,P.y),0!==k[0]||0!==k[1]||1!==k[2])){const e=[k[2],0,-k[0]],n=t.cross([],k,e);t.normalize(e,e),t.normalize(n,n),U=t.dot(F,e),B=t.dot(F,n)}if(i){const e=t.cross([],k,F);t.normalize(e,e),t.scaleAndAdd(L,L,e,i*T)}const z=E+Math.atan2(B,U);return C.push(L),f&&R.push(P),{point:L,angle:z,path:C,tilePath:R,up:k}}function fe(t,e){const n=e.length,i=n+4*t;e.resize(i),e.float32.fill(-1/0,4*n,4*i)}function me(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}const ge=100;class ye{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new $t(t.width+200,t.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new $t(t.width+200,t.height+200,25);this.transform=t,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ge,this.screenBottomBoundary=t.height+ge,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,n,i,r,s,o,a){let l=n.projectedAnchorX,h=n.projectedAnchorY,c=n.projectedAnchorZ;const u=n.elevation,p=n.tileID,d=t.getProjection();if(u&&p){const[t,e,i]=d.upVector(p.canonical,n.tileAnchorX,n.tileAnchorY),r=d.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=t*u*r,h+=e*u*r,c+=i*u*r}const f=this.projectAndGetPerspectiveRatio(o,l,h,c,n.tileID,"globe"===d.name||!!u||this.transform.pitch>0,d),m=s*f.perspectiveRatio,g=(n.x1*e+i.x-n.padding)*m+f.point.x,y=(n.y1*e+i.y-n.padding)*m+f.point.y,_=(n.x2*e+i.x+n.padding)*m+f.point.x,v=(n.y2*e+i.y+n.padding)*m+f.point.y,T=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(g,y,_,v)||!r&&this.grid.hitTest(g,y,_,v,a)||T?{box:[],offscreen:!1,occluded:f.occluded}:{box:[g,y,_,v],offscreen:this.isOffscreen(g,y,_,v),occluded:!1}}placeCollisionCircles(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){const g=[],y=this.transform.elevation,_=e.getProjection(),v=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,_):null,T=new t.pointGeometry(i.tileAnchorX,i.tileAnchorY);let{x:E,y:x,z:I}=_.projectTilePoint(T.x,T.y,m.canonical);if(v){const[t,e,n]=v(T);E+=t,x+=e,I+=n}const b="globe"===_.name,w=this.projectAndGetPerspectiveRatio(a,E,x,I,m,b||!!y||this.transform.pitch>0,_),{perspectiveRatio:S}=w,A=(u?o/S:o*S)/t.ONE_EM,C=re(E,x,I,l),R=w.signedDistanceFromCamera>0?le(A,s,i.lineOffsetX*A,i.lineOffsetY*A,!1,C,T,i,r,l,{},y&&!u?v:null,u&&!!y,_,m,u):null;let D=!1,O=!1,N=!0;if(R&&!w.occluded){const e=.5*d*S+f,i=new t.pointGeometry(-100,-100),r=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),s=new Jt,{first:o,last:a}=R,l=o.path.length;let u=[];for(let t=l-1;t>=1;t--)u.push(o.path[t]);for(let t=1;t<a.path.length;t++)u.push(a.path[t]);const m=2.5*e;h&&(u=u.map(((t,e)=>{let[n,i,r]=t;return v&&!b&&(r=v(e<l-1?o.tilePath[l-1-e]:a.tilePath[e-l+2])[2]),re(n,i,r,h)})),u.some((t=>t[3]<=0))&&(u=[]));let y=[];if(u.length>0){let e=1/0,n=-1/0,s=1/0,o=-1/0;for(const t of u)e=Math.min(e,t[0]),s=Math.min(s,t[1]),n=Math.max(n,t[0]),o=Math.max(o,t[1]);n>=i.x&&e<=r.x&&o>=i.y&&s<=r.y&&(y=[u.map((e=>new t.pointGeometry(e[0],e[1])))],(e<i.x||n>r.x||s<i.y||o>r.y)&&(y=t.clipLine(y,i.x,i.y,r.x,r.y)))}for(const t of y){s.reset(t,.25*e);let i=0;i=s.length<=.5*e?1:Math.ceil(s.paddedLength/m)+1;for(let t=0;t<i;t++){const r=t/Math.max(i-1,1),o=s.lerp(r),a=o.x+ge,l=o.y+ge;g.push(a,l,e,0);const h=a-e,u=l-e,d=a+e,f=l+e;if(N=N&&this.isOffscreen(h,u,d,f),O=O||this.isInsideGrid(h,u,d,f),!n&&this.grid.hitTestCircle(a,l,e,p)&&(D=!0,!c))return{circles:[],offscreen:!1,collisionDetected:D,occluded:!1}}}}return{circles:!c&&D||!O?[]:g,offscreen:N,collisionDetected:D,occluded:w.occluded}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,s=-1/0,o=-1/0;for(const c of e){const e=new t.pointGeometry(c.x+ge,c.y+ge);i=Math.min(i,e.x),r=Math.min(r,e.y),s=Math.max(s,e.x),o=Math.max(o,e.y),n.push(e)}const a=this.grid.query(i,r,s,o).concat(this.ignoredGrid.query(i,r,s,o)),l={},h={};for(const c of a){const e=c.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const i=[new t.pointGeometry(c.x1,c.y1),new t.pointGeometry(c.x2,c.y1),new t.pointGeometry(c.x2,c.y2),new t.pointGeometry(c.x1,c.y2)];t.polygonIntersectsPolygon(n,i)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===h[e.bucketInstanceId]&&(h[e.bucketInstanceId]=[]),h[e.bucketInstanceId].push(e.featureIndex))}return h}insertCollisionBox(t,e,n,i,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,i,r){const s=e?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};for(let a=0;a<t.length;a+=4)s.insertCircle(o,t[a],t[a+1],t[a+2])}projectAndGetPerspectiveRatio(e,n,i,r,s,o,a){const l=[n,i,r,1];let h=!1;if(r||this.transform.pitch>0){t.transformMat4$1(l,l,e);const o="globe"===a.name;if(this.fogState&&s&&!o){const e=function(e,n,i,r,s,o){const a=o.calculateFogTileMatrix(s),l=[n,i,r];return t.transformMat4(l,l,a),A(e,l,o.pitch,o._fov)}(this.fogState,n,i,r,s.toUnwrapped(),this.transform);h=e>.9}}else me(l,l,e);const c=l[3];return{point:new t.pointGeometry((l[0]/c+1)/2*this.transform.width+ge,(-l[1]/c+1)/2*this.transform.height+ge),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/c*.5,1.5),signedDistanceFromCamera:c,occluded:o&&l[2]>c||h}}isOffscreen(t,e,n,i){return n<ge||t>=this.screenRightBoundary||i<ge||e>this.screenBottomBoundary}isInsideGrid(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function _e(e,n,i){const r=n.createTileMatrix(e,e.worldSize,i.toUnwrapped());return t.multiply(new Float32Array(16),e.projMatrix,r)}function ve(t,e,n){if(e.projection.name===n.projection.name)return t.projMatrix;const i=n.clone();return i.setProjection(e.projection),_e(i,e.getProjection(),t)}function Te(t,e,n){return e.name===n.projection.name?t.projMatrix:_e(n,e,t)}class Ee{constructor(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class xe{constructor(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.text=new Ee(t?t.text:null,e,n,r),this.icon=new Ee(t?t.icon:null,e,i,r),this.clipped=s}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ie{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.text=t,this.icon=e,this.skipFade=n,this.clipped=i}}class be{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class we{constructor(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class Se{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Ae(e,n,i,r,s){const{horizontalAlign:o,verticalAlign:a}=t.getAnchorAlignment(e),l=-(o-.5)*n,h=-(a-.5)*i,c=t.evaluateVariableOffset(e,r);return new t.pointGeometry(l+c[0]*s,h+c[1]*s)}function Ce(e,n,i,r,s){const o=new t.pointGeometry(e,n);return i&&o._rotate(r?s:-s),o}class Re{constructor(t,e,n,i,r){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new ye(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Se(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,i,r){const s=i.getBucket(n),o=i.latestFeatureIndex;if(!s||!o||n.id!==s.layerIds[0])return;const a=s.layers[0].layout,l=i.collisionBoxArray,h=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/t.EXTENT,u=i.tileID.toUnwrapped();this.transform.setProjection(s.projection);const p=(d=i.tileID,f=s.getProjection(),m=this.transform,f.name===this.projection?m.calculateProjMatrix(d.toUnwrapped()):_e(m,f,d));var d,f,m;const g="map"===a.get("text-pitch-alignment"),y="map"===a.get("text-rotation-alignment");n.compileFilter();const _=n.dynamicFilter(),v=n.dynamicFilterNeedsFeature(),T=this.transform.calculatePixelsToTileUnitsMatrix(i),E=ne(p,i.tileID.canonical,g,y,this.transform,s.getProjection(),T);let x=null;if(g){const e=ie(p,i.tileID.canonical,g,y,this.transform,s.getProjection(),T);x=t.multiply([],this.transform.labelPlaneMatrix,e)}let I=null;_&&i.latestFeatureIndex&&(I={unwrappedTileID:u,dynamicFilter:_,dynamicFilterNeedsFeature:v,featureIndex:i.latestFeatureIndex}),this.retainedQueryData[s.bucketInstanceId]=new we(s.bucketInstanceId,o,s.sourceLayerIndex,s.index,i.tileID);const b={bucket:s,layout:a,posMatrix:p,textLabelPlaneMatrix:E,labelToScreenMatrix:x,clippingData:I,scale:h,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(s.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(s.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(s.sourceID)};if(r)for(const t of s.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:b})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:s.symbolInstances.length,parameters:b})}attemptAnchorPlacement(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y){const{textOffset0:_,textOffset1:v,crossTileID:T}=u,E=[_,v],x=Ae(t,n,i,E,r),I=this.collisionIndex.placeCollisionBox(d,r,e,Ce(x.x,x.y,s,o,this.transform.angle),c,a,l,h.predicate);if(m){const t=d.getSymbolInstanceIconSize(y,this.transform.zoom,u.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(d,t,m,Ce(x.x,x.y,s,o,this.transform.angle),c,a,l,h.predicate).box.length)return}if(I.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[T]&&this.prevPlacement.placements[T]&&this.prevPlacement.placements[T].text&&(e=this.prevPlacement.variableOffsets[T].anchor),this.variableOffsets[T]={textOffset:E,width:n,height:i,anchor:t,textScale:r,prevAnchor:e},this.markUsedJustification(d,t,u,f),d.allowVerticalPlacement&&(this.markUsedOrientation(d,f,u),this.placedOrientations[T]=f),{shift:x,placedGlyphBoxes:I}}}placeLayerBucketPart(e,n,i,r){const{bucket:s,layout:o,posMatrix:a,textLabelPlaneMatrix:l,labelToScreenMatrix:h,clippingData:c,textPixelRatio:u,holdingForFade:p,collisionBoxArray:d,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=e.parameters,y=o.get("text-optional"),_=o.get("icon-optional"),v=o.get("text-allow-overlap"),T=o.get("icon-allow-overlap"),E="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),I="none"!==o.get("icon-text-fit"),b="viewport-y"===o.get("symbol-z-order");this.transform.setProjection(s.projection);let w=v&&(T||!s.hasIconData()||_),S=T&&(v||!s.hasTextData()||y);!s.collisionArrays&&d&&s.deserializeCollisionBoxes(d),i&&r&&s.updateCollisionDebugBuffers(this.transform.zoom,d);const A=(e,r,d)=>{const{crossTileID:b,numVerticalGlyphVertices:A}=e;if(c){const i={zoom:this.transform.zoom,pitch:this.transform.pitch};let r=null;if(c.dynamicFilterNeedsFeature){const t=this.retainedQueryData[s.bucketInstanceId];r=c.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:t.bucketIndex,sourceLayerIndex:t.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,c.dynamicFilter)(i,r,this.retainedQueryData[s.bucketInstanceId].tileID.canonical,new t.pointGeometry(e.tileAnchorX,e.tileAnchorY),this.transform.calculateDistanceTileData(c.unwrappedTileID)))return this.placements[b]=new Ie(!1,!1,!1,!0),void(n[b]=!0)}if(n[b])return;if(p)return void(this.placements[b]=new Ie(!1,!1,!1));let C=!1,R=!1,D=!0,O=!1,N=!1,M=null,P={box:null,offscreen:null,occluded:null},F={box:null,offscreen:null,occluded:null},L=null,k=null,U=null,B=0,z=0,G=0;d.textFeatureIndex?B=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(B=e.featureIndex),d.verticalTextFeatureIndex&&(z=d.verticalTextFeatureIndex);const H=t=>{t.tileID=this.retainedQueryData[s.bucketInstanceId].tileID;const e=this.transform.elevation;(e||t.elevation)&&(t.elevation=e?e.getAtTileOffset(t.tileID,t.tileAnchorX,t.tileAnchorY):0)},V=d.textBox;if(V){H(V);const n=n=>{let i=t.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[b];t&&(this.placedOrientations[b]=t,i=t,this.markUsedOrientation(s,i,e))}return i},i=(e,n)=>{if(s.allowVerticalPlacement&&A>0&&d.verticalTextBox){for(const i of s.writingModes)if(i===t.WritingMode.vertical?(P=n(),F=P):P=e(),P&&P.box&&P.box.length)break}else P=e()};if(o.get("text-variable-anchor")){let l=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[b]){const t=this.prevPlacement.variableOffsets[b];l.indexOf(t.anchor)>0&&(l=l.filter((e=>e!==t.anchor)),l.unshift(t.anchor))}const h=(t,n,i)=>{const o=s.getSymbolInstanceTextSize(f,e,this.transform.zoom,r),h=(t.x2-t.x1)*o+2*t.padding,c=(t.y2-t.y1)*o+2*t.padding,p=I&&!T?n:null;p&&H(p);let d={box:[],offscreen:!1,occluded:!1};const y=v?2*l.length:l.length;for(let _=0;_<y;++_){const n=this.attemptAnchorPlacement(l[_%l.length],t,h,c,o,E,x,u,a,g,_>=l.length,e,r,s,i,p,f,m);if(n&&(d=n.placedGlyphBoxes,d&&d.box&&d.box.length)){C=!0,M=n.shift;break}}return d};i((()=>h(V,d.iconBox,t.WritingMode.horizontal)),(()=>{const e=d.verticalTextBox;return e&&H(e),s.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&A>0&&e?h(e,d.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),P&&(C=P.box,D=P.offscreen,O=P.occluded);const c=n(P&&P.box);if(!C&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[b];t&&(this.variableOffsets[b]=t,this.markUsedJustification(s,t.anchor,e,c))}}else{const o=(n,i)=>{const o=s.getSymbolInstanceTextSize(f,e,this.transform.zoom,r),l=this.collisionIndex.placeCollisionBox(s,o,n,new t.pointGeometry(0,0),v,u,a,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(s,i,e),this.placedOrientations[b]=i),l};i((()=>o(V,t.WritingMode.horizontal)),(()=>{const e=d.verticalTextBox;return s.allowVerticalPlacement&&A>0&&e?(H(e),o(e,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(P&&P.box&&P.box.length)}}if(L=P,C=L&&L.box&&L.box.length>0,D=L&&L.offscreen,O=L&&L.occluded,e.useRuntimeCollisionCircles){const n=s.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),r=t.evaluateSizeForFeature(s.textSizeData,f,n),c=o.get("text-padding");k=this.collisionIndex.placeCollisionCircles(s,v,n,s.lineVertexArray,s.glyphOffsetArray,r,a,l,h,i,x,g.predicate,e.collisionCircleDiameter*r/t.ONE_EM,c,this.retainedQueryData[s.bucketInstanceId].tileID),C=v||k.circles.length>0&&!k.collisionDetected,D=D&&k.offscreen,O=k.occluded}if(d.iconFeatureIndex&&(G=d.iconFeatureIndex),d.iconBox){const n=n=>{H(n);const i=I&&M?Ce(M.x,M.y,E,x,this.transform.angle):new t.pointGeometry(0,0),r=s.getSymbolInstanceIconSize(m,this.transform.zoom,e.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(s,r,n,i,T,u,a,g.predicate)};F&&F.box&&F.box.length&&d.verticalIconBox?(U=n(d.verticalIconBox),R=U.box.length>0):(U=n(d.iconBox),R=U.box.length>0),D=D&&U.offscreen,N=U.occluded}const j=y||0===e.numHorizontalGlyphVertices&&0===A,W=_||0===e.numIconVertices;if(j||W?W?j||(R=R&&C):C=R&&C:R=C=R&&C,C&&L&&L.box&&this.collisionIndex.insertCollisionBox(L.box,o.get("text-ignore-placement"),s.bucketInstanceId,F&&F.box&&z?z:B,g.ID),R&&U&&this.collisionIndex.insertCollisionBox(U.box,o.get("icon-ignore-placement"),s.bucketInstanceId,G,g.ID),k&&(C&&this.collisionIndex.insertCollisionCircles(k.circles,o.get("text-ignore-placement"),s.bucketInstanceId,B,g.ID),i)){const t=s.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new be);for(let n=0;n<k.circles.length;n+=4)e.circles.push(k.circles[n+0]),e.circles.push(k.circles[n+1]),e.circles.push(k.circles[n+2]),e.circles.push(k.collisionDetected?1:0)}const Y="globe"!==s.projection.name;w=w&&(Y||!O),S=S&&(Y||!N),this.placements[b]=new Ie(C||w,R||S,D||s.justReloaded),n[b]=!0};if(b){const t=s.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];A(s.symbolInstances.get(n),n,s.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)A(s.symbolInstances.get(t),t,s.collisionArrays[t]);if(i&&s.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[s.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}markUsedJustification(e,n,i,r){const{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:l,crossTileID:h}=i,c=t.getAnchorJustification(n),u=r===t.WritingMode.vertical?l:"left"===c?s:"center"===c?o:"right"===c?a:-1;s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=u>=0&&s!==u?0:h),o>=0&&(e.text.placedSymbolArray.get(o).crossTileID=u>=0&&o!==u?0:h),a>=0&&(e.text.placedSymbolArray.get(a).crossTileID=u>=0&&a!==u?0:h),l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=u>=0&&l!==u?0:h)}markUsedOrientation(e,n,i){const r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,s=n===t.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:h}=i,c=e.text.placedSymbolArray;o>=0&&(c.get(o).placedOrientation=r),a>=0&&(c.get(a).placedOrientation=r),l>=0&&(c.get(l).placedOrientation=r),h>=0&&(c.get(h).placedOrientation=s)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const i=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},s=e?e.variableOffsets:{},o=e?e.placedOrientations:{};for(const a in this.placements){const t=this.placements[a],e=r[a];e?(this.opacities[a]=new xe(e,i,t.text,t.icon,null,t.clipped),n=n||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[a]=new xe(null,i,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const a in r){const t=r[a];if(!this.opacities[a]){const e=new xe(t,i,!1,!1);e.isHidden()||(this.opacities[a]=e,n=n||t.text.placed||t.icon.placed)}}for(const a in s)this.variableOffsets[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.variableOffsets[a]=s[a]);for(const a in o)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=o[a]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n={};for(const i of e){const e=i.getBucket(t);e&&i.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,s=!!e.layers[0].dynamicFilter(),o=new xe(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),l=r.get("icon-allow-overlap"),h=r.get("text-variable-anchor"),c="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),p="none"!==r.get("icon-text-fit"),d=new xe(null,0,a&&(l||!e.hasIconData()||r.get("icon-optional")),l&&(a||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const f=(t,e,n)=>{for(let i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)};let m=0;for(let g=0;g<e.symbolInstances.length;g++){const i=e.symbolInstances.get(g),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:a,crossTileID:l,numIconVertices:y}=i;let _=this.opacities[l];n[l]?_=o:_||(_=d,this.opacities[l]=_),n[l]=!0;const v=r>0||a>0,T=y>0,E=this.placedOrientations[l],x=E===t.WritingMode.vertical,I=E===t.WritingMode.horizontal||E===t.WritingMode.horizontalOnly;if(!v&&!T||_.isHidden()||m++,v){const t=Ue(_.text);f(e.text,r,x?Be:t),f(e.text,a,I?Be:t);const n=_.text.isHidden(),{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:h,verticalPlacedTextSymbolIndex:c}=i,u=e.text.placedSymbolArray,p=n||x?1:0;s>=0&&(u.get(s).hidden=p),o>=0&&(u.get(o).hidden=p),h>=0&&(u.get(h).hidden=p),c>=0&&(u.get(c).hidden=n||I?1:0);const d=this.variableOffsets[l];d&&this.markUsedJustification(e,d.anchor,i,E);const m=this.placedOrientations[l];m&&(this.markUsedJustification(e,"left",i,m),this.markUsedOrientation(e,m,i))}if(T){const t=Ue(_.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:r}=i,s=e.icon.placedSymbolArray,o=_.icon.isHidden()?1:0;n>=0&&(f(e.icon,y,x?Be:t),s.get(n).hidden=o),r>=0&&(f(e.icon,i.numVerticalIconVertices,I?Be:t),s.get(r).hidden=o)}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[g];if(n){let i=new t.pointGeometry(0,0),r=!0;if(n.textBox||n.verticalTextBox){if(h){const t=this.variableOffsets[l];t?(i=Ae(t.anchor,t.width,t.height,t.textOffset,t.textScale),c&&i._rotate(u?this.transform.angle:-this.transform.angle)):r=!1}s&&(r=!_.clipped),n.textBox&&De(e.textCollisionBox.collisionVertexArray,_.text.placed,!r||x,i.x,i.y),n.verticalTextBox&&De(e.textCollisionBox.collisionVertexArray,_.text.placed,!r||I,i.x,i.y)}const o=r&&Boolean(!I&&n.verticalIconBox);n.iconBox&&De(e.iconCollisionBox.collisionVertexArray,_.icon.placed,o,p?i.x:0,p?i.y:0),n.verticalIconBox&&De(e.iconCollisionBox.collisionVertexArray,_.icon.placed,!o,p?i.x:0,p?i.y:0)}}}if(e.fullyClipped=0===m,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function De(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}const Oe=Math.pow(2,25),Ne=Math.pow(2,24),Me=Math.pow(2,17),Pe=Math.pow(2,16),Fe=Math.pow(2,9),Le=Math.pow(2,8),ke=Math.pow(2,1);function Ue(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Oe+e*Ne+n*Me+e*Pe+n*Fe+e*Le+n*ke+e}const Be=0;class ze{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,i,r){const s=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(s,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<s.length;){const t=s[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n,0===t.symbolInstanceStart),this._currentPartIndex++,r())return!0}return!1}}class Ge{constructor(t,e,n,i,r,s,o,a){this.placement=new Re(t,r,s,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,n,i){const r=t.exported.now(),s=()=>{const e=t.exported.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new ze(t)),this._inProgressLayer.continuePlacement(i[t.source],this.placement,this._showCollisionBoxes,t,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const He=512/t.EXTENT/2;class Ve{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let i=0;i<e.length;i++){const n=e.get(i),r=n.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,n){const i=He/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.tileAnchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.tileAnchorY)*i)}}findMatches(t,e,n){const i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const s=t.get(r);if(s.crossTileID)continue;const o=this.indexedSymbolInstances[s.key];if(!o)continue;const a=this.getScaledCoordinates(s,e);for(const t of o)if(Math.abs(t.coord.x-a.x)<=i&&Math.abs(t.coord.y-a.y)<=i&&!n[t.crossTileID]){n[t.crossTileID]=!0,s.crossTileID=t.crossTileID;break}}}}class je{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class We{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const n in this.indexes){const t=this.indexes[n],i={};for(const n in t){const r=t[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}this.indexes[n]=i}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const i=this.usedCrossTileIDs[t.overscaledZ];for(const r in this.indexes){const n=this.indexes[r];if(Number(r)>t.overscaledZ)for(const r in n){const s=n[r];s.tileID.isChildOf(t)&&s.findMatches(e.symbolInstances,t,i)}else{const s=n[t.scaledTo(Number(r)).key];s&&s.findMatches(e.symbolInstances,t,i)}}for(let r=0;r<e.symbolInstances.length;r++){const t=e.symbolInstances.get(r);t.crossTileID||(t.crossTileID=n.generate(),i[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ve(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const i of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][i.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e}}class Ye{constructor(){this.layerIndexes={},this.crossTileIDs=new je,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n,i){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new We);let s=!1;const o={};"globe"!==i.name&&r.handleWrapJump(n);for(const a of e){const e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(a.tileID,e,this.crossTileIDs)&&(s=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(s=!0),s}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const n in this.layerIndexes)e[n]||delete this.layerIndexes[n]}}const qe=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Xe=t.pick(jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ze=t.pick(jt,["setCenter","setZoom","setBearing","setPitch"]),Ke={version:8,layers:[],sources:{}},Qe={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Je extends t.Evented{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=e,this.dispatcher=new N(Gt(),this),this.imageManager=new T,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new Ye,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const i=this;this._rtlTextPluginCallback=Je.registerForPluginStateChange((e=>{i.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in i._sourceCaches){const e=i._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const n in this._layers){const t=this._layers[n];t.source===e.id&&this._validateLayer(t)}}))}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"}));const i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,i)}))}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ke,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&qe(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=t.clone$1(e),this._updateMapProjection();for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const i=Vt(this.stylesheet.layers);this._order=i.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let r of i)r=t.createStyleLayer(r),r.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=r,this._serializedLayers[r.id]=r.serialize(),this._updateLayerCount(r,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(e){this._spriteRequest=function(e,n,i){let r,s,o;const a=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,a,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,o||(o=t,r=e,c())})),h=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,a,".png"),t.ResourceType.SpriteImage),((t,e)=>{h=null,o||(o=t,s=e,c())}));function c(){if(o)i(o);else if(r&&s){const e=t.exported.getImageData(s),n={};for(const i in r){const{width:s,height:o,x:a,y:l,sdf:h,pixelRatio:c,stretchX:u,stretchY:p,content:d}=r[i],f=new t.RGBAImage({width:s,height:o});t.RGBAImage.copy(e,f,{x:a,y:l},{x:0,y:0},{width:s,height:o}),n[i]={data:f,pixelRatio:c,sdf:h,stretchX:u,stretchY:p,content:d}}i(null,n)}}return{cancel(){l&&(l.cancel(),l=null),h&&(h.cancel(),h=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const i=e.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'.concat(i,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(e.id,'"'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&Qe[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const i in this._updatedPaintProps)this._layers[i].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const i=this.map.painter;if(i){const t=n.getProgramIds();if(!t)continue;const r=n.getProgramConfiguration(e.zoom);for(const e of t)i.useProgram(e,r)}}for(const r in i){const e=this._sourceCaches[r];i[r]!==e.used&&e.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),qe(this,t.validateStyle(n)))return!1;(n=t.clone$1(n)).layers=Vt(n.layers);const i=function(t,n){if(!t)return[{command:jt.setStyle,args:[n]}];let i=[];try{if(!e(t.version,n.version))return[{command:jt.setStyle,args:[n]}];e(t.center,n.center)||i.push({command:jt.setCenter,args:[n.center]}),e(t.zoom,n.zoom)||i.push({command:jt.setZoom,args:[n.zoom]}),e(t.bearing,n.bearing)||i.push({command:jt.setBearing,args:[n.bearing]}),e(t.pitch,n.pitch)||i.push({command:jt.setPitch,args:[n.pitch]}),e(t.sprite,n.sprite)||i.push({command:jt.setSprite,args:[n.sprite]}),e(t.glyphs,n.glyphs)||i.push({command:jt.setGlyphs,args:[n.glyphs]}),e(t.transition,n.transition)||i.push({command:jt.setTransition,args:[n.transition]}),e(t.light,n.light)||i.push({command:jt.setLight,args:[n.light]}),e(t.fog,n.fog)||i.push({command:jt.setFog,args:[n.fog]}),e(t.projection,n.projection)||i.push({command:jt.setProjection,args:[n.projection]});const r={},s=[];!function(t,n,i,r){let s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(n.hasOwnProperty(s)||Yt(s,i,r));for(s in n)n.hasOwnProperty(s)&&(t.hasOwnProperty(s)?e(t[s],n[s])||("geojson"===t[s].type&&"geojson"===n[s].type&&Xt(t,n,s)?i.push({command:jt.setGeoJSONSourceData,args:[s,n[s].data]}):qt(s,n,i,r)):Wt(s,n,i))}(t.sources,n.sources,s,r);const o=[];t.layers&&t.layers.forEach((t=>{t.source&&r[t.source]?i.push({command:jt.removeLayer,args:[t.id]}):o.push(t)}));let a=t.terrain;a&&r[a.source]&&(i.push({command:jt.setTerrain,args:[void 0]}),a=void 0),i=i.concat(s),e(a,n.terrain)||i.push({command:jt.setTerrain,args:[n.terrain]}),function(t,n,i){n=n||[];const r=(t=t||[]).map(Kt),s=n.map(Kt),o=t.reduce(Qt,{}),a=n.reduce(Qt,{}),l=r.slice(),h=Object.create(null);let c,u,p,d,f,m,g;for(c=0,u=0;c<r.length;c++)p=r[c],a.hasOwnProperty(p)?u++:(i.push({command:jt.removeLayer,args:[p]}),l.splice(l.indexOf(p,u),1));for(c=0,u=0;c<s.length;c++)p=s[s.length-1-c],l[l.length-1-c]!==p&&(o.hasOwnProperty(p)?(i.push({command:jt.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-u),1)):u++,m=l[l.length-c],i.push({command:jt.addLayer,args:[a[p],m]}),l.splice(l.length-c,0,p),h[p]=!0);for(c=0;c<s.length;c++)if(p=s[c],d=o[p],f=a[p],!h[p]&&!e(d,f))if(e(d.source,f.source)&&e(d["source-layer"],f["source-layer"])&&e(d.type,f.type)){for(g in Zt(d.layout,f.layout,i,p,null,jt.setLayoutProperty),Zt(d.paint,f.paint,i,p,null,jt.setPaintProperty),e(d.filter,f.filter)||i.push({command:jt.setFilter,args:[p,f.filter]}),e(d.minzoom,f.minzoom)&&e(d.maxzoom,f.maxzoom)||i.push({command:jt.setLayerZoomRange,args:[p,f.minzoom,f.maxzoom]}),d)d.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Zt(d[g],f[g],i,p,g.slice(6),jt.setPaintProperty):e(d[g],f[g])||i.push({command:jt.setLayerProperty,args:[p,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Zt(d[g],f[g],i,p,g.slice(6),jt.setPaintProperty):e(d[g],f[g])||i.push({command:jt.setLayerProperty,args:[p,g,f[g]]}))}else i.push({command:jt.removeLayer,args:[p]}),m=l[l.lastIndexOf(p)+1],i.push({command:jt.addLayer,args:[f,m]})}(o,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:jt.setStyle,args:[n]}]}return i}(this.serialize(),n).filter((t=>!(t.command in Ze)));if(0===i.length)return!1;const r=i.filter((t=>!(t.command in Xe)));if(r.length>0)throw new Error("Unimplemented: ".concat(r.map((t=>t.command)).join(", "),"."));return i.forEach((t=>{"setTransition"!==t.command&&"setProjection"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(e,n){return this.getImage(e)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,n),this._afterImageUpdated(e),this)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){return this.getImage(e)?(this.imageManager.removeImage(e),this._afterImageUpdated(e),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateSource,"sources.".concat(e),n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=Nt(e,n,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(e),source:r.serialize(),sourceId:e})));const s=n=>{const i=(n?"symbol:":"other:")+e,s=this._sourceCaches[i]=new t.SourceCache(i,r,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=s,s.style=this,s.onAdd(this.map)};s(!1),"vector"!==n.type&&"geojson"!==n.type||s(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(!n)throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while terrain is using it.'))));const i=this._getSourceCaches(e);for(const r of i)delete this._sourceCaches[r.id],delete this._updatedSources[r.id],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r.getSource().id})),r.setEventedParent(null),r.clearTiles();return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}_getSources(){const t=[];for(const e in this._otherSourceCaches){const n=this._getSourceCache(e);n&&t.push(n.getSource())}return t}addLayer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(r,'" already exists on this map'))));let s;if("custom"===e.type){if(qe(this,t.validateCustomStyleLayer(e)))return;s=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateLayer,"layers.".concat(r),e,{arrayIndex:-1},i))return;s=t.createStyleLayer(e),this._validateLayer(s),s.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}const o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=s;const a=this._getLayerSourceCache(s);if(this._removedLayers[r]&&s.source&&a&&"custom"!==s.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==s.type?this._updatedSources[s.source]="clear":(this._updatedSources[s.source]="reload",a.pause())}this._updateLayer(s),s.onAdd&&s.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(r,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be removed."))));n.setEventedParent(null),this._updateLayerCount(n,!1);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot have zoom extent."))))}setFilter(n,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const s=this.getLayer(n);if(s){if(!e(s.filter,i))return null==i?(s.filter=void 0,void this._updateLayer(s)):void(this._validate(t.validateFilter,"layers.".concat(s.id,".filter"),i,{layerType:s.type},r)||(s.filter=t.clone$1(i),this._updateLayer(s)))}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}getFilter(e){const n=this.getLayer(e);return n&&t.clone$1(n.filter)}setLayoutProperty(n,i,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(n);o?e(o.getLayoutProperty(i),r)||(o.setLayoutProperty(i,r,s),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style."))))}setPaintProperty(n,i,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(n);o?e(o.getPaintProperty(i),r)||(o.setPaintProperty(i,r,s)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getPaintProperty(t,e){const n=this.getLayer(t);return n&&n.getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,s=this.getSource(i);if(!s)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))));const o=s.type;if("geojson"===o&&r)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===o&&!r)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const a=this._getSourceCaches(i);for(const t of a)t.setFeatureState(r,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.getSource(i);if(!r)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))));const s=r.type,o="vector"===s?e.sourceLayer:void 0;if("vector"===s&&!o)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const a=this._getSourceCaches(i);for(const t of a)t.removeFeatureState(o,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.getSource(n);if(r){if("vector"!==r.type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},i=[];for(let s=this._order.length-1;s>=0;s--){const r=this._order[s];if(e(r)){n[r]=s;for(const e of t){const t=e[r];if(t)for(const e of t)i.push(e)}}}i.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let s=this._order.length-1;s>=0;s--){const o=this._order[s];if(e(o))for(let t=i.length-1;t>=0;t--){const e=i[t].feature;if(n[e.layer.id]<s)break;r.push(e),i.pop()}else for(const e of t){const t=e[o];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be queried for features.")))),[];r[n.source]=!0}}const s=[];n.availableImages=this._availableImages;const o=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),a=P.createFromScreenPoints(e,i);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!r[e]||s.push(Pt(this._sourceCaches[t],this._layers,this._serializedLayers,a,n,i,o,!!this.map._showQueryGeometry))}return this.placement&&s.push(function(t,e,n,i,r,s,o){const a={},l=s.queryRenderedSymbols(i),h=[];for(const c of Object.keys(l).map(Number))h.push(o[c]);h.sort(Lt);for(const c of h){const n=c.featureIndex.lookupSymbolFeatures(l[c.bucketInstanceId],e,c.bucketIndex,c.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(const t in n){const e=a[t]=a[t]||[],i=n[t];i.sort(((t,e)=>{const n=c.featureSortOrder;if(n){const i=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(const t of i)e.push(t)}}for(const c in a)a[c].forEach((e=>{const i=e.feature,r=n(t[c]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(s)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const i=this._getSourceCaches(e);let r=[];for(const t of i)r=r.concat(Ft(t,n));return r}addSourceType(t,e,n){return Je.getSourceType(t)?n(new Error('A source type called "'.concat(t,'" already exists.'))):(Je.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const i=this.light.getLight();let r=!1;for(const o in t)if(!e(t[o],i[o])){r=!0;break}if(!r)return;const s=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,n),this.light.updateTransitions(s)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===i){if("object"==typeof n.source){const e="terrain-dem-src";this.addSource(e,n.source),n=t.clone$1(n),n=t.extend(n,{source:e})}if(this._validate(t.validateTerrain,"terrain",n))return}if(!this.terrain||this.terrain&&i!==this.terrain.drapeRenderMode)this._createTerrain(n,i);else{const i=this.terrain,r=i.get();for(const e of Object.keys(t.spec.terrain))!n.hasOwnProperty(e)&&t.spec.terrain[e].default&&(n[e]=t.spec.terrain[e].default);for(const t in n)if(!e(n[t],r[t])){i.set(n),this.stylesheet.terrain=n;const t=this._setTransitionParameters({duration:0});i.updateTransitions(t);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const e=this.fog=new O(t,this.map.transform);this.stylesheet.fog=t;const n=this._setTransitionParameters({duration:0});e.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,i=n.get();0===Object.keys(t).length&&n.set(t);for(const r in t)if(!e(t[r],i[r])){n.set(t),this.stylesheet.fog=t;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}else this._createFog(t);this._markersNeedUpdate=!0}_setTransitionParameters(e){return{now:t.exported.now(),transition:t.extend(e,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(t,e){const n=this.terrain=new S(t,e);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const i=this._setTransitionParameters({duration:0});n.updateTransitions(i)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"symbol"===e.type&&this._updateLayer(e)}}_validate(e,n,i,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!s||!1!==s.validate)&&qe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const n of e)n.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const n of e)n.resume(),n.reload()}_reloadSources(){for(const t of this._getSources())t.reload&&t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,i,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!1,a=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng,e.projection);o=o||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ge(e,this._order,s,n,i,r,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const i=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};i(this._otherSourceCaches[e.source]),i(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,i){return t.makeRequest(n,i)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}_isSourceCacheLoaded(e){const n=this._getSourceCaches(e);return 0===n.length?(this.fire(new t.ErrorEvent(new Error("There is no source with ID '".concat(e,"'")))),!1):n.every((t=>t.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Je.getSourceType=function(t){return Ot[t]},Je.setSourceType=function(t,e){Ot[t]=e},Je.registerForPluginStateChange=t.registerForPluginStateChange;var $e="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",tn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",en="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",nn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",rn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let sn={},on={};const an=[];pn($e,an),pn(en,an),pn(nn,an),pn(rn,an),sn=dn("",en),on=dn(rn,nn);const ln=dn("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),hn=$e,cn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var un={background:dn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:dn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:dn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:dn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:dn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:dn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:dn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:dn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:dn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:dn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:dn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:dn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:dn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:dn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:dn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:dn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:dn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:dn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:dn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:dn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:dn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:dn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:dn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:dn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxGradient:dn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxCapture:dn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:dn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:dn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function pn(t,e){const n=t.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let i of n)if(i=i.trim(),"#"===i[0]&&i.includes("if")&&!i.includes("endif")){i=i.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const t=i.split(" ");for(const n of t)e.includes(n)||e.push(n)}}function dn(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),r={},s=[...an];return pn(t,s),pn(e,s),{fragmentSource:t=t.replace(n,((t,e,n,i,s)=>(r[s]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\nvarying ").concat(n," ").concat(i," ").concat(s,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(s,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(s,"\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n")))),vertexSource:e=e.replace(n,((t,e,n,i,s)=>{const o="float"===i?"vec2":"vec4",a=s.match(/color/)?"color":o;return r[s]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\nuniform lowp float u_").concat(s,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(s,";\nvarying ").concat(n," ").concat(i," ").concat(s,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(s,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(s," = a_").concat(s,";\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(s," = unpack_mix_").concat(a,"(a_").concat(s,", u_").concat(s,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\nuniform lowp float u_").concat(s,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(s,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(s,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(n," ").concat(i," ").concat(s," = a_").concat(s,";\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(n," ").concat(i," ").concat(s," = unpack_mix_").concat(a,"(a_").concat(s,", u_").concat(s,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n")})),staticAttributes:i,usedDefines:s}}class fn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,e,n,i,r,s,o){this.context=t;let a=this.boundPaintVertexBuffers.length!==i.length;for(let h=0;!a&&h<i.length;h++)this.boundPaintVertexBuffers[h]!==i[h]&&(a=!0);let l=this.boundDynamicVertexBuffers.length!==o.length;for(let h=0;!l&&h<o.length;h++)this.boundDynamicVertexBuffers[h]!==o[h]&&(l=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||a||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==s)this.freshBind(e,n,i,r,s,o);else{t.bindVertexArrayOES.set(this.vao);for(const t of o)t&&t.bind();r&&r.dynamicDraw&&r.bind()}}freshBind(t,e,n,i,r,s){let o;const a=t.numAttributes,l=this.context,h=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffers=s;else{o=l.currentNumAttributes||0;for(let t=a;t<o;t++)h.disableVertexAttribArray(t)}e.enableAttributes(h,t),e.bind(),e.setVertexAttribPointers(h,t,r);for(const c of n)c.enableAttributes(h,t),c.bind(),c.setVertexAttribPointers(h,t,r);for(const c of s)c&&(c.enableAttributes(h,t),c.bind(),c.setVertexAttribPointers(h,t,r));i&&i.bind(),l.currentNumAttributes=a}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function mn(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.MercatorCoordinate(0,r/i).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}function gn(e,n,i,r,s,o,a){const l=e.context,h=l.gl,c=i.fbo;if(!c)return;e.prepareDrawTile();const u=e.useProgram("hillshade");l.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,c.colorAttachment.get());const p=((t,e,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),s=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color");let a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);const l=!t.options.moving;return{u_matrix:i||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:mn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:s,u_accent:o}})(e,i,r,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,u,n.toUnwrapped());const{tileBoundsBuffer:d,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=e.getTileBoundsBuffers(i);u.draw(l,h.TRIANGLES,s,o,a,t.CullFaceMode.disabled,p,r.id,d,f,m)}function yn(e,n,i){if(!n.needsDEMTextureUpload)return;const r=e.context,s=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(i.stride);const o=i.getPixels();n.demTexture?n.demTexture.update(o,{premultiply:!1}):n.demTexture=new t.Texture(r,o,s.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function _n(e,n,i,r,s,o){const a=e.context,l=a.gl;if(!n.dem)return;const h=n.dem;if(a.activeTexture.set(l.TEXTURE1),yn(e,n,h),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const c=h.dim;a.activeTexture.set(l.TEXTURE0);let u=n.fbo;if(!u){const e=new t.Texture(a,{width:c,height:c,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),u=n.fbo=a.createFramebuffer(c,c,!0),u.colorAttachment.set(e.texture)}a.bindFramebuffer.set(u.framebuffer),a.viewport.set([0,0,c,c]);const{tileBoundsBuffer:p,tileBoundsIndexBuffer:d,tileBoundsSegments:f}=e.getMercatorTileBoundsBuffers();e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,r,s,o,t.CullFaceMode.disabled,((e,n)=>{const i=n.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,h),i.id,p,d,f),n.needsHillshadePrepare=!1}const vn=e=>({u_matrix:new t.UniformMatrix4f(e),u_image0:new t.Uniform1i(e),u_skirt_height:new t.Uniform1f(e)}),Tn=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),En=(t,e,n,i,r,s,o,a,l,h,c,u,p,d)=>({u_proj_matrix:Float32Array.from(t),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(i),u_merc_matrix:n,u_zoom_transition:r,u_merc_center:s,u_image0:0,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:l,u_frustum_bl:h,u_globe_pos:c,u_globe_radius:u,u_viewport:p,u_grid_matrix:d?Float32Array.from(d):new Float32Array(9)});function xn(t,e){return null!=t&&null!=e&&!(!t.hasData()||!e.hasData())&&null!=t.demTexture&&null!=e.demTexture&&t.tileID.key!==e.tileID.key}const In=new class{constructor(){this.operations={}}newMorphing(t,e,n,i,r){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==n.tileID.key&&(e.queued=n)}else this.operations[t]={startTime:i,phase:0,duration:r,from:e,to:n,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},bn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function wn(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const Sn=t=>({u_matrix:t});function An(e,n,i,r,s){if(s>0){const o=t.exported.now(),a=(o-e.timeAdded)/s,l=n?(o-n.timeAdded)/s:-1,h=i.getSource(),c=r.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),u=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),p=u&&e.refreshedUponExpiration?1:t.clamp(u?a:1-l,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}class Cn extends t.SourceCache{constructor(t){const e={type:"raster-dem",maxzoom:t.transform.maxZoom},n=new N(Gt(),null),i=Nt("mock-dem",e,n,t.style);super("mock-dem",i,!1),i.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,e){t.state="loaded",e(null)}}class Rn extends t.SourceCache{constructor(t){const e=Nt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new N(Gt(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,i){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,i)=>{if(n[i.key]="",!this._tiles[i.key]){const n=new t.Tile(i,this._source.tileSize*i.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[i.key]=n}return n}),{});for(const t in this._tiles)t in r||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Dn extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class On extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[i,r,s]=function(e){const n=new t.StructArrayLayout4i8,i=new t.StructArrayLayout3ui6,r=131;n.reserve(17161),i.reserve(33800);const s=t.EXTENT/128,o=t.EXTENT+s/2,a=o+s;for(let h=-s;h<a;h+=s)for(let e=-s;e<a;e+=s){const i=e<0||e>o||h<0||h>o?24575:0,r=t.clamp(Math.round(e),0,t.EXTENT),s=t.clamp(Math.round(h),0,t.EXTENT);n.emplaceBack(r+i,s,r,s)}const l=(t,e)=>{const n=e*r+t;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)})),[n,i,32768]}(),o=e.context;this.gridBuffer=o.createVertexBuffer(i,t.boundsAttributes.members),this.gridIndexBuffer=o.createIndexBuffer(r),this.gridSegments=t.SegmentVector.simpleSegment(0,0,i.length,r.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,i.length,s),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Rn(n.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);const a=o.gl;this._overlapStencilMode=new t.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Cn(n.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,n,i){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const r=e.terrain.properties;this.sourceCache=0===e.terrain.drapeRenderMode?this._mockSourceCache:e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const s=()=>{this.sourceCache.used&&t.warnOnce("Raster DEM source '".concat(this.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));const e=this.getScaledDemTileSize();this.sourceCache.update(n,e,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,s(),this._initializing=!0),s(),n.updateElevation(!0,i),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce("Terrain render cache efficiency is not optimal (".concat(e.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(e.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=i.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,n){const i=n.transform.pointCoordinate(n.transform.getCameraPoint()),r=new t.pointGeometry(i.x,i.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const i=new t.pointGeometry(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),s=new t.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),o=r.mult(1<<e.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(i)-o.distSqr(s)}))}(r,this.painter),this._previousZoom=i.zoom;const s=this.proxyToSource||{};this.proxyToSource={},r.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const o=this._style._sourceCaches;for(const t in o){const n=o[t];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,e[t],s),n.usedForTerrain)continue;const i=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(i)}this.proxiedCoords[n.id]=r.map((t=>new Dn(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(s),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const a={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in a||(this._visibleDemTiles.push(e),a[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),yn(this.painter,i,r))}}_prepareDemTileUniforms(t,e,n,i){if(!e||null==e.demTexture)return!1;const r=t.tileID.canonical,s=Math.pow(2,e.tileID.canonical.z-r.z),o=i||"";return n["u_dem_tl".concat(o)]=[r.x*s%1,r.y*s%1],n["u_dem_scale".concat(o)]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const e=this.painter.context,n=e.gl;if(!this._emptyDepthBufferTexture){const i=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(e,i,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const i=n.dem.tree.minimums[0];return i>0&&t++,e+i}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const i=this._getLoadedAreaMinimum(),r=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(i,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let s=this._emptyDEMTexture;return s?s.update(r,{premultiply:!1}):s=this._emptyDEMTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1}),s}setupElevationDraw(e,n,i){const r=this.painter.context,s=r.gl,o=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var a;o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();let l=null,h=null,c=1;if(i&&i.morphing&&this._useVertexMorphing){const t=i.morphing.srcDemTile,n=i.morphing.dstDemTile;c=i.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,o,"_prev")&&(h=t),this._prepareDemTileUniforms(e,n,o)&&(l=n))}if(h&&l?(r.activeTexture.set(s.TEXTURE2),l.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),r.activeTexture.set(s.TEXTURE4),h.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),o.u_dem_lerp=c):(l=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(s.TEXTURE2),(this._prepareDemTileUniforms(e,l,o)?l.demTexture:this.emptyDEMTexture).bind(s.NEAREST,s.CLAMP_TO_EDGE)),r.activeTexture.set(s.TEXTURE3),i&&i.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),this._depthFBO&&(o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),o.u_depth_size_inv=[1,1]),i&&i.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=e}if(i&&i.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(r,o),"globe"===this.painter.transform.projection.name){const t=this.globeUniformValues(this.painter.transform,e.tileID.canonical,i&&i.useDenormalizedUpVectorScale);n.setGlobeUniformValues(r,t)}}globeUniformValues(e,n,i){const r=e.projection;return{u_tile_tl_up:r.upVector(n,0,0),u_tile_tr_up:r.upVector(n,t.EXTENT,0),u_tile_br_up:r.upVector(n,t.EXTENT,t.EXTENT),u_tile_bl_up:r.upVector(n,0,t.EXTENT),u_tile_up_scale:i?t.GLOBE_METERS_TO_ECEF:r.upVectorScale(n,e.center.lat,e.worldSize).metersToTile}}renderToBackBuffer(e){const n=this.painter,i=this.painter.context;0!==e.length&&(i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(e,n,i,r,s){if("globe"===e.transform.projection.name)!function(e,n,i,r,s){const o=e.context,a=o.gl;let l,h;const c=e.options.showTerrainWireframe?2:0,u=e.transform,p=t.globeUseCustomAntiAliasing(e,o,u),d=(t,n)=>{if(h===t)return;const i=[bn[t],"PROJECTION_GLOBE_VIEW"];p&&i.push("CUSTOM_ANTIALIASING"),n&&i.push(bn[c]),l=e.useProgram("globeRaster",null,i),h=t},f=e.colorModeForRenderPass(),m=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);In.update(s);const g=t.calculateGlobeMercatorMatrix(u),y=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],_=c?[!1,!0]:[!1],v=e.globeSharedBuffers,T=[u.width*t.exported.devicePixelRatio,u.height*t.exported.devicePixelRatio],E=Float32Array.from(u.globeMatrix),x={useDenormalizedUpVectorScale:!0};if(_.forEach((c=>{h=-1;const p=c?a.LINES:a.TRIANGLES;for(const h of r){const r=i.getTile(h),_=t.StencilMode.disabled,I=n.prevTerrainTileForTile[h.key],b=n.terrainTileForTile[h.key];xn(I,b)&&In.newMorphing(h.key,I,b,s,250),o.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const w=In.getMorphValuesForProxy(h.key),S=w?1:0;w&&t.extend$1(x,{morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:t.easeCubicInOut(w.phase)}});const A=t.tileCornersToBounds(h.canonical),C=t.getLatitudinalLod(A.getCenter().lat),R=t.getGridMatrix(h.canonical,A,C,u.worldSize/u._pixelsPerMercatorPixel),D=t.globeNormalizeECEF(t.globeTileBounds(h.canonical)),O=En(u.projMatrix,E,g,D,t.globeToMercatorTransition(u.zoom),y,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,T,R);if(d(S,c),n.setupElevationDraw(r,l,x),e.prepareDrawProgram(o,l,h.toUnwrapped()),v){const[n,i,r]=c?v.getWirefameBuffers(e.context,C):v.getGridBuffers(C);l.draw(o,p,m,_,f,t.CullFaceMode.backCCW,O,"globe_raster",n,i,r)}}})),v){const s=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&s.push("CUSTOM_ANTIALIASING"),l=e.useProgram("globeRaster",null,s);for(const h of r){const{x:r,y:s,z:c}=h.canonical,p=0===s,d=s===(1<<c)-1,[g,_,E,I]=v.getPoleBuffers(c);if(I&&(p||d)){const s=i.getTile(h);o.activeTexture.set(a.TEXTURE0),s.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);let v=t.globePoleMatrixForTile(c,r,u);const b=t.globeNormalizeECEF(t.globeTileBounds(h.canonical)),w=(e,n)=>e.draw(o,a.TRIANGLES,m,t.StencilMode.disabled,f,t.CullFaceMode.disabled,En(u.projMatrix,v,v,b,0,y,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,T),"globe_pole_raster",n,E,I);n.setupElevationDraw(s,l,x),e.prepareDrawProgram(o,l,h.toUnwrapped()),p&&w(l,g),d&&(v=t.scale(t.create(),v,[1,-1,1]),w(l,_))}}}}(e,n,i,r,s);else{const o=e.context,a=o.gl;let l,h;const c=e.options.showTerrainWireframe?2:0,u=(t,n)=>{if(h===t)return;const i=[bn[t]];n&&i.push(bn[c]),l=e.useProgram("terrainRaster",null,i),h=t},p=e.colorModeForRenderPass(),d=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);In.update(s);const f=e.transform,m=6*Math.pow(1.5,22-f.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((c=>{h=-1;const g=c?a.LINES:a.TRIANGLES,[y,_]=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const h of r){const r=i.getTile(h),v=t.StencilMode.disabled,T=n.prevTerrainTileForTile[h.key],E=n.terrainTileForTile[h.key];xn(T,E)&&In.newMorphing(h.key,T,E,s,250),o.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const x=In.getMorphValuesForProxy(h.key),I=x?1:0;let b;x&&(b={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:t.easeCubicInOut(x.phase)}});const w=Tn(h.projMatrix,wn(h.canonical,f.renderWorldCopies)?m/10:m);u(I,c),n.setupElevationDraw(r,l,b),e.prepareDrawProgram(o,l,h.toUnwrapped()),l.draw(o,g,d,v,p,t.CullFaceMode.backCCW,w,"terrain_raster",n.gridBuffer,y,_)}}))}}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,i=this.painter.context,r=this.proxySourceCache,s=this.proxiedCoords[r.id],o=this._drapedRenderBatches.shift(),a=[],l=n.style.order;let h=0;for(const c of s){const s=r.getTileByID(c.proxyTileKey),u=r.proxyCachedFBO[c.key]?r.proxyCachedFBO[c.key][e]:void 0,p=void 0!==u?r.renderCache[u]:this.pool[h++],d=void 0!==u;if(s.texture=p.tex,d&&!p.dirty){a.push(s.tileID);continue}let f;i.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(i.clear({color:t.Color.transparent,stencil:0}),p.dirty=!1);for(let t=o.start;t<=o.end;++t){const e=n.style._layers[l[t]];if(e.isHidden(n.transform.zoom))continue;const r=n.style._getLayerSourceCache(e),s=r?this.proxyToSource[c.key][r.id]:[c];if(!s)continue;const o=s;i.viewport.set([0,0,p.fb.width,p.fb.height]),f!==(r?r.id:null)&&(this._setupStencil(p,s,e,r),f=r?r.id:null),n.renderLayer(n,r,e,o)}this.renderedToTile?(p.dirty=!0,a.push(s.tileID)):d||--h,5===h&&(h=0,this.renderToBackBuffer(a))}return this.renderToBackBuffer(a),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),o.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,i=0,r=0,s=!1;for(let o=0;o<e;++o){const e=t._layers[t.order[o]];this._style.isLayerDraped(e)?(s&&++i,++r):s||(s=!0,n=e.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const i=this._visibleDemTiles.filter((t=>t.dem)).map((i=>{const r=i.tileID,s=1<<r.overscaledZ,{x:o,y:a}=r.canonical,l=o/s,h=(o+1)/s,c=a/s,u=(a+1)/s;return{minx:l,miny:c,maxx:h,maxy:u,t:i.dem.tree.raycastRoot(l,c,h,u,t,e,n),tile:i}}));i.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const r of i){if(null==r.t)return null;const i=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,t,e,n);if(null!=i)return i}return null}_createFBO(){const e=this.painter.context,n=e.gl,i=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const r=new t.Texture(e,{width:i[0],height:i[1],data:null},n.RGBA);r.bind(n.LINEAR,n.CLAMP_TO_EDGE);const s=e.createFramebuffer(i[0],i[1],!1);return s.colorAttachment.set(r.texture),s.depthAttachment=new bt(e,s.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,s.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):s.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:s,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom);return"custom"!==e.type&&!n&&e.hasTransition()}))}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof At){t=!0;break}if(t)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],n=t.isHidden(this.painter.transform.zoom),i=this._style._getLayerSourceCache(t);if("raster"!==t.type||n||!i)continue;const r=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t){const t=An(i.getTile(e),i.findLoadedParent(e,0),i,this.painter.transform,r);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(i.id,e)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const n=[];let i,r=0,s=this._style._layers[t[r]];for(;!this._style.isLayerDraped(s)&&s.isHidden(this.painter.transform.zoom)&&++r<e;)s=this._style._layers[t[r]];for(;r<e;++r){const e=this._style._layers[t[r]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===i&&(i=r):void 0!==i&&(n.push({start:i,end:r-1}),i=void 0))}void 0!==i&&n.push({start:i,end:r-1}),this._drapedRenderBatches=n}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let n=0;n<t.length;++n){const i=Object.values(t[n]);e.renderCachePool.push(...i)}}return}this._clearRasterFadeFromRenderCache();const n=this.proxyCoords,i=this._tilesDirty;for(let s=n.length-1;s>=0;s--){const r=n[s];if(e.getTileByID(r.key),void 0!==e.proxyCachedFBO[r.key]){const n=t[r.key],s=this.proxyToSource[r.key];let o=0;for(const t in s){const e=s[t],r=n[t];if(!r||r.length!==e.length||e.some(((e,n)=>e!==r[n]||i[t]&&i[t].hasOwnProperty(e.key)))){o=-1;break}++o}for(const t in e.proxyCachedFBO[r.key])e.renderCache[e.proxyCachedFBO[r.key][t]].dirty=o<0||o!==Object.values(n).length}}const r=[...this._drapedRenderBatches];r.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const s of r)for(const t of n){if(e.proxyCachedFBO[t.key])continue;let n=e.renderCachePool.pop();void 0===n&&e.renderCache.length<50&&(n=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==n&&(e.proxyCachedFBO[t.key]={},e.proxyCachedFBO[t.key][s.start]=n,e.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,i){if(!i||!this._sourceTilesOverlap[i.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,s=r.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let o;if(n.isTileClipped())o=e.length,this._overlapStencilMode.test={func:s.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:s.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const i=this.painter,r=this.painter.context,s=r.gl;i._tileClippingMaskIDs={},r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const o=i.useProgram("clippingMask");for(const a of e){const e=i._tileClippingMaskIDs[a.key]=--n;o.draw(r,s.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:s.ALWAYS,mask:0},e,255,s.KEEP,s.KEEP,s.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Sn(a.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const i=[e.x,e.y,1,1];t.transformMat4$1(i,i,n.pixelMatrixInverse),t.scale$1(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;const r=n._camera.position,s=t.mercatorZfromAltitude(1,n.center.lat),o=[r[0],r[1],r[2]/s,0],a=t.subtract([],i.slice(0,3),o);t.normalize(a,a);const l=this.raycast(o,a,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(o,o,a,l),o[3]=o[2],o[2]*=s,o):null}drawDepth(){const e=this.painter,n=e.context,i=this.proxySourceCache,r=Math.ceil(e.width),s=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===s||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const e=n.gl,i=n.createFramebuffer(r,s,!0);n.activeTexture.set(e.TEXTURE0);const o=new t.Texture(n,{width:r,height:s,data:null},e.RGBA);o.bind(e.NEAREST,e.CLAMP_TO_EDGE),i.colorAttachment.set(o.texture);const a=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,r,s);i.depthAttachment.set(a),this._depthFBO=i,this._depthTexture=o}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,r,s]),function(e,n,i,r){if("globe"===e.transform.projection.name)return;const s=e.context,o=s.gl;s.clear({depth:1});const a=e.useProgram("terrainDepth"),l=new t.DepthMode(o.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const h of r){const e=i.getTile(h),r=Tn(h.projMatrix,0);n.setupElevationDraw(e,a),a.draw(s,o.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,r,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,i,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,n){if(t.getSource()instanceof Dt)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const i=this.proxiedCoords[t.id]=[],r=this.proxyCoords;for(let o=0;o<r.length;o++){const e=r[o],s=this._findTileCoveringTileID(e,t);if(s){const r=this._createProxiedId(e,s,n[e.key]&&n[e.key][t.id]);i.push(r),this.proxyToSource[e.key][t.id]=[r]}}let s=!1;for(let o=0;o<e.length;o++){const r=t.getTile(e[o]);if(!r||!r.hasData())continue;const a=this._findTileCoveringTileID(r.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==r.tileID.canonical.z){const e=this.proxyToSource[a.tileID.key][t.id],o=this._createProxiedId(a.tileID,r,n[a.tileID.key]&&n[a.tileID.key][t.id]);e?e.splice(e.length-1,0,o):this.proxyToSource[a.tileID.key][t.id]=[o],i.push(o),s=!0}}this._sourceTilesOverlap[t.id]=s}_setupProxiedCoordsForImageSource(e,n,i){if(!e.getSource().loaded())return;const r=this.proxiedCoords[e.id]=[],s=this.proxyCoords,o=e.getSource(),a=new t.pointGeometry(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-a.x),t.min.y=Math.min(t.min.y,e.y-a.y),t.max.x=Math.max(t.max.x,e.x-a.x),t.max.y=Math.max(t.max.y,e.y-a.y),t)),{min:new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),h=(e,n)=>{const i=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),s=t.EXTENT/(1<<e.canonical.z),o=n.wrap+n.canonical.x/(1<<n.canonical.z),a=n.canonical.y/(1<<n.canonical.z);return i+s<o+l.min.x||i>o+l.max.x||r+s<a+l.min.y||r>a+l.max.y};for(let t=0;t<s.length;t++){const o=s[t];for(let t=0;t<n.length;t++){const s=e.getTile(n[t]);if(!s||!s.hasData())continue;if(h(o,s.tileID))continue;const a=this._createProxiedId(o,s,i[o.key]&&i[o.key][e.id]),l=this.proxyToSource[o.key][e.id];l?l.push(a):this.proxyToSource[o.key][e.id]=[a],r.push(a)}}}_createProxiedId(e,n,i){let r=this.orthoMatrix;if(i){const t=i.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const i=e.canonical.z-n.tileID.canonical.z;let s,o,a;r=t.create();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;i>0?(s=t.EXTENT>>i,o=s*((n.tileID.canonical.x<<i)-e.canonical.x+l),a=s*((n.tileID.canonical.y<<i)-e.canonical.y)):(s=t.EXTENT<<-i,o=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-i)),a=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-i))),t.ortho(r,0,s,0,s,0,1),t.translate(r,r,[o,a,0])}return new Dn(n.tileID,e.key,r)}_findTileCoveringTileID(e,n){let i=n.getTile(e);if(i&&i.hasData())return i;const r=this._findCoveringTileCache[n.id],s=r[e.key];if(i=s?n.getTileByID(s):null,i&&i.hasData()||null===s)return i;let o=i?i.tileID:e,a=o.overscaledZ;const l=n.getSource().minzoom,h=[];if(!s){const r=n.getSource().maxzoom;if(e.canonical.z>=r){const i=e.canonical.z-r;n.getSource().reparseOverscaled?(a=Math.max(e.canonical.z+2,n.transform.tileZoom),o=new t.OverscaledTileID(a,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i)):0!==i&&(a=r,o=new t.OverscaledTileID(a,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i))}o.key!==e.key&&(h.push(o.key),i=n.getTile(o))}const c=t=>{h.forEach((e=>{r[e]=t})),h.length=0};for(a-=1;a>=l&&(!i||!i.hasData());a--){i&&c(i.tileID.key);const t=o.calculateScaledKey(a);if(i=n.getTileByID(t),i&&i.hasData())break;const e=r[t];if(null===e)break;void 0===e?h.push(t):i=n.getTileByID(e)}return c(i?i.tileID.key:null),i&&i.hasData()?i:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n=0;const i=new t.StructArrayLayout2ui4,r=131;for(let t=1;t<129;t++){for(let e=1;e<129;e++)n=t*r+e,i.emplaceBack(n,n+1),i.emplaceBack(n,n+r),i.emplaceBack(n+1,n+r),128===t&&i.emplaceBack(n+r,n+r+1);i.emplaceBack(n+1,n+1+r)}return i}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Nn{static cacheKey(t,e,n,i){let r="".concat(e).concat(i?i.cacheKey:"");for(const s of n)t.usedDefines.includes(s)&&(r+="/".concat(s));return r}constructor(e,n,i,r,s,o){const a=e.gl;this.program=a.createProgram();const l=function(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const i=t[n].split(" ");e.push(i.pop())}return e}(i.staticAttributes),h=r?r.getBinderAttributes():[],c=l.concat(h);let u=r?r.defines():[];u=u.concat(o.map((t=>"#define ".concat(t))));const p=u.concat(e.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(cn):cn,cn,hn,ln.fragmentSource,on.fragmentSource,i.fragmentSource).join("\n"),d=u.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",hn,ln.vertexSource,on.vertexSource,sn.vertexSource,i.vertexSource).join("\n"),f=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(f,p),a.compileShader(f),a.attachShader(this.program,f);const m=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(m,d),a.compileShader(m),a.attachShader(this.program,m),this.attributes={},this.numAttributes=c.length;for(let t=0;t<this.numAttributes;t++)c[t]&&(a.bindAttribLocation(this.program,t,c[t]),this.attributes[c[t]]=t);a.linkProgram(this.program),a.deleteShader(m),a.deleteShader(f),this.fixedUniforms=s(e),this.binderUniforms=r?r.getUniforms(e):[],o.includes("TERRAIN")&&(this.terrainUniforms=(e=>({u_dem:new t.Uniform1i(e),u_dem_prev:new t.Uniform1i(e),u_dem_unpack:new t.Uniform4f(e),u_dem_tl:new t.Uniform2f(e),u_dem_scale:new t.Uniform1f(e),u_dem_tl_prev:new t.Uniform2f(e),u_dem_scale_prev:new t.Uniform1f(e),u_dem_size:new t.Uniform1f(e),u_dem_lerp:new t.Uniform1f(e),u_exaggeration:new t.Uniform1f(e),u_depth:new t.Uniform1i(e),u_depth_size_inv:new t.Uniform2f(e),u_meter_to_dem:new t.Uniform1f(e),u_label_plane_matrix_inv:new t.UniformMatrix4f(e)}))(e)),o.includes("GLOBE")&&(this.globeUniforms=(e=>({u_tile_tl_up:new t.Uniform3f(e),u_tile_tr_up:new t.Uniform3f(e),u_tile_br_up:new t.Uniform3f(e),u_tile_bl_up:new t.Uniform3f(e),u_tile_up_scale:new t.Uniform1f(e)}))(e)),o.includes("FOG")&&(this.fogUniforms=(e=>({u_fog_matrix:new t.UniformMatrix4f(e),u_fog_range:new t.Uniform2f(e),u_fog_color:new t.Uniform4f(e),u_fog_horizon_blend:new t.Uniform1f(e),u_fog_temporal_offset:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_globe_transition:new t.Uniform1f(e),u_is_globe:new t.Uniform1i(e),u_viewport:new t.Uniform2f(e)}))(e))}}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setGlobeUniformValues(t,e){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(this.program,t,e[t])}}draw(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){const m=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(s);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,o[y]);d&&d.setUniforms(this.program,t,this.binderUniforms,u,{zoom:p});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[e];for(const y of c.get()){const n=y.vaos||(y.vaos={});(n[a]||(n[a]=new fn)).bind(t,this,l,d?d.getPaintVertexBuffers():[],h,y.vertexOffset,f||[]),m.drawElements(e,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Mn(t,e){const n=Math.pow(2,e.tileID.overscaledZ),i=e.tileSize*Math.pow(2,t.transform.tileZoom)/n,r=i*(e.tileID.canonical.x+e.tileID.wrap*n),s=i*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_tile_units_to_pixels:1/M(e,1,t.transform.tileZoom),u_pixel_coord_upper:[r>>16,s>>16],u_pixel_coord_lower:[65535&r,65535&s]}}const Pn=t.create(),Fn=(e,n,i,r,s,o,a,l,h,c,u)=>{const p=n.style.light,d=p.properties.get("position"),f=[d.x,d.y,d.z],m=t.create$1();"viewport"===p.properties.get("anchor")&&(t.fromRotation(m,-n.transform.angle),t.transformMat3(f,f,m));const g=p.properties.get("color"),y=n.transform,_={u_matrix:e,u_lightpos:f,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+i,u_opacity:r,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Pn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:s,u_edge_radius:o};return"globe"===y.projection.name&&(_.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],_.u_zoom_transition=h,_.u_inv_rot_matrix=u,_.u_merc_center=c,_.u_up_dir=y.projection.upVector(new t.CanonicalTileID(0,0,0),c[0]*t.EXTENT,c[1]*t.EXTENT),_.u_height_lift=l),_},Ln=(e,n,i,r,s,o,a,l,h,c,u,p)=>{const d=Fn(e,n,i,r,s,o,a,h,c,u,p),f={u_height_factor:-Math.pow(2,a.overscaledZ)/l.tileSize/8};return t.extend(d,Mn(n,l),f)},kn=t=>({u_matrix:t}),Un=(e,n,i)=>t.extend(kn(e),Mn(n,i)),Bn=(t,e)=>({u_matrix:t,u_world:e}),zn=(e,n,i,r)=>t.extend(Un(e,n,i),{u_world:r}),Gn=t.create(),Hn=(e,n,i,r,s,o)=>{const a=e.transform,l="globe"===a.projection.name;let h;if("map"===o.paint.get("circle-pitch-alignment"))if(l){const e=t.globePixelsToTileUnits(a.zoom,n.canonical)*a._pixelsPerMercatorPixel;h=Float32Array.from([e,0,0,e])}else h=a.calculatePixelsToTileUnitsMatrix(i);else h=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const c={u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:h,u_inv_rot_matrix:Gn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){c.u_inv_rot_matrix=r,c.u_merc_center=s,c.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],c.u_zoom_transition=t.globeToMercatorTransition(a.zoom);const e=s[0]*t.EXTENT,i=s[1]*t.EXTENT;c.u_up_dir=a.projection.upVector(new t.CanonicalTileID(0,0,0),e,i)}return c},Vn=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},jn=(e,n,i,r)=>{const s=t.EXTENT/i.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.getCameraToCenterDistance(r),u_extrude_scale:[n.pixelsToGLUnits[0]/s,n.pixelsToGLUnits[1]/s]}},Wn=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Yn=t.create(),qn=(e,n,i,r,s,o,a)=>{const l=e.transform,h="globe"===l.projection.name,c=h?t.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:M(i,1,o),u={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:a,u_inv_rot_matrix:Yn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(h){u.u_inv_rot_matrix=r,u.u_merc_center=s,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=t.globeToMercatorTransition(l.zoom);const e=s[0]*t.EXTENT,i=s[1]*t.EXTENT;u.u_up_dir=l.projection.upVector(new t.CanonicalTileID(0,0,0),e,i)}return u},Xn=(t,e,n,i,r,s,o)=>{const a=t.transform,l=a.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:Qn(t,e,n,i),u_pixels_to_tile_units:l,u_device_pixel_ratio:s,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:r,u_texsize:Jn(n)?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Kn(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:o}},Zn=(t,e,n,i,r)=>{const s=t.transform;return{u_matrix:Qn(t,e,n,i),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:s.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:r,u_image:0,u_tile_units_to_pixels:Kn(e,s),u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Kn(t,e){return 1/M(t,1,e.tileZoom)}function Qn(t,e,n,i){return t.translatePosMatrix(i||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Jn(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const $n=(t,e,n,i,r,s)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:ti(r.paint.get("raster-hue-rotate")),u_perspective_transform:s};var o,a};function ti(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const ei=t.create(),ni=(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g)=>{const y=s.transform,_={u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+i,u_aspect_ratio:y.width/y.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+h,u_pitch_with_map:+r,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ei,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ei,u_up_vector:[0,-1,0]};return"globe"===g.name&&(_.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],_.u_zoom_transition=p,_.u_inv_rot_matrix=f,_.u_merc_center=d,_.u_camera_forward=y._camera.forward(),_.u_ecef_origin=t.globeECEFOrigin(y.globeMatrix,u.toUnwrapped()),_.u_tile_matrix=Float32Array.from(y.globeMatrix),_.u_up_vector=m),_},ii=(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y)=>t.extend(ni(e,n,i,r,s,o,a,l,h,c,p,d,f,m,g,y),{u_gamma_scale:r?s.transform.cameraToCenterDistance*Math.cos(s.terrain?0:s.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+u}),ri=(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g)=>t.extend(ii(e,n,i,r,s,o,a,l,!0,h,!0,u,p,d,f,m,g),{u_texsize_icon:c,u_texture_icon:1}),si=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),oi=(e,n,i,r,s)=>t.extend(function(t,e,n){const i=e.imageManager.getPattern(t.toString()),{width:r,height:s}=e.imageManager.getPixelSize(),o=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,e.transform.tileZoom)/o,l=a*(n.tileID.canonical.x+n.tileID.wrap*o),h=a*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:i.tl,u_pattern_br:i.br,u_texsize:[r,s],u_pattern_size:i.displaySize,u_tile_units_to_pixels:1/M(n,1,e.transform.tileZoom),u_pixel_coord_upper:[l>>16,h>>16],u_pixel_coord_lower:[65535&l,65535&h]}}(r,i,s),{u_matrix:e,u_opacity:n}),ai={fillExtrusion:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e)}),fillExtrusionPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_height_factor:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e)}),fill:e=>({u_matrix:new t.UniformMatrix4f(e)}),fillPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),fillOutline:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e)}),fillOutlinePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),circle:e=>({u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),collisionBox:e=>({u_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.Uniform2f(e)}),collisionCircle:e=>({u_matrix:new t.UniformMatrix4f(e),u_inv_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_viewport_size:new t.Uniform2f(e)}),debug:e=>({u_color:new t.UniformColor(e),u_matrix:new t.UniformMatrix4f(e),u_overlay:new t.Uniform1i(e),u_overlay_scale:new t.Uniform1f(e)}),clippingMask:e=>({u_matrix:new t.UniformMatrix4f(e)}),heatmap:e=>({u_extrude_scale:new t.Uniform1f(e),u_intensity:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),heatmapTexture:e=>({u_image:new t.Uniform1i(e),u_color_ramp:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e)}),hillshade:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_latrange:new t.Uniform2f(e),u_light:new t.Uniform2f(e),u_shadow:new t.UniformColor(e),u_highlight:new t.UniformColor(e),u_accent:new t.UniformColor(e)}),hillshadePrepare:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_dimension:new t.Uniform2f(e),u_zoom:new t.Uniform1f(e),u_unpack:new t.Uniform4f(e)}),line:e=>({u_matrix:new t.UniformMatrix4f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_units_to_pixels:new t.Uniform2f(e),u_dash_image:new t.Uniform1i(e),u_gradient_image:new t.Uniform1i(e),u_image_height:new t.Uniform1f(e),u_texsize:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e),u_trim_offset:new t.Uniform2f(e)}),linePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_texsize:new t.Uniform2f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_units_to_pixels:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e)}),raster:e=>({u_matrix:new t.UniformMatrix4f(e),u_tl_parent:new t.Uniform2f(e),u_scale_parent:new t.Uniform1f(e),u_fade_t:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_image0:new t.Uniform1i(e),u_image1:new t.Uniform1i(e),u_brightness_low:new t.Uniform1f(e),u_brightness_high:new t.Uniform1f(e),u_saturation_factor:new t.Uniform1f(e),u_contrast_factor:new t.Uniform1f(e),u_spin_weights:new t.Uniform3f(e),u_perspective_transform:new t.Uniform2f(e)}),symbolIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_texture:new t.Uniform1i(e)}),symbolSDF:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_is_halo:new t.Uniform1i(e)}),symbolTextAndIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texsize_icon:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_texture_icon:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_is_halo:new t.Uniform1i(e)}),background:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_color:new t.UniformColor(e)}),backgroundPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_pattern_tl:new t.Uniform2f(e),u_pattern_br:new t.Uniform2f(e),u_texsize:new t.Uniform2f(e),u_pattern_size:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),terrainRaster:vn,terrainDepth:vn,skybox:e=>({u_matrix:new t.UniformMatrix4f(e),u_sun_direction:new t.Uniform3f(e),u_cubemap:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxGradient:e=>({u_matrix:new t.UniformMatrix4f(e),u_color_ramp:new t.Uniform1i(e),u_center_direction:new t.Uniform3f(e),u_radius:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxCapture:e=>({u_matrix_3f:new t.UniformMatrix3f(e),u_sun_direction:new t.Uniform3f(e),u_sun_intensity:new t.Uniform1f(e),u_color_tint_r:new t.Uniform4f(e),u_color_tint_m:new t.Uniform4f(e),u_luminance:new t.Uniform1f(e)}),globeRaster:e=>({u_proj_matrix:new t.UniformMatrix4f(e),u_globe_matrix:new t.UniformMatrix4f(e),u_normalize_matrix:new t.UniformMatrix4f(e),u_merc_matrix:new t.UniformMatrix4f(e),u_zoom_transition:new t.Uniform1f(e),u_merc_center:new t.Uniform2f(e),u_image0:new t.Uniform1i(e),u_grid_matrix:new t.UniformMatrix3f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_viewport:new t.Uniform2f(e)}),globeAtmosphere:e=>({u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_horizon:new t.Uniform1f(e),u_transition:new t.Uniform1f(e),u_fadeout_range:new t.Uniform1f(e),u_color:new t.Uniform4f(e),u_high_color:new t.Uniform4f(e),u_space_color:new t.Uniform4f(e),u_star_intensity:new t.Uniform1f(e),u_star_density:new t.Uniform1f(e),u_star_size:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e),u_horizon_angle:new t.Uniform1f(e),u_rotation_matrix:new t.UniformMatrix4f(e)})};let li;function hi(e,n,i,r,s,o,a){const l=e.context,h=l.gl,c=e.transform,u=e.useProgram("collisionBox"),p=[];let d=0,f=0;for(let E=0;E<r.length;E++){const m=r[E],g=n.getTile(m),y=g.getBucket(i);if(!y)continue;const _=ve(m,y,c);let v=_;0===s[0]&&0===s[1]||(v=e.translatePosMatrix(_,g,s,o));const T=a?y.textCollisionBox:y.iconCollisionBox,x=y.collisionCircleArray;if(x.length>0){const e=t.create(),n=v;t.mul(e,y.placementInvProjMatrix,c.glCoordMatrix),t.mul(e,e,y.placementViewportMatrix),p.push({circleArray:x,circleOffset:f,transform:n,invTransform:e,projection:y.getProjection()}),d+=x.length/4,f=d}T&&(e.terrain&&e.terrain.setupElevationDraw(g,u),u.draw(l,h.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,jn(v,c,g,y.getProjection()),i.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,null,c.zoom,null,[T.collisionVertexBuffer,T.collisionVertexBufferExt]))}if(!a||!p.length)return;const m=e.useProgram("collisionCircle"),g=new t.StructArrayLayout2f1f2i16;g.resize(4*d),g._trim();let y=0;for(const t of p)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],s=t.circleArray[n+2],o=t.circleArray[n+3];g.emplace(y++,i,r,s,o,0),g.emplace(y++,i,r,s,o,1),g.emplace(y++,i,r,s,o,2),g.emplace(y++,i,r,s,o,3)}(!li||li.length<2*d)&&(li=function(e){const n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(d));const _=l.createIndexBuffer(li,!0),v=l.createVertexBuffer(g,t.collisionCircleLayout.members,!0);for(const E of p){const n={u_matrix:E.transform,u_inv_matrix:E.invTransform,u_camera_to_center_distance:(T=c).getCameraToCenterDistance(E.projection),u_viewport_size:[T.width,T.height]};m.draw(l,h.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,n,i.id,v,_,t.SegmentVector.simpleSegment(0,2*E.circleOffset,E.circleArray.length,E.circleArray.length/2),null,c.zoom)}var T;v.destroy(),_.destroy()}const ci=t.create();function ui(e,n){let{width:i,height:r,anchor:s,textOffset:o,textScale:a}=e;const{horizontalAlign:l,verticalAlign:h}=t.getAnchorAlignment(s),c=-(l-.5)*i,u=-(h-.5)*r,p=t.evaluateVariableOffset(s,o);return new t.pointGeometry((c/a+p[0])*n,(u/a+p[1])*n)}function pi(e,n,i,r,s,o,a,l,h,c,u){const p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={},g=e.getProjection(),y=Te(l,g,o),_=o.elevation,v=g.upVectorScale(l.canonical,o.center.lat,o.worldSize).metersToTile;d.clear();for(let T=0;T<p.length;T++){const f=p.get(T),{tileAnchorX:E,tileAnchorY:x,numGlyphs:I}=f,b=e.allowVerticalPlacement&&!f.placedOrientation,w=f.hidden||!f.crossTileID||b?null:r[f.crossTileID];if(w){let r=0,p=0,T=0;if(_){const t=_?_.getAtTileOffset(l,E,x):0,[e,n,i]=g.upVector(l.canonical,E,x);r=t*e*v,p=t*n*v,T=t*i*v}let[b,S,A,C]=re(f.projectedAnchorX+r,f.projectedAnchorY+p,f.projectedAnchorZ+T,i?y:a);const R=se(o.getCameraToCenterDistance(g),C);let D=s.evaluateSizeForFeature(e.textSizeData,c,f)*R/t.ONE_EM;i&&(D*=e.tilePixelRatio/h);const O=ui(w,D);i?(({x:b,y:S,z:A}=g.projectTilePoint(E+O.x,x+O.y,l.canonical)),[b,S,A]=re(b+r,S+p,A+T,a)):(n&&O._rotate(-o.angle),b+=O.x,S+=O.y,A=0);const N=e.allowVerticalPlacement&&f.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<I;e++)t.addDynamicAttributes(d,b,S,A,N);u&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={x:b,y:S,z:A,angle:N})}else fe(I,d)}if(u){f.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e),{numGlyphs:r}=i,s=m[e];if(i.hidden||!s)fe(r,f);else{const{x:e,y:n,z:i,angle:o}=s;for(let s=0;s<r;s++)t.addDynamicAttributes(f,e,n,i,o)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function di(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function fi(e,n,i,r,s,o,a,l,h,c,u,p){const d=e.context,f=d.gl,m=e.transform,g="map"===l,y="map"===h,_=g&&"point"!==i.layout.get("symbol-placement"),v=g&&!y&&!_,T=void 0!==i.layout.get("symbol-sort-key").constantOr(1);let E=!1;const x=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),I=[t.mercatorXfromLng(m.center.lng),t.mercatorYfromLat(m.center.lat)],b=i.layout.get("text-variable-anchor"),w="globe"===m.projection.name,S=[],A=[0,-1,0];let C=A;!w&&!m.mercatorFromTransition||g||(C=function(e){const n=e._camera.getWorldToCamera(e.worldSize,1),i=t.multiply([],n,e.globeMatrix);t.invert(i,i);const r=[0,0,0],s=[0,1,0,0];return t.transformMat4$1(s,s,i),r[0]=s[0],r[1]=s[1],r[2]=s[2],t.normalize(r,r),r}(m));for(const R of r){const r=n.getTile(R),l=r.getBucket(i);if(!l)continue;if("mercator"===l.projection.name&&w)continue;const h=s?l.text:l.icon;if(!h||l.fullyClipped||!h.segments.get().length)continue;const u=h.programConfigurations.get(i.id),p=s||l.sdfIcons,d=s?l.textSizeData:l.iconSizeData,x=y||0!==m.pitch,D=t.evaluateSizeForZoom(d,m.zoom);let O,N,M,P,F=[0,0],L=null;if(s){if(N=r.glyphAtlasTexture,M=f.LINEAR,O=r.glyphAtlasTexture.size,l.iconsInText){F=r.imageAtlasTexture.size,L=r.imageAtlasTexture;const t="composite"===d.kind||"camera"===d.kind;P=x||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==i.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;N=r.imageAtlasTexture,M=p||e.options.rotating||e.options.zooming||t||x?f.LINEAR:f.NEAREST,O=r.imageAtlasTexture.size}const k="globe"===l.projection.name,U=k?C:A,B=k?t.globeToMercatorTransition(m.zoom):0,z=Te(R,l.getProjection(),m),G=m.calculatePixelsToTileUnitsMatrix(r),H=ee(z,r.tileID.canonical,y,g,m,l.getProjection(),G),V=e.terrain&&y&&_?t.invert(t.create(),H):ci,j=ie(z,r.tileID.canonical,y,g,m,l.getProjection(),G),W=b&&l.hasTextData(),Y="none"!==i.layout.get("icon-text-fit")&&W&&l.hasIconData();if(_){const t=m.elevation,n=t?t.getAtTileOffsetFunc(R,m.center.lat,m.worldSize,l.getProjection()):null,i=ne(z,r.tileID.canonical,y,g,m,l.getProjection(),G);ae(l,z,e,s,i,j,y,c,n,R)}const q=_||s&&b||Y,X=e.translatePosMatrix(z,r,o,a),Z=q?ci:H,K=e.translatePosMatrix(j,r,o,a,!0),Q=l.getProjection().createInversionMatrix(m,R.canonical),J=[];e.terrainRenderModeElevated()&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),k&&J.push("PROJECTION_GLOBE_VIEW"),q&&J.push("PROJECTED_POS_ON_VIEWPORT");const $=p&&0!==i.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1);let tt;tt=p?l.iconsInText?ri(d.kind,D,v,y,e,X,Z,K,O,F,R,B,I,Q,U,l.getProjection()):ii(d.kind,D,v,y,e,X,Z,K,s,O,!0,R,B,I,Q,U,l.getProjection()):ni(d.kind,D,v,y,e,X,Z,K,s,O,R,B,I,Q,U,l.getProjection());const et={program:e.useProgram(di(p,s,l),u,J),buffers:h,uniformValues:tt,atlasTexture:N,atlasTextureIcon:L,atlasInterpolation:M,atlasInterpolationIcon:P,isSDF:p,hasHalo:$,tile:r,labelPlaneMatrixInv:V};if(T&&l.canOverlap){E=!0;const e=h.segments.get();for(const n of e)S.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:et})}else S.push({segments:h.segments,sortKey:0,state:et})}E&&S.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of S){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!w,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),d.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,mi(n.buffers,t.segments,i,e,n.program,x,u,p,r)),r.u_is_halo=0}mi(n.buffers,t.segments,i,e,n.program,x,u,p,n.uniformValues)}}function mi(e,n,i,r,s,o,a,l,h){const c=r.context,u=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.globeExtVertexBuffer];s.draw(c,c.gl.TRIANGLES,o,a,l,t.CullFaceMode.disabled,h,i.id,e.layoutVertexBuffer,e.indexBuffer,n,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),u)}function gi(e,n,i,r,s,o,a){const l=e.context.gl,h=i.paint.get("fill-pattern"),c=h&&h.constantOr(1);let u,p,d,f,m;a?(p=c&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=l.LINES):(p=c?"fillPattern":"fill",u=l.TRIANGLES);for(const g of r){const r=n.getTile(g);if(c&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;e.prepareDrawTile();const _=y.programConfigurations.get(i.id),v=e.useProgram(p,_);c&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),_.updatePaintBuffers());const T=h.constantOr(null);if(T&&r.imageAtlas){const t=r.imageAtlas.patternPositions[T.toString()];t&&_.setConstantPatternPositions(t)}const E=e.translatePosMatrix(g.projMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){f=y.indexBuffer2,m=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];d="fillOutlinePattern"===p&&c?zn(E,e,r,t):Bn(E,t)}else f=y.indexBuffer,m=y.segments,d=c?Un(E,e,r):kn(E);e.prepareDrawProgram(e.context,v,g.toUnwrapped()),v.draw(e.context,u,s,e.stencilModeForClipping(g),o,t.CullFaceMode.disabled,d,i.id,y.layoutVertexBuffer,f,m,i.paint,e.transform.zoom,_)}}function yi(e,n,i,r,s,o,a){const l=e.context,h=l.gl,c=e.transform,u=i.paint.get("fill-extrusion-pattern"),p=u.constantOr(1),d=i.paint.get("fill-extrusion-opacity"),f=[i.paint.get("fill-extrusion-ambient-occlusion-intensity"),i.paint.get("fill-extrusion-ambient-occlusion-radius")],m=i.layout.get("fill-extrusion-edge-radius"),g="globe"===c.projection.name?t.fillExtrusionHeightLift():0,y="globe"===c.projection.name,_=y?t.globeToMercatorTransition(c.zoom):0,v=[t.mercatorXfromLng(c.center.lng),t.mercatorYfromLat(c.center.lat)],T=[];y&&(T.push("PROJECTION_GLOBE_VIEW"),e.style.terrainSetForDrapingOnly()&&T.push("TERRAIN")),f[0]>0&&T.push("FAUX_AO");for(const E of r){const r=n.getTile(E),x=r.getBucket(i);if(!x||x.projection.name!==c.projection.name)continue;const I=x.programConfigurations.get(i.id),b=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",I,T);if(e.terrain){const t=e.terrain;if(e.style.terrainSetForDrapingOnly())t.setupElevationDraw(r,b,{useMeterToDem:!0});else{if(!x.enableTerrain)continue;if(t.setupElevationDraw(r,b,{useMeterToDem:!0}),_i(l,n,E,x,i,t),!x.centroidVertexBuffer){const t=b.attributes.a_centroid_pos;void 0!==t&&h.vertexAttrib2f(t,0,0)}}}p&&(e.context.activeTexture.set(h.TEXTURE0),r.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),I.updatePaintBuffers());const w=u.constantOr(null);if(w&&r.imageAtlas){const t=r.imageAtlas.patternPositions[w.toString()];t&&I.setConstantPatternPositions(t)}const S=e.translatePosMatrix(E.projMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),A=c.projection.createInversionMatrix(c,E.canonical),C=i.paint.get("fill-extrusion-vertical-gradient"),R=p?Ln(S,e,C,d,f,m,E,r,g,_,v,A):Fn(S,e,C,d,f,m,E,g,_,v,A);e.prepareDrawProgram(l,b,E.toUnwrapped());const D=[];e.terrain&&D.push(x.centroidVertexBuffer),y&&D.push(x.layoutVertexExtBuffer),b.draw(l,l.gl.TRIANGLES,s,o,a,t.CullFaceMode.backCCW,R,i.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,i.paint,e.transform.zoom,I,D)}}function _i(e,n,i,r,s,o){const a=[e=>{let n=e.canonical.x-1,i=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,i--),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,i=e.wrap;return n===1<<e.canonical.z&&(n=0,i++),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().minzoom,i=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(s)},r=[0,-1,1];for(const n of r){if(t.overscaledZ+n<e)continue;const r=i(t.calculateScaledKey(t.overscaledZ+n));if(r)return r}},h=[0,0,0],c=(e,n)=>(h[0]=Math.min(e.min.y,n.min.y),h[1]=Math.max(e.max.y,n.max.y),h[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,h),u=(e,n)=>(h[0]=Math.min(e.min.x,n.min.x),h[1]=Math.max(e.max.x,n.max.x),h[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,h),p=[(t,e)=>c(t,e),(t,e)=>c(e,t),(t,e)=>u(t,e),(t,e)=>u(e,t)],d=new t.pointGeometry(0,0);let f,m,g;const y=(e,n,r,s,a)=>{const l=[[s?r:e,s?e:r,0],[s?r:n,s?n:r,0]],h=a<0?t.EXTENT+a:a,c=[s?h:(e+n)/2,s?(e+n)/2:h,0];return 0===r&&a<0||0!==r&&a>0?o.getForTilePoints(g,[c],!0,m):l.push(c),o.getForTilePoints(i,l,!0,f),Math.max(l[0][2],l[1][2],c[2])/o.exaggeration()};for(let _=0;_<4;_++){const e=(_<2?1:5)-_,n=r.borders[_];if(0===n.length)continue;const s=g=a[_](i),h=l(s);if(!(h&&h instanceof t.FillExtrusionBucket&&h.enableTerrain))continue;if(r.borderDoneWithNeighborZ[_]===h.canonical.z&&h.borderDoneWithNeighborZ[e]===r.canonical.z)continue;if(m=o.findDEMTileFor(s),!m||!m.dem)continue;if(!f){const t=o.findDEMTileFor(i);if(!t||!t.dem)return;f=t}const c=h.borders[e];let u=0;const v=h.borderDoneWithNeighborZ[e]!==r.canonical.z;if(r.canonical.z===h.canonical.z){for(let i=0;i<n.length;i++){const s=r.featuresOnBorder[n[i]],o=s.borders[_];let a;for(;u<c.length&&(a=h.featuresOnBorder[c[u]],!(a.borders[e][1]>o[0]+3));)v&&h.encodeCentroid(void 0,a,!1),u++;if(a&&u<c.length){const n=u;let i=0;for(;!(a.borders[e][0]>o[1]-3)&&(i++,++u!==c.length);)a=h.featuresOnBorder[c[u]];if(a=h.featuresOnBorder[c[n]],s.intersectsCount()>1||a.intersectsCount()>1||1!==i){1!==i&&(u=n),r.encodeCentroid(void 0,s,!1),v&&h.encodeCentroid(void 0,a,!1);continue}const l=p[_](s,a),f=_%2?t.EXTENT-1:0;d.x=y(l[0],Math.min(t.EXTENT-1,l[1]),f,_<2,l[2]),d.y=0,r.encodeCentroid(d,s,!1),v&&h.encodeCentroid(d,a,!1)}else r.encodeCentroid(void 0,s,!1)}r.borderDoneWithNeighborZ[_]=h.canonical.z,r.needsCentroidUpdate=!0,v&&(h.borderDoneWithNeighborZ[e]=r.canonical.z,h.needsCentroidUpdate=!0)}else{for(const t of n)r.encodeCentroid(void 0,r.featuresOnBorder[t],!1);if(v){for(const t of c)h.encodeCentroid(void 0,h.featuresOnBorder[t],!1);h.borderDoneWithNeighborZ[e]=r.canonical.z,h.needsCentroidUpdate=!0}r.borderDoneWithNeighborZ[_]=h.canonical.z,r.needsCentroidUpdate=!0}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}const vi=new t.Color(1,0,0,1),Ti=new t.Color(0,1,0,1),Ei=new t.Color(0,0,1,1),xi=new t.Color(1,0,1,1),Ii=new t.Color(0,1,1,1);function bi(e,n,i){const r=e.context,s=e.transform,o=r.gl,a="globe"===s.projection.name,l=a?["PROJECTION_GLOBE_VIEW"]:null;let h=i.projMatrix;if(a&&t.globeToMercatorTransition(s.zoom)>0){const e=t.transitionTileAABBinECEF(i.canonical,s),n=t.globeDenormalizeECEF(e);h=t.multiply(new Float32Array(16),s.globeMatrix,n),t.multiply(h,s.projMatrix,h)}const c=e.useProgram("debug",null,l),u=n.getTileByID(i.key);e.terrain&&e.terrain.setupElevationDraw(u,c);const p=t.DepthMode.disabled,d=t.StencilMode.disabled,f=e.colorModeForRenderPass(),m="$debug";r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),a?u._makeGlobeTileDebugBuffers(e.context,s):u._makeDebugTileBoundsBuffers(e.context,s.projection);const g=u._tileDebugBuffer||e.debugBuffer,y=u._tileDebugIndexBuffer||e.debugIndexBuffer,_=u._tileDebugSegments||e.debugSegments;c.draw(r,o.LINE_STRIP,p,d,f,t.CullFaceMode.disabled,Wn(h,t.Color.red),m,g,y,_,null,null,null,[u._globeTileDebugBorderBuffer]);const v=u.latestRawTileData,T=Math.floor((v&&v.byteLength||0)/1024),E=n.getTile(i).tileSize,x=512/Math.min(E,512)*(i.overscaledZ/s.zoom)*.5;let I=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(I+=" => ".concat(i.overscaledZ)),I+=" ".concat(T,"kb"),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,I);const b=u._tileDebugTextBuffer||e.debugBuffer,w=u._tileDebugTextIndexBuffer||e.quadTriangleIndexBuffer,S=u._tileDebugTextSegments||e.debugSegments;c.draw(r,o.TRIANGLES,p,d,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Wn(h,t.Color.transparent,x),m,b,w,S,null,null,null,[u._globeTileDebugTextBuffer])}function wi(t,e,n,i){Ai(t,0,e+n/2,t.transform.width,n,i)}function Si(t,e,n,i){Ai(t,e-n/2,0,n,t.transform.height,i)}function Ai(e,n,i,r,s,o){const a=e.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,s*t.exported.devicePixelRatio),a.clear({color:o}),l.disable(l.SCISSOR_TEST)}const Ci=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ri}=Ci;function Di(t,e,n,i){t.emplaceBack(e,n,i)}class Oi{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Di(this.vertexArray,-1,-1,1),Di(this.vertexArray,1,-1,1),Di(this.vertexArray,-1,1,1),Di(this.vertexArray,1,1,1),Di(this.vertexArray,-1,-1,-1),Di(this.vertexArray,1,-1,-1),Di(this.vertexArray,-1,1,-1),Di(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Ri),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Ni(e,n,i,r,s,o){const a=e.gl,l=n.paint.get("sky-atmosphere-color"),h=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),u=((t,e,n,i,r)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(t.fromMat4(t.create$1(),r),s,c,l,h);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+o,n.skyboxTexture,0),i.draw(e,a.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,u,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Mi=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Pi{constructor(e){const n=new t.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const i=new t.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=e.createVertexBuffer(n,Mi.members),this.indexBuffer=e.createIndexBuffer(i),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Fi={symbol:function(e,n,i,r,s){if("translucent"!==e.renderPass)return;const o=t.StencilMode.disabled,a=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,s,o,a){const l=n.transform,h="map"===s,c="map"===o;for(const u of e){const e=r.getTile(u),n=e.getBucket(i);if(!n||!n.text||!n.text.segments.get().length)continue;const s=t.evaluateSizeForZoom(n.textSizeData,l.zoom),o=Te(u,n.getProjection(),l),p=l.calculatePixelsToTileUnitsMatrix(e),d=ee(o,e.tileID.canonical,c,h,l,n.getProjection(),p),f="none"!==i.layout.get("icon-text-fit")&&n.hasIconData();if(s){const i=Math.pow(2,l.zoom-e.tileID.overscaledZ);pi(n,h,c,a,t.symbolSize,l,d,u,i,s,f)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),s),0!==i.paint.get("icon-opacity").constantOr(1)&&fi(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,a),0!==i.paint.get("text-opacity").constantOr(1)&&fi(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,a),n.map.showCollisionBoxes&&(hi(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),hi(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,i,r){if("translucent"!==e.renderPass)return;const s=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0===s.constantOr(1)&&(0===o.constantOr(1)||0===a.constantOr(1)))return;const h=e.context,c=h.gl,u=e.transform,p=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,f=e.colorModeForRenderPass(),m="globe"===u.projection.name,g=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],y=[];for(let v=0;v<r.length;v++){const s=r[v],o=n.getTile(s),a=o.getBucket(i);if(!a||a.projection.name!==u.projection.name)continue;const h=a.programConfigurations.get(i.id),c=Vn(i);m&&c.push("PROJECTION_GLOBE_VIEW");const p=e.useProgram("circle",h,c),d=a.layoutVertexBuffer,f=a.globeExtVertexBuffer,_=a.indexBuffer,T=u.projection.createInversionMatrix(u,s.canonical),E={programConfiguration:h,program:p,layoutVertexBuffer:d,globeExtVertexBuffer:f,indexBuffer:_,uniformValues:Hn(e,s,o,T,g,i),tile:o};if(l){const e=a.segments.get();for(const n of e)y.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:E})}else y.push({segments:a.segments,sortKey:0,state:E})}l&&y.sort(((t,e)=>t.sortKey-e.sortKey));const _={useDepthForOcclusion:!m};for(const v of y){const{programConfiguration:n,program:r,layoutVertexBuffer:s,globeExtVertexBuffer:o,indexBuffer:a,uniformValues:l,tile:m}=v.state,g=v.segments;e.terrain&&e.terrain.setupElevationDraw(m,r,_),e.prepareDrawProgram(h,r,m.tileID.toUnwrapped()),r.draw(h,c.TRIANGLES,p,d,f,t.CullFaceMode.disabled,l,i.id,s,a,g,i.paint,u.zoom,n,[o])}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const s=e.context,o=s.gl,a=t.StencilMode.disabled,l=new t.ColorMode([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n,i){const r=t.gl,s=e.width*i,o=e.height*i;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,s,o]);let a=n.heatmapFbo;if(!a||a&&(a.width!==s||a.height!==o)){a&&a.destroy();const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),a=n.heatmapFbo=t.createFramebuffer(s,o,!1),function(t,e,n,i,r,s){const o=t.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,r,s,0,o.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(t,0,e,a,s,o)}else r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),t.bindFramebuffer.set(a.framebuffer)}(s,e,i,"globe"===e.transform.projection.name?.5:.25),s.clear({color:t.Color.transparent});const h=e.transform,c="globe"===h.projection.name,u=c?["PROJECTION_GLOBE_VIEW"]:null,p=c?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,d=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)];for(let f=0;f<r.length;f++){const m=r[f];if(n.hasRenderableParent(m))continue;const g=n.getTile(m),y=g.getBucket(i);if(!y||y.projection.name!==h.projection.name)continue;const _=y.programConfigurations.get(i.id),v=e.useProgram("heatmap",_,u),{zoom:T}=e.transform;e.terrain&&e.terrain.setupElevationDraw(g,v),e.prepareDrawProgram(s,v,m.toUnwrapped());const E=h.projection.createInversionMatrix(h,m.canonical);v.draw(s,o.TRIANGLES,t.DepthMode.disabled,a,l,p,qn(e,m,g,E,d,T,i.paint.get("heatmap-intensity")),i.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,i.paint,e.transform.zoom,_,c?[y.globeExtVertexBuffer]:null)}s.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const i=e.context,r=i.gl,s=n.heatmapFbo;if(!s)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let o=n.colorRampTexture;o||(o=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,i)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,i))},line:function(e,n,i,r){if("translucent"!==e.renderPass)return;const s=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0===s.constantOr(1)||0===o.constantOr(1))return;const a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),h=e.terrain&&e.terrain.renderingToTexture?1:t.exported.devicePixelRatio,c=i.paint.get("line-dasharray"),u=c.constantOr(1),p=i.layout.get("line-cap"),d=i.paint.get("line-pattern"),f=d.constantOr(1),m=i.paint.get("line-gradient"),g=f?"linePattern":"line",y=e.context,_=y.gl,v=(t=>{const e=[];Jn(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET");const i=t.paint.get("line-pattern").constantOr(1),r=1!==t.paint.get("line-opacity").constantOr(1);return!i&&r&&e.push("RENDER_LINE_ALPHA_DISCARD"),e})(i);let T=v.includes("RENDER_LINE_ALPHA_DISCARD");e.terrain&&e.terrain.clipOrMaskOverlapStencilType()&&(T=!1);for(const E of r){const r=n.getTile(E);if(f&&!r.patternsLoaded())continue;const s=r.getBucket(i);if(!s)continue;e.prepareDrawTile();const o=s.programConfigurations.get(i.id),x=e.useProgram(g,o,v),I=d.constantOr(null);if(I&&r.imageAtlas){const t=r.imageAtlas.patternPositions[I.toString()];t&&o.setConstantPatternPositions(t)}const b=c.constantOr(null),w=p.constantOr(null);if(!f&&b&&w&&r.lineAtlas){const t=r.lineAtlas.getDash(b,w);t&&o.setConstantPatternPositions(t)}let[S,A]=i.paint.get("line-trim-offset");if("round"===w||"square"===w){const t=1;S!==A&&(0===S&&(S-=t),1===A&&(A+=t))}const C=e.terrain?E.projMatrix:null,R=f?Zn(e,r,i,C,h):Xn(e,r,i,C,s.lineClipsArray.length,h,[S,A]);if(m){const r=s.gradients[i.id];let o=r.texture;if(i.gradientVersion!==r.version){let a=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=E.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-E.canonical.z):1;a=t.clamp(t.nextPowerOfTwo(s.maxLineLength/t.EXTENT*1024*r),256,y.maxTextureSize)}r.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:a,image:r.gradient||void 0,clips:s.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new t.Texture(y,r.gradient,_.RGBA),r.version=i.gradientVersion,o=r.texture}y.activeTexture.set(_.TEXTURE1),o.bind(i.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}u&&(y.activeTexture.set(_.TEXTURE0),r.lineAtlasTexture.bind(_.LINEAR,_.REPEAT),o.updatePaintBuffers()),f&&(y.activeTexture.set(_.TEXTURE0),r.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),o.updatePaintBuffers()),e.prepareDrawProgram(y,x,E.toUnwrapped());const D=n=>{x.draw(y,_.TRIANGLES,a,n,l,t.CullFaceMode.disabled,R,i.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,i.paint,e.transform.zoom,o,[s.layoutVertexBuffer2])};if(T){const n=e.stencilModeForClipping(E).ref;0===n&&e.terrain&&y.clear({stencil:0});const i={func:_.EQUAL,mask:255};R.u_alpha_discard_threshold=.8,D(new t.StencilMode(i,n,255,_.KEEP,_.KEEP,_.INVERT)),R.u_alpha_discard_threshold=0,D(new t.StencilMode(i,n,255,_.KEEP,_.KEEP,_.KEEP))}else D(e.stencilModeForClipping(E))}T&&(e.resetStencilClippingMasks(),e.terrain&&y.clear({stencil:0}))},fill:function(e,n,i,r){const s=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0===o.constantOr(1))return;const a=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),h=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===s.constantOr(t.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===h){const s=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);gi(e,n,i,r,s,a,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const s=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);gi(e,n,i,r,s,a,!0)}},"fill-extrusion":function(e,n,i,r){const s=i.paint.get("fill-extrusion-opacity");if(0!==s&&"translucent"===e.renderPass){const o=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==s||i.paint.get("fill-extrusion-pattern").constantOr(1))yi(e,n,i,r,o,t.StencilMode.disabled,t.ColorMode.disabled),yi(e,n,i,r,o,e.stencilModeFor3D(),e.colorModeForRenderPass()),e.resetStencilClippingMasks();else{const s=e.colorModeForRenderPass();yi(e,n,i,r,o,t.StencilMode.disabled,s)}}},hillshade:function(e,n,i,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const s=e.context,o=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),a=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[h,c]="translucent"!==e.renderPass||l?[{},r]:e.stencilConfigForOverlap(r);for(const u of c){const r=n.getTile(u);if(r.needsHillshadePrepare&&"offscreen"===e.renderPass)_n(e,r,i,o,t.StencilMode.disabled,a);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(u):h[u.overscaledZ];gn(e,u,r,i,o,t,a)}}s.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()},raster:function(e,n,i,r,s,o){if("translucent"!==e.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const a=e.context,l=a.gl,h=n.getSource(),c=e.useProgram("raster"),u=e.colorModeForRenderPass(),p=e.terrain&&e.terrain.renderingToTexture,[d,f]=h instanceof Dt||p?[{},r]:e.stencilConfigForOverlap(r),m=f[f.length-1].overscaledZ,g=!e.options.moving;for(const y of f){const r=p?t.DepthMode.disabled:e.depthModeForSublayer(y.overscaledZ-m,1===i.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),s=y.toUnwrapped(),f=n.getTile(y);if(p&&(!f||!f.hasData()))continue;const _=p?y.projMatrix:e.transform.calculateProjMatrix(s,g),v=e.terrain&&p?e.terrain.stencilModeForRTTOverlap(y):d[y.overscaledZ],T=o?0:i.paint.get("raster-fade-duration");f.registerFadeDuration(T);const E=n.findLoadedParent(y,0),x=An(f,E,n,e.transform,T);let I,b;e.terrain&&e.terrain.prepareDrawTile();const w="nearest"===i.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;a.activeTexture.set(l.TEXTURE0),f.texture.bind(w,l.CLAMP_TO_EDGE),a.activeTexture.set(l.TEXTURE1),E?(E.texture.bind(w,l.CLAMP_TO_EDGE),I=Math.pow(2,E.tileID.overscaledZ-f.tileID.overscaledZ),b=[f.tileID.canonical.x*I%1,f.tileID.canonical.y*I%1]):f.texture.bind(w,l.CLAMP_TO_EDGE);const S=$n(_,b||[0,0],I||1,x,i,h instanceof Dt?h.perspectiveTransform:[0,0]);if(e.prepareDrawProgram(a,c,s),h instanceof Dt)h.boundsBuffer&&h.boundsSegments&&c.draw(a,l.TRIANGLES,r,t.StencilMode.disabled,u,t.CullFaceMode.disabled,S,i.id,h.boundsBuffer,e.quadTriangleIndexBuffer,h.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:s,tileBoundsSegments:o}=e.getTileBoundsBuffers(f);c.draw(a,l.TRIANGLES,r,v,u,t.CullFaceMode.disabled,S,i.id,n,s,o)}}e.resetStencilClippingMasks()},background:function(e,n,i,r){const s=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0===o)return;const a=e.context,l=a.gl,h=e.transform,c=h.tileSize,u=i.paint.get("background-pattern");if(e.isPatternMissing(u))return;const p=!u&&1===s.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==p)return;const d=t.StencilMode.disabled,f=e.depthModeForSublayer(0,"opaque"===p?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(u?"backgroundPattern":"background");let y,_=r;_||(y=e.getBackgroundTiles(),_=Object.values(y).map((t=>t.tileID))),u&&(a.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));for(const v of _){const p=v.toUnwrapped(),_=r?v.projMatrix:e.transform.calculateProjMatrix(p);e.prepareDrawTile();const T=n?n.getTile(v):y?y[v.key]:new t.Tile(v,c,h.zoom,e),E=u?oi(_,o,e,u,{tileID:v,tileSize:c}):si(_,o,s);e.prepareDrawProgram(a,g,p);const{tileBoundsBuffer:x,tileBoundsIndexBuffer:I,tileBoundsSegments:b}=e.getTileBoundsBuffers(T);g.draw(a,l.TRIANGLES,f,d,m,t.CullFaceMode.disabled,E,i.id,x,I,b)}},sky:function(e,n,i){const r=e.transform,s="mercator"===r.projection.name||"globe"===r.projection.name?1:t.smoothstep(7,8,r.zoom),o=i.paint.get("sky-opacity")*s;if(0===o)return;const a=e.context,l=i.paint.get("sky-type"),h=new t.DepthMode(a.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),c=e.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===e.renderPass?i.needsSkyboxCapture(e)&&(function(e,n,i,r){const s=e.context,o=s.gl;let a=n.skyboxFbo;if(!a){a=n.skyboxFbo=s.createFramebuffer(32,32,!1),n.skyboxGeometry=new Oi(s),n.skyboxTexture=s.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let t=0;t<6;++t)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}s.bindFramebuffer.set(a.framebuffer),s.viewport.set([0,0,32,32]);const l=n.getCenter(e,!0),h=e.useProgram("skyboxCapture"),c=new Float64Array(16);t.identity(c),t.rotateY(c,c,.5*-Math.PI),Ni(s,n,h,c,l,0),t.identity(c),t.rotateY(c,c,.5*Math.PI),Ni(s,n,h,c,l,1),t.identity(c),t.rotateX(c,c,.5*-Math.PI),Ni(s,n,h,c,l,2),t.identity(c),t.rotateX(c,c,.5*Math.PI),Ni(s,n,h,c,l,3),t.identity(c),Ni(s,n,h,c,l,4),t.identity(c),t.rotateY(c,c,Math.PI),Ni(s,n,h,c,l,5),s.viewport.set([0,0,e.width,e.height])}(e,i),i.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,i,r,s){const o=e.context,a=o.gl,l=e.transform,h=e.useProgram("skybox");o.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture);const c=((t,e,n,i,r)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:i,u_temporal_offset:r}))(l.skyboxMatrix,n.getCenter(e,!1),0,r,s);e.prepareDrawProgram(o,h),h.draw(o,a.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,h,o,c):"gradient"===l&&"sky"===e.renderPass&&function(e,n,i,r,s){const o=e.context,a=o.gl,l=e.transform,h=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Oi(o)),o.activeTexture.set(a.TEXTURE0);let c=n.colorRampTexture;c||(c=n.colorRampTexture=new t.Texture(o,n.colorRamp,a.RGBA)),c.bind(a.LINEAR,a.CLAMP_TO_EDGE);const u=((e,n,i,r,s)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(i),u_opacity:r,u_temporal_offset:s}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),r,s);e.prepareDrawProgram(o,h),h.draw(o,a.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,h,o,c)},debug:function(t,e,n){for(let i=0;i<n.length;i++)bi(t,e,n[i])},custom:function(e,n,i){const r=e.context,s=i.implementation;if(e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes("custom"))t.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===e.renderPass){const t=s.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(s,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(t.StencilMode.disabled);const n="3d"===s.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);r.setDepthMode(n),s.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class Li{constructor(e,n){this.context=new St(e),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ye,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,e){const n=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new On(this,t));const i=this._terrain;this.transform.elevation=n?i:null,i.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||"globe"===this.transform.projection.name||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,i]=e.getFovAdjustedRange(this.transform._fov);if(n>i)return void(this.transform.fogCullDistSq=null);const r=n+.78*(i-n);this.transform.fogCullDistSq=r*r}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.StructArrayLayout2i4;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(-1,1),r.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(t.EXTENT,0,t.EXTENT,0),s.emplaceBack(0,t.EXTENT,0,t.EXTENT),s.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(s,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(o);const a=new t.StructArrayLayout1ui2;for(const t of[0,1,3,2,0])a.emplaceBack(t);this.debugIndexBuffer=e.createIndexBuffer(a),this.emptyTexture=new t.Texture(e,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=t.create();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new Pi(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Sn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,n,i){if(!n||this.currentStencilSource===n.id||!e.isTileClipped()||!i||0===i.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let t=!1;for(const e of i)if(void 0===this._tileClippingMaskIDs[e.key]){t=!0;break}if(!t)return}this.currentStencilSource=n.id;const r=this.context,s=r.gl;this.nextStencilID+i.length>256&&this.clearStencil(),r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const a of i){const e=n.getTile(a),i=this._tileClippingMaskIDs[a.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:h,tileBoundsSegments:c}=this.getTileBoundsBuffers(e);o.draw(r,s.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:s.ALWAYS,mask:0},i,255,s.KEEP,s.KEEP,s.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Sn(a.projMatrix),"$clipping",l,h,c)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,i=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=i[i.length-1].overscaledZ,s=i[0].overscaledZ-r+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();const e={};for(let i=0;i<s;i++)e[i+r]=new t.StencilMode({func:n.GEQUAL,mask:255},i+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=s,[e,i]}return[{[r]:t.StencilMode.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,i){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(i||this.context.gl.LEQUAL,n,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const i=this.style.order,r=this.style._sourceCaches;for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const s={},o={},a={};for(const t in r){const e=r[t];s[t]=e.getVisibleCoordinates(),o[t]=s[t].slice().reverse(),a[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++)if(this.style._layers[i[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),t.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const t of i){const n=this.style._layers[t],i=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const r=i?o[i.id]:void 0;("custom"===n.type||n.isSky()||r&&r.length)&&this.renderLayer(this,i,n,r)}if(this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const r=n?o[n.id]:void 0;this._renderTileClippingMasks(t,n,r),this.renderLayer(this,n,t,r)}if(this.style.fog&&this.transform.projection.supportsFog&&function(e,n){const i=e.context,r=i.gl,s=e.transform,o=new t.DepthMode(r.LEQUAL,t.DepthMode.ReadOnly,[0,1]),a=e.useProgram("globeAtmosphere",null,"globe"===s.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=t.globeToMercatorTransition(s.zoom),h=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),u=n.properties.get("space-color").toArray01PremultipliedAlpha(),p=t.identity$1([]);t.rotateY$1(p,p,-t.degToRad(s._center.lng)),t.rotateX$1(p,p,t.degToRad(s._center.lat)),t.rotateZ$1(p,p,s.angle),t.rotateX$1(p,p,-s._pitch);const d=t.fromQuat(new Float32Array(16),p),f=t.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=t.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),y=t.globeUseCustomAntiAliasing(e,i,s)&&g===m?s.worldSize/(2*Math.PI*1.025)-1:s.globeRadius,_=e.frameCounter/1e3%1,v=t.length(s.globeCenterInViewSpace),T=Math.sqrt(Math.pow(v,2)-Math.pow(y,2)),E=Math.acos(T/v),x=((e,n,i,r,s,o,a,l,h,c,u,p,d,f)=>({u_frustum_tl:e,u_frustum_tr:n,u_frustum_br:i,u_frustum_bl:r,u_horizon:s,u_transition:o,u_fadeout_range:a,u_color:l,u_high_color:h,u_space_color:c,u_star_intensity:u,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:p,u_horizon_angle:d,u_rotation_matrix:f}))(s.frustumCorners.TL,s.frustumCorners.TR,s.frustumCorners.BR,s.frustumCorners.BL,s.frustumCorners.horizon,l,g,h,c,u,f,_,E,d);e.prepareDrawProgram(i,a);const I=e.atmosphereBuffer;I&&a.draw(i,r.TRIANGLES,o,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,x,"skybox",I.vertexBuffer,I.indexBuffer,I.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,n,t,n?o[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const r=n?("symbol"===t.type?a:o)[n.id]:void 0;this._renderTileClippingMasks(t,n,n?s[n.id]:void 0),this.renderLayer(this,n,t,r),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;t.values(this.style._layers).forEach((t=>{const i=e._getLayerSourceCache(t);i&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<i.getSource().maxzoom)&&(n=i)})),n&&this.options.showTileBoundaries&&Fi.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;wi(t,t.transform.height-(e.top||0),3,vi),wi(t,e.bottom||0,3,Ti),Si(t,e.left||0,3,Ei),Si(t,t.transform.width-(e.right||0),3,xi);const n=t.transform.centerPoint;!function(t,e,n,i){Ai(t,e-1,n-10,2,20,i),Ai(t,e-10,n-1,20,2,i)}(t,n.x,t.transform.height-n.y,Ii)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}}renderLayer(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes(n.type)||Fi[n.type](t,e,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,e=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(e),t.beginQueryEXT(t.TIME_ELAPSED_EXT,e)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const e={};for(const n in t){const i=t[n],r=this.context.extTimerQuery,s=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=s}return e}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const e=this.context.extTimerQuery;let n=0;for(const i of t)n+=e.getQueryObjectEXT(i,e.QUERY_RESULT_EXT)/1e6,e.deleteQueryEXT(i);return n}translatePosMatrix(e,n,i,r,s){if(!i[0]&&!i[1])return e;const o=s?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){const t=Math.sin(o),e=Math.cos(o);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}const a=[s?i[0]:M(n,i[0],this.transform.zoom),s?i[1]:M(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,a),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){return null===t||void 0!==t&&!this.imageManager.getPattern(t.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,i=[];return this.terrainRenderModeElevated()&&i.push("TERRAIN"),"globe"===this.transform.projection.name&&i.push("GLOBE"),e&&i.push("ZERO_EXAGGERATION"),n&&!t&&0!==n.getOpacity(this.transform.pitch)&&i.push("FOG"),t&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}useProgram(t,e,n){this.cache=this.cache||{};const i=n||[],r=this.currentGlobalDefines().concat(i),s=Nn.cacheKey(un[t],t,r,e);return this.cache[s]||(this.cache[s]=new Nn(this.context,t,un[t],e,ai[t],r)),this.cache[s]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(e,n,i){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const s=r.getOpacity(this.transform.pitch),o=((e,n,i,r,s,o,a,l,h,c,u)=>{const p=e.transform,d=n.properties.get("color").toArray01();d[3]=r;const f=e.frameCounter/1e3%1;return{u_fog_matrix:i?p.calculateFogTileMatrix(i):e.identityMat,u_fog_range:n.getFovAdjustedRange(p._fov),u_fog_color:d,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:s,u_frustum_tr:o,u_frustum_br:a,u_frustum_bl:l,u_globe_pos:h,u_globe_radius:c,u_viewport:u,u_globe_transition:t.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,r,i,s,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);n.setFogUniformValues(e,o)}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,n=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512});for(const r of i)n[r.key]=e[r.key]||new t.Tile(r,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class ki{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(i,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new ki(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ui(e,n){const i=t.getColumn(e,3);t.fromQuat(e,n),t.setColumn(e,3,i)}function Bi(e,n){const i=t.identity$1([]);return t.rotateZ$1(i,i,-n),t.rotateX$1(i,i,-e),i}function zi(e,n){const i=[e[0],e[1],0],r=[n[0],n[1],0];if(t.length(i)>=1e-15){const e=t.normalize([],i);t.scale$2(r,e,t.dot(r,e)),n[0]=r[0],n[1]=r[1]}const s=t.cross([],n,e);if(t.len(s)<1e-15)return null;const o=Math.atan2(-s[1],s[0]);return Bi(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),o)}class Gi{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){if(e){const n=e instanceof t.MercatorCoordinate?e:new t.MercatorCoordinate(e[0],e[1],e[2]);this._renderWorldCopies&&(n.x=t.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,r=this.position,s=t.MercatorCoordinate.fromLngLat(e,i),o=[s.x-r.x,s.y-r.y,s.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=zi(o,n)}setPitchBearing(e,n){this.orientation=Bi(t.degToRad(e),t.degToRad(-n))}}class Hi{constructor(e,n){this._transform=t.identity([]),this.orientation=n,this.position=e}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const e=t.getColumn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){var n;e&&t.setColumn(this._transform,3,[(n=e)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(e){this._orientation=e||t.identity$1([]),e&&Ui(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Bi(t,e),Ui(this._transform,this._orientation)}forward(){const e=t.getColumn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=t.getColumn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=t.getColumn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(e,n){const i=new Float64Array(16);return t.invert(i,this.getWorldToCamera(e,n)),i}getWorldToCameraPosition(e,n,i){const r=this.position;t.scale$2(r,r,-e);const s=new Float64Array(16);return t.fromScaling(s,[i,i,i]),t.translate(s,s,r),s[10]*=n,s}getWorldToCamera(e,n){const i=new Float64Array(16),r=new Float64Array(4),s=this.position;return t.conjugate(r,this._orientation),t.scale$2(s,s,-e),t.fromQuat(i,r),t.translate(i,i,s),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}getCameraToClipPerspective(e,n,i,r){const s=new Float64Array(16);return t.perspective(s,e,n,i,r),s}getDistanceToElevation(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=0===e?0:t.mercatorZfromAltitude(e,n?t.latFromMercatorY(this.position[1]):this.position[1]),r=this.forward();return(i-this.position[2])/r[2]}clone(){return new Hi([...this.position],[...this.orientation])}}function Vi(e,n){const i=Wi(e.projection,e.zoom,e.width,e.height),r=function(e,n,i,r,s){const o=new t.LngLat(i.lng-180*Yi,i.lat),a=new t.LngLat(i.lng+180*Yi,i.lat),l=e.project(o.lng,o.lat),h=e.project(a.lng,a.lat),c=-Math.atan2(h.y-l.y,h.x-l.x),u=t.MercatorCoordinate.fromLngLat(i);u.y=t.clamp(u.y,-.999975,.999975);const p=u.toLngLat(),d=e.project(p.lng,p.lat),f=t.MercatorCoordinate.fromLngLat(p);f.x+=Yi;const m=f.toLngLat(),g=e.project(m.lng,m.lat),y=Xi(g.x-d.x,g.y-d.y,c),_=t.MercatorCoordinate.fromLngLat(p);_.y+=Yi;const v=_.toLngLat(),T=e.project(v.lng,v.lat),E=Xi(T.x-d.x,T.y-d.y,c),x=Math.abs(y.x)/Math.abs(E.y),I=t.identity([]);t.rotateZ(I,I,-c*(1-(s?0:r)));const b=t.identity([]);return t.scale(b,b,[1,1-(1-x)*r,1]),b[4]=-E.x/E.y*r,t.rotateZ(b,b,c),t.multiply(b,I,b),b}(e.projection,0,e.center,i,n),s=ji(e);return t.scale(r,r,[s,s,1]),r}function ji(e){const n=e.projection,i=Wi(e.projection,e.zoom,e.width,e.height),r=qi(n,e.center),s=qi(n,t.LngLat.convert(n.center));return Math.pow(2,r*i+(1-i)*s)}function Wi(e,n,i,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const o=e.range;if(!o)return 0;const a=Math.min(s,Math.max(i,r)),l=Math.log(a/1024)/Math.LN2;return t.smoothstep(o[0]+l,o[1]+l,n)}const Yi=1/4e4;function qi(e,n){const i=t.clamp(n.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),r=new t.LngLat(n.lng-180*Yi,i),s=new t.LngLat(n.lng+180*Yi,i),o=e.project(r.lng,i),a=e.project(s.lng,i),l=t.MercatorCoordinate.fromLngLat(r),h=t.MercatorCoordinate.fromLngLat(s),c=a.x-o.x,u=a.y-o.y,p=h.x-l.x,d=h.y-l.y,f=Math.sqrt((p*p+d*d)/(c*c+u*u));return Math.log(f)/Math.LN2}function Xi(t,e,n){const i=Math.cos(n),r=Math.sin(n);return{x:t*i-e*r,y:t*r+e*i}}class Zi{constructor(e,n,i,r,s,o,a){this.tileSize=512,this._renderWorldCopies=void 0===s||s,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setProjection(o),this.setMaxBounds(a),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ki,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Hi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const t=new Zi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(t||n)&&this._constrainCamera(e),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const i=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const r=!e(i,this.getProjection());return r&&this._calcMatrices(),this.mercatorFromTransition=!1,r}setMercatorFromTransition(){const e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const n=e!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const n=-e*Math.PI/180;var i;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(i=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),function(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+s*a,t[1]=r*l+o*a,t[2]=i*-a+s*l,t[3]=r*-a+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=t.degToRad(e),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop();let r=0,s=0;for(let o=0;o<n.length;o++){const a=new t.pointGeometry(n[o][0]*this.width,i+n[o][1]*(this.height-i)),l=e.pointCoordinate(a);if(!l)continue;const h=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*h,s+=h}return 0===s?NaN:r/s}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const t=this._seaLevelZoom,e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*e,i=this._mercatorZfromZoom(t),r=this._mercatorZfromZoom(this._maxZoom),s=Math.max(i-n,r);this._setZoom(this._zoomFromMercatorZ(s))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let i;i=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const r=t.length(t.sub([],this._camera.position,i));return t.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const i=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new Gi;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),i=t.transformQuat([],[0,-1,0],e);if(i[2]<0)return!1;const r=zi(n,i);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=t.clamp(e[2],r/i,r/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies){const i=this.pointCoordinate(new t.pointGeometry(0,0)),r=this.pointCoordinate(new t.pointGeometry(this.width,0)),s=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new t.pointGeometry(0,this.height)),a=Math.floor(Math.min(i.x,r.x,s.x,o.x)),l=Math.floor(Math.max(i.x,r.x,s.x,o.x)),h=1;for(let c=a-h;c<=l+h;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const i=n,r=this.elevation&&!e.isTerrainDEM,s="mercator"===this.projection.name;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const o=this.locationCoordinate(this.center),a=this.center.lat,l=1<<n,h=[l*o.x,l*o.y,0],c="globe"===this.projection.name,u=!c,p=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,u),d=c?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*t.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),g=[l*d.x,l*d.y,m*(u?1:f)],y=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,v=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,T=e.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,E=this.projection.isReprojectedInTileSpace?ji(this):1,x=e=>{const n=1/4e4,i=new t.MercatorCoordinate(e.x+n,e.y,e.z),r=new t.MercatorCoordinate(e.x,e.y+n,e.z),s=e.toLngLat(),o=i.toLngLat(),a=r.toLngLat(),l=this.locationCoordinate(s),h=this.locationCoordinate(o),c=this.locationCoordinate(a),u=Math.hypot(h.x-l.x,h.y-l.y),p=Math.hypot(c.x-l.x,c.y-l.y);return Math.sqrt(u*p)*E/n},I=e=>{const n=v,i=T;return{aabb:t.tileAABB(this,l,0,0,0,e,i,n,this.projection),zoom:0,x:0,y:0,minZ:i,maxZ:n,wrap:e,fullyVisible:!1}},b=[];let w=[];const S=n,A=e.reparseOverscaled?i:n,C=t=>t*t,R=C((m-this._centerAltitude)*f),D=t=>{if(!this._elevation||!t.tileID||!s)return;const e=this._elevation.getMinMaxForTile(t.tileID),n=t.aabb;e?(n.min[2]=e.min,n.max[2]=e.max,n.center[2]=(n.min[2]+n.max[2])/2):(t.shouldSplit=O(t),t.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},O=e=>{if(e.zoom<_)return!0;if(e.zoom===S)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const n=e.aabb.distanceX(g),s=e.aabb.distanceY(g);let o=R,l=1;if(c){o=C(e.aabb.distanceZ(g));const n=Math.pow(2,e.zoom),i=t.latFromMercatorY((e.y+1)/n),r=t.latFromMercatorY(e.y/n),s=Math.min(Math.max(a,i),r),h=t.circumferenceAtLatitude(s)/t.circumferenceAtLatitude(a);if(l=s===a?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,h/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&e.zoom===S-1&&h>=.9)return!0}else if(r&&(o=C(e.aabb.distanceZ(g)*f)),this.projection.isReprojectedInTileSpace&&i<=5){const n=Math.pow(2,e.zoom),i=x(new t.MercatorCoordinate((e.x+.5)/n,(e.y+.5)/n));l=i>.85?1:i}const h=n*n+s*s+o,u=C((1<<S-e.zoom)*y*l*((t,e)=>{if(e*C(.707)<t)return 1;const n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(o,R),h));return h<u};if(this.renderWorldCopies)for(let t=1;t<=3;t++)b.push(I(-t)),b.push(I(t));for(b.push(I(0));b.length>0;){const i=b.pop(),o=i.x,a=i.y;let u=i.fullyVisible;if(!u){const t=i.aabb.intersects(p);if(0===t)continue;u=2===t}if(i.zoom!==S&&O(i))for(let e=0;e<4;e++){const n=(o<<1)+e%2,h=(a<<1)+(e>>1),p={aabb:s?i.aabb.quadrant(e):t.tileAABB(this,l,i.zoom+1,n,h,i.wrap,i.minZ,i.maxZ,this.projection),zoom:i.zoom+1,x:n,y:h,wrap:i.wrap,fullyVisible:u,tileID:void 0,shouldSplit:void 0,minZ:i.minZ,maxZ:i.maxZ};r&&!c&&(p.tileID=new t.OverscaledTileID(i.zoom+1===S?A:i.zoom+1,i.wrap,i.zoom+1,n,h),D(p)),b.push(p)}else{const r=i.zoom===S?A:i.zoom;if(e.minzoom&&e.minzoom>r)continue;const s=h[0]-(.5+o+(i.wrap<<i.zoom))*(1<<n-i.zoom),l=h[1]-.5-a,c=i.tileID?i.tileID:new t.OverscaledTileID(r,i.wrap,i.zoom,o,a);w.push({tileID:c,distanceSq:s*s+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,i=this.horizonLineFromTop();w=w.filter((r=>{const s=[0,0,0,1],o=[t.EXTENT,t.EXTENT,0,1],a=this.calculateFogTileMatrix(r.tileID.toUnwrapped());t.transformMat4$1(s,s,a),t.transformMat4$1(o,o,a);const l=t.getAABBPointSquareDist(s,o);if(0===l)return!0;let h=!1;const c=this._elevation;if(c&&l>n&&0!==i){const n=this.calculateProjMatrix(r.tileID.toUnwrapped());let s;e.isTerrainDEM||(s=c.getMinMaxForTile(r.tileID)),s||(s={min:T,max:v});const o=t.furthestTileCorner(this.rotation),a=[o[0]*t.EXTENT,o[1]*t.EXTENT,s.max];t.transformMat4(a,a,n),h=(1-a[1])*this.height*.5<i}return l<n||h}))}return w.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=this.projection.project(e.lng,n);return new t.pointGeometry(i.x*this.worldSize,i.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(e,n){let i,r;const s=this.centerPoint;if("globe"===this.projection.name){const t=this.worldSize;i=(n.x-s.x)/t,r=(n.y-s.y)/t}else{const t=this.pointCoordinate(n),e=this.pointCoordinate(s);i=t.x-e.x,r=t.y-e.y}const o=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(o.x-i,o.y-r))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e,n){const i=n?t.mercatorZfromAltitude(n,e.lat):void 0,r=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(r.x,r.y,i)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(e,n){const i=null!=n?n:this._centerAltitude,r=[e.x,e.y,0,1],s=[e.x,e.y,1,1];t.transformMat4$1(r,r,this.pixelMatrixInverse),t.transformMat4$1(s,s,this.pixelMatrixInverse);const o=s[3];t.scale$1(r,r,1/r[3]),t.scale$1(s,s,1/o);const a=r[2],l=s[2];return{p0:r,p1:s,t:a===l?0:(i-a)/(l-a)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(i,i,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(i,i,1/i[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(i,i,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],i,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:i,t:r}=e,s=t.mercatorZfromAltitude(n[2],this._center.lat),o=t.mercatorZfromAltitude(i[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],i[0],r)/this.worldSize,t.number(n[1],i[1],r)/this.worldSize,t.number(s,o,r))}pointCoordinate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,t.x,t.y,e)}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);let n=this.projection.pointCoordinate3D(this,e.x,e.y);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);let i=0,r=this.horizonLineFromTop();if(e.y>r)return this.pointCoordinate(e);const s=.02*r,o=e.clone();for(let a=0;a<10&&r-i>s;a++){o.y=t.number(i,r,.66);const e=this.projection.pointCoordinate3D(this,o.x,o.y);e?(r=o.y,n=e):i=o.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}_coordinatePoint(e,n){const i=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,i+e.toAltitude(),1];return t.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new t.pointGeometry(r[0]/r[3],r[1]/r[3]):new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:e,left:n}=this._edgeInsets,i=this.height-this._edgeInsets.bottom,r=this.width-this._edgeInsets.right,s=this.pointCoordinate3D(new t.pointGeometry(n,e)),o=this.pointCoordinate3D(new t.pointGeometry(r,e)),a=this.pointCoordinate3D(new t.pointGeometry(r,i)),l=this.pointCoordinate3D(new t.pointGeometry(n,i));let h=Math.min(s.x,l.x),c=Math.max(o.x,a.x),u=Math.min(s.y,o.y),p=Math.max(l.y,a.y);const d=Math.pow(2,-this.zoom)/16,f=(e,n,i,r)=>{const s=(e+i)/2,o=(n+r)/2,a=new t.pointGeometry(s,o),l=this.pointCoordinate3D(a),m=Math.max(0,h-l.x,u-l.y,l.x-c,l.y-p);h=Math.min(h,l.x),c=Math.max(c,l.x),u=Math.min(u,l.y),p=Math.max(p,l.y),m>d&&(f(e,n,s,o),f(s,o,i,r))};f(n,e,r,e),f(r,e,r,i),f(r,i,n,i),f(n,i,n,e);const[m,g]=t.polesInViewport(this),y=m||g,_=m?90:t.latFromMercatorY(u),v=y?180:t.lngFromMercatorX(c),T=g?-90:t.latFromMercatorY(p),E=y?-180:t.lngFromMercatorX(h);return new t.LngLatBounds(new t.LngLat(E,T),new t.LngLat(v,_))}_getBounds(e,n){if("globe"===this.projection.name)return this._getGlobeBounds();const i=new t.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),r=new t.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),s=new t.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),o=new t.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let a=this.pointCoordinate(i,e),l=this.pointCoordinate(r,e);const h=this.pointCoordinate(s,n),c=this.pointCoordinate(o,n),u=(t,e)=>(e.y-t.y)/(e.x-t.x);return a.y>1&&l.y>=0?a=new t.MercatorCoordinate((1-c.y)/u(c,a)+c.x,1):a.y<0&&l.y<=1&&(a=new t.MercatorCoordinate(-c.y/u(c,a)+c.x,0)),l.y>1&&a.y>=0?l=new t.MercatorCoordinate((1-h.y)/u(h,l)+h.x,1):l.y<0&&a.y<=1&&(l=new t.MercatorCoordinate(-h.y/u(h,l)+h.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(a)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(c)).extend(this.coordinateLocation(h))}_getBounds3D(){const t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBounds(0,0);const e=t.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBounds(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,e){return this.projection.createTileMatrix(this,e,t)}calculateDistanceTileData(e){const n=e.key,i=this._distanceTileDataCache;if(i[n])return i[n];const r=e.canonical,s=1/this.height,o=this.cameraWorldSize,a=o/this.zoomScale(r.z),l=(r.x+Math.pow(2,r.z)*e.wrap)*a,h=r.y*a,c=this.point;c.x*=o/this.worldSize,c.y*=o/this.worldSize;const u=this.angle,p=Math.sin(-u),d=-Math.cos(-u);return i[n]={bearing:[p,d],center:[(c.x-l)*s,(c.y-h)*s],scale:a/t.EXTENT*s},i[n]}calculateFogTileMatrix(e){const n=e.key,i=this._fogTileMatrixCache;if(i[n])return i[n];const r=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,e);return t.multiply(r,this.worldToFogMatrix,r),i[n]=new Float32Array(r),i[n]}calculateProjMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,r=n?this._alignedProjMatrixCache:this._projMatrixCache;if(r[i])return r[i];const s=this.calculatePosMatrix(e,this.worldSize);return t.multiply(s,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,s),r[i]=new Float32Array(s),r[i]}calculatePixelsToTileUnitsMatrix(e){const n=e.tileID.key,i=this._pixelsToTileUnitsCache;if(i[n])return i[n];const r=function(e,n){const{scale:i}=e.tileTransform,r=i*t.EXTENT/(e.tileSize*Math.pow(2,n.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return s=new Float32Array(4),l=(o=n.inverseAdjustmentMatrix)[1],h=o[2],c=o[3],p=(a=[r,r])[1],s[0]=o[0]*(u=a[0]),s[1]=l*u,s[2]=h*p,s[3]=c*p,s;var s,o,a,l,h,c,u,p}(e,this);return i[n]=r,i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const e=this._elevation;this._updateCameraState();const n=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(n),r=this._camera.forward(),s=t.mercatorZfromAltitude(1,this._center.lat);i[2]/=s,r[2]/=s,t.normalize(r,r);const o=e.raycast(i,r,e.exaggeration());if(o){const e=t.scaleAndAdd([],i,r,o),n=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=(n.z+t.length([n.x-i[0],n.y-i[1],n.z-i[2]*s]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(a),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._elevation)return;const n=this._elevation,i=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(i),s=n.getAtPointOrZero(new t.MercatorCoordinate(...r)),o=this.pixelsPerMeter/this.worldSize*s,a=this._minimumHeightOverTerrain(),l=r[2]-o;if(l<=a)if(l<0||e){const e=this.locationCoordinate(this._center,this._centerAltitude),n=[r[0],r[1],e.z-r[2]],i=t.length(n);n[2]-=(a-l)/this._pixelsPerMercatorPixel;const s=t.length(n);if(0===s)return;t.scale$2(n,n,i/s*this._pixelsPerMercatorPixel),this._camera.position=[r[0],r[1],e.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){const n=this.center;return n.lat=t.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(n.lng=t.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:i,y:r}=this.point;let s=0,o=i,a=r;const l=this.width/2,h=this.height/2,c=this.worldMinY*this.scale,u=this.worldMaxY*this.scale;if(r-h<c&&(a=c+h),r+h>u&&(a=u-h),u-c<this.height&&(s=Math.max(s,this.height/(u-c)),a=(u+c)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const t=this.worldMinX*this.scale,e=this.worldMaxX*this.scale,n=this.worldSize/2-(t+e)/2;o=(i+n+this.worldSize)%this.worldSize-n,o-l<t&&(o=t+l),o+l>e&&(o=e-l),e-t<this.width&&(s=Math.max(s,this.width/(e-t)),o=(e+t)/2)}o===i&&a===r||(this.center=this.unproject(new t.pointGeometry(o,a))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const i=Wi(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,i),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const r=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?n:1),s=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);s[8]=2*-e.x/this.width,s[9]=2*e.y/this.height;let o=t.mul([],s,r);if(this.projection.isReprojectedInTileSpace){const e=this.locationCoordinate(this.center),n=t.identity([]);t.translate(n,n,[e.x*this.worldSize,e.y*this.worldSize,0]),t.multiply(n,n,Vi(this)),t.translate(n,n,[-e.x*this.worldSize,-e.y*this.worldSize,0]),t.multiply(o,o,n),this.inverseAdjustmentMatrix=function(t){const e=Vi(t,!0);return _([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],o,[this.worldSize,this.worldSize,this.worldSize/n,1]),this.projMatrix=o,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const a=t.invert([],s);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(a,this.horizonLineFromTop(),this.height);const l=new Float32Array(16);t.identity(l),t.scale(l,l,[1,-1,1]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle);const h=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),c=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;h[8]=2*-e.x/this.width,h[9]=2*(e.y+c)/this.height,this.skyboxMatrix=t.multiply(l,h,l);const u=this.point,p=u.x,d=u.y,f=this.width%2/2,m=this.height%2/2,g=Math.cos(this.angle),y=Math.sin(this.angle),v=p-Math.round(p)+g*f+y*m,T=d-Math.round(d)+g*m+y*f,E=new Float64Array(o);if(t.translate(E,E,[v>.5?v-1:v,T>.5?T-1:T,0]),this.alignedProjMatrix=E,o=t.create(),t.scale(o,o,[this.width/2,-this.height/2,1]),t.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=t.create(),t.scale(o,o,[1,-1,1]),t.translate(o,o,[-1,-1,0]),t.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},o=t.invert(new Float64Array(16),this.pixelMatrix),!o)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=o,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(e,e,r),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=o;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,i=this._camera.position,r=1/this.height/this._pixelsPerMercatorPixel,s=[e,e,n];t.scale$2(s,s,r),t.scale$2(i,i,-1),t.multiply$2(i,i,s);const o=t.create();t.translate(o,o,i),t.scale(o,o,s),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,r)}_computeCameraPosition(t){const e=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),i=this.point,r=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*e-t/this.worldSize*this._centerAltitude;return[i.x/this.worldSize-n[0]*r,i.y/this.worldSize-n[1]*r,t/this.worldSize*this._centerAltitude-n[2]*r]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=this._camera.position[2],r=e[2];let s=1;this.projection.wrap&&(this.center=this.center.wrap()),r>0&&(s=Math.min((n-i)/r,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,s),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:i,bearing:r}=this._camera.getPitchBearing(),s=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),a=Math.max((e[2]-s)/Math.cos(i),o),l=this._zoomFromMercatorZ(a);t.scaleAndAdd(e,e,n,a),this._pitch=t.clamp(i,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(r,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}zoomFromMercatorZAdjusted(t){const e=e=>{const n=this.getCameraToCenterDistance(this.projection,e);return this.scaleZoom(n/(t*this.tileSize))};let n,i=e(this.zoom),r=Math.abs(i-e(i));for(;n!==r;)i=e(i),n=r,r=Math.abs(i-e(i));return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(e,n){const i=Math.min(e.x,n.x),r=Math.max(e.x,n.x),s=Math.min(e.y,n.y),o=Math.max(e.y,n.y);if(s<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const a=[new t.pointGeometry(i,s),new t.pointGeometry(r,o),new t.pointGeometry(i,o),new t.pointGeometry(r,s)],l=this.renderWorldCopies?-3:0,h=this.renderWorldCopies?4:1;for(const t of a){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>h||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.pointGeometry(0,0),new t.pointGeometry(this.width,this.height))}zoomDeltaToMovement(e,n){const i=t.length(t.sub([],this._camera.position,e)),r=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(r)}getCameraPoint(){if("globe"===this.projection.name){const e=function(e,n){let[i,r,s]=e;const o=[i,r,s,1];t.transformMat4$1(o,o,n);const a=o[3]=Math.max(o[3],1e-6);return o[0]/=a,o[1]/=a,o[2]/=a,o}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.pointGeometry(e[0],e[1])}{const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}}getCameraToCenterDistance(t){const e=Wi(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,this.width,this.height,1024),n=t.pixelSpaceConversion(this.center.lat,this.worldSize,e);return.5/Math.tan(.5*this._fov)*this.height*n}getWorldToCameraMatrix(){const e=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(e,e,this.globeMatrix),e}}function Ki(t,e){let n=!1,i=null;const r=()=>{i=null,n&&(t(),i=setTimeout(r,e),n=!1)};return()=>(n=!0,i||r(),i)}class Qi{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ki(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const n=Ji(e);if(this._hashName){const e=this._hashName;let i=!1;const r=t.window.location.hash.slice(1).split("&").map((t=>{const r=t.split("=")[0];return r===e?(i=!0,"".concat(r,"=").concat(n)):t})).filter((t=>t));return i||r.push("".concat(e,"=").concat(n)),"#".concat(r.join("&"))}return"#".concat(n)}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const e=this._getCurrentHash();if(e.length>=3&&!e.some((t=>isNaN(t)))){const n=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(e[3]||0):t.getBearing();return t.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:n,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}function Ji(t,e){const n=t.getCenter(),i=Math.round(100*t.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),s=Math.pow(10,r),o=Math.round(n.lng*s)/s,a=Math.round(n.lat*s)/s,l=t.getBearing(),h=t.getPitch();let c=e?"/".concat(o,"/").concat(a,"/").concat(i):"".concat(i,"/").concat(a,"/").concat(o);return(l||h)&&(c+="/"+Math.round(10*l)/10),h&&(c+="/".concat(Math.round(h))),c}const $i={linearity:.3,easing:t.bezier(0,0,.3,1)},tr=t.extend({deceleration:2500,maxSpeed:1400},$i),er=t.extend({deceleration:20,maxSpeed:1400},$i),nr=t.extend({deceleration:1e3,maxSpeed:360},$i),ir=t.extend({deceleration:1e3,maxSpeed:90},$i);class rr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const s=or(n.pan.mag(),i,t.extend({},tr,e||{}));r.offset=n.pan.mult(s.amount/n.pan.mag()),r.center=this._map.transform.center,sr(r,s)}if(n.zoom){const t=or(n.zoom,i,er);r.zoom=this._map.transform.zoom+t.amount,sr(r,t)}if(n.bearing){const e=or(n.bearing,i,nr);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),sr(r,e)}if(n.pitch){const t=or(n.pitch,i,ir);r.pitch=this._map.transform.pitch+t.amount,sr(r,t)}if(r.zoom||r.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),r.noMoveStart=!0,r}}function sr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function or(e,n,i){const{maxSpeed:r,linearity:s,deceleration:o}=i,a=t.clamp(e*s/(n/1e3),-r,r),l=Math.abs(a)/(o*s);return{easing:i.easing,duration:1e3*l,amount:a*(l/2)}}class ar extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=f(n.getCanvasContainer(),i),o=n.unproject(s);super(e,t.extend({point:s,lngLat:o,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class lr extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const r="touchend"===e?i.changedTouches:i.touches,s=m(n.getCanvasContainer(),r),o=s.map((t=>n.unproject(t))),a=s.reduce(((t,e,n,i)=>t.add(e.div(i.length))),new t.pointGeometry(0,0));super(e,{points:s,point:a,lngLats:o,lngLat:n.unproject(a),originalEvent:i}),this._defaultPrevented=!1}}class hr extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class cr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new hr(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new ar(t.type,this._map,t))}mouseup(t){this._map.fire(new ar(t.type,this._map,t))}preclick(e){const n=t.extend({},e);n.type="preclick",this._map.fire(new ar(n.type,this._map,n))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new ar(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new ar(t.type,this._map,t))}mouseover(t){this._map.fire(new ar(t.type,this._map,t))}mouseout(t){this._map.fire(new ar(t.type,this._map,t))}touchstart(t){return this._firePreventable(new lr(t.type,this._map,t))}touchmove(t){this._map.fire(new lr(t.type,this._map,t))}touchend(t){this._map.fire(new lr(t.type,this._map,t))}touchcancel(t){this._map.fire(new lr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ur{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new ar(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ar("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new ar(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(c(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e,i=this._startPos,r=this._lastPos;if(!i||!r||r.equals(n)||!this._box&&n.dist(i)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=s("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const o=Math.min(i.x,n.x),a=Math.max(i.x,n.x),l=Math.min(i.y,n.y),h=Math.max(i.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform="translate(".concat(o,"px,").concat(l,"px)"),this._box.style.width=a-o+"px",this._box.style.height=h-l+"px")}))}mouseupWindow(e,n){if(!this._active)return;const i=this._startPos,r=n;if(i&&0===e.button){if(this.reset(),d(),i.x!==r.x||i.y!==r.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(i,r,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),u(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function dr(t,e){const n={};for(let i=0;i<t.length;i++)n[t[i].identifier]=e[i];return n}class fr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=dr(i,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const i=dr(n,e);for(const r in this.touches){const t=this.touches[r],e=i[r];(!e||e.dist(t)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class mr{constructor(t){this.singleTap=new fr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const i=this.singleTap.touchend(t,e,n);if(i){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class gr{constructor(){this._zoomIn=new mr({numTouches:1,numTaps:2}),this._zoomOut=new mr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const i=this._zoomIn.touchend(t,e,n),r=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yr={0:1,2:2};class _r{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=g(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),null!=this._eventButton&&function(t,e){const n=yr[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&g(t)===this._eventButton&&(this._moved&&d(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vr extends _r{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Tr extends _r{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class Er extends _r{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class xr{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(e,n,i){if(this._active&&!(i.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===i.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,n,i)}}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=dr(i,n),s=new t.pointGeometry(0,0),o=new t.pointGeometry(0,0);let a=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(s._add(e),o._add(e.sub(n)),a++,r[t]=e)}if(this._touches=r,a<this._minTouches||!o.mag())return;const l=o.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:s.div(a),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Ir{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){const i=this._firstTwoTouches;if(!i)return;t.preventDefault();const[r,s]=i,o=br(n,e,r),a=br(n,e,s);if(!o||!a)return;const l=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],l,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,s=br(n,e,i),o=br(n,e,r);s&&o||(this._active&&d(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function br(t,e,n){for(let i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function wr(t,e){return Math.log(t/e)/Math.LN2}class Sr extends Ir{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(wr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wr(this._distance,n),pinchAround:e}}}function Ar(t,e){return 180*t.angleWith(e)/Math.PI}class Cr extends Ir{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ar(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const i=Ar(t,n);return Math.abs(i)<e}}function Rr(t){return Math.abs(t.y)>Math.abs(t.x)}class Dr extends Ir{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Rr(t[0].sub(t[1]))&&(this._valid=!1)}_move(e,n,i){const r=this._lastPoints;if(!r)return;const s=e[0].sub(r[0]),o=e[1].sub(r[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&i.touches.length<3||(this._valid=this.gestureBeginsVertically(s,o,i.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(s.y+o.y)/2*-.5})}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const i=t.mag()>=2,r=e.mag()>=2;if(!i&&!r)return;if(!i||!r)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const s=t.y>0==e.y>0;return Rr(t)&&Rr(e)&&s}}const Or={panStep:100,bearingStep:15,pitchStep:10};class Nr{constructor(){const t=Or;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,i=0,r=0,s=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),s=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:o=>{const a=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:Mr,zoom:e?Math.round(a)+e*(t.shiftKey?2:1):a,bearing:o.getBearing()+n*this._bearingStep,pitch:o.getPitch()+i*this._pitchStep,offset:[-r*this._panStep,-s*this._panStep],center:o.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Mr(t){return t*(2-t)}const Pr=4.000244140625;class Fr{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const i=t.exported.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%Pr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=f(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;"wheel"===this._type&&e.projection.wrap&&(e._center.lng>=180||e._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>e._terrainEnabled()&&this._aroundCoord?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Pr?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const r=n(),s=Math.pow(2,r),o="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=r,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:n(),r=this._startZoom,s=this._easing;let o,a=!1;if("wheel"===this._type&&r&&s){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=s(e);o=t.number(r,i,n),e<1?this._frameId||(this._frameId=!0):a=!0}else o=i,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,i=(t.exported.now()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),s=.27/Math.sqrt(r*r+1e-4)*.01,o=Math.sqrt(.0729-s*s);n=t.bezier(s,o,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Lr{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kr{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ur{constructor(){this._tap=new mr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Br{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zr{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gr{constructor(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Hr=t=>t.zoom||t.drag||t.pitch||t.rotate;class Vr extends t.Event{}class jr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const i=t.sub([],n,e);this.radius=t.length(i[2]<0?t.div([],i,this.constants):[i[0],i[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const n=t.scale$2([],e,this.radius);if(n[2]>0){const e=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),i=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),r=t.add([],n,t.scale$2([],t.sub([],t.add([],i,e),n),2));n[0]=r[0],n[1]=r[1]}return n}}function Wr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Yr{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rr(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new jr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[r,s,o]of this._listeners)r.addEventListener(s,r===t.window.document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,n,i]of this._listeners)e.removeEventListener(n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new cr(e,t));const i=e.boxZoom=new pr(e,t);this._add("boxZoom",i);const r=new gr,s=new kr;e.doubleClickZoom=new Lr(s,r),this._add("tapZoom",r),this._add("clickZoom",s);const o=new Ur;this._add("tapDragZoom",o);const a=e.touchPitch=new Dr(e);this._add("touchPitch",a);const l=new Tr(t),h=new Er(t);e.dragRotate=new zr(t,l,h),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]);const c=new vr(t),u=new xr(e,t);e.dragPan=new Br(n,c,u),this._add("mousePan",c),this._add("touchPan",u,["touchZoom","touchRotate"]);const p=new Cr,d=new Sr;e.touchZoomRotate=new Gr(n,d,p,o),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ur(e));const f=e.scrollZoom=new Fr(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new Nr;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[g]&&e[g].enable(t[g])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Hr(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(t,e,n){for(const i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,"".concat(t.type,"Window"))}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){this._updatingCamera=!0;const n="renderFrame"===t.type,i=n?void 0:t,r={needsRenderFrame:!1},s={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,l=a?m(this._el,a):n?void 0:f(this._el,t);for(const{handlerName:u,handler:p,allowed:d}of this._handlers){if(!p.isEnabled())continue;let n;this._blockedByActive(o,d,u)?p.reset():p[e||t.type]&&(n=p[e||t.type](t,l,a),this.mergeHandlerResult(r,s,n,u,i),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||p.isActive())&&(o[u]=p)}const h={};for(const u in this._previousActiveHandlers)o[u]||(h[u]=i);this._previousActiveHandlers=o,(Object.keys(h).length||Wr(r))&&(this._changes.push([r,s,h]),this._triggerRenderFrame()),(Object.keys(o).length||Wr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=r;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))}mergeHandlerResult(e,n,i,r,s){if(!i)return;t.extend(e,i);const o={handlerName:r,originalEvent:i.originalEvent||s};void 0!==i.zoomDelta&&(n.zoom=o),void 0!==i.panDelta&&(n.drag=o),void 0!==i.pitchDelta&&(n.pitch=o),void 0!==i.bearingDelta&&(n.rotate=o)}_applyChanges(){const e={},n={},i={};for(const[r,s,o]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.aroundCoord&&(e.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(n,s),t.extend(i,o);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,n,i){const r=this._map,s=r.transform,o=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Wr(e)){const t=s.zoom;s.cameraElevationReference="sea",s.recenterOnTerrain(),s.cameraElevationReference="ground",t!==s.zoom&&this._map._update(!0)}if(s._isCameraConstrained&&r._stop(!0),!Wr(e))return void this._fireEvents(n,i,!0);let{panDelta:a,zoomDelta:l,bearingDelta:h,pitchDelta:c,around:u,aroundCoord:p,pinchAround:d}=e;s._isCameraConstrained&&(l>0&&(l=0),s._isCameraConstrained=!1),void 0!==d&&(u=d),(t=>n.drag&&!this._eventsInProgress.drag)()&&u&&(this._dragOrigin=o(s.pointCoordinate3D(u)),this._trackingEllipsoid.setup(s._camera.position,this._dragOrigin)),s.cameraElevationReference="sea",r._stop(!0),u=u||r.transform.centerPoint,h&&(s.bearing+=h),c&&(s.pitch+=c),s._updateCameraState();const f=[0,0,0];if(a)if("mercator"===s.projection.name){const t=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(u).dir),e=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(u.sub(a)).dir);f[0]=e[0]-t[0],f[1]=e[1]-t[1]}else{const e=s.pointCoordinate(u);if("globe"===s.projection.name){a=a.rotate(-s.angle);const n=s._pixelsPerMercatorPixel/s.worldSize;f[0]=-a.x*t.mercatorScale(t.latFromMercatorY(e.y))*n,f[1]=-a.y*t.mercatorScale(s.center.lat)*n}else{const t=s.pointCoordinate(u.sub(a));e&&t&&(f[0]=t.x-e.x,f[1]=t.y-e.y)}}const m=s.zoom,g=[0,0,0];if(l){const e=o(p||s.pointCoordinate3D(u)),n={dir:t.normalize([],t.sub([],e,s._camera.position))};if(n.dir[2]<0){const i=s.zoomDeltaToMovement(e,l);t.scale$2(g,n.dir,i)}}const y=t.add(f,f,g);s._translateCameraConstrained(y),l&&Math.abs(s.zoom-m)>1e-4&&s.recenterOnTerrain(),s.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,i,!0)}_fireEvents(e,n,i){const r=Hr(this._eventsInProgress),s=Hr(e),o={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(o["".concat(t,"start")]=n),this._eventsInProgress[t]=e[t]}!r&&s&&this._fireEvent("movestart",s.originalEvent);for(const t in o)this._fireEvent(t,o[t]);s&&this._fireEvent("move",s.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const a={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||i,a["".concat(t,"end")]=l)}for(const t in a)this._fireEvent(t,a[t]);const h=Hr(this._eventsInProgress);if(i&&(r||s)&&!h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{this._frameId=void 0,this.handleEvent(new Vr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const qr="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xr extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,i){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.extend({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const i=n&&n.bearing||0,r=n&&n.pitch||0,s=e.getNorthWest(),o=e.getSouthEast();return this._cameraForBounds(this.transform,s,o,i,r,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_minimumAABBFrustumDistance(t,e){const n=e.max[0]-e.min[0],i=e.max[1]-e.min[1];return n/i>t.aspect?n/(2*Math.tan(.5*t.fovX)*t.aspect):i/(2*Math.tan(.5*t.fovY)*t.aspect)}_cameraForBoundsOnGlobe(e,n,i,r,s,o){const a=e.clone(),l=this._extendCameraOptions(o);a.bearing=r,a.pitch=s;const h=t.LngLat.convert(n),c=t.LngLat.convert(i),u=.5*(h.lat+c.lat),p=.5*(h.lng+c.lng),d=t.latLngToECEF(u,p),f=t.normalize([],d),m=t.normalize([],t.cross([],f,[0,1,0])),g=t.cross([],m,f),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,f[0],f[1],f[2],0,0,0,0,1],_=[d,t.latLngToECEF(h.lat,h.lng),t.latLngToECEF(c.lat,h.lng),t.latLngToECEF(c.lat,c.lng),t.latLngToECEF(h.lat,c.lng),t.latLngToECEF(u,h.lng),t.latLngToECEF(u,c.lng),t.latLngToECEF(h.lat,p),t.latLngToECEF(c.lat,p)];let v=t.Aabb.fromPoints(_.map((e=>[t.dot(m,e),t.dot(g,e),t.dot(f,e)])));const T=t.transformMat4([],v.center,y);0===t.squaredLength(T)&&t.set(T,0,0,1),t.normalize(T,T),t.scale$2(T,T,t.GLOBE_RADIUS),a.center=t.ecefToLatLng(T);const E=a.getWorldToCameraMatrix(),x=t.invert(new Float64Array(16),E);v=t.Aabb.applyTransform(v,t.multiply([],E,y)),t.transformMat4(T,T,E);const I=.5*(v.max[2]-v.min[2]),b=this._minimumAABBFrustumDistance(a,v),w=t.scale$2([],[0,0,1],I),S=t.add(w,T,w),A=b+(0===a.pitch?0:t.distance(T,S)),C=a.globeCenterInViewSpace,R=t.sub([],T,[C[0],C[1],C[2]]);t.normalize(R,R),t.scale$2(R,R,A);const D=t.add([],T,R);t.transformMat4(D,D,x);const O=t.earthRadius/t.GLOBE_RADIUS,N=t.length(D),M=t.mercatorZfromAltitude(N*O-t.earthRadius,0),P=Math.min(a.zoomFromMercatorZAdjusted(M),l.maxZoom);return P>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"mercator"}),a.zoom=P,this._cameraForBounds(a,n,i,r,s,o)):{center:a.center,zoom:P,bearing:r,pitch:s}}queryTerrainElevation(e,n){const i=this.transform.elevation;return i?(n=t.extend({},{exaggerated:!0},n),i.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}_cameraForBounds(e,n,i,r,s,o){if("globe"===e.projection.name)return this._cameraForBoundsOnGlobe(e,n,i,r,s,o);const a=e.clone(),l=this._extendCameraOptions(o),h=a.padding;a.bearing=r,a.pitch=s;const c=t.LngLat.convert(n),u=t.LngLat.convert(i),p=new t.LngLat(c.lng,u.lat),d=new t.LngLat(u.lng,c.lat),f=a.project(c),m=a.project(u),g=this.queryTerrainElevation(c),y=this.queryTerrainElevation(u),_=this.queryTerrainElevation(p),v=this.queryTerrainElevation(d),T=[[f.x,f.y,Math.min(g||0,y||0,_||0,v||0)],[m.x,m.y,Math.max(g||0,y||0,_||0,v||0)]];let E=t.Aabb.fromPoints(T);const x=a.getWorldToCameraMatrix(),I=t.invert(new Float64Array(16),x);E=t.Aabb.applyTransform(E,x);const b=t.sub([],E.max,E.min),w=h.left||0,S=h.right||0,A=h.bottom||0,C=h.top||0,{left:R,right:D,top:O,bottom:N}=l.padding,M=.5*(w+S),P=.5*(C+A),F=Math.min(a.scaleZoom(a.scale*Math.min((a.width-(w+S+R+D))/b[0],(a.height-(A+C+N+O))/b[1])),l.maxZoom),L=a.scale/a.zoomScale(F);E=new t.Aabb([E.min[0]-(R+M)*L,E.min[1]-(N+P)*L,E.min[2]],[E.max[0]+(D+M)*L,E.max[1]+(O+P)*L,E.max[2]]);const k=.5*b[2],U=this._minimumAABBFrustumDistance(a,E),B=[0,0,1,0];t.transformMat4$1(B,B,x),t.normalize$2(B,B);const z=t.scale$2([],B,U+k),G=t.add([],E.center,z),H=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new t.pointGeometry(l.offset.x,l.offset.y):t.pointGeometry.convert(l.offset)).rotate(-t.degToRad(r));E.center[0]-=H.x*L,E.center[1]+=H.y*L,t.transformMat4(E.center,E.center,I),t.transformMat4(G,G,I);const V=[E.center[0],E.center[1],G[2]*a.pixelsPerMeter];t.scale$2(V,V,1/a.worldSize);const j=t.lngFromMercatorX(V[0]),W=t.latFromMercatorY(V[1]),Y=Math.min(a._zoomFromMercatorZ(V[2]),l.maxZoom),q=new t.LngLat(j,W);return a.mercatorFromTransition&&Y<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"globe"}),a.zoom=Y,this._cameraForBounds(a,n,i,r,s,o)):{center:q,zoom:Y,bearing:r,pitch:s}}fitBounds(t,e,n){const i=this.cameraForBounds(t,e);return this._fitInternal(i,e,n)}fitScreenCoordinates(e,n,i,r,s){const o=t.pointGeometry.convert(e),a=t.pointGeometry.convert(n),l=new t.pointGeometry(Math.min(o.x,a.x),Math.min(o.y,a.y)),h=new t.pointGeometry(Math.max(o.x,a.x),Math.max(o.y,a.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,a))return this;const c=this.transform.pointLocation3D(l),u=this.transform.pointLocation3D(h),p=this.transform.pointLocation3D(new t.pointGeometry(l.x,h.y)),d=this.transform.pointLocation3D(new t.pointGeometry(h.x,l.y)),f=[Math.min(c.lng,u.lng,p.lng,d.lng),Math.min(c.lat,u.lat,p.lat,d.lat)],m=[Math.max(c.lng,u.lng,p.lng,d.lng),Math.max(c.lat,u.lat,p.lat,d.lat)],g=r&&r.pitch?r.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,f,m,i,g,r);return this._fitInternal(y,r,s)}_fitInternal(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=e.preloadOnly?this.transform.clone():this.transform;let r=!1,s=!1,o=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(s=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(o=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),e.preloadOnly?(this._preloadTiles(i),this):(this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),s&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),o&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(qr),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){const i=this.transform;if(!i.projection.supportsFreeCamera)return t.warnOnce(qr),this;this.stop();const r=i.zoom,s=i.pitch,o=i.bearing;i.setFreeCameraOptions(e);const a=r!==i.zoom,l=s!==i.pitch,h=o!==i.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),a&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),h&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const i=this.transform,r=this.getZoom(),s=this.getBearing(),o=this.getPitch(),a=this.getPadding(),l="zoom"in e?+e.zoom:r,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,c="pitch"in e?+e.pitch:o,u="padding"in e?e.padding:i.padding,p=t.pointGeometry.convert(e.offset);let d,f,m;if("globe"===i.projection.name){const n=t.MercatorCoordinate.fromLngLat(i.center),r=p.rotate(-i.angle);n.x+=r.x/i.worldSize,n.y+=r.y/i.worldSize;const s=n.toLngLat(),o=t.LngLat.convert(e.center||s);this._normalizeCenter(o),d=i.centerPoint.add(r),f=new t.pointGeometry(n.x,n.y).mult(i.worldSize),m=new t.pointGeometry(t.mercatorXfromLng(o.lng),t.mercatorYfromLat(o.lat)).mult(i.worldSize).sub(f)}else{d=i.centerPoint.add(p);const n=i.pointLocation(d),r=t.LngLat.convert(e.center||n);this._normalizeCenter(r),f=i.project(n),m=i.project(r).sub(f)}const g=i.zoomScale(l-r);let y,_;e.around&&(y=t.LngLat.convert(e.around),_=i.locationPoint(y));const v=this._zooming||l!==r,T=this._rotating||s!==h,E=this._pitching||c!==o,x=!i.isPaddingEqual(u),I=i=>I=>{if(v&&(i.zoom=t.number(r,l,I)),T&&(i.bearing=t.number(s,h,I)),E&&(i.pitch=t.number(o,c,I)),x&&(i.interpolatePadding(a,u,I),d=i.centerPoint.add(p)),y)i.setLocationAtPoint(y,_);else{const t=i.zoomScale(i.zoom-r),e=l>r?Math.min(2,g):Math.max(.5,g),n=Math.pow(e,1-I),s=i.unproject(f.add(m.mult(I*n)).mult(t));i.setLocationAtPoint(i.renderWorldCopies?s.wrap():s,d)}return e.preloadOnly||this._fireMoveEvents(n),i};if(e.preloadOnly){const t=this._emulate(I,e.duration,i);return this._preloadTiles(t),this}const b={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=v,this._rotating=T,this._pitching=E,this._padding=x,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,b),this._ease(I(i),(t=>{i.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const i=this._zooming,r=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),s&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const i=this.transform,r=this.getZoom(),s=this.getBearing(),o=this.getPitch(),a=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):r,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,c="pitch"in e?+e.pitch:o,u="padding"in e?e.padding:i.padding,p=i.zoomScale(l-r),d=t.pointGeometry.convert(e.offset);let f=i.centerPoint.add(d);const m=i.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=i.project(m),_=i.project(g).sub(y);let v=e.curve;const T=Math.max(i.width,i.height),E=T/p,x=_.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,r,l),i.minZoom,i.maxZoom),s=T/i.zoomScale(n-r);v=Math.sqrt(s/x*2)}const I=v*v;function b(t){const e=(E*E-T*T+(t?-1:1)*I*I*x*x)/(2*(t?E:T)*I*x);return Math.log(Math.sqrt(e*e+1)-e)}function w(t){return(Math.exp(t)-Math.exp(-t))/2}function S(t){return(Math.exp(t)+Math.exp(-t))/2}const A=b(0);let C=function(t){return S(A)/S(A+v*t)},R=function(t){return T*((S(A)*(w(e=A+v*t)/S(e))-w(A))/I)/x;var e},D=(b(1)-A)/v;if(Math.abs(x)<1e-6||!isFinite(D)){if(Math.abs(T-E)<1e-6)return this.easeTo(e,n);const t=E<T?-1:1;D=Math.abs(Math.log(E/T))/v,R=function(){return 0},C=function(e){return Math.exp(t*v*e)}}e.duration="duration"in e?+e.duration:1e3*D/("screenSpeed"in e?+e.screenSpeed/v:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);const O=s!==h,N=c!==o,M=!i.isPaddingEqual(u),P=i=>p=>{const m=p*D,v=1/C(m);i.zoom=1===p?l:r+i.scaleZoom(v),O&&(i.bearing=t.number(s,h,p)),N&&(i.pitch=t.number(o,c,p)),M&&(i.interpolatePadding(a,u,p),f=i.centerPoint.add(d));const T=1===p?g:i.unproject(y.add(_.mult(R(m))).mult(v));return i.setLocationAtPoint(i.renderWorldCopies?T.wrap():T,f),i._updateCameraOnTerrain(),e.preloadOnly||this._fireMoveEvents(n),i};if(e.preloadOnly){const t=this._emulate(P,e.duration,i);return this._preloadTiles(t),this}return this._zooming=!0,this._rotating=O,this._pitching=N,this._padding=M,this._prepareEase(n,!1),this._ease(P(i),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const t=this._onEaseEnd;this._onEaseEnd=void 0,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.maxBounds)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}_emulate(t,e,n){const i=Math.ceil(15*e/1e3),r=[],s=t(n.clone());for(let o=0;o<=i;o++){const t=s(o/i);r.push(t.clone())}return r}}class Zr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s("button","mapboxgl-ctrl-attrib-button",this._container),s("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString("AttributionControl.".concat(e));t.setAttribute("aria-label",n),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const i=n.reduce(((t,e,i)=>(e.value&&(t+="".concat(e.key,"=").concat(e.value).concat(i<n.length-1?"&":"")),t)),"?");e.href="".concat(t.config.FEEDBACK_URL,"/").concat(i,"#").concat(Ji(this._map,!0)),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const i in e){const n=e[i];if(n.used){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Kr{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=s("div","mapboxgl-ctrl");const e=s("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Qr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const i of n)if(i.id===t)return void(i.cancelled=!0)}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Jr(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){const r=new t.LngLat(e.lng-360,e.lat),s=new t.LngLat(e.lng+360,e.lat),o=360*Math.ceil(Math.abs(e.lng-i.center.lng)/360),a=i.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(r).distSqr(n)<a&&(l||Math.abs(r.lng-i.center.lng)<o)?e=r:i.locationPoint(s).distSqr(n)<a&&(l||Math.abs(s.lng-i.center.lng)<o)&&(e=s)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}const $r={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ts extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=e&&e.occludedOpacity||.2,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=s("div");const n=41,i=27,r=o("svg",{display:"block",height:n*this._scale+"px",width:i*this._scale+"px",viewBox:"0 0 ".concat(i," ").concat(n)},this._element),a=o("radialGradient",{id:"shadowGradient"},o("defs",{},r));o("stop",{offset:"10%","stop-opacity":.4},a),o("stop",{offset:"100%","stop-opacity":.05},a),o("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},r),o("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},r),o("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},r),o("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},r),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()}));const i=this._element.classList;for(const t in $r)i.remove("mapboxgl-marker-anchor-".concat(t));i.add("mapboxgl-marker-anchor-".concat(this._anchor)),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[i,-1*(e-n+i)],"bottom-right":[-i,-1*(e-n+i)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map,e=this._pos;if(!t||!e)return!1;const n=t.unproject(e),i=t.getFreeCameraOptions();if(!i.position)return!1;const r=i.position.toLngLat();return r.distanceTo(n)<.9*r.distanceTo(this._lngLat)}_evaluateOpacity(){const e=this._map;if(!e)return;const n=this._pos;if(!n||n.x<0||n.x>e.transform.width||n.y<0||n.y>e.transform.height)return void this._clearFadeTimer();const i=e.unproject(n);let r;e._showingGlobe()&&t.isLngLatBehindGlobe(e.transform,this._lngLat)?r=0:(r=1-e._queryFogOpacity(i),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity="".concat(r),this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const e=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(t.x,"px,").concat(t.y,"px)\n            ").concat($r[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(e.x,"px,").concat(e.y,"px)\n        ")}_calculateXYTransform(){const e=this._pos,n=this._map,i=this.getPitchAlignment();if(!n||!e||"map"!==i)return"";if(!n._showingGlobe()){const t=n.getPitch();return t?"rotateX(".concat(t,"deg)"):""}const r=t.radToDeg(t.globeTiltAtLngLat(n.transform,this._lngLat)),s=e.sub(t.globeCenterToScreenPoint(n.transform)),o=Math.abs(s.x)+Math.abs(s.y);if(0===o)return"";const a=r/o;return"rotateX(".concat(-s.y*a,"deg) rotateY(").concat(s.x*a,"deg)")}_calculateZTransform(){const e=this._pos,n=this._map;if(!n||!e)return"";let i=0;const r=this.getRotationAlignment();if("map"===r)if(n._showingGlobe()){const e=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),r=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(e);i=t.radToDeg(Math.atan2(r.y,r.x))-90}else i=-n.getBearing();else if("horizon"===r){const r=t.smoothstep(4,6,n.getZoom()),s=t.globeCenterToScreenPoint(n.transform);s.y+=r*n.transform.height;const o=e.sub(s),a=t.radToDeg(Math.atan2(o.y,o.x));i=(a>90?a-270:a+90)*(1-r)}return i+=this._rotation,i?"rotateZ(".concat(i,"deg)"):""}_update(e){t.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Jr(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===e?this._updateFrameId=t.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){const n=this._map;if(!n)return;const i=this._pointerdownPos,r=this._positionDelta;if(i&&r){if(!this._isDragging){const t=this._clickTolerance||n._clickTolerance;if(e.point.dist(i)<t)return;this._isDragging=!0}this._pos=e.point.sub(r),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){const e=this._map,n=this._pos;e&&n&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(n),this._pointerdownPos=t.point,this._state="pending",e.on("mousemove",this._onMove),e.on("touchmove",this._onMove),e.once("mouseup",this._onUp),e.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const e=this._map;return e&&(t?(e.on("mousedown",this._addDragHandler),e.on("touchstart",this._addDragHandler)):(e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(t){return this._occludedOpacity=t||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const es={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ns=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t.pointGeometry(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof e){const i=Math.round(Math.sqrt(.5*Math.pow(e,2)));switch(n){case"top":return new t.pointGeometry(0,e);case"top-left":return new t.pointGeometry(i,i);case"top-right":return new t.pointGeometry(-i,i);case"bottom":return new t.pointGeometry(0,-e);case"bottom-left":return new t.pointGeometry(i,-i);case"bottom-right":return new t.pointGeometry(-i,-i);case"left":return new t.pointGeometry(e,0);case"right":return new t.pointGeometry(-e,0)}return new t.pointGeometry(0,0)}return e instanceof t.pointGeometry||Array.isArray(e)?t.pointGeometry.convert(e):t.pointGeometry.convert(e[n]||[0,0])}class rs{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const ss={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},os={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},as={showCompass:!0,showZoom:!0,visualizePitch:!1};class ls{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=n,this.mouseRotate=new Tr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new Er({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),c()}move(t,e){const n=this.map,i=this.mouseRotate.mousemoveWindow(t,e),r=i&&i.bearingDelta;if(r&&n.setBearing(n.getBearing()+r),this.mousePitch){const i=this.mousePitch.mousemoveWindow(t,e),r=i&&i.pitchDelta;r&&n.setPitch(n.getPitch()+r)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){u(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),f(this.element,e)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,f(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=m(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const hs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},cs={maxWidth:100,unit:"metric"};function us(t,e,n){const i=ps(e),r=i/e,s={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[n];this._map._requestDomTask((()=>{this._container.style.width=t*r+"px",this._container.innerHTML="".concat(i,"&nbsp;").concat(s)}))}function ps(t){const e=Math.pow(10,"".concat(Math.floor(t)).length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}const ds={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Xr{constructor(e){if(t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},os,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(e.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(e.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Zi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._language=this._parseLanguage(e.language),this._worldview=e.worldview,this._renderTaskQueue=new Qr,this._domRenderTaskQueue=new Qr,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ss,e.locale),this._clickTolerance=e.clickTolerance,this._cooperativeGestures=e.cooperativeGestures,this._performanceMetricsCollection=e.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new rs(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Yr(this,e),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.projection&&this.setProjection(e.projection),this._hash=e.hash&&new Qi("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.attributionControl&&this.addControl(new Zr({customAttribution:e.customAttribution})),this._logoControl=new Kr,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event("".concat(e.dataType,"data"),e))})),this.on("dataloading",(e=>{this.fire(new t.Event("".concat(e.dataType,"dataloading"),e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),n&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(e){return"auto"===e?t.window.navigator.language:Array.isArray(e)?0===e.length?void 0:e.map((e=>"auto"===e?t.window.navigator.language:e)):e}setLanguage(t){const e=this._parseLanguage(t);if(!this.style||e===this._language)return this;this._language=e,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(t){return this.style&&t!==this._worldview?(this._worldview=t,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(t){return this._lazyInitEmptyStyle(),t?"string"==typeof t&&(t={name:t}):t=null,this._useExplicitProjection=!!t,this._prioritizeAndUpdateProjection(t,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const e=this.transform,n=e.projection.name;let i;"globe"===n&&e.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(e.setMercatorFromTransition(),i=!0):"mercator"===n&&e.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(e.setProjection({name:"globe"}),i=!0),i&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(t,e){return this._updateProjection(t||e||{name:"mercator"})}_updateProjection(e){let n;if(n="globe"===e.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(e),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const t in this.style._sourceCaches)this.style._sourceCaches[t].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let i=!1;const r=r=>{const s=e.filter((t=>this.getLayer(t))),o=s.length?this.queryRenderedFeatures(r.point,{layers:s}):[];o.length?i||(i=!0,n.call(this,new ar(t,this,r.originalEvent,{features:o}))):i=!1},s=()=>{i=!1};return{layers:new Set(e),listener:n,delegates:{mousemove:r,mouseout:s}}}if("mouseleave"===t||"mouseout"===t){let i=!1;const r=r=>{const s=e.filter((t=>this.getLayer(t)));(s.length?this.queryRenderedFeatures(r.point,{layers:s}):[]).length?i=!0:i&&(i=!1,n.call(this,new ar(t,this,r.originalEvent)))},s=e=>{i&&(i=!1,n.call(this,new ar(t,this,e.originalEvent)))};return{layers:new Set(e),listener:n,delegates:{mousemove:r,mouseout:s}}}{const i=t=>{const i=e.filter((t=>this.getLayer(t))),r=i.length?this.queryRenderedFeatures(t.point,{layers:i}):[];r.length&&(t.features=r,n.call(this,t),delete t.features)};return{layers:new Set(e),listener:n,delegates:{[t]:i}}}}on(t,e,n){if(void 0===n)return super.on(t,e);Array.isArray(e)||(e=[e]);const i=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i);for(const r in i.delegates)this.on(r,i.delegates[r]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);Array.isArray(e)||(e=[e]);const i=this._createDelegatedListener(t,e,n);for(const r in i.delegates)this.once(r,i.delegates[r]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);e=new Set(Array.isArray(e)?e:[e]);const i=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},r=this._delegatedListeners?this._delegatedListeners[t]:void 0;return r&&(t=>{for(let r=0;r<t.length;r++){const s=t[r];if(s.listener===n&&i(s.layers,e)){for(const t in s.delegates)this.off(t,s.delegates[t]);return t.splice(r,1),this}}})(r),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t&&(this.style=new Je(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Je(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(r,((e,i)=>{e?this.fire(new t.ErrorEvent(e)):i&&this._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: ".concat(i.message||i.error||i,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){return!!this.style&&this.style._isSourceCacheLoaded(t)}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n){let{pixelRatio:i=1,sdf:r=!1,stretchX:s,stretchY:o,content:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._lazyInitEmptyStyle(),n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap){const{width:l,height:h,data:c}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},c),pixelRatio:i,stretchX:s,stretchY:o,content:a,sdf:r,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:h}=n,c=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},new Uint8Array(c.data)),pixelRatio:i,stretchX:s,stretchY:o,content:a,sdf:r,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap?t.exported.getImageData(n):n,{width:s,height:o}=r;void 0!==s&&void 0!==o?s===i.data.width&&o===i.data.height?(i.data.replace(r.data,!(n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap)),this.style.updateImage(e,i)):this.fire(new t.ErrorEvent(new Error("The width and height of the updated image (".concat(s,", ").concat(o,")\n                must be that same as the previous version of the image\n                (").concat(i.data.width,", ").concat(i.data.height,")")))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,i)=>{n(e,i instanceof t.window.HTMLImageElement?t.exported.getImageData(i):i)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,i),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,i),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),!t&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_updateContainerDimensions(){if(!this._container)return;const e=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let i,r,s,o=this._container;for(;o&&(!r||!s);){const e=t.window.getComputedStyle(o).transform;e&&"none"!==e&&(i=e.match(/matrix.*\((.+)\)/)[1].split(", "),i[0]&&"0"!==i[0]&&"1"!==i[0]&&(r=i[0]),i[3]&&"0"!==i[3]&&"1"!==i[3]&&(s=i[3])),o=o.parentElement}this._containerWidth=r?Math.abs(e/r):e,this._containerHeight=s?Math.abs(n/s):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=s("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=s("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=s("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=s("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{i[t]=s("div","mapboxgl-ctrl-".concat(t),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const i=t.exported.devicePixelRatio||1;this._canvas.width=i*Math.ceil(e),this._canvas.height=i*Math.ceil(n),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(n,"px")}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_addPopup(t){this._popups.push(t)}_removePopup(t){const e=this._popups.indexOf(t);-1!==e&&this._popups.splice(e,1)}_setupPainter(){const e=t.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);i?(t.storeAuthState(i,!0),this.painter=new Li(i,this.transform),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const i=this.painter.context.extTimerQuery,r=t.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;this._updateProjectionTransition();const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=this.transform.pitch,i=t.exported.now(),r=new t.EvaluationParameters(e,{now:i,fadeDuration:s,pitch:n,transition:this.style.getTransition()});this.style.update(r)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let o=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),o=this._updateAverageElevation(r),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):o=this._updateAverageElevation(r),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const s=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:s})),t.window.performance.mark("frame-gpu",{startTime:r,detail:{gpuTime:s}})}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const e=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(e);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(a||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(o=this._updateAverageElevation(r,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(t){for(const e of this._markers)t&&!this.getRenderWorldCopies()&&(e._lngLat=e._lngLat.wrap()),e._update();for(const e of this._popups)!t||this.getRenderWorldCopies()||e._trackPointer||(e._lngLat=e._lngLat.wrap()),e._update()}_updateAverageElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let i=this.transform.sampleAverageElevation(),r=!1;this.transform.elevation&&(r=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(i)?i=0:this._averageElevationLastSampledAt=t;const s=Math.abs(e-i);if(s>1){if(this._isInitialLoad||r)return this._averageElevation.jumpTo(i),n(i);this._averageElevation.easeTo(i,t,300)}else if(s>1e-4)return this._averageElevation.jumpTo(i),n(i)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Kr&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const t=this._isDragging();this.painter.updateTerrain(this.style,t)}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,i=n.createFramebuffer();function r(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(t),e.canvasCopies.map(r),e.timeStamps)}_canvasPixelComparison(t,e,n){let i=n[1]-n[0];const r=t.length/4;for(let s=0;s<e.length;s++){const o=e[s];let a=0;for(let e=0;e<o.length;e+=4)o[e]===t[e]&&o[e+1]===t[e+1]&&o[e+2]===t[e+2]&&o[e+3]===t[e+3]&&(a+=1);i+=(n[s+2]-n[s+1])*(1-a/r)}return i}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_preloadTiles(e){const n=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(n,((t,n)=>t._preloadTiles(e,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}_onVisibilityChange(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(t){this._showTileAABBs!==t&&(this._showTileAABBs=t,t&&this._update())}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},as,e),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>{this._map&&this._map.zoomIn({},{originalEvent:t})})),s("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>{this._map&&this._map.zoomOut({},{originalEvent:t})})),s("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{const e=this._map;e&&(this.options.visualizePitch?e.resetNorthPitch({},{originalEvent:t}):e.resetNorth({},{originalEvent:t}))})),this._compassIcon=s("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map;if(!t)return;const e=t.getZoom(),n=e===t.getMaxZoom(),i=e===t.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this._map;if(!t)return;const e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),t.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&t.on("pitch",this._rotateCompassArrow),t.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ls(t,this._compass,this.options.visualizePitch)),this._container}onRemove(){const t=this._map;t&&(this._container.remove(),this.options.showZoom&&t.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&t.off("pitch",this._rotateCompassArrow),t.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(t,e){const n=s("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){if(!this._map)return;const n=this._map._getUIString("NavigationControl.".concat(e));t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},hs,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ki(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(t){return this._map=t,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){var n=this;const i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=t,e(t)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>i("denied"!==t.state))).catch((()=>i())):i()}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return!!e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),s=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),s,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map.transform,n=t.mercatorZfromAltitude(1,e._center.lat)*e.worldSize,i=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(i,"px"),this._circleElement.style.height="".concat(i,"px")}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=s("button","mapboxgl-ctrl-geolocate",this._container),s("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s("div","mapboxgl-user-location"),this._dotElement.appendChild(s("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(s("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ts({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=s("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ts({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Zr,ScaleControl:class{constructor(e){this.options=t.extend({},cs,e),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(t){return!1}}()||(this._setScale=us.bind(this)),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const t=this.options.maxWidth||100,e=this._map,n=e._containerHeight/2,i=e._containerWidth/2-t/2,r=e.unproject([i,n]),s=e.unproject([i+t,n]),o=r.distanceTo(s);if("imperial"===this.options.unit){const e=3.2808*o;e>5280?this._setScale(t,e/5280,"mile"):this._setScale(t,e,"foot")}else"nautical"===this.options.unit?this._setScale(t,o/1852,"nautical-mile"):o>=1e3?this._setScale(t,o/1e3,"kilometer"):this._setScale(t,o,"meter")}_setScale(t,e,n){const i=ps(e),r=i/e;this._map._requestDomTask((()=>{this._container.style.width=t*r+"px",this._container.innerHTML="nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:n}).format(i):"".concat(i,"&nbsp;nm")}))}onAdd(t){return this._map=t,this._language=t.getLanguage(),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(t){this._language=t,this._update()}setUnit(t){this.options.unit=t,this._update()}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=s("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(es),e),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&e.on("preclick",this._onClose),this.options.closeOnMove&&e.on("move",this._onClose),e.on("remove",this.remove),this._update(),e._addPopup(this),this._focusFirstElement(),this._trackPointer?(e.on("mousemove",this._onMouseEvent),e.on("mouseup",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")):e.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const e=this._map;return e&&(e.off("move",this._update),e.off("move",this._onClose),e.off("preclick",this._onClose),e.off("click",this._onClose),e.off("remove",this.remove),e.off("mousemove",this._onMouseEvent),e.off("mouseup",this._onMouseEvent),e.off("drag",this._onMouseEvent),e._canvasContainer&&e._canvasContainer.classList.remove("mapboxgl-track-pointer"),e._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const t=this._map;return t&&(t.off("move",this._update),t.on("mousemove",this._onMouseEvent),t.on("drag",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");let r;for(i.innerHTML=e;r=i.firstChild,r;)n.appendChild(r);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){let e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=s("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(t),this.options.closeButton){const t=this._closeButton=s("button","mapboxgl-popup-close-button",e);t.type="button",t.setAttribute("aria-label","Close popup"),t.setAttribute("aria-hidden","true"),t.innerHTML="&#215;",t.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._updateClassList(),e}_onMouseEvent(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._map,n=this._container,i=this._pos;if(!e||!n||!i)return"bottom";const r=n.offsetWidth,s=n.offsetHeight,o=i.x<r/2,a=i.x>e.transform.width-r/2;if(i.y+t<s)return o?"top-left":a?"top-right":"top";if(i.y>e.transform.height-s){if(o)return"bottom-left";if(a)return"bottom-right"}return o?"left":a?"right":"bottom"}_updateClassList(){const t=this._container;if(!t)return;const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),t.className=e.join(" ")}_update(e){const n=this._map,i=this._content;if(!n||!this._lngLat&&!this._trackPointer||!i)return;let r=this._container;if(r||(r=this._container=s("div","mapboxgl-popup",n.getContainer()),this._tip=s("div","mapboxgl-popup-tip",r),r.appendChild(i)),this.options.maxWidth&&r.style.maxWidth!==this.options.maxWidth&&(r.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jr(this._lngLat,this._pos,n.transform)),!this._trackPointer||e){const t=this._pos=this._trackPointer&&e?e:n.project(this._lngLat),i=is(this.options.offset),r=this._anchor=this._getAnchor(i.y),s=is(this.options.offset,r),o=t.add(s).round();n._requestDomTask((()=>{this._container&&r&&(this._container.style.transform="".concat($r[r]," translate(").concat(o.x,"px,").concat(o.y,"px)"))}))}if(!this._marker&&n._showingGlobe()){const e=t.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(e)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(ns);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._container&&(this._container.style.opacity="".concat(t)),this._content&&(this._content.style.pointerEvents=t?"auto":"none")}},Marker:ts,Style:Je,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Gi,Evented:t.Evented,config:t.config,prewarm:function(){Gt().acquire(Ut)},clearPrewarmedResources:function(){const t=zt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Ut),zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Bt.workerCount},set workerCount(t){Bt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return ds})),n}()},2730:(t,e,n)=>{"use strict";var i=n(5043),r=n(8853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){h(t,e),h(t+"Capture",e)}function h(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function m(t,e,n,i,r,s,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function v(t,e,n,i){var r=g.hasOwnProperty(e)?g[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!u.call(f,t)||!u.call(d,t)&&(p.test(t)?f[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,_);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var T=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function F(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=P&&t[P]||t["@@iterator"])?t:null}var L,k=Object.assign;function U(t){if(void 0===L)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var B=!1;function z(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&"string"===typeof h.stack){for(var r=h.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?U(t):""}function G(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 1:return t=z(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case I:return"Fragment";case x:return"Portal";case w:return"Profiler";case b:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case O:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case N:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function j(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function W(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Y(t){t._valueTracker||(t._valueTracker=function(t){var e=W(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function q(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=W(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Z(t,e){var n=e.checked;return k({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=j(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&v(t,"checked",e,!1)}function J(t,e){Q(t,e);var n=j(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,j(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&X(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+j(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return k({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:j(n)}}function st(t,e){var n=j(e.value),i=j(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ht,ct,ut=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ht=ht||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ht.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function pt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||dt.hasOwnProperty(t)&&dt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=mt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(dt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dt[e]=dt[t]}))}));var yt=k({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function vt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=null;function Et(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,It=null,bt=null;function wt(t){if(t=vr(t)){if("function"!==typeof xt)throw Error(s(280));var e=t.stateNode;e&&(e=Er(e),xt(t.stateNode,t.type,e))}}function St(t){It?bt?bt.push(t):bt=[t]:It=t}function At(){if(It){var t=It,e=bt;if(bt=It=null,wt(t),e)for(t=0;t<e.length;t++)wt(e[t])}}function Ct(t,e){return t(e)}function Rt(){}var Dt=!1;function Ot(t,e,n){if(Dt)return t(e,n);Dt=!0;try{return Ct(t,e,n)}finally{Dt=!1,(null!==It||null!==bt)&&(Rt(),At())}}function Nt(t,e){var n=t.stateNode;if(null===n)return null;var i=Er(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Mt=!1;if(c)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch(ct){Mt=!1}function Ft(t,e,n,i,r,s,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(c){this.onError(c)}}var Lt=!1,kt=null,Ut=!1,Bt=null,zt={onError:function(t){Lt=!0,kt=t}};function Gt(t,e,n,i,r,s,o,a,l){Lt=!1,kt=null,Ft.apply(zt,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Vt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function jt(t){if(Ht(t)!==t)throw Error(s(188))}function Wt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return jt(r),t;if(o===i)return jt(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?Yt(t):null}function Yt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Yt(t);if(null!==e)return e;t=t.sibling}return null}var qt=r.unstable_scheduleCallback,Xt=r.unstable_cancelCallback,Zt=r.unstable_shouldYield,Kt=r.unstable_requestPaint,Qt=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,$t=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var he=64,ce=4194304;function ue(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ue(a):0!==(s&=o)&&(i=ue(s))}else 0!==(o=n&~r)?i=ue(o):0!==s&&(i=ue(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-oe(e)),i|=t[n],e&=~r;return i}function de(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=he;return 0===(4194240&(he<<=1))&&(he=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function _e(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oe(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ve=0;function Te(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Ee,xe,Ie,be,we,Se=!1,Ae=[],Ce=null,Re=null,De=null,Oe=new Map,Ne=new Map,Me=[],Pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fe(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Re=null;break;case"mouseover":case"mouseout":De=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(e.pointerId)}}function Le(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=vr(e))&&xe(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ke(t){var e=_r(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Vt(n)))return t.blockedOn=e,void we(t.priority,(function(){Ie(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ue(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ze(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=vr(n))&&xe(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);Tt=i,n.target.dispatchEvent(i),Tt=null,e.shift()}return!0}function Be(t,e,n){Ue(t)&&n.delete(e)}function ze(){Se=!1,null!==Ce&&Ue(Ce)&&(Ce=null),null!==Re&&Ue(Re)&&(Re=null),null!==De&&Ue(De)&&(De=null),Oe.forEach(Be),Ne.forEach(Be)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,Se||(Se=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ze)))}function He(t){function e(e){return Ge(e,t)}if(0<Ae.length){Ge(Ae[0],t);for(var n=1;n<Ae.length;n++){var i=Ae[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Ce&&Ge(Ce,t),null!==Re&&Ge(Re,t),null!==De&&Ge(De,t),Oe.forEach(e),Ne.forEach(e),n=0;n<Me.length;n++)(i=Me[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Me.length&&null===(n=Me[0]).blockedOn;)ke(n),null===n.blockedOn&&Me.shift()}var Ve=T.ReactCurrentBatchConfig,je=!0;function We(t,e,n,i){var r=ve,s=Ve.transition;Ve.transition=null;try{ve=1,qe(t,e,n,i)}finally{ve=r,Ve.transition=s}}function Ye(t,e,n,i){var r=ve,s=Ve.transition;Ve.transition=null;try{ve=4,qe(t,e,n,i)}finally{ve=r,Ve.transition=s}}function qe(t,e,n,i){if(je){var r=Ze(t,e,n,i);if(null===r)ji(t,e,i,Xe,n),Fe(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Ce=Le(Ce,t,e,n,i,r),!0;case"dragenter":return Re=Le(Re,t,e,n,i,r),!0;case"mouseover":return De=Le(De,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Oe.set(s,Le(Oe.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ne.set(s,Le(Ne.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Fe(t,i),4&e&&-1<Pe.indexOf(t)){for(;null!==r;){var s=vr(r);if(null!==s&&Ee(s),null===(s=Ze(t,e,n,i))&&ji(t,e,i,Xe,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else ji(t,e,i,null,n)}}var Xe=null;function Ze(t,e,n,i){if(Xe=null,null!==(t=_r(t=Et(i))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Vt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case $t:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Qe=null,Je=null,$e=null;function tn(){if($e)return $e;var t,e,n=Je,i=n.length,r="value"in Qe?Qe.value:Qe.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[s-e];e++);return $e=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var o in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return k(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,an,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(hn),un=k({},hn,{view:0,detail:0}),pn=sn(un),dn=k({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:an}}),fn=sn(dn),mn=sn(k({},dn,{dataTransfer:0})),gn=sn(k({},un,{relatedTarget:0})),yn=sn(k({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=k({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vn=sn(_n),Tn=sn(k({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=In[t])&&!!e[t]}function wn(){return bn}var Sn=k({},un,{key:function(t){if(t.key){var e=En[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),An=sn(Sn),Cn=sn(k({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(k({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Dn=sn(k({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=k({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(On),Mn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Fn=null;c&&"documentMode"in document&&(Fn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Fn,kn=c&&(!Pn||Fn&&8<Fn&&11>=Fn),Un=String.fromCharCode(32),Bn=!1;function zn(t,e){switch(t){case"keyup":return-1!==Mn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function Wn(t,e,n,i){St(i),0<(e=Yi(e,"onChange")).length&&(n=new cn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Yn=null,qn=null;function Xn(t){Ui(t,0)}function Zn(t){if(q(Tr(t)))return t}function Kn(t,e){if("change"===t)return e}var Qn=!1;if(c){var Jn;if(c){var $n="oninput"in document;if(!$n){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),$n="function"===typeof ti.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){Yn&&(Yn.detachEvent("onpropertychange",ni),qn=Yn=null)}function ni(t){if("value"===t.propertyName&&Zn(qn)){var e=[];Wn(e,qn,t,Et(t)),Ot(Xn,e)}}function ii(t,e,n){"focusin"===t?(ei(),qn=n,(Yn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Zn(qn)}function si(t,e){if("click"===t)return Zn(e)}function oi(t,e){if("input"===t||"change"===t)return Zn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function hi(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ci(t,e){var n,i=hi(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=hi(i)}}function ui(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ui(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pi(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=X((t=e.contentWindow).document)}return e}function di(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fi(t){var e=pi(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&di(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=ci(n,s);var o=ci(n,i);r&&o&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mi=c&&"documentMode"in document&&11>=document.documentMode,gi=null,yi=null,_i=null,vi=!1;function Ti(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==gi||gi!==X(i)||("selectionStart"in(i=gi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&li(_i,i)||(_i=i,0<(i=Yi(yi,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=gi)))}function Ei(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionend:Ei("Transition","TransitionEnd")},Ii={},bi={};function wi(t){if(Ii[t])return Ii[t];if(!xi[t])return t;var e,n=xi[t];for(e in n)if(n.hasOwnProperty(e)&&e in bi)return Ii[t]=n[e];return t}c&&(bi=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Si=wi("animationend"),Ai=wi("animationiteration"),Ci=wi("animationstart"),Ri=wi("transitionend"),Di=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,e){Di.set(t,e),l(e,[t])}for(var Mi=0;Mi<Oi.length;Mi++){var Pi=Oi[Mi];Ni(Pi.toLowerCase(),"on"+(Pi[0].toUpperCase()+Pi.slice(1)))}Ni(Si,"onAnimationEnd"),Ni(Ai,"onAnimationIteration"),Ni(Ci,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Ri,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function ki(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,a,l,h){if(Gt.apply(this,arguments),Lt){if(!Lt)throw Error(s(198));var c=kt;Lt=!1,kt=null,Ut||(Ut=!0,Bt=c)}}(i,e,void 0,t),t.currentTarget=null}function Ui(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break t;ki(r,a,h),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,h=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break t;ki(r,a,h),s=l}}}if(Ut)throw t=Bt,Ut=!1,Bt=null,t}function Bi(t,e){var n=e[mr];void 0===n&&(n=e[mr]=new Set);var i=t+"__bubble";n.has(i)||(Vi(e,t,2,!1),n.add(i))}function zi(t,e,n){var i=0;e&&(i|=4),Vi(n,t,i,e)}var Gi="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[Gi]){t[Gi]=!0,o.forEach((function(e){"selectionchange"!==e&&(Li.has(e)||zi(e,!1,t),zi(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Gi]||(e[Gi]=!0,zi("selectionchange",!1,e))}}function Vi(t,e,n,i){switch(Ke(e)){case 1:var r=We;break;case 4:r=Ye;break;default:r=qe}n=r.bind(null,e,n,t),r=void 0,!Mt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ji(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=_r(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue t}a=a.parentNode}}i=i.return}Ot((function(){var i=s,r=Et(n),o=[];t:{var a=Di.get(t);if(void 0!==a){var l=cn,h=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=An;break;case"focusin":h="focus",l=gn;break;case"focusout":h="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Si:case Ai:case Ci:l=yn;break;case Ri:l=Dn;break;case"scroll":l=pn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&e),u=!c&&"scroll"===t,p=c?null!==a?a+"Capture":null:a;c=[];for(var d,f=i;null!==f;){var m=(d=f).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==p&&(null!=(m=Nt(f,p))&&c.push(Wi(f,m,d)))),u)break;f=f.return}0<c.length&&(a=new l(a,h,null,n,r),o.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===Tt||!(h=n.relatedTarget||n.fromElement)||!_r(h)&&!h[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(h=(h=n.relatedTarget||n.toElement)?_r(h):null)&&(h!==(u=Ht(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=i),l!==h)){if(c=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Cn,m="onPointerLeave",p="onPointerEnter",f="pointer"),u=null==l?a:Tr(l),d=null==h?a:Tr(h),(a=new c(m,f+"leave",l,n,r)).target=u,a.relatedTarget=d,m=null,_r(r)===i&&((c=new c(p,f+"enter",h,n,r)).target=d,c.relatedTarget=u,m=c),u=m,l&&h)t:{for(p=h,f=0,d=c=l;d;d=qi(d))f++;for(d=0,m=p;m;m=qi(m))d++;for(;0<f-d;)c=qi(c),f--;for(;0<d-f;)p=qi(p),d--;for(;f--;){if(c===p||null!==p&&c===p.alternate)break t;c=qi(c),p=qi(p)}c=null}else c=null;null!==l&&Xi(o,a,l,c,!1),null!==h&&null!==u&&Xi(o,u,h,c,!0)}if("select"===(l=(a=i?Tr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Kn;else if(jn(a))if(Qn)g=oi;else{g=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=si);switch(g&&(g=g(t,i))?Wn(o,g,n,r):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=i?Tr(i):window,t){case"focusin":(jn(y)||"true"===y.contentEditable)&&(gi=y,yi=i,_i=null);break;case"focusout":_i=yi=gi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,Ti(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":Ti(o,n,r)}var _;if(Pn)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else Hn?zn(t,n)&&(v="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(v="onCompositionStart");v&&(kn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(_=tn()):(Je="value"in(Qe=r)?Qe.value:Qe.textContent,Hn=!0)),0<(y=Yi(i,v)).length&&(v=new Tn(v,t,null,n,r),o.push({event:v,listeners:y}),_?v.data=_:null!==(_=Gn(n))&&(v.data=_))),(_=Ln?function(t,e){switch(t){case"compositionend":return Gn(e);case"keypress":return 32!==e.which?null:(Bn=!0,Un);case"textInput":return(t=e.data)===Un&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Pn&&zn(t,e)?(t=tn(),$e=Je=Qe=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Yi(i,"onBeforeInput")).length&&(r=new Tn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=_))}Ui(o,e)}))}function Wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Nt(t,n))&&i.unshift(Wi(t,s,r)),null!=(s=Nt(t,e))&&i.push(Wi(t,s,r))),t=t.return}return i}function qi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xi(t,e,n,i,r){for(var s=e._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,h=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==h&&(a=h,r?null!=(l=Nt(n,s))&&o.unshift(Wi(n,l,a)):r||null!=(l=Nt(n,s))&&o.push(Wi(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Zi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Qi(t){return("string"===typeof t?t:""+t).replace(Zi,"\n").replace(Ki,"")}function Ji(t,e,n){if(e=Qi(e),Qi(t)!==e&&n)throw Error(s(425))}function $i(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(t){return sr.resolve(null).then(t).catch(ar)}:ir;function ar(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void He(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);He(e)}function hr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function cr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var ur=Math.random().toString(36).slice(2),pr="__reactFiber$"+ur,dr="__reactProps$"+ur,fr="__reactContainer$"+ur,mr="__reactEvents$"+ur,gr="__reactListeners$"+ur,yr="__reactHandles$"+ur;function _r(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[pr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=cr(t);null!==t;){if(n=t[pr])return n;t=cr(t)}return e}n=(t=n).parentNode}return null}function vr(t){return!(t=t[pr]||t[fr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Tr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function Er(t){return t[dr]||null}var xr=[],Ir=-1;function br(t){return{current:t}}function wr(t){0>Ir||(t.current=xr[Ir],xr[Ir]=null,Ir--)}function Sr(t,e){Ir++,xr[Ir]=t.current,t.current=e}var Ar={},Cr=br(Ar),Rr=br(!1),Dr=Ar;function Or(t,e){var n=t.type.contextTypes;if(!n)return Ar;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mr(){wr(Rr),wr(Cr)}function Pr(t,e,n){if(Cr.current!==Ar)throw Error(s(168));Sr(Cr,e),Sr(Rr,n)}function Fr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,V(t)||"Unknown",r));return k({},n,i)}function Lr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,Dr=Cr.current,Sr(Cr,t),Sr(Rr,Rr.current),!0}function kr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Fr(t,e,Dr),i.__reactInternalMemoizedMergedChildContext=t,wr(Rr),wr(Cr),Sr(Cr,t)):wr(Rr),Sr(Rr,n)}var Ur=null,Br=!1,zr=!1;function Gr(t){null===Ur?Ur=[t]:Ur.push(t)}function Hr(){if(!zr&&null!==Ur){zr=!0;var t=0,e=ve;try{var n=Ur;for(ve=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Ur=null,Br=!1}catch(r){throw null!==Ur&&(Ur=Ur.slice(t+1)),qt($t,Hr),r}finally{ve=e,zr=!1}}return null}var Vr=[],jr=0,Wr=null,Yr=0,qr=[],Xr=0,Zr=null,Kr=1,Qr="";function Jr(t,e){Vr[jr++]=Yr,Vr[jr++]=Wr,Wr=t,Yr=e}function $r(t,e,n){qr[Xr++]=Kr,qr[Xr++]=Qr,qr[Xr++]=Zr,Zr=t;var i=Kr;t=Qr;var r=32-oe(i)-1;i&=~(1<<r),n+=1;var s=32-oe(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Kr=1<<32-oe(e)+r|n<<r|i,Qr=s+t}else Kr=1<<s|n<<r|i,Qr=t}function ts(t){null!==t.return&&(Jr(t,1),$r(t,1,0))}function es(t){for(;t===Wr;)Wr=Vr[--jr],Vr[jr]=null,Yr=Vr[--jr],Vr[jr]=null;for(;t===Zr;)Zr=qr[--Xr],qr[Xr]=null,Qr=qr[--Xr],qr[Xr]=null,Kr=qr[--Xr],qr[Xr]=null}var ns=null,is=null,rs=!1,ss=null;function os(t,e){var n=Nh(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function as(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,is=hr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,is=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Zr?{id:Kr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Nh(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,is=null,!0);default:return!1}}function ls(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function hs(t){if(rs){var e=is;if(e){var n=e;if(!as(t,e)){if(ls(t))throw Error(s(418));e=hr(n.nextSibling);var i=ns;e&&as(t,e)?os(i,n):(t.flags=-4097&t.flags|2,rs=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,rs=!1,ns=t}}}function cs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function us(t){if(t!==ns)return!1;if(!rs)return cs(t),rs=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=is)){if(ls(t))throw ps(),Error(s(418));for(;e;)os(t,e),e=hr(e.nextSibling)}if(cs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){is=hr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}is=null}}else is=ns?hr(t.stateNode.nextSibling):null;return!0}function ps(){for(var t=is;t;)t=hr(t.nextSibling)}function ds(){is=ns=null,rs=!1}function fs(t){null===ss?ss=[t]:ss.push(t)}var ms=T.ReactCurrentBatchConfig;function gs(t,e){if(t&&t.defaultProps){for(var n in e=k({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ys=br(null),_s=null,vs=null,Ts=null;function Es(){Ts=vs=_s=null}function xs(t){var e=ys.current;wr(ys),t._currentValue=e}function Is(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function bs(t,e){_s=t,Ts=vs=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ta=!0),t.firstContext=null)}function ws(t){var e=t._currentValue;if(Ts!==t)if(t={context:t,memoizedValue:e,next:null},null===vs){if(null===_s)throw Error(s(308));vs=t,_s.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var Ss=null;function As(t){null===Ss?Ss=[t]:Ss.push(t)}function Cs(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,As(e)):(n.next=r.next,r.next=n),e.interleaved=n,Rs(t,i)}function Rs(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Os(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ns(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Rl)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Rs(t,n)}return null===(r=i.interleaved)?(e.next=e,As(i)):(e.next=r.next,r.next=e),i.interleaved=e,Rs(t,n)}function Fs(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,_e(t,n)}}function Ls(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ks(t,e,n,i){var r=t.updateQueue;Ds=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,h=l.next;l.next=null,null===o?s=h:o.next=h,o=l;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(o=0,c=h=l=null,a=s;;){var p=a.lane,d=a.eventTime;if((i&p)===p){null!==c&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,m=a;switch(p=e,d=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(d,u,p);break t}u=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(d,u,p):f)||void 0===p)break t;u=k({},u,p);break t;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(p=r.effects)?r.effects=[a]:p.push(a))}else d={eventTime:d,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(h=c=d,l=u):c=c.next=d,o|=p;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(p=a).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===c&&(l=u),r.baseState=l,r.firstBaseUpdate=h,r.lastBaseUpdate=c,null!==(e=r.shared.interleaved)){r=e;do{o|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);kl|=o,t.lanes=o,t.memoizedState=u}}function Us(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Bs=(new i.Component).refs;function zs(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:k({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Gs={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=eh(),r=nh(t),s=Ms(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Ps(t,s,r))&&(ih(e,t,r,i),Fs(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=eh(),r=nh(t),s=Ms(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Ps(t,s,r))&&(ih(e,t,r,i),Fs(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eh(),i=nh(t),r=Ms(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Ps(t,r,i))&&(ih(e,t,i,n),Fs(e,t,i))}};function Hs(t,e,n,i,r,s,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,o):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function Vs(t,e,n){var i=!1,r=Ar,s=e.contextType;return"object"===typeof s&&null!==s?s=ws(s):(r=Nr(e)?Dr:Cr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Or(t,r):Ar),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Gs,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function js(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Gs.enqueueReplaceState(e,e.state,null)}function Ws(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Bs,Os(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=ws(s):(s=Nr(e)?Dr:Cr.current,r.context=Or(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(zs(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Gs.enqueueReplaceState(r,r.state,null),ks(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function Ys(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;e===Bs&&(e=r.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function qs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xs(t){return(0,t._init)(t._payload)}function Zs(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Ph(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Uh(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function h(t,e,n,i){var s=n.type;return s===I?u(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&Xs(s)===e.type)?((i=r(e,n.props)).ref=Ys(t,e,n),i.return=t,i):((i=Fh(n.type,n.key,n.props,null,t.mode,i)).ref=Ys(t,e,n),i.return=t,i)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bh(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function u(t,e,n,i,s){return null===e||7!==e.tag?((e=Lh(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Uh(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case E:return(n=Fh(e.type,e.key,e.props,null,t.mode,n)).ref=Ys(t,null,e),n.return=t,n;case x:return(e=Bh(e,t.mode,n)).return=t,e;case N:return p(t,(0,e._init)(e._payload),n)}if(et(e)||F(e))return(e=Lh(e,t.mode,n,null)).return=t,e;qs(t,e)}return null}function d(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===r?h(t,e,n,i):null;case x:return n.key===r?c(t,e,n,i):null;case N:return d(t,e,(r=n._init)(n._payload),i)}if(et(n)||F(n))return null!==r?null:u(t,e,n,i,null);qs(t,n)}return null}function f(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case E:return h(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case N:return f(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||F(i))return u(e,t=t.get(n)||null,i,r,null);qs(e,i)}return null}function m(r,s,a,l){for(var h=null,c=null,u=s,m=s=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var y=d(r,u,a[m],l);if(null===y){null===u&&(u=g);break}t&&u&&null===y.alternate&&e(r,u),s=o(y,s,m),null===c?h=y:c.sibling=y,c=y,u=g}if(m===a.length)return n(r,u),rs&&Jr(r,m),h;if(null===u){for(;m<a.length;m++)null!==(u=p(r,a[m],l))&&(s=o(u,s,m),null===c?h=u:c.sibling=u,c=u);return rs&&Jr(r,m),h}for(u=i(r,u);m<a.length;m++)null!==(g=f(u,r,m,a[m],l))&&(t&&null!==g.alternate&&u.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?h=g:c.sibling=g,c=g);return t&&u.forEach((function(t){return e(r,t)})),rs&&Jr(r,m),h}function g(r,a,l,h){var c=F(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var u=c=null,m=a,g=a=0,y=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=d(r,m,_.value,h);if(null===v){null===m&&(m=y);break}t&&m&&null===v.alternate&&e(r,m),a=o(v,a,g),null===u?c=v:u.sibling=v,u=v,m=y}if(_.done)return n(r,m),rs&&Jr(r,g),c;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=p(r,_.value,h))&&(a=o(_,a,g),null===u?c=_:u.sibling=_,u=_);return rs&&Jr(r,g),c}for(m=i(r,m);!_.done;g++,_=l.next())null!==(_=f(m,r,g,_.value,h))&&(t&&null!==_.alternate&&m.delete(null===_.key?g:_.key),a=o(_,a,g),null===u?c=_:u.sibling=_,u=_);return t&&m.forEach((function(t){return e(r,t)})),rs&&Jr(r,g),c}return function t(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case E:t:{for(var h=o.key,c=s;null!==c;){if(c.key===h){if((h=o.type)===I){if(7===c.tag){n(i,c.sibling),(s=r(c,o.props.children)).return=i,i=s;break t}}else if(c.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===N&&Xs(h)===c.type){n(i,c.sibling),(s=r(c,o.props)).ref=Ys(i,c,o),s.return=i,i=s;break t}n(i,c);break}e(i,c),c=c.sibling}o.type===I?((s=Lh(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Fh(o.type,o.key,o.props,null,i.mode,l)).ref=Ys(i,s,o),l.return=i,i=l)}return a(i);case x:t:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=Bh(o,i.mode,l)).return=i,i=s}return a(i);case N:return t(i,s,(c=o._init)(o._payload),l)}if(et(o))return m(i,s,o,l);if(F(o))return g(i,s,o,l);qs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Uh(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var Ks=Zs(!0),Qs=Zs(!1),Js={},$s=br(Js),to=br(Js),eo=br(Js);function no(t){if(t===Js)throw Error(s(174));return t}function io(t,e){switch(Sr(eo,e),Sr(to,t),Sr($s,Js),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}wr($s),Sr($s,e)}function ro(){wr($s),wr(to),wr(eo)}function so(t){no(eo.current);var e=no($s.current),n=lt(e,t.type);e!==n&&(Sr(to,t),Sr($s,n))}function oo(t){to.current===t&&(wr($s),wr(to))}var ao=br(0);function lo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ho=[];function co(){for(var t=0;t<ho.length;t++)ho[t]._workInProgressVersionPrimary=null;ho.length=0}var uo=T.ReactCurrentDispatcher,po=T.ReactCurrentBatchConfig,fo=0,mo=null,go=null,yo=null,_o=!1,vo=!1,To=0,Eo=0;function xo(){throw Error(s(321))}function Io(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function bo(t,e,n,i,r,o){if(fo=o,mo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uo.current=null===t||null===t.memoizedState?aa:la,t=n(i,r),vo){o=0;do{if(vo=!1,To=0,25<=o)throw Error(s(301));o+=1,yo=go=null,e.updateQueue=null,uo.current=ha,t=n(i,r)}while(vo)}if(uo.current=oa,e=null!==go&&null!==go.next,fo=0,yo=go=mo=null,_o=!1,e)throw Error(s(300));return t}function wo(){var t=0!==To;return To=0,t}function So(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=t:yo=yo.next=t,yo}function Ao(){if(null===go){var t=mo.alternate;t=null!==t?t.memoizedState:null}else t=go.next;var e=null===yo?mo.memoizedState:yo.next;if(null!==e)yo=e,go=t;else{if(null===t)throw Error(s(310));t={memoizedState:(go=t).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=t:yo=yo.next=t}return yo}function Co(t,e){return"function"===typeof e?e(t):e}function Ro(t){var e=Ao(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=go,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,h=null,c=o;do{var u=c.lane;if((fo&u)===u)null!==h&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===h?(l=h=p,a=i):h=h.next=p,mo.lanes|=u,kl|=u}c=c.next}while(null!==c&&c!==o);null===h?a=i:h.next=l,ai(i,e.memoizedState)||(Ta=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{o=r.lane,mo.lanes|=o,kl|=o,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Do(t){var e=Ao(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);ai(o,e.memoizedState)||(Ta=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Oo(){}function No(t,e){var n=mo,i=Ao(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,Ta=!0),i=i.queue,jo(Fo.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Bo(9,Po.bind(null,n,i,r,e),void 0,null),null===Dl)throw Error(s(349));0!==(30&fo)||Mo(n,e,r)}return r}function Mo(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Po(t,e,n,i){e.value=n,e.getSnapshot=i,Lo(e)&&ko(t)}function Fo(t,e,n){return n((function(){Lo(e)&&ko(t)}))}function Lo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch(i){return!0}}function ko(t){var e=Rs(t,1);null!==e&&ih(e,t,1,-1)}function Uo(t){var e=So();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,mo,t),[e.memoizedState,t]}function Bo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function zo(){return Ao().memoizedState}function Go(t,e,n,i){var r=So();mo.flags|=t,r.memoizedState=Bo(1|e,n,void 0,void 0===i?null:i)}function Ho(t,e,n,i){var r=Ao();i=void 0===i?null:i;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==i&&Io(i,o.deps))return void(r.memoizedState=Bo(e,n,s,i))}mo.flags|=t,r.memoizedState=Bo(1|e,n,s,i)}function Vo(t,e){return Go(8390656,8,t,e)}function jo(t,e){return Ho(2048,8,t,e)}function Wo(t,e){return Ho(4,2,t,e)}function Yo(t,e){return Ho(4,4,t,e)}function qo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Xo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ho(4,4,qo.bind(null,e,t),n)}function Zo(){}function Ko(t,e){var n=Ao();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Io(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Qo(t,e){var n=Ao();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Io(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Jo(t,e,n){return 0===(21&fo)?(t.baseState&&(t.baseState=!1,Ta=!0),t.memoizedState=n):(ai(n,e)||(n=me(),mo.lanes|=n,kl|=n,t.baseState=!0),e)}function $o(t,e){var n=ve;ve=0!==n&&4>n?n:4,t(!0);var i=po.transition;po.transition={};try{t(!1),e()}finally{ve=n,po.transition=i}}function ta(){return Ao().memoizedState}function ea(t,e,n){var i=nh(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(t))ra(e,n);else if(null!==(n=Cs(t,e,n,i))){ih(n,t,i,eh()),sa(n,e,i)}}function na(t,e,n){var i=nh(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(t))ra(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=e.interleaved;return null===l?(r.next=r,As(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(h){}null!==(n=Cs(t,e,r,i))&&(ih(n,t,i,r=eh()),sa(n,e,i))}}function ia(t){var e=t.alternate;return t===mo||null!==e&&e===mo}function ra(t,e){vo=_o=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,_e(t,n)}}var oa={readContext:ws,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},aa={readContext:ws,useCallback:function(t,e){return So().memoizedState=[t,void 0===e?null:e],t},useContext:ws,useEffect:Vo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Go(4194308,4,qo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Go(4194308,4,t,e)},useInsertionEffect:function(t,e){return Go(4,2,t,e)},useMemo:function(t,e){var n=So();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=So();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ea.bind(null,mo,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},So().memoizedState=t},useState:Uo,useDebugValue:Zo,useDeferredValue:function(t){return So().memoizedState=t},useTransition:function(){var t=Uo(!1),e=t[0];return t=$o.bind(null,t[1]),So().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=mo,r=So();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Dl)throw Error(s(349));0!==(30&fo)||Mo(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Vo(Fo.bind(null,i,o,t),[t]),i.flags|=2048,Bo(9,Po.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=So(),e=Dl.identifierPrefix;if(rs){var n=Qr;e=":"+e+"R"+(n=(Kr&~(1<<32-oe(Kr)-1)).toString(32)+n),0<(n=To++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Eo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:ws,useCallback:Ko,useContext:ws,useEffect:jo,useImperativeHandle:Xo,useInsertionEffect:Wo,useLayoutEffect:Yo,useMemo:Qo,useReducer:Ro,useRef:zo,useState:function(){return Ro(Co)},useDebugValue:Zo,useDeferredValue:function(t){return Jo(Ao(),go.memoizedState,t)},useTransition:function(){return[Ro(Co)[0],Ao().memoizedState]},useMutableSource:Oo,useSyncExternalStore:No,useId:ta,unstable_isNewReconciler:!1},ha={readContext:ws,useCallback:Ko,useContext:ws,useEffect:jo,useImperativeHandle:Xo,useInsertionEffect:Wo,useLayoutEffect:Yo,useMemo:Qo,useReducer:Do,useRef:zo,useState:function(){return Do(Co)},useDebugValue:Zo,useDeferredValue:function(t){var e=Ao();return null===go?e.memoizedState=t:Jo(e,go.memoizedState,t)},useTransition:function(){return[Do(Co)[0],Ao().memoizedState]},useMutableSource:Oo,useSyncExternalStore:No,useId:ta,unstable_isNewReconciler:!1};function ca(t,e){try{var n="",i=e;do{n+=G(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function ua(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function pa(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,n){(n=Ms(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wl||(Wl=!0,Yl=i),pa(0,e)},n}function ma(t,e,n){(n=Ms(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){pa(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){pa(0,e),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ga(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new da;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Sh.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function _a(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ms(-1,1)).tag=2,Ps(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var va=T.ReactCurrentOwner,Ta=!1;function Ea(t,e,n,i){e.child=null===t?Qs(e,null,n,i):Ks(e,t.child,n,i)}function xa(t,e,n,i,r){n=n.render;var s=e.ref;return bs(e,r),i=bo(t,e,n,i,s,r),n=wo(),null===t||Ta?(rs&&n&&ts(e),e.flags|=1,Ea(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wa(t,e,r))}function Ia(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Mh(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Fh(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,ba(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&t.ref===e.ref)return Wa(t,e,r)}return e.flags|=1,(t=Ph(s,i)).ref=e.ref,t.return=e,e.child=t}function ba(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(li(s,i)&&t.ref===e.ref){if(Ta=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Wa(t,e,r);0!==(131072&t.flags)&&(Ta=!0)}}return Aa(t,e,n,i,r)}function wa(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(Pl,Ml),Ml|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Sr(Pl,Ml),Ml|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Sr(Pl,Ml),Ml|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Sr(Pl,Ml),Ml|=i;return Ea(t,e,r,n),e.child}function Sa(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Aa(t,e,n,i,r){var s=Nr(n)?Dr:Cr.current;return s=Or(e,s),bs(e,r),n=bo(t,e,n,i,s,r),i=wo(),null===t||Ta?(rs&&i&&ts(e),e.flags|=1,Ea(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wa(t,e,r))}function Ca(t,e,n,i,r){if(Nr(n)){var s=!0;Lr(e)}else s=!1;if(bs(e,r),null===e.stateNode)ja(t,e),Vs(e,n,i),Ws(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,h=n.contextType;"object"===typeof h&&null!==h?h=ws(h):h=Or(e,h=Nr(n)?Dr:Cr.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==h)&&js(e,o,i,h),Ds=!1;var p=e.memoizedState;o.state=p,ks(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Rr.current||Ds?("function"===typeof c&&(zs(e,n,c,i),l=e.memoizedState),(a=Ds||Hs(e,n,a,i,p,l,h))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=h,i=a):("function"===typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ns(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:gs(e.type,a),o.props=h,u=e.pendingProps,p=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ws(l):l=Or(e,l=Nr(n)?Dr:Cr.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||p!==l)&&js(e,o,i,l),Ds=!1,p=e.memoizedState,o.state=p,ks(e,i,o,r);var f=e.memoizedState;a!==u||p!==f||Rr.current||Ds?("function"===typeof d&&(zs(e,n,d,i),f=e.memoizedState),(h=Ds||Hs(e,n,h,i,p,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=f),o.props=i,o.state=f,o.context=l,i=h):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Ra(t,e,n,i,s,r)}function Ra(t,e,n,i,r,s){Sa(t,e);var o=0!==(128&e.flags);if(!i&&!o)return r&&kr(e,n,!1),Wa(t,e,s);i=e.stateNode,va.current=e;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&o?(e.child=Ks(e,t.child,null,s),e.child=Ks(e,null,a,s)):Ea(t,e,a,s),e.memoizedState=i.state,r&&kr(e,n,!0),e.child}function Da(t){var e=t.stateNode;e.pendingContext?Pr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Pr(0,e.context,!1),io(t,e.containerInfo)}function Oa(t,e,n,i,r){return ds(),fs(r),e.flags|=256,Ea(t,e,n,i),e.child}var Na,Ma,Pa,Fa,La={dehydrated:null,treeContext:null,retryLane:0};function ka(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ua(t,e,n){var i,r=e.pendingProps,o=ao.current,a=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Sr(ao,1&o),null===t)return hs(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=kh(l,r,0,null),t=Lh(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ka(n),e.memoizedState=La,t):Ba(e,l));if(null!==(o=t.memoizedState)&&null!==(i=o.dehydrated))return function(t,e,n,i,r,o,a){if(n)return 256&e.flags?(e.flags&=-257,za(t,e,a,i=ua(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=kh({mode:"visible",children:i.children},r,0,null),(o=Lh(o,r,a,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!==(1&e.mode)&&Ks(e,t.child,null,a),e.child.memoizedState=ka(a),e.memoizedState=La,o);if(0===(1&e.mode))return za(t,e,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,za(t,e,a,i=ua(o=Error(s(419)),i,void 0))}if(l=0!==(a&t.childLanes),Ta||l){if(null!==(i=Dl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Rs(t,r),ih(i,t,r,-1))}return gh(),za(t,e,a,i=ua(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Ch.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,is=hr(r.nextSibling),ns=e,rs=!0,ss=null,null!==t&&(qr[Xr++]=Kr,qr[Xr++]=Qr,qr[Xr++]=Zr,Kr=t.id,Qr=t.overflow,Zr=e),e=Ba(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,o,n);if(a){a=r.fallback,l=e.mode,i=(o=t.child).sibling;var h={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==o?((r=e.child).childLanes=0,r.pendingProps=h,e.deletions=null):(r=Ph(o,h)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Ph(i,a):(a=Lh(a,l,n,null)).flags|=2,a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=null===(l=t.child.memoizedState)?ka(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=La,r}return t=(a=t.child).sibling,r=Ph(a,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ba(t,e){return(e=kh({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function za(t,e,n,i){return null!==i&&fs(i),Ks(e,t.child,null,n),(t=Ba(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ga(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Is(t.return,e,n)}function Ha(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Va(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ea(t,e,i.children,n),0!==(2&(i=ao.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ga(t,n,e);else if(19===t.tag)Ga(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Sr(ao,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===lo(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ha(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===lo(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ha(e,!0,n,null,s);break;case"together":Ha(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ja(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),kl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Ph(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ph(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ya(t,e){if(!rs)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qa(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Xa(t,e,n){var i=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(e),null;case 1:case 17:return Nr(e.type)&&Mr(),qa(e),null;case 3:return i=e.stateNode,ro(),wr(Rr),wr(Cr),co(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(us(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ss&&(ah(ss),ss=null))),Ma(t,e),qa(e),null;case 5:oo(e);var r=no(eo.current);if(n=e.type,null!==t&&null!=e.stateNode)Pa(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return qa(e),null}if(t=no($s.current),us(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[pr]=e,i[dr]=o,t=0!==(1&e.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<Fi.length;r++)Bi(Fi[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":K(i,o),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Bi("invalid",i);break;case"textarea":rt(i,o),Bi("invalid",i)}for(var l in _t(n,o),r=null,o)if(o.hasOwnProperty(l)){var h=o[l];"children"===l?"string"===typeof h?i.textContent!==h&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,h,t),r=["children",h]):"number"===typeof h&&i.textContent!==""+h&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,h,t),r=["children",""+h]):a.hasOwnProperty(l)&&null!=h&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":Y(i),$(i,o,!0);break;case"textarea":Y(i),ot(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=$i)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[pr]=e,t[dr]=i,Na(t,e,!1,!1),e.stateNode=t;t:{switch(l=vt(n,i),n){case"dialog":Bi("cancel",t),Bi("close",t),r=i;break;case"iframe":case"object":case"embed":Bi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Fi.length;r++)Bi(Fi[r],t);r=i;break;case"source":Bi("error",t),r=i;break;case"img":case"image":case"link":Bi("error",t),Bi("load",t),r=i;break;case"details":Bi("toggle",t),r=i;break;case"input":K(t,i),r=Z(t,i),Bi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=k({},i,{value:void 0}),Bi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Bi("invalid",t)}for(o in _t(n,r),h=r)if(h.hasOwnProperty(o)){var c=h[o];"style"===o?gt(t,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ut(t,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&pt(t,c):"number"===typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Bi("scroll",t):null!=c&&v(t,o,c,l))}switch(n){case"input":Y(t),$(t,i,!1);break;case"textarea":Y(t),ot(t);break;case"option":null!=i.value&&t.setAttribute("value",""+j(i.value));break;case"select":t.multiple=!!i.multiple,null!=(o=i.value)?nt(t,!!i.multiple,o,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return qa(e),null;case 6:if(t&&null!=e.stateNode)Fa(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=no(eo.current),no($s.current),us(e)){if(i=e.stateNode,n=e.memoizedProps,i[pr]=e,(o=i.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Ji(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[pr]=e,e.stateNode=i}return qa(e),null;case 13:if(wr(ao),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&e.mode)&&0===(128&e.flags))ps(),ds(),e.flags|=98560,o=!1;else if(o=us(e),null!==i&&null!==i.dehydrated){if(null===t){if(!o)throw Error(s(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(s(317));o[pr]=e}else ds(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;qa(e),o=!1}else null!==ss&&(ah(ss),ss=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ao.current)?0===Fl&&(Fl=3):gh())),null!==e.updateQueue&&(e.flags|=4),qa(e),null);case 4:return ro(),Ma(t,e),null===t&&Hi(e.stateNode.containerInfo),qa(e),null;case 10:return xs(e.type._context),qa(e),null;case 19:if(wr(ao),null===(o=e.memoizedState))return qa(e),null;if(i=0!==(128&e.flags),null===(l=o.rendering))if(i)Ya(o,!1);else{if(0!==Fl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=lo(t))){for(e.flags|=128,Ya(o,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Sr(ao,1&ao.current|2),e.child}t=t.sibling}null!==o.tail&&Qt()>Vl&&(e.flags|=128,i=!0,Ya(o,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=lo(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ya(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return qa(e),null}else 2*Qt()-o.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,i=!0,Ya(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qt(),e.sibling=null,n=ao.current,Sr(ao,i?1&n|2:1&n),e):(qa(e),null);case 22:case 23:return ph(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ml)&&(qa(e),6&e.subtreeFlags&&(e.flags|=8192)):qa(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Za(t,e){switch(es(e),e.tag){case 1:return Nr(e.type)&&Mr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return ro(),wr(Rr),wr(Cr),co(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return oo(e),null;case 13:if(wr(ao),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));ds()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return wr(ao),null;case 4:return ro(),null;case 10:return xs(e.type._context),null;case 22:case 23:return ph(),null;default:return null}}Na=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Pa=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,no($s.current);var s,o=null;switch(n){case"input":r=Z(t,r),i=Z(t,i),o=[];break;case"select":r=k({},r,{value:void 0}),i=k({},i,{value:void 0}),o=[];break;case"textarea":r=it(t,r),i=it(t,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=$i)}for(c in _t(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var h=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&h!==l&&(null!=h||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||h&&h.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in h)h.hasOwnProperty(s)&&l[s]!==h[s]&&(n||(n={}),n[s]=h[s])}else n||(o||(o=[]),o.push(c,n)),n=h;else"dangerouslySetInnerHTML"===c?(h=h?h.__html:void 0,l=l?l.__html:void 0,null!=h&&l!==h&&(o=o||[]).push(c,h)):"children"===c?"string"!==typeof h&&"number"!==typeof h||(o=o||[]).push(c,""+h):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=h&&"onScroll"===c&&Bi("scroll",t),o||l===h||(o=[])):(o=o||[]).push(c,h))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}},Fa=function(t,e,n,i){n!==i&&(e.flags|=4)};var Ka=!1,Qa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){wh(t,e,i)}else n.current=null}function el(t,e,n){try{n()}catch(i){wh(t,e,i)}}var nl=!1;function il(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(e,n,s)}r=r.next}while(r!==i)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[pr],delete e[dr],delete e[mr],delete e[gr],delete e[yr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function hl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=$i));else if(4!==i&&null!==(t=t.child))for(hl(t,e,n),t=t.sibling;null!==t;)hl(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,pl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(a){}switch(n.tag){case 5:Qa||tl(n,e);case 6:var i=ul,r=pl;ul=null,dl(t,e,n),pl=r,null!==(ul=i)&&(pl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(pl?(t=ul,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),He(t)):lr(ul,n.stateNode));break;case 4:i=ul,r=pl,ul=n.stateNode.containerInfo,pl=!0,dl(t,e,n),ul=i,pl=r;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,e,o),r=r.next}while(r!==i)}dl(t,e,n);break;case 1:if(!Qa&&(tl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){wh(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Qa=(i=Qa)||null!==n.memoizedState,dl(t,e,n),Qa=i):dl(t,e,n);break;default:dl(t,e,n)}}function ml(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var i=Rh.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,pl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,pl=!0;break t}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,r),ul=null,pl=!1;var h=r.alternate;null!==h&&(h.return=null),r.return=null}catch(c){wh(r,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),_l(t),4&i){try{il(3,t,t.return),rl(3,t)}catch(g){wh(t,t.return,g)}try{il(5,t,t.return)}catch(g){wh(t,t.return,g)}}break;case 1:gl(e,t),_l(t),512&i&&null!==n&&tl(n,n.return);break;case 5:if(gl(e,t),_l(t),512&i&&null!==n&&tl(n,n.return),32&t.flags){var r=t.stateNode;try{pt(r,"")}catch(g){wh(t,t.return,g)}}if(4&i&&null!=(r=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,l=t.type,h=t.updateQueue;if(t.updateQueue=null,null!==h)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(r,o),vt(l,a);var c=vt(l,o);for(a=0;a<h.length;a+=2){var u=h[a],p=h[a+1];"style"===u?gt(r,p):"dangerouslySetInnerHTML"===u?ut(r,p):"children"===u?pt(r,p):v(r,u,p,c)}switch(l){case"input":J(r,o);break;case"textarea":st(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?nt(r,!!o.multiple,f,!1):d!==!!o.multiple&&(null!=o.defaultValue?nt(r,!!o.multiple,o.defaultValue,!0):nt(r,!!o.multiple,o.multiple?[]:"",!1))}r[dr]=o}catch(g){wh(t,t.return,g)}}break;case 6:if(gl(e,t),_l(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(g){wh(t,t.return,g)}}break;case 3:if(gl(e,t),_l(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(g){wh(t,t.return,g)}break;case 4:default:gl(e,t),_l(t);break;case 13:gl(e,t),_l(t),8192&(r=t.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Qt())),4&i&&ml(t);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&t.mode?(Qa=(c=Qa)||u,gl(e,t),Qa=c):gl(e,t),_l(t),8192&i){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!u&&0!==(1&t.mode))for($a=t,u=t.child;null!==u;){for(p=$a=u;null!==$a;){switch(f=(d=$a).child,d.tag){case 0:case 11:case 14:case 15:il(4,d,d.return);break;case 1:tl(d,d.return);var m=d.stateNode;if("function"===typeof m.componentWillUnmount){i=d,n=d.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){wh(i,n,g)}}break;case 5:tl(d,d.return);break;case 22:if(null!==d.memoizedState){xl(p);continue}}null!==f?(f.return=d,$a=f):xl(p)}u=u.sibling}t:for(u=null,p=t;;){if(5===p.tag){if(null===u){u=p;try{r=p.stateNode,c?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,a=void 0!==(h=p.memoizedProps.style)&&null!==h&&h.hasOwnProperty("display")?h.display:null,l.style.display=mt("display",a))}catch(g){wh(t,t.return,g)}}}else if(6===p.tag){if(null===u)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){wh(t,t.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(e,t),_l(t),4&i&&ml(t);case 21:}}function _l(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(pt(r,""),i.flags&=-33),cl(t,ll(t),r);break;case 3:case 4:var o=i.stateNode.containerInfo;hl(t,ll(t),o);break;default:throw Error(s(161))}}catch(a){wh(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,n){$a=t,Tl(t,e,n)}function Tl(t,e,n){for(var i=0!==(1&t.mode);null!==$a;){var r=$a,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ka;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ka;var h=Qa;if(Ka=o,(Qa=l)&&!h)for($a=r;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?Il(r):null!==l?(l.return=o,$a=l):Il(r);for(;null!==s;)$a=s,Tl(s,e,n),s=s.sibling;$a=r,Ka=a,Qa=h}El(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,$a=s):El(t)}}function El(t){for(;null!==$a;){var e=$a;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qa||rl(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Qa)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:gs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Us(e,o,i);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Us(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var p=u.dehydrated;null!==p&&He(p)}}}break;default:throw Error(s(163))}Qa||512&e.flags&&sl(e)}catch(d){wh(e,e.return,d)}}if(e===t){$a=null;break}if(null!==(n=e.sibling)){n.return=e.return,$a=n;break}$a=e.return}}function xl(t){for(;null!==$a;){var e=$a;if(e===t){$a=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$a=n;break}$a=e.return}}function Il(t){for(;null!==$a;){var e=$a;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){wh(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){wh(e,r,l)}}var s=e.return;try{sl(e)}catch(l){wh(e,s,l)}break;case 5:var o=e.return;try{sl(e)}catch(l){wh(e,o,l)}}}catch(l){wh(e,e.return,l)}if(e===t){$a=null;break}var a=e.sibling;if(null!==a){a.return=e.return,$a=a;break}$a=e.return}}var bl,wl=Math.ceil,Sl=T.ReactCurrentDispatcher,Al=T.ReactCurrentOwner,Cl=T.ReactCurrentBatchConfig,Rl=0,Dl=null,Ol=null,Nl=0,Ml=0,Pl=br(0),Fl=0,Ll=null,kl=0,Ul=0,Bl=0,zl=null,Gl=null,Hl=0,Vl=1/0,jl=null,Wl=!1,Yl=null,ql=null,Xl=!1,Zl=null,Kl=0,Ql=0,Jl=null,$l=-1,th=0;function eh(){return 0!==(6&Rl)?Qt():-1!==$l?$l:$l=Qt()}function nh(t){return 0===(1&t.mode)?1:0!==(2&Rl)&&0!==Nl?Nl&-Nl:null!==ms.transition?(0===th&&(th=me()),th):0!==(t=ve)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function ih(t,e,n,i){if(50<Ql)throw Ql=0,Jl=null,Error(s(185));ye(t,n,i),0!==(2&Rl)&&t===Dl||(t===Dl&&(0===(2&Rl)&&(Ul|=n),4===Fl&&lh(t,Nl)),rh(t,i),1===n&&0===Rl&&0===(1&e.mode)&&(Vl=Qt()+500,Br&&Hr()))}function rh(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oe(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=de(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}(t,e);var i=pe(t,t===Dl?Nl:0);if(0===i)null!==n&&Xt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Xt(n),1===e)0===t.tag?function(t){Br=!0,Gr(t)}(hh.bind(null,t)):Gr(hh.bind(null,t)),or((function(){0===(6&Rl)&&Hr()})),n=null;else{switch(Te(i)){case 1:n=$t;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Dh(n,sh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sh(t,e){if($l=-1,th=0,0!==(6&Rl))throw Error(s(327));var n=t.callbackNode;if(Ih()&&t.callbackNode!==n)return null;var i=pe(t,t===Dl?Nl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=yh(t,i);else{e=i;var r=Rl;Rl|=2;var o=mh();for(Dl===t&&Nl===e||(jl=null,Vl=Qt()+500,dh(t,e));;)try{vh();break}catch(l){fh(t,l)}Es(),Sl.current=o,Rl=r,null!==Ol?e=0:(Dl=null,Nl=0,e=Fl)}if(0!==e){if(2===e&&(0!==(r=fe(t))&&(i=r,e=oh(t,r))),1===e)throw n=Ll,dh(t,0),lh(t,i),rh(t,Qt()),n;if(6===e)lh(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=yh(t,i))&&(0!==(o=fe(t))&&(i=o,e=oh(t,o))),1===e))throw n=Ll,dh(t,0),lh(t,i),rh(t,Qt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:xh(t,Gl,jl);break;case 3:if(lh(t,i),(130023424&i)===i&&10<(e=Hl+500-Qt())){if(0!==pe(t,0))break;if(((r=t.suspendedLanes)&i)!==i){eh(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(xh.bind(null,t,Gl,jl),e);break}xh(t,Gl,jl);break;case 4:if(lh(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oe(i);o=1<<a,(a=e[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Qt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wl(i/1960))-i)){t.timeoutHandle=ir(xh.bind(null,t,Gl,jl),i);break}xh(t,Gl,jl);break;default:throw Error(s(329))}}}return rh(t,Qt()),t.callbackNode===n?sh.bind(null,t):null}function oh(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(dh(t,e).flags|=256),2!==(t=yh(t,e))&&(e=Gl,Gl=n,null!==e&&ah(e)),t}function ah(t){null===Gl?Gl=t:Gl.push.apply(Gl,t)}function lh(t,e){for(e&=~Bl,e&=~Ul,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),i=1<<n;t[n]=-1,e&=~i}}function hh(t){if(0!==(6&Rl))throw Error(s(327));Ih();var e=pe(t,0);if(0===(1&e))return rh(t,Qt()),null;var n=yh(t,e);if(0!==t.tag&&2===n){var i=fe(t);0!==i&&(e=i,n=oh(t,i))}if(1===n)throw n=Ll,dh(t,0),lh(t,e),rh(t,Qt()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xh(t,Gl,jl),rh(t,Qt()),null}function ch(t,e){var n=Rl;Rl|=1;try{return t(e)}finally{0===(Rl=n)&&(Vl=Qt()+500,Br&&Hr())}}function uh(t){null!==Zl&&0===Zl.tag&&0===(6&Rl)&&Ih();var e=Rl;Rl|=1;var n=Cl.transition,i=ve;try{if(Cl.transition=null,ve=1,t)return t()}finally{ve=i,Cl.transition=n,0===(6&(Rl=e))&&Hr()}}function ph(){Ml=Pl.current,wr(Pl)}function dh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(es(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Mr();break;case 3:ro(),wr(Rr),wr(Cr),co();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:wr(ao);break;case 10:xs(i.type._context);break;case 22:case 23:ph()}n=n.return}if(Dl=t,Ol=t=Ph(t.current,null),Nl=Ml=e,Fl=0,Ll=null,Bl=Ul=kl=0,Gl=zl=null,null!==Ss){for(e=0;e<Ss.length;e++)if(null!==(i=(n=Ss[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ss=null}return t}function fh(t,e){for(;;){var n=Ol;try{if(Es(),uo.current=oa,_o){for(var i=mo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}_o=!1}if(fo=0,yo=go=mo=null,vo=!1,To=0,Al.current=null,null===n||null===n.return){Fl=1,Ll=e,Ol=null;break}t:{var o=t,a=n.return,l=n,h=e;if(e=Nl,l.flags|=32768,null!==h&&"object"===typeof h&&"function"===typeof h.then){var c=h,u=l,p=u.tag;if(0===(1&u.mode)&&(0===p||11===p||15===p)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,_a(f,a,l,0,e),1&f.mode&&ga(o,c,e),h=c;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(h),e.updateQueue=g}else m.add(h);break t}if(0===(1&e)){ga(o,c,e),gh();break t}h=Error(s(426))}else if(rs&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_a(y,a,l,0,e),fs(ca(h,l));break t}}o=h=ca(h,l),4!==Fl&&(Fl=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Ls(o,fa(0,h,e));break t;case 1:l=h;var _=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof _.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===ql||!ql.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e,Ls(o,ma(o,l,e));break t}}o=o.return}while(null!==o)}Eh(n)}catch(T){e=T,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function mh(){var t=Sl.current;return Sl.current=oa,null===t?oa:t}function gh(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Dl||0===(268435455&kl)&&0===(268435455&Ul)||lh(Dl,Nl)}function yh(t,e){var n=Rl;Rl|=2;var i=mh();for(Dl===t&&Nl===e||(jl=null,dh(t,e));;)try{_h();break}catch(r){fh(t,r)}if(Es(),Rl=n,Sl.current=i,null!==Ol)throw Error(s(261));return Dl=null,Nl=0,Fl}function _h(){for(;null!==Ol;)Th(Ol)}function vh(){for(;null!==Ol&&!Zt();)Th(Ol)}function Th(t){var e=bl(t.alternate,t,Ml);t.memoizedProps=t.pendingProps,null===e?Eh(t):Ol=e,Al.current=null}function Eh(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Xa(n,e,Ml)))return void(Ol=n)}else{if(null!==(n=Za(n,e)))return n.flags&=32767,void(Ol=n);if(null===t)return Fl=6,void(Ol=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ol=e);Ol=e=t}while(null!==e);0===Fl&&(Fl=5)}function xh(t,e,n){var i=ve,r=Cl.transition;try{Cl.transition=null,ve=1,function(t,e,n,i){do{Ih()}while(null!==Zl);if(0!==(6&Rl))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oe(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,o),t===Dl&&(Ol=Dl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Dh(ee,(function(){return Ih(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=ve;ve=1;var l=Rl;Rl|=4,Al.current=null,function(t,e){if(tr=je,di(t=pi())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(E){n=null;break t}var a=0,l=-1,h=-1,c=0,u=0,p=t,d=null;e:for(;;){for(var f;p!==n||0!==r&&3!==p.nodeType||(l=a+r),p!==o||0!==i&&3!==p.nodeType||(h=a+i),3===p.nodeType&&(a+=p.nodeValue.length),null!==(f=p.firstChild);)d=p,p=f;for(;;){if(p===t)break e;if(d===n&&++c===r&&(l=a),d===o&&++u===i&&(h=a),null!==(f=p.nextSibling))break;d=(p=d).parentNode}p=f}n=-1===l||-1===h?null:{start:l,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},je=!1,$a=e;null!==$a;)if(t=(e=$a).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$a=t;else for(;null!==$a;){e=$a;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?g:gs(e.type,g),y);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;1===T.nodeType?T.textContent="":9===T.nodeType&&T.documentElement&&T.removeChild(T.documentElement);break;default:throw Error(s(163))}}catch(E){wh(e,e.return,E)}if(null!==(t=e.sibling)){t.return=e.return,$a=t;break}$a=e.return}m=nl,nl=!1}(t,n),yl(n,t),fi(er),je=!!tr,er=tr=null,t.current=n,vl(n,t,r),Kt(),Rl=l,ve=a,Cl.transition=o}else t.current=n;if(Xl&&(Xl=!1,Zl=t,Kl=r),o=t.pendingLanes,0===o&&(ql=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rh(t,Qt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,t=Yl,Yl=null,t;0!==(1&Kl)&&0!==t.tag&&Ih(),o=t.pendingLanes,0!==(1&o)?t===Jl?Ql++:(Ql=0,Jl=t):Ql=0,Hr()}(t,e,n,i)}finally{Cl.transition=r,ve=i}return null}function Ih(){if(null!==Zl){var t=Te(Kl),e=Cl.transition,n=ve;try{if(Cl.transition=null,ve=16>t?16:t,null===Zl)var i=!1;else{if(t=Zl,Zl=null,Kl=0,0!==(6&Rl))throw Error(s(331));var r=Rl;for(Rl|=4,$a=t.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var h=0;h<l.length;h++){var c=l[h];for($a=c;null!==$a;){var u=$a;switch(u.tag){case 0:case 11:case 15:il(8,u,o)}var p=u.child;if(null!==p)p.return=u,$a=p;else for(;null!==$a;){var d=(u=$a).sibling,f=u.return;if(ol(u),u===c){$a=null;break}if(null!==d){d.return=f,$a=d;break}$a=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else t:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var _=o.sibling;if(null!==_){_.return=o.return,$a=_;break t}$a=o.return}}var v=t.current;for($a=v;null!==$a;){var T=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==T)T.return=a,$a=T;else t:for(a=v;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){wh(l,l.return,x)}if(l===a){$a=null;break t}var E=l.sibling;if(null!==E){E.return=l.return,$a=E;break t}$a=l.return}}if(Rl=r,Hr(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(x){}i=!0}return i}finally{ve=n,Cl.transition=e}}return!1}function bh(t,e,n){t=Ps(t,e=fa(0,e=ca(n,e),1),1),e=eh(),null!==t&&(ye(t,1,e),rh(t,e))}function wh(t,e,n){if(3===t.tag)bh(t,t,n);else for(;null!==e;){if(3===e.tag){bh(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){e=Ps(e,t=ma(e,t=ca(n,t),1),1),t=eh(),null!==e&&(ye(e,1,t),rh(e,t));break}}e=e.return}}function Sh(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=eh(),t.pingedLanes|=t.suspendedLanes&n,Dl===t&&(Nl&n)===n&&(4===Fl||3===Fl&&(130023424&Nl)===Nl&&500>Qt()-Hl?dh(t,0):Bl|=n),rh(t,e)}function Ah(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=eh();null!==(t=Rs(t,e))&&(ye(t,e,n),rh(t,n))}function Ch(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ah(t,n)}function Rh(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Ah(t,n)}function Dh(t,e){return qt(t,e)}function Oh(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nh(t,e,n,i){return new Oh(t,e,n,i)}function Mh(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ph(t,e){var n=t.alternate;return null===n?((n=Nh(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fh(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)Mh(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case I:return Lh(n.children,r,o,e);case b:a=8,r|=8;break;case w:return(t=Nh(12,n,e,2|r)).elementType=w,t.lanes=o,t;case R:return(t=Nh(13,n,e,r)).elementType=R,t.lanes=o,t;case D:return(t=Nh(19,n,e,r)).elementType=D,t.lanes=o,t;case M:return kh(n,r,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case S:a=10;break t;case A:a=9;break t;case C:a=11;break t;case O:a=14;break t;case N:a=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Nh(a,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Lh(t,e,n,i){return(t=Nh(7,t,i,e)).lanes=n,t}function kh(t,e,n,i){return(t=Nh(22,t,i,e)).elementType=M,t.lanes=n,t.stateNode={isHidden:!1},t}function Uh(t,e,n){return(t=Nh(6,t,null,e)).lanes=n,t}function Bh(t,e,n){return(e=Nh(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zh(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,i,r,s,o,a,l){return t=new zh(t,e,n,a,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Nh(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),t}function Hh(t){if(!t)return Ar;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Nr(n))return Fr(t,n,e)}return e}function Vh(t,e,n,i,r,s,o,a,l){return(t=Gh(n,i,!0,t,0,s,0,a,l)).context=Hh(null),n=t.current,(s=Ms(i=eh(),r=nh(n))).callback=void 0!==e&&null!==e?e:null,Ps(n,s,r),t.current.lanes=r,ye(t,r,i),rh(t,i),t}function jh(t,e,n,i){var r=e.current,s=eh(),o=nh(r);return n=Hh(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ms(s,o)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Ps(r,e,o))&&(ih(t,r,o,s),Fs(t,r,o)),o}function Wh(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Yh(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function qh(t,e){Yh(t,e),(t=t.alternate)&&Yh(t,e)}bl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Rr.current)Ta=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return Ta=!1,function(t,e,n){switch(e.tag){case 3:Da(e),ds();break;case 5:so(e);break;case 1:Nr(e.type)&&Lr(e);break;case 4:io(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Sr(ys,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Sr(ao,1&ao.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Ua(t,e,n):(Sr(ao,1&ao.current),null!==(t=Wa(t,e,n))?t.sibling:null);Sr(ao,1&ao.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Va(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Sr(ao,ao.current),i)break;return null;case 22:case 23:return e.lanes=0,wa(t,e,n)}return Wa(t,e,n)}(t,e,n);Ta=0!==(131072&t.flags)}else Ta=!1,rs&&0!==(1048576&e.flags)&&$r(e,Yr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ja(t,e),t=e.pendingProps;var r=Or(e,Cr.current);bs(e,n),r=bo(null,e,i,t,r,n);var o=wo();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nr(i)?(o=!0,Lr(e)):o=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Os(e),r.updater=Gs,e.stateNode=r,r._reactInternals=e,Ws(e,i,t,n),e=Ra(null,e,i,!0,o,n)):(e.tag=0,rs&&o&&ts(e),Ea(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(ja(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Mh(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===O)return 14}return 2}(i),t=gs(i,t),r){case 0:e=Aa(null,e,i,t,n);break t;case 1:e=Ca(null,e,i,t,n);break t;case 11:e=xa(null,e,i,t,n);break t;case 14:e=Ia(null,e,i,gs(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Aa(t,e,i,r=e.elementType===i?r:gs(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ca(t,e,i,r=e.elementType===i?r:gs(i,r),n);case 3:t:{if(Da(e),null===t)throw Error(s(387));i=e.pendingProps,r=(o=e.memoizedState).element,Ns(t,e),ks(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Oa(t,e,i,n,r=ca(Error(s(423)),e));break t}if(i!==r){e=Oa(t,e,i,n,r=ca(Error(s(424)),e));break t}for(is=hr(e.stateNode.containerInfo.firstChild),ns=e,rs=!0,ss=null,n=Qs(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ds(),i===r){e=Wa(t,e,n);break t}Ea(t,e,i,n)}e=e.child}return e;case 5:return so(e),null===t&&hs(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(e.flags|=32),Sa(t,e),Ea(t,e,a,n),e.child;case 6:return null===t&&hs(e),null;case 13:return Ua(t,e,n);case 4:return io(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Ks(e,null,i,n):Ea(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,xa(t,e,i,r=e.elementType===i?r:gs(i,r),n);case 7:return Ea(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ea(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Sr(ys,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Rr.current){e=Wa(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var h=l.firstContext;null!==h;){if(h.context===i){if(1===o.tag){(h=Ms(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?h.next=h:(h.next=u.next,u.next=h),c.pending=h}}o.lanes|=n,null!==(h=o.alternate)&&(h.lanes|=n),Is(o.return,n,e),l.lanes|=n;break}h=h.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ea(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,bs(e,n),i=i(r=ws(r)),e.flags|=1,Ea(t,e,i,n),e.child;case 14:return r=gs(i=e.type,e.pendingProps),Ia(t,e,i,r=gs(i.type,r),n);case 15:return ba(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gs(i,r),ja(t,e),e.tag=1,Nr(i)?(t=!0,Lr(e)):t=!1,bs(e,n),Vs(e,i,r),Ws(e,i,r,n),Ra(null,e,i,!0,t,n);case 19:return Va(t,e,n);case 22:return wa(t,e,n)}throw Error(s(156,e.tag))};var Xh="function"===typeof reportError?reportError:function(t){console.error(t)};function Zh(t){this._internalRoot=t}function Kh(t){this._internalRoot=t}function Qh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $h(){}function tc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var t=Wh(o);a.call(t)}}jh(e,o,t,r)}else o=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Wh(o);s.call(t)}}var o=Vh(e,i,t,0,null,!1,0,"",$h);return t._reactRootContainer=o,t[fr]=o.current,Hi(8===t.nodeType?t.parentNode:t),uh(),o}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var a=i;i=function(){var t=Wh(l);a.call(t)}}var l=Gh(t,0,!1,null,0,!1,0,"",$h);return t._reactRootContainer=l,t[fr]=l.current,Hi(8===t.nodeType?t.parentNode:t),uh((function(){jh(e,l,n,i)})),l}(n,e,t,r,i);return Wh(o)}Kh.prototype.render=Zh.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));jh(t,e,null,null)},Kh.prototype.unmount=Zh.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uh((function(){jh(null,t,null,null)})),e[fr]=null}},Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=be();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Me.length&&0!==e&&e<Me[n].priority;n++);Me.splice(n,0,t),0===n&&ke(t)}},Ee=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ue(e.pendingLanes);0!==n&&(_e(e,1|n),rh(e,Qt()),0===(6&Rl)&&(Vl=Qt()+500,Hr()))}break;case 13:uh((function(){var e=Rs(t,1);if(null!==e){var n=eh();ih(e,t,1,n)}})),qh(t,1)}},xe=function(t){if(13===t.tag){var e=Rs(t,134217728);if(null!==e)ih(e,t,134217728,eh());qh(t,134217728)}},Ie=function(t){if(13===t.tag){var e=nh(t),n=Rs(t,e);if(null!==n)ih(n,t,e,eh());qh(t,e)}},be=function(){return ve},we=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}},xt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Er(i);if(!r)throw Error(s(90));q(i),J(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=ch,Rt=uh;var ec={usingClientEntryPoint:!1,Events:[vr,Tr,Er,St,At,ch]},nc={findFiberByHostInstance:_r,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Wt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{re=rc.inject(ic),se=rc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qh(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Qh(t))throw Error(s(299));var n=!1,i="",r=Xh;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Gh(t,1,!1,null,0,n,0,i,r),t[fr]=e.current,Hi(8===t.nodeType?t.parentNode:t),new Zh(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=Wt(e))?null:t.stateNode},e.flushSync=function(t){return uh(t)},e.hydrate=function(t,e,n){if(!Jh(e))throw Error(s(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qh(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Xh;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Vh(e,null,t,1,null!=n?n:null,r,0,o,a),t[fr]=e.current,Hi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Kh(e)},e.render=function(t,e,n){if(!Jh(e))throw Error(s(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jh(t))throw Error(s(40));return!!t._reactRootContainer&&(uh((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[fr]=null}))})),!0)},e.unstable_batchedUpdates=ch,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jh(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return tc(t,e,n,!1,i)},e.version="18.2.0-next-9e3b772b8-20220608"},4391:(t,e,n)=>{"use strict";var i=n(7950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},1153:(t,e,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(t,e,n){var i,s={},h=null,c=null;for(i in void 0!==n&&(h=""+n),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(c=e.ref),e)o.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:h,ref:c,props:s,_owner:a.current}}e.Fragment=s,e.jsx=h,e.jsxs=h},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}function _(){}function v(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=y.prototype;var T=v.prototype=new _;T.constructor=v,m(T,y.prototype),T.isPureReactComponent=!0;var E=Array.isArray,x=Object.prototype.hasOwnProperty,I={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function w(t,e,i){var r,s={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)x.call(e,r)&&!b.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];s.children=h}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:o,ref:a,props:s,_owner:I.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var A=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function R(t,e,r,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=t),t=""===s?"."+C(l,0):s,E(o)?(r="",null!=t&&(r=t.replace(A,"$&/")+"/"),R(o,e,r,"",(function(t){return t}))):null!=o&&(S(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",E(t))for(var h=0;h<t.length;h++){var c=s+C(a=t[h],h);l+=R(a,e,r,c,o)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),h=0;!(a=t.next()).done;)l+=R(a=a.value,e,r,c=s+C(a,h++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function D(t,e,n){if(null==t)return t;var i=[],r=0;return R(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function O(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},M={transition:null},P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:M,ReactCurrentOwner:I};e.Children={map:D,forEach:function(t,e,n){D(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return D(t,(function(){e++})),e},toArray:function(t){return D(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=o,e.PureComponent=v,e.StrictMode=s,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m({},t.props),s=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=I.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)x.call(e,h)&&!b.hasOwnProperty(h)&&(r[h]=void 0===e[h]&&void 0!==l?l[h]:e[h])}var h=arguments.length-2;if(1===h)r.children=i;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:o,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=w,e.createFactory=function(t){var e=w.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:O}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=M.transition;M.transition={};try{t()}finally{M.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return N.current.useTransition()},e.version="18.2.0"},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},579:(t,e,n)=>{"use strict";t.exports=n(1153)},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=t[a],h=a+1,c=t[h];if(0>s(l,n))h<r&&0>s(c,l)?(t[i]=c,t[h]=n,i=h):(t[i]=l,t[a]=n,i=a);else{if(!(h<r&&0>s(c,n)))break t;t[i]=c,t[h]=n,i=h}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var h=[],c=[],u=1,p=null,d=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function T(t){for(var e=i(c);null!==e;){if(null===e.callback)r(c);else{if(!(e.startTime<=t))break;r(c),e.sortIndex=e.expirationTime,n(h,e)}e=i(c)}}function E(t){if(g=!1,T(t),!m)if(null!==i(h))m=!0,M(x);else{var e=i(c);null!==e&&P(E,e.startTime-t)}}function x(t,n){m=!1,g&&(g=!1,_(S),S=-1),f=!0;var s=d;try{for(T(n),p=i(h);null!==p&&(!(p.expirationTime>n)||t&&!R());){var o=p.callback;if("function"===typeof o){p.callback=null,d=p.priorityLevel;var a=o(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?p.callback=a:p===i(h)&&r(h),T(n)}else r(h);p=i(h)}if(null!==p)var l=!0;else{var u=i(c);null!==u&&P(E,u.startTime-n),l=!1}return l}finally{p=null,d=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,b=!1,w=null,S=-1,A=5,C=-1;function R(){return!(e.unstable_now()-C<A)}function D(){if(null!==w){var t=e.unstable_now();C=t;var n=!0;try{n=w(!0,t)}finally{n?I():(b=!1,w=null)}}else b=!1}if("function"===typeof v)I=function(){v(D)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,N=O.port2;O.port1.onmessage=D,I=function(){N.postMessage(null)}}else I=function(){y(D,0)};function M(t){w=t,b||(b=!0,I())}function P(t,n){S=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,M(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_scheduleCallback=function(t,r,s){var o=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:u++,callback:r,priorityLevel:t,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(t.sortIndex=s,n(c,t),null===i(h)&&t===i(c)&&(g?(_(S),S=-1):g=!0,P(E,s-o))):(t.sortIndex=a,n(h,t),m||f||(m=!0,M(x))),t},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},3165:(t,e,n)=>{"use strict";function i(t){return t.arrayBuffer?t.arrayBuffer():new Promise(((e,n)=>{const i=new FileReader;i.addEventListener("loadend",(()=>{e(i.result)})),i.addEventListener("error",n),i.readAsArrayBuffer(t)}))}async function r(t){const e=await i(t);return new Uint8Array(e)}function s(t){return"undefined"!==typeof Blob&&t instanceof Blob}function o(t){return"undefined"!==typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer}n.d(e,{$1:()=>nt}),t=n.hmd(t);const a="undefined"!==typeof process&&process.versions&&"undefined"!==typeof process.versions.node&&"undefined"===typeof process.versions.electron;class l{constructor(t){this.typedArray=t instanceof ArrayBuffer||o(t)?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}async getLength(){return this.typedArray.byteLength}async read(t,e){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+t,e)}}class h{constructor(t){this.blob=t}async getLength(){return this.blob.size}async read(t,e){const n=this.blob.slice(t,t+e),r=await i(n);return new Uint8Array(r)}async sliceAsBlob(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.blob.slice(t,t+e,n)}}function c(t,e){var n=t.length;if(e<=n)return t;var i=new Uint8Array(Math.max(n<<1,e));return i.set(t,0),i}function u(t,e,n,i,r,s){for(var o=g,a=_,l=0;l<n;){var h=t[a(i,r)&e];r+=15&h;var c=h>>>4;if(c<=15)s[l]=c,l++;else{var u=0,p=0;16==c?(p=3+o(i,r,2),r+=2,u=s[l-1]):17==c?(p=3+o(i,r,3),r+=3):18==c&&(p=11+o(i,r,7),r+=7);for(var d=l+p;l<d;)s[l]=u,l++}}return r}function p(t,e,n,i){for(var r=0,s=0,o=i.length>>>1;s<n;){var a=t[s+e];i[s<<1]=0,i[1+(s<<1)]=a,a>r&&(r=a),s++}for(;s<o;)i[s<<1]=0,i[1+(s<<1)]=0,s++;return r}function d(t,e){for(var n,i,r,s,o=t.length,a=v.bl_count,l=0;l<=e;l++)a[l]=0;for(l=1;l<o;l+=2)a[t[l]]++;var h=v.next_code;for(n=0,a[0]=0,i=1;i<=e;i++)n=n+a[i-1]<<1,h[i]=n;for(r=0;r<o;r+=2)0!=(s=t[r+1])&&(t[r]=h[s],h[s]++)}function f(t,e,n){for(var i=t.length,r=v.rev15,s=0;s<i;s+=2)if(0!=t[s+1])for(var o=s>>1,a=t[s+1],l=o<<4|a,h=e-a,c=t[s]<<h,u=c+(1<<h);c!=u;){n[r[c]>>>15-e]=l,c++}}function m(t,e){for(var n=v.rev15,i=15-e,r=0;r<t.length;r+=2){var s=t[r]<<e-t[r+1];t[r]=n[s]>>>i}}function g(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<n)-1}function y(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<n)-1}function _(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)}const v=function(){var t=Uint16Array,e=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new t(65536),prev:new t(32768)}}();!function(){for(var t=0;t<32768;t++){var e=t;e=(4278255360&(e=(4042322160&(e=(3435973836&(e=(2863311530&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8,v.rev15[t]=(e>>>16|e<<16)>>>17}function n(t,e,n){for(;0!=e--;)t.push(0,n)}for(t=0;t<32;t++)v.ldef[t]=v.of0[t]<<3|v.exb[t],v.ddef[t]=v.df0[t]<<4|v.dxb[t];n(v.fltree,144,8),n(v.fltree,112,9),n(v.fltree,24,7),n(v.fltree,8,8),d(v.fltree,9),f(v.fltree,9,v.flmap),m(v.fltree,9),n(v.fdtree,32,5),d(v.fdtree,5),f(v.fdtree,5,v.fdmap),m(v.fdtree,5),n(v.itree,19,0),n(v.ltree,286,0),n(v.dtree,30,0),n(v.ttree,320,0)}();const T={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update:function(t,e,n,i){for(var r=0;r<i;r++)t=T.table[255&(t^e[n+r])]^t>>>8;return t},crc:function(t,e,n){return 4294967295^T.update(4294967295,t,e,n)}};function E(t,e){return function(t,e){var n=Uint8Array;if(3==t[0]&&0==t[1])return e||new n(0);var i=y,r=g,s=u,o=_,a=null==e;a&&(e=new n(t.length>>>2<<3));for(var l,h,m=0,T=0,E=0,x=0,I=0,b=0,w=0,S=0,A=0;0==m;)if(m=i(t,A,1),T=i(t,A+1,2),A+=3,0!=T){if(a&&(e=c(e,S+(1<<17))),1==T&&(l=v.flmap,h=v.fdmap,b=511,w=31),2==T){E=r(t,A,5)+257,x=r(t,A+5,5)+1,I=r(t,A+10,4)+4,A+=14;for(var C=0;C<38;C+=2)v.itree[C]=0,v.itree[C+1]=0;var R=1;for(C=0;C<I;C++){var D=r(t,A+3*C,3);v.itree[1+(v.ordr[C]<<1)]=D,D>R&&(R=D)}A+=3*I,d(v.itree,R),f(v.itree,R,v.imap),l=v.lmap,h=v.dmap,A=s(v.imap,(1<<R)-1,E+x,t,A,v.ttree);var O=p(v.ttree,0,E,v.ltree);b=(1<<O)-1;var N=p(v.ttree,E,x,v.dtree);w=(1<<N)-1,d(v.ltree,O),f(v.ltree,O,l),d(v.dtree,N),f(v.dtree,N,h)}for(;;){var M=l[o(t,A)&b];A+=15&M;var P=M>>>4;if(P>>>8==0)e[S++]=P;else{if(256==P)break;var F=S+P-254;if(P>264){var L=v.ldef[P-257];F=S+(L>>>3)+r(t,A,7&L),A+=7&L}var k=h[o(t,A)&w];A+=15&k;var U=k>>>4,B=v.ddef[U],z=(B>>>4)+i(t,A,15&B);for(A+=15&B,a&&(e=c(e,S+(1<<17)));S<F;)e[S]=e[S++-z],e[S]=e[S++-z],e[S]=e[S++-z],e[S]=e[S++-z];S=F}}}else{0!=(7&A)&&(A+=8-(7&A));var G=4+(A>>>3),H=t[G-4]|t[G-3]<<8;a&&(e=c(e,S+H)),e.set(new n(t.buffer,t.byteOffset+G,H),S),A=G+H<<3,S+=H}return e.length==S?e:e.slice(0,S)}(t,e)}const x={numWorkers:1,workerURL:"",useWorkers:!1};let I=0,b=0,w=!0;const S=[],A=[],C=[],R=new Map;function D(t){M(t.target);const{id:e,error:n,data:i}=t.data,r=R.get(e);R.delete(e),n?r.reject(n):r.resolve(i)}function O(t){return new Promise(((e,n)=>{const i=new Worker(t);i.onmessage=t=>{"start"===t.data?(i.onerror=void 0,i.onmessage=void 0,e(i)):n(new Error("unexpected message: ".concat(t.data)))},i.onerror=n}))}const N=function(){if(a){const{Worker:n}=(e="worker_threads",t.require(e));return{createWorker:async t=>new n(t),addEventListener(t,e){t.on("message",(n=>{e({target:t,data:n})}))},async terminate(t){await t.terminate()}}}return{async createWorker(t){try{return await O(t)}catch(n){console.warn("could not load worker:",t)}let e;try{const n=await fetch(t,{mode:"cors"});if(!n.ok)throw new Error("could not load: ".concat(t));e=await n.text(),t=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));const i=await O(t);return x.workerURL=t,i}catch(n){console.warn("could not load worker via fetch:",t)}if(void 0!==e)try{t="data:application/javascript;base64,".concat(btoa(e));const n=await O(t);return x.workerURL=t,n}catch(n){console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(t,e){t.addEventListener("message",e)},async terminate(t){t.terminate()}};var e}();function M(t){A.push(t),F()}function P(t,e,n,i){const r=new Uint8Array(e);E(t,r),i(n?new Blob([r],{type:n}):r.buffer)}async function F(){if(0!==C.length){if(x.useWorkers&&w){const t=await async function(){if(0===A.length&&b<x.numWorkers){++b;try{const t=await N.createWorker(x.workerURL);S.push(t),A.push(t),N.addEventListener(t,D)}catch(t){w=!1}}return A.pop()}();if(w){if(t){if(0===C.length)return void M(t);const{id:e,src:n,uncompressedSize:i,type:r,resolve:s,reject:o}=C.shift();R.set(e,{id:e,resolve:s,reject:o});const a=[];t.postMessage({type:"inflate",data:{id:e,type:r,src:n,uncompressedSize:i}},a)}return}}for(;C.length;){const{src:t,uncompressedSize:e,type:n,resolve:i}=C.shift();let o=t;s(t)&&(o=await r(t)),P(o,e,n,i)}}}function L(t,e,n){return new Promise(((i,r)=>{C.push({src:t,uncompressedSize:e,type:n,resolve:i,reject:r,id:I++}),F()}))}class k{constructor(t,e){var n,i;this._reader=t,this._rawEntry=e,this.name=e.name,this.nameBytes=e.nameBytes,this.size=e.uncompressedSize,this.compressedSize=e.compressedSize,this.comment=e.comment,this.commentBytes=e.commentBytes,this.compressionMethod=e.compressionMethod,this.lastModDate=(n=e.lastModFileDate,i=e.lastModFileTime,new Date(1980+(n>>9&127),(n>>5&15)-1,31&n,i>>11&31,i>>5&63,2*(31&i),0)),this.isDirectory=0===e.uncompressedSize&&e.name.endsWith("/"),this.encrypted=!!(1&e.generalPurposeBitFlag),this.externalFileAttributes=e.externalFileAttributes,this.versionMadeBy=e.versionMadeBy}async blob(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/octet-stream";return await async function(t,e,n){const{decompress:i,fileDataStart:r}=await tt(t,e);if(!i){const i=await V(t,r,e.compressedSize,n);return s(i)?i:new Blob([o(i.buffer)?new Uint8Array(i):i],{type:n})}const a=await V(t,r,e.compressedSize),l=await L(a,e.uncompressedSize,n);return l}(this._reader,this._rawEntry,t)}async arrayBuffer(){return await async function(t,e){const{decompress:n,fileDataStart:i}=await tt(t,e);if(!n){const n=await H(t,i,e.compressedSize);return 0===(r=n).byteOffset&&r.byteLength===r.buffer.byteLength?n.buffer:n.slice().buffer}var r;const s=await V(t,i,e.compressedSize);return await L(s,e.uncompressedSize)}(this._reader,this._rawEntry)}async text(){const t=await this.arrayBuffer();return Z(new Uint8Array(t))}async json(){const t=await this.text();return JSON.parse(t)}}const U=22,B=65535,z=101010256,G=101075792;async function H(t,e,n){return await t.read(e,n)}async function V(t,e,n,i){return t.sliceAsBlob?await t.sliceAsBlob(e,n,i):await t.read(e,n)}const j={unsigned:()=>0};function W(t,e){return t[e]+256*t[e+1]}function Y(t,e){return t[e]+256*t[e+1]+65536*t[e+2]+16777216*t[e+3]}function q(t,e){return Y(t,e)+4294967296*Y(t,e+4)}const X=new TextDecoder;function Z(t,e){return o(t.buffer)&&(t=new Uint8Array(t)),X.decode(t)}const K=117853008;async function Q(t,e,n,i){const r=e-20,s=await H(t,r,20);if(Y(s,0)!==K)throw new Error("invalid zip64 end of central directory locator signature");const o=q(s,8),a=await H(t,o,56);if(Y(a,0)!==G)throw new Error("invalid zip64 end of central directory record signature");const l=q(a,32),h=q(a,40);return $(t,q(a,48),h,l,n,i)}const J=33639248;async function $(t,e,n,i,r,s){let o=0;const a=await H(t,e,n),l=[];for(let h=0;h<i;++h){const t=a.subarray(o,o+46),e=Y(t,0);if(e!==J)throw new Error("invalid central directory file header signature: 0x".concat(e.toString(16)));const n={versionMadeBy:W(t,4),versionNeededToExtract:W(t,6),generalPurposeBitFlag:W(t,8),compressionMethod:W(t,10),lastModFileTime:W(t,12),lastModFileDate:W(t,14),crc32:Y(t,16),compressedSize:Y(t,20),uncompressedSize:Y(t,24),fileNameLength:W(t,28),extraFieldLength:W(t,30),fileCommentLength:W(t,32),internalFileAttributes:W(t,36),externalFileAttributes:Y(t,38),relativeOffsetOfLocalHeader:Y(t,42)};if(64&n.generalPurposeBitFlag)throw new Error("strong encryption is not supported");o+=46;const i=a.subarray(o,o+n.fileNameLength+n.extraFieldLength+n.fileCommentLength);n.nameBytes=i.slice(0,n.fileNameLength),n.name=Z(n.nameBytes);const r=n.fileNameLength+n.extraFieldLength,s=i.slice(n.fileNameLength,r);n.extraFields=[];let h=0;for(;h<s.length-3;){const t=W(s,h+0),e=h+4,i=e+W(s,h+2);if(i>s.length)throw new Error("extra field length exceeds extra field buffer size");n.extraFields.push({id:t,data:s.slice(e,i)}),h=i}if(n.commentBytes=i.slice(r,r+n.fileCommentLength),n.comment=Z(n.commentBytes),o+=i.length,4294967295===n.uncompressedSize||4294967295===n.compressedSize||4294967295===n.relativeOffsetOfLocalHeader){const t=n.extraFields.find((t=>1===t.id));if(!t)throw new Error("expected zip64 extended information extra field");const e=t.data;let i=0;if(4294967295===n.uncompressedSize){if(i+8>e.length)throw new Error("zip64 extended information extra field does not include uncompressed size");n.uncompressedSize=q(e,i),i+=8}if(4294967295===n.compressedSize){if(i+8>e.length)throw new Error("zip64 extended information extra field does not include compressed size");n.compressedSize=q(e,i),i+=8}if(4294967295===n.relativeOffsetOfLocalHeader){if(i+8>e.length)throw new Error("zip64 extended information extra field does not include relative header offset");n.relativeOffsetOfLocalHeader=q(e,i),i+=8}}const c=n.extraFields.find((t=>28789===t.id&&t.data.length>=6&&1===t.data[0]&&Y(t.data,1)),j.unsigned(n.nameBytes));if(c&&(n.fileName=Z(c.data.slice(5))),0===n.compressionMethod){let t=n.uncompressedSize;if(0!==(1&n.generalPurposeBitFlag)&&(t+=12),n.compressedSize!==t)throw new Error("compressed size mismatch for stored file: ".concat(n.compressedSize," != ").concat(t))}l.push(n)}return{zip:{comment:r,commentBytes:s},entries:l.map((e=>new k(t,e)))}}async function tt(t,e){if(1&e.generalPurposeBitFlag)throw new Error("encrypted entries not supported");const n=await H(t,e.relativeOffsetOfLocalHeader,30),i=await t.getLength(),r=Y(n,0);if(67324752!==r)throw new Error("invalid local file header signature: 0x".concat(r.toString(16)));const s=W(n,26),o=W(n,28),a=e.relativeOffsetOfLocalHeader+n.length+s+o;let l;if(0===e.compressionMethod)l=!1;else{if(8!==e.compressionMethod)throw new Error("unsupported compression method: ".concat(e.compressionMethod));l=!0}const h=a,c=h+e.compressedSize;if(0!==e.compressedSize&&c>i)throw new Error("file data overflows file bounds: ".concat(h," +  ").concat(e.compressedSize,"  > ").concat(i));return{decompress:l,fileDataStart:h}}async function et(t){let e;if("undefined"!==typeof Blob&&t instanceof Blob)e=new h(t);else if(t instanceof ArrayBuffer||t&&t.buffer&&t.buffer instanceof ArrayBuffer)e=new l(t);else if(o(t)||o(t.buffer))e=new l(t);else if("string"===typeof t){const n=await fetch(t);if(!n.ok)throw new Error("failed http request ".concat(t,", status: ").concat(n.status,": ").concat(n.statusText));const i=await n.blob();e=new h(i)}else{if("function"!==typeof t.getLength||"function"!==typeof t.read)throw new Error("unsupported source type");e=t}const n=await e.getLength();if(n>Number.MAX_SAFE_INTEGER)throw new Error("file too large. size: ".concat(n,". Only file sizes up 4503599627370496 bytes are supported"));return await async function(t,e){const n=Math.min(U+B,e),i=e-n,r=await H(t,i,n);for(let s=n-U;s>=0;--s){if(Y(r,s)!==z)continue;const e=new Uint8Array(r.buffer,r.byteOffset+s,r.byteLength-s),n=W(e,4);if(0!==n)throw new Error("multi-volume zip files are not supported. This is volume: ".concat(n));const o=W(e,10),a=Y(e,12),l=Y(e,16),h=W(e,20),c=e.length-U;if(h!==c)throw new Error("invalid comment length. expected: ".concat(c,", actual: ").concat(h));const u=new Uint8Array(e.buffer,e.byteOffset+22,h),p=Z(u);return 65535===o||4294967295===l?await Q(t,i+s,p,u):await $(t,l,a,o,p,u)}throw new Error("could not find end of central directory. maybe not zip file")}(e,n)}async function nt(t){const{zip:e,entries:n}=await et(t);return{zip:e,entries:Object.fromEntries(n.map((t=>[t.name,t])))}}},5073:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=5073,t.exports=e},4994:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},8168:(t,e,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(this,arguments)}n.d(e,{A:()=>i})},8587:(t,e,n)=>{"use strict";function i(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}n.d(e,{A:()=>i})},8387:(t,e,n)=>{"use strict";function i(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=i(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}n.d(e,{A:()=>r});const r=function(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=i(t))&&(r&&(r+=" "),r+=e);return r}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.amdO={},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&i;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>i[t]));return o.default=()=>i,n.d(s,o),s}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t,e=n(5043),i=n.t(e,2),r=n(4391),s=n(7950),o=n.t(s,2);function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(t||(t={}));const l="popstate";function h(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function c(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(C8){}}}function u(t,e){return{usr:t.state,key:t.key,idx:e}}function p(t,e,n,i){return void 0===n&&(n=null),a({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?f(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function d(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function f(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function m(e,n,i,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,f=t.Pop,m=null,g=y();function y(){return(c.state||{idx:null}).idx}function _(){f=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:f,location:T.location,delta:n})}function v(t){let e="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof t?t:d(t);return n=n.replace(/ $/,"%20"),h(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==g&&(g=0,c.replaceState(a({},c.state,{idx:g}),""));let T={get action(){return f},get location(){return e(s,c)},listen(t){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,_),m=t,()=>{s.removeEventListener(l,_),m=null}},createHref:t=>n(s,t),createURL:v,encodeLocation(t){let e=v(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(e,n){f=t.Push;let r=p(T.location,e,n);i&&i(r,e),g=y()+1;let a=u(r,g),l=T.createHref(r);try{c.pushState(a,"",l)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(l)}o&&m&&m({action:f,location:T.location,delta:1})},replace:function(e,n){f=t.Replace;let r=p(T.location,e,n);i&&i(r,e),g=y();let s=u(r,g),a=T.createHref(r);c.replaceState(s,"",a),o&&m&&m({action:f,location:T.location,delta:0})},go:t=>c.go(t)};return T}var g;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(t,e,n){void 0===n&&(n="/");let i=O(("string"===typeof e?f(e):e).pathname||"/",n);if(null==i)return null;let r=_(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(r);let s=null;for(let o=0;null==s&&o<r.length;++o){let t=D(i);s=C(r[o],t)}return s}function _(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(t,r,s)=>{let o={relativePath:void 0===s?t.path||"":s,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=L([i,o.relativePath]),l=n.concat(o);t.children&&t.children.length>0&&(h(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(t.children,e,l,a)),(null!=t.path||t.index)&&e.push({path:a,score:A(a,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of v(t.path))r(t,e,i);else r(t,e)})),e}function v(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=v(i.join("/")),a=[];return a.push(...o.map((t=>""===t?s:[s,t].join("/")))),r&&a.push(...o),a.map((e=>t.startsWith("/")&&""===e?"/":e))}const T=/^:[\w-]+$/,E=3,x=2,I=1,b=10,w=-2,S=t=>"*"===t;function A(t,e){let n=t.split("/"),i=n.length;return n.some(S)&&(i+=w),e&&(i+=x),n.filter((t=>!S(t))).reduce(((t,e)=>t+(T.test(e)?E:""===e?I:b)),i)}function C(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let t=n[o],a=o===n.length-1,l="/"===r?e:e.slice(r.length)||"/",h=R({path:t.relativePath,caseSensitive:t.caseSensitive,end:a},l);if(!h)return null;Object.assign(i,h.params);let c=t.route;s.push({params:i,pathname:L([r,h.pathname]),pathnameBase:k(L([r,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(r=L([r,h.pathnameBase]))}return s}function R(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);c("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,e?void 0:"i");return[s,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce(((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=a[n]||"";o=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}const l=a[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{}),pathname:s,pathnameBase:o,pattern:t}}function D(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return c(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function O(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function N(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function P(t,e){let n=M(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}function F(t,e,n,i){let r;void 0===i&&(i=!1),"string"===typeof t?r=f(t):(r=a({},t),h(!r.pathname||!r.pathname.includes("?"),N("?","pathname","search",r)),h(!r.pathname||!r.pathname.includes("#"),N("#","pathname","hash",r)),h(!r.search||!r.search.includes("#"),N("#","search","hash",r)));let s,o=""===t||""===r.pathname,l=o?"/":r.pathname;if(null==l)s=n;else{let t=e.length-1;if(!i&&l.startsWith("..")){let e=l.split("/");for(;".."===e[0];)e.shift(),t-=1;r.pathname=e.join("/")}s=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof t?f(t):t,s=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:s,search:U(i),hash:B(r)}}(r,s),u=l&&"/"!==l&&l.endsWith("/"),p=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!p||(c.pathname+="/"),c}const L=t=>t.join("/").replace(/\/\/+/g,"/"),k=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",B=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;function z(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const G=["post","put","patch","delete"],H=(new Set(G),["get",...G]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},V.apply(this,arguments)}const j=e.createContext(null);const W=e.createContext(null);const Y=e.createContext(null);const q=e.createContext(null);const X=e.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=e.createContext(null);function K(){return null!=e.useContext(q)}function Q(){return K()||h(!1),e.useContext(q).location}function J(t){e.useContext(Y).static||e.useLayoutEffect(t)}function $(){let{isDataRoute:t}=e.useContext(X);return t?function(){let{router:t}=lt(ot.UseNavigateStable),n=ct(at.UseNavigateStable),i=e.useRef(!1);J((()=>{i.current=!0}));let r=e.useCallback((function(e,r){void 0===r&&(r={}),i.current&&("number"===typeof e?t.navigate(e):t.navigate(e,V({fromRouteId:n},r)))}),[t,n]);return r}():function(){K()||h(!1);let t=e.useContext(j),{basename:n,future:i,navigator:r}=e.useContext(Y),{matches:s}=e.useContext(X),{pathname:o}=Q(),a=JSON.stringify(P(s,i.v7_relativeSplatPath)),l=e.useRef(!1);return J((()=>{l.current=!0})),e.useCallback((function(e,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof e)return void r.go(e);let s=F(e,JSON.parse(a),o,"path"===i.relative);null==t&&"/"!==n&&(s.pathname="/"===s.pathname?n:L([n,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[n,r,a,o,t])}()}function tt(n,i,r,s){K()||h(!1);let{navigator:o}=e.useContext(Y),{matches:a}=e.useContext(X),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let p,d=Q();if(i){var m;let t="string"===typeof i?f(i):i;"/"===u||(null==(m=t.pathname)?void 0:m.startsWith(u))||h(!1),p=t}else p=d;let g=p.pathname||"/",_=g;if("/"!==u){let t=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(t.length).join("/")}let v=y(n,{pathname:_});let T=st(v&&v.map((t=>Object.assign({},t,{params:Object.assign({},c,t.params),pathname:L([u,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?u:L([u,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),a,r,s);return i&&T?e.createElement(q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:t.Pop}},T):T}function et(){let t=function(){var t;let n=e.useContext(Z),i=ht(at.UseRouteError),r=ct(at.UseRouteError);if(void 0!==n)return n;return null==(t=i.errors)?void 0:t[r]}(),n=z(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:s},i):null,null)}const nt=e.createElement(et,null);class it extends e.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?e.createElement(X.Provider,{value:this.props.routeContext},e.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rt(t){let{routeContext:n,match:i,children:r}=t,s=e.useContext(j);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(X.Provider,{value:n},r)}function st(t,n,i,r){var s;if(void 0===n&&(n=[]),void 0===i&&(i=null),void 0===r&&(r=null),null==t){var o;if(null==(o=i)||!o.errors)return null;t=i.matches}let a=t,l=null==(s=i)?void 0:s.errors;if(null!=l){let t=a.findIndex((t=>t.route.id&&(null==l?void 0:l[t.route.id])));t>=0||h(!1),a=a.slice(0,Math.min(a.length,t+1))}let c=!1,u=-1;if(i&&r&&r.v7_partialHydration)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:n}=i,r=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||r){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((t,r,s)=>{let o,h=!1,p=null,d=null;var f;i&&(o=l&&r.route.id?l[r.route.id]:void 0,p=r.route.errorElement||nt,c&&(u<0&&0===s?(f="route-fallback",!1||ut[f]||(ut[f]=!0),h=!0,d=null):u===s&&(h=!0,d=r.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,s+1)),g=()=>{let n;return n=o?p:h?d:r.route.Component?e.createElement(r.route.Component,null):r.route.element?r.route.element:t,e.createElement(rt,{match:r,routeContext:{outlet:t,matches:m,isDataRoute:null!=i},children:n})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?e.createElement(it,{location:i.location,revalidation:i.revalidation,component:p,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ot=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ot||{}),at=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(at||{});function lt(t){let n=e.useContext(j);return n||h(!1),n}function ht(t){let n=e.useContext(W);return n||h(!1),n}function ct(t){let n=function(t){let n=e.useContext(X);return n||h(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||h(!1),i.route.id}const ut={};i.startTransition;function pt(t){let{to:n,replace:i,state:r,relative:s}=t;K()||h(!1);let{future:o,static:a}=e.useContext(Y),{matches:l}=e.useContext(X),{pathname:c}=Q(),u=$(),p=F(n,P(l,o.v7_relativeSplatPath),c,"path"===s),d=JSON.stringify(p);return e.useEffect((()=>u(JSON.parse(d),{replace:i,state:r,relative:s})),[u,d,s,i,r]),null}function dt(t){h(!1)}function ft(n){let{basename:i="/",children:r=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=n;K()&&h(!1);let u=i.replace(/^\/*/,"/"),p=e.useMemo((()=>({basename:u,navigator:a,static:l,future:V({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof s&&(s=f(s));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:_="default"}=s,v=e.useMemo((()=>{let t=O(d,u);return null==t?null:{location:{pathname:t,search:m,hash:g,state:y,key:_},navigationType:o}}),[u,d,m,g,y,_,o]);return null==v?null:e.createElement(Y.Provider,{value:p},e.createElement(q.Provider,{children:r,value:v}))}function mt(t){let{children:e,location:n}=t;return tt(gt(e),n)}new Promise((()=>{}));e.Component;function gt(t,n){void 0===n&&(n=[]);let i=[];return e.Children.forEach(t,((t,r)=>{if(!e.isValidElement(t))return;let s=[...n,r];if(t.type===e.Fragment)return void i.push.apply(i,gt(t.props.children,s));t.type!==dt&&h(!1),t.props.index&&t.props.children&&h(!1);let o={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=gt(t.props.children,s)),i.push(o)})),i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(C8){}new Map;const yt=i.startTransition;o.flushSync,i.useId;function _t(t){let{basename:n,children:i,future:r,window:s}=t,o=e.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m((function(t,e){let{pathname:n,search:i,hash:r}=t.location;return p("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:d(e)}),null,a)));let l=o.current,[h,c]=e.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},f=e.useCallback((t=>{u&&yt?yt((()=>c(t))):c(t)}),[c,u]);return e.useLayoutEffect((()=>l.listen(f)),[l,f]),e.createElement(ft,{basename:n,children:i,location:h.location,navigationType:h.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var vt,Tt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vt||(vt={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(Tt||(Tt={}));const Et=["LOGIN","LOGOUT","UPDATE_USER","START_MAP","REMOVE_MAP","ADD_BUILDING","OPEN_BUILDING","START_BUILDING","DELETE_BUILDING","CLOSE_BUILDING","UPDATE_BUILDING","UPLOAD_MODEL","DELETE_MODEL","EXPLODE_MODEL","TOGGLE_CLIPPER","TOGGLE_DIMENSIONS","TOGGLE_FLOORPLAN","UPDATE_FLOORPLANS","UPDATE_PROPERTIES","UPDATE_TREE"],xt=(t,e)=>"UPDATE_USER"===e.type?{...t,user:e.payload}:"OPEN_BUILDING"===e.type||"UPDATE_BUILDING"===e.type?{...t,building:e.payload}:"CLOSE_BUILDING"===e.type?{...t,building:null}:"UPDATE_FLOORPLANS"===e.type?{...t,floorplans:e.payload}:"UPDATE_PROPERTIES"===e.type||"UPDATE_TREE"===e.type?{...t,properties:e.payload}:{...t},It={user:null,building:null,floorplans:[],properties:[],spatialtree:[]},bt=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,h=e>>2,c=(3&e)<<4|o>>4;let u=(15&o)<<2|l>>6,p=63&l;a||(p=64,s||(u=64)),i.push(n[h],n[c],n[u],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bt(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new St;const l=e<<2|s>>4;if(i.push(l),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class St extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const At=function(t){return function(t){const e=bt(t);return wt.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Ct=function(t){try{return wt.decodeString(t,!0)}catch(C8){console.error("base64Decode failed: ",C8)}return null};const Rt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Dt=()=>{try{return Rt()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/ifc-app2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(C8){return}const e=t&&Ct(t[1]);return e&&JSON.parse(e)})()}catch(C8){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(C8))}},Ot=t=>{var e,n;return null===(n=null===(e=Dt())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},Nt=t=>{const e=Ot(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Mt=()=>{var t;return null===(t=Dt())||void 0===t?void 0:t.config},Pt=t=>{var e;return null===(e=Dt())||void 0===e?void 0:e["_".concat(t)]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function Lt(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[At(JSON.stringify({alg:"none",type:"JWT"})),At(JSON.stringify(s)),""].join(".")}function kt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ut(){return!function(){var t;const e=null===(t=Dt())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(C8){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bt(){try{return"object"===typeof indexedDB}catch(C8){return!1}}class zt extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(Ht,((t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new zt(n,s,e)}}const Ht=/\{\$([^}]+)}/g;function Vt(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(jt(n)&&jt(s)){if(!Vt(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function jt(t){return null!==t&&"object"===typeof t}function Wt(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yt(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function qt(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class Xt{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=Zt),void 0===i.error&&(i.error=Zt),void 0===i.complete&&(i.complete=Zt);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(C8){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(C8){"undefined"!==typeof console&&console.error&&console.error(C8)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Zt(){}function Kt(t){return t&&t._delegate?t._delegate:t}class Qt{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Jt="[DEFAULT]";class $t{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Ft;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(C8){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(C8){if(i)return null;throw C8}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:Jt})}catch(C8){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(C8){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(mT){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:te(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(mT){}return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;return this.component?this.component.multipleInstances?t:Jt:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function te(t){return t===Jt?void 0:t}class ee{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new $t(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const ne=[];var ie;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ie||(ie={}));const re={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},se=ie.INFO,oe={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},ae=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=oe[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(t.name,":"),...s)};class le{constructor(t){this.name=t,this._logLevel=se,this._logHandler=ae,this._userLogHandler=null,ne.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ie))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?re[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const he=(t,e)=>e.some((e=>t instanceof e));let ce,ue;const pe=new WeakMap,de=new WeakMap,fe=new WeakMap,me=new WeakMap,ge=new WeakMap;let ye={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return de.get(t);if("objectStoreNames"===e)return t.objectStoreNames||fe.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Te(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function _e(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(Ee(this),n),Te(pe.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Te(t.apply(Ee(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=t.call(Ee(this),e,...i);return fe.set(s,e.sort?e.sort():[e]),Te(s)}}function ve(t){return"function"===typeof t?_e(t):(t instanceof IDBTransaction&&function(t){if(de.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));de.set(t,e)}(t),he(t,ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,ye):t)}function Te(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Te(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&pe.set(e,t)})).catch((()=>{})),ge.set(e,t),e}(t);if(me.has(t))return me.get(t);const e=ve(t);return e!==t&&(me.set(t,e),ge.set(e,t)),e}const Ee=t=>ge.get(t);const xe=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],be=new Map;function we(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(be.get(e))return be.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Ie.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!xe.includes(n))return;const s=async function(t){const e=this.transaction(t,r?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&e.done]))[0]};return be.set(e,s),s}ye=(t=>({...t,get:(e,n,i)=>we(e,n)||t.get(e,n,i),has:(e,n)=>!!we(e,n)||t.has(e,n)}))(ye);class Se{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((t=>t)).join(" ")}}const Ae="@firebase/app",Ce="0.9.27",Re=new le("@firebase/app"),De="[DEFAULT]",Oe={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ne=new Map,Me=new Map;function Pe(t,e){try{t.container.addComponent(e)}catch(C8){Re.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),C8)}}function Fe(t){const e=t.name;if(Me.has(e))return Re.debug("There were multiple attempts to register component ".concat(e,".")),!1;Me.set(e,t);for(const n of Ne.values())Pe(n,t);return!0}function Le(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ke=new Gt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ue{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Qt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ke.create("app-deleted",{appName:this._name})}}const Be="10.8.0";function ze(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:De,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw ke.create("bad-app-name",{appName:String(r)});if(n||(n=Mt()),!n)throw ke.create("no-options");const s=Ne.get(r);if(s){if(Vt(n,s.options)&&Vt(i,s.config))return s;throw ke.create("duplicate-app",{appName:r})}const o=new ee(r);for(const l of Me.values())o.addComponent(l);const a=new Ue(n,i,o);return Ne.set(r,a),a}function Ge(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;const e=Ne.get(t);if(!e&&t===De&&Mt())return ze();if(!e)throw ke.create("no-app",{appName:t});return e}function He(t,e,n){var i;let r=null!==(i=Oe[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return s&&t.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&t.push("and"),o&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void Re.warn(t.join(" "))}Fe(new Qt("".concat(r,"-version"),(()=>({library:r,version:e})),"VERSION"))}const Ve="firebase-heartbeat-database",je=1,We="firebase-heartbeat-store";let Ye=null;function qe(){return Ye||(Ye=function(t,e){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=Te(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Te(o.result),t.oldVersion,t.newVersion,Te(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(Ve,je,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(We)}catch(C8){console.warn(C8)}}}).catch((t=>{throw ke.create("idb-open",{originalErrorMessage:t.message})}))),Ye}async function Xe(t,e){try{const n=(await qe()).transaction(We,"readwrite"),i=n.objectStore(We);await i.put(e,Ze(t)),await n.done}catch(C8){if(C8 instanceof zt)Re.warn(C8.message);else{const e=ke.create("idb-set",{originalErrorMessage:null===C8||void 0===C8?void 0:C8.message});Re.warn(e.message)}}}function Ze(t){return"".concat(t.name,"!").concat(t.options.appId)}class Ke{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Je(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qe();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Qe(),{heartbeatsToSend:n,unsentEntries:i}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),$e(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$e(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=At(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Qe(){return(new Date).toISOString().substring(0,10)}class Je{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Bt()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await qe()).transaction(We),n=await e.objectStore(We).get(Ze(t));return await e.done,n}catch(C8){if(C8 instanceof zt)Re.warn(C8.message);else{const e=ke.create("idb-get",{originalErrorMessage:null===C8||void 0===C8?void 0:C8.message});Re.warn(e.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function $e(t){return At(JSON.stringify({version:2,heartbeats:t})).length}var tn;tn="",Fe(new Qt("platform-logger",(t=>new Se(t)),"PRIVATE")),Fe(new Qt("heartbeat",(t=>new Ke(t)),"PRIVATE")),He(Ae,Ce,tn),He(Ae,Ce,"esm2017"),He("fire-js","");function en(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function nn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rn=nn,sn=new Gt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),on=new le("@firebase/auth");function an(t){if(on.logLevel<=ie.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];on.error("Auth (".concat(Be,"): ").concat(t),...n)}}function ln(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw pn(t,...n)}function hn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return pn(t,...n)}function cn(t,e,n){const i=Object.assign(Object.assign({},rn()),{[e]:n});return new Gt("auth","Firebase",i).create(e,{appName:t.name})}function un(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&ln(t,"argument-error"),cn(t,"argument-error","Type of ".concat(e.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function pn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if("string"!==typeof t){const e=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(e,...i)}return sn.create(t,...n)}function dn(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw pn(e,...i)}}function fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw an(e),new Error(e)}function mn(t,e){t||fn(e)}function gn(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function yn(){return"http:"===_n()||"https:"===_n()}function _n(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function vn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yn()||function(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Tn{constructor(t,e){this.shortDelay=t,this.longDelay=e,mn(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return vn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(t,e){mn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}class xn{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const In={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},bn=new Tn(3e4,6e4);function wn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sn(t,e,n,i){return An(t,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=Wt(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),xn.fetch()(Rn(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function An(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},In),e);try{const e=new On(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Nn(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Nn(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Nn(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw Nn(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw cn(t,a,o);ln(t,a)}}catch(C8){if(C8 instanceof zt)throw C8;ln(t,"network-request-failed",{message:String(C8)})}}async function Cn(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Sn(t,e,n,i,r);return"mfaPendingCredential"in s&&ln(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Rn(t,e,n,i){const r="".concat(e).concat(n,"?").concat(i);return t.config.emulator?En(t.config,r):"".concat(t.config.apiScheme,"://").concat(r)}function Dn(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class On{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(hn(this.auth,"network-request-failed"))),bn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=hn(t,e,i);return r.customData._tokenResponse=n,r}function Mn(t){return void 0!==t&&void 0!==t.enterprise}class Pn{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return Dn(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}async function Fn(t,e){return Sn(t,"GET","/v2/recaptchaConfig",wn(t,e))}function Ln(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(C8){}}function kn(t){return 1e3*Number(t)}function Un(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return an("JWT malformed, contained fewer than 3 sections"),null;try{const t=Ct(n);return t?JSON.parse(t):(an("Failed to decode base64 JWT payload"),null)}catch(C8){return an("Caught error parsing JWT payload as JSON",null===C8||void 0===C8?void 0:C8.toString()),null}}async function Bn(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return e;try{return await e}catch(C8){throw C8 instanceof zt&&function(t){let{code:e}=t;return e==="auth/".concat("user-disabled")||e==="auth/".concat("user-token-expired")}(C8)&&t.auth.currentUser===t&&await t.auth.signOut(),C8}}class zn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(C8){return void((null===C8||void 0===C8?void 0:C8.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Gn{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ln(this.lastLoginAt),this.creationTime=Ln(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hn(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Bn(t,async function(t,e){return Sn(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));dn(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=en(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}(t.providerData,o),l=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),c=!!l&&h,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gn(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,u)}class Vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){dn(t.idToken,"internal-error"),dn("undefined"!==typeof t.idToken,"internal-error"),dn("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):function(t){const e=Un(t);return dn(e,"internal-error"),dn("undefined"!==typeof e.exp,"internal-error"),dn("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return dn(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await An(t,{},(async()=>{const n=Wt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=Rn(t,i,"/v1/token","key=".concat(r)),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",xn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new Vn;return n&&(dn("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(dn("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(dn("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Vn,this.toJSON())}_performRefresh(){return fn("not implemented")}}function jn(t,e){dn("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class Wn{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=en(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Gn(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await Bn(this,this.stsTokenManager.getToken(this.auth,t));return dn(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Kt(t),i=await n.getIdToken(e),r=Un(i);dn(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ln(kn(r.auth_time)),issuedAtTime:Ln(kn(r.iat)),expirationTime:Ln(kn(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=Kt(t);await Hn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(dn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Wn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){dn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Hn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Bn(this,async function(t,e){return Sn(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,l,h;const c=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,p=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,d=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=e.createdAt)&&void 0!==l?l:void 0,y=null!==(h=e.lastLoginAt)&&void 0!==h?h:void 0,{uid:_,emailVerified:v,isAnonymous:T,providerData:E,stsTokenManager:x}=e;dn(_&&x,t,"internal-error");const I=Vn.fromJSON(this.name,x);dn("string"===typeof _,t,"internal-error"),jn(c,t.name),jn(u,t.name),dn("boolean"===typeof v,t,"internal-error"),dn("boolean"===typeof T,t,"internal-error"),jn(p,t.name),jn(d,t.name),jn(f,t.name),jn(m,t.name),jn(g,t.name),jn(y,t.name);const b=new Wn({uid:_,auth:t,email:u,emailVerified:v,displayName:c,isAnonymous:T,photoURL:d,phoneNumber:p,tenantId:f,stsTokenManager:I,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(b.providerData=E.map((t=>Object.assign({},t)))),m&&(b._redirectEventId=m),b}static async _fromIdTokenResponse(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Vn;i.updateFromServerResponse(e);const r=new Wn({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Hn(r),r}}const Yn=new Map;function qn(t){mn(t instanceof Function,"Expected a class definition");let e=Yn.get(t);return e?(mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yn.set(t,e),e)}class Xn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Xn.type="NONE";const Zn=Xn;function Kn(t,e,n){return"firebase".concat(":",t,":").concat(e,":").concat(n)}class Qn{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Kn(this.userKey,i.apiKey,r),this.fullPersistenceKey=Kn("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Wn._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!e.length)return new Qn(qn(Zn),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||qn(Zn);const s=Kn(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const e=await l._get(s);if(e){const n=Wn._fromJSON(t,e);l!==r&&(o=n),r=l;break}}catch(mT){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(mT){}}))),new Qn(r,t,n)):new Qn(r,t,n)}}function Jn(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ni(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($n(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ri(e))return"Blackberry";if(si(e))return"Webos";if(ti(e))return"Safari";if((e.includes("chrome/")||ei(e))&&!e.includes("edge/"))return"Chrome";if(ii(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function $n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/firefox\//i.test(t)}function ti(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt()).toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ei(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/crios\//i.test(t)}function ni(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iemobile/i.test(t)}function ii(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/android/i.test(t)}function ri(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/blackberry/i.test(t)}function si(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/webos/i.test(t)}function oi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ai(){return function(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function li(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();return oi(t)||ii(t)||si(t)||ri(t)||/windows phone/i.test(t)||ni(t)}function hi(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case"Browser":e=Jn(kt());break;case"Worker":e="".concat(Jn(kt()),"-").concat(t);break;default:e=t}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(e,"/","JsCore","/").concat(Be,"/").concat(i)}class ci{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(C8){i(C8)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(C8){e.reverse();for(const n of e)try{n()}catch(_9){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===C8||void 0===C8?void 0:C8.message})}}}class ui{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class pi{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fi(this),this.idTokenSubscription=new fi(this),this.beforeStateQueue=new ci(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=qn(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Qn.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(C8){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(C8){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(C8)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return dn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(C8){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Hn(t)}catch(C8){if((null===C8||void 0===C8?void 0:C8.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?Kt(t):null;return e&&dn(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return t&&dn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(qn(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t){return Sn(t,"GET","/v2/passwordPolicy",wn(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),e=new ui(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Gt("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Sn(t,"POST","/v2/accounts:revokeToken",wn(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&qn(t)||this._popupRedirectResolver;dn(e,this,"argument-error"),this.redirectPersistenceManager=await Qn.create(this,[qn(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(dn(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"===typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return dn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=hi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null===e||void 0===e?void 0:e.error)&&function(t){if(on.logLevel<=ie.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];on.warn("Auth (".concat(Be,"): ").concat(t),...n)}}("Error while retrieving App Check token: ".concat(e.error)),null===e||void 0===e?void 0:e.token}}function di(t){return Kt(t)}class fi{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new Xt(t,e);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return dn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gi(t){return mi.loadJS(t)}function yi(t){return"__".concat(t).concat(Math.floor(1e6*Math.random()))}class _i{constructor(t){this.type="recaptcha-enterprise",this.auth=di(t)}async verify(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e,n,i){const r=window.grecaptcha;Mn(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{Fn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Pn(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((r=>{if(!e&&Mn(window.grecaptcha))n(r,t,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let e=mi.recaptchaEnterpriseScript;0!==e.length&&(e+=r),gi(e).then((()=>{n(r,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function vi(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new _i(t);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ti(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await vi(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch((async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await vi(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)}))}function Ei(t,e,n){const i=di(t);dn(i._canInitEmulator,i,"emulator-config-failed"),dn(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=xi(e),{host:o,port:a}=function(t){const e=xi(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Ii(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Ii(e)}}}(e),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function xi(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ii(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class bi{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return fn("not implemented")}_getIdTokenResponse(t){return fn("not implemented")}_linkToIdToken(t,e){return fn("not implemented")}_getReauthenticationResolver(t){return fn("not implemented")}}async function wi(t,e){return Sn(t,"POST","/v1/accounts:signUp",e)}async function Si(t,e){return Cn(t,"POST","/v1/accounts:signInWithPassword",wn(t,e))}class Ai extends bi{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Ai(t,e,"password")}static _fromEmailAndCode(t,e){return new Ai(t,e,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Ti(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Si);case"emailLink":return async function(t,e){return Cn(t,"POST","/v1/accounts:signInWithEmailLink",wn(t,e))}(t,{email:this._email,oobCode:this._password});default:ln(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Ti(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wi);case"emailLink":return async function(t,e){return Cn(t,"POST","/v1/accounts:signInWithEmailLink",wn(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:ln(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Ci(t,e){return Cn(t,"POST","/v1/accounts:signInWithIdp",wn(t,e))}class Ri extends bi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ri(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ln("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=en(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Ri(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Ci(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Ci(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ci(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Wt(e)}return t}}const Di={USER_NOT_FOUND:"user-not-found"};class Oi extends bi{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Oi({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Oi({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Cn(t,"POST","/v1/accounts:signInWithPhoneNumber",wn(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Cn(t,"POST","/v1/accounts:signInWithPhoneNumber",wn(t,e));if(n.temporaryProof)throw Nn(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Cn(t,"POST","/v1/accounts:signInWithPhoneNumber",wn(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Di)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Oi({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Ni{constructor(t){var e,n,i,r,s,o;const a=Yt(qt(t)),l=null!==(e=a.apiKey)&&void 0!==e?e:null,h=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);dn(l&&h&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=h,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=Yt(qt(t)).link,n=e?Yt(qt(e)).deep_link_id:null,i=Yt(qt(t)).deep_link_id;return(i?Yt(qt(i)).link:null)||i||n||e||t}(t);try{return new Ni(e)}catch(mT){return null}}}class Mi{constructor(){this.providerId=Mi.PROVIDER_ID}static credential(t,e){return Ai._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ni.parseLink(e);return dn(n,"argument-error"),Ai._fromEmailAndCode(t,n.code,n.tenantId)}}Mi.PROVIDER_ID="password",Mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Pi{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Fi extends Pi{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Li extends Fi{constructor(){super("facebook.com")}static credential(t){return Ri._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Li.credentialFromTaggedObject(t)}static credentialFromError(t){return Li.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch(mT){return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com",Li.PROVIDER_ID="facebook.com";class ki extends Fi{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ri._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ki.credentialFromTaggedObject(t)}static credentialFromError(t){return ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ki.credential(n,i)}catch(mT){return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com",ki.PROVIDER_ID="google.com";class Ui extends Fi{constructor(){super("github.com")}static credential(t){return Ri._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ui.credentialFromTaggedObject(t)}static credentialFromError(t){return Ui.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch(mT){return null}}}Ui.GITHUB_SIGN_IN_METHOD="github.com",Ui.PROVIDER_ID="github.com";class Bi extends Fi{constructor(){super("twitter.com")}static credential(t,e){return Ri._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Bi.credentialFromTaggedObject(t)}static credentialFromError(t){return Bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Bi.credential(n,i)}catch(mT){return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com",Bi.PROVIDER_ID="twitter.com";class zi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Wn._fromIdTokenResponse(t,n,i),s=Gi(n);return new zi({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Gi(n);return new zi({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Gi(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Hi extends zt{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Hi.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Hi(t,e,n,i)}}function Vi(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hi._fromErrorAndOperation(t,n,e,i);throw n}))}async function ji(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Bn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zi._forOperation(t,"link",i)}async function Wi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=t,r="reauthenticate";try{const s=await Bn(t,Vi(i,r,e,t),n);dn(s.idToken,i,"internal-error");const o=Un(s.idToken);dn(o,i,"internal-error");const{sub:a}=o;return dn(t.uid===a,i,"user-mismatch"),zi._forOperation(t,r,s)}catch(C8){throw(null===C8||void 0===C8?void 0:C8.code)==="auth/".concat("user-not-found")&&ln(i,"user-mismatch"),C8}}async function Yi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="signIn",r=await Vi(t,i,e),s=await zi._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}new WeakMap;const qi="__sak";class Xi{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(qi,"1"),this.storage.removeItem(qi),Promise.resolve(!0)):Promise.resolve(!1)}catch(mT){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Zi extends Xi{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=kt();return ti(t)||oi(t)}()&&function(){try{return!(!window||window===window.top)}catch(C8){return!1}}(),this.fallbackToPolling=li(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);ai()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Zi.type="LOCAL";const Ki=Zi;class Qi extends Xi{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Qi.type="SESSION";const Ji=Qi;class $i{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new $i(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function tr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}$i.receivers=[];class er{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=tr("",20);i.port1.start();const h=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(h),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(h),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function nr(){return window}function ir(){return"undefined"!==typeof nr().WorkerGlobalScope&&"function"===typeof nr().importScripts}const rr="firebaseLocalStorageDb",sr="firebaseLocalStorage",or="fbase_key";class ar{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function lr(t,e){return t.transaction([sr],e?"readwrite":"readonly").objectStore(sr)}function hr(){const t=indexedDB.open(rr,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(sr,{keyPath:or})}catch(C8){n(C8)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(sr)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(rr);return new ar(t).toPromise()}(),e(await hr()))}))}))}async function cr(t,e,n){const i=lr(t,!0).put({[or]:e,value:n});return new ar(i).toPromise()}function ur(t,e){const n=lr(t,!0).delete(e);return new ar(n).toPromise()}class pr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await hr()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(C8){if(e++>3)throw C8;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ir()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$i._getInstance(ir()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new er(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(mT){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await hr();return await cr(t,qi,"1"),await ur(t,qi),!0}catch(mT){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>cr(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=lr(t,!1).get(e),i=await new ar(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>ur(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=lr(t,!1).getAll();return new ar(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pr.type="LOCAL";const dr=pr;yi("rcb"),new Tn(3e4,6e4);const fr="recaptcha";async function mr(t,e,n){var i;const r=await n.verify();try{let s;if(dn("string"===typeof r,t,"argument-error"),dn(n.type===fr,t,"argument-error"),s="string"===typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){dn("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Sn(t,"POST","/v2/accounts/mfaEnrollment:start",wn(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{dn("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;dn(n,t,"missing-multi-factor-info");const o=await function(t,e){return Sn(t,"POST","/v2/accounts/mfaSignIn:start",wn(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Sn(t,"POST","/v1/accounts:sendVerificationCode",wn(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}class gr{constructor(t){this.providerId=gr.PROVIDER_ID,this.auth=di(t)}verifyPhoneNumber(t,e){return mr(this.auth,t,Kt(e))}static credential(t,e){return Oi._fromVerification(t,e)}static credentialFromResult(t){const e=t;return gr.credentialFromTaggedObject(e)}static credentialFromError(t){return gr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Oi._fromTokenResponse(n,i):null}}function yr(t,e){return e?qn(e):(dn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}gr.PROVIDER_ID="phone",gr.PHONE_SIGN_IN_METHOD="phone";class _r extends bi{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ci(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ci(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ci(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function vr(t){return Yi(t.auth,new _r(t),t.bypassAuthState)}function Tr(t){const{auth:e,user:n}=t;return dn(n,e,"internal-error"),Wi(n,new _r(t),t.bypassAuthState)}async function Er(t){const{auth:e,user:n}=t;return dn(n,e,"internal-error"),ji(n,new _r(t),t.bypassAuthState)}class xr{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(C8){this.reject(C8)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(C8){this.reject(C8)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vr;case"linkViaPopup":case"linkViaRedirect":return Er;case"reauthViaPopup":case"reauthViaRedirect":return Tr;default:ln(this.auth,"internal-error")}}resolve(t){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ir=new Tn(2e3,1e4);class br extends xr{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,br.currentPopupAction&&br.currentPopupAction.cancel(),br.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return dn(t,this.auth,"internal-error"),t}async onExecution(){mn(1===this.filter.length,"Popup operations only handle one event");const t=tr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(hn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,br.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Ir.get())};t()}}br.currentPopupAction=null;const wr="pendingRedirect",Sr=new Map;class Ar extends xr{constructor(t,e){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=Sr.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Dr(e),i=Rr(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(C8){t=()=>Promise.reject(C8)}Sr.set(this.auth._key(),t)}return this.bypassAuthState||Sr.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Cr(t,e){Sr.set(t._key(),e)}function Rr(t){return qn(t._redirectPersistence)}function Dr(t){return Kn(wr,t.config.apiKey,t.name)}async function Or(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=di(t),r=yr(i,e),s=new Ar(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Nr{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pr(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Pr(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(hn(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mr(t))}saveEventToCache(t){this.cachedEventUids.add(Mr(t)),this.lastProcessedEventTime=Date.now()}}function Mr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Pr(t){let{type:e,error:n}=t;return"unknown"===e&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lr=/^https?/;async function kr(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t){return Sn(t,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(t);for(const n of e)try{if(Ur(n))return}catch(mT){}ln(t,"unauthorized-domain")}function Ur(t){const e=gn(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Lr.test(n))return!1;if(Fr.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Br=new Tn(3e4,6e4);function zr(){const t=nr().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t){return new Promise(((e,n)=>{var i,r,s;function o(){zr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zr(),n(hn(t,"network-request-failed"))},timeout:Br.get()})}if(null===(r=null===(i=nr().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=nr().gapi)||void 0===s?void 0:s.load)){const e=yi("iframefcb");return nr()[e]=()=>{gapi.load?o():n(hn(t,"network-request-failed"))},gi("".concat(mi.gapiScript,"?onload=").concat(e)).catch((t=>n(t)))}o()}})).catch((t=>{throw Hr=null,t}))}let Hr=null;const Vr=new Tn(5e3,15e3),jr="__/auth/iframe",Wr="emulator/auth/iframe",Yr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xr(t){const e=t.config;dn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?En(e,Wr):"https://".concat(t.config.authDomain,"/").concat(jr),i={apiKey:e.apiKey,appName:t.name,v:Be},r=qr.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(Wt(i).slice(1))}async function Zr(t){const e=await function(t){return Hr=Hr||Gr(t),Hr}(t),n=nr().gapi;return dn(n,t,"internal-error"),e.open({where:document.body,url:Xr(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yr,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=hn(t,"network-request-failed"),s=nr().setTimeout((()=>{i(r)}),Vr.get());function o(){nr().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}const Kr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(C8){}}}function Jr(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Kr),{width:i.toString(),height:r.toString(),top:s,left:o}),h=kt().toLowerCase();n&&(a=ei(h)?"_blank":n),$n(h)&&(e=e||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((t,e)=>{let[n,i]=e;return"".concat(t).concat(n,"=").concat(i,",")}),"");if(function(){var t;return oi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt())&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(h)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new Qr(null);const u=window.open(e||"",a,c);dn(u,t,"popup-blocked");try{u.focus()}catch(C8){}return new Qr(u)}const $r="__/auth/handler",ts="emulator/auth/handler",es=encodeURIComponent("fac");async function ns(t,e,n,i,r,s){dn(t.config.authDomain,t,"auth-domain-config-required"),dn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Be,eventId:r};if(e instanceof Pi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof Fi){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await t._getAppCheckToken(),h=l?"#".concat(es,"=").concat(encodeURIComponent(l)):"";return"".concat(function(t){let{config:e}=t;if(!e.emulator)return"https://".concat(e.authDomain,"/").concat($r);return En(e,ts)}(t),"?").concat(Wt(a).slice(1)).concat(h)}const is="webStorageSupport";const rs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ji,this._completeRedirectFn=Or,this._overrideRedirectResult=Cr}async _openPopup(t,e,n,i){var r;mn(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Jr(t,await ns(t,e,n,gn(),i),tr())}async _openRedirect(t,e,n,i){await this._originValidation(t);return function(t){nr().location.href=t}(await ns(t,e,n,gn(),i)),new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(mn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await Zr(t),n=new Nr(t);return e.register("authEvent",(e=>{dn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(is,{type:is},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[is];void 0!==r&&e(!!r),ln(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=kr(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return li()||ti()||oi()}};var ss="@firebase/auth",os="1.6.0";class as{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){dn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ls=Pt("authIdTokenMaxAge")||300;let hs=null;function cs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();const e=Le(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=Le(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(Vt(n.getOptions(),null!==e&&void 0!==e?e:{}))return t;ln(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:rs,persistence:[dr,Ki,Ji]}),i=Pt("authTokenSyncURL");if(i){const t=(r=i,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>ls)return;const i=null===e||void 0===e?void 0:e.token;hs!==i&&(hs=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(t,e,n){Kt(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(t,e,n,i){Kt(t).onIdTokenChanged(e,n,i)}(n,(e=>t(e)))}var r;const s=Ot("auth");return s&&Ei(n,"http://".concat(s)),n}var us;!function(t){mi=t}({loadJS:t=>new Promise(((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=hn("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),us="Browser",Fe(new Qt("auth",((t,e)=>{let{options:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;dn(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:us,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hi(us)},h=new pi(i,r,s,l);return function(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qn);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}(h,n),h}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),Fe(new Qt("auth-internal",(t=>(t=>new as(t))(di(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),He(ss,os,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(us)),He(ss,os,"esm2017");var ps=n(579);let ds=!1;const fs=()=>{const t=cs(),n=snt()[1],i=()=>{!function(t,e,n,i){Kt(t).onAuthStateChanged(e,n,i)}(t,(t=>{const e=t?{...t}:null;n({type:"UPDATE_USER",payload:e})}))};return(0,e.useEffect)((()=>{ds||(i(),ds=!0)})),(0,ps.jsx)(ps.Fragment,{})},ms="135",gs={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ys=0,_s=1,vs=2,Ts=1,Es=2,xs=3,Is=0,bs=1,ws=2,Ss=0,As=1,Cs=2,Rs=3,Ds=4,Os=5,Ns=100,Ms=101,Ps=102,Fs=103,Ls=104,ks=200,Us=201,Bs=202,zs=203,Gs=204,Hs=205,Vs=206,js=207,Ws=208,Ys=209,qs=210,Xs=0,Zs=1,Ks=2,Qs=3,Js=4,$s=5,to=6,eo=7,no=0,io=1,ro=2,so=0,oo=1,ao=2,lo=3,ho=4,co=5,uo=301,po=302,fo=303,mo=304,go=306,yo=307,_o=1e3,vo=1001,To=1002,Eo=1003,xo=1004,Io=1005,bo=1006,wo=1007,So=1008,Ao=1009,Co=1010,Ro=1011,Do=1012,Oo=1013,No=1014,Mo=1015,Po=1016,Fo=1017,Lo=1018,ko=1019,Uo=1020,Bo=1021,zo=1022,Go=1023,Ho=1024,Vo=1025,jo=Go,Wo=1026,Yo=1027,qo=1028,Xo=1029,Zo=1030,Ko=1031,Qo=1032,Jo=1033,$o=33776,ta=33777,ea=33778,na=33779,ia=35840,ra=35841,sa=35842,oa=35843,aa=36196,la=37492,ha=37496,ca=37808,ua=37809,pa=37810,da=37811,fa=37812,ma=37813,ga=37814,ya=37815,_a=37816,va=37817,Ta=37818,Ea=37819,xa=37820,Ia=37821,ba=36492,wa=37840,Sa=37841,Aa=37842,Ca=37843,Ra=37844,Da=37845,Oa=37846,Na=37847,Ma=37848,Pa=37849,Fa=37850,La=37851,ka=37852,Ua=37853,Ba=2300,za=2301,Ga=2302,Ha=2400,Va=2401,ja=2402,Wa=2500,Ya=3e3,qa=3001,Xa=3007,Za=3002,Ka=3004,Qa=3005,Ja=3006,$a=3201,tl=0,el=1,nl=7680,il=35044,rl=35048,sl="300 es";class ol{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const al=[];for(let n=0;n<256;n++)al[n]=(n<16?"0":"")+n.toString(16);let ll=1234567;const hl=Math.PI/180,cl=180/Math.PI;function ul(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(al[255&t]+al[t>>8&255]+al[t>>16&255]+al[t>>24&255]+"-"+al[255&e]+al[e>>8&255]+"-"+al[e>>16&15|64]+al[e>>24&255]+"-"+al[63&n|128]+al[n>>8&255]+"-"+al[n>>16&255]+al[n>>24&255]+al[255&i]+al[i>>8&255]+al[i>>16&255]+al[i>>24&255]).toUpperCase()}function pl(t,e,n){return Math.max(e,Math.min(n,t))}function dl(t,e){return(t%e+e)%e}function fl(t,e,n){return(1-n)*t+n*e}function ml(t){return 0===(t&t-1)&&0!==t}function gl(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function yl(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var _l=Object.freeze({__proto__:null,DEG2RAD:hl,RAD2DEG:cl,generateUUID:ul,clamp:pl,euclideanModulo:dl,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:fl,damp:function(t,e,n,i){return fl(t,e,1-Math.exp(-n*i))},pingpong:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(dl(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(ll=t%2147483647),ll=16807*ll%2147483647,(ll-1)/2147483646},degToRad:function(t){return t*hl},radToDeg:function(t){return t*cl},isPowerOfTwo:ml,ceilPowerOfTwo:gl,floorPowerOfTwo:yl,setQuaternionFromProperEuler:function(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),h=s((e+i)/2),c=o((e+i)/2),u=s((e-i)/2),p=o((e-i)/2),d=s((i-e)/2),f=o((i-e)/2);switch(r){case"XYX":t.set(a*c,l*u,l*p,a*h);break;case"YZY":t.set(l*p,a*c,l*u,a*h);break;case"ZXZ":t.set(l*u,l*p,a*c,a*h);break;case"XZX":t.set(a*c,l*f,l*d,a*h);break;case"YXY":t.set(l*d,a*c,l*f,a*h);break;case"ZYZ":t.set(l*f,l*d,a*c,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class vl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}vl.prototype.isVector2=!0;class Tl{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l){const h=this.elements;return h[0]=t,h[1]=i,h[2]=o,h[3]=e,h[4]=r,h[5]=a,h[6]=n,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],h=n[4],c=n[7],u=n[2],p=n[5],d=n[8],f=i[0],m=i[3],g=i[6],y=i[1],_=i[4],v=i[7],T=i[2],E=i[5],x=i[8];return r[0]=s*f+o*y+a*T,r[3]=s*m+o*_+a*E,r[6]=s*g+o*v+a*x,r[1]=l*f+h*y+c*T,r[4]=l*m+h*_+c*E,r[7]=l*g+h*v+c*x,r[2]=u*f+p*y+d*T,r[5]=u*m+p*_+d*E,r[8]=u*g+p*v+d*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8];return e*s*h-e*o*l-n*r*h+n*o*a+i*r*l-i*s*a}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=h*s-o*l,u=o*a-h*r,p=l*r-s*a,d=e*c+n*u+i*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const f=1/d;return t[0]=c*f,t[1]=(i*l-h*n)*f,t[2]=(o*n-i*s)*f,t[3]=u*f,t[4]=(h*e-i*a)*f,t[5]=(i*r-o*e)*f,t[6]=p*f,t[7]=(n*a-l*e)*f,t[8]=(s*e-n*r)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],h=i[7];return i[0]=e*r+n*a,i[3]=e*s+n*l,i[6]=e*o+n*h,i[1]=-n*r+e*a,i[4]=-n*s+e*l,i[7]=-n*o+e*h,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function El(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Tl.prototype.isMatrix3=!0;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function xl(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Il(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=3735928559^e,i=1103547991^e;for(let r,s=0;s<t.length;s++)r=t.charCodeAt(s),n=Math.imul(n^r,2654435761),i=Math.imul(i^r,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&i)+(n>>>0)}let bl;class wl{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===bl&&(bl=xl("canvas")),bl.width=t.width,bl.height=t.height;const n=bl.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=bl}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let Sl=0;class Al extends ol{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al.DEFAULT_IMAGE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Al.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vo,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vo,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:bo,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:So,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Go,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ao,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ya;super(),Object.defineProperty(this,"id",{value:Sl++}),this.uuid=ul(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new vl(0,0),this.repeat=new vl(1,1),this.center=new vl(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tl,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=ul()),!e&&void 0===t.images[i.uuid]){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Cl(i[t].image)):e.push(Cl(i[t]))}else e=Cl(i);t.images[i.uuid]={uuid:i.uuid,url:e}}n.image=i.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case _o:t.x=t.x-Math.floor(t.x);break;case vo:t.x=t.x<0?0:1;break;case To:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case _o:t.y=t.y-Math.floor(t.y);break;case vo:t.y=t.y<0?0:1;break;case To:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function Cl(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?wl.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Al.DEFAULT_IMAGE=void 0,Al.DEFAULT_MAPPING=300,Al.prototype.isTexture=!0;class Rl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,o=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],p=a[5],d=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(h-u)<s&&Math.abs(c-f)<s&&Math.abs(d-m)<s){if(Math.abs(h+u)<o&&Math.abs(c+f)<o&&Math.abs(d+m)<o&&Math.abs(l+p+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(p+1)/2,y=(g+1)/2,_=(h+u)/4,v=(c+f)/4,T=(d+m)/4;return t>a&&t>y?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=_/n,r=v/n):a>y?a<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=_/i,r=T/i):y<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=v/r,i=T/r),this.set(n,i,r,e),this}let y=Math.sqrt((m-d)*(m-d)+(c-f)*(c-f)+(u-h)*(u-h));return Math.abs(y)<.001&&(y=1),this.x=(m-d)/y,this.y=(c-f)/y,this.z=(u-h)/y,this.w=Math.acos((l+p+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Rl.prototype.isVector4=!0;class Dl extends ol{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Rl(0,0,t,e),this.scissorTest=!1,this.viewport=new Rl(0,0,t,e),this.texture=new Al(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:bo,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Dl.prototype.isWebGLRenderTarget=!0;(class extends Dl{constructor(t,e,n){super(t,e);const i=this.texture;this.texture=[];for(let r=0;r<n;r++)this.texture[r]=i.clone()}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class Ol extends Dl{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(t,e,n),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,this.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(t){return super.copy.call(this,t),this.samples=t.samples,this.useRenderToTexture=t.useRenderToTexture,this.useRenderbuffer=t.useRenderbuffer,this}}Ol.prototype.isWebGLMultisampleRenderTarget=!0;class Nl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],h=n[i+2],c=n[i+3];const u=r[s+0],p=r[s+1],d=r[s+2],f=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=p,t[e+2]=d,void(t[e+3]=f);if(c!==f||a!==u||l!==p||h!==d){let t=1-o;const e=a*u+l*p+h*d+c*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*n;if(a=a*t+u*r,l=l*t+p*r,h=h*t+d*r,c=c*t+f*r,t===1-o){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,r,s){const o=n[i],a=n[i+1],l=n[i+2],h=n[i+3],c=r[s],u=r[s+1],p=r[s+2],d=r[s+3];return t[e]=o*d+h*c+a*p-l*u,t[e+1]=a*d+h*u+l*c-o*p,t[e+2]=l*d+h*p+o*u-a*c,t[e+3]=h*d-o*c-a*u-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),h=o(i/2),c=o(r/2),u=a(n/2),p=a(i/2),d=a(r/2);switch(s){case"XYZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"YXZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"ZXY":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"ZYX":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"YZX":this._x=u*h*c+l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c-u*p*d;break;case"XZY":this._x=u*h*c-l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c+u*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=n+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>o&&n>c){const t=2*Math.sqrt(1+n-o-c);this._w=(h-a)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(o>c){const t=2*Math.sqrt(1+o-n-c);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-n-o);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(pl(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,h=e._w;return this._x=n*h+s*o+i*l-r*a,this._y=i*h+s*a+r*o-n*l,this._z=r*h+s*l+n*a-i*o,this._w=s*h-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=s*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Nl.prototype.isQuaternion=!0;class Ml{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Fl.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Fl.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,h=a*n+o*e-r*i,c=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+h*-o-c*-s,this.y=h*a+u*-s+c*-r-l*-o,this.z=c*a+u*-o+l*-s-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Pl.copy(this).projectOnVector(t),this.sub(Pl)}reflect(t){return this.sub(Pl.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(pl(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Ml.prototype.isVector3=!0;const Pl=new Ml,Fl=new Nl;class Ll{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml(-1/0,-1/0,-1/0);this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){const l=t[a],h=t[a+1],c=t[a+2];l<e&&(e=l),h<n&&(n=h),c<i&&(i=c),l>r&&(r=l),h>s&&(s=h),c>o&&(o=c)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){const l=t.getX(a),h=t.getY(a),c=t.getZ(a);l<e&&(e=l),h<n&&(n=h),c<i&&(i=c),l>r&&(r=l),h>s&&(s=h),c>o&&(o=c)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Ul.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Bl.copy(e.boundingBox),Bl.applyMatrix4(t.matrixWorld),this.union(Bl));const n=t.children;for(let i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ul),Ul.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Yl),ql.subVectors(this.max,Yl),zl.subVectors(t.a,Yl),Gl.subVectors(t.b,Yl),Hl.subVectors(t.c,Yl),Vl.subVectors(Gl,zl),jl.subVectors(Hl,Gl),Wl.subVectors(zl,Hl);let e=[0,-Vl.z,Vl.y,0,-jl.z,jl.y,0,-Wl.z,Wl.y,Vl.z,0,-Vl.x,jl.z,0,-jl.x,Wl.z,0,-Wl.x,-Vl.y,Vl.x,0,-jl.y,jl.x,0,-Wl.y,Wl.x,0];return!!Kl(e,zl,Gl,Hl,ql)&&(e=[1,0,0,0,1,0,0,0,1],!!Kl(e,zl,Gl,Hl,ql)&&(Xl.crossVectors(Vl,jl),e=[Xl.x,Xl.y,Xl.z],Kl(e,zl,Gl,Hl,ql)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ul.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Ul).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(kl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),kl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),kl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),kl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),kl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),kl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),kl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),kl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(kl)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Ll.prototype.isBox3=!0;const kl=[new Ml,new Ml,new Ml,new Ml,new Ml,new Ml,new Ml,new Ml],Ul=new Ml,Bl=new Ll,zl=new Ml,Gl=new Ml,Hl=new Ml,Vl=new Ml,jl=new Ml,Wl=new Ml,Yl=new Ml,ql=new Ml,Xl=new Ml,Zl=new Ml;function Kl(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Zl.fromArray(t,s);const o=r.x*Math.abs(Zl.x)+r.y*Math.abs(Zl.y)+r.z*Math.abs(Zl.z),a=e.dot(Zl),l=n.dot(Zl),h=i.dot(Zl);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>o)return!1}return!0}const Ql=new Ll,Jl=new Ml,$l=new Ml,th=new Ml;class eh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Ql.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){th.subVectors(t,this.center);const e=th.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(th.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return $l.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Jl.copy(t.center).add($l)),this.expandByPoint(Jl.copy(t.center).sub($l)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const nh=new Ml,ih=new Ml,rh=new Ml,sh=new Ml,oh=new Ml,ah=new Ml,lh=new Ml;class hh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml(0,0,-1);this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,nh)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=nh.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(nh.copy(this.direction).multiplyScalar(e).add(this.origin),nh.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){ih.copy(t).add(e).multiplyScalar(.5),rh.copy(e).sub(t).normalize(),sh.copy(this.origin).sub(ih);const r=.5*t.distanceTo(e),s=-this.direction.dot(rh),o=sh.dot(this.direction),a=-sh.dot(rh),l=sh.lengthSq(),h=Math.abs(1-s*s);let c,u,p,d;if(h>0)if(c=s*a-o,u=s*o-a,d=r*h,c>=0)if(u>=-d)if(u<=d){const t=1/h;c*=t,u*=t,p=c*(c+s*u+2*o)+u*(s*c+u+2*a)+l}else u=r,c=Math.max(0,-(s*u+o)),p=-c*c+u*(u+2*a)+l;else u=-r,c=Math.max(0,-(s*u+o)),p=-c*c+u*(u+2*a)+l;else u<=-d?(c=Math.max(0,-(-s*r+o)),u=c>0?-r:Math.min(Math.max(-r,-a),r),p=-c*c+u*(u+2*a)+l):u<=d?(c=0,u=Math.min(Math.max(-r,-a),r),p=u*(u+2*a)+l):(c=Math.max(0,-(s*r+o)),u=c>0?r:Math.min(Math.max(-r,-a),r),p=-c*c+u*(u+2*a)+l);else u=s>0?-r:r,c=Math.max(0,-(s*u+o)),p=-c*c+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),i&&i.copy(rh).multiplyScalar(u).add(ih),p}intersectSphere(t,e){nh.subVectors(t.center,this.origin);const n=nh.dot(this.direction),i=nh.dot(nh)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),h>=0?(r=(t.min.y-u.y)*h,s=(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,s=(t.min.y-u.y)*h),n>s||r>i?null:((r>n||n!==n)&&(n=r),(s<i||i!==i)&&(i=s),c>=0?(o=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(o=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),n>a||o>i?null:((o>n||n!==n)&&(n=o),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,nh)}intersectTriangle(t,e,n,i,r){oh.subVectors(e,t),ah.subVectors(n,t),lh.crossVectors(oh,ah);let s,o=this.direction.dot(lh);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}sh.subVectors(this.origin,t);const a=s*this.direction.dot(ah.crossVectors(sh,ah));if(a<0)return null;const l=s*this.direction.dot(oh.cross(sh));if(l<0)return null;if(a+l>o)return null;const h=-s*sh.dot(lh);return h<0?null:this.at(h/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ch{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ch).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/uh.setFromMatrixColumn(t,0).length(),r=1/uh.setFromMatrixColumn(t,1).length(),s=1/uh.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=s*h,n=s*c,i=o*h,r=o*c;e[0]=a*h,e[4]=-a*c,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-o*a,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*a}else if("YXZ"===t.order){const t=a*h,n=a*c,i=l*h,r=l*c;e[0]=t+r*o,e[4]=i*o-n,e[8]=s*l,e[1]=s*c,e[5]=s*h,e[9]=-o,e[2]=n*o-i,e[6]=r+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*h,n=a*c,i=l*h,r=l*c;e[0]=t-r*o,e[4]=-s*c,e[8]=i+n*o,e[1]=n+i*o,e[5]=s*h,e[9]=r-t*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*h,n=s*c,i=o*h,r=o*c;e[0]=a*h,e[4]=i*l-n,e[8]=t*l+r,e[1]=a*c,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*h,e[4]=r-t*c,e[8]=i*c+n,e[1]=c,e[5]=s*h,e[9]=-o*h,e[2]=-l*h,e[6]=n*c+i,e[10]=t-r*c}else if("XZY"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*h,e[4]=-c,e[8]=l*h,e[1]=t*c+r,e[5]=s*h,e[9]=n*c-i,e[2]=i*c-n,e[6]=o*h,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(dh,t,fh)}lookAt(t,e,n){const i=this.elements;return yh.subVectors(t,e),0===yh.lengthSq()&&(yh.z=1),yh.normalize(),mh.crossVectors(n,yh),0===mh.lengthSq()&&(1===Math.abs(n.z)?yh.x+=1e-4:yh.z+=1e-4,yh.normalize(),mh.crossVectors(n,yh)),mh.normalize(),gh.crossVectors(yh,mh),i[0]=mh.x,i[4]=gh.x,i[8]=yh.x,i[1]=mh.y,i[5]=gh.y,i[9]=yh.y,i[2]=mh.z,i[6]=gh.z,i[10]=yh.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],h=n[1],c=n[5],u=n[9],p=n[13],d=n[2],f=n[6],m=n[10],g=n[14],y=n[3],_=n[7],v=n[11],T=n[15],E=i[0],x=i[4],I=i[8],b=i[12],w=i[1],S=i[5],A=i[9],C=i[13],R=i[2],D=i[6],O=i[10],N=i[14],M=i[3],P=i[7],F=i[11],L=i[15];return r[0]=s*E+o*w+a*R+l*M,r[4]=s*x+o*S+a*D+l*P,r[8]=s*I+o*A+a*O+l*F,r[12]=s*b+o*C+a*N+l*L,r[1]=h*E+c*w+u*R+p*M,r[5]=h*x+c*S+u*D+p*P,r[9]=h*I+c*A+u*O+p*F,r[13]=h*b+c*C+u*N+p*L,r[2]=d*E+f*w+m*R+g*M,r[6]=d*x+f*S+m*D+g*P,r[10]=d*I+f*A+m*O+g*F,r[14]=d*b+f*C+m*N+g*L,r[3]=y*E+_*w+v*R+T*M,r[7]=y*x+_*S+v*D+T*P,r[11]=y*I+_*A+v*O+T*F,r[15]=y*b+_*C+v*N+T*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],h=t[2],c=t[6],u=t[10],p=t[14];return t[3]*(+r*a*c-i*l*c-r*o*u+n*l*u+i*o*p-n*a*p)+t[7]*(+e*a*p-e*l*u+r*s*u-i*s*p+i*l*h-r*a*h)+t[11]*(+e*l*c-e*o*p-r*s*c+n*s*p+r*o*h-n*l*h)+t[15]*(-i*o*h-e*a*c+e*o*u+i*s*c-n*s*u+n*a*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=t[9],u=t[10],p=t[11],d=t[12],f=t[13],m=t[14],g=t[15],y=c*m*l-f*u*l+f*a*p-o*m*p-c*a*g+o*u*g,_=d*u*l-h*m*l-d*a*p+s*m*p+h*a*g-s*u*g,v=h*f*l-d*c*l+d*o*p-s*f*p-h*o*g+s*c*g,T=d*c*a-h*f*a-d*o*u+s*f*u+h*o*m-s*c*m,E=e*y+n*_+i*v+r*T;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/E;return t[0]=y*x,t[1]=(f*u*r-c*m*r-f*i*p+n*m*p+c*i*g-n*u*g)*x,t[2]=(o*m*r-f*a*r+f*i*l-n*m*l-o*i*g+n*a*g)*x,t[3]=(c*a*r-o*u*r-c*i*l+n*u*l+o*i*p-n*a*p)*x,t[4]=_*x,t[5]=(h*m*r-d*u*r+d*i*p-e*m*p-h*i*g+e*u*g)*x,t[6]=(d*a*r-s*m*r-d*i*l+e*m*l+s*i*g-e*a*g)*x,t[7]=(s*u*r-h*a*r+h*i*l-e*u*l-s*i*p+e*a*p)*x,t[8]=v*x,t[9]=(d*c*r-h*f*r-d*n*p+e*f*p+h*n*g-e*c*g)*x,t[10]=(s*f*r-d*o*r+d*n*l-e*f*l-s*n*g+e*o*g)*x,t[11]=(h*o*r-s*c*r-h*n*l+e*c*l+s*n*p-e*o*p)*x,t[12]=T*x,t[13]=(h*f*i-d*c*i+d*n*u-e*f*u-h*n*m+e*c*m)*x,t[14]=(d*o*i-s*f*i-d*n*a+e*f*a+s*n*m-e*o*m)*x,t[15]=(s*c*i-h*o*i+h*n*a-e*c*a-s*n*u+e*o*u)*x,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,h=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,h*o+n,h*a-i*s,0,l*a-i*o,h*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,h=s+s,c=o+o,u=r*l,p=r*h,d=r*c,f=s*h,m=s*c,g=o*c,y=a*l,_=a*h,v=a*c,T=n.x,E=n.y,x=n.z;return i[0]=(1-(f+g))*T,i[1]=(p+v)*T,i[2]=(d-_)*T,i[3]=0,i[4]=(p-v)*E,i[5]=(1-(u+g))*E,i[6]=(m+y)*E,i[7]=0,i[8]=(d+_)*x,i[9]=(m-y)*x,i[10]=(1-(u+f))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=uh.set(i[0],i[1],i[2]).length();const s=uh.set(i[4],i[5],i[6]).length(),o=uh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],ph.copy(this);const a=1/r,l=1/s,h=1/o;return ph.elements[0]*=a,ph.elements[1]*=a,ph.elements[2]*=a,ph.elements[4]*=l,ph.elements[5]*=l,ph.elements[6]*=l,ph.elements[8]*=h,ph.elements[9]*=h,ph.elements[10]*=h,e.setFromRotationMatrix(ph),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*r/(e-t),l=2*r/(n-i),h=(e+t)/(e-t),c=(n+i)/(n-i),u=-(s+r)/(s-r),p=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){const o=this.elements,a=1/(e-t),l=1/(n-i),h=1/(s-r),c=(e+t)*a,u=(n+i)*l,p=(s+r)*h;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}ch.prototype.isMatrix4=!0;const uh=new Ml,ph=new ch,dh=new Ml(0,0,0),fh=new Ml(1,1,1),mh=new Ml,gh=new Ml,yh=new Ml,_h=new ch,vh=new Nl;class Th{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Th.DefaultOrder;this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],h=i[9],c=i[2],u=i[6],p=i[10];switch(e){case"XYZ":this._y=Math.asin(pl(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-pl(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(pl(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-pl(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,p),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(pl(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-pl(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return _h.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_h,e,n)}setFromVector3(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}reorder(t){return vh.setFromEuler(this),this.setFromQuaternion(vh,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Ml(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Th.prototype.isEuler=!0,Th.DefaultOrder="XYZ",Th.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Eh{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let xh=0;const Ih=new Ml,bh=new Nl,wh=new ch,Sh=new Ml,Ah=new Ml,Ch=new Ml,Rh=new Nl,Dh=new Ml(1,0,0),Oh=new Ml(0,1,0),Nh=new Ml(0,0,1),Mh={type:"added"},Ph={type:"removed"};class Fh extends ol{constructor(){super(),Object.defineProperty(this,"id",{value:xh++}),this.uuid=ul(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fh.DefaultUp.clone();const t=new Ml,e=new Th,n=new Nl,i=new Ml(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ch},normalMatrix:{value:new Tl}}),this.matrix=new ch,this.matrixWorld=new ch,this.matrixAutoUpdate=Fh.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Eh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return bh.setFromAxisAngle(t,e),this.quaternion.multiply(bh),this}rotateOnWorldAxis(t,e){return bh.setFromAxisAngle(t,e),this.quaternion.premultiply(bh),this}rotateX(t){return this.rotateOnAxis(Dh,t)}rotateY(t){return this.rotateOnAxis(Oh,t)}rotateZ(t){return this.rotateOnAxis(Nh,t)}translateOnAxis(t,e){return Ih.copy(t).applyQuaternion(this.quaternion),this.position.add(Ih.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Dh,t)}translateY(t){return this.translateOnAxis(Oh,t)}translateZ(t){return this.translateOnAxis(Nh,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(wh.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Sh.copy(t):Sh.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ah.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wh.lookAt(Ah,Sh,this.up):wh.lookAt(Sh,Ah,this.up),this.quaternion.setFromRotationMatrix(wh),i&&(wh.extractRotation(i.matrixWorld),bh.setFromRotationMatrix(wh),this.quaternion.premultiply(bh.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Mh)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Ph)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Ph)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),wh.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),wh.multiply(t.parent.matrixWorld)),t.applyMatrix4(wh),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ah,t,Ch),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ah,Rh,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),o=s(t.images),a=s(t.shapes),l=s(t.skeletons),h=s(t.animations);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),h.length>0&&(n.animations=h)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}Fh.DefaultUp=new Ml(0,1,0),Fh.DefaultMatrixAutoUpdate=!0,Fh.prototype.isObject3D=!0;const Lh=new Ml,kh=new Ml,Uh=new Ml,Bh=new Ml,zh=new Ml,Gh=new Ml,Hh=new Ml,Vh=new Ml,jh=new Ml,Wh=new Ml;class Yh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ml;this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Lh.subVectors(t,e),i.cross(Lh);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Lh.subVectors(i,e),kh.subVectors(n,e),Uh.subVectors(t,e);const s=Lh.dot(Lh),o=Lh.dot(kh),a=Lh.dot(Uh),l=kh.dot(kh),h=kh.dot(Uh),c=s*l-o*o;if(0===c)return r.set(-2,-1,-1);const u=1/c,p=(l*a-o*h)*u,d=(s*h-o*a)*u;return r.set(1-p-d,d,p)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Bh),Bh.x>=0&&Bh.y>=0&&Bh.x+Bh.y<=1}static getUV(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,Bh),a.set(0,0),a.addScaledVector(r,Bh.x),a.addScaledVector(s,Bh.y),a.addScaledVector(o,Bh.z),a}static isFrontFacing(t,e,n,i){return Lh.subVectors(n,e),kh.subVectors(t,e),Lh.cross(kh).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Lh.subVectors(this.c,this.b),kh.subVectors(this.a,this.b),.5*Lh.cross(kh).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Yh.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Yh.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return Yh.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Yh.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Yh.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,o;zh.subVectors(i,n),Gh.subVectors(r,n),Vh.subVectors(t,n);const a=zh.dot(Vh),l=Gh.dot(Vh);if(a<=0&&l<=0)return e.copy(n);jh.subVectors(t,i);const h=zh.dot(jh),c=Gh.dot(jh);if(h>=0&&c<=h)return e.copy(i);const u=a*c-h*l;if(u<=0&&a>=0&&h<=0)return s=a/(a-h),e.copy(n).addScaledVector(zh,s);Wh.subVectors(t,r);const p=zh.dot(Wh),d=Gh.dot(Wh);if(d>=0&&p<=d)return e.copy(r);const f=p*l-a*d;if(f<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(Gh,o);const m=h*d-p*c;if(m<=0&&c-h>=0&&p-d>=0)return Hh.subVectors(r,i),o=(c-h)/(c-h+(p-d)),e.copy(i).addScaledVector(Hh,o);const g=1/(m+f+u);return s=f*g,o=u*g,e.copy(n).addScaledVector(zh,s).addScaledVector(Gh,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let qh=0;class Xh extends ol{constructor(){super(),Object.defineProperty(this,"id",{value:qh++}),this.uuid=ul(),this.name="",this.type="Material",this.fog=!0,this.blending=As,this.side=Is,this.vertexColors=!1,this.opacity=1,this.format=Go,this.transparent=!1,this.blendSrc=Gs,this.blendDst=Hs,this.blendEquation=Ns,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Qs,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nl,this.stencilZFail=nl,this.stencilZPass=nl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==As&&(n.blending=this.blending),this.side!==Is&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Go&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Xh.prototype.isMaterial=!0;const Zh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kh={h:0,s:0,l:0},Qh={h:0,s:0,l:0};function Jh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function $h(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function tc(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class ec{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=dl(t,1),e=pl(e,0,1),n=pl(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Jh(r,i,t+1/3),this.g=Jh(r,i,t),this.b=Jh(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=Zh[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=$h(t.r),this.g=$h(t.g),this.b=$h(t.b),this}copyLinearToSRGB(t){return this.r=tc(t.r),this.g=tc(t.g),this.b=tc(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),s=Math.min(e,n,i);let o,a;const l=(s+r)/2;if(s===r)o=0,a=0;else{const t=r-s;switch(a=l<=.5?t/(r+s):t/(2-r-s),r){case e:o=(n-i)/t+(n<i?6:0);break;case n:o=(i-e)/t+2;break;case i:o=(e-n)/t+4}o/=6}return t.h=o,t.s=a,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(Kh),Kh.h+=t,Kh.s+=e,Kh.l+=n,this.setHSL(Kh.h,Kh.s,Kh.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Kh),t.getHSL(Qh);const n=fl(Kh.h,Qh.h,e),i=fl(Kh.s,Qh.s,e),r=fl(Kh.l,Qh.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ec.NAMES=Zh,ec.prototype.isColor=!0,ec.prototype.r=1,ec.prototype.g=1,ec.prototype.b=1;class nc extends Xh{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new ec(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=no,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}nc.prototype.isMeshBasicMaterial=!0;const ic=new Ml,rc=new vl;class sc{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=il,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new ec),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new vl),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Ml),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Rl),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)rc.fromBufferAttribute(this,e),rc.applyMatrix3(t),this.setXY(e,rc.x,rc.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)ic.fromBufferAttribute(this,e),ic.applyMatrix3(t),this.setXYZ(e,ic.x,ic.y,ic.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)ic.x=this.getX(e),ic.y=this.getY(e),ic.z=this.getZ(e),ic.applyMatrix4(t),this.setXYZ(e,ic.x,ic.y,ic.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ic.x=this.getX(e),ic.y=this.getY(e),ic.z=this.getZ(e),ic.applyNormalMatrix(t),this.setXYZ(e,ic.x,ic.y,ic.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ic.x=this.getX(e),ic.y=this.getY(e),ic.z=this.getZ(e),ic.transformDirection(t),this.setXYZ(e,ic.x,ic.y,ic.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==il&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}sc.prototype.isBufferAttribute=!0;class oc extends sc{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class ac extends sc{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class extends sc{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class lc extends sc{constructor(t,e,n){super(new Float32Array(t),e,n)}}let hc=0;const cc=new ch,uc=new Fh,pc=new Ml,dc=new Ll,fc=new Ll,mc=new Ml;class gc extends ol{constructor(){super(),Object.defineProperty(this,"id",{value:hc++}),this.uuid=ul(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(El(t)>65535?ac:oc)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Tl).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return cc.makeRotationFromQuaternion(t),this.applyMatrix4(cc),this}rotateX(t){return cc.makeRotationX(t),this.applyMatrix4(cc),this}rotateY(t){return cc.makeRotationY(t),this.applyMatrix4(cc),this}rotateZ(t){return cc.makeRotationZ(t),this.applyMatrix4(cc),this}translate(t,e,n){return cc.makeTranslation(t,e,n),this.applyMatrix4(cc),this}scale(t,e,n){return cc.makeScale(t,e,n),this.applyMatrix4(cc),this}lookAt(t){return uc.lookAt(t),uc.updateMatrix(),this.applyMatrix4(uc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pc).negate(),this.translate(pc.x,pc.y,pc.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new lc(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ll);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ml(-1/0,-1/0,-1/0),new Ml(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const t=e[n];dc.setFromBufferAttribute(t),this.morphTargetsRelative?(mc.addVectors(this.boundingBox.min,dc.min),this.boundingBox.expandByPoint(mc),mc.addVectors(this.boundingBox.max,dc.max),this.boundingBox.expandByPoint(mc)):(this.boundingBox.expandByPoint(dc.min),this.boundingBox.expandByPoint(dc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new eh);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ml,1/0);if(t){const n=this.boundingSphere.center;if(dc.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const n=e[t];fc.setFromBufferAttribute(n),this.morphTargetsRelative?(mc.addVectors(dc.min,fc.min),dc.expandByPoint(mc),mc.addVectors(dc.max,fc.max),dc.expandByPoint(mc)):(dc.expandByPoint(fc.min),dc.expandByPoint(fc.max))}dc.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)mc.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(mc));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],o=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)mc.fromBufferAttribute(s,e),o&&(pc.fromBufferAttribute(t,e),mc.add(pc)),i=Math.max(i,n.distanceToSquared(mc))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,o=i.length/3;void 0===e.tangent&&this.setAttribute("tangent",new sc(new Float32Array(4*o),4));const a=e.tangent.array,l=[],h=[];for(let w=0;w<o;w++)l[w]=new Ml,h[w]=new Ml;const c=new Ml,u=new Ml,p=new Ml,d=new vl,f=new vl,m=new vl,g=new Ml,y=new Ml;function _(t,e,n){c.fromArray(i,3*t),u.fromArray(i,3*e),p.fromArray(i,3*n),d.fromArray(s,2*t),f.fromArray(s,2*e),m.fromArray(s,2*n),u.sub(c),p.sub(c),f.sub(d),m.sub(d);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(p,-f.y).multiplyScalar(r),y.copy(p).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[n].add(g),h[t].add(y),h[e].add(y),h[n].add(y))}let v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(let w=0,S=v.length;w<S;++w){const t=v[w],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)_(n[i+0],n[i+1],n[i+2])}const T=new Ml,E=new Ml,x=new Ml,I=new Ml;function b(t){x.fromArray(r,3*t),I.copy(x);const e=l[t];T.copy(e),T.sub(x.multiplyScalar(x.dot(e))).normalize(),E.crossVectors(I,e);const n=E.dot(h[t])<0?-1:1;a[4*t]=T.x,a[4*t+1]=T.y,a[4*t+2]=T.z,a[4*t+3]=n}for(let w=0,S=v.length;w<S;++w){const t=v[w],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)b(n[i+0]),b(n[i+1]),b(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new sc(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Ml,r=new Ml,s=new Ml,o=new Ml,a=new Ml,l=new Ml,h=new Ml,c=new Ml;if(t)for(let u=0,p=t.count;u<p;u+=3){const p=t.getX(u+0),d=t.getX(u+1),f=t.getX(u+2);i.fromBufferAttribute(e,p),r.fromBufferAttribute(e,d),s.fromBufferAttribute(e,f),h.subVectors(s,r),c.subVectors(i,r),h.cross(c),o.fromBufferAttribute(n,p),a.fromBufferAttribute(n,d),l.fromBufferAttribute(n,f),o.add(h),a.add(h),l.add(h),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,u=e.count;t<u;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),h.subVectors(s,r),c.subVectors(i,r),h.cross(c),n.setXYZ(t+0,h.x,h.y,h.z),n.setXYZ(t+1,h.x,h.y,h.z),n.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i].array,s=t.attributes[i],o=s.array,a=s.itemSize*e,l=Math.min(o.length,r.length-a);for(let t=0,e=a;t<l;t++,e++)r[e]=o[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)mc.fromBufferAttribute(t,e),mc.normalize(),t.setXYZ(e,mc.x,mc.y,mc.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let o=0,a=0;for(let l=0,h=e.length;l<h;l++){o=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(let t=0;t<i;t++)s[a++]=n[o++]}return new sc(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new gc,n=this.index.array,i=this.attributes;for(const o in i){const r=t(i[o],n);e.setAttribute(o,r)}const r=this.morphAttributes;for(const o in r){const i=[],s=r[o];for(let e=0,r=s.length;e<r;e++){const r=t(s[e],n);i.push(r)}e.morphAttributes[o]=i}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const t=s[o];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const i={};let r=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];n.push(r.toJSON(t.data))}n.length>0&&(i[a]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const t=i[l];this.setAttribute(l,t.clone(e))}const r=t.morphAttributes;for(const l in r){const t=[],n=r[l];for(let i=0,r=n.length;i<r;i++)t.push(n[i].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let l=0,h=s.length;l<h;l++){const t=s[l];this.addGroup(t.start,t.count,t.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}gc.prototype.isBufferGeometry=!0;const yc=new ch,_c=new hh,vc=new eh,Tc=new Ml,Ec=new Ml,xc=new Ml,Ic=new Ml,bc=new Ml,wc=new Ml,Sc=new Ml,Ac=new Ml,Cc=new Ml,Rc=new vl,Dc=new vl,Oc=new vl,Nc=new Ml,Mc=new Ml;class Pc extends Fh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gc,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nc;super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),vc.copy(n.boundingSphere),vc.applyMatrix4(r),!1===t.ray.intersectsSphere(vc))return;if(yc.copy(r).invert(),_c.copy(t.ray).applyMatrix4(yc),null!==n.boundingBox&&!1===_c.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,h=n.attributes.uv,c=n.attributes.uv2,u=n.groups,p=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,d=u.length;n<d;n++){const d=u[n],f=i[d.materialIndex];for(let n=Math.max(d.start,p.start),i=Math.min(r.count,Math.min(d.start+d.count,p.start+p.count));n<i;n+=3){const i=r.getX(n),u=r.getX(n+1),p=r.getX(n+2);s=Fc(this,f,t,_c,o,a,l,h,c,i,u,p),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=d.materialIndex,e.push(s))}}else{for(let n=Math.max(0,p.start),u=Math.min(r.count,p.start+p.count);n<u;n+=3){const u=r.getX(n),p=r.getX(n+1),d=r.getX(n+2);s=Fc(this,i,t,_c,o,a,l,h,c,u,p,d),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}else if(void 0!==o)if(Array.isArray(i))for(let n=0,d=u.length;n<d;n++){const r=u[n],d=i[r.materialIndex];for(let n=Math.max(r.start,p.start),i=Math.min(o.count,Math.min(r.start+r.count,p.start+p.count));n<i;n+=3){s=Fc(this,d,t,_c,o,a,l,h,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=r.materialIndex,e.push(s))}}else{for(let n=Math.max(0,p.start),r=Math.min(o.count,p.start+p.count);n<r;n+=3){s=Fc(this,i,t,_c,o,a,l,h,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Fc(t,e,n,i,r,s,o,a,l,h,c,u){Tc.fromBufferAttribute(r,h),Ec.fromBufferAttribute(r,c),xc.fromBufferAttribute(r,u);const p=t.morphTargetInfluences;if(s&&p){Sc.set(0,0,0),Ac.set(0,0,0),Cc.set(0,0,0);for(let t=0,e=s.length;t<e;t++){const e=p[t],n=s[t];0!==e&&(Ic.fromBufferAttribute(n,h),bc.fromBufferAttribute(n,c),wc.fromBufferAttribute(n,u),o?(Sc.addScaledVector(Ic,e),Ac.addScaledVector(bc,e),Cc.addScaledVector(wc,e)):(Sc.addScaledVector(Ic.sub(Tc),e),Ac.addScaledVector(bc.sub(Ec),e),Cc.addScaledVector(wc.sub(xc),e)))}Tc.add(Sc),Ec.add(Ac),xc.add(Cc)}t.isSkinnedMesh&&(t.boneTransform(h,Tc),t.boneTransform(c,Ec),t.boneTransform(u,xc));const d=function(t,e,n,i,r,s,o,a){let l;if(l=e.side===bs?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side!==ws,a),null===l)return null;Mc.copy(a),Mc.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(Mc);return h<n.near||h>n.far?null:{distance:h,point:Mc.clone(),object:t}}(t,e,n,i,Tc,Ec,xc,Nc);if(d){a&&(Rc.fromBufferAttribute(a,h),Dc.fromBufferAttribute(a,c),Oc.fromBufferAttribute(a,u),d.uv=Yh.getUV(Nc,Tc,Ec,xc,Rc,Dc,Oc,new vl)),l&&(Rc.fromBufferAttribute(l,h),Dc.fromBufferAttribute(l,c),Oc.fromBufferAttribute(l,u),d.uv2=Yh.getUV(Nc,Tc,Ec,xc,Rc,Dc,Oc,new vl));const t={a:h,b:c,c:u,normal:new Ml,materialIndex:0};Yh.getNormal(Tc,Ec,xc,t.normal),d.face=t}return d}Pc.prototype.isMesh=!0;class Lc extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const a=[],l=[],h=[],c=[];let u=0,p=0;function d(t,e,n,i,r,s,d,f,m,g,y){const _=s/m,v=d/g,T=s/2,E=d/2,x=f/2,I=m+1,b=g+1;let w=0,S=0;const A=new Ml;for(let o=0;o<b;o++){const s=o*v-E;for(let a=0;a<I;a++){const u=a*_-T;A[t]=u*i,A[e]=s*r,A[n]=x,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=f>0?1:-1,h.push(A.x,A.y,A.z),c.push(a/m),c.push(1-o/g),w+=1}}for(let o=0;o<g;o++)for(let t=0;t<m;t++){const e=u+t+I*o,n=u+t+I*(o+1),i=u+(t+1)+I*(o+1),r=u+(t+1)+I*o;a.push(e,n,r),a.push(n,i,r),S+=6}o.addGroup(p,S,y),p+=S,u+=w}d("z","y","x",-1,-1,n,e,t,s,r,0),d("z","y","x",1,-1,n,e,-t,s,r,1),d("x","z","y",1,1,t,n,e,i,s,2),d("x","z","y",1,-1,t,n,-e,i,s,3),d("x","y","z",1,-1,t,e,n,i,r,4),d("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new lc(l,3)),this.setAttribute("normal",new lc(h,3)),this.setAttribute("uv",new lc(c,2))}static fromJSON(t){return new Lc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function kc(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Uc(t){const e={};for(let n=0;n<t.length;n++){const i=kc(t[n]);for(const t in i)e[t]=i[t]}return e}const Bc={clone:kc,merge:Uc};class zc extends Xh{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=kc(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}zc.prototype.isShaderMaterial=!0;class Gc extends Fh{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new ch,this.projectionMatrix=new ch,this.projectionMatrixInverse=new ch}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Gc.prototype.isCamera=!0;class Hc extends Gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*cl*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*hl*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*cl*Math.atan(Math.tan(.5*hl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*hl*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/o,i*=s.width/t,n*=s.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Hc.prototype.isPerspectiveCamera=!0;const Vc=90;class jc extends Fh{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new Hc(Vc,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Ml(1,0,0)),this.add(i);const r=new Hc(Vc,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Ml(-1,0,0)),this.add(r);const s=new Hc(Vc,1,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Ml(0,1,0)),this.add(s);const o=new Hc(Vc,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Ml(0,-1,0)),this.add(o);const a=new Hc(Vc,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Ml(0,0,1)),this.add(a);const l=new Hc(Vc,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Ml(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,o,a,l]=this.children,h=t.xr.enabled,c=t.getRenderTarget();t.xr.enabled=!1;const u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=u,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.xr.enabled=h}}class Wc extends Al{constructor(t,e,n,i,r,s,o,a,l,h){super(t=void 0!==t?t:[],e=void 0!==e?e:uo,n,i,r,s,o,a,l,h),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Wc.prototype.isCubeTexture=!0;class Yc extends Dl{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),e=e||{},this.texture=new Wc(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:bo,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=Go,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Lc(5,5,5),o=new zc({name:"CubemapFromEquirect",uniforms:kc(n),vertexShader:i,fragmentShader:r,side:bs,blending:Ss});o.uniforms.tEquirect.value=e;const a=new Pc(s,o),l=e.minFilter;e.minFilter===So&&(e.minFilter=bo);return new jc(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}}Yc.prototype.isWebGLCubeRenderTarget=!0;const qc=new Ml,Xc=new Ml,Zc=new Tl;class Kc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=qc.subVectors(n,e).cross(Xc.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(qc),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Zc.getNormalMatrix(t),i=this.coplanarPoint(qc).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Kc.prototype.isPlane=!0;const Qc=new eh,Jc=new Ml;class $c{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Kc,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Kc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Kc,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Kc,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Kc,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Kc;this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],c=n[7],u=n[8],p=n[9],d=n[10],f=n[11],m=n[12],g=n[13],y=n[14],_=n[15];return e[0].setComponents(o-i,c-a,f-u,_-m).normalize(),e[1].setComponents(o+i,c+a,f+u,_+m).normalize(),e[2].setComponents(o+r,c+l,f+p,_+g).normalize(),e[3].setComponents(o-r,c-l,f-p,_-g).normalize(),e[4].setComponents(o-s,c-h,f-d,_-y).normalize(),e[5].setComponents(o+s,c+h,f+d,_+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Qc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Qc)}intersectsSprite(t){return Qc.center.set(0,0,0),Qc.radius=.7071067811865476,Qc.applyMatrix4(t.matrixWorld),this.intersectsSphere(Qc)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Jc.x=i.normal.x>0?t.max.x:t.min.x,Jc.y=i.normal.y>0?t.max.y:t.min.y,Jc.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Jc)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function tu(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function eu(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=i.get(e);void 0===s?i.set(e,function(e,i){const r=e.array,s=e.usage,o=t.createBuffer();t.bindBuffer(i,o),t.bufferData(i,r,s),e.onUploadCallback();let a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(!function(e,i,r){const s=i.array,o=i.updateRange;t.bindBuffer(r,e),-1===o.count?t.bufferSubData(r,0,s):(n?t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,e,r),s.version=e.version)}}}class nu extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,h=a+1,c=t/o,u=e/a,p=[],d=[],f=[],m=[];for(let g=0;g<h;g++){const t=g*u-s;for(let e=0;e<l;e++){const n=e*c-r;d.push(n,-t,0),f.push(0,0,1),m.push(e/o),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<o;t++){const e=t+l*g,n=t+l*(g+1),i=t+1+l*(g+1),r=t+1+l*g;p.push(e,n,r),p.push(n,i,r)}this.setIndex(p),this.setAttribute("position",new lc(d,3)),this.setAttribute("normal",new lc(f,3)),this.setAttribute("uv",new lc(m,2))}static fromJSON(t){return new nu(t.width,t.height,t.widthSegments,t.heightSegments)}}const iu={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ru={common:{diffuse:{value:new ec(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Tl},uv2Transform:{value:new Tl},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new vl(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ec(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ec(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Tl}},sprite:{diffuse:{value:new ec(16777215)},opacity:{value:1},center:{value:new vl(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Tl}}},su={basic:{uniforms:Uc([ru.common,ru.specularmap,ru.envmap,ru.aomap,ru.lightmap,ru.fog]),vertexShader:iu.meshbasic_vert,fragmentShader:iu.meshbasic_frag},lambert:{uniforms:Uc([ru.common,ru.specularmap,ru.envmap,ru.aomap,ru.lightmap,ru.emissivemap,ru.fog,ru.lights,{emissive:{value:new ec(0)}}]),vertexShader:iu.meshlambert_vert,fragmentShader:iu.meshlambert_frag},phong:{uniforms:Uc([ru.common,ru.specularmap,ru.envmap,ru.aomap,ru.lightmap,ru.emissivemap,ru.bumpmap,ru.normalmap,ru.displacementmap,ru.fog,ru.lights,{emissive:{value:new ec(0)},specular:{value:new ec(1118481)},shininess:{value:30}}]),vertexShader:iu.meshphong_vert,fragmentShader:iu.meshphong_frag},standard:{uniforms:Uc([ru.common,ru.envmap,ru.aomap,ru.lightmap,ru.emissivemap,ru.bumpmap,ru.normalmap,ru.displacementmap,ru.roughnessmap,ru.metalnessmap,ru.fog,ru.lights,{emissive:{value:new ec(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:iu.meshphysical_vert,fragmentShader:iu.meshphysical_frag},toon:{uniforms:Uc([ru.common,ru.aomap,ru.lightmap,ru.emissivemap,ru.bumpmap,ru.normalmap,ru.displacementmap,ru.gradientmap,ru.fog,ru.lights,{emissive:{value:new ec(0)}}]),vertexShader:iu.meshtoon_vert,fragmentShader:iu.meshtoon_frag},matcap:{uniforms:Uc([ru.common,ru.bumpmap,ru.normalmap,ru.displacementmap,ru.fog,{matcap:{value:null}}]),vertexShader:iu.meshmatcap_vert,fragmentShader:iu.meshmatcap_frag},points:{uniforms:Uc([ru.points,ru.fog]),vertexShader:iu.points_vert,fragmentShader:iu.points_frag},dashed:{uniforms:Uc([ru.common,ru.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:iu.linedashed_vert,fragmentShader:iu.linedashed_frag},depth:{uniforms:Uc([ru.common,ru.displacementmap]),vertexShader:iu.depth_vert,fragmentShader:iu.depth_frag},normal:{uniforms:Uc([ru.common,ru.bumpmap,ru.normalmap,ru.displacementmap,{opacity:{value:1}}]),vertexShader:iu.meshnormal_vert,fragmentShader:iu.meshnormal_frag},sprite:{uniforms:Uc([ru.sprite,ru.fog]),vertexShader:iu.sprite_vert,fragmentShader:iu.sprite_frag},background:{uniforms:{uvTransform:{value:new Tl},t2D:{value:null}},vertexShader:iu.background_vert,fragmentShader:iu.background_frag},cube:{uniforms:Uc([ru.envmap,{opacity:{value:1}}]),vertexShader:iu.cube_vert,fragmentShader:iu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:iu.equirect_vert,fragmentShader:iu.equirect_frag},distanceRGBA:{uniforms:Uc([ru.common,ru.displacementmap,{referencePosition:{value:new Ml},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:iu.distanceRGBA_vert,fragmentShader:iu.distanceRGBA_frag},shadow:{uniforms:Uc([ru.lights,ru.fog,{color:{value:new ec(0)},opacity:{value:1}}]),vertexShader:iu.shadow_vert,fragmentShader:iu.shadow_frag}};function ou(t,e,n,i,r){const s=new ec(0);let o,a,l=0,h=null,c=0,u=null;function p(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return s},setClearColor:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),l=e,p(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,p(s,l)},render:function(n,r){let d=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=e.get(f));const m=t.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?p(s,l):f&&f.isColor&&(p(f,1),d=!0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&(f.isCubeTexture||f.mapping===go)?(void 0===a&&(a=new Pc(new Lc(1,1,1),new zc({name:"BackgroundCubeMaterial",uniforms:kc(su.cube.uniforms),vertexShader:su.cube.vertexShader,fragmentShader:su.cube.fragmentShader,side:bs,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(a)),a.material.uniforms.envMap.value=f,a.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,h===f&&c===f.version&&u===t.toneMapping||(a.material.needsUpdate=!0,h=f,c=f.version,u=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new Pc(new nu(2,2),new zc({name:"BackgroundMaterial",uniforms:kc(su.background.uniforms),vertexShader:su.background.vertexShader,fragmentShader:su.background.fragmentShader,side:Is,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),h===f&&c===f.version&&u===t.toneMapping||(o.material.needsUpdate=!0,h=f,c=f.version,u=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function au(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=p(null);let h=l;function c(e){return i.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function u(e){return i.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function p(t){const e=[],n=[],i=[];for(let s=0;s<r;s++)e[s]=0,n[s]=0,i[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){const t=h.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,r){const s=h.newAttributes,o=h.enabledAttributes,a=h.attributeDivisors;if(s[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),a[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),a[n]=r}}function g(){const e=h.newAttributes,n=h.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function y(e,n,r,s,o,a){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,s,o,a):t.vertexAttribIPointer(e,n,r,o,a)}function _(){v(),h!==l&&(h=l,c(h.object))}function v(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,u,_,v){let T=!1;if(o){const e=function(e,n,r){const o=!0===r.wireframe;let l=a[e.id];void 0===l&&(l={},a[e.id]=l);let h=l[n.id];void 0===h&&(h={},l[n.id]=h);let c=h[o];void 0===c&&(c=p(i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),h[o]=c);return c}(_,u,l);h!==e&&(h=e,c(h.object)),T=function(t,e){const n=h.attributes,i=t.attributes;let r=0;for(const s in i){const t=n[s],e=i[s];if(void 0===t)return!0;if(t.attribute!==e)return!0;if(t.data!==e.data)return!0;r++}return h.attributesNum!==r||h.index!==e}(_,v),T&&function(t,e){const n={},i=t.attributes;let r=0;for(const s in i){const t=i[s],e={};e.attribute=t,t.data&&(e.data=t.data),n[s]=e,r++}h.attributes=n,h.attributesNum=r,h.index=e}(_,v)}else{const t=!0===l.wireframe;h.geometry===_.id&&h.program===u.id&&h.wireframe===t||(h.geometry=_.id,h.program=u.id,h.wireframe=t,T=!0)}!0===r.isInstancedMesh&&(T=!0),null!==v&&n.update(v,34963),T&&(!function(r,s,o,a){if(!1===i.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const l=a.attributes,h=o.getAttributes(),c=s.defaultAttributeValues;for(const e in h){const i=h[e];if(i.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,o=s.itemSize,l=n.get(s);if(void 0===l)continue;const h=l.buffer,c=l.type,u=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,p=s.offset;if(n&&n.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)m(i.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)y(i.location+t,o/i.locationSize,c,e,l*u,(p+o/i.locationSize*t)*u)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)m(i.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)y(i.location+t,o/i.locationSize,c,e,o*u,o/i.locationSize*t*u)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i.location,n);break;case 3:t.vertexAttrib3fv(i.location,n);break;case 4:t.vertexAttrib4fv(i.location,n);break;default:t.vertexAttrib1fv(i.location,n)}}}}g()}(r,l,u,_),null!==v&&t.bindBuffer(34963,n.get(v).buffer))},reset:_,resetDefaultState:v,dispose:function(){_();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)u(n[t].object),delete n[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const n in e){const t=e[n];for(const e in t)u(t[e].object),delete t[e];delete e[n]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)u(i[t].object),delete i[t];delete n[t.id]}},initAttributes:d,enableAttribute:f,disableUnusedAttributes:g}}function lu(t,e,n,i){const r=i.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,i){t.drawArrays(s,e,i),n.update(i,s,1)},this.renderInstances=function(i,o,a){if(0===a)return;let l,h;if(r)l=t,h="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](s,i,o,a),n.update(o,s,a)}}function hu(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=s||e.has("WEBGL_draw_buffers"),h=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),u=t.getParameter(35660),p=t.getParameter(3379),d=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),_=u>0,v=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:h,maxTextures:c,maxVertexTextures:u,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:v,floatVertexTextures:_&&v,maxSamples:s?t.getParameter(36183):0}}function cu(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Kc,a=new Tl,l={value:null,needsUpdate:!1};function h(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(t,n,i,r){const s=null!==t?t.length:0;let h=null;if(0!==s){if(h=l.value,!0!==r||null===h){const e=i+4*s,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===h||h.length<e)&&(h=new Float32Array(e));for(let n=0,l=i;n!==s;++n,l+=4)o.copy(t[n]).applyMatrix4(r,a),o.normal.toArray(h,l),h[l+3]=o.constant}l.value=h,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,s){const o=0!==t.length||e||0!==i||r;return r=e,n=c(t,s,0),i=t.length,o},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,h()},this.setState=function(e,o,a){const u=e.clippingPlanes,p=e.clipIntersection,d=e.clipShadows,f=t.get(e);if(!r||null===u||0===u.length||s&&!d)s?c(null):h();else{const t=s?0:i,e=4*t;let r=f.clippingState||null;l.value=r,r=c(u,o,e,a);for(let i=0;i!==e;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}}}function uu(t){let e=new WeakMap;function n(t,e){return e===fo?t.mapping=uo:e===mo&&(t.mapping=po),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===fo||s===mo){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const o=t.getRenderTarget(),a=new Yc(s.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),t.setRenderTarget(o),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}su.physical={uniforms:Uc([su.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new vl(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ec(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new vl},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ec(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ec(1,1,1)},specularColorMap:{value:null}}]),vertexShader:iu.meshphysical_vert,fragmentShader:iu.meshphysical_frag};class pu extends Gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}pu.prototype.isOrthographicCamera=!0;class du extends zc{constructor(t){super(t),this.type="RawShaderMaterial"}}du.prototype.isRawShaderMaterial=!0;const fu=Math.pow(2,8),mu=[.125,.215,.35,.446,.526,.582],gu=5+mu.length,yu=20,_u={[Ya]:0,[qa]:1,[Za]:2,[Ka]:3,[Qa]:4,[Ja]:5,[Xa]:6},vu=new pu,{_lodPlanes:Tu,_sizeLods:Eu,_sigmas:xu}=Du(),Iu=new ec;let bu=null;const wu=(1+Math.sqrt(5))/2,Su=1/wu,Au=[new Ml(1,1,1),new Ml(-1,1,1),new Ml(1,1,-1),new Ml(-1,1,-1),new Ml(0,wu,Su),new Ml(0,wu,-Su),new Ml(Su,0,wu),new Ml(-Su,0,wu),new Ml(wu,Su,0),new Ml(-wu,Su,0)];class Cu{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new Ml(0,1,0);return new du({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:_u[Ya]},outputEncoding:{value:_u[Ya]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Ss,depthTest:!1,depthWrite:!1})}(yu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;bu=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Pu(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Mu(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Tu.length;t++)Tu[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(bu),t.scissorTest=!1,Nu(t,0,0,t.width,t.height)}_fromTexture(t){bu=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:Eo,minFilter:Eo,generateMipmaps:!1,type:Ao,format:jo,encoding:Ru(t)?t.encoding:Za,depthBuffer:!1},n=Ou(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Ou(e),n}_compileMaterial(t){const e=new Pc(Tu[0],t);this._renderer.compile(e,vu)}_sceneToCubeUV(t,e,n,i){const r=new Hc(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,h=a.outputEncoding,c=a.toneMapping;a.getClearColor(Iu),a.toneMapping=so,a.outputEncoding=Ya,a.autoClear=!1;const u=new nc({name:"PMREM.Background",side:bs,depthWrite:!1,depthTest:!1}),p=new Pc(new Lc,u);let d=!1;const f=t.background;f?f.isColor&&(u.color.copy(f),t.background=null,d=!0):(u.color.copy(Iu),d=!0);for(let m=0;m<6;m++){const e=m%3;0==e?(r.up.set(0,s[m],0),r.lookAt(o[m],0,0)):1==e?(r.up.set(0,0,s[m]),r.lookAt(0,o[m],0)):(r.up.set(0,s[m],0),r.lookAt(0,0,o[m])),Nu(i,e*fu,m>2?fu:0,fu,fu),a.setRenderTarget(i),d&&a.render(p,r),a.render(t,r)}p.geometry.dispose(),p.material.dispose(),a.toneMapping=c,a.outputEncoding=h,a.autoClear=l,t.background=f}_setEncoding(t,e){t.value=_u[e.encoding]}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===uo||t.mapping===po;i?null==this._cubemapShader&&(this._cubemapShader=Pu()):null==this._equirectShader&&(this._equirectShader=Mu());const r=i?this._cubemapShader:this._equirectShader,s=new Pc(Tu[0],r),o=r.uniforms;o.envMap.value=t,i||o.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(o.inputEncoding,t),this._setEncoding(o.outputEncoding,e.texture),Nu(e,0,0,3*fu,2*fu),n.setRenderTarget(e),n.render(s,vu)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<gu;i++){const e=Math.sqrt(xu[i]*xu[i]-xu[i-1]*xu[i-1]),n=Au[(i-1)%Au.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Pc(Tu[i],l),c=l.uniforms,u=Eu[n]-1,p=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,d=r/p,f=isFinite(r)?1+Math.floor(3*d):yu;f>yu&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(yu));const m=[];let g=0;for(let _=0;_<yu;++_){const t=_/d,e=Math.exp(-t*t/2);m.push(e),0==_?g+=e:_<f&&(g+=2*e)}for(let _=0;_<m.length;_++)m[_]=m[_]/g;c.envMap.value=t.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===s,o&&(c.poleAxis.value=o),c.dTheta.value=p,c.mipInt.value=8-n,this._setEncoding(c.inputEncoding,t.texture),this._setEncoding(c.outputEncoding,t.texture);const y=Eu[i];Nu(e,3*Math.max(0,fu-2*y),(0===i?0:2*fu)+2*y*(i>4?i-8+4:0),3*y,2*y),a.setRenderTarget(e),a.render(h,vu)}}function Ru(t){return void 0!==t&&t.type===Ao&&(t.encoding===Ya||t.encoding===qa||t.encoding===Xa)}function Du(){const t=[],e=[],n=[];let i=8;for(let r=0;r<gu;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>4?o=mu[r-8+4-1]:0==r&&(o=0),n.push(o);const a=1/(s-1),l=-a/2,h=1+a/2,c=[l,l,h,l,h,h,l,l,h,h,l,h],u=6,p=6,d=3,f=2,m=1,g=new Float32Array(d*p*u),y=new Float32Array(f*p*u),_=new Float32Array(m*p*u);for(let t=0;t<u;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(i,d*p*t),y.set(c,f*p*t);const r=[t,t,t,t,t,t];_.set(r,m*p*t)}const v=new gc;v.setAttribute("position",new sc(g,d)),v.setAttribute("uv",new sc(y,f)),v.setAttribute("faceIndex",new sc(_,m)),t.push(v),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Ou(t){const e=new Dl(3*fu,3*fu,t);return e.texture.mapping=go,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Nu(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Mu(){const t=new vl(1,1);return new du({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:_u[Ya]},outputEncoding:{value:_u[Ya]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Ss,depthTest:!1,depthWrite:!1})}function Pu(){return new du({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:_u[Ya]},outputEncoding:{value:_u[Ya]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Ss,depthTest:!1,depthWrite:!1})}function Fu(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping,o=s===fo||s===mo,a=s===uo||s===po;if(o||a){if(e.has(r))return e.get(r).texture;{const s=r.image;if(o&&s&&s.height>0||a&&s&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(s)){const s=t.getRenderTarget();null===n&&(n=new Cu(t));const a=o?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,a),t.setRenderTarget(s),r.addEventListener("dispose",i),a.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Lu(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ku(t,e,n,i){const r={},s=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);a.removeEventListener("dispose",o),delete r[a.id];const l=s.get(a);l&&(e.remove(l),s.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],i=t.index,r=t.attributes.position;let o=0;if(null!==i){const t=i.array;o=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{const t=r.array;o=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const a=new(El(n)>65535?ac:oc)(n,1);a.version=o;const l=s.get(t);l&&e.remove(l),s.set(t,a)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",o),r[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const r in n)e.update(n[r],34962);const i=t.morphAttributes;for(const r in i){const t=i[r];for(let n=0,i=t.length;n<i;n++)e.update(t[n],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return s.get(t)}}}function Uu(t,e,n,i){const r=i.isWebGL2;let s,o,a;this.setMode=function(t){s=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,i){t.drawElements(s,i,o,e*a),n.update(i,s,1)},this.renderInstances=function(i,l,h){if(0===h)return;let c,u;if(r)c=t,u="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](s,l,o,i*a,h),n.update(l,s,h)}}function Bu(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class zu extends Al{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=Eo,this.minFilter=Eo,this.wrapR=vo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function Gu(t,e){return t[0]-e[0]}function Hu(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Vu(t,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function ju(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new Ml,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function(l,h,c,u){const p=l.morphTargetInfluences;if(!0===e.isWebGL2){const i=h.morphAttributes.position.length;let r=s.get(h);if(void 0===r||r.count!==i){void 0!==r&&r.texture.dispose();const t=void 0!==h.morphAttributes.normal,n=h.morphAttributes.position,a=h.morphAttributes.normal||[],l=!0===t?2:1;let c=h.attributes.position.count*l,u=1;c>e.maxTextureSize&&(u=Math.ceil(c/e.maxTextureSize),c=e.maxTextureSize);const p=new Float32Array(c*u*4*i),d=new zu(p,c,u,i);d.format=Go,d.type=Mo;const f=4*l;for(let e=0;e<i;e++){const i=n[e],r=a[e],s=c*u*4*e;for(let e=0;e<i.count;e++){o.fromBufferAttribute(i,e),!0===i.normalized&&Vu(o,i);const n=e*f;p[s+n+0]=o.x,p[s+n+1]=o.y,p[s+n+2]=o.z,p[s+n+3]=0,!0===t&&(o.fromBufferAttribute(r,e),!0===r.normalized&&Vu(o,r),p[s+n+4]=o.x,p[s+n+5]=o.y,p[s+n+6]=o.z,p[s+n+7]=0)}}r={count:i,texture:d,size:new vl(c,u)},s.set(h,r)}let a=0;for(let t=0;t<p.length;t++)a+=p[t];const l=h.morphTargetsRelative?1:1-a;u.getUniforms().setValue(t,"morphTargetBaseInfluence",l),u.getUniforms().setValue(t,"morphTargetInfluences",p),u.getUniforms().setValue(t,"morphTargetsTexture",r.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",r.size)}else{const e=void 0===p?0:p.length;let n=i[h.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];i[h.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=p[t]}n.sort(Hu);for(let t=0;t<8;t++)t<e&&n[t][1]?(a[t][0]=n[t][0],a[t][1]=n[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(Gu);const s=h.morphAttributes.position,o=h.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=a[t],n=e[0],i=e[1];n!==Number.MAX_SAFE_INTEGER&&i?(s&&h.getAttribute("morphTarget"+t)!==s[n]&&h.setAttribute("morphTarget"+t,s[n]),o&&h.getAttribute("morphNormal"+t)!==o[n]&&h.setAttribute("morphNormal"+t,o[n]),r[t]=i,l+=i):(s&&!0===h.hasAttribute("morphTarget"+t)&&h.deleteAttribute("morphTarget"+t),o&&!0===h.hasAttribute("morphNormal"+t)&&h.deleteAttribute("morphNormal"+t),r[t]=0)}const c=h.morphTargetsRelative?1:1-l;u.getUniforms().setValue(t,"morphTargetBaseInfluence",c),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function Wu(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const o=i.render.frame,a=t.geometry,l=e.get(t,a);return r.get(l)!==o&&(e.update(l),r.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}zu.prototype.isDataTexture2DArray=!0;class Yu extends Al{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=Eo,this.minFilter=Eo,this.wrapR=vo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Yu.prototype.isDataTexture3D=!0;const qu=new Al,Xu=new zu,Zu=new Yu,Ku=new Wc,Qu=[],Ju=[],$u=new Float32Array(16),tp=new Float32Array(9),ep=new Float32Array(4);function np(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=Qu[r];if(void 0===s&&(s=new Float32Array(r),Qu[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function ip(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function rp(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function sp(t,e){let n=Ju[e];void 0===n&&(n=new Int32Array(e),Ju[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function op(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ap(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ip(n,e))return;t.uniform2fv(this.addr,e),rp(n,e)}}function lp(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ip(n,e))return;t.uniform3fv(this.addr,e),rp(n,e)}}function hp(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ip(n,e))return;t.uniform4fv(this.addr,e),rp(n,e)}}function cp(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ip(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),rp(n,e)}else{if(ip(n,i))return;ep.set(i),t.uniformMatrix2fv(this.addr,!1,ep),rp(n,i)}}function up(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ip(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),rp(n,e)}else{if(ip(n,i))return;tp.set(i),t.uniformMatrix3fv(this.addr,!1,tp),rp(n,i)}}function pp(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ip(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),rp(n,e)}else{if(ip(n,i))return;$u.set(i),t.uniformMatrix4fv(this.addr,!1,$u),rp(n,i)}}function dp(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function fp(t,e){const n=this.cache;ip(n,e)||(t.uniform2iv(this.addr,e),rp(n,e))}function mp(t,e){const n=this.cache;ip(n,e)||(t.uniform3iv(this.addr,e),rp(n,e))}function gp(t,e){const n=this.cache;ip(n,e)||(t.uniform4iv(this.addr,e),rp(n,e))}function yp(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function _p(t,e){const n=this.cache;ip(n,e)||(t.uniform2uiv(this.addr,e),rp(n,e))}function vp(t,e){const n=this.cache;ip(n,e)||(t.uniform3uiv(this.addr,e),rp(n,e))}function Tp(t,e){const n=this.cache;ip(n,e)||(t.uniform4uiv(this.addr,e),rp(n,e))}function Ep(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||qu,r)}function xp(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Zu,r)}function Ip(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Ku,r)}function bp(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Xu,r)}function wp(t,e){t.uniform1fv(this.addr,e)}function Sp(t,e){const n=np(e,this.size,2);t.uniform2fv(this.addr,n)}function Ap(t,e){const n=np(e,this.size,3);t.uniform3fv(this.addr,n)}function Cp(t,e){const n=np(e,this.size,4);t.uniform4fv(this.addr,n)}function Rp(t,e){const n=np(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Dp(t,e){const n=np(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Op(t,e){const n=np(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Np(t,e){t.uniform1iv(this.addr,e)}function Mp(t,e){t.uniform2iv(this.addr,e)}function Pp(t,e){t.uniform3iv(this.addr,e)}function Fp(t,e){t.uniform4iv(this.addr,e)}function Lp(t,e){t.uniform1uiv(this.addr,e)}function kp(t,e){t.uniform2uiv(this.addr,e)}function Up(t,e){t.uniform3uiv(this.addr,e)}function Bp(t,e){t.uniform4uiv(this.addr,e)}function zp(t,e,n){const i=e.length,r=sp(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTexture2D(e[s]||qu,r[s])}function Gp(t,e,n){const i=e.length,r=sp(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTexture3D(e[s]||Zu,r[s])}function Hp(t,e,n){const i=e.length,r=sp(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTextureCube(e[s]||Ku,r[s])}function Vp(t,e,n){const i=e.length,r=sp(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Xu,r[s])}function jp(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return op;case 35664:return ap;case 35665:return lp;case 35666:return hp;case 35674:return cp;case 35675:return up;case 35676:return pp;case 5124:case 35670:return dp;case 35667:case 35671:return fp;case 35668:case 35672:return mp;case 35669:case 35673:return gp;case 5125:return yp;case 36294:return _p;case 36295:return vp;case 36296:return Tp;case 35678:case 36198:case 36298:case 36306:case 35682:return Ep;case 35679:case 36299:case 36307:return xp;case 35680:case 36300:case 36308:case 36293:return Ip;case 36289:case 36303:case 36311:case 36292:return bp}}(e.type)}function Wp(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return wp;case 35664:return Sp;case 35665:return Ap;case 35666:return Cp;case 35674:return Rp;case 35675:return Dp;case 35676:return Op;case 5124:case 35670:return Np;case 35667:case 35671:return Mp;case 35668:case 35672:return Pp;case 35669:case 35673:return Fp;case 5125:return Lp;case 36294:return kp;case 36295:return Up;case 36296:return Bp;case 35678:case 36198:case 36298:case 36306:case 35682:return zp;case 35679:case 36299:case 36307:return Gp;case 35680:case 36300:case 36308:case 36293:return Hp;case 36289:case 36303:case 36311:case 36292:return Vp}}(e.type)}function Yp(t){this.id=t,this.seq=[],this.map={}}Wp.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),rp(e,t)},Yp.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}};const qp=/(\w+)(\])?(\[|\.)?/g;function Xp(t,e){t.seq.push(e),t.map[e.id]=e}function Zp(t,e,n){const i=t.name,r=i.length;for(qp.lastIndex=0;;){const s=qp.exec(i),o=qp.lastIndex;let a=s[1];const l="]"===s[2],h=s[3];if(l&&(a|=0),void 0===h||"["===h&&o+2===r){Xp(n,void 0===h?new jp(a,t,e):new Wp(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new Yp(a),Xp(n,t)),n=t}}}function Kp(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);Zp(n,t.getUniformLocation(e,n.name),this)}}function Qp(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}Kp.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},Kp.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},Kp.upload=function(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,i)}},Kp.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let Jp=0;function $p(t){switch(t){case Ya:return["Linear","( value )"];case qa:return["sRGB","( value )"];case Za:return["RGBE","( value )"];case Ka:return["RGBM","( value, 7.0 )"];case Qa:return["RGBM","( value, 16.0 )"];case Ja:return["RGBD","( value, 256.0 )"];case Xa:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function td(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(t){const e=t.split("\n");for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function ed(t,e){const n=$p(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function nd(t,e){const n=$p(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function id(t,e){let n;switch(e){case oo:n="Linear";break;case ao:n="Reinhard";break;case lo:n="OptimizedCineon";break;case ho:n="ACESFilmic";break;case co:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function rd(t){return""!==t}function sd(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function od(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ad=/^[ \t]*#include +<([\w\d./]+)>/gm;function ld(t){return t.replace(ad,hd)}function hd(t,e){const n=iu[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ld(n)}const cd=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ud=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pd(t){return t.replace(ud,fd).replace(cd,dd)}function dd(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),fd(t,e,n,i)}function fd(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function md(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function gd(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Ts?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Es?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===xs&&(e="SHADOWMAP_TYPE_VSM"),e}(n),h=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case uo:case po:e="ENVMAP_TYPE_CUBE";break;case go:case yo:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),c=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case po:case yo:e="ENVMAP_MODE_REFRACTION"}return e}(n),u=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case no:e="ENVMAP_BLENDING_MULTIPLY";break;case io:e="ENVMAP_BLENDING_MIX";break;case ro:e="ENVMAP_BLENDING_ADD"}return e}(n),p=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rd).join("\n")}(n),f=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,y,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(rd).join("\n"),g.length>0&&(g+="\n"),y=[d,f].filter(rd).join("\n"),y.length>0&&(y+="\n")):(g=[md(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rd).join("\n"),y=[d,md(n),"#define SHADER_NAME "+n.shaderName,f,"#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==so?"#define TONE_MAPPING":"",n.toneMapping!==so?iu.tonemapping_pars_fragment:"",n.toneMapping!==so?id("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===zo?"#define OPAQUE":"",iu.encodings_pars_fragment,n.map?ed("mapTexelToLinear",n.mapEncoding):"",n.matcap?ed("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?ed("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?ed("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?ed("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?ed("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?ed("lightMapTexelToLinear",n.lightMapEncoding):"",nd("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(rd).join("\n")),o=ld(o),o=sd(o,n),o=od(o,n),a=ld(a),a=sd(a,n),a=od(a,n),o=pd(o),a=pd(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",n.glslVersion===sl?"":"out highp vec4 pc_fragColor;",n.glslVersion===sl?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const v=_+y+a,T=Qp(r,35633,_+g+o),E=Qp(r,35632,v);if(r.attachShader(m,T),r.attachShader(m,E),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(m).trim(),e=r.getShaderInfoLog(T).trim(),n=r.getShaderInfoLog(E).trim();let i=!0,s=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const e=td(r,T,"vertex"),n=td(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(s=!1);s&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:y}})}let x,I;return r.deleteShader(T),r.deleteShader(E),this.getUniforms=function(){return void 0===x&&(x=new Kp(r,m)),x},this.getAttributes=function(){return void 0===I&&(I=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let o=1;35674===i.type&&(o=2),35675===i.type&&(o=3),35676===i.type&&(o=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}(r,m)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Jp++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=T,this.fragmentShader=E,this}function yd(t,e,n,i,r,s,o){const a=[],l=r.isWebGL2,h=r.logarithmicDepthBuffer,c=r.floatVertexTextures,u=r.maxVertexUniforms,p=r.vertexTextures;let d=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function g(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Ya,e}return{getParameters:function(s,a,m,y,_){const v=y.fog,T=s.isMeshStandardMaterial?y.environment:null,E=(s.isMeshStandardMaterial?n:e).get(s.envMap||T),x=f[s.type],I=_.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(c)return 1024;{const t=u,n=Math.floor((t-20)/4),i=Math.min(n,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}}(_):0;let b,w;if(null!==s.precision&&(d=r.getMaxPrecision(s.precision),d!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",d,"instead.")),x){const t=su[x];b=t.vertexShader,w=t.fragmentShader}else b=s.vertexShader,w=s.fragmentShader;const S=t.getRenderTarget(),A=s.alphaTest>0,C=s.clearcoat>0;return{isWebGL2:l,shaderID:x,shaderName:s.type,vertexShader:b,fragmentShader:w,defines:s.defines,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:d,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:p,outputEncoding:null!==S?g(S.texture):t.outputEncoding,map:!!s.map,mapEncoding:g(s.map),matcap:!!s.matcap,matcapEncoding:g(s.matcap),envMap:!!E,envMapMode:E&&E.mapping,envMapEncoding:g(E),envMapCubeUV:!!E&&(E.mapping===go||E.mapping===yo),lightMap:!!s.lightMap,lightMapEncoding:g(s.lightMap),aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,emissiveMapEncoding:g(s.emissiveMap),bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===el,tangentSpaceNormalMap:s.normalMapType===tl,clearcoat:C,clearcoatMap:C&&!!s.clearcoatMap,clearcoatRoughnessMap:C&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:C&&!!s.clearcoatNormalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,specularColorMapEncoding:g(s.specularColorMap),alphaMap:!!s.alphaMap,alphaTest:A,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenColorMapEncoding:g(s.sheenColorMap),sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!_.geometry&&!!_.geometry.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!_.geometry&&!!_.geometry.attributes.color&&4===_.geometry.attributes.color.itemSize,vertexUvs:!!s.map||!!s.bumpMap||!!s.normalMap||!!s.specularMap||!!s.alphaMap||!!s.emissiveMap||!!s.roughnessMap||!!s.metalnessMap||!!s.clearcoatMap||!!s.clearcoatRoughnessMap||!!s.clearcoatNormalMap||!!s.displacementMap||!!s.transmissionMap||!!s.thicknessMap||!!s.specularIntensityMap||!!s.specularColorMap||!!s.sheenColorMap||s.sheenRoughnessMap,uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap)&&!!s.displacementMap,fog:!!v,useFog:s.fog,fogExp2:v&&v.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===_.isSkinnedMesh&&I>0,maxBones:I,useVertexTexture:c,morphTargets:!!_.geometry&&!!_.geometry.morphAttributes.position,morphNormals:!!_.geometry&&!!_.geometry.morphAttributes.normal,morphTargetsCount:_.geometry&&_.geometry.morphAttributes.position?_.geometry.morphAttributes.position.length:0,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:s.format,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&m.length>0,shadowMapType:t.shadowMap.type,toneMapping:s.toneMapped?t.toneMapping:so,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===ws,flipSided:s.side===bs,depthPacking:void 0!==s.depthPacking&&s.depthPacking,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(Il(e.fragmentShader)),n.push(Il(e.vertexShader))),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<m.length;t++)n.push(e[m[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;if(e){const t=su[e];n=Bc.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,r=a.length;t<r;t++){const e=a[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new gd(t,n,e,s),a.push(i)),i},releaseProgram:function(t){if(0===--t.usedTimes){const e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function _d(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function vd(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Td(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ed(t){const e=[];let n=0;const i=[],r=[],s=[],o={id:-1};function a(i,r,s,a,l,h){let c=e[n];const u=t.get(s);return void 0===c?(c={id:i.id,object:i,geometry:r,material:s,program:u.program||o,groupOrder:a,renderOrder:i.renderOrder,z:l,group:h},e[n]=c):(c.id=i.id,c.object=i,c.geometry=r,c.material=s,c.program=u.program||o,c.groupOrder=a,c.renderOrder=i.renderOrder,c.z=l,c.group=h),n++,c}return{opaque:i,transmissive:r,transparent:s,init:function(){n=0,i.length=0,r.length=0,s.length=0},push:function(t,e,n,o,l,h){const c=a(t,e,n,o,l,h);n.transmission>0?r.push(c):!0===n.transparent?s.push(c):i.push(c)},unshift:function(t,e,n,o,l,h){const c=a(t,e,n,o,l,h);n.transmission>0?r.unshift(c):!0===n.transparent?s.unshift(c):i.unshift(c)},finish:function(){for(let t=n,i=e.length;t<i;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){i.length>1&&i.sort(t||vd),r.length>1&&r.sort(e||Td),s.length>1&&s.sort(e||Td)}}}function xd(t){let e=new WeakMap;return{get:function(n,i){let r;return!1===e.has(n)?(r=new Ed(t),e.set(n,[r])):i>=e.get(n).length?(r=new Ed(t),e.get(n).push(r)):r=e.get(n)[i],r},dispose:function(){e=new WeakMap}}}function Id(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ml,color:new ec};break;case"SpotLight":n={position:new Ml,direction:new Ml,color:new ec,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ml,color:new ec,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ml,skyColor:new ec,groundColor:new ec};break;case"RectAreaLight":n={color:new ec,position:new Ml,halfWidth:new Ml,halfHeight:new Ml}}return t[e.id]=n,n}}}let bd=0;function wd(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Sd(t,e){const n=new Id,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vl};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vl,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)r.probe.push(new Ml);const s=new Ml,o=new ch,a=new ch;return{setup:function(s,o){let a=0,l=0,h=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,u=0,p=0,d=0,f=0,m=0,g=0,y=0;s.sort(wd);const _=!0!==o?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],o=e.color,v=e.intensity,T=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=o.r*v*_,l+=o.g*v*_,h+=o.b*v*_;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],v);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=E,r.directionalShadowMatrix[c]=e.shadow.matrix,m++}r.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(v*_),t.distance=T,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[p]=n,r.spotShadowMap[p]=E,r.spotShadowMatrix[p]=e.shadow.matrix,y++}r.spot[p]=t,p++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(o).multiplyScalar(v),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[d]=t,d++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[u]=n,r.pointShadowMap[u]=E,r.pointShadowMatrix[u]=e.shadow.matrix,g++}r.point[u]=t,u++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(v*_),t.groundColor.copy(e.groundColor).multiplyScalar(v*_),r.hemi[f]=t,f++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=ru.LTC_FLOAT_1,r.rectAreaLTC2=ru.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ru.LTC_HALF_1,r.rectAreaLTC2=ru.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=l,r.ambient[2]=h;const v=r.hash;v.directionalLength===c&&v.pointLength===u&&v.spotLength===p&&v.rectAreaLength===d&&v.hemiLength===f&&v.numDirectionalShadows===m&&v.numPointShadows===g&&v.numSpotShadows===y||(r.directional.length=c,r.spot.length=p,r.rectArea.length=d,r.point.length=u,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=y,v.directionalLength=c,v.pointLength=u,v.spotLength=p,v.rectAreaLength=d,v.hemiLength=f,v.numDirectionalShadows=m,v.numPointShadows=g,v.numSpotShadows=y,r.version=bd++)},setupView:function(t,e){let n=0,i=0,l=0,h=0,c=0;const u=e.matrixWorldInverse;for(let p=0,d=t.length;p<d;p++){const e=t[p];if(e.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),n++}else if(e.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),l++}else if(e.isRectAreaLight){const t=r.rectArea[h];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),a.identity(),o.copy(e.matrixWorld),o.premultiply(u),a.extractRotation(o),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),h++}else if(e.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),i++}else if(e.isHemisphereLight){const t=r.hemi[c];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(u),t.direction.normalize(),c++}}},state:r}}function Ad(t,e){const n=new Sd(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function Cd(t,e){let n=new WeakMap;return{get:function(i){let r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(i)?(r=new Ad(t,e),n.set(i,[r])):s>=n.get(i).length?(r=new Ad(t,e),n.get(i).push(r)):r=n.get(i)[s],r},dispose:function(){n=new WeakMap}}}class Rd extends Xh{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}Rd.prototype.isMeshDepthMaterial=!0;class Dd extends Xh{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Ml,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}Dd.prototype.isMeshDistanceMaterial=!0;const Od="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Nd="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Md(t,e,n){let i=new $c;const r=new vl,s=new vl,o=new Rl,a=new Rd({depthPacking:$a}),l=new Dd,h={},c=n.maxTextureSize,u={0:bs,1:Is,2:ws},p=new zc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new vl},radius:{value:4}},vertexShader:Od,fragmentShader:Nd}),d=p.clone();d.defines.HORIZONTAL_PASS=1;const f=new gc;f.setAttribute("position",new sc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Pc(f,p),g=this;function y(n,i){const r=e.update(m);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,d.needsUpdate=!0),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,p,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,d,m,null)}function _(e,n,i,r,s,o,c){let p=null;const d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(p=void 0!==d?d:!0===r.isPointLight?l:a,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const t=p.uuid,e=i.uuid;let n=h[t];void 0===n&&(n={},h[t]=n);let r=n[e];void 0===r&&(r=p.clone(),n[e]=r),p=r}return p.visible=i.visible,p.wireframe=i.wireframe,p.side=c===xs?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],p.alphaMap=i.alphaMap,p.alphaTest=i.alphaTest,p.clipShadows=i.clipShadows,p.clippingPlanes=i.clippingPlanes,p.clipIntersection=i.clipIntersection,p.displacementMap=i.displacementMap,p.displacementScale=i.displacementScale,p.displacementBias=i.displacementBias,p.wireframeLinewidth=i.wireframeLinewidth,p.linewidth=i.linewidth,!0===r.isPointLight&&!0===p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(r.matrixWorld),p.nearDistance=s,p.farDistance=o),p}function v(n,r,s,o,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===xs)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,h=e.length;l<h;l++){const h=e[l],c=r[h.materialIndex];if(c&&c.visible){const e=_(n,0,c,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,h)}}}else if(r.visible){const e=_(n,0,r,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)v(l[t],r,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ts,this.render=function(e,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(Ss),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let d=0,f=e.length;d<f;d++){const l=e[d],h=l.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const u=h.getFrameExtents();if(r.multiply(u),s.copy(h.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/u.x),r.x=s.x*u.x,h.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/u.y),r.y=s.y*u.y,h.mapSize.y=s.y)),null===h.map&&!h.isPointLightShadow&&this.type===xs){const t={minFilter:bo,magFilter:bo,format:Go};h.map=new Dl(r.x,r.y,t),h.map.texture.name=l.name+".shadowMap",h.mapPass=new Dl(r.x,r.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:Eo,magFilter:Eo,format:Go};h.map=new Dl(r.x,r.y,t),h.map.texture.name=l.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const f=h.getViewportCount();for(let t=0;t<f;t++){const e=h.getViewport(t);o.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),p.viewport(o),h.updateMatrices(l,t),i=h.getFrustum(),v(n,a,h.camera,l,this.type)}h.isPointLightShadow||this.type!==xs||y(h,a),h.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(l,h,u)}}function Pd(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new Rl;let i=null;const r=new Rl(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,o,a){!0===a&&(e*=o,i*=o,s*=o),n.set(e,i,s,o),!1===r.equals(n)&&(t.clearColor(e,i,s,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?L(2929):k(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Xs:t.depthFunc(512);break;case Zs:t.depthFunc(519);break;case Ks:t.depthFunc(513);break;case Qs:t.depthFunc(515);break;case Js:t.depthFunc(514);break;case $s:t.depthFunc(518);break;case to:t.depthFunc(516);break;case eo:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){let e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,h=null;return{setTest:function(t){e||(t?L(2960):k(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&s===o||(t.stencilFunc(e,n,o),i=e,r=n,s=o)},setOp:function(e,n,i){o===e&&a===n&&l===i||(t.stencilOp(e,n,i),o=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,h=null}}};let a={},l={},h=null,c=!1,u=null,p=null,d=null,f=null,m=null,g=null,y=null,_=!1,v=null,T=null,E=null,x=null,I=null;const b=t.getParameter(35661);let w=!1,S=0;const A=t.getParameter(7938);-1!==A.indexOf("WebGL")?(S=parseFloat(/^WebGL (\d)/.exec(A)[1]),w=S>=1):-1!==A.indexOf("OpenGL ES")&&(S=parseFloat(/^OpenGL ES (\d)/.exec(A)[1]),w=S>=2);let C=null,R={};const D=t.getParameter(3088),O=t.getParameter(2978),N=(new Rl).fromArray(D),M=(new Rl).fromArray(O);function P(e,n,i){const r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return s}const F={};function L(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function k(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}F[3553]=P(3553,3553,1),F[34067]=P(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),L(2929),s.setFunc(Qs),G(!1),H(_s),L(2884),z(Ss);const U={[Ns]:32774,[Ms]:32778,[Ps]:32779};if(i)U[Fs]=32775,U[Ls]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(U[Fs]=t.MIN_EXT,U[Ls]=t.MAX_EXT)}const B={[ks]:0,[Us]:1,[Bs]:768,[Gs]:770,[qs]:776,[Ws]:774,[Vs]:772,[zs]:769,[Hs]:771,[Ys]:775,[js]:773};function z(e,n,i,r,s,o,a,l){if(e!==Ss){if(!1===c&&(L(3042),c=!0),e===Os)s=s||n,o=o||i,a=a||r,n===p&&s===m||(t.blendEquationSeparate(U[n],U[s]),p=n,m=s),i===d&&r===f&&o===g&&a===y||(t.blendFuncSeparate(B[i],B[r],B[o],B[a]),d=i,f=r,g=o,y=a),u=e,_=null;else if(e!==u||l!==_){if(p===Ns&&m===Ns||(t.blendEquation(32774),p=Ns,m=Ns),l)switch(e){case As:t.blendFuncSeparate(1,771,1,771);break;case Cs:t.blendFunc(1,1);break;case Rs:t.blendFuncSeparate(0,0,769,771);break;case Ds:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case As:t.blendFuncSeparate(770,771,1,771);break;case Cs:t.blendFunc(770,1);break;case Rs:t.blendFunc(0,769);break;case Ds:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}d=null,f=null,g=null,y=null,u=e,_=l}}else!0===c&&(k(3042),c=!1)}function G(e){v!==e&&(e?t.frontFace(2304):t.frontFace(2305),v=e)}function H(e){e!==ys?(L(2884),e!==T&&(e===_s?t.cullFace(1029):e===vs?t.cullFace(1028):t.cullFace(1032))):k(2884),T=e}function V(e,n,i){e?(L(32823),x===n&&I===i||(t.polygonOffset(n,i),x=n,I=i)):k(32823)}function j(e){void 0===e&&(e=33984+b-1),C!==e&&(t.activeTexture(e),C=e)}return{buffers:{color:r,depth:s,stencil:o},enable:L,disable:k,bindFramebuffer:function(e,n){return l[e]!==n&&(t.bindFramebuffer(e,n),l[e]=n,i&&(36009===e&&(l[36160]=n),36160===e&&(l[36009]=n)),!0)},useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:z,setMaterial:function(t,e){t.side===ws?k(2884):L(2884);let n=t.side===bs;e&&(n=!n),G(n),t.blending===As&&!1===t.transparent?z(Ss):z(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);const i=t.stencilWrite;o.setTest(i),i&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),V(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?L(32926):k(32926)},setFlipSided:G,setCullFace:H,setLineWidth:function(e){e!==E&&(w&&t.lineWidth(e),E=e)},setPolygonOffset:V,setScissorTest:function(t){t?L(3089):k(3089)},activeTexture:j,bindTexture:function(e,n){null===C&&j();let i=R[C];void 0===i&&(i={type:void 0,texture:void 0},R[C]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||F[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=R[C];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===M.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),M.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),a={},C=null,R={},l={},h=null,c=!1,u=null,p=null,d=null,f=null,m=null,g=null,y=null,_=!1,v=null,T=null,E=null,x=null,I=null,N.set(0,0,t.canvas.width,t.canvas.height),M.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),o.reset()}}}function Fd(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,h=r.maxCubemapSize,c=r.maxTextureSize,u=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,d=new WeakMap;let f,m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(B){}function g(t,e){return m?new OffscreenCanvas(t,e):xl("canvas")}function y(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?yl:Math.floor,s=i(r*t.width),o=i(r*t.height);void 0===f&&(f=g(s,o));const a=n?g(s,o):f;a.width=s,a.height=o;return a.getContext("2d").drawImage(t,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return ml(t.width)&&ml(t.height)}function v(t,e){return t.generateMipmaps&&e&&t.minFilter!==Eo&&t.minFilter!==bo}function T(e){t.generateMipmap(e)}function E(n,i,r){if(!1===a)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),6407===i&&(5126===r&&(s=34837),5131===r&&(s=34843),5121===r&&(s=32849)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||e.get("EXT_color_buffer_float"),s}function x(t){return t===Eo||t===xo||t===Io?9728:9729}function I(e){const n=e.target;n.removeEventListener("dispose",I),function(e){const n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&d.delete(n),o.memory.textures--}function b(e){const n=e.target;n.removeEventListener("dispose",b),function(e){const n=e.texture,r=i.get(e),s=i.get(n);if(!e)return;void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),o.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)t.deleteFramebuffer(r.__webglFramebuffer[i]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[i]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let a=0,l=n.length;a<l;a++){const e=i.get(n[a]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),o.memory.textures--),i.remove(n[a])}i.remove(n),i.remove(e)}(n)}let w=0;function S(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=o.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void N(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function A(e,r){const o=i.get(e);e.version>0&&o.__version!==e.version?function(e,i,r){if(6!==i.image.length)return;O(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const o=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,c=[];for(let t=0;t<6;t++)c[t]=o||l?l?i.image[t].image:i.image[t]:y(i.image[t],!1,!0,h);const u=_(c[0])||a,p=s.convert(i.format),d=s.convert(i.type),f=E(i.internalFormat,p,d,i.encoding);let m;if(D(34067,i,u),o)for(let t=0;t<6;t++){m=c[t].mipmaps;for(let e=0;e<m.length;e++){const r=m[e];i.format!==Go&&i.format!==zo?null!==p?n.compressedTexImage2D(34069+t,e,f,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,f,r.width,r.height,0,p,d,r.data)}}else{m=i.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(34069+t,0,f,c[t].width,c[t].height,0,p,d,c[t].data);for(let e=0;e<m.length;e++){const i=m[e].image[t].image;n.texImage2D(34069+t,e+1,f,i.width,i.height,0,p,d,i.data)}}else{n.texImage2D(34069+t,0,f,p,d,c[t]);for(let e=0;e<m.length;e++){const i=m[e];n.texImage2D(34069+t,e+1,f,p,d,i.image[t])}}}v(i,u)&&T(34067);e.__version=i.version,i.onUpdate&&i.onUpdate(i)}(o,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture))}const C={[_o]:10497,[vo]:33071,[To]:33648},R={[Eo]:9728,[xo]:9984,[Io]:9986,[bo]:9729,[wo]:9985,[So]:9987};function D(n,s,o){if(o?(t.texParameteri(n,10242,C[s.wrapS]),t.texParameteri(n,10243,C[s.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,C[s.wrapR]),t.texParameteri(n,10240,R[s.magFilter]),t.texParameteri(n,10241,R[s.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),s.wrapS===vo&&s.wrapT===vo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,x(s.magFilter)),t.texParameteri(n,10241,x(s.minFilter)),s.minFilter!==Eo&&s.minFilter!==bo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(s.type===Mo&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&s.type===Po&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function O(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",I),e.__webglTexture=t.createTexture(),o.memory.textures++)}function N(e,i,r){let o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),O(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const l=function(t){return!a&&(t.wrapS!==vo||t.wrapT!==vo||t.minFilter!==Eo&&t.minFilter!==bo)}(i)&&!1===_(i.image),h=y(i.image,l,!1,c),u=_(h)||a,p=s.convert(i.format);let d,f=s.convert(i.type),m=E(i.internalFormat,p,f,i.encoding);D(o,i,u);const g=i.mipmaps;if(i.isDepthTexture)m=6402,a?m=i.type===Mo?36012:i.type===No?33190:i.type===Uo?35056:33189:i.type===Mo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Wo&&6402===m&&i.type!==Do&&i.type!==No&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Do,f=s.convert(i.type)),i.format===Yo&&6402===m&&(m=34041,i.type!==Uo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Uo,f=s.convert(i.type))),n.texImage2D(3553,0,m,h.width,h.height,0,p,f,null);else if(i.isDataTexture)if(g.length>0&&u){for(let t=0,e=g.length;t<e;t++)d=g[t],n.texImage2D(3553,t,m,d.width,d.height,0,p,f,d.data);i.generateMipmaps=!1}else n.texImage2D(3553,0,m,h.width,h.height,0,p,f,h.data);else if(i.isCompressedTexture)for(let t=0,s=g.length;t<s;t++)d=g[t],i.format!==Go&&i.format!==zo?null!==p?n.compressedTexImage2D(3553,t,m,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,d.width,d.height,0,p,f,d.data);else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,h.width,h.height,h.depth,0,p,f,h.data);else if(i.isDataTexture3D)n.texImage3D(32879,0,m,h.width,h.height,h.depth,0,p,f,h.data);else{const t=function(t,e,n){return!0===v(t,n)?Math.log2(Math.max(e.width,e.height))+1:t.mipmaps.length>0?t.mipmaps.length:1}(i,h,u),r=a&&!0!==i.isVideoTexture,s=void 0===e.__version;if(g.length>0&&u){r&&s&&n.texStorage2D(3553,t,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)d=g[t],r?n.texSubImage2D(3553,t,0,0,p,f,d):n.texImage2D(3553,t,m,p,f,d);i.generateMipmaps=!1}else r?(s&&n.texStorage2D(3553,t,m,h.width,h.height),n.texSubImage2D(3553,0,0,0,p,f,h)):n.texImage2D(3553,0,m,p,f,h)}v(i,u)&&T(o),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function M(e,r,o,a,l){const h=s.convert(o.format),c=s.convert(o.type),u=E(o.internalFormat,h,c,o.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,u,r.width,r.height,r.depth,0,h,c,null):n.texImage2D(l,0,u,r.width,r.height,0,h,c,null)),n.bindFramebuffer(36160,e),r.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,a,l,i.get(o).__webglTexture,0,L(r)):t.framebufferTexture2D(36160,a,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function P(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||n.useRenderToTexture){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Mo?r=36012:e.type===No&&(r=33190));const i=L(n);n.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=L(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):n.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=s.convert(e.format),o=s.convert(e.type),a=E(e.internalFormat,r,o,e.encoding),l=L(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,l,a,n.width,n.height):n.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,l,a,n.width,n.height):t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function F(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),S(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,o=L(r);if(r.depthTexture.format===Wo)r.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,o):t.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==Yo)throw new Error("Unknown depthTexture format");r.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,o):t.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),P(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),P(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function L(t){return a&&(t.useRenderbuffer||t.useRenderToTexture)?Math.min(u,t.samples):0}let k=!1,U=!1;this.allocateTextureUnit=function(){const t=w;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),w+=1,t},this.resetTextureUnits=function(){w=0},this.setTexture2D=S,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?N(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?N(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=A,this.rebindTextures=function(t,e,n){const r=i.get(t);void 0!==e&&M(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&F(t)},this.setupRenderTarget=function(e){const l=e.texture,h=i.get(e),c=i.get(l);e.addEventListener("dispose",b),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,o.memory.textures++);const u=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultipleRenderTargets,d=l.isDataTexture3D||l.isDataTexture2DArray,f=_(e)||a;if(!a||l.format!==zo||l.type!==Mo&&l.type!==Po||(l.format=Go,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u){h.__webglFramebuffer=[];for(let e=0;e<6;e++)h.__webglFramebuffer[e]=t.createFramebuffer()}else if(h.__webglFramebuffer=t.createFramebuffer(),p)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(e.useRenderbuffer)if(a){h.__webglMultisampledFramebuffer=t.createFramebuffer(),h.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,h.__webglColorRenderbuffer);const i=s.convert(l.format),r=s.convert(l.type),o=E(l.internalFormat,i,r,l.encoding),a=L(e);t.renderbufferStorageMultisample(36161,a,o,e.width,e.height),n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,h.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(h.__webglDepthRenderbuffer=t.createRenderbuffer(),P(h.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,c.__webglTexture),D(34067,l,f);for(let t=0;t<6;t++)M(h.__webglFramebuffer[t],e,l,36064,34069+t);v(l,f)&&T(34067),n.unbindTexture()}else if(p){const t=e.texture;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=i.get(s);n.bindTexture(3553,o.__webglTexture),D(3553,s,f),M(h.__webglFramebuffer,e,s,36064+r,3553),v(s,f)&&T(3553)}n.unbindTexture()}else{let t=3553;if(d)if(a){t=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(t,c.__webglTexture),D(t,l,f),M(h.__webglFramebuffer,e,l,36064,t),v(l,f)&&T(t),n.unbindTexture()}e.depthBuffer&&F(e)},this.updateRenderTargetMipmap=function(t){const e=_(t)||a,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=r.length;s<o;s++){const o=r[s];if(v(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=i.get(o).__webglTexture;n.bindTexture(e,r),T(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.useRenderbuffer)if(a){const r=e.width,s=e.height;let o=16384;const a=[36064],l=e.stencilBuffer?33306:36096;e.depthBuffer&&a.push(l),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024));const h=i.get(e);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),t.blitFramebuffer(0,0,r,s,0,0,r,s,o,9728),t.invalidateFramebuffer(36008,a),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=M,this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),k=!0),t=t.texture),S(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),U=!0),t=t.texture),A(t,e)}}function Ld(t,e,n){const i=n.isWebGL2;return{convert:function(t){let n;if(t===Ao)return 5121;if(t===Fo)return 32819;if(t===Lo)return 32820;if(t===ko)return 33635;if(t===Co)return 5120;if(t===Ro)return 5122;if(t===Do)return 5123;if(t===Oo)return 5124;if(t===No)return 5125;if(t===Mo)return 5126;if(t===Po)return i?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===Bo)return 6406;if(t===zo)return 6407;if(t===Go)return 6408;if(t===Ho)return 6409;if(t===Vo)return 6410;if(t===Wo)return 6402;if(t===Yo)return 34041;if(t===qo)return 6403;if(t===Xo)return 36244;if(t===Zo)return 33319;if(t===Ko)return 33320;if(t===Qo)return 36248;if(t===Jo)return 36249;if(t===$o||t===ta||t===ea||t===na){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===$o)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===ta)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===ea)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===na)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===ia||t===ra||t===sa||t===oa){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===ia)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ra)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===sa)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===oa)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===aa)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===la||t===ha)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===la)return n.COMPRESSED_RGB8_ETC2;if(t===ha)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===ca||t===ua||t===pa||t===da||t===fa||t===ma||t===ga||t===ya||t===_a||t===va||t===Ta||t===Ea||t===xa||t===Ia||t===wa||t===Sa||t===Aa||t===Ca||t===Ra||t===Da||t===Oa||t===Na||t===Ma||t===Pa||t===Fa||t===La||t===ka||t===Ua?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===ba?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===Uo?i?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class kd extends Hc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.cameras=t}}kd.prototype.isArrayCamera=!0;class Ud extends Fh{constructor(){super(),this.type="Group"}}Ud.prototype.isGroup=!0;const Bd={type:"move"};class zd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ud,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ud,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ml,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ml),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ud,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ml,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ml),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Bd))),l&&t.hand){s=!0;for(const s of t.hand.values()){const t=e.getJointPose(s,n);if(void 0===l.joints[s.jointName]){const t=new Ud;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[s.jointName]=t,l.add(t)}const i=l.joints[s.jointName];null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],o=i.position.distanceTo(r.position),a=.02,h=.005;l.inputState.pinching&&o>a+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=a-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),this}}class Gd extends Al{constructor(t,e,n,i,r,s,o,a,l,h){if((h=void 0!==h?h:Wo)!==Wo&&h!==Yo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&h===Wo&&(n=Do),void 0===n&&h===Yo&&(n=Uo),super(null,i,r,s,o,a,h,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:Eo,this.minFilter=void 0!==a?a:Eo,this.flipY=!1,this.generateMipmaps=!1}}Gd.prototype.isDepthTexture=!0;class Hd extends ol{constructor(t,e){super();const n=this;let i=null,r=1,s=null,o="local-floor";const a=t.extensions.has("WEBGL_multisampled_render_to_texture");let l=null,h=null,c=null,u=null,p=!1,d=null;const f=e.getContextAttributes();let m=null,g=null;const y=[],_=new Map,v=new Hc;v.layers.enable(1),v.viewport=new Rl;const T=new Hc;T.layers.enable(2),T.viewport=new Rl;const E=[v,T],x=new kd;x.layers.enable(1),x.layers.enable(2);let I=null,b=null;function w(t){const e=_.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function S(){_.forEach((function(t,e){t.disconnect(e)})),_.clear(),I=null,b=null,t.setRenderTarget(m),u=null,c=null,h=null,i=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(t){const e=i.inputSources;for(let n=0;n<y.length;n++)_.set(e[n],y[n]);for(let n=0;n<t.removed.length;n++){const e=t.removed[n],i=_.get(e);i&&(i.dispatchEvent({type:"disconnected",data:e}),_.delete(e))}for(let n=0;n<t.added.length;n++){const e=t.added[n],i=_.get(e);i&&i.dispatchEvent({type:"connected",data:e})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=y[t];return void 0===e&&(e=new zd,y[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=y[t];return void 0===e&&(e=new zd,y[t]=e),e.getGripSpace()},this.getHand=function(t){let e=y[t];return void 0===e&&(e=new zd,y[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return null!==c?c:u},this.getBinding=function(){return h},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(l){if(i=l,null!==i){if(m=t.getRenderTarget(),i.addEventListener("select",w),i.addEventListener("selectstart",w),i.addEventListener("selectend",w),i.addEventListener("squeeze",w),i.addEventListener("squeezestart",w),i.addEventListener("squeezeend",w),i.addEventListener("end",S),i.addEventListener("inputsourceschange",A),!0!==f.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const t={antialias:void 0!==i.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};u=new XRWebGLLayer(i,e,t),i.updateRenderState({baseLayer:u}),g=new Dl(u.framebufferWidth,u.framebufferHeight)}else{p=f.antialias;let t=null,n=null,s=null;f.depth&&(s=f.stencil?35056:33189,t=f.stencil?Yo:Wo,n=f.stencil?Uo:Do);const o={colorFormat:f.alpha||p?32856:32849,depthFormat:s,scaleFactor:r};h=new XRWebGLBinding(i,e),c=h.createProjectionLayer(o),i.updateRenderState({layers:[c]}),g=p?new Ol(c.textureWidth,c.textureHeight,{format:Go,type:Ao,depthTexture:new Gd(c.textureWidth,c.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,t),stencilBuffer:f.stencil,ignoreDepth:c.ignoreDepthValues,useRenderToTexture:a}):new Dl(c.textureWidth,c.textureHeight,{format:f.alpha?Go:zo,type:Ao,depthTexture:new Gd(c.textureWidth,c.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,t),stencilBuffer:f.stencil,ignoreDepth:c.ignoreDepthValues})}this.setFoveation(0),s=await i.requestReferenceSpace(o),N.setContext(i),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const C=new Ml,R=new Ml;function D(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;x.near=T.near=v.near=t.near,x.far=T.far=v.far=t.far,I===x.near&&b===x.far||(i.updateRenderState({depthNear:x.near,depthFar:x.far}),I=x.near,b=x.far);const e=t.parent,n=x.cameras;D(x,e);for(let i=0;i<n.length;i++)D(n[i],e);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),t.position.copy(x.position),t.quaternion.copy(x.quaternion),t.scale.copy(x.scale),t.matrix.copy(x.matrix),t.matrixWorld.copy(x.matrixWorld);const r=t.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(!0);2===n.length?function(t,e,n){C.setFromMatrixPosition(e.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const i=C.distanceTo(R),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],h=(r[9]-1)/r[5],c=(r[8]-1)/r[0],u=(s[8]+1)/s[0],p=o*c,d=o*u,f=i/(-c+u),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+f,y=a+f,_=p-m,v=d+(i-m),T=l*a/y*g,E=h*a/y*g;t.projectionMatrix.makePerspective(_,v,T,E,g,y)}(x,v,T):x.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let O=null;const N=new tu;N.setAnimationLoop((function(e,n){if(l=n.getViewerPose(s),d=n,null!==l){const e=l.views;null!==u&&(t.setRenderTargetFramebuffer(g,u.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let s=null;if(null!==u)s=u.getViewport(r);else{const e=h.getViewSubImage(c,r);s=e.viewport,0===i&&(t.setRenderTargetTextures(g,e.colorTexture,c.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}const o=E[i];o.matrix.fromArray(r.transform.matrix),o.projectionMatrix.fromArray(r.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===i&&x.matrix.copy(o.matrix),!0===n&&x.cameras.push(o)}}const r=i.inputSources;for(let t=0;t<y.length;t++){const e=y[t],i=r[t];e.update(i,n,s)}O&&O(e,n),d=null})),this.setAnimationLoop=function(t){O=t},this.dispose=function(){}}}function Vd(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const i=t.get(n).envMap;let r,s;i&&(e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),e.uv2Transform.value.copy(s.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===bs&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===bs&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,s,o){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===bs&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===bs&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===bs&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===bs&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===bs&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,o):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===bs&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===bs&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===bs&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===bs&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,s):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function jd(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=void 0!==t.canvas?t.canvas:function(){const t=xl("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let u=null,p=null;const d=[],f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ya,this.physicallyCorrectLights=!1,this.toneMapping=so,this.toneMappingExposure=1;const m=this;let g=!1,y=0,_=0,v=null,T=-1,E=null;const x=new Rl,I=new Rl;let b=null,w=e.width,S=e.height,A=1,C=null,R=null;const D=new Rl(0,0,w,S),O=new Rl(0,0,w,S);let N=!1;const M=[],P=new $c;let F=!1,L=!1,k=null;const U=new ch,B=new Ml,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===v?A:1}let H,V,j,W,Y,q,X,Z,K,Q,J,$,tt,et,nt,it,rt,st,ot,at,lt,ht,ct,ut=n;function pt(t,n){for(let i=0;i<t.length;i++){const r=t[i],s=e.getContext(r,n);if(null!==s)return s}return null}try{const t={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:h,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r".concat(ms)),e.addEventListener("webglcontextlost",mt,!1),e.addEventListener("webglcontextrestored",gt,!1),null===ut){const e=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&e.shift(),ut=pt(e,t),null===ut)throw pt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ut.getShaderPrecisionFormat&&(ut.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ct){throw console.error("THREE.WebGLRenderer: "+Ct.message),Ct}function dt(){H=new Lu(ut),V=new hu(ut,H,t),H.init(V),ht=new Ld(ut,H,V),j=new Pd(ut,H,V),M[0]=1029,W=new Bu(ut),Y=new _d,q=new Fd(ut,H,j,Y,V,ht,W),X=new uu(m),Z=new Fu(m),K=new eu(ut,V),ct=new au(ut,H,K,V),Q=new ku(ut,K,W,ct),J=new Wu(ut,Q,K,W),ot=new ju(ut,V,q),it=new cu(Y),$=new yd(m,X,Z,H,V,ct,it),tt=new Vd(Y),et=new xd(Y),nt=new Cd(H,V),st=new ou(m,X,j,J,a),rt=new Md(m,J,V),at=new lu(ut,H,W,V),lt=new Uu(ut,H,W,V),W.programs=$.programs,m.capabilities=V,m.extensions=H,m.properties=Y,m.renderLists=et,m.shadowMap=rt,m.state=j,m.info=W}dt();const ft=new Hd(m,ut);function mt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function gt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=W.autoReset,e=rt.enabled,n=rt.autoUpdate,i=rt.needsUpdate,r=rt.type;dt(),W.autoReset=t,rt.enabled=e,rt.autoUpdate=n,rt.needsUpdate=i,rt.type=r}function yt(t){const e=t.target;e.removeEventListener("dispose",yt),function(t){(function(t){const e=Y.get(t).programs;void 0!==e&&e.forEach((function(t){$.releaseProgram(t)}))})(t),Y.remove(t)}(e)}this.xr=ft,this.getContext=function(){return ut},this.getContextAttributes=function(){return ut.getContextAttributes()},this.forceContextLoss=function(){const t=H.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=H.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(t){void 0!==t&&(A=t,this.setSize(w,S,!1))},this.getSize=function(t){return t.set(w,S)},this.setSize=function(t,n,i){ft.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(w=t,S=n,e.width=Math.floor(t*A),e.height=Math.floor(n*A),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(w*A,S*A).floor()},this.setDrawingBufferSize=function(t,n,i){w=t,S=n,A=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(x)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,n,i){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,i),j.viewport(x.copy(D).multiplyScalar(A).floor())},this.getScissor=function(t){return t.copy(O)},this.setScissor=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),j.scissor(I.copy(O).multiplyScalar(A).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(t){j.setScissorTest(N=t)},this.setOpaqueSort=function(t){C=t},this.setTransparentSort=function(t){R=t},this.getClearColor=function(t){return t.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(t,e,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),ut.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",mt,!1),e.removeEventListener("webglcontextrestored",gt,!1),et.dispose(),nt.dispose(),Y.dispose(),X.dispose(),Z.dispose(),J.dispose(),ct.dispose(),ft.dispose(),ft.removeEventListener("sessionstart",vt),ft.removeEventListener("sessionend",Tt),k&&(k.dispose(),k=null),Et.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=z);const o=r.isMesh&&r.matrixWorld.determinant()<0,a=function(t,e,n,i,r){!0!==e.isScene&&(e=z);q.resetTextureUnits();const s=e.fog,o=i.isMeshStandardMaterial?e.environment:null,a=null===v?m.outputEncoding:v.texture.encoding,l=(i.isMeshStandardMaterial?Z:X).get(i.envMap||o),h=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=n.morphAttributes.position?n.morphAttributes.position.length:0,g=Y.get(i),y=p.state.lights;if(!0===F&&(!0===L||t!==E)){const e=t===E&&i.id===T;it.setState(i,t,e)}let _=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputEncoding!==a||r.isInstancedMesh&&!1===g.instancing?_=!0:r.isInstancedMesh||!0!==g.instancing?r.isSkinnedMesh&&!1===g.skinning?_=!0:r.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||i.fog&&g.fog!==s?_=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===it.numPlanes&&g.numIntersection===it.numIntersection?(g.vertexAlphas!==h||g.vertexTangents!==c||g.morphTargets!==u||g.morphNormals!==d||!0===V.isWebGL2&&g.morphTargetsCount!==f)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,g.__version=i.version);let x=g.currentProgram;!0===_&&(x=St(i,e,r));let I=!1,b=!1,w=!1;const C=x.getUniforms(),R=g.uniforms;j.useProgram(x.program)&&(I=!0,b=!0,w=!0);i.id!==T&&(T=i.id,b=!0);if(I||E!==t){if(C.setValue(ut,"projectionMatrix",t.projectionMatrix),V.logarithmicDepthBuffer&&C.setValue(ut,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),E!==t&&(E=t,b=!0,w=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=C.map.cameraPosition;void 0!==e&&e.setValue(ut,B.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&C.setValue(ut,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&C.setValue(ut,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){C.setOptional(ut,r,"bindMatrix"),C.setOptional(ut,r,"bindMatrixInverse");const t=r.skeleton;t&&(V.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),C.setValue(ut,"boneTexture",t.boneTexture,q),C.setValue(ut,"boneTextureSize",t.boneTextureSize)):C.setOptional(ut,t,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ot.update(r,n,i,x);(b||g.receiveShadow!==r.receiveShadow)&&(g.receiveShadow=r.receiveShadow,C.setValue(ut,"receiveShadow",r.receiveShadow));b&&(C.setValue(ut,"toneMappingExposure",m.toneMappingExposure),g.needsLights&&(O=w,(D=R).ambientLightColor.needsUpdate=O,D.lightProbe.needsUpdate=O,D.directionalLights.needsUpdate=O,D.directionalLightShadows.needsUpdate=O,D.pointLights.needsUpdate=O,D.pointLightShadows.needsUpdate=O,D.spotLights.needsUpdate=O,D.spotLightShadows.needsUpdate=O,D.rectAreaLights.needsUpdate=O,D.hemisphereLights.needsUpdate=O),s&&i.fog&&tt.refreshFogUniforms(R,s),tt.refreshMaterialUniforms(R,i,A,S,k),Kp.upload(ut,g.uniformsList,R,q));var D,O;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Kp.upload(ut,g.uniformsList,R,q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&C.setValue(ut,"center",r.center);return C.setValue(ut,"modelViewMatrix",r.modelViewMatrix),C.setValue(ut,"normalMatrix",r.normalMatrix),C.setValue(ut,"modelMatrix",r.matrixWorld),x}(t,e,n,i,r);j.setMaterial(i,o);let l=n.index;const h=n.attributes.position;if(null===l){if(void 0===h||0===h.count)return}else if(0===l.count)return;let c,u=1;!0===i.wireframe&&(l=Q.getWireframeAttribute(n),u=2),ct.setup(r,i,a,n,l);let d=at;null!==l&&(c=K.get(l),d=lt,d.setIndex(c));const f=null!==l?l.count:h.count,g=n.drawRange.start*u,y=n.drawRange.count*u,_=null!==s?s.start*u:0,x=null!==s?s.count*u:1/0,I=Math.max(g,_),b=Math.min(f,g+y,_+x)-1,w=Math.max(0,b-I+1);if(0!==w){if(r.isMesh)!0===i.wireframe?(j.setLineWidth(i.wireframeLinewidth*G()),d.setMode(1)):d.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),j.setLineWidth(t*G()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(I,w,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(I,w,t)}else d.render(I,w)}},this.compile=function(t,e){p=nt.get(t),p.init(),f.push(p),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(m.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++){St(n[i],t,e)}else St(n,t,e)})),f.pop(),p=null};let _t=null;function vt(){Et.stop()}function Tt(){Et.start()}const Et=new tu;function xt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||P.intersectsSprite(t)){i&&B.setFromMatrixPosition(t.matrixWorld).applyMatrix4(U);const e=J.update(t),r=t.material;r.visible&&u.push(t,e,r,n,B.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==W.render.frame&&(t.skeleton.update(),t.skeleton.frame=W.render.frame),!t.frustumCulled||P.intersectsObject(t))){i&&B.setFromMatrixPosition(t.matrixWorld).applyMatrix4(U);const e=J.update(t),r=t.material;if(Array.isArray(r)){const i=e.groups;for(let s=0,o=i.length;s<o;s++){const o=i[s],a=r[o.materialIndex];a&&a.visible&&u.push(t,e,a,n,B.z,o)}}else r.visible&&u.push(t,e,r,n,B.z,null)}const r=t.children;for(let s=0,o=r.length;s<o;s++)xt(r[s],e,n,i)}function It(t,e,n,i){const r=t.opaque,s=t.transmissive,a=t.transparent;p.setupLightsView(n),s.length>0&&function(t,e,n){if(null===k){const t=!0===o&&!0===V.isWebGL2;k=new(t?Ol:Dl)(1024,1024,{generateMipmaps:!0,type:null!==ht.convert(Po)?Po:Ao,minFilter:So,magFilter:Eo,wrapS:vo,wrapT:vo,useRenderToTexture:H.has("WEBGL_multisampled_render_to_texture")})}const i=m.getRenderTarget();m.setRenderTarget(k),m.clear();const r=m.toneMapping;m.toneMapping=so,bt(t,e,n),m.toneMapping=r,q.updateMultisampleRenderTarget(k),q.updateRenderTargetMipmap(k),m.setRenderTarget(i)}(r,e,n),i&&j.viewport(x.copy(i)),r.length>0&&bt(r,e,n),s.length>0&&bt(s,e,n),a.length>0&&bt(a,e,n)}function bt(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.object,a=s.geometry,l=null===i?s.material:i,h=s.group;o.layers.test(n.layers)&&wt(o,e,n,a,l,h)}}function wt(t,e,n,i,r,s){t.onBeforeRender(m,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(m,e,n,i,t,s),!0===r.transparent&&r.side===ws?(r.side=bs,r.needsUpdate=!0,m.renderBufferDirect(n,e,i,r,t,s),r.side=Is,r.needsUpdate=!0,m.renderBufferDirect(n,e,i,r,t,s),r.side=ws):m.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(m,e,n,i,r,s)}function St(t,e,n){!0!==e.isScene&&(e=z);const i=Y.get(t),r=p.state.lights,s=p.state.shadowsArray,o=r.state.version,a=$.getParameters(t,r.state,s,e,n),l=$.getProgramCacheKey(a);let h=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?Z:X).get(t.envMap||i.environment),void 0===h&&(t.addEventListener("dispose",yt),h=new Map,i.programs=h);let c=h.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===o)return At(t,a),c}else a.uniforms=$.getUniforms(t),t.onBuild(n,a,m),t.onBeforeCompile(a,m),c=$.acquireProgram(a,l),h.set(l,c),i.uniforms=a.uniforms;const u=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=it.uniform),At(t,a),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotShadowMatrix.value=r.state.spotShadowMatrix,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=c.getUniforms(),f=Kp.seqWithValue(d.seq,u);return i.currentProgram=c,i.uniformsList=f,c}function At(t,e){const n=Y.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents}Et.setAnimationLoop((function(t){_t&&_t(t)})),"undefined"!==typeof window&&Et.setContext(window),this.setAnimationLoop=function(t){_t=t,ft.setAnimationLoop(t),null===t?Et.stop():Et.start()},ft.addEventListener("sessionstart",vt),ft.addEventListener("sessionend",Tt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ft.enabled&&!0===ft.isPresenting&&(!0===ft.cameraAutoUpdate&&ft.updateCamera(e),e=ft.getCamera()),!0===t.isScene&&t.onBeforeRender(m,t,e,v),p=nt.get(t,f.length),p.init(),f.push(p),U.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),P.setFromProjectionMatrix(U),L=this.localClippingEnabled,F=it.init(this.clippingPlanes,L,e),u=et.get(t,d.length),u.init(),d.push(u),xt(t,e,0,m.sortObjects),u.finish(),!0===m.sortObjects&&u.sort(C,R),!0===F&&it.beginShadows();const n=p.state.shadowsArray;if(rt.render(n,t,e),!0===F&&it.endShadows(),!0===this.info.autoReset&&this.info.reset(),st.render(u,t),p.setupLights(m.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];It(u,t,i,i.viewport)}}else It(u,t,e);null!==v&&(q.updateMultisampleRenderTarget(v),q.updateRenderTargetMipmap(v)),!0===t.isScene&&t.onAfterRender(m,t,e),j.buffers.depth.setTest(!0),j.buffers.depth.setMask(!0),j.buffers.color.setMask(!0),j.setPolygonOffset(!1),ct.resetDefaultState(),T=-1,E=null,f.pop(),p=f.length>0?f[f.length-1]:null,d.pop(),u=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(t,e,n){Y.get(t.texture).__webglTexture=e,Y.get(t.depthTexture).__webglTexture=n;const i=Y.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||t.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),t.useRenderToTexture=!1,t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(t,e){const n=Y.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v=t,y=e,_=n;let i=!0;if(t){const e=Y.get(t);void 0!==e.__useDefaultFramebuffer?(j.bindFramebuffer(36160,null),i=!1):void 0===e.__webglFramebuffer?q.setupRenderTarget(t):e.__hasExternalTextures&&q.rebindTextures(t,Y.get(t.texture).__webglTexture,Y.get(t.depthTexture).__webglTexture)}let r=null,s=!1,o=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const i=Y.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=i[e],s=!0):r=t.useRenderbuffer?Y.get(t).__webglMultisampledFramebuffer:i,x.copy(t.viewport),I.copy(t.scissor),b=t.scissorTest}else x.copy(D).multiplyScalar(A).floor(),I.copy(O).multiplyScalar(A).floor(),b=N;if(j.bindFramebuffer(36160,r)&&V.drawBuffers&&i){let e=!1;if(t)if(t.isWebGLMultipleRenderTargets){const n=t.texture;if(M.length!==n.length||36064!==M[0]){for(let t=0,e=n.length;t<e;t++)M[t]=36064+t;M.length=n.length,e=!0}}else 1===M.length&&36064===M[0]||(M[0]=36064,M.length=1,e=!0);else 1===M.length&&1029===M[0]||(M[0]=1029,M.length=1,e=!0);e&&(V.isWebGL2?ut.drawBuffers(M):H.get("WEBGL_draw_buffers").drawBuffersWEBGL(M))}if(j.viewport(x),j.scissor(I),j.setScissorTest(b),s){const i=Y.get(t.texture);ut.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}else if(o){const i=Y.get(t.texture),r=e||0;ut.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}T=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=Y.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){j.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,l=o.type;if(a!==Go&&ht.convert(a)!==ut.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const h=l===Po&&(H.has("EXT_color_buffer_half_float")||V.isWebGL2&&H.has("EXT_color_buffer_float"));if(l!==Ao&&ht.convert(l)!==ut.getParameter(35738)&&(l!==Mo||!(V.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ut.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ut.readPixels(e,n,i,r,ht.convert(a),ht.convert(l),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==v?Y.get(v).__webglFramebuffer:null;j.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i);let o=ht.convert(e.format);V.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),q.setTexture2D(e,0),ut.copyTexImage2D(3553,n,o,t.x,t.y,r,s,0),j.unbindTexture()},this.copyTextureToTexture=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.image.width,s=e.image.height,o=ht.convert(n.format),a=ht.convert(n.type);q.setTexture2D(n,0),ut.pixelStorei(37440,n.flipY),ut.pixelStorei(37441,n.premultiplyAlpha),ut.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ut.texSubImage2D(3553,i,t.x,t.y,r,s,o,a,e.image.data):e.isCompressedTexture?ut.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):ut.texSubImage2D(3553,i,t.x,t.y,o,a,e.image),0===i&&n.generateMipmaps&&ut.generateMipmap(3553),j.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=ht.convert(i.format),h=ht.convert(i.type);let c;if(i.isDataTexture3D)q.setTexture3D(i,0),c=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(i,0),c=35866}ut.pixelStorei(37440,i.flipY),ut.pixelStorei(37441,i.premultiplyAlpha),ut.pixelStorei(3317,i.unpackAlignment);const u=ut.getParameter(3314),p=ut.getParameter(32878),d=ut.getParameter(3316),f=ut.getParameter(3315),g=ut.getParameter(32877),y=n.isCompressedTexture?n.mipmaps[0]:n.image;ut.pixelStorei(3314,y.width),ut.pixelStorei(32878,y.height),ut.pixelStorei(3316,t.min.x),ut.pixelStorei(3315,t.min.y),ut.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?ut.texSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,h,y.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ut.compressedTexSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,y.data)):ut.texSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,h,y),ut.pixelStorei(3314,u),ut.pixelStorei(32878,p),ut.pixelStorei(3316,d),ut.pixelStorei(3315,f),ut.pixelStorei(32877,g),0===r&&i.generateMipmaps&&ut.generateMipmap(c),j.unbindTexture()},this.initTexture=function(t){q.setTexture2D(t,0),j.unbindTexture()},this.resetState=function(){y=0,_=0,v=null,j.reset(),ct.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}jd.prototype.isWebGLRenderer=!0;(class extends jd{}).prototype.isWebGL1Renderer=!0;class Wd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.name="",this.color=new ec(t),this.density=e}clone(){return new Wd(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Wd.prototype.isFogExp2=!0;class Yd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.name="",this.color=new ec(t),this.near=e,this.far=n}clone(){return new Yd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Yd.prototype.isFog=!0;class qd extends Fh{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}qd.prototype.isScene=!0;class Xd{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=il,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ul()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ul()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ul()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Xd.prototype.isInterleavedBuffer=!0;const Zd=new Ml;class Kd{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Zd.x=this.getX(e),Zd.y=this.getY(e),Zd.z=this.getZ(e),Zd.applyMatrix4(t),this.setXYZ(e,Zd.x,Zd.y,Zd.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Zd.x=this.getX(e),Zd.y=this.getY(e),Zd.z=this.getZ(e),Zd.applyNormalMatrix(t),this.setXYZ(e,Zd.x,Zd.y,Zd.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Zd.x=this.getX(e),Zd.y=this.getY(e),Zd.z=this.getZ(e),Zd.transformDirection(t),this.setXYZ(e,Zd.x,Zd.y,Zd.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new sc(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Kd(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Kd.prototype.isInterleavedBufferAttribute=!0;class Qd extends Xh{constructor(t){super(),this.type="SpriteMaterial",this.color=new ec(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Jd;Qd.prototype.isSpriteMaterial=!0;const $d=new Ml,tf=new Ml,ef=new Ml,nf=new vl,rf=new vl,sf=new ch,of=new Ml,af=new Ml,lf=new Ml,hf=new vl,cf=new vl,uf=new vl;class pf extends Fh{constructor(t){if(super(),this.type="Sprite",void 0===Jd){Jd=new gc;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Xd(t,5);Jd.setIndex([0,1,2,0,2,3]),Jd.setAttribute("position",new Kd(e,3,0,!1)),Jd.setAttribute("uv",new Kd(e,2,3,!1))}this.geometry=Jd,this.material=void 0!==t?t:new Qd,this.center=new vl(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),tf.setFromMatrixScale(this.matrixWorld),sf.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ef.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&tf.multiplyScalar(-ef.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;df(of.set(-.5,-.5,0),ef,s,tf,i,r),df(af.set(.5,-.5,0),ef,s,tf,i,r),df(lf.set(.5,.5,0),ef,s,tf,i,r),hf.set(0,0),cf.set(1,0),uf.set(1,1);let o=t.ray.intersectTriangle(of,af,lf,!1,$d);if(null===o&&(df(af.set(-.5,.5,0),ef,s,tf,i,r),cf.set(0,1),o=t.ray.intersectTriangle(of,lf,af,!1,$d),null===o))return;const a=t.ray.origin.distanceTo($d);a<t.near||a>t.far||e.push({distance:a,point:$d.clone(),uv:Yh.getUV($d,of,af,lf,hf,cf,uf,new vl),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function df(t,e,n,i,r,s){nf.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(rf.x=s*nf.x-r*nf.y,rf.y=r*nf.x+s*nf.y):rf.copy(nf),t.copy(e),t.x+=rf.x,t.y+=rf.y,t.applyMatrix4(sf)}pf.prototype.isSprite=!0;const ff=new Ml,mf=new Rl,gf=new Rl,yf=new Ml,_f=new ch;class vf extends Pc{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ch,this.bindMatrixInverse=new ch}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Rl,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;mf.fromBufferAttribute(i.attributes.skinIndex,t),gf.fromBufferAttribute(i.attributes.skinWeight,t),ff.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const t=gf.getComponent(r);if(0!==t){const i=mf.getComponent(r);_f.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(yf.copy(ff).applyMatrix4(_f),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}vf.prototype.isSkinnedMesh=!0;class Tf extends Fh{constructor(){super(),this.type="Bone"}}Tf.prototype.isBone=!0;class Ef extends Al{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Eo,r=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Eo;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,i,r,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.image={data:t,width:e,height:n},this.magFilter=i,this.minFilter=r,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Ef.prototype.isDataTexture=!0;const xf=new ch,If=new ch;class bf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=ul(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new ch)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new ch;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=t.length;r<s;r++){const i=t[r]?t[r].matrixWorld:If;xf.multiplyMatrices(i,e[r]),xf.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new bf(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=gl(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ef(e,t,t,Go,Mo);return this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Tf),this.bones.push(r),this.boneInverses.push((new ch).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class wf extends sc{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;"number"===typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}wf.prototype.isInstancedBufferAttribute=!0;const Sf=new ch,Af=new ch,Cf=[],Rf=new Pc;class Df extends Pc{constructor(t,e,n){super(t,e),this.instanceMatrix=new wf(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Rf.geometry=this.geometry,Rf.material=this.material,void 0!==Rf.material)for(let r=0;r<i;r++){this.getMatrixAt(r,Sf),Af.multiplyMatrices(n,Sf),Rf.matrixWorld=Af,Rf.raycast(t,Cf);for(let t=0,n=Cf.length;t<n;t++){const n=Cf[t];n.instanceId=r,n.object=this,e.push(n)}Cf.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new wf(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Df.prototype.isInstancedMesh=!0;class Of extends Xh{constructor(t){super(),this.type="LineBasicMaterial",this.color=new ec(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Of.prototype.isLineBasicMaterial=!0;const Nf=new Ml,Mf=new Ml,Pf=new ch,Ff=new hh,Lf=new eh;class kf extends Fh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gc,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Of;super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)Nf.fromBufferAttribute(e,t-1),Mf.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Nf.distanceTo(Mf);t.setAttribute("lineDistance",new lc(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Lf.copy(n.boundingSphere),Lf.applyMatrix4(i),Lf.radius+=r,!1===t.ray.intersectsSphere(Lf))return;Pf.copy(i).invert(),Ff.copy(t.ray).applyMatrix4(Pf);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new Ml,h=new Ml,c=new Ml,u=new Ml,p=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){for(let n=Math.max(0,s.start),o=Math.min(i.count,s.start+s.count)-1;n<o;n+=p){const s=i.getX(n),o=i.getX(n+1);l.fromBufferAttribute(r,s),h.fromBufferAttribute(r,o);if(Ff.distanceSqToSegment(l,h,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const p=t.ray.origin.distanceTo(u);p<t.near||p>t.far||e.push({distance:p,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),i=Math.min(r.count,s.start+s.count)-1;n<i;n+=p){l.fromBufferAttribute(r,n),h.fromBufferAttribute(r,n+1);if(Ff.distanceSqToSegment(l,h,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(u);i<t.near||i>t.far||e.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}kf.prototype.isLine=!0;const Uf=new Ml,Bf=new Ml;class zf extends kf{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)Uf.fromBufferAttribute(e,t),Bf.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Uf.distanceTo(Bf);t.setAttribute("lineDistance",new lc(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}zf.prototype.isLineSegments=!0;class Gf extends kf{constructor(t,e){super(t,e),this.type="LineLoop"}}Gf.prototype.isLineLoop=!0;class Hf extends Xh{constructor(t){super(),this.type="PointsMaterial",this.color=new ec(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}Hf.prototype.isPointsMaterial=!0;const Vf=new ch,jf=new hh,Wf=new eh,Yf=new Ml;class qf extends Fh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gc,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hf;super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Wf.copy(n.boundingSphere),Wf.applyMatrix4(i),Wf.radius+=r,!1===t.ray.intersectsSphere(Wf))return;Vf.copy(i).invert(),jf.copy(t.ray).applyMatrix4(Vf);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position;if(null!==r){for(let n=Math.max(0,s.start),l=Math.min(r.count,s.start+s.count);n<l;n++){const s=r.getX(n);Yf.fromBufferAttribute(o,s),Xf(Yf,s,a,i,t,e,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(o.count,s.start+s.count);n<r;n++)Yf.fromBufferAttribute(o,n),Xf(Yf,n,a,i,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Xf(t,e,n,i,r,s,o){const a=jf.distanceSqToPoint(t);if(a<n){const n=new Ml;jf.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:o})}}qf.prototype.isPoints=!0;(class extends Al{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.format=void 0!==o?o:zo,this.minFilter=void 0!==s?s:bo,this.magFilter=void 0!==r?r:bo,this.generateMipmaps=!1;const h=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){h.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;class Zf extends Al{constructor(t,e,n,i,r,s,o,a,l,h,c,u){super(null,s,o,a,l,h,i,r,c,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}Zf.prototype.isCompressedTexture=!0;(class extends Al{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;class Kf extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};const l=this;i=Math.floor(i),r=Math.floor(r);const h=[],c=[],u=[],p=[];let d=0;const f=[],m=n/2;let g=0;function y(n){const r=d,s=new vl,f=new Ml;let y=0;const _=!0===n?t:e,v=!0===n?1:-1;for(let t=1;t<=i;t++)c.push(0,m*v,0),u.push(0,v,0),p.push(.5,.5),d++;const T=d;for(let t=0;t<=i;t++){const e=t/i*a+o,n=Math.cos(e),r=Math.sin(e);f.x=_*r,f.y=m*v,f.z=_*n,c.push(f.x,f.y,f.z),u.push(0,v,0),s.x=.5*n+.5,s.y=.5*r*v+.5,p.push(s.x,s.y),d++}for(let t=0;t<i;t++){const e=r+t,i=T+t;!0===n?h.push(i,i+1,e):h.push(i+1,i,e),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){const s=new Ml,y=new Ml;let _=0;const v=(e-t)/n;for(let l=0;l<=r;l++){const h=[],g=l/r,_=g*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*a+o,l=Math.sin(r),f=Math.cos(r);y.x=_*l,y.y=-g*n+m,y.z=_*f,c.push(y.x,y.y,y.z),s.set(l,v,f).normalize(),u.push(s.x,s.y,s.z),p.push(e,1-g),h.push(d++)}f.push(h)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=f[e][t],i=f[e+1][t],r=f[e+1][t+1],s=f[e][t+1];h.push(n,i,s),h.push(i,r,s),_+=6}l.addGroup(g,_,0),g+=_}(),!1===s&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(h),this.setAttribute("position",new lc(c,3)),this.setAttribute("normal",new lc(u,3)),this.setAttribute("uv",new lc(p,2))}static fromJSON(t){return new Kf(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Qf extends Kf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new Qf(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Jf extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],s=[];function o(t,e,n,i){const r=i+1,s=[];for(let o=0;o<=r;o++){s[o]=[];const i=t.clone().lerp(n,o/r),a=e.clone().lerp(n,o/r),l=r-o;for(let t=0;t<=l;t++)s[o][t]=0===t&&o===r?i:i.clone().lerp(a,t/l)}for(let o=0;o<r;o++)for(let t=0;t<2*(r-o)-1;t++){const e=Math.floor(t/2);t%2===0?(a(s[o][e+1]),a(s[o+1][e]),a(s[o][e])):(a(s[o][e+1]),a(s[o+1][e+1]),a(s[o+1][e]))}}function a(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function h(t,e,n,i){i<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=i/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new Ml,i=new Ml,r=new Ml;for(let s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),o(n,i,r,t)}(i),function(t){const e=new Ml;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new Ml;for(let n=0;n<r.length;n+=3){t.x=r[n+0],t.y=r[n+1],t.z=r[n+2];const i=c(t)/2/Math.PI+.5,o=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);s.push(i,1-o)}var e;(function(){const t=new Ml,e=new Ml,n=new Ml,i=new Ml,o=new vl,a=new vl,l=new vl;for(let u=0,p=0;u<r.length;u+=9,p+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),o.set(s[p+0],s[p+1]),a.set(s[p+2],s[p+3]),l.set(s[p+4],s[p+5]),i.copy(t).add(e).add(n).divideScalar(3);const d=c(i);h(o,p+0,t,d),h(a,p+2,e,d),h(l,p+4,n,d)}})(),function(){for(let t=0;t<s.length;t+=6){const e=s[t+0],n=s[t+2],i=s[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),i<.2&&(s[t+4]+=1))}}()}(),this.setAttribute("position",new lc(r,3)),this.setAttribute("normal",new lc(r.slice(),3)),this.setAttribute("uv",new lc(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new Jf(t.vertices,t.indices,t.radius,t.details)}}const $f=new Ml,tm=new Ml,em=new Ml,nm=new Yh;class im extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(hl*e),s=t.getIndex(),o=t.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],h=["a","b","c"],c=new Array(3),u={},p=[];for(let t=0;t<a;t+=3){s?(l[0]=s.getX(t),l[1]=s.getX(t+1),l[2]=s.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:a}=nm;if(e.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),a.fromBufferAttribute(o,l[2]),nm.getNormal(em),c[0]="".concat(Math.round(e.x*i),",").concat(Math.round(e.y*i),",").concat(Math.round(e.z*i)),c[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),c[2]="".concat(Math.round(a.x*i),",").concat(Math.round(a.y*i),",").concat(Math.round(a.z*i)),c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=c[t],i=c[e],s=nm[h[t]],o=nm[h[e]],a="".concat(n,"_").concat(i),d="".concat(i,"_").concat(n);d in u&&u[d]?(em.dot(u[d].normal)<=r&&(p.push(s.x,s.y,s.z),p.push(o.x,o.y,o.z)),u[d]=null):a in u||(u[a]={index0:l[t],index1:l[e],normal:em.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];$f.fromBufferAttribute(o,e),tm.fromBufferAttribute(o,n),p.push($f.x,$f.y,$f.z),p.push(tm.x,tm.y,tm.z)}this.setAttribute("position",new lc(p,3))}}}class rm{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let s;s=e||t*n[r-1];let o,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),o=n[i]-s,o<0)a=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const h=n[i];return(i+(s-h)/(n[i+1]-h))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),o=this.getPoint(r),a=e||(s.isVector2?new vl:new Ml);return a.copy(o).sub(s).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Ml,i=[],r=[],s=[],o=new Ml,a=new ch;for(let p=0;p<=t;p++){const e=p/t;i[p]=this.getTangentAt(e,new Ml)}r[0]=new Ml,s[0]=new Ml;let l=Number.MAX_VALUE;const h=Math.abs(i[0].x),c=Math.abs(i[0].y),u=Math.abs(i[0].z);h<=l&&(l=h,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let p=1;p<=t;p++){if(r[p]=r[p-1].clone(),s[p]=s[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(pl(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(a.makeRotationAxis(o,t))}s[p].crossVectors(i[p],r[p])}if(!0===e){let e=Math.acos(pl(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],e*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class sm extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const n=e||new vl,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const o=this.aStartAngle+t*r;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,i=l-this.aY;a=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}sm.prototype.isEllipseCurve=!0;class om extends sm{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.type="ArcCurve"}}function am(){let t=0,e=0,n=0,i=0;function r(r,s,o,a){t=r,e=o,n=-3*r+3*s-2*o-a,i=2*r-2*s+o+a}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,o,a){let l=(e-t)/s-(n-t)/(s+o)+(n-e)/o,h=(n-e)/o-(i-e)/(o+a)+(i-n)/a;l*=o,h*=o,r(e,n,l,h)},calc:function(r){const s=r*r;return t+e*r+n*s+i*(s*r)}}}om.prototype.isArcCurve=!0;const lm=new Ml,hm=new am,cm=new am,um=new am;class pm extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml,n=this.points,i=n.length,r=(i-(this.closed?0:1))*t;let s,o,a=Math.floor(r),l=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:0===l&&a===i-1&&(a=i-2,l=1),this.closed||a>0?s=n[(a-1)%i]:(lm.subVectors(n[0],n[1]).add(n[0]),s=lm);const h=n[a%i],c=n[(a+1)%i];if(this.closed||a+2<i?o=n[(a+2)%i]:(lm.subVectors(n[i-1],n[i-2]).add(n[i-1]),o=lm),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(h),t),n=Math.pow(h.distanceToSquared(c),t),i=Math.pow(c.distanceToSquared(o),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),hm.initNonuniformCatmullRom(s.x,h.x,c.x,o.x,e,n,i),cm.initNonuniformCatmullRom(s.y,h.y,c.y,o.y,e,n,i),um.initNonuniformCatmullRom(s.z,h.z,c.z,o.z,e,n,i)}else"catmullrom"===this.curveType&&(hm.initCatmullRom(s.x,h.x,c.x,o.x,this.tension),cm.initCatmullRom(s.y,h.y,c.y,o.y,this.tension),um.initCatmullRom(s.z,h.z,c.z,o.z,this.tension));return e.set(hm.calc(l),cm.calc(l),um.calc(l)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Ml).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function dm(t,e,n,i,r){const s=.5*(i-e),o=.5*(r-n),a=t*t;return(2*n-2*i+s+o)*(t*a)+(-3*n+3*i-2*s-o)*a+s*t+n}function fm(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function mm(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}pm.prototype.isCatmullRomCurve3=!0;class gm extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vl,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vl,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vl;super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return e.set(mm(t,n.x,i.x,r.x,s.x),mm(t,n.y,i.y,r.y,s.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}gm.prototype.isCubicBezierCurve=!0;class ym extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ml,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ml;super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return e.set(mm(t,n.x,i.x,r.x,s.x),mm(t,n.y,i.y,r.y,s.y),mm(t,n.z,i.z,r.z,s.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}ym.prototype.isCubicBezierCurve3=!0;class _m extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vl,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl;super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new vl;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}_m.prototype.isLineCurve=!0;class vm extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vl,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vl;super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl,n=this.v0,i=this.v1,r=this.v2;return e.set(fm(t,n.x,i.x,r.x),fm(t,n.y,i.y,r.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}vm.prototype.isQuadraticBezierCurve=!0;class Tm extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ml;super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml,n=this.v0,i=this.v1,r=this.v2;return e.set(fm(t,n.x,i.x,r.x),fm(t,n.y,i.y,r.y),fm(t,n.z,i.z,r.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Tm.prototype.isQuadraticBezierCurve3=!0;class Em extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.type="SplineCurve",this.points=t}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl,n=this.points,i=(n.length-1)*t,r=Math.floor(i),s=i-r,o=n[0===r?r:r-1],a=n[r],l=n[r>n.length-2?n.length-1:r+1],h=n[r>n.length-3?n.length-1:r+2];return e.set(dm(s,o.x,a.x,l.x,h.x),dm(s,o.y,a.y,l.y,h.y)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new vl).fromArray(n))}return this}}Em.prototype.isSplineCurve=!0;var xm=Object.freeze({__proto__:null,ArcCurve:om,CatmullRomCurve3:pm,CubicBezierCurve:gm,CubicBezierCurve3:ym,EllipseCurve:sm,LineCurve:_m,LineCurve3:class extends rm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml;super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:vm,QuadraticBezierCurve3:Tm,SplineCurve:Em});class Im extends rm{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new _m(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,s=this.curves[r],o=s.getLength(),a=0===o?0:1-t/o;return s.getPointAt(a,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],o=s&&s.isEllipseCurve?2*t:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let t=0;t<a.length;t++){const i=a[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new xm[n.type]).fromJSON(n))}return this}}class bm extends Im{constructor(t){super(),this.type="Path",this.currentPoint=new vl,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new _m(this.currentPoint.clone(),new vl(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new vm(this.currentPoint.clone(),new vl(t,e),new vl(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){const o=new gm(this.currentPoint.clone(),new vl(t,e),new vl(n,i),new vl(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Em(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,o,a){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+l,e+h,n,i,r,s,o,a),this}absellipse(t,e,n,i,r,s,o,a){const l=new sm(t,e,n,i,r,s,o,a);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class wm extends bm{constructor(t){super(t),this.uuid=ul(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new bm).fromJSON(n))}return this}}const Sm=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=e&&e.length,r=i?e[0]*n:t.length;let s=Am(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,h,c,u,p,d;if(i&&(s=function(t,e,n,i){const r=[];let s,o,a,l,h;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,h=Am(t,a,l,i,!1),h===h.next&&(h.steiner=!0),r.push(Um(h));for(r.sort(Pm),s=0;s<r.length;s++)Fm(r[s],n),n=Cm(n,n.next);return n}(t,e,s,n)),t.length>80*n){a=h=t[0],l=c=t[1];for(let e=n;e<r;e+=n)u=t[e],p=t[e+1],u<a&&(a=u),p<l&&(l=p),u>h&&(h=u),p>c&&(c=p);d=Math.max(h-a,c-l),d=0!==d?1/d:0}return Rm(s,o,n,a,l,d),o};function Am(t,e,n,i,r){let s,o;if(r===function(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)o=Xm(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=Xm(s,t[s],t[s+1],o);return o&&Hm(o,o.next)&&(Zm(o),o=o.next),o}function Cm(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!Hm(i,i.next)&&0!==Gm(i.prev,i,i.next))i=i.next;else{if(Zm(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function Rm(t,e,n,i,r,s,o){if(!t)return;!o&&s&&function(t,e,n,i){let r=t;do{null===r.z&&(r.z=km(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,s,o,a,l,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<h&&(a++,i=i.nextZ,i);e++);for(l=h;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,h*=2}while(o>1)}(r)}(t,i,r,s);let a,l,h=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Om(t,i,r,s):Dm(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),Zm(t),t=l.next,h=l.next;else if((t=l)===h){o?1===o?Rm(t=Nm(Cm(t),e,n),e,n,i,r,s,2):2===o&&Mm(t,e,n,i,r,s):Rm(Cm(t),e,n,i,r,s,1);break}}function Dm(t){const e=t.prev,n=t,i=t.next;if(Gm(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(Bm(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Gm(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Om(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Gm(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,h=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,c=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=km(a,l,e,n,i),p=km(h,c,e,n,i);let d=t.prevZ,f=t.nextZ;for(;d&&d.z>=u&&f&&f.z<=p;){if(d!==t.prev&&d!==t.next&&Bm(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Gm(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&Bm(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Gm(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&Bm(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Gm(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&Bm(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Gm(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Nm(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!Hm(r,s)&&Vm(r,i,i.next,s)&&Ym(r,s)&&Ym(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),Zm(i),Zm(i.next),i=t=s),i=i.next}while(i!==t);return Cm(i)}function Mm(t,e,n,i,r,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&zm(o,t)){let a=qm(o,t);return o=Cm(o,o.next),a=Cm(a,a.next),Rm(o,e,n,i,r,s),void Rm(a,e,n,i,r,s)}t=t.next}o=o.next}while(o!==t)}function Pm(t,e){return t.x-e.x}function Fm(t,e){if(e=function(t,e){let n=e;const i=t.x,r=t.y;let s,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>o){if(o=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(i===o)return s;const a=s,l=s.x,h=s.y;let c,u=1/0;n=s;do{i>=n.x&&n.x>=l&&i!==n.x&&Bm(r<h?i:o,r,l,h,r<h?o:i,r,n.x,n.y)&&(c=Math.abs(r-n.y)/(i-n.x),Ym(n,t)&&(c<u||c===u&&(n.x>s.x||n.x===s.x&&Lm(s,n)))&&(s=n,u=c)),n=n.next}while(n!==a);return s}(t,e),e){const n=qm(e,t);Cm(e,e.next),Cm(n,n.next)}}function Lm(t,e){return Gm(t.prev,t,e.prev)<0&&Gm(e.next,t,t.next)<0}function km(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Um(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Bm(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function zm(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Vm(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Ym(t,e)&&Ym(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Gm(t.prev,t,e.prev)||Gm(t,e.prev,e))||Hm(t,e)&&Gm(t.prev,t,t.next)>0&&Gm(e.prev,e,e.next)>0)}function Gm(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Hm(t,e){return t.x===e.x&&t.y===e.y}function Vm(t,e,n,i){const r=Wm(Gm(t,e,n)),s=Wm(Gm(t,e,i)),o=Wm(Gm(n,i,t)),a=Wm(Gm(n,i,e));return r!==s&&o!==a||(!(0!==r||!jm(t,n,e))||(!(0!==s||!jm(t,i,e))||(!(0!==o||!jm(n,t,i))||!(0!==a||!jm(n,e,i)))))}function jm(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Wm(t){return t>0?1:t<0?-1:0}function Ym(t,e){return Gm(t.prev,t,t.next)<0?Gm(t,e,t.next)>=0&&Gm(t,t.prev,e)>=0:Gm(t,e,t.prev)<0||Gm(t,t.next,e)<0}function qm(t,e){const n=new Km(t.i,t.x,t.y),i=new Km(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function Xm(t,e,n,i){const r=new Km(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Zm(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Km(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Qm{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return Qm.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];Jm(t),$m(n,t);let s=t.length;e.forEach(Jm);for(let a=0;a<e.length;a++)i.push(s),s+=e[a].length,$m(n,e[a]);const o=Sm(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}}function Jm(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function $m(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class tg extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wm([new vl(.5,.5),new vl(-.5,.5),new vl(-.5,-.5),new vl(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let o=0,a=t.length;o<a;o++){s(t[o])}function s(t){const s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:1,h=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:c-.1,p=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:eg;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,y,_,v,T,E=!1;f&&(g=f.getSpacedPoints(a),E=!0,h=!1,y=f.computeFrenetFrames(a,!1),_=new Ml,v=new Ml,T=new Ml),h||(d=0,c=0,u=0,p=0);const x=t.extractPoints(o);let I=x.shape;const b=x.holes;if(!Qm.isClockWise(I)){I=I.reverse();for(let t=0,e=b.length;t<e;t++){const e=b[t];Qm.isClockWise(e)&&(b[t]=e.reverse())}}const w=Qm.triangulateShape(I,b),S=I;for(let e=0,n=b.length;e<n;e++){const t=b[e];I=I.concat(t)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const C=I.length,R=w.length;function D(t,e,n){let i,r,s;const o=t.x-e.x,a=t.y-e.y,l=n.x-t.x,h=n.y-t.y,c=o*o+a*a,u=o*h-a*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(c),p=Math.sqrt(l*l+h*h),d=e.x-a/u,f=e.y+o/u,m=((n.x-h/p-d)*h-(n.y+l/p-f)*l)/(o*h-a*l);i=d+o*m-t.x,r=f+a*m-t.y;const g=i*i+r*r;if(g<=2)return new vl(i,r);s=Math.sqrt(g/2)}else{let t=!1;o>Number.EPSILON?l>Number.EPSILON&&(t=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(h)&&(t=!0),t?(i=-a,r=o,s=Math.sqrt(c)):(i=o,r=a,s=Math.sqrt(c/2))}return new vl(i/s,r/s)}const O=[];for(let e=0,n=S.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),O[e]=D(S[e],S[i],S[r]);const N=[];let M,P=O.concat();for(let e=0,n=b.length;e<n;e++){const t=b[e];M=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),M[e]=D(t[e],t[i],t[r]);N.push(M),P=P.concat(M)}for(let e=0;e<d;e++){const t=e/d,n=c*Math.cos(t*Math.PI/2),i=u*Math.sin(t*Math.PI/2)+p;for(let e=0,r=S.length;e<r;e++){const t=A(S[e],O[e],i);k(t.x,t.y,-n)}for(let e=0,r=b.length;e<r;e++){const t=b[e];M=N[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],M[e],i);k(r.x,r.y,-n)}}}const F=u+p;for(let e=0;e<C;e++){const t=h?A(I[e],P[e],F):I[e];E?(v.copy(y.normals[0]).multiplyScalar(t.x),_.copy(y.binormals[0]).multiplyScalar(t.y),T.copy(g[0]).add(v).add(_),k(T.x,T.y,T.z)):k(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<C;t++){const n=h?A(I[t],P[t],F):I[t];E?(v.copy(y.normals[e]).multiplyScalar(n.x),_.copy(y.binormals[e]).multiplyScalar(n.y),T.copy(g[e]).add(v).add(_),k(T.x,T.y,T.z)):k(n.x,n.y,l/a*e)}for(let e=d-1;e>=0;e--){const t=e/d,n=c*Math.cos(t*Math.PI/2),i=u*Math.sin(t*Math.PI/2)+p;for(let e=0,r=S.length;e<r;e++){const t=A(S[e],O[e],i);k(t.x,t.y,l+n)}for(let e=0,r=b.length;e<r;e++){const t=b[e];M=N[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],M[e],i);E?k(r.x,r.y+g[a-1].y,g[a-1].x+n):k(r.x,r.y,l+n)}}}function L(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=a+2*d;t<n;t++){const n=C*t,s=C*(t+1);B(e+i+n,e+r+n,e+r+s,e+i+s)}}}function k(t,e,n){s.push(t),s.push(e),s.push(n)}function U(t,e,r){z(t),z(e),z(r);const s=i.length/3,o=m.generateTopUV(n,i,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[2])}function B(t,e,r,s){z(t),z(e),z(s),z(e),z(r),z(s);const o=i.length/3,a=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function z(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function G(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(h){let t=0,e=C*t;for(let n=0;n<R;n++){const t=w[n];U(t[2]+e,t[1]+e,t[0]+e)}t=a+2*d,e=C*t;for(let n=0;n<R;n++){const t=w[n];U(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<R;t++){const e=w[t];U(e[2],e[1],e[0])}for(let t=0;t<R;t++){const e=w[t];U(e[0]+C*a,e[1]+C*a,e[2]+C*a)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;L(S,e),e+=S.length;for(let n=0,i=b.length;n<i;n++){const t=b[n];L(t,e),e+=t.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new lc(i,3)),this.setAttribute("uv",new lc(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const e=t[i];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let r=0,s=t.shapes.length;r<s;r++){const i=e[t.shapes[r]];n.push(i)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new xm[i.type]).fromJSON(i)),new tg(n,t.options)}}const eg={generateTopUV:function(t,e,n,i,r){const s=e[3*n],o=e[3*n+1],a=e[3*i],l=e[3*i+1],h=e[3*r],c=e[3*r+1];return[new vl(s,o),new vl(a,l),new vl(h,c)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[3*n],a=e[3*n+1],l=e[3*n+2],h=e[3*i],c=e[3*i+1],u=e[3*i+2],p=e[3*r],d=e[3*r+1],f=e[3*r+2],m=e[3*s],g=e[3*s+1],y=e[3*s+2];return Math.abs(a-c)<Math.abs(o-h)?[new vl(o,1-l),new vl(h,1-u),new vl(p,1-f),new vl(m,1-y)]:[new vl(a,1-l),new vl(c,1-u),new vl(d,1-f),new vl(g,1-y)]}};class ng extends Jf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new ng(t.radius,t.detail)}}class ig extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wm([new vl(0,.5),new vl(-.5,-.5),new vl(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],s=[];let o=0,a=0;if(!1===Array.isArray(t))l(t);else for(let h=0;h<t.length;h++)l(t[h]),this.addGroup(o,a,h),o+=a,a=0;function l(t){const o=i.length/3,l=t.extractPoints(e);let h=l.shape;const c=l.holes;!1===Qm.isClockWise(h)&&(h=h.reverse());for(let e=0,n=c.length;e<n;e++){const t=c[e];!0===Qm.isClockWise(t)&&(c[e]=t.reverse())}const u=Qm.triangulateShape(h,c);for(let e=0,n=c.length;e<n;e++){const t=c[e];h=h.concat(t)}for(let e=0,n=h.length;e<n;e++){const t=h[e];i.push(t.x,t.y,0),r.push(0,0,1),s.push(t.x,t.y)}for(let e=0,i=u.length;e<i;e++){const t=u[e],i=t[0]+o,r=t[1]+o,s=t[2]+o;n.push(i,r,s),a+=3}}this.setIndex(n),this.setAttribute("position",new lc(i,3)),this.setAttribute("normal",new lc(r,3)),this.setAttribute("uv",new lc(s,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new ig(n,t.curveSegments)}}class rg extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const h=[],c=new Ml,u=new Ml,p=[],d=[],f=[],m=[];for(let g=0;g<=n;g++){const p=[],y=g/n;let _=0;0==g&&0==s?_=.5/e:g==n&&a==Math.PI&&(_=-.5/e);for(let n=0;n<=e;n++){const a=n/e;c.x=-t*Math.cos(i+a*r)*Math.sin(s+y*o),c.y=t*Math.cos(s+y*o),c.z=t*Math.sin(i+a*r)*Math.sin(s+y*o),d.push(c.x,c.y,c.z),u.copy(c).normalize(),f.push(u.x,u.y,u.z),m.push(a+_,1-y),p.push(l++)}h.push(p)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=h[g][t+1],i=h[g][t],r=h[g+1][t],o=h[g+1][t+1];(0!==g||s>0)&&p.push(e,i,o),(g!==n-1||a<Math.PI)&&p.push(i,r,o)}this.setIndex(p),this.setAttribute("position",new lc(d,3)),this.setAttribute("normal",new lc(f,3)),this.setAttribute("uv",new lc(m,2))}static fromJSON(t){return new rg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class sg extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],a=[],l=[],h=new Ml,c=new Ml,u=new Ml;for(let p=0;p<=n;p++)for(let s=0;s<=i;s++){const d=s/i*r,f=p/n*Math.PI*2;c.x=(t+e*Math.cos(f))*Math.cos(d),c.y=(t+e*Math.cos(f))*Math.sin(d),c.z=e*Math.sin(f),o.push(c.x,c.y,c.z),h.x=t*Math.cos(d),h.y=t*Math.sin(d),u.subVectors(c,h).normalize(),a.push(u.x,u.y,u.z),l.push(s/i),l.push(p/n)}for(let p=1;p<=n;p++)for(let t=1;t<=i;t++){const e=(i+1)*p+t-1,n=(i+1)*(p-1)+t-1,r=(i+1)*(p-1)+t,o=(i+1)*p+t;s.push(e,n,o),s.push(n,r,o)}this.setIndex(s),this.setAttribute("position",new lc(o,3)),this.setAttribute("normal",new lc(a,3)),this.setAttribute("uv",new lc(l,2))}static fromJSON(t){return new sg(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class og extends gc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new Ml,r=new Ml;if(null!==t.index){const s=t.attributes.position,o=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let t=0,l=a.length;t<l;++t){const l=a[t],h=l.start;for(let t=h,a=h+l.count;t<a;t+=3)for(let l=0;l<3;l++){const a=o.getX(t+l),h=o.getX(t+(l+1)%3);i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,h),!0===ag(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const s=t.attributes.position;for(let t=0,o=s.count/3;t<o;t++)for(let a=0;a<3;a++){const o=3*t+a,l=3*t+(a+1)%3;i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,l),!0===ag(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new lc(e,3))}}}function ag(t,e,n){const i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i,r),!0)}class lg extends Xh{constructor(t){super(),this.type="ShadowMaterial",this.color=new ec(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}lg.prototype.isShadowMaterial=!0;class hg extends Xh{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ec(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ec(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new vl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}hg.prototype.isMeshStandardMaterial=!0;class cg extends hg{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new vl(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pl(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new ec(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new ec(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ec(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}cg.prototype.isMeshPhysicalMaterial=!0;class ug extends Xh{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new ec(16777215),this.specular=new ec(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ec(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new vl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=no,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}ug.prototype.isMeshPhongMaterial=!0;class pg extends Xh{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ec(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ec(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new vl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}pg.prototype.isMeshToonMaterial=!0;class dg extends Xh{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new vl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}dg.prototype.isMeshNormalMaterial=!0;class fg extends Xh{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new ec(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ec(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=no,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}fg.prototype.isMeshLambertMaterial=!0;class mg extends Xh{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ec(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new vl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}mg.prototype.isMeshMatcapMaterial=!0;class gg extends Of{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}gg.prototype.isLineDashedMaterial=!0;const yg={arraySlice:function(t,e,n){return yg.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const i=n[s]*e;for(let n=0;n!==e;++n)r[o++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,s=t[0];for(;void 0!==s&&void 0===s[i];)s=t[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),n.push.apply(n,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),n.push(o)),s=t[r++]}while(void 0!==s)},subclip:function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const t=s.tracks[l],e=t.getValueSize(),a=[],h=[];for(let s=0;s<t.times.length;++s){const o=t.times[s]*r;if(!(o<n||o>=i)){a.push(t.times[s]);for(let n=0;n<e;++n)h.push(t.values[s*e+n])}}0!==a.length&&(t.times=yg.convertArray(a,t.times.constructor),t.values=yg.convertArray(h,t.values.constructor),o.push(t))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const e=n.tracks[o],i=e.ValueTypeName;if("bool"===i||"string"===i)continue;const r=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===i}));if(void 0===r)continue;let a=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let h=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=c/3);const u=e.times.length-1;let p;if(s<=e.times[0]){const t=a,n=l-a;p=yg.arraySlice(e.values,t,n)}else if(s>=e.times[u]){const t=u*l+a,n=t+l-a;p=yg.arraySlice(e.values,t,n)}else{const t=e.createInterpolant(),n=a,i=l-a;t.evaluate(s),p=yg.arraySlice(t.resultBuffer,n,i)}if("quaternion"===i){(new Nl).fromArray(p).normalize().conjugate().toArray(p)}const d=r.times.length;for(let t=0;t<d;++t){const e=t*c+h;if("quaternion"===i)Nl.multiplyQuaternionsFlat(r.values,e,p,0,r.values,e);else{const t=c-2*h;for(let n=0;n<t;++n)r.values[e+n]-=p[n]}}}return t.blendMode=2501,t}};class _g{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let s;n:{i:if(!(t<i)){for(let s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}s=e.length;break n}if(t>=r)break t;{const o=e[1];t<o&&(n=2,r=o);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}s=n,n=0}}for(;n<s;){const i=n+s>>>1;t<e[i]?s=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let s=0;s!==i;++s)e[s]=n[r+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}_g.prototype.beforeStart_=_g.prototype.copySampleValue_,_g.prototype.afterEnd_=_g.prototype.copySampleValue_;class vg extends _g{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ha,endingEnd:Ha}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,s=t+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case Va:r=t,o=2*e-n;break;case ja:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case Va:s=t,a=2*n-e;break;case ja:s=1,a=n+i[1]-i[0];break;default:s=t-1,a=e}const l=.5*(n-e),h=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=r*h,this._offsetNext=s*h}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(n-e)/(i-e),f=d*d,m=f*d,g=-u*m+2*u*f-u*d,y=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,_=(-1-p)*m+(1.5+p)*f+.5*d,v=p*m-p*f;for(let T=0;T!==o;++T)r[T]=g*s[h+T]+y*s[l+T]+_*s[a+T]+v*s[c+T];return r}}class Tg extends _g{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=(n-e)/(i-e),c=1-h;for(let u=0;u!==o;++u)r[u]=s[l+u]*c+s[a+u]*h;return r}}class Eg extends _g{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class xg{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=yg.convertArray(e,this.TimeBufferType),this.values=yg.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:yg.convertArray(t.times,Array),values:yg.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Eg(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Tg(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new vg(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Ba:e=this.InterpolantFactoryMethodDiscrete;break;case za:e=this.InterpolantFactoryMethodLinear;break;case Ga:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ba;case this.InterpolantFactoryMethodLinear:return za;case this.InterpolantFactoryMethodSmooth:return Ga}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=yg.arraySlice(n,r,s),this.values=yg.arraySlice(this.values,r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let o=0;o!==r;o++){const e=n[o];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,e),t=!1;break}if(null!==s&&s>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,e,s),t=!1;break}s=e}if(void 0!==i&&yg.isTypedArray(i))for(let o=0,a=i.length;o!==a;++o){const e=i[o];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,e),t=!1;break}}return t}optimize(){const t=yg.arraySlice(this.times),e=yg.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ga,r=t.length-1;let s=1;for(let o=1;o<r;++o){let r=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(i)r=!0;else{const t=o*n,i=t-n,s=t+n;for(let o=0;o!==n;++o){const n=e[t+o];if(n!==e[i+o]||n!==e[s+o]){r=!0;break}}}if(r){if(o!==s){t[s]=t[o];const i=o*n,r=s*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*n,i=s*n,o=0;o!==n;++o)e[i+o]=e[t+o];++s}return s!==t.length?(this.times=yg.arraySlice(t,0,s),this.values=yg.arraySlice(e,0,s*n)):(this.times=t,this.values=e),this}clone(){const t=yg.arraySlice(this.times,0),e=yg.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}xg.prototype.TimeBufferType=Float32Array,xg.prototype.ValueBufferType=Float32Array,xg.prototype.DefaultInterpolation=za;class Ig extends xg{}Ig.prototype.ValueTypeName="bool",Ig.prototype.ValueBufferType=Array,Ig.prototype.DefaultInterpolation=Ba,Ig.prototype.InterpolantFactoryMethodLinear=void 0,Ig.prototype.InterpolantFactoryMethodSmooth=void 0;class bg extends xg{}bg.prototype.ValueTypeName="color";class wg extends xg{}wg.prototype.ValueTypeName="number";class Sg extends _g{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-e)/(i-e);let l=t*o;for(let h=l+o;l!==h;l+=4)Nl.slerpFlat(r,0,s,l-o,s,l,a);return r}}class Ag extends xg{InterpolantFactoryMethodLinear(t){return new Sg(this.times,this.values,this.getValueSize(),t)}}Ag.prototype.ValueTypeName="quaternion",Ag.prototype.DefaultInterpolation=za,Ag.prototype.InterpolantFactoryMethodSmooth=void 0;class Cg extends xg{}Cg.prototype.ValueTypeName="string",Cg.prototype.ValueBufferType=Array,Cg.prototype.DefaultInterpolation=Ba,Cg.prototype.InterpolantFactoryMethodLinear=void 0,Cg.prototype.InterpolantFactoryMethodSmooth=void 0;class Rg extends xg{}Rg.prototype.ValueTypeName="vector";class Dg{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wa;this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=ul(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let s=0,o=n.length;s!==o;++s)e.push(Og(n[s]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,s=n.length;r!==s;++r)e.push(xg.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,s=[];for(let o=0;o<r;o++){let t=[],a=[];t.push((o+r-1)%r,o,(o+1)%r),a.push(0,1,0);const l=yg.getKeyframeOrder(t);t=yg.sortedArray(t,1,l),a=yg.sortedArray(a,1,l),i||0!==t[0]||(t.push(r),a.push(a[0])),s.push(new wg(".morphTargetInfluences["+e[o].name+"]",t,a).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,a=t.length;o<a;o++){const e=t[o],n=e.name.match(r);if(n&&n.length>1){const t=n[1];let r=i[t];r||(i[t]=r=[]),r.push(e)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],e,n));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const s=[],o=[];yg.flattenJSON(n,s,o,i),0!==s.length&&r.push(new t(e,s,o))}},i=[],r=t.name||"default",s=t.fps||30,o=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let h=0;h<l.length;h++){const t=l[h].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let i=0;i<t[n].morphTargets.length;i++)e[t[n].morphTargets[i]]=-1;for(const r in e){const e=[],s=[];for(let i=0;i!==t[n].morphTargets.length;++i){const i=t[n];e.push(i.time),s.push(i.morphTarget===r?1:0)}i.push(new wg(".morphTargetInfluence["+r+"]",e,s))}a=e.length*(s||1)}else{const r=".bones["+e[h].name+"]";n(Rg,r+".position",t,"pos",i),n(Ag,r+".quaternion",t,"rot",i),n(Rg,r+".scale",t,"scl",i)}}if(0===i.length)return null;return new this(r,a,i,o)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Og(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wg;case"vector":case"vector2":case"vector3":case"vector4":return Rg;case"color":return bg;case"quaternion":return Ag;case"bool":case"boolean":return Ig;case"string":return Cg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];yg.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Ng={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Mg{constructor(t,e,n){const i=this;let r,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===s&&void 0!==i.onStart&&i.onStart(t,o,a),s=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const Pg=new Mg;class Fg{constructor(t){this.manager=void 0!==t?t:Pg,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Lg={};class kg extends Fg{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Ng.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==Lg[t])return void Lg[t].push({onLoad:e,onProgress:n,onError:i});Lg[t]=[],Lg[t].push({onLoad:e,onProgress:n,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(s).then((e=>{if(200===e.status||0===e.status){0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const n=Lg[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),s=r?parseInt(r):0,o=0!==s;let a=0;return new ReadableStream({start(t){!function e(){i.read().then((i=>{let{done:r,value:l}=i;if(r)t.close();else{a+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(l),e()}}))}()}})}throw Error('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText))})).then((t=>{const e=new Response(t);switch(this.responseType){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((t=>(new DOMParser).parseFromString(t,this.mimeType)));case"json":return e.json();default:return e.text()}})).then((e=>{Ng.add(t,e);const n=Lg[t];delete Lg[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}this.manager.itemEnd(t)})).catch((e=>{const n=Lg[t];delete Lg[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t),this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Ug extends Fg{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Ng.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o=xl("img");function a(){h(),Ng.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){h(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function h(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}class Bg extends Fg{constructor(t){super(t)}load(t,e,n,i){const r=new Wc,s=new Ug(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(t[n],(function(t){r.images[n]=t,o++,6===o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let l=0;l<t.length;++l)a(l);return r}}class zg extends Fg{constructor(t){super(t)}load(t,e,n,i){const r=new Al,s=new Ug(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class Gg extends Fh{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.type="Light",this.color=new ec(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}Gg.prototype.isLight=!0;class Hg extends Gg{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(Fh.DefaultUp),this.updateMatrix(),this.groundColor=new ec(e)}copy(t){return Gg.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}Hg.prototype.isHemisphereLight=!0;const Vg=new ch,jg=new Ml,Wg=new Ml;class Yg{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new vl(512,512),this.map=null,this.mapPass=null,this.matrix=new ch,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $c,this._frameExtents=new vl(1,1),this._viewportCount=1,this._viewports=[new Rl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;jg.setFromMatrixPosition(t.matrixWorld),e.position.copy(jg),Wg.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Wg),e.updateMatrixWorld(),Vg.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vg),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class qg extends Yg{constructor(){super(new Hc(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*cl*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}qg.prototype.isSpotLightShadow=!0;class Xg extends Gg{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(t,e),this.type="SpotLight",this.position.copy(Fh.DefaultUp),this.updateMatrix(),this.target=new Fh,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.shadow=new qg}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Xg.prototype.isSpotLight=!0;const Zg=new ch,Kg=new Ml,Qg=new Ml;class Jg extends Yg{constructor(){super(new Hc(90,1,.5,500)),this._frameExtents=new vl(4,2),this._viewportCount=6,this._viewports=[new Rl(2,1,1,1),new Rl(0,1,1,1),new Rl(3,1,1,1),new Rl(1,1,1,1),new Rl(3,0,1,1),new Rl(1,0,1,1)],this._cubeDirections=[new Ml(1,0,0),new Ml(-1,0,0),new Ml(0,0,1),new Ml(0,0,-1),new Ml(0,1,0),new Ml(0,-1,0)],this._cubeUps=[new Ml(0,1,0),new Ml(0,1,0),new Ml(0,1,0),new Ml(0,1,0),new Ml(0,0,1),new Ml(0,0,-1)]}updateMatrices(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Kg.setFromMatrixPosition(t.matrixWorld),n.position.copy(Kg),Qg.copy(n.position),Qg.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Qg),n.updateMatrixWorld(),i.makeTranslation(-Kg.x,-Kg.y,-Kg.z),Zg.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zg)}}Jg.prototype.isPointLightShadow=!0;class $g extends Gg{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(t,e),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Jg}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}$g.prototype.isPointLight=!0;class ty extends Yg{constructor(){super(new pu(-5,5,5,-5,.5,500))}}ty.prototype.isDirectionalLightShadow=!0;class ey extends Gg{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Fh.DefaultUp),this.updateMatrix(),this.target=new Fh,this.shadow=new ty}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}ey.prototype.isDirectionalLight=!0;class ny extends Gg{constructor(t,e){super(t,e),this.type="AmbientLight"}}ny.prototype.isAmbientLight=!0;class iy extends Gg{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(t,e),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}iy.prototype.isRectAreaLight=!0;class ry{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Ml)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*i),e.addScaledVector(s[2],.488603*r),e.addScaledVector(s[3],.488603*n),e.addScaledVector(s[4],n*i*1.092548),e.addScaledVector(s[5],i*r*1.092548),e.addScaledVector(s[6],.315392*(3*r*r-1)),e.addScaledVector(s[7],n*r*1.092548),e.addScaledVector(s[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*i),e.addScaledVector(s[2],1.023328*r),e.addScaledVector(s[3],1.023328*n),e.addScaledVector(s[4],.858086*n*i),e.addScaledVector(s[5],.858086*i*r),e.addScaledVector(s[6],.743125*r*r-.247708),e.addScaledVector(s[7],.858086*n*r),e.addScaledVector(s[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}ry.prototype.isSphericalHarmonics3=!0;class sy extends Gg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ry;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}sy.prototype.isLightProbe=!0;class oy{static decodeText(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(C8){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class ay extends gc{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}ay.prototype.isInstancedBufferGeometry=!0;class ly extends Fg{constructor(t){super(t),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Ng.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){Ng.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}let hy;ly.prototype.isImageBitmapLoader=!0;const cy=function(){return void 0===hy&&(hy=new(window.AudioContext||window.webkitAudioContext)),hy};class uy extends Fg{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new kg(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{const t=n.slice(0);cy().decodeAudioData(t,(function(t){e(t)}))}catch(C8){i?i(C8):console.error(C8),r.manager.itemError(t)}}),n,i)}}(class extends sy{constructor(t,e){super(void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);const n=(new ec).set(t),i=(new ec).set(e),r=new Ml(n.r,n.g,n.b),s=new Ml(i.r,i.g,i.b),o=Math.sqrt(Math.PI),a=o*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(r).sub(s).multiplyScalar(a)}}).prototype.isHemisphereLightProbe=!0;(class extends sy{constructor(t){super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1);const e=(new ec).set(t);this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class py{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dy(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=dy();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function dy(){return("undefined"===typeof performance?Date:performance).now()}class fy extends Fh{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class my{constructor(t,e,n){let i,r,s;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==i;++t)n[r+t]=n[t];s=e}else{s+=e;const t=e/s;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let a=e,l=e+e;a!==l;++a)if(n[a]!==n[a+e]){o.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,s=i;r!==s;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)t[e+s]=t[n+s]}_slerp(t,e,n,i){Nl.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const s=this._workIndex*r;Nl.multiplyQuaternionsFlat(t,s,t,e,t,n),Nl.slerpFlat(t,e,t,e,t,s,i)}_lerp(t,e,n,i,r){const s=1-i;for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]*s+t[n+o]*i}}_lerpAdditive(t,e,n,i,r){for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]+t[n+s]*i}}}const gy="\\[\\]\\.:\\/",yy=new RegExp("["+gy+"]","g"),_y="[^"+gy+"]",vy="[^"+gy.replace("\\.","")+"]",Ty=/((?:WC+[\/:])*)/.source.replace("WC",_y),Ey=/(WCOD+)?/.source.replace("WCOD",vy),xy=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_y),Iy=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_y),by=new RegExp("^"+Ty+Ey+xy+Iy+"$"),wy=["material","materials","bones"];class Sy{constructor(t,e,n){this.path=e,this.parsedPath=n||Sy.parseTrackName(e),this.node=Sy.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Sy.Composite(t,e,n):new Sy(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(yy,"")}static parseTrackName(t){const e=by.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==wy.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const s=n(r.children);if(s)return s}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Sy.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const s=t[i];if(void 0===s){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Sy.Composite=class{constructor(t,e,n){const i=n||Sy.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Sy.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Sy.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Sy.prototype.GetterByBindingType=[Sy.prototype._getValue_direct,Sy.prototype._getValue_array,Sy.prototype._getValue_arrayElement,Sy.prototype._getValue_toArray],Sy.prototype.SetterByBindingTypeAndVersioning=[[Sy.prototype._setValue_direct,Sy.prototype._setValue_direct_setNeedsUpdate,Sy.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Sy.prototype._setValue_array,Sy.prototype._setValue_array_setNeedsUpdate,Sy.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Sy.prototype._setValue_arrayElement,Sy.prototype._setValue_arrayElement_setNeedsUpdate,Sy.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Sy.prototype._setValue_fromArray,Sy.prototype._setValue_fromArray_setNeedsUpdate,Sy.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ay{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.blendMode;this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,s=r.length,o=new Array(s),a={endingStart:Ha,endingEnd:Ha};for(let l=0;l!==s;++l){const t=r[l].createInterpolant(null);o[l]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,s=n/i;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,a[1]=r+n,l[0]=t/s,l[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const s=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;if(2501===this.blendMode)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(s),e[n].accumulateAdditive(o);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(s),e[n].accumulate(i,o)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const s=2202===n;if(0===t)return-1===r?i:s&&1===(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1===(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Va,i.endingEnd=Va):(i.endingStart=t?this.zeroSlopeAtStart?Va:Ha:ja,i.endingEnd=e?this.zeroSlopeAtEnd?Va:Ha:ja)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=n,this}}(class extends ol{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let h=l[a];void 0===h&&(h={},l[a]=h);for(let c=0;c!==r;++c){const t=i[c],r=t.name;let l=h[r];if(void 0!==l)s[c]=l;else{if(l=s[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,r));continue}const i=e&&e._propertyBindings[c].binding.parsedPath;l=new my(Sy.create(n,r,i),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,r),s[c]=l}o[c].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],h=t._byClipCacheIndex;l._byClipCacheIndex=h,a[h]=l,a.pop(),t._byClipCacheIndex=null;delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];void 0===s&&(s={},i[e]=s),s[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[r],0===Object.keys(o).length&&delete s[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Tg(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let s="string"===typeof t?Dg.findByName(i,t):t;const o=null!==s?s.uuid:t,a=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:Wa),void 0!==a){const t=a.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const h=new Ay(this,s,e,n);return this._bindAction(h,l),this._addInactiveAction(h,o,r),h}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"===typeof t?Dg.findByName(n,t):t,s=r?r.uuid:t,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1;for(let l=0;l!==n;++l){e[l]._update(i,t,r,s)}const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,s=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,e[r]=s,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const t=n[r].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const r in i){const t=i[r];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Cy{constructor(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Cy(void 0===this.value.clone?this.value:this.value.clone())}}class Ry extends Xd{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}Ry.prototype.isInstancedInterleavedBuffer=!0;class Dy{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new hh(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new Eh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Ny(t,this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),e.sort(Oy),e}intersectObjects(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=t.length;i<r;i++)Ny(t[i],this,n,e);return n.sort(Oy),n}}function Oy(t,e){return t.distance-e.distance}function Ny(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)Ny(i[t],e,n,!0)}}class My{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(pl(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Py=new vl;class Fy{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vl(1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vl(-1/0,-1/0);this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Py.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Py.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Fy.prototype.isBox2=!0;const Ly=new Ml,ky=new Ml;class Uy{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ml,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ml;this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Ly.subVectors(t,this.start),ky.subVectors(this.end,this.start);const n=ky.dot(ky);let i=ky.dot(Ly)/n;return e&&(i=pl(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const By=new Ml,zy=new ch,Gy=new ch;function Hy(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Hy(t.children[n]));return e}class Vy extends zf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new ec(n),i=new ec(i);const r=e/2,s=t/e,o=t/2,a=[],l=[];for(let c=0,u=0,p=-o;c<=e;c++,p+=s){a.push(-o,0,p,o,0,p),a.push(p,0,-o,p,0,o);const t=c===r?n:i;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}const h=new gc;h.setAttribute("position",new lc(a,3)),h.setAttribute("color",new lc(l,3));super(h,new Of({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const jy=new Float32Array(1);new Int32Array(jy.buffer);rm.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(rm.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},bm.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},Vy.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends zf{constructor(t){const e=Hy(t),n=new gc,i=[],r=[],s=new ec(0,0,1),o=new ec(0,1,0);for(let a=0;a<e.length;a++){const t=e[a];t.parent&&t.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new lc(i,3)),n.setAttribute("color",new lc(r,3));super(n,new Of({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");Gy.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<e.length;r++){const t=e[r];t.parent&&t.parent.isBone&&(zy.multiplyMatrices(Gy,t.matrixWorld),By.setFromMatrixPosition(zy),i.setXYZ(s,By.x,By.y,By.z),zy.multiplyMatrices(Gy,t.parent.matrixWorld),By.setFromMatrixPosition(zy),i.setXYZ(s+1,By.x,By.y,By.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Fg.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),oy.extractUrlBase(t)},Fg.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Fy.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Fy.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Fy.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Fy.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},Ll.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Ll.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ll.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Ll.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Ll.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},eh.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$c.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Uy.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Tl.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Tl.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Tl.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Tl.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Tl.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Tl.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},ch.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},ch.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},ch.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ml).setFromMatrixColumn(this,3)},ch.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},ch.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},ch.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ch.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ch.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},ch.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},ch.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ch.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},ch.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},ch.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},ch.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},ch.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},ch.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ch.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},ch.prototype.makeFrustum=function(t,e,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,s)},ch.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Kc.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Nl.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Nl.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},hh.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},hh.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},hh.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Yh.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Yh.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},Yh.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},Yh.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},Yh.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},Yh.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Yh.getBarycoord(t,e,n,i,r)},Yh.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Yh.getNormal(t,e,n,i)},wm.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},wm.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new tg(this,t)},wm.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ig(this,t)},vl.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},vl.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},vl.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ml.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Ml.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Ml.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Ml.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Ml.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Ml.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Ml.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Ml.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Ml.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Rl.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Rl.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Fh.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Fh.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Fh.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Fh.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Fh.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Fh.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Pc.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Pc.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),vf.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Hc.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Gg.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(sc.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===rl},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(rl)}}}),sc.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?rl:il),this},sc.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},sc.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},gc.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},gc.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new sc(arguments[1],arguments[2])))},gc.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},gc.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},gc.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},gc.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},gc.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(gc.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Xd.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?rl:il),this},Xd.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},tg.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},tg.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},tg.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},qd.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Cy.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Xh.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ec}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(zc.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),jd.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},jd.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},jd.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},jd.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},jd.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},jd.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},jd.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},jd.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},jd.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},jd.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},jd.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},jd.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},jd.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},jd.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},jd.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},jd.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},jd.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},jd.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},jd.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},jd.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},jd.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},jd.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},jd.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},jd.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},jd.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(jd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?qa:Ya}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Md.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Dl.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),fy.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new uy).load(t,(function(t){e.setBuffer(t)})),this},jc.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},jc.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},wl.crossOrigin=void 0,wl.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new zg;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},wl.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Bg;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},wl.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},wl.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ms}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ms);const Wy=new Ml,Yy=new Ml,qy=new Ml,Xy=new vl,Zy=new vl,Ky=new vl,Qy=new Ml;function Jy(t,e,n,i,r,s,o){Wy.fromBufferAttribute(e,i),Yy.fromBufferAttribute(e,r),qy.fromBufferAttribute(e,s);const a=function(t,e,n,i,r,s){let o;return o=s===bs?t.intersectTriangle(i,n,e,!0,r):t.intersectTriangle(e,n,i,s!==ws,r),null===o?null:{distance:t.origin.distanceTo(r),point:r.clone()}}(t,Wy,Yy,qy,Qy,o);if(a){n&&(Xy.fromBufferAttribute(n,i),Zy.fromBufferAttribute(n,r),Ky.fromBufferAttribute(n,s),a.uv=Yh.getUV(Qy,Wy,Yy,qy,Xy,Zy,Ky,new vl));const t={a:i,b:r,c:s,normal:new Ml,materialIndex:0};Yh.getNormal(Wy,Yy,qy,t.normal),a.face=t,a.faceIndex=i}return a}function $y(t,e,n,i,r){const s=3*i,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),h=Jy(n,t.attributes.position,t.attributes.uv,o,a,l,e);return h?(h.faceIndex=i,r&&r.push(h),h):null}function t_(t,e,n){return null===t?null:(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far?null:t)}const e_=0,n_=1,i_=2,r_=1.25,s_=1,o_=65535,a_=Math.pow(2,-24);class l_{constructor(){}}function h_(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function c_(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){const r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function u_(t,e){e.set(t)}function p_(t,e,n){let i,r;for(let s=0;s<3;s++){const o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function d_(t,e,n){for(let i=0;i<3;i++){const r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function f_(t){const e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}function m_(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=1/0,o=1/0,a=1/0,l=-1/0,h=-1/0,c=-1/0,u=1/0,p=1/0,d=1/0,f=-1/0,m=-1/0,g=-1/0;const y=null!==r;for(let _=6*e,v=6*(e+n);_<v;_+=6){const e=t[_+0],n=t[_+1],i=e-n,r=e+n;i<s&&(s=i),r>l&&(l=r),y&&e<u&&(u=e),y&&e>f&&(f=e);const v=t[_+2],T=t[_+3],E=v-T,x=v+T;E<o&&(o=E),x>h&&(h=x),y&&v<p&&(p=v),y&&v>m&&(m=v);const I=t[_+4],b=t[_+5],w=I-b,S=I+b;w<a&&(a=w),S>c&&(c=S),y&&I<d&&(d=I),y&&I>g&&(g=I)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=h,i[5]=c,y&&(r[0]=u,r[1]=p,r[2]=d,r[3]=f,r[4]=m,r[5]=g)}const g_=32,y_=(t,e)=>t.candidate-e.candidate,__=new Array(g_).fill().map((()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}))),v_=new Float32Array(6);function T_(t,e){function n(t){p&&p(t/d)}function i(e,r,p){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!f&&m>=l&&(f=!0,h&&(console.warn("MeshBVH: Max depth of ".concat(l," reached when generating BVH. Consider increasing maxDepth.")),console.warn(t))),p<=c||m>=l)return n(r+p),e.offset=r,e.count=p,e;const g=function(t,e,n,i,r,s){let o=-1,a=0;if(s===e_)o=c_(e),-1!==o&&(a=(e[o]+e[o+3])/2);else if(s===n_)o=c_(t),-1!==o&&(a=function(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[6*s+2*i];return r/n}(n,i,r,o));else if(s===i_){const s=f_(t);let l=r_*r;const h=6*i,c=6*(i+r);for(let t=0;t<3;t++){const i=e[t],u=(e[t+3]-i)/g_;if(r<g_/4){const e=[...__];e.length=r;let i=0;for(let r=h;r<c;r+=6,i++){const s=e[i];s.candidate=n[r+2*t],s.count=0;const{bounds:o,leftCacheBounds:a,rightCacheBounds:l}=s;for(let t=0;t<3;t++)l[t]=1/0,l[t+3]=-1/0,a[t]=1/0,a[t+3]=-1/0,o[t]=1/0,o[t+3]=-1/0;d_(r,n,o)}e.sort(y_);let u=r;for(let t=0;t<u;t++){const n=e[t];for(;t+1<u&&e[t+1].candidate===n.candidate;)e.splice(t+1,1),u--}for(let r=h;r<c;r+=6){const i=n[r+2*t];for(let t=0;t<u;t++){const s=e[t];i>=s.candidate?d_(r,n,s.rightCacheBounds):(d_(r,n,s.leftCacheBounds),s.count++)}}for(let n=0;n<u;n++){const i=e[n],h=i.count,c=r-i.count,u=i.leftCacheBounds,p=i.rightCacheBounds;let d=0;0!==h&&(d=f_(u)/s);let f=0;0!==c&&(f=f_(p)/s);const m=s_+r_*(d*h+f*c);m<l&&(o=t,l=m,a=i.candidate)}}else{for(let t=0;t<g_;t++){const e=__[t];e.count=0,e.candidate=i+u+t*u;const n=e.bounds;for(let t=0;t<3;t++)n[t]=1/0,n[t+3]=-1/0}for(let r=h;r<c;r+=6){let e=~~((n[r+2*t]-i)/u);e>=g_&&(e=g_-1);const s=__[e];s.count++,d_(r,n,s.bounds)}const e=__[g_-1];u_(e.bounds,e.rightCacheBounds);for(let t=g_-2;t>=0;t--){const e=__[t],n=__[t+1];p_(e.bounds,n.rightCacheBounds,e.rightCacheBounds)}let p=0;for(let n=0;n<g_-1;n++){const e=__[n],i=e.count,h=e.bounds,c=__[n+1].rightCacheBounds;0!==i&&(0===p?u_(h,v_):p_(h,v_,v_)),p+=i;let u=0,d=0;0!==p&&(u=f_(v_)/s);const f=r-p;0!==f&&(d=f_(c)/s);const m=s_+r_*(u*p+d*f);m<l&&(o=t,l=m,a=e.candidate)}}}}else console.warn("MeshBVH: Invalid build strategy value ".concat(s," used."));return{axis:o,pos:a}}(e.boundingData,d,o,r,p,u);if(-1===g.axis)return n(r+p),e.offset=r,e.count=p,e;const y=function(t,e,n,i,r){let s=n,o=n+i-1;const a=r.pos,l=2*r.axis;for(;;){for(;s<=o&&e[6*s+l]<a;)s++;for(;s<=o&&e[6*o+l]>=a;)o--;if(!(s<o))return s;for(let n=0;n<3;n++){let i=t[3*s+n];t[3*s+n]=t[3*o+n],t[3*o+n]=i;let r=e[6*s+2*n+0];e[6*s+2*n+0]=e[6*o+2*n+0],e[6*o+2*n+0]=r;let a=e[6*s+2*n+1];e[6*s+2*n+1]=e[6*o+2*n+1],e[6*o+2*n+1]=a}s++,o--}}(a,o,r,p,g);if(y===r||y===r+p)n(r+p),e.offset=r,e.count=p;else{e.splitAxis=g.axis;const t=new l_,n=r,a=y-r;e.left=t,t.boundingData=new Float32Array(6),m_(o,n,a,t.boundingData,s),i(t,n,a,s,m+1);const l=new l_,h=y,c=p-a;e.right=l,l.boundingData=new Float32Array(6),m_(o,h,c,l.boundingData,s),i(l,h,c,s,m+1)}return e}!function(t,e){if(!t.index){const n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let r;r=n>65535?new Uint32Array(new i(4*n)):new Uint16Array(new i(2*n)),t.setIndex(new sc(r,1));for(let t=0;t<n;t++)r[t]=t}}(t,e);const r=new Float32Array(6),s=new Float32Array(6),o=function(t,e){const n=t.attributes.position,i=t.index.array,r=i.length/3,s=new Float32Array(6*r),o=n.normalized,a=n.array,l=n.offset||0;let h=3;n.isInterleavedBufferAttribute&&(h=n.data.stride);const c=["getX","getY","getZ"];for(let u=0;u<r;u++){const t=3*u,r=6*u;let p,d,f;o?(p=i[t+0],d=i[t+1],f=i[t+2]):(p=i[t+0]*h+l,d=i[t+1]*h+l,f=i[t+2]*h+l);for(let i=0;i<3;i++){let t,l,h;o?(t=n[c[i]](p),l=n[c[i]](d),h=n[c[i]](f)):(t=a[p+i],l=a[d+i],h=a[f+i]);let u=t;l<u&&(u=l),h<u&&(u=h);let m=t;l>m&&(m=l),h>m&&(m=h);const g=(m-u)/2,y=2*i;s[r+y+0]=u+g,s[r+y+1]=g+(Math.abs(u)+g)*a_,u<e[i]&&(e[i]=u),m>e[i+3]&&(e[i+3]=m)}}return s}(t,r),a=t.index.array,l=e.maxDepth,h=e.verbose,c=e.maxLeafTris,u=e.strategy,p=e.onProgress,d=t.index.count/3;let f=!1;const m=[],g=function(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];const e=[],n=new Set;for(const r of t.groups)n.add(r.start),n.add(r.start+r.count);const i=Array.from(n.values()).sort(((t,e)=>t-e));for(let r=0;r<i.length-1;r++){const t=i[r],n=i[r+1];e.push({offset:t/3,count:(n-t)/3})}return e}(t);if(1===g.length){const t=g[0],e=new l_;e.boundingData=r,function(t,e,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,h=-1/0;for(let c=6*e,u=6*(e+n);c<u;c+=6){const e=t[c+0];e<r&&(r=e),e>a&&(a=e);const n=t[c+2];n<s&&(s=n),n>l&&(l=n);const i=t[c+4];i<o&&(o=i),i>h&&(h=i)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=h}(o,t.offset,t.count,s),i(e,t.offset,t.count,s),m.push(e)}else for(let y of g){const t=new l_;t.boundingData=new Float32Array(6),m_(o,y.offset,y.count,t.boundingData,s),i(t,y.offset,y.count,s),m.push(t)}return m}class E_{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,e){let n=1/0,i=-1/0;for(let r=0,s=t.length;r<s;r++){const s=t[r][e];n=s<n?s:n,i=s>i?s:i}this.min=n,this.max=i}setFromPoints(t,e){let n=1/0,i=-1/0;for(let r=0,s=e.length;r<s;r++){const s=e[r],o=t.dot(s);n=o<n?o:n,i=o>i?o:i}this.min=n,this.max=i}isSeparated(t){return this.min>t.max||t.min>this.max}}E_.prototype.setFromBox=function(){const t=new Ml;return function(e,n){const i=n.min,r=n.max;let s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let n=0;n<=1;n++)for(let l=0;l<=1;l++){t.x=i.x*a+r.x*(1-a),t.y=i.y*n+r.y*(1-n),t.z=i.z*l+r.z*(1-l);const h=e.dot(t);s=Math.min(h,s),o=Math.max(h,o)}this.min=s,this.max=o}}();!function(){const t=new E_}();const x_=function(){const t=new Ml,e=new Ml,n=new Ml;return function(i,r,s){const o=i.start,a=t,l=r.start,h=e;n.subVectors(o,l),t.subVectors(i.end,i.start),e.subVectors(r.end,r.start);const c=n.dot(h),u=h.dot(a),p=h.dot(h),d=n.dot(a),f=a.dot(a)*p-u*u;let m,g;m=0!==f?(c*u-d*p)/f:0,g=(c+m*u)/p,s.x=m,s.y=g}}(),I_=function(){const t=new vl,e=new Ml,n=new Ml;return function(i,r,s,o){x_(i,r,t);let a=t.x,l=t.y;if(a>=0&&a<=1&&l>=0&&l<=1)return i.at(a,s),void r.at(l,o);if(a>=0&&a<=1)return l<0?r.at(0,o):r.at(1,o),void i.closestPointToPoint(o,!0,s);if(l>=0&&l<=1)return a<0?i.at(0,s):i.at(1,s),void r.closestPointToPoint(s,!0,o);{let t,h;t=a<0?i.start:i.end,h=l<0?r.start:r.end;const c=e,u=n;return i.closestPointToPoint(h,!0,e),r.closestPointToPoint(t,!0,n),c.distanceToSquared(h)<=u.distanceToSquared(t)?(s.copy(c),void o.copy(h)):(s.copy(t),void o.copy(u))}}}(),b_=function(){const t=new Ml,e=new Ml,n=new Kc,i=new Uy;return function(r,s){const{radius:o,center:a}=r,{a:l,b:h,c:c}=s;i.start=l,i.end=h;if(i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;i.start=l,i.end=c;if(i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;i.start=h,i.end=c;if(i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;const u=s.getPlane(n);if(Math.abs(u.distanceToPoint(a))<=o){const t=u.projectPoint(a,e);if(s.containsPoint(t))return!0}return!1}}();function w_(t){return Math.abs(t)<1e-15}class S_ extends Yh{constructor(){super(...arguments),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map((()=>new Ml)),this.satBounds=new Array(4).fill().map((()=>new E_)),this.points=[this.a,this.b,this.c],this.sphere=new eh,this.plane=new Kc,this.needsUpdate=!0}intersectsSphere(t){return b_(t,this)}update(){const t=this.a,e=this.b,n=this.c,i=this.points,r=this.satAxes,s=this.satBounds,o=r[0],a=s[0];this.getNormal(o),a.setFromPoints(o,i);const l=r[1],h=s[1];l.subVectors(t,e),h.setFromPoints(l,i);const c=r[2],u=s[2];c.subVectors(e,n),u.setFromPoints(c,i);const p=r[3],d=s[3];p.subVectors(n,t),d.setFromPoints(p,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,t),this.needsUpdate=!1}}S_.prototype.closestPointToSegment=function(){const t=new Ml,e=new Ml,n=new Uy;return function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{start:o,end:a}=i,l=this.points;let h,c=1/0;for(let u=0;u<3;u++){const o=(u+1)%3;n.start.copy(l[u]),n.end.copy(l[o]),I_(n,i,t,e),h=t.distanceToSquared(e),h<c&&(c=h,r&&r.copy(t),s&&s.copy(e))}return this.closestPointToPoint(o,t),h=o.distanceToSquared(t),h<c&&(c=h,r&&r.copy(t),s&&s.copy(o)),this.closestPointToPoint(a,t),h=a.distanceToSquared(t),h<c&&(c=h,r&&r.copy(t),s&&s.copy(a)),Math.sqrt(c)}}(),S_.prototype.intersectsTriangle=function(){const t=new S_,e=new Array(3),n=new Array(3),i=new E_,r=new E_,s=new Ml,o=new Ml,a=new Ml,l=new Ml,h=new Uy,c=new Uy,u=new Uy;return function(p){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needsUpdate&&this.update(),p.isExtendedTriangle?p.needsUpdate&&p.update():(t.copy(p),t.update(),p=t);const m=this.plane,g=p.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const t=this.satBounds,o=this.satAxes;n[0]=p.a,n[1]=p.b,n[2]=p.c;for(let e=0;e<4;e++){const r=t[e],s=o[e];if(i.setFromPoints(s,n),r.isSeparated(i))return!1}const a=p.satBounds,l=p.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let n=0;n<4;n++){const t=a[n],r=l[n];if(i.setFromPoints(r,e),t.isSeparated(i))return!1}for(let h=0;h<4;h++){const t=o[h];for(let o=0;o<4;o++){const a=l[o];if(s.crossVectors(t,a),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return d&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),d.start.set(0,0,0),d.end.set(0,0,0)),!0}{const t=this.points;let e=!1,n=0;for(let a=0;a<3;a++){const i=t[a],r=t[(a+1)%3];h.start.copy(i),h.end.copy(r),h.delta(o);const s=e?c.start:c.end,l=w_(g.distanceToPoint(i));if(w_(g.normal.dot(o))&&l){c.copy(h),n=2;break}if((g.intersectLine(h,s)||l)&&!w_(s.distanceTo(r))){if(n++,e)break;e=!0}}if(1===n&&p.containsPoint(c.end))return d&&(d.start.copy(c.end),d.end.copy(c.end)),!0;if(2!==n)return!1;const i=p.points;let r=!1,s=0;for(let o=0;o<3;o++){const t=i[o],e=i[(o+1)%3];h.start.copy(t),h.end.copy(e),h.delta(a);const n=r?u.start:u.end,l=w_(m.distanceToPoint(t));if(w_(m.normal.dot(a))&&l){u.copy(h),s=2;break}if((m.intersectLine(h,n)||l)&&!w_(n.distanceTo(e))){if(s++,r)break;r=!0}}if(1===s&&this.containsPoint(u.end))return d&&(d.start.copy(u.end),d.end.copy(u.end)),!0;if(2!==s)return!1;if(c.delta(o),u.delta(a),o.dot(a)<0){let t=u.start;u.start=u.end,u.end=t}const f=c.start.dot(o),y=c.end.dot(o),_=u.start.dot(o),v=u.end.dot(o);return(f===v||_===y||y<_!==f<v)&&(d&&(l.subVectors(c.start,u.start),l.dot(o)>0?d.start.copy(c.start):d.start.copy(u.start),l.subVectors(c.end,u.end),l.dot(o)<0?d.end.copy(c.end):d.end.copy(u.end)),!0)}}}(),S_.prototype.distanceToPoint=function(){const t=new Ml;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),S_.prototype.distanceToTriangle=function(){const t=new Ml,e=new Ml,n=["a","b","c"],i=new Uy,r=new Uy;return function(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const l=o||a?i:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let h=1/0;for(let e=0;e<3;e++){let i;const r=n[e],l=s[r];this.closestPointToPoint(l,t),i=l.distanceToSquared(t),i<h&&(h=i,o&&o.copy(t),a&&a.copy(l));const c=this[r];s.closestPointToPoint(c,t),i=c.distanceToSquared(t),i<h&&(h=i,o&&o.copy(c),a&&a.copy(t))}for(let c=0;c<3;c++){const l=n[c],u=n[(c+1)%3];i.set(this[l],this[u]);for(let c=0;c<3;c++){const l=n[c],u=n[(c+1)%3];r.set(s[l],s[u]),I_(i,r,t,e);const p=t.distanceToSquared(e);p<h&&(h=p,o&&o.copy(t),a&&a.copy(e))}}return Math.sqrt(h)}}();class A_{constructor(t,e,n){this.isOrientedBox=!0,this.min=new Ml,this.max=new Ml,this.matrix=new ch,this.invMatrix=new ch,this.points=new Array(8).fill().map((()=>new Ml)),this.satAxes=new Array(3).fill().map((()=>new Ml)),this.satBounds=new Array(3).fill().map((()=>new E_)),this.alignedSatBounds=new Array(3).fill().map((()=>new E_)),this.needsUpdate=!1,t&&this.min.copy(t),e&&this.max.copy(e),n&&this.matrix.copy(n)}set(t,e,n){this.min.copy(t),this.max.copy(e),this.matrix.copy(n),this.needsUpdate=!0}copy(t){this.min.copy(t.min),this.max.copy(t.max),this.matrix.copy(t.matrix),this.needsUpdate=!0}}function C_(t,e,n,i){const r=t.a,s=t.b,o=t.c;let a=e,l=e+1,h=e+2;n&&(a=n.getX(e),l=n.getX(e+1),h=n.getX(e+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(h),o.y=i.getY(h),o.z=i.getZ(h)}function R_(t,e,n,i,r,s,o){const a=n.index,l=n.attributes.position;for(let h=t,c=e+t;h<c;h++)if(C_(o,3*h,a,l),o.needsUpdate=!0,i(o,h,r,s))return!0;return!1}A_.prototype.update=function(){const t=this.matrix,e=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){const o=i[1*l|2*r|4*s];o.x=l?n.x:e.x,o.y=r?n.y:e.y,o.z=s?n.z:e.z,o.applyMatrix4(t)}const r=this.satBounds,s=this.satAxes,o=i[0];for(let l=0;l<3;l++){const t=s[l],e=r[l],n=i[1<<l];t.subVectors(o,n),e.setFromPoints(t,i)}const a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},A_.prototype.intersectsBox=function(){const t=new E_;return function(e){this.needsUpdate&&this.update();const n=e.min,i=e.max,r=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(t.min=n.x,t.max=i.x,o[0].isSeparated(t))return!1;if(t.min=n.y,t.max=i.y,o[1].isSeparated(t))return!1;if(t.min=n.z,t.max=i.z,o[2].isSeparated(t))return!1;for(let a=0;a<3;a++){const n=s[a],i=r[a];if(t.setFromBox(n,e),i.isSeparated(t))return!1}return!0}}(),A_.prototype.intersectsTriangle=function(){const t=new S_,e=new Array(3),n=new E_,i=new E_,r=new Ml;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);const o=this.satBounds,a=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let t=0;t<3;t++){const i=o[t],r=a[t];if(n.setFromPoints(r,e),i.isSeparated(n))return!1}const l=s.satBounds,h=s.satAxes,c=this.points;for(let t=0;t<3;t++){const e=l[t],i=h[t];if(n.setFromPoints(i,c),e.isSeparated(n))return!1}for(let t=0;t<3;t++){const s=a[t];for(let t=0;t<4;t++){const o=h[t];if(r.crossVectors(s,o),n.setFromPoints(r,e),i.setFromPoints(r,c),n.isSeparated(i))return!1}}return!0}}(),A_.prototype.closestPointToPoint=function(t,e){return this.needsUpdate&&this.update(),e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e},A_.prototype.distanceToPoint=function(){const t=new Ml;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),A_.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map((()=>new Uy)),n=new Array(12).fill().map((()=>new Uy)),i=new Ml,r=new Ml;return function(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),a&&a.copy(i),l&&l.copy(r)),0;const h=o*o,c=s.min,u=s.max,p=this.points;let d=1/0;for(let t=0;t<8;t++){const e=p[t];r.copy(e).clamp(c,u);const n=e.distanceToSquared(r);if(n<d&&(d=n,a&&a.copy(e),l&&l.copy(r),n<h))return Math.sqrt(n)}let f=0;for(let i=0;i<3;i++)for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){const o=(i+1)%3,a=(i+2)%3,l=1<<i|r<<o|s<<a,h=p[r<<o|s<<a],d=p[l];e[f].set(h,d);const m=t[i],g=t[o],y=t[a],_=n[f],v=_.start,T=_.end;v[m]=c[m],v[g]=r?c[g]:u[g],v[y]=s?c[y]:u[g],T[m]=u[m],T[g]=r?c[g]:u[g],T[y]=s?c[y]:u[g],f++}for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let n=0;n<=1;n++){r.x=t?u.x:c.x,r.y=e?u.y:c.y,r.z=n?u.z:c.z,this.closestPointToPoint(r,i);const s=r.distanceToSquared(i);if(s<d&&(d=s,a&&a.copy(i),l&&l.copy(r),s<h))return Math.sqrt(s)}for(let t=0;t<12;t++){const s=e[t];for(let t=0;t<12;t++){const e=n[t];I_(s,e,i,r);const o=i.distanceToSquared(r);if(o<d&&(d=o,a&&a.copy(i),l&&l.copy(r),o<h))return Math.sqrt(o)}}return Math.sqrt(d)}}();class D_{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){const t=this._primitives;return 0===t.length?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}}function O_(t,e){return 65535===e[t+15]}function N_(t,e){return e[t+6]}function M_(t,e){return e[t+14]}function P_(t){return t+8}function F_(t,e){return e[t+6]}const L_=new Ll,k_=new Ml,U_=["x","y","z"];function B_(t,e,n,i,r){let s=2*t,o=Y_,a=q_,l=X_;if(O_(s,a)){!function(t,e,n,i,r,s){for(let o=i,a=i+r;o<a;o++)$y(t,e,n,o,s)}(e,n,i,N_(t,l),M_(s,a),r)}else{const s=P_(t);V_(s,o,i,k_)&&B_(s,e,n,i,r);const a=F_(t,l);V_(a,o,i,k_)&&B_(a,e,n,i,r)}}function z_(t,e,n,i){let r=2*t,s=Y_,o=q_,a=X_;if(O_(r,o)){return function(t,e,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){const i=$y(t,e,n,a);i&&i.distance<s&&(o=i,s=i.distance)}return o}(e,n,i,N_(t,a),M_(r,o))}{const r=function(t,e){return e[t+7]}(t,a),o=U_[r],l=i.direction[o]>=0;let h,c;l?(h=P_(t),c=F_(t,a)):(h=F_(t,a),c=P_(t));const u=V_(h,s,i,k_)?z_(h,e,n,i):null;if(u){const t=u.point[o];if(l?t<=s[c+r]:t>=s[c+r+3])return u}const p=V_(c,s,i,k_)?z_(c,e,n,i):null;return u&&p?u.distance<=p.distance?u:p:u||p||null}}const G_=function(){let t,e;const n=[],i=new D_((()=>new Ll));return function(){t=i.getPrimitive(),e=i.getPrimitive(),n.push(t,e);const s=r(...arguments);i.releasePrimitive(t),i.releasePrimitive(e),n.pop(),n.pop();const o=n.length;return o>0&&(e=n[o-1],t=n[o-2]),s};function r(n,i,s,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;function c(t){let e=2*t,n=q_,i=X_;for(;!O_(e,n);)e=2*(t=P_(t));return N_(t,i)}function u(t){let e=2*t,n=q_,i=X_;for(;!O_(e,n);)e=2*(t=F_(t,i));return N_(t,i)+M_(e,n)}let p=2*n,d=Y_,f=q_,m=X_;if(O_(p,f)){const e=N_(n,m),i=M_(p,f);return h_(n,d,t),o(e,i,!1,h,l+n,t)}{const p=P_(n),g=F_(n,m);let y,_,v,T,E=p,x=g;if(a&&(v=t,T=e,h_(E,d,v),h_(x,d,T),y=a(v),_=a(T),_<y)){E=g,x=p;const t=y;y=_,_=t,v=T}v||(v=t,h_(E,d,v));const I=s(v,O_(2*E,f),y,h+1,l+E);let b;if(2===I){const t=c(E);b=o(t,u(E)-t,!0,h+1,l+E,v)}else b=I&&r(E,i,s,o,a,l,h+1);if(b)return!0;T=e,h_(x,d,T);const w=s(T,O_(2*x,f),_,h+1,l+x);let S;if(2===w){const t=c(x);S=o(t,u(x)-t,!0,h+1,l+x,T)}else S=w&&r(x,i,s,o,a,l,h+1);return!!S}}}(),H_=function(){const t=new S_,e=new S_,n=new ch,i=new A_,r=new A_;return function s(o,a,l,h){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=2*o,p=Y_,d=q_,f=X_;null===c&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,h),c=i);if(!O_(u,d)){const t=o+8,e=f[o+6];h_(t,p,L_);if(c.intersectsBox(L_)&&s(t,a,l,h,c))return!0;h_(e,p,L_);return!!(c.intersectsBox(L_)&&s(e,a,l,h,c))}{const i=a,s=i.index,c=i.attributes.position,m=l.index,g=l.attributes.position,y=N_(o,f),_=M_(u,d);if(n.copy(h).invert(),l.boundsTree){h_(o,p,r),r.matrix.copy(n),r.needsUpdate=!0;const t=l.boundsTree.shapecast({intersectsBounds:t=>r.intersectsBox(t),intersectsTriangle:t=>{t.a.applyMatrix4(h),t.b.applyMatrix4(h),t.c.applyMatrix4(h),t.needsUpdate=!0;for(let n=3*y,i=3*(_+y);n<i;n+=3)if(C_(e,n,s,c),e.needsUpdate=!0,t.intersectsTriangle(e))return!0;return!1}});return t}for(let r=3*y,o=_+3*y;r<o;r+=3){C_(t,r,s,c),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let n=0,i=m.count;n<i;n+=3)if(C_(e,n,m,g),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}}}();function V_(t,e,n,i){return h_(t,e,L_),n.intersectBox(L_,i)}const j_=[];let W_,Y_,q_,X_;function Z_(t){W_&&j_.push(W_),W_=t,Y_=new Float32Array(t),q_=new Uint16Array(t),X_=new Uint32Array(t)}function K_(){W_=null,Y_=null,q_=null,X_=null,j_.length&&Z_(j_.pop())}const Q_=Symbol("skip tree generation"),J_=new Ll,$_=new Ll,tv=new ch,ev=new A_,nv=new A_,iv=new Ml,rv=new Ml,sv=new Ml,ov=new Ml,av=new Ml,lv=new Ll,hv=new D_((()=>new S_));class cv{static serialize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),cv.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});e={cloneBuffers:!0,...e};const n=t.geometry,i=t._roots,r=n.getIndex();let s;return s=e.cloneBuffers?{roots:i.map((t=>t.slice())),index:r.array.slice()}:{roots:i,index:r.array},s}static deserialize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("boolean"===typeof n)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),cv.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});n={setIndex:!0,...n};const{index:i,roots:r}=t,s=new cv(e,{...n,[Q_]:!0});if(s._roots=r,n.setIndex){const n=e.getIndex();if(null===n){const n=new sc(t.index,1,!1);e.setIndex(n)}else n.array!==i&&(n.array.set(i),n.needsUpdate=!0)}return s}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if(e=Object.assign({strategy:e_,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Q_]:!1},e),e.useSharedArrayBuffer&&"undefined"===typeof SharedArrayBuffer)throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,e[Q_]||(this._roots=function(t,e){const n=T_(t,e);let i,r,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<n.length;c++){const t=n[c],e=new a(32*l(t));i=new Float32Array(e),r=new Uint32Array(e),s=new Uint16Array(e),h(0,t),o.push(e)}return o;function l(t){return t.count?1:1+l(t.left)+l(t.right)}function h(t,e){const n=t/4,o=t/2,a=!!e.count,l=e.boundingData;for(let r=0;r<6;r++)i[n+r]=l[r];if(a){const i=e.offset,a=e.count;return r[n+6]=i,s[o+14]=a,s[o+15]=o_,t+32}{const i=e.left,s=e.right,o=e.splitAxis;let a;if(a=h(t+32,i),a/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[n+6]=a/4,a=h(a,s),r[n+7]=o,a}}}(t,e),!t.boundingBox&&e.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new Ll))),this.geometry=t}refit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&Array.isArray(t)&&(t=new Set(t));const e=this.geometry,n=e.index.array,i=e.attributes.position;let r,s,o,a,l=0;const h=this._roots;for(let u=0,p=h.length;u<p;u++)r=h[u],s=new Uint32Array(r),o=new Uint16Array(r),a=new Float32Array(r),c(0,l),l+=r.byteLength;function c(e,r){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const h=2*e;if(o[h+15]===o_){const t=s[e+6];let r=1/0,l=1/0,c=1/0,u=-1/0,p=-1/0,d=-1/0;for(let e=3*t,s=3*(t+o[h+14]);e<s;e++){const t=n[e],s=i.getX(t),o=i.getY(t),a=i.getZ(t);s<r&&(r=s),s>u&&(u=s),o<l&&(l=o),o>p&&(p=o),a<c&&(c=a),a>d&&(d=a)}return(a[e+0]!==r||a[e+1]!==l||a[e+2]!==c||a[e+3]!==u||a[e+4]!==p||a[e+5]!==d)&&(a[e+0]=r,a[e+1]=l,a[e+2]=c,a[e+3]=u,a[e+4]=p,a[e+5]=d,!0)}{const n=e+8,i=s[e+6],o=n+r,h=i+r;let u=l,p=!1,d=!1;t?u||(p=t.has(o),d=t.has(h),u=!p&&!d):(p=!0,d=!0);const f=u||d;let m=!1;(u||p)&&(m=c(n,r,u));let g=!1;f&&(g=c(i,r,u));const y=m||g;if(y)for(let t=0;t<3;t++){const r=n+t,s=i+t,o=a[r],l=a[r+3],h=a[s],c=a[s+3];a[e+t]=o<h?o:h,a[e+t+3]=l>c?l:c}return y}}}traverse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._roots[e],i=new Uint32Array(n),r=new Uint16Array(n);!function e(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=2*s,l=r[a+15]===o_;if(l){const e=i[s+6],h=r[a+14];t(o,l,new Float32Array(n,4*s,6),e,h)}else{const r=s+8,a=i[s+6],h=i[s+7];t(o,l,new Float32Array(n,4*s,6),h)||(e(r,o+1),e(a,o+1))}}(0)}raycast(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is;const n=this._roots,i=this.geometry,r=[],s=e.isMaterial,o=Array.isArray(e),a=i.groups,l=s?e.side:e;for(let h=0,c=n.length;h<c;h++){const s=o?e[a[h].materialIndex].side:l,c=r.length;if(Z_(n[h]),B_(0,i,s,t,r),K_(),o){const t=a[h].materialIndex;for(let e=c,n=r.length;e<n;e++)r[e].face.materialIndex=t}}return r}raycastFirst(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is;const n=this._roots,i=this.geometry,r=e.isMaterial,s=Array.isArray(e);let o=null;const a=i.groups,l=r?e.side:e;for(let h=0,c=n.length;h<c;h++){const r=s?e[a[h].materialIndex].side:l;Z_(n[h]);const c=z_(0,i,r,t);K_(),null!=c&&(null==o||c.distance<o.distance)&&(o=c,s&&(c.face.materialIndex=a[h].materialIndex))}return o}intersectsGeometry(t,e){const n=this.geometry;let i=!1;for(const r of this._roots)if(Z_(r),i=H_(0,n,t,e),K_(),i)break;return i}shapecast(t,e,n){const i=this.geometry;if(t instanceof Function){if(e){const t=e;e=(e,n,i,r)=>{const s=3*n;return t(e,s,s+1,s+2,i,r)}}t={boundsTraverseOrder:n,intersectsBounds:t,intersectsTriangle:e,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const r=hv.getPrimitive();let{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=t;if(a&&l){const t=a;a=(e,n,s,o,a)=>!!t(e,n,s,o,a)||R_(e,n,i,l,s,o,r)}else a||(a=l?(t,e,n,s)=>R_(t,e,i,l,n,s,r):(t,e,n)=>n);let h=!1,c=0;for(const u of this._roots){if(Z_(u),h=G_(0,i,o,a,s,c),K_(),h)break;c+=u.byteLength}return hv.releasePrimitive(r),h}bvhcast(t,e,n){let{intersectsRanges:i,intersectsTriangles:r}=n;const s=this.geometry.index,o=this.geometry.attributes.position,a=t.geometry.index,l=t.geometry.attributes.position;tv.copy(e).invert();const h=hv.getPrimitive(),c=hv.getPrimitive();if(r){function p(t,n,i,u,p,d,f,m){for(let g=i,y=i+u;g<y;g++){C_(c,3*g,a,l),c.a.applyMatrix4(e),c.b.applyMatrix4(e),c.c.applyMatrix4(e),c.needsUpdate=!0;for(let e=t,i=t+n;e<i;e++)if(C_(h,3*e,s,o),h.needsUpdate=!0,r(h,c,e,g,p,d,f,m))return!0}return!1}if(i){const d=i;i=function(t,e,n,i,r,s,o,a){return!!d(t,e,n,i,r,s,o,a)||p(t,e,n,i,r,s,o,a)}}else i=p}t.getBoundingBox($_),$_.applyMatrix4(e);const u=this.shapecast({intersectsBounds:t=>$_.intersectsBox(t),intersectsRange:(e,n,r,s,o,a)=>(J_.copy(a),J_.applyMatrix4(tv),t.shapecast({intersectsBounds:t=>J_.intersectsBox(t),intersectsRange:(t,r,a,l,h)=>i(e,n,t,r,s,o,l,h)}))});return hv.releasePrimitive(h),hv.releasePrimitive(c),u}intersectsBox(t,e){return ev.set(t.min,t.max,e),ev.needsUpdate=!0,this.shapecast({intersectsBounds:t=>ev.intersectsBox(t),intersectsTriangle:t=>ev.intersectsTriangle(t)})}intersectsSphere(t){return this.shapecast({intersectsBounds:e=>t.intersectsBox(e),intersectsTriangle:e=>e.intersectsSphere(t)})}closestPointToGeometry(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;t.boundingBox||t.computeBoundingBox(),ev.set(t.boundingBox.min,t.boundingBox.max,e),ev.needsUpdate=!0;const o=this.geometry,a=o.attributes.position,l=o.index,h=t.attributes.position,c=t.index,u=hv.getPrimitive(),p=hv.getPrimitive();let d=rv,f=sv,m=null,g=null;i&&(m=ov,g=av);let y=1/0,_=null,v=null;return tv.copy(e).invert(),nv.matrix.copy(tv),this.shapecast({boundsTraverseOrder:t=>ev.distanceToBox(t),intersectsBounds:(t,e,n)=>n<y&&n<s&&(e&&(nv.min.copy(t.min),nv.max.copy(t.max),nv.needsUpdate=!0),!0),intersectsRange:(n,i)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:t=>nv.distanceToBox(t),intersectsBounds:(t,e,n)=>n<y&&n<s,intersectsRange:(t,s)=>{for(let o=3*t,T=3*(t+s);o<T;o+=3){C_(p,o,c,h),p.a.applyMatrix4(e),p.b.applyMatrix4(e),p.c.applyMatrix4(e),p.needsUpdate=!0;for(let t=3*n,e=3*(n+i);t<e;t+=3){C_(u,t,l,a),u.needsUpdate=!0;const e=u.distanceToTriangle(p,d,m);if(e<y&&(f.copy(d),g&&g.copy(m),y=e,_=t/3,v=o/3),e<r)return!0}}}});for(let t=0,s=c?c.count:h.count;t<s;t+=3){C_(p,t,c,h),p.a.applyMatrix4(e),p.b.applyMatrix4(e),p.c.applyMatrix4(e),p.needsUpdate=!0;for(let e=3*n,s=3*(n+i);e<s;e+=3){C_(u,e,l,a),u.needsUpdate=!0;const n=u.distanceToTriangle(p,d,m);if(n<y&&(f.copy(d),g&&g.copy(m),y=n,_=e/3,v=t/3),n<r)return!0}}}}),hv.releasePrimitive(u),hv.releasePrimitive(p),y===1/0?null:(n.point?n.point.copy(f):n.point=f.clone(),n.distance=y,n.faceIndex=_,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(tv),f.applyMatrix4(tv),i.distance=f.sub(i.point).length(),i.faceIndex=v),n)}closestPointToPoint(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const r=n*n,s=i*i;let o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:e=>(iv.copy(t).clamp(e.min,e.max),iv.distanceToSquared(t)),intersectsBounds:(t,e,n)=>n<o&&n<s,intersectsTriangle:(e,n)=>{e.closestPointToPoint(t,iv);const i=t.distanceToSquared(iv);return i<o&&(rv.copy(iv),o=i,a=n),i<r}}),o===1/0)return null;const l=Math.sqrt(o);return e.point?e.point.copy(rv):e.point=rv.clone(),e.distance=l,e.faceIndex=a,e}getBoundingBox(t){t.makeEmpty();return this._roots.forEach((e=>{h_(0,new Float32Array(e),lv),t.union(lv)})),t}}const uv=new hh,pv=new ch,dv=Pc.prototype.raycast;function fv(t,e){if(this.geometry.boundsTree){if(void 0===this.material)return;pv.copy(this.matrixWorld).invert(),uv.copy(t.ray).applyMatrix4(pv);const n=this.geometry.boundsTree;if(!0===t.firstHitOnly){const i=t_(n.raycastFirst(uv,this.material),this,t);i&&e.push(i)}else{const i=n.raycast(uv,this.material);for(let n=0,r=i.length;n<r;n++){const r=t_(i[n],this,t);r&&e.push(r)}}}else dv.call(this,t,e)}function mv(t){return this.boundsTree=new cv(this,t),this.boundsTree}function gv(){this.boundsTree=null}class yv{constructor(){this.trigger=t=>{this.handlers.slice(0).forEach((e=>e(t)))},this.handlers=[]}on(t){this.handlers.push(t)}off(t){this.handlers=this.handlers.filter((e=>e!==t))}reset(){this.handlers.length=0}}const _v=1,vv=2,Tv=4,Ev=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function xv(t){return t.isPerspectiveCamera}function Iv(t){return t.isOrthographicCamera}const bv=2*Math.PI,wv=Math.PI/2,Sv=1e-5;function Av(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sv;return Math.abs(t)<e}function Cv(t,e){return Av(t-e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sv)}function Rv(t,e){return Math.round(t/e)*e}function Dv(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Ov(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function Nv(t,e){e.set(0,0),t.forEach((t=>{e.x+=t.clientX,e.y+=t.clientY})),e.x/=t.length,e.y/=t.length}function Mv(t,e){return!!Iv(t)&&(console.warn("".concat(e," is not supported in OrthographicCamera")),!0)}function Pv(t){return t.invert?t.invert():t.inverse(),t}class Fv{constructor(){this._listeners={}}addEventListener(t,e){const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}removeAllEventListeners(t){t?Array.isArray(this._listeners[t])&&(this._listeners[t].length=0):this._listeners={}}dispatchEvent(t){const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t)}}}const Lv=1/8,kv="undefined"!==typeof window,Uv=kv&&/Mac/.test(navigator.platform),Bv=!(kv&&"PointerEvent"in window);let zv,Gv,Hv,Vv,jv,Wv,Yv,qv,Xv,Zv,Kv,Qv,Jv,$v,tT,eT,nT,iT,rT,sT,oT,aT;class lT extends Fv{static install(t){zv=t.THREE,Gv=Object.freeze(new zv.Vector3(0,0,0)),Hv=Object.freeze(new zv.Vector3(0,1,0)),Vv=Object.freeze(new zv.Vector3(0,0,1)),jv=new zv.Vector2,Wv=new zv.Vector3,Yv=new zv.Vector3,qv=new zv.Vector3,Xv=new zv.Vector3,Zv=new zv.Vector3,Kv=new zv.Vector3,Qv=new zv.Vector3,Jv=new zv.Vector3,$v=new zv.Spherical,tT=new zv.Spherical,eT=new zv.Box3,nT=new zv.Box3,iT=new zv.Sphere,rT=new zv.Quaternion,sT=new zv.Quaternion,oT=new zv.Matrix4,aT=new zv.Raycaster}static get ACTION(){return Ev}constructor(t,e){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Ev.NONE,this._viewport=null,this._affectOffset=!1,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(t,e,n)=>{if(xv(this._camera)){const i=Wv.copy(this._camera.position).sub(this._target),r=this._camera.getEffectiveFOV()*zv.MathUtils.DEG2RAD,s=i.length()*Math.tan(.5*r),o=this.truckSpeed*t*s/this._elementRect.height,a=this.truckSpeed*e*s/this._elementRect.height;this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(o,0,!0),this.forward(-a,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y+a,this._focalOffsetEnd.z,!0):this.truck(o,a,!0)}else if(Iv(this._camera)){const i=this._camera,r=t*(i.right-i.left)/i.zoom/this._elementRect.width,s=e*(i.top-i.bottom)/i.zoom/this._elementRect.height;n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+s,this._focalOffsetEnd.z,!0):this.truck(r,s,!0)}},this._rotateInternal=(t,e)=>{const n=bv*this.azimuthRotateSpeed*t/this._elementRect.height,i=bv*this.polarRotateSpeed*e/this._elementRect.height;this.rotate(n,i,!0)},this._dollyInternal=(t,e,n)=>{const i=Math.pow(.95,-t*this.dollySpeed),r=this._sphericalEnd.radius*i,s=this._sphericalEnd.radius,o=s*(t>=0?-1:1);this.dollyTo(r),this.infinityDolly&&(r<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(Wv),this._targetEnd.add(Wv.normalize().multiplyScalar(o)),this._target.add(Wv.normalize().multiplyScalar(o))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-s,this.infinityDolly&&(r<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=o),this._dollyControlCoord.set(e,n))},this._zoomInternal=(t,e,n)=>{const i=Math.pow(.95,t*this.dollySpeed),r=this._zoomEnd;this.zoomTo(this._zoom*i),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-r,this._dollyControlCoord.set(e,n))},"undefined"===typeof zv&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=(new zv.Quaternion).setFromUnitVectors(this._camera.up,Hv),this._yAxisUpSpaceInverse=Pv(this._yAxisUpSpace.clone()),this._state=Ev.NONE,this._target=new zv.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new zv.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new zv.Spherical).setFromVector3(Wv.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new zv.Vector3,new zv.Vector3,new zv.Vector3,new zv.Vector3],this._updateNearPlaneCorners(),this._boundary=new zv.Box3(new zv.Vector3(-1/0,-1/0,-1/0),new zv.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new zv.Vector2,this.mouseButtons={left:Ev.ROTATE,middle:Ev.DOLLY,right:Ev.TRUCK,wheel:xv(this._camera)?Ev.DOLLY:Iv(this._camera)?Ev.ZOOM:Ev.NONE},this.touches={one:Ev.TOUCH_ROTATE,two:xv(this._camera)?Ev.TOUCH_DOLLY_TRUCK:Iv(this._camera)?Ev.TOUCH_ZOOM_TRUCK:Ev.NONE,three:Ev.TOUCH_TRUCK};const n=new zv.Vector2,i=new zv.Vector2,r=new zv.Vector2,s=t=>{if(!this._enabled||!this._domElement)return;const e={pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0};this._activePointers.push(e),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),y(t)},o=t=>{if(!this._enabled||!this._domElement)return;const e={pointerId:0,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0};this._activePointers.push(e),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",p),this._domElement.ownerDocument.addEventListener("mousemove",h),this._domElement.ownerDocument.addEventListener("mouseup",p),y(t)},a=t=>{this._enabled&&this._domElement&&(t.preventDefault(),Array.prototype.forEach.call(t.changedTouches,(t=>{const e={pointerId:t.identifier,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0};this._activePointers.push(e)})),this._domElement.ownerDocument.removeEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this._domElement.ownerDocument.addEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",d),y(t))},l=t=>{t.cancelable&&t.preventDefault();const e=t.pointerId,n=this._findPointerById(e);if(n){if(n.clientX=t.clientX,n.clientY=t.clientY,n.deltaX=t.movementX,n.deltaY=t.movementY,"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,(t.buttons&_v)===_v&&(this._state=this._state|this.mouseButtons.left),(t.buttons&Tv)===Tv&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&vv)===vv&&(this._state=this._state|this.mouseButtons.right);_()}},h=t=>{const e=this._findPointerById(0);e&&(e.clientX=t.clientX,e.clientY=t.clientY,e.deltaX=t.movementX,e.deltaY=t.movementY,this._state=0,(t.buttons&_v)===_v&&(this._state=this._state|this.mouseButtons.left),(t.buttons&Tv)===Tv&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&vv)===vv&&(this._state=this._state|this.mouseButtons.right),_())},c=t=>{t.cancelable&&t.preventDefault(),Array.prototype.forEach.call(t.changedTouches,(t=>{const e=t.identifier,n=this._findPointerById(e);n&&(n.clientX=t.clientX,n.clientY=t.clientY)})),_()},u=t=>{const e=t.pointerId,n=this._findPointerById(e);if(n&&this._activePointers.splice(this._activePointers.indexOf(n),1),"touch"===t.pointerType)switch(this._activePointers.length){case 0:this._state=Ev.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=Ev.NONE;v()},p=()=>{const t=this._findPointerById(0);t&&this._activePointers.splice(this._activePointers.indexOf(t),1),this._state=Ev.NONE,v()},d=t=>{switch(Array.prototype.forEach.call(t.changedTouches,(t=>{const e=t.identifier,n=this._findPointerById(e);n&&this._activePointers.splice(this._activePointers.indexOf(n),1)})),this._activePointers.length){case 0:this._state=Ev.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}v()};let f=-1;const m=t=>{if(!this._enabled||this.mouseButtons.wheel===Ev.NONE)return;if(t.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Ev.ROTATE||this.mouseButtons.wheel===Ev.TRUCK){const t=performance.now();f-t<1e3&&this._getClientRect(this._elementRect),f=t}const e=Uv?-1:-3,n=1===t.deltaMode?t.deltaY/e:t.deltaY/(10*e),i=this.dollyToCursor?(t.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,r=this.dollyToCursor?(t.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Ev.ROTATE:this._rotateInternal(t.deltaX,t.deltaY);break;case Ev.TRUCK:this._truckInternal(t.deltaX,t.deltaY,!1);break;case Ev.OFFSET:this._truckInternal(t.deltaX,t.deltaY,!0);break;case Ev.DOLLY:this._dollyInternal(-n,i,r);break;case Ev.ZOOM:this._zoomInternal(-n,i,r)}this.dispatchEvent({type:"control"})},g=t=>{this._enabled&&t.preventDefault()},y=t=>{if(!this._enabled)return;Nv(this._activePointers,jv),this._getClientRect(this._elementRect),n.copy(jv),i.copy(jv);if(this._activePointers.length>=2){const t=jv.x-this._activePointers[1].clientX,e=jv.y-this._activePointers[1].clientY,n=Math.sqrt(t*t+e*e);r.set(0,n);const s=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),o=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);i.set(s,o)}if("touches"in t||"pointerType"in t&&"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,(t.buttons&_v)===_v&&(this._state=this._state|this.mouseButtons.left),(t.buttons&Tv)===Tv&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&vv)===vv&&(this._state=this._state|this.mouseButtons.right);this.dispatchEvent({type:"controlstart"})},_=()=>{if(!this._enabled)return;Nv(this._activePointers,jv);const t=this._domElement&&document.pointerLockElement===this._domElement,e=t?-this._activePointers[0].deltaX:i.x-jv.x,s=t?-this._activePointers[0].deltaY:i.y-jv.y;if(i.copy(jv),(this._state&Ev.ROTATE)!==Ev.ROTATE&&(this._state&Ev.TOUCH_ROTATE)!==Ev.TOUCH_ROTATE&&(this._state&Ev.TOUCH_DOLLY_ROTATE)!==Ev.TOUCH_DOLLY_ROTATE&&(this._state&Ev.TOUCH_ZOOM_ROTATE)!==Ev.TOUCH_ZOOM_ROTATE||this._rotateInternal(e,s),(this._state&Ev.DOLLY)===Ev.DOLLY||(this._state&Ev.ZOOM)===Ev.ZOOM){const t=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,e=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ev.DOLLY)===Ev.DOLLY?this._dollyInternal(s*Lv,t,e):this._zoomInternal(s*Lv,t,e)}if((this._state&Ev.TOUCH_DOLLY)===Ev.TOUCH_DOLLY||(this._state&Ev.TOUCH_ZOOM)===Ev.TOUCH_ZOOM||(this._state&Ev.TOUCH_DOLLY_TRUCK)===Ev.TOUCH_DOLLY_TRUCK||(this._state&Ev.TOUCH_ZOOM_TRUCK)===Ev.TOUCH_ZOOM_TRUCK||(this._state&Ev.TOUCH_DOLLY_OFFSET)===Ev.TOUCH_DOLLY_OFFSET||(this._state&Ev.TOUCH_ZOOM_OFFSET)===Ev.TOUCH_ZOOM_OFFSET||(this._state&Ev.TOUCH_DOLLY_ROTATE)===Ev.TOUCH_DOLLY_ROTATE||(this._state&Ev.TOUCH_ZOOM_ROTATE)===Ev.TOUCH_ZOOM_ROTATE){const t=jv.x-this._activePointers[1].clientX,e=jv.y-this._activePointers[1].clientY,n=Math.sqrt(t*t+e*e),s=r.y-n;r.set(0,n);const o=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,a=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ev.TOUCH_DOLLY)===Ev.TOUCH_DOLLY||(this._state&Ev.TOUCH_DOLLY_ROTATE)===Ev.TOUCH_DOLLY_ROTATE||(this._state&Ev.TOUCH_DOLLY_TRUCK)===Ev.TOUCH_DOLLY_TRUCK||(this._state&Ev.TOUCH_DOLLY_OFFSET)===Ev.TOUCH_DOLLY_OFFSET?this._dollyInternal(s*Lv,o,a):this._zoomInternal(s*Lv,o,a)}(this._state&Ev.TRUCK)!==Ev.TRUCK&&(this._state&Ev.TOUCH_TRUCK)!==Ev.TOUCH_TRUCK&&(this._state&Ev.TOUCH_DOLLY_TRUCK)!==Ev.TOUCH_DOLLY_TRUCK&&(this._state&Ev.TOUCH_ZOOM_TRUCK)!==Ev.TOUCH_ZOOM_TRUCK||this._truckInternal(e,s,!1),(this._state&Ev.OFFSET)!==Ev.OFFSET&&(this._state&Ev.TOUCH_OFFSET)!==Ev.TOUCH_OFFSET&&(this._state&Ev.TOUCH_DOLLY_OFFSET)!==Ev.TOUCH_DOLLY_OFFSET&&(this._state&Ev.TOUCH_ZOOM_OFFSET)!==Ev.TOUCH_ZOOM_OFFSET||this._truckInternal(e,s,!0),this.dispatchEvent({type:"control"})},v=()=>{Nv(this._activePointers,jv),i.copy(jv),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this.dispatchEvent({type:"controlend"}))};this._addAllEventListeners=t=>{this._domElement=t,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",s),Bv&&this._domElement.addEventListener("mousedown",o),Bv&&this._domElement.addEventListener("touchstart",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("mousedown",o),this._domElement.removeEventListener("touchstart",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",p),this._domElement.ownerDocument.removeEventListener("touchend",d))},this.cancel=()=>{this._state!==Ev.NONE&&(this._state=Ev.NONE,this._activePointers.length=0,v())},e&&this.connect(e),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._domElement&&(this._enabled=t,t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}rotate(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,n)}rotateAzimuthTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(t,this._sphericalEnd.phi,e)}rotatePolarTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(this._sphericalEnd.theta,t,e)}rotateTo(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=zv.MathUtils.clamp(t,this.minAzimuthAngle,this.maxAzimuthAngle),r=zv.MathUtils.clamp(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const s=!n||Cv(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Cv(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dollyTo(this._sphericalEnd.radius-t,e)}dollyTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._sphericalEnd.radius,i=zv.MathUtils.clamp(t,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){const t=this._collisionTest(),e=Cv(t,this._spherical.radius);if(!(n>i)&&e)return Promise.resolve();this._sphericalEnd.radius=Math.min(i,t)}else this._sphericalEnd.radius=i;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);const r=!e||Cv(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}zoom(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomTo(this._zoomEnd+t,e)}zoomTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._zoomEnd=zv.MathUtils.clamp(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);const n=!e||Cv(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(n)}pan(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn("`pan` has been renamed to `truck`"),this.truck(t,e,n)}truck(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._camera.updateMatrix(),Xv.setFromMatrixColumn(this._camera.matrix,0),Zv.setFromMatrixColumn(this._camera.matrix,1),Xv.multiplyScalar(t),Zv.multiplyScalar(-e);const i=Wv.copy(Xv).add(Zv),r=Yv.copy(this._targetEnd).add(i);return this.moveTo(r.x,r.y,r.z,n)}forward(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Wv.setFromMatrixColumn(this._camera.matrix,0),Wv.crossVectors(this._camera.up,Wv),Wv.multiplyScalar(t);const n=Yv.copy(this._targetEnd).add(Wv);return this.moveTo(n.x,n.y,n.z,e)}moveTo(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=Wv.set(t,e,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const s=!i||Cv(this._target.x,this._targetEnd.x,this.restThreshold)&&Cv(this._target.y,this._targetEnd.y,this.restThreshold)&&Cv(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}fitToBox(t,e){let{cover:n=!1,paddingLeft:i=0,paddingRight:r=0,paddingBottom:s=0,paddingTop:o=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=[],l=t.isBox3?eT.copy(t):eT.setFromObject(t);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const h=Rv(this._sphericalEnd.theta,wv),c=Rv(this._sphericalEnd.phi,wv);a.push(this.rotateTo(h,c,e));const u=Wv.setFromSpherical(this._sphericalEnd).normalize(),p=rT.setFromUnitVectors(u,Vv),d=Cv(Math.abs(u.y),1);d&&p.multiply(sT.setFromAxisAngle(Hv,h)),p.multiply(this._yAxisUpSpaceInverse);const f=nT.makeEmpty();Yv.copy(l.min).applyQuaternion(p),f.expandByPoint(Yv),Yv.copy(l.min).setX(l.max.x).applyQuaternion(p),f.expandByPoint(Yv),Yv.copy(l.min).setY(l.max.y).applyQuaternion(p),f.expandByPoint(Yv),Yv.copy(l.max).setZ(l.min.z).applyQuaternion(p),f.expandByPoint(Yv),Yv.copy(l.min).setZ(l.max.z).applyQuaternion(p),f.expandByPoint(Yv),Yv.copy(l.max).setY(l.min.y).applyQuaternion(p),f.expandByPoint(Yv),Yv.copy(l.max).setX(l.min.x).applyQuaternion(p),f.expandByPoint(Yv),Yv.copy(l.max).applyQuaternion(p),f.expandByPoint(Yv),f.min.x-=i,f.min.y-=s,f.max.x+=r,f.max.y+=o,p.setFromUnitVectors(Vv,u),d&&p.premultiply(sT.invert()),p.premultiply(this._yAxisUpSpace);const m=f.getSize(Wv),g=f.getCenter(Yv).applyQuaternion(p);if(xv(this._camera)){const t=this.getDistanceToFitBox(m.x,m.y,m.z,n);a.push(this.moveTo(g.x,g.y,g.z,e)),a.push(this.dollyTo(t,e)),a.push(this.setFocalOffset(0,0,0,e))}else if(Iv(this._camera)){const t=this._camera,i=t.right-t.left,r=t.top-t.bottom,s=n?Math.max(i/m.x,r/m.y):Math.min(i/m.x,r/m.y);a.push(this.moveTo(g.x,g.y,g.z,e)),a.push(this.zoomTo(s,e)),a.push(this.setFocalOffset(0,0,0,e))}return Promise.all(a)}fitToSphere(t,e){const n=[],i=t instanceof zv.Sphere?iT.copy(t):function(t,e){const n=e,i=n.center;eT.makeEmpty(),t.traverseVisible((t=>{t.isMesh&&eT.expandByObject(t)})),eT.getCenter(i);let r=0;return t.traverseVisible((t=>{if(!t.isMesh)return;const e=t,n=e.geometry.clone();if(n.applyMatrix4(e.matrixWorld),n.isBufferGeometry){const t=n.attributes.position;for(let e=0,n=t.count;e<n;e++)Wv.fromBufferAttribute(t,e),r=Math.max(r,i.distanceToSquared(Wv))}else{const t=n.attributes.position,e=new zv.Vector3;for(let n=0,s=t.count;n<s;n++)e.fromBufferAttribute(t,n),r=Math.max(r,i.distanceToSquared(e))}})),n.radius=Math.sqrt(r),n}(t,iT);if(n.push(this.moveTo(i.center.x,i.center.y,i.center.z,e)),xv(this._camera)){const t=this.getDistanceToFitSphere(i.radius);n.push(this.dollyTo(t,e))}else if(Iv(this._camera)){const t=this._camera.right-this._camera.left,r=this._camera.top-this._camera.bottom,s=2*i.radius,o=Math.min(t/s,r/s);n.push(this.zoomTo(o,e))}return n.push(this.setFocalOffset(0,0,0,e)),Promise.all(n)}setLookAt(t,e,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const a=Yv.set(i,r,s),l=Wv.set(t,e,n);this._targetEnd.copy(a),this._sphericalEnd.setFromVector3(l.sub(a).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!o||Cv(this._target.x,this._targetEnd.x,this.restThreshold)&&Cv(this._target.y,this._targetEnd.y,this.restThreshold)&&Cv(this._target.z,this._targetEnd.z,this.restThreshold)&&Cv(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Cv(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Cv(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerpLookAt(t,e,n,i,r,s,o,a,l,h,c,u,p){let d=arguments.length>13&&void 0!==arguments[13]&&arguments[13];const f=Wv.set(i,r,s),m=Yv.set(t,e,n);$v.setFromVector3(m.sub(f).applyQuaternion(this._yAxisUpSpace));const g=qv.set(h,c,u),y=Yv.set(o,a,l);tT.setFromVector3(y.sub(g).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(f.lerp(g,p));const _=tT.theta-$v.theta,v=tT.phi-$v.phi,T=tT.radius-$v.radius;this._sphericalEnd.set($v.radius+T*p,$v.phi+v*p,$v.theta+_*p),this.normalizeRotations(),this._needsUpdate=!0,d||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const E=!d||Cv(this._target.x,this._targetEnd.x,this.restThreshold)&&Cv(this._target.y,this._targetEnd.y,this.restThreshold)&&Cv(this._target.z,this._targetEnd.z,this.restThreshold)&&Cv(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Cv(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Cv(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(E)}setPosition(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.setLookAt(t,e,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=this.getPosition(Wv),s=this.setLookAt(r.x,r.y,r.z,t,e,n,i);return this._sphericalEnd.phi=zv.MathUtils.clamp(this.polarAngle,this.minPolarAngle,this.maxPolarAngle),s}setFocalOffset(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._focalOffsetEnd.set(t,e,n),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd),this._affectOffset=!Av(t)||!Av(e)||!Av(n);const r=!i||Cv(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Cv(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Cv(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(t,e,n){this._camera.updateMatrixWorld(),Xv.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Zv.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Kv.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=Wv.set(t,e,n),r=i.distanceTo(this._camera.position),s=i.sub(this._camera.position);Xv.multiplyScalar(s.x),Zv.multiplyScalar(s.y),Kv.multiplyScalar(s.z),Wv.copy(Xv).add(Zv).add(Kv),Wv.z=Wv.z+r,this.dollyTo(r,!1),this.setFocalOffset(-Wv.x,Wv.y,-Wv.z,!1),this.moveTo(t,e,n,!1)}setBoundary(t){if(!t)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,e,n,i){null!==t?(this._viewport=this._viewport||new zv.Vector4,"number"===typeof t?this._viewport.set(t,e,n,i):this._viewport.copy(t)):this._viewport=null}getDistanceToFitBox(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Mv(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const r=t/e,s=this._camera.getEffectiveFOV()*zv.MathUtils.DEG2RAD,o=this._camera.aspect;return.5*((i?r>o:r<o)?e:t/o)/Math.tan(.5*s)+.5*n}getDistanceToFitSphere(t){if(Mv(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const e=this._camera.getEffectiveFOV()*zv.MathUtils.DEG2RAD,n=2*Math.atan(Math.tan(.5*e)*this._camera.aspect),i=1<this._camera.aspect?e:n;return t/Math.sin(.5*i)}getTarget(t){return(t&&t.isVector3?t:new zv.Vector3).copy(this._targetEnd)}getPosition(t){return(t&&t.isVector3?t:new zv.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(t){return(t&&t.isVector3?t:new zv.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%bv,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=bv),this._spherical.theta+=bv*Math.round((this._sphericalEnd.theta-this._spherical.theta)/bv)}reset(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(e)}saveState(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Hv),Pv(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(t){const e=this._state===Ev.NONE?this.dampingFactor:this.draggingDampingFactor,n=Math.min(e*t*60,1),i=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,o=Qv.subVectors(this._targetEnd,this._target),a=Jv.subVectors(this._focalOffsetEnd,this._focalOffset);if(Av(i)&&Av(r)&&Av(s)&&Av(o.x)&&Av(o.y)&&Av(o.z)&&Av(a.x)&&Av(a.y)&&Av(a.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)):(this._spherical.set(this._spherical.radius+s*n,this._spherical.phi+r*n,this._spherical.theta+i*n),this._target.add(o.multiplyScalar(n)),this._focalOffset.add(a.multiplyScalar(n)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(xv(this._camera)){const t=this._camera,e=Wv.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),n=Yv.copy(e).cross(t.up).normalize();0===n.lengthSq()&&(n.x=1);const i=qv.crossVectors(n,e),r=this._sphericalEnd.radius*Math.tan(t.getEffectiveFOV()*zv.MathUtils.DEG2RAD*.5),s=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,o=Wv.copy(this._targetEnd).add(n.multiplyScalar(this._dollyControlCoord.x*r*t.aspect)).add(i.multiplyScalar(this._dollyControlCoord.y*r));this._targetEnd.lerp(o,s)}else if(Iv(this._camera)){const t=this._camera,e=Wv.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(t.near+t.far)/(t.near-t.far)).unproject(t),n=Yv.set(0,0,-1).applyQuaternion(t.quaternion),i=qv.copy(e).add(n.multiplyScalar(-e.dot(t.up))),r=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom,s=Wv.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),o=this._targetEnd.dot(s);this._targetEnd.lerp(i,r);const a=this._targetEnd.dot(s),l=s.multiplyScalar(a-o);this._targetEnd.sub(l)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}const l=this._zoomEnd-this._zoom;this._zoom+=l*n,this._camera.zoom!==this._zoom&&(Av(l)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const h=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,h),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),this._affectOffset&&(this._camera.updateMatrixWorld(),Xv.setFromMatrixColumn(this._camera.matrix,0),Zv.setFromMatrixColumn(this._camera.matrix,1),Kv.setFromMatrixColumn(this._camera.matrix,2),Xv.multiplyScalar(this._focalOffset.x),Zv.multiplyScalar(-this._focalOffset.y),Kv.multiplyScalar(this._focalOffset.z),Wv.copy(Xv).add(Zv).add(Kv),this._camera.position.add(Wv)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Wv.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const c=this._needsUpdate;return c&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):c?(this.dispatchEvent({type:"update"}),Av(i,this.restThreshold)&&Av(r,this.restThreshold)&&Av(s,this.restThreshold)&&Av(o.x,this.restThreshold)&&Av(o.y,this.restThreshold)&&Av(o.z,this.restThreshold)&&Av(a.x,this.restThreshold)&&Av(a.y,this.restThreshold)&&Av(a.z,this.restThreshold)&&Av(l,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!c&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=c,this._needsUpdate=!1,c}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Dv(this.maxDistance),minZoom:this.minZoom,maxZoom:Dv(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Dv(this.maxPolarAngle),minAzimuthAngle:Dv(this.minAzimuthAngle),maxAzimuthAngle:Dv(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Wv.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=JSON.parse(t),i=Wv.fromArray(n.position);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Ov(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Ov(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Ov(n.maxPolarAngle),this.minAzimuthAngle=Ov(n.minAzimuthAngle),this.maxAzimuthAngle=Ov(n.maxAzimuthAngle),this.dampingFactor=n.dampingFactor,this.draggingDampingFactor=n.draggingDampingFactor,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],e),$v.setFromVector3(i.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo($v.theta,$v.phi,e),this.zoomTo(n.zoom,e),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],e),this._needsUpdate=!0}connect(t){this._domElement?console.warn("camera-controls is already connected."):(t.setAttribute("data-camera-controls-version","1.38.1"),this._addAllEventListeners(t))}disconnect(){this._removeAllEventListeners(),this._domElement=void 0}dispose(){this.disconnect(),this._domElement&&"setAttribute"in this._domElement&&this._domElement.removeAttribute("data-camera-controls-version")}_findPointerById(t){let e=null;return this._activePointers.some((n=>n.pointerId===t&&(e=n,!0))),e}_encloseToBoundary(t,e,n){const i=e.lengthSq();if(0===i)return t;const r=Yv.copy(e).add(t),s=this._boundary.clampPoint(r,qv).sub(r),o=s.lengthSq();if(0===o)return t.add(e);if(o===i)return t;if(0===n)return t.add(e).add(s);{const i=1+n*o/e.dot(s);return t.add(Yv.copy(e).multiplyScalar(i)).add(s.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(xv(this._camera)){const t=this._camera,e=t.near,n=t.getEffectiveFOV()*zv.MathUtils.DEG2RAD,i=Math.tan(.5*n)*e,r=i*t.aspect;this._nearPlaneCorners[0].set(-r,-i,0),this._nearPlaneCorners[1].set(r,-i,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(-r,i,0)}else if(Iv(this._camera)){const t=this._camera,e=1/t.zoom,n=t.left*e,i=t.right*e,r=t.top*e,s=t.bottom*e;this._nearPlaneCorners[0].set(n,r,0),this._nearPlaneCorners[1].set(i,r,0),this._nearPlaneCorners[2].set(i,s,0),this._nearPlaneCorners[3].set(n,s,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1))return t;if(Mv(this._camera,"_collisionTest"))return t;const e=Wv.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);oT.lookAt(Gv,e,this._camera.up);for(let n=0;n<4;n++){const i=Yv.copy(this._nearPlaneCorners[n]);i.applyMatrix4(oT);const r=qv.addVectors(this._target,i);aT.set(r,e),aT.far=this._spherical.radius+1;const s=aT.intersectObjects(this.colliderMeshes);0!==s.length&&s[0].distance<t&&(t=s[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=e.width,t.height=e.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((t=>{const e=()=>{this.removeEventListener("rest",e),t()};this.addEventListener("rest",e)})))}_addAllEventListeners(t){}_removeAllEventListeners(){}}class hT{constructor(){this.isDisposeable=()=>"dispose"in this,this.isResizeable=()=>"resize"in this&&"getSize"in this,this.isUpdateable=()=>"afterUpdate"in this&&"beforeUpdate"in this&&"update"in this,this.isHideable=()=>"visible"in this}}class cT extends hT{constructor(t){super(),this.components=t,this.name="SimpleCamera",this.beforeUpdate=new yv,this.afterUpdate=new yv,this._perspectiveCamera=this.setupCamera(),this.activeCamera=this._perspectiveCamera,this.controls=this.setupCameraControls();t.scene.get().add(this._perspectiveCamera),this.setupEvents()}get enabled(){return this.controls.enabled}set enabled(t){this.controls.enabled=t}get(){return this.activeCamera}dispose(){this.enabled=!1,this.beforeUpdate.reset(),this.afterUpdate.reset(),this._perspectiveCamera.removeFromParent(),this.controls.dispose()}update(t){this.enabled&&(this.beforeUpdate.trigger(this),this.controls.update(t),this.afterUpdate.trigger(this))}updateAspect(){if(this.components.renderer.isResizeable()){const t=this.components.renderer.getSize();this._perspectiveCamera.aspect=t.width/t.height,this._perspectiveCamera.updateProjectionMatrix()}}setupCamera(){const t=window.innerWidth/window.innerHeight,e=new Hc(60,t,1,1e3);return e.position.set(50,50,50),e.lookAt(new Ml(0,0,0)),e}setupCameraControls(){lT.install({THREE:cT.getSubsetOfThree()});const t=this.components.renderer.get().domElement,e=new lT(this._perspectiveCamera,t);return e.dampingFactor=.2,e.dollyToCursor=!0,e.infinityDolly=!0,e.setTarget(0,0,0),e}setupEvents(){window.addEventListener("resize",(()=>{this.updateAspect()}))}static getSubsetOfThree(){return{MOUSE:gs,Vector2:vl,Vector3:Ml,Vector4:Rl,Quaternion:Nl,Matrix4:ch,Spherical:My,Box3:Ll,Sphere:eh,Raycaster:Dy,MathUtils:_l}}}class uT extends Fh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");super(),this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)}))}))}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}}uT.prototype.isCSS2DObject=!0;const pT=new Ml,dT=new ch,fT=new ch,mT=new Ml,gT=new Ml;class yT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this;let n,i,r,s;const o={objects:new WeakMap},a=void 0!==t.element?t.element:document.createElement("div");function l(t,n,i){if(t.isCSS2DObject){t.onBeforeRender(e,n,i),pT.setFromMatrixPosition(t.matrixWorld),pT.applyMatrix4(fT);const l=t.element;/apple/i.test(navigator.vendor)?l.style.transform="translate(-50%,-50%) translate("+Math.round(pT.x*r+r)+"px,"+Math.round(-pT.y*s+s)+"px)":l.style.transform="translate(-50%,-50%) translate("+(pT.x*r+r)+"px,"+(-pT.y*s+s)+"px)",l.style.display=t.visible&&pT.z>=-1&&pT.z<=1?"":"none";const c={distanceToCameraSquared:h(i,t)};o.objects.set(t,c),l.parentNode!==a&&a.appendChild(l),t.onAfterRender(e,n,i)}for(let e=0,r=t.children.length;e<r;e++)l(t.children[e],n,i)}function h(t,e){return mT.setFromMatrixPosition(t.matrixWorld),gT.setFromMatrixPosition(e.matrixWorld),mT.distanceToSquared(gT)}a.style.overflow="hidden",this.domElement=a,this.getSize=function(){return{width:n,height:i}},this.render=function(t,e){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),dT.copy(e.matrixWorldInverse),fT.multiplyMatrices(e.projectionMatrix,dT),l(t,t,e),function(t){const e=function(t){const e=[];return t.traverse((function(t){t.isCSS2DObject&&e.push(t)})),e}(t).sort((function(t,e){return o.objects.get(t).distanceToCameraSquared-o.objects.get(e).distanceToCameraSquared})),n=e.length;for(let i=0,r=e.length;i<r;i++)e[i].element.style.zIndex=n-i}(t)},this.setSize=function(t,e){n=t,i=e,r=n/2,s=i/2,a.style.width=t+"px",a.style.height=e+"px"}}}class _T{dispose(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.removeFromParent(),this.disposeGeometryAndMaterials(t,e),n&&t.children.length&&this.disposeChildren(t),t.material=[],t.children.length=0}disposeGeometry(t){t.boundsTree&&t.disposeBoundsTree(),t.dispose()}disposeGeometryAndMaterials(t,e){t.geometry&&this.disposeGeometry(t.geometry),e&&_T.disposeMaterial(t)}disposeChildren(t){for(const e of t.children)this.dispose(e)}static disposeMaterial(t){if(t.material)if(Array.isArray(t.material))for(const e of t.material)e.dispose();else t.material.dispose()}}new Ml,new Ml,new Ml;class vT{constructor(t,e){this.boundingBox=new Pc,this._disposer=new _T,this._root=new Ud,this._endpoints=[],this._components=t,this.start=e.start,this.end=e.end,this._length=this.getLength(),this.center=this.getCenter(),this._line=this.createLine(e),this.newEndpointMesh(e),this.newEndpointMesh(e),this.label=this.newText(),this._root.renderOrder=2,this._components.scene.get().add(this._root)}set visible(t){t?(this._components.scene.get().add(this._root),this._root.add(this.label)):(this._root.removeFromParent(),this.label.removeFromParent())}set geometry(t){for(const e of this._endpoints)e.geometry=t}set endPoint(t){this.end=t,this.updateEndpointPosition(t),this.updateEndpointMeshes(t),this.updateLabel()}dispose(){this.visible=!1,this._disposer.dispose(this._root),this._disposer.dispose(this._line);for(const t of this._endpoints)t.removeFromParent();this._endpoints.length=0,this.label.removeFromParent(),this.label.element.remove(),this.boundingBox&&this._disposer.dispose(this.boundingBox)}createBoundingBox(){this.boundingBox.geometry=new Lc(1,1,this._length),this.boundingBox.position.copy(this.center),this.boundingBox.lookAt(this.end),this.boundingBox.visible=!1,this._root.add(this.boundingBox)}updateLabel(){this._length=this.getLength(),this.label.element.textContent=this.getTextContent(),this.center=this.getCenter(),this.label.position.set(this.center.x,this.center.y,this.center.z),this._line.computeLineDistances()}updateEndpointMeshes(t){this._endpoints[1].position.copy(t),this._endpoints[1].lookAt(this.start),this._endpoints[0].lookAt(this.end)}updateEndpointPosition(t){const e=this._line.geometry.attributes.position;e.setXYZ(1,t.x,t.y,t.z),e.needsUpdate=!0}createLine(t){const e=new gc;e.setFromPoints([t.start,t.end]);const n=new kf(e,t.lineMaterial);return this._root.add(n),n}newEndpointMesh(t){const e=0===this._endpoints.length,n=e?this.start:this.end,i=e?this.end:this.start,r=t.endpoint.clone();r.position.copy(n),r.lookAt(i),this._endpoints.push(r),this._root.add(r)}newText(){const t=document.createElement("div");t.className="ifcjs-dimension-label",t.textContent=this.getTextContent();const e=new uT(t);return e.position.set(this.center.x,this.center.y,this.center.z),this._root.add(e),e}getTextContent(){return"".concat(this._length/vT.scale," ").concat(vT.units)}getLength(){return parseFloat(this.start.distanceTo(this.end).toFixed(2))}getCenter(){let t=this.end.clone().sub(this.start);const e=.5*t.length();return t=t.normalize().multiplyScalar(e),this.start.clone().add(t)}}vT.scale=1,vT.units="m";class TT{constructor(t){this.dom=t,this._position=new vl,this.updateMouseInfo=t=>{this._event=t},this.setupMousePositionUpdate()}get position(){if(this._event){const t=this.dom.getBoundingClientRect();this._position.x=this.getPositionX(t,this._event),this._position.y=this.getPositionY(t,this._event)}return this._position}dispose(){this.dom.removeEventListener("mousemove",this.updateMouseInfo)}getPositionY(t,e){return-(e.clientY-t.top)/(t.bottom-t.top)*2+1}getPositionX(t,e){return(e.clientX-t.left)/(t.right-t.left)*2-1}setupMousePositionUpdate(){this.dom.addEventListener("mousemove",this.updateMouseInfo)}}class ET extends hT{constructor(t){super(),this.components=t,this.name="SimpleRaycaster",this.enabled=!0,this._raycaster=new Dy;const e=t.renderer.get().domElement;this._mouse=new TT(e)}get(){return this._raycaster}castRay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.components.meshes;const e=this.components.camera.get();this._raycaster.setFromCamera(this._mouse.position,e);const n=this._raycaster.intersectObjects(t),i=this.filterClippingPlanes(n);return i.length>0?i[0]:null}filterClippingPlanes(t){const e=this.components.renderer.get();if(!e.clippingPlanes)return t;const n=e.clippingPlanes;return t.length<=0||!n||(null===n||void 0===n?void 0:n.length)<=0?t:t.filter((t=>n.every((e=>e.distanceToPoint(t.point)>0))))}}class xT extends hT{constructor(t){super(),this.components=t,this.name="SimpleDimensions",this.beforeUpdate=new yv,this.afterUpdate=new yv,this.snapDistance=.25,this._lineMaterial=new gg({color:0,linewidth:2,depthTest:!1,dashSize:.2,gapSize:.2}),this._dimensions=[],this._visible=!0,this._enabled=!1,this._disposer=new _T,this._temp={isDragging:!1,start:new Ml,end:new Ml,dimension:void 0},this._raycaster=new ET(this.components),this._endpointMesh=this.newEndpointMesh();const e=document.createElement("div");e.className="ifcjs-dimension-preview",this.previewElement=new uT(e),this.previewElement.visible=!1}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.previewVisible=t}get visible(){return this._visible}set visible(t){this._visible=t,this._visible||(this.enabled=!1);for(const e of this._dimensions)e.visible=this._visible}set color(t){this._endpointMesh.material.color=t,this._lineMaterial.color=t}get geometry(){return this._endpointMesh.geometry}set geometry(t){this._endpointMesh.geometry=t;for(const e of this._dimensions)e.geometry=t}set previewVisible(t){var e;const n=null===(e=this.components.scene)||void 0===e?void 0:e.get();t?n.add(this.previewElement):this.previewElement.removeFromParent()}get(){return this._dimensions}dispose(){this.enabled=!1,this._dimensions.forEach((t=>t.dispose())),this._dimensions=[],this._disposer.dispose(this._endpointMesh),this._endpointMesh.removeFromParent(),this.previewElement.removeFromParent(),this.previewElement.element.remove()}update(t){if(this._enabled){this.beforeUpdate.trigger(this);const t=this._raycaster.castRay();if(this.previewElement.visible=!!t,!t)return;this.previewElement.visible=!0;const e=this.getClosestVertex(t);if(this.previewElement.visible=!!e,!e)return;this.previewElement.position.set(e.x,e.y,e.z),this._temp.isDragging&&this.drawInProcess(),this.afterUpdate.trigger(this)}}create(t){this._enabled&&(this._temp.isDragging?this.drawEnd():this.drawStart(t))}delete(){if(!this._enabled||0===this._dimensions.length)return;const t=this.getBoundingBoxes(),e=this._raycaster.castRay(t);if(!e)return;const n=this._dimensions.find((t=>t.boundingBox===e.object));if(n){const t=this._dimensions.indexOf(n);this._dimensions.splice(t,1),n.dispose()}}deleteAll(){this._dimensions.forEach((t=>{t.dispose()})),this._dimensions=[]}cancelDrawing(){var t;this._temp.dimension&&(this._temp.isDragging=!1,null===(t=this._temp.dimension)||void 0===t||t.dispose(),this._temp.dimension=void 0)}drawStart(t){const e=t?[t]:void 0,n=this._raycaster.castRay(e);n&&(this._temp.isDragging=!0,this._temp.start=t?n.point:this.getClosestVertex(n))}drawInProcess(){const t=this._raycaster.castRay();if(!t)return;const e=this.getClosestVertex(t);e&&(this._temp.end=e,this._temp.dimension||(this._temp.dimension=this.drawDimension()),this._temp.dimension.endPoint=this._temp.end)}drawEnd(){this._temp.dimension&&(this._temp.dimension.createBoundingBox(),this._dimensions.push(this._temp.dimension),this._temp.dimension=void 0,this._temp.isDragging=!1)}newEndpointMesh(){const t=xT.getDefaultEndpointGeometry(),e=new nc({color:0,depthTest:!1});return new Pc(t,e)}drawDimension(){return new vT(this.components,{start:this._temp.start,end:this._temp.end,lineMaterial:this._lineMaterial,endpoint:this._endpointMesh})}getBoundingBoxes(){return this._dimensions.map((t=>t.boundingBox)).filter((t=>void 0!==t))}static getDefaultEndpointGeometry(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4;const e=new Qf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,t);return e.translate(0,-t/2,0),e.rotateX(-Math.PI/2),e}getClosestVertex(t){let e=new Ml,n=!1,i=Number.MAX_SAFE_INTEGER;const r=xT.getVertices(t);return null===r||void 0===r||r.forEach((r=>{if(!r)return;const s=t.point.distanceTo(r);s>i||s>this.snapDistance||(n=!0,e=r,i=t.point.distanceTo(r))})),n?e:t.point}static getVertices(t){const e=t.object;if(!t.face||!e)return null;const n=e.geometry;return[xT.getVertex(t.face.a,n),xT.getVertex(t.face.b,n),xT.getVertex(t.face.c,n)].map((t=>null===t||void 0===t?void 0:t.applyMatrix4(e.matrixWorld)))}static getVertex(t,e){if(void 0===t)return null;const n=e.attributes.position;return new Ml(n.getX(t),n.getY(t),n.getZ(t))}}class IT extends hT{constructor(t){super(),this.name="SimpleGrid",this.enabled=!0,this._disposer=new _T,this._grid=new Vy(50,50);t.scene.get().add(this._grid)}get visible(){return this._grid.visible}set visible(t){this._grid.visible=t}get(){return this._grid}dispose(){this._disposer.dispose(this._grid)}}class bT extends hT{togglePlane(t,e){const n=this.get(),i=n.clippingPlanes.indexOf(e);t&&-1===i?n.clippingPlanes.push(e):!t&&i>-1&&n.clippingPlanes.splice(i,1)}}class wT extends bT{constructor(t,e){super(),this.components=t,this.container=e,this.name="SimpleRenderer",this.enabled=!0,this.beforeUpdate=new yv,this.afterUpdate=new yv,this._renderer2D=new yT,this._renderer=new jd({antialias:!0,alpha:!0}),this._renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.setupRenderers(),this.setupEvents(),this.resize()}get(){return this._renderer}update(t){var e,n;this.beforeUpdate.trigger(this);const i=null===(e=this.components.scene)||void 0===e?void 0:e.get(),r=null===(n=this.components.camera)||void 0===n?void 0:n.get();i&&r&&(this._renderer.render(i,r),this._renderer2D.render(i,r),this.afterUpdate.trigger(this))}dispose(){this.enabled=!1,this._renderer.domElement.remove(),this._renderer.dispose(),this.afterUpdate.reset(),this.beforeUpdate.reset()}getSize(){return new vl(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)}resize(){const t=this.container.clientWidth,e=this.container.clientHeight;this._renderer.setSize(t,e),this._renderer2D.setSize(t,e)}setupRenderers(){this._renderer.localClippingEnabled=!0,this.container.appendChild(this._renderer.domElement),this._renderer2D.domElement.style.position="absolute",this._renderer2D.domElement.style.top="0px",this._renderer2D.domElement.style.pointerEvents="none",this.container.appendChild(this._renderer2D.domElement)}setupEvents(){window.addEventListener("resize",(()=>{this.resize()}))}}class ST extends hT{constructor(t){super(),this.enabled=!0,this.name="SimpleScene",this._disposer=new _T,this._scene=new qd,this._scene.background=new ec(13421772)}get(){return this._scene}dispose(){for(const t of this._scene.children){const e=t;e.geometry&&this._disposer.dispose(e)}this._scene.children=[]}}class AT extends hT{constructor(t,e){super(),this.components=t,this.PlaneType=e,this.name="SimpleClipper",this._material=new nc({color:16776960,side:ws,transparent:!0,opacity:.2}),this.orthogonalY=!1,this.toleranceOrthogonalY=.7,this.onStartDragging=new yv,this.onEndDragging=new yv,this._planes=[],this._size=5,this._enabled=!1,this._onStartDragging=()=>{this.onStartDragging.trigger()},this._onEndDragging=()=>{this.onEndDragging.trigger()}}get enabled(){return this._enabled}set enabled(t){this._enabled=t;for(const e of this.planes3D)e.enabled=t;this.updateMaterials()}get material(){return this._material}set material(t){this._material=t;for(const e of this._planes)e.planeMaterial=t}get size(){return this._size}set size(t){this._size=t;for(const e of this._planes)e.size=t}get planes3D(){return this._planes.filter((t=>!t.isPlan))}get(){return this._planes}dispose(){this._enabled=!1;for(const t of this._planes)t.dispose();this._planes.length=0,this._material.dispose(),this.onStartDragging.reset(),this.onEndDragging.reset()}create(){if(!this.enabled)return;const t=this.components.raycaster.castRay();t&&this.createPlaneFromIntersection(t)}createFromNormalAndCoplanarPoint(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.newPlane(e,t,n);return this.updateMaterials(),i}delete(t){this.enabled&&(t||(t=this.pickPlane()),t&&this.deletePlane(t))}deleteAll(){for(;this._planes.length>0;)this.delete(this._planes[0])}deletePlane(t){const e=this._planes.indexOf(t);-1!==e&&(this._planes.splice(e,1),this.components.renderer.togglePlane(!1,t.get()),t.dispose(),this.updateMaterials())}pickPlane(){const t=this.getAllPlaneMeshes(),e=this.components.raycaster.castRay(t);if(e){const t=e.object;return this._planes.find((e=>e.meshes.includes(t)))}}getAllPlaneMeshes(){const t=[];for(const e of this.planes3D)t.push(...e.meshes);return t}createPlaneFromIntersection(t){var e;const n=t.point.distanceTo(new Ml(0,0,0)),i=null===(e=t.face)||void 0===e?void 0:e.normal;if(!n||!i)return;const r=this.getWorldNormal(t,i),s=this.newPlane(t.point,r.negate(),!1);this.components.renderer.togglePlane(!0,s.get()),this.updateMaterials()}getWorldNormal(t,e){const n=(new Tl).getNormalMatrix(t.object.matrixWorld),i=e.clone().applyMatrix3(n).normalize();return this.normalizePlaneDirectionY(i),i}normalizePlaneDirectionY(t){this.orthogonalY&&(t.y>this.toleranceOrthogonalY&&(t.x=0,t.y=1,t.z=0),t.y<-this.toleranceOrthogonalY&&(t.x=0,t.y=-1,t.z=0))}newPlane(t,e,n){const i=this.newPlaneInstance(t,e,n);return i.onStartDragging.on(this._onStartDragging),i.onEndDragging.on(this._onEndDragging),this._planes.push(i),i}newPlaneInstance(t,e,n){return new this.PlaneType(this.components,t,e,this.size,this._material,n)}updateMaterials(){var t;const e=null===(t=this.components.renderer)||void 0===t?void 0:t.get().clippingPlanes;this.components.meshes.forEach((t=>{Array.isArray(t.material)?t.material.forEach((t=>t.clippingPlanes=e)):t.material.clippingPlanes=e}))}}const CT=new Dy,RT=new Ml,DT=new Ml,OT=new Nl,NT={X:new Ml(1,0,0),Y:new Ml(0,1,0),Z:new Ml(0,0,1)},MT={type:"change"},PT={type:"mouseDown"},FT={type:"mouseUp",mode:null},LT={type:"objectChange"};class kT extends Fh{constructor(t,e){super(),void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const n=new rE;this._gizmo=n,this.add(n);const i=new sE;this._plane=i,this.add(i);const r=this;function s(t,e){let s=e;Object.defineProperty(r,t,{get:function(){return void 0!==s?s:e},set:function(e){s!==e&&(s=e,i[t]=e,n[t]=e,r.dispatchEvent({type:t+"-changed",value:e}),r.dispatchEvent(MT))}}),r[t]=e,i[t]=e,n[t]=e}s("camera",t),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);const o=new Ml,a=new Ml,l=new Nl,h=new Nl,c=new Ml,u=new Nl,p=new Ml,d=new Ml,f=new Ml,m=new Ml;s("worldPosition",o),s("worldPositionStart",a),s("worldQuaternion",l),s("worldQuaternionStart",h),s("cameraPosition",c),s("cameraQuaternion",u),s("pointStart",p),s("pointEnd",d),s("rotationAxis",f),s("rotationAngle",0),s("eye",m),this._offset=new Ml,this._startNorm=new Ml,this._endNorm=new Ml,this._cameraScale=new Ml,this._parentPosition=new Ml,this._parentQuaternion=new Nl,this._parentQuaternionInv=new Nl,this._parentScale=new Ml,this._worldScaleStart=new Ml,this._worldQuaternionInv=new Nl,this._worldScale=new Ml,this._positionStart=new Ml,this._quaternionStart=new Nl,this._scaleStart=new Ml,this._getPointer=UT.bind(this),this._onPointerDown=zT.bind(this),this._onPointerHover=BT.bind(this),this._onPointerMove=GT.bind(this),this._onPointerUp=HT.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;CT.setFromCamera(t,this.camera);const e=VT(this._gizmo.picker[this.mode],CT);this.axis=e?e.object.name:null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){CT.setFromCamera(t,this.camera);const e=VT(this._plane,CT,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,PT.mode=this.mode,this.dispatchEvent(PT)}}pointerMove(t){const e=this.axis,n=this.mode,i=this.object;let r=this.space;if("scale"===n?r="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(r="world"),void 0===i||null===e||!1===this.dragging||-1!==t.button)return;CT.setFromCamera(t,this.camera);const s=VT(this._plane,CT,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===r&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===r&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===r&&(i.position.applyQuaternion(OT.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===r&&(i.parent&&i.position.add(RT.setFromMatrixPosition(i.parent.matrixWorld)),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(RT.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(t*=-1),DT.set(t,t,t)}else RT.copy(this.pointStart),DT.copy(this.pointEnd),RT.applyQuaternion(this._worldQuaternionInv),DT.applyQuaternion(this._worldQuaternionInv),DT.divide(RT),-1===e.search("X")&&(DT.x=1),-1===e.search("Y")&&(DT.y=1),-1===e.search("Z")&&(DT.z=1);i.scale.copy(this._scaleStart).multiply(DT),this.scaleSnap&&(-1!==e.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const t=20/this.worldPosition.distanceTo(RT.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(RT.copy(this.rotationAxis).cross(this.eye))*t):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(NT[e]),RT.copy(NT[e]),"local"===r&&RT.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(RT.cross(this.eye).normalize())*t),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===r&&"E"!==e&&"XYZE"!==e?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(OT.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(OT.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(MT),this.dispatchEvent(LT)}}pointerUp(t){0===t.button&&(this.dragging&&null!==this.axis&&(FT.mode=this.mode,this.dispatchEvent(FT)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}getRaycaster(){return CT}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function UT(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{const e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function BT(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function zT(t){this.enabled&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function GT(t){this.enabled&&this.pointerMove(this._getPointer(t))}function HT(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function VT(t,e,n){const i=e.intersectObject(t,!0);for(let r=0;r<i.length;r++)if(i[r].object.visible||n)return i[r];return!1}kT.prototype.isTransformControls=!0;const jT=new Th,WT=new Ml(0,1,0),YT=new Ml(0,0,0),qT=new ch,XT=new Nl,ZT=new Nl,KT=new Ml,QT=new ch,JT=new Ml(1,0,0),$T=new Ml(0,1,0),tE=new Ml(0,0,1),eE=new Ml,nE=new Ml,iE=new Ml;class rE extends Fh{constructor(){super(),this.type="TransformControlsGizmo";const t=new nc({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new Of({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=t.clone();n.opacity=.15;const i=e.clone();i.opacity=.5;const r=t.clone();r.color.setHex(16711680);const s=t.clone();s.color.setHex(65280);const o=t.clone();o.color.setHex(255);const a=t.clone();a.color.setHex(16711680),a.opacity=.5;const l=t.clone();l.color.setHex(65280),l.opacity=.5;const h=t.clone();h.color.setHex(255),h.opacity=.5;const c=t.clone();c.opacity=.25;const u=t.clone();u.color.setHex(16776960),u.opacity=.25;t.clone().color.setHex(16776960);const p=t.clone();p.color.setHex(7895160);const d=new Kf(0,.04,.1,12);d.translate(0,.05,0);const f=new Lc(.08,.08,.08);f.translate(0,.04,0);const m=new gc;m.setAttribute("position",new lc([0,0,0,1,0,0],3));const g=new Kf(.0075,.0075,.5,3);function y(t,e){const n=new sg(t,.0075,3,64,e*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}g.translate(0,.25,0);const _={X:[[new Pc(d,r),[.5,0,0],[0,0,-Math.PI/2]],[new Pc(d,r),[-.5,0,0],[0,0,Math.PI/2]],[new Pc(g,r),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Pc(d,s),[0,.5,0]],[new Pc(d,s),[0,-.5,0],[Math.PI,0,0]],[new Pc(g,s)]],Z:[[new Pc(d,o),[0,0,.5],[Math.PI/2,0,0]],[new Pc(d,o),[0,0,-.5],[-Math.PI/2,0,0]],[new Pc(g,o),null,[Math.PI/2,0,0]]],XYZ:[[new Pc(new ng(.1,0),c.clone()),[0,0,0]]],XY:[[new Pc(new Lc(.15,.15,.01),h.clone()),[.15,.15,0]]],YZ:[[new Pc(new Lc(.15,.15,.01),a.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Pc(new Lc(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},v={X:[[new Pc(new Kf(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Pc(new Kf(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Pc(new Kf(.2,0,.6,4),n),[0,.3,0]],[new Pc(new Kf(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Pc(new Kf(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Pc(new Kf(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Pc(new ng(.2,0),n)]],XY:[[new Pc(new Lc(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Pc(new Lc(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Pc(new Lc(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},T={START:[[new Pc(new ng(.01,2),i),null,null,null,"helper"]],END:[[new Pc(new ng(.01,2),i),null,null,null,"helper"]],DELTA:[[new kf(function(){const t=new gc;return t.setAttribute("position",new lc([0,0,0,1,1,1],3)),t}(),i),null,null,null,"helper"]],X:[[new kf(m,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new kf(m,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new kf(m,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},E={XYZE:[[new Pc(y(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new Pc(y(.5,.5),r)]],Y:[[new Pc(y(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new Pc(y(.5,.5),o),null,[0,Math.PI/2,0]]],E:[[new Pc(y(.75,1),u),null,[0,Math.PI/2,0]]]},x={AXIS:[[new kf(m,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},I={XYZE:[[new Pc(new rg(.25,10,8),n)]],X:[[new Pc(new sg(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Pc(new sg(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Pc(new sg(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Pc(new sg(.75,.1,2,24),n)]]},b={X:[[new Pc(f,r),[.5,0,0],[0,0,-Math.PI/2]],[new Pc(g,r),[0,0,0],[0,0,-Math.PI/2]],[new Pc(f,r),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Pc(f,s),[0,.5,0]],[new Pc(g,s)],[new Pc(f,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Pc(f,o),[0,0,.5],[Math.PI/2,0,0]],[new Pc(g,o),[0,0,0],[Math.PI/2,0,0]],[new Pc(f,o),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Pc(new Lc(.15,.15,.01),h),[.15,.15,0]]],YZ:[[new Pc(new Lc(.15,.15,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Pc(new Lc(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Pc(new Lc(.1,.1,.1),c.clone())]]},w={X:[[new Pc(new Kf(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Pc(new Kf(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Pc(new Kf(.2,0,.6,4),n),[0,.3,0]],[new Pc(new Kf(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Pc(new Kf(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Pc(new Kf(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Pc(new Lc(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Pc(new Lc(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Pc(new Lc(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Pc(new Lc(.2,.2,.2),n),[0,0,0]]]},S={X:[[new kf(m,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new kf(m,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new kf(m,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function A(t){const e=new Fh;for(const n in t)for(let i=t[n].length;i--;){const r=t[n][i][0].clone(),s=t[n][i][1],o=t[n][i][2],a=t[n][i][3],l=t[n][i][4];r.name=n,r.tag=l,s&&r.position.set(s[0],s[1],s[2]),o&&r.rotation.set(o[0],o[1],o[2]),a&&r.scale.set(a[0],a[1],a[2]),r.updateMatrix();const h=r.geometry.clone();h.applyMatrix4(r.matrix),r.geometry=h,r.renderOrder=1/0,r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),e.add(r)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=A(_)),this.add(this.gizmo.rotate=A(E)),this.add(this.gizmo.scale=A(b)),this.add(this.picker.translate=A(v)),this.add(this.picker.rotate=A(I)),this.add(this.picker.scale=A(w)),this.add(this.helper.translate=A(T)),this.add(this.helper.rotate=A(x)),this.add(this.helper.scale=A(S)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:ZT;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let i=0;i<n.length;i++){const t=n[i];let r;if(t.visible=!0,t.rotation.set(0,0,0),t.position.copy(this.worldPosition),r=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),t.scale.set(1,1,1).multiplyScalar(r*this.size/4),"helper"!==t.tag){if(t.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode){const n=.99,i=.2;"X"===t.name&&Math.abs(WT.copy(JT).applyQuaternion(e).dot(this.eye))>n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Y"===t.name&&Math.abs(WT.copy($T).applyQuaternion(e).dot(this.eye))>n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Z"===t.name&&Math.abs(WT.copy(tE).applyQuaternion(e).dot(this.eye))>n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XY"===t.name&&Math.abs(WT.copy(tE).applyQuaternion(e).dot(this.eye))<i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"YZ"===t.name&&Math.abs(WT.copy(JT).applyQuaternion(e).dot(this.eye))<i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XZ"===t.name&&Math.abs(WT.copy($T).applyQuaternion(e).dot(this.eye))<i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1)}else"rotate"===this.mode&&(XT.copy(e),WT.copy(this.eye).applyQuaternion(OT.copy(e).invert()),-1!==t.name.search("E")&&t.quaternion.setFromRotationMatrix(qT.lookAt(this.eye,YT,$T)),"X"===t.name&&(OT.setFromAxisAngle(JT,Math.atan2(-WT.y,WT.z)),OT.multiplyQuaternions(XT,OT),t.quaternion.copy(OT)),"Y"===t.name&&(OT.setFromAxisAngle($T,Math.atan2(WT.x,WT.z)),OT.multiplyQuaternions(XT,OT),t.quaternion.copy(OT)),"Z"===t.name&&(OT.setFromAxisAngle(tE,Math.atan2(WT.y,WT.x)),OT.multiplyQuaternions(XT,OT),t.quaternion.copy(OT)));t.visible=t.visible&&(-1===t.name.indexOf("X")||this.showX),t.visible=t.visible&&(-1===t.name.indexOf("Y")||this.showY),t.visible=t.visible&&(-1===t.name.indexOf("Z")||this.showZ),t.visible=t.visible&&(-1===t.name.indexOf("E")||this.showX&&this.showY&&this.showZ),t.material._color=t.material._color||t.material.color.clone(),t.material._opacity=t.material._opacity||t.material.opacity,t.material.color.copy(t.material._color),t.material.opacity=t.material._opacity,this.enabled&&this.axis&&(t.name===this.axis||this.axis.split("").some((function(e){return t.name===e})))&&(t.material.color.setHex(16776960),t.material.opacity=1)}else t.visible=!1,"AXIS"===t.name?(t.position.copy(this.worldPositionStart),t.visible=!!this.axis,"X"===this.axis&&(OT.setFromEuler(jT.set(0,0,0)),t.quaternion.copy(e).multiply(OT),Math.abs(WT.copy(JT).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Y"===this.axis&&(OT.setFromEuler(jT.set(0,0,Math.PI/2)),t.quaternion.copy(e).multiply(OT),Math.abs(WT.copy($T).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Z"===this.axis&&(OT.setFromEuler(jT.set(0,Math.PI/2,0)),t.quaternion.copy(e).multiply(OT),Math.abs(WT.copy(tE).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"XYZE"===this.axis&&(OT.setFromEuler(jT.set(0,Math.PI/2,0)),WT.copy(this.rotationAxis),t.quaternion.setFromRotationMatrix(qT.lookAt(YT,WT,$T)),t.quaternion.multiply(OT),t.visible=this.dragging),"E"===this.axis&&(t.visible=!1)):"START"===t.name?(t.position.copy(this.worldPositionStart),t.visible=this.dragging):"END"===t.name?(t.position.copy(this.worldPosition),t.visible=this.dragging):"DELTA"===t.name?(t.position.copy(this.worldPositionStart),t.quaternion.copy(this.worldQuaternionStart),RT.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),RT.applyQuaternion(this.worldQuaternionStart.clone().invert()),t.scale.copy(RT),t.visible=this.dragging):(t.quaternion.copy(e),this.dragging?t.position.copy(this.worldPositionStart):t.position.copy(this.worldPosition),this.axis&&(t.visible=-1!==this.axis.search(t.name)))}super.updateMatrixWorld(t)}}rE.prototype.isTransformControlsGizmo=!0;class sE extends Pc{constructor(){super(new nu(1e5,1e5,2,2),new nc({visible:!1,wireframe:!0,side:ws,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),eE.copy(JT).applyQuaternion("local"===e?this.worldQuaternion:ZT),nE.copy($T).applyQuaternion("local"===e?this.worldQuaternion:ZT),iE.copy(tE).applyQuaternion("local"===e?this.worldQuaternion:ZT),WT.copy(nE),this.mode){case"translate":case"scale":switch(this.axis){case"X":WT.copy(this.eye).cross(eE),KT.copy(eE).cross(WT);break;case"Y":WT.copy(this.eye).cross(nE),KT.copy(nE).cross(WT);break;case"Z":WT.copy(this.eye).cross(iE),KT.copy(iE).cross(WT);break;case"XY":KT.copy(iE);break;case"YZ":KT.copy(eE);break;case"XZ":WT.copy(iE),KT.copy(nE);break;case"XYZ":case"E":KT.set(0,0,0)}break;default:KT.set(0,0,0)}0===KT.length()?this.quaternion.copy(this.cameraQuaternion):(QT.lookAt(RT.set(0,0,0),KT,WT),this.quaternion.setFromRotationMatrix(QT)),super.updateMatrixWorld(t)}}sE.prototype.isTransformControlsPlane=!0;class oE extends hT{constructor(t,e,n,i,r,s){super(),this.name="SimplePlane",this.afterUpdate=new yv,this.beforeUpdate=new yv,this.onStartDragging=new yv,this.onEndDragging=new yv,this.isPlan=!1,this._plane=new Kc,this._visible=!0,this._enabled=!0,this._arrowBoundBox=new Pc,this._hiddenMaterial=new nc({visible:!1}),this._components=t,this._normal=n,this._origin=e,this.isPlan=s,this._components.renderer.togglePlane(!0,this._plane),this._planeMesh=oE.newPlaneMesh(i,r),this._helper=this.newHelper(),this._controls=this.newTransformControls(),this._plane.setFromNormalAndCoplanarPoint(n,e),s||this.setupEvents()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._components.renderer.togglePlane(t,this._plane),this._visible=t,this._controls.visible=t,this._helper.visible=t}get meshes(){return[this._planeMesh,this._arrowBoundBox]}get planeMaterial(){return this._planeMesh.material}set planeMaterial(t){this._planeMesh.material=t}get size(){return this._planeMesh.scale.x}set size(t){this._planeMesh.scale.set(t,t,t)}update(){this._enabled&&(this.beforeUpdate.trigger(this._plane),this._plane.setFromNormalAndCoplanarPoint(this._normal,this._helper.position),this.afterUpdate.trigger(this._plane))}get(){return this._plane}dispose(){this._enabled=!1,this.beforeUpdate.reset(),this.afterUpdate.reset(),this.onStartDragging.reset(),this.onEndDragging.reset(),this._helper.removeFromParent(),this._components.renderer.togglePlane(!1,this._plane),this._arrowBoundBox.removeFromParent(),this._arrowBoundBox.geometry.dispose(),this._planeMesh.geometry.dispose(),this._controls.removeFromParent(),this._controls.dispose()}newTransformControls(){const t=this._components.camera.get(),e=this._components.renderer.get().domElement,n=new kT(t,e);return this.initializeControls(n),this.isPlan||this._components.scene.get().add(n),n}initializeControls(t){t.attach(this._helper),t.showX=!1,t.showY=!1,t.setSpace("local"),this.createArrowBoundingBox(),t.children[0].children[0].add(this._arrowBoundBox)}createArrowBoundingBox(){this._arrowBoundBox.geometry=new Kf(.18,.18,1.2),this._arrowBoundBox.material=this._hiddenMaterial,this._arrowBoundBox.rotateX(Math.PI/2),this._arrowBoundBox.updateMatrix(),this._arrowBoundBox.geometry.applyMatrix4(this._arrowBoundBox.matrix)}setupEvents(){this._controls.addEventListener("change",(()=>this.update())),this._controls.addEventListener("dragging-changed",(t=>this.onDraggingChanged(t)))}onDraggingChanged(t){this._enabled&&(this._visible=!t.value,this.preventCameraMovement(),this.notifyDraggingChanged(t))}notifyDraggingChanged(t){t.value?this.onStartDragging.trigger():this.onEndDragging.trigger()}preventCameraMovement(){this._components.camera.enabled=this._visible}newHelper(){const t=new Fh;return t.lookAt(this._normal),t.position.copy(this._origin),this._planeMesh.position.z+=.01,t.add(this._planeMesh),this.isPlan||this._components.scene.get().add(t),t}static newPlaneMesh(t,e){const n=new nu(1),i=new Pc(n,e);return i.scale.set(t,t,t),i}}class aE{constructor(){this.tools=[]}add(t){this.tools.push(t)}remove(t){const e=this.tools.findIndex((e=>e===t));return e>-1&&(this.tools.splice(e,1),!0)}get(t){return this.tools.find((e=>e.name===t))}update(t){for(const e of this.tools)e.enabled&&e.isUpdateable()&&e.update(t)}dispose(){for(const t of this.tools)t.enabled=!1,t.isDisposeable()&&t.dispose();this.tools=[]}}class lE{constructor(){this.meshes=[],this._enabled=!0,this.update=()=>{if(!this._enabled)return;const t=this._clock.getDelta();lE.update(this.scene,t),lE.update(this.renderer,t),lE.update(this.camera,t),this.tools.update(t);this.renderer.get().setAnimationLoop(this.update)},this._clock=new py,this.tools=new aE,lE.setupBVH()}get renderer(){if(!this._renderer)throw new Error("Renderer hasn't been initialised.");return this._renderer}set renderer(t){this._renderer=t}get scene(){if(!this._scene)throw new Error("Scene hasn't been initialised.");return this._scene}set scene(t){this._scene=t}get camera(){if(!this._camera)throw new Error("Camera hasn't been initialised.");return this._camera}set camera(t){this._camera=t}get raycaster(){if(!this._raycaster)throw new Error("Raycaster hasn't been initialised.");return this._raycaster}set raycaster(t){this._raycaster=t}init(){this._clock.start(),this.update()}dispose(){this._enabled=!1,this.tools.dispose(),this.renderer.isDisposeable()&&this.renderer.dispose(),this.scene.isDisposeable()&&this.scene.dispose(),this.camera.isDisposeable()&&this.camera.dispose()}static update(t,e){t.isUpdateable()&&t.enabled&&t.update(e)}static setupBVH(){gc.prototype.computeBoundsTree=mv,gc.prototype.disposeBoundsTree=gv,Pc.prototype.raycast=fv}}class hE extends Fg{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new fE(t)})),this.register((function(t){return new TE(t)})),this.register((function(t){return new EE(t)})),this.register((function(t){return new mE(t)})),this.register((function(t){return new gE(t)})),this.register((function(t){return new yE(t)})),this.register((function(t){return new _E(t)})),this.register((function(t){return new vE(t)})),this.register((function(t){return new pE(t)})),this.register((function(t){return new xE(t)}))}load(t,e,n,i){const r=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:oy.extractUrlBase(t),this.manager.itemStart(t);const o=function(e){i?i(e):console.error(e),r.manager.itemError(t),r.manager.itemEnd(t)},a=new kg(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{r.parse(n,s,(function(n){e(n),r.manager.itemEnd(t)}),o)}catch(C8){o(C8)}}),n,o)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const s={},o={};if("string"===typeof t)r=t;else{if(oy.decodeText(new Uint8Array(t,0,4))===IE){try{s[uE.KHR_BINARY_GLTF]=new SE(t)}catch(h){return void(i&&i(h))}r=s[uE.KHR_BINARY_GLTF].content}else r=oy.decodeText(new Uint8Array(t))}const a=JSON.parse(r);if(void 0===a.asset||a.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new rx(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const t=this.pluginCallbacks[c](l);o[t.name]=t,s[t.name]=!0}if(a.extensionsUsed)for(let c=0;c<a.extensionsUsed.length;++c){const t=a.extensionsUsed[c],e=a.extensionsRequired||[];switch(t){case uE.KHR_MATERIALS_UNLIT:s[t]=new dE;break;case uE.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[t]=new DE;break;case uE.KHR_DRACO_MESH_COMPRESSION:s[t]=new AE(a,this.dracoLoader);break;case uE.KHR_TEXTURE_TRANSFORM:s[t]=new CE;break;case uE.KHR_MESH_QUANTIZATION:s[t]=new OE;break;default:e.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(n,i)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,e,i,r)}))}}function cE(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const uE={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class pE{constructor(t){this.parser=t,this.name=uE.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let o;const a=new ec(16777215);void 0!==s.color&&a.fromArray(s.color);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":o=new ey(a),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new $g(a),o.distance=l;break;case"spot":o=new Xg(a),o.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(o),e.cache.add(n,i),i}createNodeAttachment(t){const e=this,n=this.parser,i=n.json.nodes[t],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return n._getNodeRef(e.cache,r,t)}))}}class dE{constructor(){this.name=uE.KHR_MATERIALS_UNLIT}getMaterialType(){return nc}extendParams(t,e,n){const i=[];t.color=new ec(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture))}return Promise.all(i)}}class fE{constructor(t){this.parser=t,this.name=uE.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?cg:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const t=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new vl(t,t)}return Promise.all(r)}}class mE{constructor(t){this.parser=t,this.name=uE.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?cg:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new ec(0,0,0),e.sheenRoughness=0,e.sheen=1;const s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&e.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(e.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(e,"sheenColorMap",s.sheenColorTexture)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class gE{constructor(t){this.parser=t,this.name=uE.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?cg:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(e.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(n.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class yE{constructor(t){this.parser=t,this.name=uE.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?cg:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||0;const o=s.attenuationColor||[1,1,1];return e.attenuationColor=new ec(o[0],o[1],o[2]),Promise.all(r)}}class _E{constructor(t){this.parser=t,this.name=uE.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?cg:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return e.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class vE{constructor(t){this.parser=t,this.name=uE.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?cg:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(e,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return e.specularColor=new ec(o[0],o[1],o[2]),void 0!==s.specularColorTexture&&r.push(n.assignTexture(e,"specularColorMap",s.specularColorTexture).then((function(t){t.encoding=qa}))),Promise.all(r)}}class TE{constructor(t){this.parser=t,this.name=uE.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=n.images[r.source],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s,o)}}class EE{constructor(t){this.parser=t,this.name=uE.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],o=i.images[s.source];let a=n.textureLoader;if(o.uri){const t=n.options.manager.getHandler(o.uri);null!==t&&(a=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,o,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class xE{constructor(t){this.name=uE.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],i=this.parser.getDependency("buffer",t.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,r.ready]).then((function(e){const n=t.byteOffset||0,i=t.byteLength||0,s=t.count,o=t.byteStride,a=new ArrayBuffer(s*o),l=new Uint8Array(e[0],n,i);return r.decodeGltfBuffer(new Uint8Array(a),s,o,l,t.mode,t.filter),a}))}return null}}const IE="glTF",bE=1313821514,wE=5130562;class SE{constructor(t){this.name=uE.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:oy.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==IE)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(t,12);let r=0;for(;r<n;){const e=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,n===bE){const n=new Uint8Array(t,12+r,e);this.content=oy.decodeText(n)}else if(n===wE){const n=12+r;this.body=t.slice(n,n+e)}r+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class AE{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=uE.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,o={},a={},l={};for(const h in s){const t=YE[h]||h.toLowerCase();o[t]=s[h]}for(const h in t.attributes){const e=YE[h]||h.toLowerCase();if(void 0!==s[h]){const i=n.accessors[t.attributes[h]],r=HE[i.componentType];l[e]=r,a[e]=!0===i.normalized}}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e){i.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],i=a[e];void 0!==i&&(n.normalized=i)}e(t)}),o,l)}))}))}}class CE{constructor(){this.name=uE.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class RE extends hg{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new ec).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(t){for(const e in o)t.uniforms[e]=o[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(t){o.specular.value=t}},specularMap:{get:function(){return o.specularMap.value},set:function(t){o.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(t){o.glossiness.value=t}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(t){o.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class DE{constructor(){this.name=uE.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return RE}extendParams(t,e,n){const i=e.extensions[this.name];t.color=new ec(1,1,1),t.opacity=1;const r=[];if(Array.isArray(i.diffuseFactor)){const e=i.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==i.diffuseTexture&&r.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new ec(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new ec(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){const e=i.specularGlossinessTexture;r.push(n.assignTexture(t,"glossinessMap",e)),r.push(n.assignTexture(t,"specularMap",e))}return Promise.all(r)}createMaterial(t){const e=new RE(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=tl,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}class OE{constructor(){this.name=uE.KHR_MESH_QUANTIZATION}}class NE extends _g{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let s=0;s!==i;s++)e[s]=n[r+s];return e}}NE.prototype.beforeStart_=NE.prototype.copySampleValue_,NE.prototype.afterEnd_=NE.prototype.copySampleValue_,NE.prototype.interpolate_=function(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,h=i-e,c=(n-e)/h,u=c*c,p=u*c,d=t*l,f=d-l,m=-2*p+3*u,g=p-u,y=1-m,_=g-u+c;for(let v=0;v!==o;v++){const t=s[f+v+o],e=s[f+v+a]*h,n=s[d+v+o],i=s[d+v]*h;r[v]=y*t+_*e+m*n+g*i}return r};const ME=new Nl;class PE extends NE{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return ME.fromArray(r).normalize().toArray(r),r}}const FE=0,LE=1,kE=2,UE=3,BE=4,zE=5,GE=6,HE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},VE={9728:Eo,9729:bo,9984:xo,9985:wo,9986:Io,9987:So},jE={33071:vo,33648:To,10497:_o},WE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},qE={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},XE={CUBICSPLINE:void 0,LINEAR:za,STEP:Ba},ZE="OPAQUE",KE="MASK",QE="BLEND";function JE(t,e,n){for(const i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function $E(t,e){void 0!==e.extras&&("object"===typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function tx(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,i=n.length;e<i;e++)t.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ex(t){const e=t.extensions&&t.extensions[uE.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+nx(e.attributes):t.indices+":"+nx(t.attributes)+":"+t.mode,n}function nx(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function ix(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class rx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new cE,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new ly(this.options.manager):this.textureLoader=new zg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new kg(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const s={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};JE(r,s,i),$E(s,i),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(s)}))).then((function(){t(s)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=e.length;i<r;i++){const n=e[i].joints;for(let e=0,i=n.length;e<i;e++)t[n[e]].isBone=!0}for(let i=0,r=t.length;i<r;i++){const e=t[i];void 0!==e.mesh&&(this._addNodeRef(this.meshCache,e.mesh),void 0!==e.skin&&(n[e.mesh].isSkinnedMesh=!0)),void 0!==e.camera&&this._addNodeRef(this.cameraCache,e.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[i,s]of t.children.entries())r(s,e.children[i])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":i=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return n.getDependency(t,i)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[uE.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(t,r){n.load(oy.resolveURL(e.uri,i.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+n)}))}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],s=WE[i.type],o=HE[i.componentType],a=o.BYTES_PER_ELEMENT,l=a*s,h=i.byteOffset||0,c=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,u=!0===i.normalized;let p,d;if(c&&c!==l){const t=Math.floor(h/c),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+t+":"+i.count;let l=e.cache.get(n);l||(p=new o(r,t*c,i.count*c/a),l=new Xd(p,c/a),e.cache.add(n,l)),d=new Kd(l,s,h%c/a,u)}else p=null===r?new o(i.count*s):new o(r,h,i.count*s),d=new sc(p,s,u);if(void 0!==i.sparse){const e=WE.SCALAR,n=HE[i.sparse.indices.componentType],a=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,h=new n(t[1],a,i.sparse.count*e),c=new o(t[2],l,i.sparse.count*s);null!==r&&(d=new sc(d.array.slice(),d.itemSize,d.normalized));for(let t=0,i=h.length;t<i;t++){const e=h[t];if(d.setX(e,c[t*s]),s>=2&&d.setY(e,c[t*s+1]),s>=3&&d.setZ(e,c[t*s+2]),s>=4&&d.setW(e,c[t*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t],r=e.images[i.source];let s=this.textureLoader;if(r.uri){const t=n.manager.getHandler(r.uri);null!==t&&(s=t)}return this.loadTextureImage(t,r,s)}loadTextureImage(t,e,n){const i=this,r=this.json,s=this.options,o=r.textures[t],a=(e.uri||e.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=self.URL||self.webkitURL;let h=e.uri||"",c=!1;if(void 0!==e.bufferView)h=i.getDependency("bufferView",e.bufferView).then((function(t){c=!0;const n=new Blob([t],{type:e.mimeType});return h=l.createObjectURL(n),h}));else if(void 0===e.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(h).then((function(t){return new Promise((function(e,i){let r=e;!0===n.isImageBitmapLoader&&(r=function(t){const n=new Al(t);n.needsUpdate=!0,e(n)}),n.load(oy.resolveURL(t,s.path),r,void 0,i)}))})).then((function(e){!0===c&&l.revokeObjectURL(h),e.flipY=!1,o.name&&(e.name=o.name);const n=(r.samplers||{})[o.sampler]||{};return e.magFilter=VE[n.magFilter]||bo,e.minFilter=VE[n.minFilter]||So,e.wrapS=jE[n.wrapS]||_o,e.wrapT=jE[n.wrapT]||_o,i.associations.set(e,{textures:t}),e})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",h),null}));return this.textureCache[a]=u,u}assignTexture(t,e,n){const i=this;return this.getDependency("texture",n.index).then((function(r){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[uE.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[uE.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(r);r=i.extensions[uE.KHR_TEXTURE_TRANSFORM].extendTexture(r,t),i.associations.set(r,e)}}return t[e]=r,r}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,s=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new Hf,Xh.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new Of,Xh.prototype.copy.call(e,n),e.color.copy(n.color),this.cache.add(t,e)),n=e}if(i||r||s){let t="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),i&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),s&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),r&&(e.vertexColors=!0),s&&(e.flatShading=!0),i&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return hg}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let s;const o={},a=r.extensions||{},l=[];if(a[uE.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const t=i[uE.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=t.getMaterialType(),l.push(t.extendParams(o,r,e))}else if(a[uE.KHR_MATERIALS_UNLIT]){const t=i[uE.KHR_MATERIALS_UNLIT];s=t.getMaterialType(),l.push(t.extendParams(o,r,e))}else{const n=r.pbrMetallicRoughness||{};if(o.color=new ec(1,1,1),o.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;o.color.fromArray(t),o.opacity=t[3]}void 0!==n.baseColorTexture&&l.push(e.assignTexture(o,"map",n.baseColorTexture)),o.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,o.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(e.assignTexture(o,"metalnessMap",n.metallicRoughnessTexture)),l.push(e.assignTexture(o,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),l.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,o)}))))}!0===r.doubleSided&&(o.side=ws);const h=r.alphaMode||ZE;if(h===QE?(o.transparent=!0,o.depthWrite=!1):(o.format=zo,o.transparent=!1,h===KE&&(o.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==nc&&(l.push(e.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new vl(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;o.normalScale.set(t,t)}return void 0!==r.occlusionTexture&&s!==nc&&(l.push(e.assignTexture(o,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(o.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==nc&&(o.emissive=(new ec).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&s!==nc&&l.push(e.assignTexture(o,"emissiveMap",r.emissiveTexture)),Promise.all(l).then((function(){let n;return n=s===RE?i[uE.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new s(o),r.name&&(n.name=r.name),n.map&&(n.map.encoding=qa),n.emissiveMap&&(n.emissiveMap.encoding=qa),$E(n,r),e.associations.set(n,{materials:t}),r.extensions&&JE(i,n,r),n}))}createUniqueName(t){const e=Sy.sanitizeNodeName(t||"");let n=e;for(let i=1;this.nodeNamesUsed[n];++i)n=e+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(t){return n[uE.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return ox(n,t,e)}))}const s=[];for(let o=0,a=t.length;o<a;o++){const n=t[o],a=ex(n),l=i[a];if(l)s.push(l.promise);else{let t;t=n.extensions&&n.extensions[uE.KHR_DRACO_MESH_COMPRESSION]?r(n):ox(new gc,n,e),i[a]={primitive:n,promise:t},s.push(t)}}return Promise.all(s)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],s=r.primitives,o=[];for(let l=0,h=s.length;l<h;l++){const t=void 0===s[l].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new hg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Is})),a.DefaultMaterial):this.getDependency("material",s[l].material);o.push(t)}var a;return o.push(e.loadGeometries(s)),Promise.all(o).then((function(n){const o=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let c=0,u=a.length;c<u;c++){const n=a[c],h=s[c];let u;const p=o[c];if(h.mode===BE||h.mode===zE||h.mode===GE||void 0===h.mode)u=!0===r.isSkinnedMesh?new vf(n,p):new Pc(n,p),!0!==u.isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),h.mode===zE?u.geometry=ax(u.geometry,1):h.mode===GE&&(u.geometry=ax(u.geometry,2));else if(h.mode===LE)u=new zf(n,p);else if(h.mode===UE)u=new kf(n,p);else if(h.mode===kE)u=new Gf(n,p);else{if(h.mode!==FE)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);u=new qf(n,p)}Object.keys(u.geometry.morphAttributes).length>0&&tx(u,r),u.name=e.createUniqueName(r.name||"mesh_"+t),$E(u,r),h.extensions&&JE(i,u,h),e.assignFinalMaterial(u),l.push(u)}for(let i=0,r=l.length;i<r;i++)e.associations.set(l[i],{meshes:t,primitives:i});if(1===l.length)return l[0];const h=new Ud;e.associations.set(h,{meshes:t});for(let t=0,e=l.length;t<e;t++)h.add(l[t]);return h}))}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new Hc(_l.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new pu(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),$E(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))}loadAnimation(t){const e=this.json.animations[t],n=[],i=[],r=[],s=[],o=[];for(let a=0,l=e.channels.length;a<l;a++){const t=e.channels[a],l=e.samplers[t.sampler],h=t.target,c=void 0!==h.node?h.node:h.id,u=void 0!==e.parameters?e.parameters[l.input]:l.input,p=void 0!==e.parameters?e.parameters[l.output]:l.output;n.push(this.getDependency("node",c)),i.push(this.getDependency("accessor",u)),r.push(this.getDependency("accessor",p)),s.push(l),o.push(h)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(s),Promise.all(o)]).then((function(n){const i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=[];for(let t=0,e=i.length;t<e;t++){const e=i[t],n=r[t],h=s[t],c=o[t],u=a[t];if(void 0===e)continue;let p;switch(e.updateMatrix(),e.matrixAutoUpdate=!0,qE[u.path]){case qE.weights:p=wg;break;case qE.rotation:p=Ag;break;default:p=Rg}const d=e.name?e.name:e.uuid,f=void 0!==c.interpolation?XE[c.interpolation]:za,m=[];qE[u.path]===qE.weights?e.traverse((function(t){t.morphTargetInfluences&&m.push(t.name?t.name:t.uuid)})):m.push(d);let g=h.array;if(h.normalized){const t=ix(g.constructor),e=new Float32Array(g.length);for(let n=0,i=g.length;n<i;n++)e[n]=g[n]*t;g=e}for(let t=0,i=m.length;t<i;t++){const e=new p(m[t]+"."+qE[u.path],n.array,g,f);"CUBICSPLINE"===c.interpolation&&(e.createInterpolant=function(t){return new(this instanceof Ag?PE:NE)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(e)}}const h=e.name?e.name:"animation_"+t;return new Dg(h,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,i.mesh,t);return void 0!==i.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=i.weights.length;e<n;e++)t.morphTargetInfluences[e]=i.weights[e]})),e}))}loadNode(t){const e=this.json,n=this.extensions,i=this,r=e.nodes[t],s=r.name?i.createUniqueName(r.name):"";return function(){const e=[],n=i._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return n&&e.push(n),void 0!==r.camera&&e.push(i.getDependency("camera",r.camera).then((function(t){return i._getNodeRef(i.cameraCache,r.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){let o;if(o=!0===r.isBone?new Tf:e.length>1?new Ud:1===e.length?e[0]:new Fh,o!==e[0])for(let t=0,n=e.length;t<n;t++)o.add(e[t]);if(r.name&&(o.userData.name=r.name,o.name=s),$E(o,r),r.extensions&&JE(n,o,r),void 0!==r.matrix){const t=new ch;t.fromArray(r.matrix),o.applyMatrix4(t)}else void 0!==r.translation&&o.position.fromArray(r.translation),void 0!==r.rotation&&o.quaternion.fromArray(r.rotation),void 0!==r.scale&&o.scale.fromArray(r.scale);return i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=t,o}))}loadScene(t){const e=this.json,n=this.extensions,i=this.json.scenes[t],r=this,s=new Ud;i.name&&(s.name=r.createUniqueName(i.name)),$E(s,i),i.extensions&&JE(n,s,i);const o=i.nodes||[],a=[];for(let l=0,h=o.length;l<h;l++)a.push(sx(o[l],s,e,r));return Promise.all(a).then((function(){return r.associations=(t=>{const e=new Map;for(const[n,i]of r.associations)(n instanceof Xh||n instanceof Al)&&e.set(n,i);return t.traverse((t=>{const n=r.associations.get(t);null!=n&&e.set(t,n)})),e})(s),s}))}}function sx(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then((function(t){if(void 0===r.skin)return t;let e;return i.getDependency("skin",r.skin).then((function(t){e=t;const n=[];for(let r=0,s=e.joints.length;r<s;r++)n.push(i.getDependency("node",e.joints[r]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(!t.isMesh)return;const i=[],r=[];for(let s=0,o=n.length;s<o;s++){const t=n[s];if(t){i.push(t);const n=new ch;void 0!==e.inverseBindMatrices&&n.fromArray(e.inverseBindMatrices.array,16*s),r.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[s])}t.bind(new bf(i,r),t.matrixWorld)})),t}))})).then((function(t){e.add(t);const s=[];if(r.children){const e=r.children;for(let r=0,o=e.length;r<o;r++){const o=e[r];s.push(sx(o,t,n,i))}}return Promise.all(s)}))}function ox(t,e,n){const i=e.attributes,r=[];function s(e,i){return n.getDependency("accessor",e).then((function(e){t.setAttribute(i,e)}))}for(const o in i){const e=YE[o]||o.toLowerCase();e in t.attributes||r.push(s(i[o],e))}if(void 0!==e.indices&&!t.index){const i=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(i)}return $E(t,e),function(t,e,n){const i=e.attributes,r=new Ll;if(void 0===i.POSITION)return;{const t=n.json.accessors[i.POSITION],e=t.min,s=t.max;if(void 0===e||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new Ml(e[0],e[1],e[2]),new Ml(s[0],s[1],s[2])),t.normalized){const e=ix(HE[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const s=e.targets;if(void 0!==s){const t=new Ml,e=new Ml;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],s=i.min,o=i.max;if(void 0!==s&&void 0!==o){if(e.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),e.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),e.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),i.normalized){const t=ix(HE[i.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(t)}t.boundingBox=r;const o=new eh;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}(t,e,n),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,n){let i=!1,r=!1;for(let a=0,l=e.length;a<l;a++){const t=e[a];if(void 0!==t.POSITION&&(i=!0),void 0!==t.NORMAL&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(t);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const l=e[a];if(i){const e=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):t.attributes.position;s.push(e)}if(r){const e=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):t.attributes.normal;o.push(e)}}return Promise.all([Promise.all(s),Promise.all(o)]).then((function(e){const n=e[0],s=e[1];return i&&(t.morphAttributes.position=n),r&&(t.morphAttributes.normal=s),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function ax(t,e){let n=t.getIndex();if(null===n){const e=[],i=t.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<i.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const i=n.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}class lx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,o=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],p=a[5],d=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(h-u)<s&&Math.abs(c-f)<s&&Math.abs(d-m)<s){if(Math.abs(h+u)<o&&Math.abs(c+f)<o&&Math.abs(d+m)<o&&Math.abs(l+p+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(p+1)/2,y=(g+1)/2,_=(h+u)/4,v=(c+f)/4,T=(d+m)/4;return t>a&&t>y?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=_/n,r=v/n):a>y?a<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=_/i,r=T/i):y<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=v/r,i=T/r),this.set(n,i,r,e),this}let y=Math.sqrt((m-d)*(m-d)+(c-f)*(c-f)+(u-h)*(u-h));return Math.abs(y)<.001&&(y=1),this.x=(m-d)/y,this.y=(c-f)/y,this.z=(u-h)/y,this.w=Math.acos((l+p+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}lx.prototype.isVector4=!0;const hx=[];for(let n=0;n<256;n++)hx[n]=(n<16?"0":"")+n.toString(16);Math.PI,Math.PI;function cx(t,e,n){return Math.max(e,Math.min(n,t))}function ux(t,e){return(t%e+e)%e}function px(t,e,n){return(1-n)*t+n*e}class dx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],h=n[i+2],c=n[i+3];const u=r[s+0],p=r[s+1],d=r[s+2],f=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=p,t[e+2]=d,void(t[e+3]=f);if(c!==f||a!==u||l!==p||h!==d){let t=1-o;const e=a*u+l*p+h*d+c*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*n;if(a=a*t+u*r,l=l*t+p*r,h=h*t+d*r,c=c*t+f*r,t===1-o){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,r,s){const o=n[i],a=n[i+1],l=n[i+2],h=n[i+3],c=r[s],u=r[s+1],p=r[s+2],d=r[s+3];return t[e]=o*d+h*c+a*p-l*u,t[e+1]=a*d+h*u+l*c-o*p,t[e+2]=l*d+h*p+o*u-a*c,t[e+3]=h*d-o*c-a*u-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),h=o(i/2),c=o(r/2),u=a(n/2),p=a(i/2),d=a(r/2);switch(s){case"XYZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"YXZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"ZXY":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"ZYX":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"YZX":this._x=u*h*c+l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c-u*p*d;break;case"XZY":this._x=u*h*c-l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c+u*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=n+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>o&&n>c){const t=2*Math.sqrt(1+n-o-c);this._w=(h-a)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(o>c){const t=2*Math.sqrt(1+o-n-c);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-n-o);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(cx(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,h=e._w;return this._x=n*h+s*o+i*l-r*a,this._y=i*h+s*a+r*o-n*l,this._z=r*h+s*l+n*a-i*o,this._w=s*h-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=s*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}dx.prototype.isQuaternion=!0;class fx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(gx.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(gx.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,h=a*n+o*e-r*i,c=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+h*-o-c*-s,this.y=h*a+u*-s+c*-r-l*-o,this.z=c*a+u*-o+l*-s-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return mx.copy(this).projectOnVector(t),this.sub(mx)}reflect(t){return this.sub(mx.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(cx(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}fx.prototype.isVector3=!0;const mx=new fx,gx=new dx;class yx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}yx.prototype.isVector2=!0;const _x={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vx={h:0,s:0,l:0},Tx={h:0,s:0,l:0};function Ex(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function xx(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Ix(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class bx{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=ux(t,1),e=cx(e,0,1),n=cx(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Ex(r,i,t+1/3),this.g=Ex(r,i,t),this.b=Ex(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=_x[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=xx(t.r),this.g=xx(t.g),this.b=xx(t.b),this}copyLinearToSRGB(t){return this.r=Ix(t.r),this.g=Ix(t.g),this.b=Ix(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),s=Math.min(e,n,i);let o,a;const l=(s+r)/2;if(s===r)o=0,a=0;else{const t=r-s;switch(a=l<=.5?t/(r+s):t/(2-r-s),r){case e:o=(n-i)/t+(n<i?6:0);break;case n:o=(i-e)/t+2;break;case i:o=(e-n)/t+4}o/=6}return t.h=o,t.s=a,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(vx),vx.h+=t,vx.s+=e,vx.l+=n,this.setHSL(vx.h,vx.s,vx.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(vx),t.getHSL(Tx);const n=px(vx.h,Tx.h,e),i=px(vx.s,Tx.s,e),r=px(vx.l,Tx.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}bx.NAMES=_x,bx.prototype.isColor=!0,bx.prototype.r=1,bx.prototype.g=1,bx.prototype.b=1;const wx=new fx,Sx=new yx;class Ax{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new bx),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new yx),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new fx),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new lx),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Sx.fromBufferAttribute(this,e),Sx.applyMatrix3(t),this.setXY(e,Sx.x,Sx.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)wx.fromBufferAttribute(this,e),wx.applyMatrix3(t),this.setXYZ(e,wx.x,wx.y,wx.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)wx.x=this.getX(e),wx.y=this.getY(e),wx.z=this.getZ(e),wx.applyMatrix4(t),this.setXYZ(e,wx.x,wx.y,wx.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)wx.x=this.getX(e),wx.y=this.getY(e),wx.z=this.getZ(e),wx.applyNormalMatrix(t),this.setXYZ(e,wx.x,wx.y,wx.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)wx.x=this.getX(e),wx.y=this.getY(e),wx.z=this.getZ(e),wx.transformDirection(t),this.setXYZ(e,wx.x,wx.y,wx.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}Ax.prototype.isBufferAttribute=!0;(class extends Ax{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class Cx{constructor(){this.pluginCallbacks=[],this.register((function(t){return new nI(t)})),this.register((function(t){return new iI(t)})),this.register((function(t){return new rI(t)})),this.register((function(t){return new oI(t)})),this.register((function(t){return new aI(t)})),this.register((function(t){return new sI(t)}))}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){"object"===typeof n&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),i=n);const r=new eI,s=[];for(let o=0,a=this.pluginCallbacks.length;o<a;o++)s.push(this.pluginCallbacks[o](r));r.setPlugins(s),r.write(t,e,i).catch(n)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,i,r,e)}))}}const Rx=0,Dx=1,Ox=2,Nx=3,Mx=4,Px=5121,Fx=5123,Lx=5126,kx=5125,Ux=34962,Bx=34963,zx=9728,Gx=9729,Hx=9984,Vx=9985,jx=9986,Wx=9987,Yx=33071,qx=33648,Xx=10497,Zx={};Zx[Eo]=zx,Zx[xo]=Hx,Zx[Io]=jx,Zx[bo]=Gx,Zx[wo]=Vx,Zx[So]=Wx,Zx[vo]=Yx,Zx[_o]=Xx,Zx[To]=qx;const Kx={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function Qx(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}function Jx(t){return 4*Math.ceil(t/4)}function $x(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Jx(t.byteLength);if(n!==t.byteLength){const i=new Uint8Array(n);if(i.set(new Uint8Array(t)),0!==e)for(let r=t.byteLength;r<n;r++)i[r]=e;return i.buffer}return t}let tI=null;class eI{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(t){this.plugins=t}async write(t,e,n){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),await Promise.all(this.pending);const i=this,r=i.buffers,s=i.json;n=i.options;const o=i.extensionsUsed,a=new Blob(r,{type:"application/octet-stream"}),l=Object.keys(o);if(l.length>0&&(s.extensionsUsed=l),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=a.size),!0===n.binary){const t=new window.FileReader;t.readAsArrayBuffer(a),t.onloadend=function(){const n=$x(t.result),i=new DataView(new ArrayBuffer(8));i.setUint32(0,n.byteLength,!0),i.setUint32(4,5130562,!0);const r=$x(function(t){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(t).buffer;const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0,i=t.length;n<i;n++){const i=t.charCodeAt(n);e[n]=i>255?32:i}return e.buffer}(JSON.stringify(s)),32),o=new DataView(new ArrayBuffer(8));o.setUint32(0,r.byteLength,!0),o.setUint32(4,1313821514,!0);const a=new ArrayBuffer(12),l=new DataView(a);l.setUint32(0,1179937895,!0),l.setUint32(4,2,!0);const h=12+o.byteLength+r.byteLength+i.byteLength+n.byteLength;l.setUint32(8,h,!0);const c=new Blob([a,o,r,i,n],{type:"application/octet-stream"}),u=new window.FileReader;u.readAsArrayBuffer(c),u.onloadend=function(){e(u.result)}}}else if(s.buffers&&s.buffers.length>0){const t=new window.FileReader;t.readAsDataURL(a),t.onloadend=function(){const n=t.result;s.buffers[0].uri=n,e(s)}}else e(s)}serializeUserData(t,e){if(0===Object.keys(t.userData).length)return;const n=this.options,i=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(t.userData));if(n.includeCustomExtensions&&r.gltfExtensions){void 0===e.extensions&&(e.extensions={});for(const t in r.gltfExtensions)e.extensions[t]=r.gltfExtensions[t],i[t]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(e.extras=r)}catch(r){console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+r.message)}}getUID(t){return this.uids.has(t)||this.uids.set(t,this.uid++),this.uids.get(t)}isNormalizedNormalAttribute(t){if(this.cache.attributesNormalized.has(t))return!1;const e=new Ml;for(let n=0,i=t.count;n<i;n++)if(Math.abs(e.fromBufferAttribute(t,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(t){const e=this.cache;if(e.attributesNormalized.has(t))return e.attributesNormalized.get(t);const n=t.clone(),i=new Ml;for(let r=0,s=n.count;r<s;r++)i.fromBufferAttribute(n,r),0===i.x&&0===i.y&&0===i.z?i.setX(1):i.normalize(),n.setXYZ(r,i.x,i.y,i.z);return e.attributesNormalized.set(t,n),n}applyTextureTransform(t,e){let n=!1;const i={};0===e.offset.x&&0===e.offset.y||(i.offset=e.offset.toArray(),n=!0),0!==e.rotation&&(i.rotation=e.rotation,n=!0),1===e.repeat.x&&1===e.repeat.y||(i.scale=e.repeat.toArray(),n=!0),n&&(t.extensions=t.extensions||{},t.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}processBuffer(t){const e=this.json,n=this.buffers;return e.buffers||(e.buffers=[{byteLength:0}]),n.push(t),0}processBufferView(t,e,n,i,r){const s=this.json;let o;s.bufferViews||(s.bufferViews=[]),o=e===Px?1:e===Fx?2:4;const a=Jx(i*t.itemSize*o),l=new DataView(new ArrayBuffer(a));let h=0;for(let u=n;u<n+i;u++)for(let n=0;n<t.itemSize;n++){let i;t.itemSize>4?i=t.array[u*t.itemSize+n]:0===n?i=t.getX(u):1===n?i=t.getY(u):2===n?i=t.getZ(u):3===n&&(i=t.getW(u)),e===Lx?l.setFloat32(h,i,!0):e===kx?l.setUint32(h,i,!0):e===Fx?l.setUint16(h,i,!0):e===Px&&l.setUint8(h,i),h+=o}const c={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:a};void 0!==r&&(c.target=r),r===Ux&&(c.byteStride=t.itemSize*o),this.byteOffset+=a,s.bufferViews.push(c);return{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(t){const e=this,n=e.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(i){const r=new window.FileReader;r.readAsArrayBuffer(t),r.onloadend=function(){const t=$x(r.result),s={buffer:e.processBuffer(t),byteOffset:e.byteOffset,byteLength:t.byteLength};e.byteOffset+=t.byteLength,i(n.bufferViews.push(s)-1)}}))}processAccessor(t,e,n,i){const r=this.options,s=this.json;let o;if(t.array.constructor===Float32Array)o=Lx;else if(t.array.constructor===Uint32Array)o=kx;else if(t.array.constructor===Uint16Array)o=Fx;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");o=Px}if(void 0===n&&(n=0),void 0===i&&(i=t.count),r.truncateDrawRange&&void 0!==e&&null===e.index){const r=n+i,s=e.drawRange.count===1/0?t.count:e.drawRange.start+e.drawRange.count;n=Math.max(n,e.drawRange.start),(i=Math.min(r,s)-n)<0&&(i=0)}if(0===i)return null;const a=function(t,e,n){const i={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+n;r++)for(let e=0;e<t.itemSize;e++){let n;t.itemSize>4?n=t.array[r*t.itemSize+e]:0===e?n=t.getX(r):1===e?n=t.getY(r):2===e?n=t.getZ(r):3===e&&(n=t.getW(r)),i.min[e]=Math.min(i.min[e],n),i.max[e]=Math.max(i.max[e],n)}return i}(t,n,i);let l;void 0!==e&&(l=t===e.index?Bx:Ux);const h=this.processBufferView(t,o,n,i,l),c={bufferView:h.id,byteOffset:h.byteOffset,componentType:o,count:i,max:a.max,min:a.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[t.itemSize]};return!0===t.normalized&&(c.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(c)-1}processImage(t,e,n){const i=this,r=i.cache,s=i.json,o=i.options,a=i.pending;r.images.has(t)||r.images.set(t,{});const l=r.images.get(t),h=e===Go?"image/png":"image/jpeg",c=h+":flipY/"+n.toString();if(void 0!==l[c])return l[c];s.images||(s.images=[]);const u={mimeType:h};if(o.embedImages){const r=tI=tI||document.createElement("canvas");r.width=Math.min(t.width,o.maxTextureSize),r.height=Math.min(t.height,o.maxTextureSize);const s=r.getContext("2d");if(!0===n&&(s.translate(0,r.height),s.scale(1,-1)),"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap)s.drawImage(t,0,0,r.width,r.height);else{e!==Go&&e!==zo&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(t.width>o.maxTextureSize||t.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",t);const n=new Uint8ClampedArray(t.height*t.width*4);if(e===Go)for(let e=0;e<n.length;e+=4)n[e+0]=t.data[e+0],n[e+1]=t.data[e+1],n[e+2]=t.data[e+2],n[e+3]=t.data[e+3];else for(let e=0,i=0;e<n.length;e+=4,i+=3)n[e+0]=t.data[i+0],n[e+1]=t.data[i+1],n[e+2]=t.data[i+2],n[e+3]=255;s.putImageData(new ImageData(n,t.width,t.height),0,0)}!0===o.binary?a.push(new Promise((function(t){r.toBlob((function(e){i.processBufferViewImage(e).then((function(e){u.bufferView=e,t()}))}),h)}))):u.uri=r.toDataURL(h)}else u.uri=t.src;const p=s.images.push(u)-1;return l[c]=p,p}processSampler(t){const e=this.json;e.samplers||(e.samplers=[]);const n={magFilter:Zx[t.magFilter],minFilter:Zx[t.minFilter],wrapS:Zx[t.wrapS],wrapT:Zx[t.wrapT]};return e.samplers.push(n)-1}processTexture(t){const e=this.cache,n=this.json;if(e.textures.has(t))return e.textures.get(t);n.textures||(n.textures=[]);const i={sampler:this.processSampler(t),source:this.processImage(t.image,t.format,t.flipY)};t.name&&(i.name=t.name),this._invokeAll((function(e){e.writeTexture&&e.writeTexture(t,i)}));const r=n.textures.push(i)-1;return e.textures.set(t,r),r}processMaterial(t){const e=this.cache,n=this.json;if(e.materials.has(t))return e.materials.get(t);if(t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const i={pbrMetallicRoughness:{}};!0!==t.isMeshStandardMaterial&&!0!==t.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=t.color.toArray().concat([t.opacity]);if(Qx(r,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=r),t.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=t.metalness,i.pbrMetallicRoughness.roughnessFactor=t.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),t.metalnessMap||t.roughnessMap)if(t.metalnessMap===t.roughnessMap){const e={index:this.processTexture(t.metalnessMap)};this.applyTextureTransform(e,t.metalnessMap),i.pbrMetallicRoughness.metallicRoughnessTexture=e}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(t.map){const e={index:this.processTexture(t.map)};this.applyTextureTransform(e,t.map),i.pbrMetallicRoughness.baseColorTexture=e}if(t.emissive){const e=t.emissive.clone().multiplyScalar(t.emissiveIntensity),n=Math.max(e.r,e.g,e.b);if(n>1&&(e.multiplyScalar(1/n),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),n>0&&(i.emissiveFactor=e.toArray()),t.emissiveMap){const e={index:this.processTexture(t.emissiveMap)};this.applyTextureTransform(e,t.emissiveMap),i.emissiveTexture=e}}if(t.normalMap){const e={index:this.processTexture(t.normalMap)};t.normalScale&&1!==t.normalScale.x&&(e.scale=t.normalScale.x),this.applyTextureTransform(e,t.normalMap),i.normalTexture=e}if(t.aoMap){const e={index:this.processTexture(t.aoMap),texCoord:1};1!==t.aoMapIntensity&&(e.strength=t.aoMapIntensity),this.applyTextureTransform(e,t.aoMap),i.occlusionTexture=e}t.transparent?i.alphaMode="BLEND":t.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=t.alphaTest),t.side===ws&&(i.doubleSided=!0),""!==t.name&&(i.name=t.name),this.serializeUserData(t,i),this._invokeAll((function(e){e.writeMaterial&&e.writeMaterial(t,i)}));const s=n.materials.push(i)-1;return e.materials.set(t,s),s}processMesh(t){const e=this.cache,n=this.json,i=[t.geometry.uuid];if(Array.isArray(t.material))for(let _=0,v=t.material.length;_<v;_++)i.push(t.material[_].uuid);else i.push(t.material.uuid);const r=i.join(":");if(e.meshes.has(r))return e.meshes.get(r);const s=t.geometry;let o;if(o=t.isLineSegments?Dx:t.isLineLoop?Ox:t.isLine?Nx:t.isPoints?Rx:t.material.wireframe?Dx:Mx,!0!==s.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");const a={},l={},h=[],c=[],u={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=s.getAttribute("normal");void 0===p||this.isNormalizedNormalAttribute(p)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(p)));let d=null;for(let _ in s.attributes){if("morph"===_.substr(0,5))continue;const t=s.attributes[_];_=u[_]||_.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(_)||(_="_"+_),e.attributes.has(this.getUID(t))){l[_]=e.attributes.get(this.getUID(t));continue}d=null;const n=t.array;"JOINTS_0"!==_||n instanceof Uint16Array||n instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),d=new sc(new Uint16Array(n),t.itemSize,t.normalized));const i=this.processAccessor(d||t,s);null!==i&&(l[_]=i,e.attributes.set(this.getUID(t),i))}if(void 0!==p&&s.setAttribute("normal",p),0===Object.keys(l).length)return null;if(void 0!==t.morphTargetInfluences&&t.morphTargetInfluences.length>0){const n=[],i=[],r={};if(void 0!==t.morphTargetDictionary)for(const e in t.morphTargetDictionary)r[t.morphTargetDictionary[e]]=e;for(let o=0;o<t.morphTargetInfluences.length;++o){const a={};let l=!1;for(const t in s.morphAttributes){if("position"!==t&&"normal"!==t){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}const n=s.morphAttributes[t][o],i=t.toUpperCase(),r=s.attributes[t];if(e.attributes.has(this.getUID(n))){a[i]=e.attributes.get(this.getUID(n));continue}const h=n.clone();if(!s.morphTargetsRelative)for(let t=0,e=n.count;t<e;t++)h.setXYZ(t,n.getX(t)-r.getX(t),n.getY(t)-r.getY(t),n.getZ(t)-r.getZ(t));a[i]=this.processAccessor(h,s),e.attributes.set(this.getUID(r),a[i])}c.push(a),n.push(t.morphTargetInfluences[o]),void 0!==t.morphTargetDictionary&&i.push(r[o])}a.weights=n,i.length>0&&(a.extras={},a.extras.targetNames=i)}const f=Array.isArray(t.material);if(f&&0===s.groups.length)return null;const m=f?t.material:[t.material],g=f?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let _=0,v=g.length;_<v;_++){const t={mode:o,attributes:l};if(this.serializeUserData(s,t),c.length>0&&(t.targets=c),null!==s.index){let n=this.getUID(s.index);void 0===g[_].start&&void 0===g[_].count||(n+=":"+g[_].start+":"+g[_].count),e.attributes.has(n)?t.indices=e.attributes.get(n):(t.indices=this.processAccessor(s.index,s,g[_].start,g[_].count),e.attributes.set(n,t.indices)),null===t.indices&&delete t.indices}const n=this.processMaterial(m[g[_].materialIndex]);null!==n&&(t.material=n),h.push(t)}a.primitives=h,n.meshes||(n.meshes=[]),this._invokeAll((function(e){e.writeMesh&&e.writeMesh(t,a)}));const y=n.meshes.push(a)-1;return e.meshes.set(r,y),y}processCamera(t){const e=this.json;e.cameras||(e.cameras=[]);const n=t.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:i.perspective={aspectRatio:t.aspect,yfov:_l.degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(i.name=t.type),e.cameras.push(i)-1}processAnimation(t,e){const n=this.json,i=this.nodeMap;n.animations||(n.animations=[]);const r=(t=Cx.Utils.mergeMorphTargetTracks(t.clone(),e)).tracks,s=[],o=[];for(let a=0;a<r.length;++a){const t=r[a],n=Sy.parseTrackName(t.name);let l=Sy.findNode(e,n.nodeName);const h=Kx[n.propertyName];if("bones"===n.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(n.objectIndex):void 0),!l||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',t.name),null;const c=1;let u,p=t.values.length/t.times.length;h===Kx.morphTargetInfluences&&(p/=l.morphTargetInfluences.length),!0===t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(u="CUBICSPLINE",p/=3):u=t.getInterpolation()===Ba?"STEP":"LINEAR",o.push({input:this.processAccessor(new sc(t.times,c)),output:this.processAccessor(new sc(t.values,p)),interpolation:u}),s.push({sampler:o.length-1,target:{node:i.get(l),path:h}})}return n.animations.push({name:t.name||"clip_"+n.animations.length,samplers:o,channels:s}),n.animations.length-1}processSkin(t){const e=this.json,n=this.nodeMap,i=e.nodes[n.get(t)],r=t.skeleton;if(void 0===r)return null;const s=t.skeleton.bones[0];if(void 0===s)return null;const o=[],a=new Float32Array(16*r.bones.length),l=new ch;for(let h=0;h<r.bones.length;++h)o.push(n.get(r.bones[h])),l.copy(r.boneInverses[h]),l.multiply(t.bindMatrix).toArray(a,16*h);void 0===e.skins&&(e.skins=[]),e.skins.push({inverseBindMatrices:this.processAccessor(new sc(a,16)),joints:o,skeleton:n.get(s)});return i.skin=e.skins.length-1}processNode(t){const e=this.json,n=this.options,i=this.nodeMap;e.nodes||(e.nodes=[]);const r={};if(n.trs){const e=t.quaternion.toArray(),n=t.position.toArray(),i=t.scale.toArray();Qx(e,[0,0,0,1])||(r.rotation=e),Qx(n,[0,0,0])||(r.translation=n),Qx(i,[1,1,1])||(r.scale=i)}else t.matrixAutoUpdate&&t.updateMatrix(),!1===Qx(t.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(r.matrix=t.matrix.elements);if(""!==t.name&&(r.name=String(t.name)),this.serializeUserData(t,r),t.isMesh||t.isLine||t.isPoints){const e=this.processMesh(t);null!==e&&(r.mesh=e)}else t.isCamera&&(r.camera=this.processCamera(t));if(t.isSkinnedMesh&&this.skins.push(t),t.children.length>0){const e=[];for(let i=0,r=t.children.length;i<r;i++){const r=t.children[i];if(r.visible||!1===n.onlyVisible){const t=this.processNode(r);null!==t&&e.push(t)}}e.length>0&&(r.children=e)}this._invokeAll((function(e){e.writeNode&&e.writeNode(t,r)}));const s=e.nodes.push(r)-1;return i.set(t,s),s}processScene(t){const e=this.json,n=this.options;e.scenes||(e.scenes=[],e.scene=0);const i={};""!==t.name&&(i.name=t.name),e.scenes.push(i);const r=[];for(let s=0,o=t.children.length;s<o;s++){const e=t.children[s];if(e.visible||!1===n.onlyVisible){const t=this.processNode(e);null!==t&&r.push(t)}}r.length>0&&(i.nodes=r),this.serializeUserData(t,i)}processObjects(t){const e=new qd;e.name="AuxScene";for(let n=0;n<t.length;n++)e.children.push(t[n]);this.processScene(e)}processInput(t){const e=this.options;t=t instanceof Array?t:[t],this._invokeAll((function(e){e.beforeParse&&e.beforeParse(t)}));const n=[];for(let i=0;i<t.length;i++)t[i]instanceof qd?this.processScene(t[i]):n.push(t[i]);n.length>0&&this.processObjects(n);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<e.animations.length;++i)this.processAnimation(e.animations[i],t[0]);this._invokeAll((function(e){e.afterParse&&e.afterParse(t)}))}_invokeAll(t){for(let e=0,n=this.plugins.length;e<n;e++)t(this.plugins[e])}}class nI{constructor(t){this.writer=t,this.name="KHR_lights_punctual"}writeNode(t,e){if(!t.isLight)return;if(!t.isDirectionalLight&&!t.isPointLight&&!t.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t);const n=this.writer,i=n.json,r=n.extensionsUsed,s={};t.name&&(s.name=t.name),s.color=t.color.toArray(),s.intensity=t.intensity,t.isDirectionalLight?s.type="directional":t.isPointLight?(s.type="point",t.distance>0&&(s.range=t.distance)):t.isSpotLight&&(s.type="spot",t.distance>0&&(s.range=t.distance),s.spot={},s.spot.innerConeAngle=(t.penumbra-1)*t.angle*-1,s.spot.outerConeAngle=t.angle),void 0!==t.decay&&2!==t.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!t.target||t.target.parent===t&&0===t.target.position.x&&0===t.target.position.y&&-1===t.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},r[this.name]=!0);const o=i.extensions[this.name].lights;o.push(s),e.extensions=e.extensions||{},e.extensions[this.name]={light:o.length-1}}}class iI{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}writeMaterial(t,e){if(!t.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}}class rI{constructor(t){this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(t,e){if(!t.isGLTFSpecularGlossinessMaterial)return;const n=this.writer,i=n.extensionsUsed,r={};e.pbrMetallicRoughness.baseColorFactor&&(r.diffuseFactor=e.pbrMetallicRoughness.baseColorFactor);const s=[1,1,1];if(t.specular.toArray(s,0),r.specularFactor=s,r.glossinessFactor=t.glossiness,e.pbrMetallicRoughness.baseColorTexture&&(r.diffuseTexture=e.pbrMetallicRoughness.baseColorTexture),t.specularMap){const e={index:n.processTexture(t.specularMap)};n.applyTextureTransform(e,t.specularMap),r.specularGlossinessTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}class sI{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial)return;const n=this.writer,i=n.extensionsUsed,r={};if(r.clearcoatFactor=t.clearcoat,t.clearcoatMap){const e={index:n.processTexture(t.clearcoatMap)};n.applyTextureTransform(e,t.clearcoatMap),r.clearcoatTexture=e}if(r.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){const e={index:n.processTexture(t.clearcoatRoughnessMap)};n.applyTextureTransform(e,t.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=e}if(t.clearcoatNormalMap){const e={index:n.processTexture(t.clearcoatNormalMap)};n.applyTextureTransform(e,t.clearcoatNormalMap),r.clearcoatNormalTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}class oI{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;const n=this.writer,i=n.extensionsUsed,r={};if(r.transmissionFactor=t.transmission,t.transmissionMap){const e={index:n.processTexture(t.transmissionMap)};n.applyTextureTransform(e,t.transmissionMap),r.transmissionTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}class aI{constructor(t){this.writer=t,this.name="KHR_materials_volume"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;const n=this.writer,i=n.extensionsUsed,r={};if(r.thicknessFactor=t.thickness,t.thicknessMap){const e={index:n.processTexture(t.thicknessMap)};n.applyTextureTransform(e,t.thicknessMap),r.thicknessTexture=e}r.attenuationDistance=t.attenuationDistance,r.attenuationColor=t.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}Cx.Utils={insertKeyframe:function(t,e){const n=.001,i=t.getValueSize(),r=new t.TimeBufferType(t.times.length+1),s=new t.ValueBufferType(t.values.length+i),o=t.createInterpolant(new t.ValueBufferType(i));let a;if(0===t.times.length){r[0]=e;for(let t=0;t<i;t++)s[t]=0;a=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<n)return 0;r[0]=e,r.set(t.times,1),s.set(o.evaluate(e),0),s.set(t.values,i),a=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<n)return t.times.length-1;r[r.length-1]=e,r.set(t.times,0),s.set(t.values,0),s.set(o.evaluate(e),t.values.length),a=r.length-1}else for(let l=0;l<t.times.length;l++){if(Math.abs(t.times[l]-e)<n)return l;if(t.times[l]<e&&t.times[l+1]>e){r.set(t.times.slice(0,l+1),0),r[l+1]=e,r.set(t.times.slice(l+1),l+2),s.set(t.values.slice(0,(l+1)*i),0),s.set(o.evaluate(e),(l+1)*i),s.set(t.values.slice((l+1)*i),(l+2)*i),a=l+1;break}}return t.times=r,t.values=s,a},mergeMorphTargetTracks:function(t,e){const n=[],i={},r=t.tracks;for(let s=0;s<r.length;++s){let t=r[s];const o=Sy.parseTrackName(t.name),a=Sy.findNode(e,o.nodeName);if("morphTargetInfluences"!==o.propertyName||void 0===o.propertyIndex){n.push(t);continue}if(t.createInterpolant!==t.InterpolantFactoryMethodDiscrete&&t.createInterpolant!==t.InterpolantFactoryMethodLinear){if(t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),t=t.clone(),t.setInterpolation(za)}const l=a.morphTargetInfluences.length,h=a.morphTargetDictionary[o.propertyIndex];if(void 0===h)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let c;if(void 0===i[a.uuid]){c=t.clone();const e=new c.ValueBufferType(l*c.times.length);for(let t=0;t<c.times.length;t++)e[t*l+h]=c.values[t];c.name=(o.nodeName||"")+".morphTargetInfluences",c.values=e,i[a.uuid]=c,n.push(c);continue}const u=t.createInterpolant(new t.ValueBufferType(1));c=i[a.uuid];for(let e=0;e<c.times.length;e++)c.values[e*l+h]=u.evaluate(c.times[e]);for(let e=0;e<t.times.length;e++){const n=this.insertKeyframe(c,t.times[e]);c.values[n*l+h]=t.values[e]}}return t.tracks=n,t}};class lI extends Df{constructor(t,e,n){super(t,e,n),this.elementCount=0,this.exportOptions={trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,maxTextureSize:0},this.exporter=new Cx,this.material=lI.newMaterialArray(e),this.geometry=this.newFragmentGeometry(t)}export(){const t=this;return new Promise((e=>{this.exporter.parse(t,(t=>e(t)),(t=>console.log(t)),this.exportOptions)}))}newFragmentGeometry(t){if(!t.index)throw new Error("The geometry must be indexed!");if(!t.attributes.blockID){const e=t.attributes.position.count,n=new Uint16Array(e);n.fill(this.elementCount++),t.attributes.blockID=new Ax(n,1)}const e=t.index.count;return lI.initializeGroups(t,e),t}static initializeGroups(t,e){t.groups.length||t.groups.push({start:0,count:e,materialIndex:0})}static newMaterialArray(t){return Array.isArray(t)||(t=[t]),t}}class hI{constructor(t){this.indices=hI.initializeBlocks(t),this.generateGeometryIndexMap(t)}generateGeometryIndexMap(t){const e=t.mesh.geometry;for(const n of e.groups)this.fillBlocksMapWithGroupInfo(n,e)}getSubsetID(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT";const i=t,r=e?e.uuid:"DEFAULT";return"".concat(i," - ").concat(r," - ").concat(n)}dispose(){this.indices=null}static initializeBlocks(t){const e=t.mesh.geometry;return{indexCache:e.index.array.slice(0,e.index.array.length),map:new Map}}fillBlocksMapWithGroupInfo(t,e){let n=-1;const i=t.materialIndex,r=t.start,s=r+t.count-1;let o=-1,a=-1;for(let l=r;l<=s;l++){const t=e.index.array[l],r=e.attributes.blockID.array[t];-1===n&&(n=r,o=l);if(l===s){this.getMaterialStore(r,i).push(o,s);break}if(n===r)continue;a=l-1,this.getMaterialStore(n,i).push(o,a),n=r,o=l}}getMaterialStore(t,e){void 0===this.indices.map.get(t)&&this.indices.map.set(t,{});const n=this.indices.map.get(t);if(void 0===n)throw new Error("Geometry map generation error");return void 0===n[e]&&(n[e]=[]),n[e]}}class cI{constructor(t){this.fragment=t,this.tempIndex=[],this.blocksMap=new hI(t),this.initializeSubsetGroups(t);const e=t.mesh.geometry.attributes.blockID.array;this.visibleIds=new Set(e),this.ids=new Set(e),this.add(Array.from(this.ids),!0)}get count(){return this.ids.size}reset(){this.add(Array.from(this.ids),!0)}add(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.filterIndices(e);const n=t.filter((t=>!this.visibleIds.has(t)));this.constructSubsetByMaterial(t),n.forEach((t=>this.visibleIds.add(t))),this.fragment.mesh.geometry.setIndex(this.tempIndex),this.tempIndex.length=0}remove(t){t.forEach((t=>this.visibleIds.has(t)&&this.visibleIds.delete(t)));const e=Array.from(this.visibleIds);this.add(e,!0)}dispose(){this.blocksMap.dispose(),this.tempIndex=[],this.visibleIds.clear(),this.visibleIds=null,this.ids.clear(),this.ids=null}initializeSubsetGroups(t){const e=t.mesh.geometry;e.groups=JSON.parse(JSON.stringify(e.groups)),this.resetGroups(e)}filterIndices(t){const e=this.fragment.mesh.geometry;t?(e.setIndex([]),this.resetGroups(e)):this.tempIndex=Array.from(e.index.array)}constructSubsetByMaterial(t){const e=this.fragment.mesh.geometry.groups.length,n={count:0};for(let i=0;i<e;i++)this.insertNewIndices(t,i,n)}insertNewIndices(t,e,n){const i=this.getAllIndicesOfGroup(t,e);this.insertIndicesAtGroup(i,e,n)}insertIndicesAtGroup(t,e,n){const i=this.getCurrentGroup(e);i.start+=n.count;const r=i.start+i.count;if(n.count+=t.length,t.length>0){const e=r,n=this.tempIndex.slice(0,e),s=this.tempIndex.slice(e);this.tempIndex=Array.prototype.concat.apply([],[n,t,s]),i.count+=t.length}}getCurrentGroup(t){return this.fragment.mesh.geometry.groups[t]}resetGroups(t){t.groups.forEach((t=>{t.start=0,t.count=0}))}getAllIndicesOfGroup(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=[];for(const r of t){const t=this.blocksMap.indices.map.get(r);if(!t)continue;const s=t[e];s&&this.getIndexChunk(s,i,e,n)}return i}getIndexChunk(t,e,n,i){const r=t.length/2;for(let s=0;s<r;s++){const r=2*s,o=t[r],a=t[r+1];for(let t=o;t<=a;t++)i?e.push(this.blocksMap.indices.indexCache[t]):(e[n]||(e[n]=[]),e[n].push(this.blocksMap.indices.indexCache[t]))}}}class uI{static apply(t){uI.initialized||(gc.prototype.computeBoundsTree=mv,gc.prototype.disposeBoundsTree=gv,Pc.prototype.raycast=fv,uI.initialized=!0),t.boundsTree||t.computeBoundsTree()}static dispose(t){t.disposeBoundsTree()}}uI.initialized=!1;class pI{constructor(t,e,n){this.fragments={},this.items=[],this.hiddenInstances={},this.mesh=new lI(t,e,n),this.id=this.mesh.uuid,this.capacity=n,this.blocks=new cI(this),uI.apply(t)}dispose(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.items=null,t&&(this.mesh.material.forEach((t=>t.dispose())),uI.dispose(this.mesh.geometry),this.mesh.geometry.dispose()),this.mesh.removeFromParent(),this.mesh.dispose(),this.mesh=null,this.disposeNestedFragments()}getItemID(t,e){const n=this.getItemIndex(t,e);return this.items[n]}getInstanceAndBlockID(t){const e=this.items.indexOf(t);return{instanceID:this.getInstanceIDFromIndex(e),blockID:e%this.blocks.count}}getVertexBlockID(t,e){return t.attributes.blockID.array[e]}getItemData(t){const e=this.items.indexOf(t);return{instanceID:Math.ceil(e/this.blocks.count),blockID:e%this.blocks.count}}getInstance(t,e){return this.mesh.getMatrixAt(t,e)}setInstance(t,e){this.checkIfInstanceExist(t),this.mesh.setMatrixAt(t,e.transform),this.mesh.instanceMatrix.needsUpdate=!0,e.ids&&this.saveItemsInMap(e.ids,t)}addInstances(t){this.resizeCapacityIfNeeded(t.length);const e=this.mesh.count;this.mesh.count+=t.length;for(let n=0;n<t.length;n++)this.setInstance(e+n,t[n])}removeInstances(t){this.mesh.count<=1?this.clear():(this.deleteAndRearrangeInstances(t),this.mesh.count-=t.length,this.mesh.instanceMatrix.needsUpdate=!0)}clear(){this.mesh.clear(),this.mesh.count=0,this.items=[]}addFragment(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mesh.material;const n=this.initializeGeometry();e===this.mesh.material&&this.copyGroups(n);const i=new pI(n,e,this.capacity);return i.mesh.applyMatrix4(this.mesh.matrix),i.mesh.updateMatrix(),this.fragments[t]=i,this.fragments[t]}removeFragment(t){const e=this.fragments[t];e&&(e.dispose(!1),delete this.fragments[t])}resetVisibility(){if(this.blocks.count>1)this.blocks.reset();else{const t=Object.keys(this.hiddenInstances);this.makeInstancesVisible(t),this.hiddenInstances={}}}setVisibility(t,e){this.blocks.count>1?(this.toggleBlockVisibility(e,t),this.mesh.geometry.disposeBoundsTree(),uI.apply(this.mesh.geometry)):this.toggleInstanceVisibility(e,t)}resize(t){var e;const n=this.createFragmentMeshWithNewSize(t);this.capacity=t;const i=this.mesh;null===(e=i.parent)||void 0===e||e.add(n),i.removeFromParent(),this.mesh=n,i.dispose()}async export(){const t=await this.mesh.export(),e=new File([new Blob([t])],"".concat(this.id,".glb")),n={matrices:Array.from(this.mesh.instanceMatrix.array),ids:this.items,id:this.id},i=JSON.stringify(n);return{geometry:e,data:new File([new Blob([i])],"".concat(this.id,".json"))}}copyGroups(t){t.groups=[];for(const e of this.mesh.geometry.groups)t.groups.push({...e})}initializeGeometry(){const t=new gc;return t.setAttribute("position",this.mesh.geometry.attributes.position),t.setAttribute("normal",this.mesh.geometry.attributes.normal),t.setAttribute("blockID",this.mesh.geometry.attributes.blockID),t.setIndex(Array.from(this.mesh.geometry.index.array)),t}saveItemsInMap(t,e){this.checkBlockNumberValid(t);let n=0;for(const i of t){const t=this.getItemIndex(e,n);this.items[t]=i,n++}}resizeCapacityIfNeeded(t){const e=t+this.mesh.count;e>this.capacity&&this.resize(e)}createFragmentMeshWithNewSize(t){const e=new lI(this.mesh.geometry,this.mesh.material,t);return e.count=this.mesh.count,e}disposeNestedFragments(){const t=Object.values(this.fragments);for(let e=0;e<t.length;e++)t[e].dispose();this.fragments={}}checkBlockNumberValid(t){if(t.length>this.blocks.count)throw new Error("You passed more items (".concat(t.length,") than blocks in this instance (").concat(this.blocks.count,")"))}checkIfInstanceExist(t){if(t>this.mesh.count)throw new Error("The given index (".concat(t,") exceeds the instances in this fragment (").concat(this.mesh.count,")"))}deleteAndRearrangeInstances(t){const e=[];for(const n of t){const t=this.deleteAndRearrange(n);t&&e.push(t)}for(const n of t)delete this.hiddenInstances[n];return e}deleteAndRearrange(t){const e=this.items.indexOf(t);if(-1===e)return null;this.mesh.count--;const n=e===this.mesh.count,i=this.getInstanceIDFromIndex(e),r=new ch,s=new ch;if(this.mesh.getMatrixAt(i,s),n)return this.items.pop(),{ids:[t],transform:s};const o=this.mesh.count;return this.items[e]=this.items[o],this.items.pop(),this.mesh.getMatrixAt(o,r),this.mesh.setMatrixAt(i,r),this.mesh.instanceMatrix.needsUpdate=!0,{ids:[t],transform:s}}getItemIndex(t,e){return t*this.blocks.count+e}getInstanceIDFromIndex(t){return Math.trunc(t/this.blocks.count)}toggleInstanceVisibility(t,e){t?this.makeInstancesVisible(e):this.makeInstancesInvisible(e)}makeInstancesInvisible(t){t=this.filterHiddenItems(t,!1);const e=this.deleteAndRearrangeInstances(t);for(const n of e)n.ids&&(this.hiddenInstances[n.ids[0]]=n)}makeInstancesVisible(t){const e=[];t=this.filterHiddenItems(t,!0);for(const n of t)e.push(this.hiddenInstances[n]),delete this.hiddenInstances[n];this.addInstances(e)}filterHiddenItems(t,e){const n=Object.keys(this.hiddenInstances);return t.filter((t=>e?n.includes(t):!n.includes(t)))}toggleBlockVisibility(t,e){const n=e.map((t=>this.getInstanceAndBlockID(t).blockID));t?this.blocks.add(n,!1):this.blocks.remove(n)}}function dI(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=null!==t[0].index,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,l=new gc;let h=0;for(let c=0;c<t.length;++c){const u=t[c];let p=0;if(n!==(null!==u.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const t in u.attributes){if(!i.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[t]&&(s[t]=[]),s[t].push(u.attributes[t]),p++}if(p!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const t in u.morphAttributes){if(!r.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[t]&&(o[t]=[]),o[t].push(u.morphAttributes[t])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(u.userData),e){let t;if(n)t=u.index.count;else{if(void 0===u.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;t=u.attributes.position.count}l.addGroup(h,t,c),h+=t}}if(n){let e=0;const n=[];for(let i=0;i<t.length;++i){const r=t[i].index;for(let t=0;t<r.count;++t)n.push(r.getX(t)+e);e+=t[i].attributes.position.count}l.setIndex(n)}for(const c in s){const t=fI(s[c]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,t)}for(const c in o){const t=o[c][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let e=0;e<t;++e){const t=[];for(let i=0;i<o[c].length;++i)t.push(o[c][i][e]);const n=fI(t);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(n)}}return l}function fI(t){let e,n,i,r=0;for(let a=0;a<t.length;++a){const s=t[a];if(s.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=s.normalized),i!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=s.array.length}const s=new e(r);let o=0;for(let a=0;a<t.length;++a)s.set(t[a].array,o),o+=t[a].array.length;return new sc(s,n,i)}class mI{static merge(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],i=[];for(const s of t){const t=this.mergeGeomsOfSameMaterial(s,e);n.push(t),i.push(t.index.count)}const r=dI(n);return this.setupMaterialGroups(i,r),this.cleanUp(n),r}static async mergeGltfMeshes(t){const e=new gc,n=t[0].geometry.attributes;return this.getMeshesAttributes(e,n),this.getMeshesIndices(e,t),e}static getMeshesAttributes(t,e){t.setAttribute("blockID",e._blockid),t.setAttribute("position",e.position),t.setAttribute("normal",e.normal),t.groups=[]}static getMeshesIndices(t,e){const n={index:0,material:0},i=[];for(const r of e){const e=r.geometry.index;this.getIndicesOfMesh(e,i),this.getMeshGroup(t,n,e),this.cleanUpMesh(r)}t.setIndex(i)}static getMeshGroup(t,e,n){t.groups.push({start:e.index,count:n.count,materialIndex:e.material++}),e.index+=n.count}static cleanUpMesh(t){t.geometry.setIndex([]),t.geometry.attributes={},t.geometry.dispose()}static getIndicesOfMesh(t,e){for(const n of t.array)e.push(n)}static cleanUp(t){t.forEach((t=>t.dispose())),t.length=0}static setupMaterialGroups(t,e){let n=0,i=0;for(const r of t){const t={start:n,count:r,materialIndex:i++};e.groups.push(t),n+=r}}static mergeGeomsOfSameMaterial(t,e){this.checkAllGeometriesAreIndexed(t),e&&this.splitByBlocks(t);const n=dI(t);return this.cleanUp(t),n}static splitByBlocks(t){let e=0;for(const n of t){const t=n.attributes.position.count,i=new Uint8Array(t).fill(e++);n.setAttribute("blockID",new sc(i,1))}}static checkAllGeometriesAreIndexed(t){for(const e of t)if(!e.index)throw new Error("All geometries must be indexed!")}}class gI{constructor(){this.loader=new hE}async load(t,e){const n=await this.loader.loadAsync(t),i=n.scene.children[0],r=!!i.children.length?i.children:[n.scene.children[0]],s=await mI.mergeGltfMeshes(r),o=this.getMaterials(r),a=await fetch(e),l=await a.json();return this.getFragment(s,o,l)}getFragment(t,e,n){const i=this.getInstances(n),r=new pI(t,e,i.length);n.id&&(r.id=n.id,r.mesh.uuid=n.id);for(let s=0;s<i.length;s++)r.setInstance(s,i[s]);return r}getInstances(t){let e=0;const n=[],i=16===t.matrices.length?t.ids.length:1;for(let r=0;r<t.matrices.length-15;r+=16){const s=[];for(let e=0;e<16;e++)s.push(t.matrices[e+r]);const o=(new ch).fromArray(s),a=e*i,l=t.ids.slice(a,a+i);e++,n.push({ids:l,transform:o})}return n}getMaterials(t){return t.map((t=>{const e=t.material;return new fg({color:e.color,opacity:e.opacity,transparent:e.transparent})}))}}class yI{constructor(t,e){this.components=t,this.fragments=e,this.active=!1,this.highlightMats={},this.tempMatrix=new ch,this.selection={}}dispose(){for(const t in this.highlightMats){const e=this.highlightMats[t]||[];for(const t of e)t.dispose()}this.highlightMats={}}add(t,e){if(this.highlightMats[t])throw new Error("A highlight with this name already exists.");this.highlightMats[t]=e,this.selection[t]={},this.update()}update(){for(const t in this.fragments.list){const e=this.fragments.list[t];this.addHighlightToFragment(e)}}highlight(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n;if(!this.active)return null;this.checkSelection(t);const i=this.fragments.meshes,r=this.components.raycaster.castRay(i);if(!r)return this.clear(t),null;const s=r.object,o=s.geometry,a=null===(n=r.face)||void 0===n?void 0:n.a,l=r.instanceId;if(!o||!a||void 0===l)return null;e&&this.clear(t),this.selection[t][s.uuid]||(this.selection[t][s.uuid]=new Set);const h=this.fragments.list[s.uuid],c=h.getVertexBlockID(o,a),u=h.getItemID(l,c);return this.selection[t][s.uuid].add(u),this.updateFragmentHighlight(t,s.uuid),{id:u,fragment:h}}highlightByID(t,e){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.clear(t);const n=this.selection[t];for(const i in e){n[i]||(n[i]=new Set);for(const t of e[i])n[i].add(t);this.updateFragmentHighlight(t,i)}}clear(t){const e=t?[t]:Object.keys(this.selection);for(const n of e)this.clearStyle(n)}clearStyle(t){for(const e in this.selection[t]){const n=this.fragments.list[e];if(!n)continue;const i=n.fragments[t];i&&i.mesh.removeFromParent()}this.selection[t]={}}updateFragmentHighlight(t,e){const n=this.selection[t][e],i=this.fragments.list[e];if(!i)return;const r=i.fragments[t];if(!r)return;const s=this.components.scene.get(),o=r.blocks.count>1;if(s.add(r.mesh),o){const t=[];for(const e of n){const{blockID:n}=i.getInstanceAndBlockID(e);i.blocks.visibleIds.has(n)&&t.push(n)}i.getInstance(0,this.tempMatrix),r.setInstance(0,{ids:Array.from(n),transform:this.tempMatrix}),r.blocks.add(t,!0)}else{let t=0;for(const e of n){r.mesh.count=t+1;const{instanceID:n}=i.getInstanceAndBlockID(e);i.getInstance(n,this.tempMatrix),r.setInstance(t,{ids:[e],transform:this.tempMatrix}),t++}}}checkSelection(t){if(!this.selection[t])throw new Error("Selection ".concat(t," does not exist."))}addHighlightToFragment(t){for(const e in this.highlightMats)if(!t.fragments[e]){const n=this.highlightMats[e];t.addFragment(e,n),t.fragments[e].mesh.renderOrder=1}}}class _I{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.components=t,this.fragment=e,this.updateInterval=n,this.rtWidth=i,this.rtHeight=r,this.autoUpdate=s,this.enabled=!0,this.viewUpdated=new yv,this.needsUpdate=!1,this.fragmentColorMap=new Map,this.renderDebugFrame=!1,this.visibleFragments=[],this.meshes=new Map,this._previouslyVisibleMeshes=new Set,this._transparentMat=new nc({transparent:!0,opacity:0}),this._disposer=new _T,this._colors={r:0,g:0,b:0,i:0},this._scene=new qd,this.updateVisibility=t=>{if(!this.enabled)return;if(!this.needsUpdate&&!t)return;const e=this.components.camera.get();e.updateMatrix(),this.renderer.setSize(this.rtWidth,this.rtHeight),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(this._scene,e),this.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.rtWidth,this.rtHeight,this._buffer),this.renderer.setRenderTarget(null),this.renderDebugFrame&&this.renderer.render(this._scene,e),this.worker.postMessage({buffer:this._buffer}),this.needsUpdate=!1,this.viewUpdated.trigger()},this.handleWorkerMessage=t=>{const e=t.data.colors,n=new Set(this._previouslyVisibleMeshes);this._previouslyVisibleMeshes.clear(),this.visibleFragments=[];for(const i of e.values()){const t=this.fragmentColorMap.get(i);t&&(this.visibleFragments.push(t),t.mesh.visible=!0,this._previouslyVisibleMeshes.add(t.id),n.delete(t.id),this.cullEdges(t,!0))}for(const i of n){const t=this.fragment.list[i];t.mesh.visible=!1,this.cullEdges(t,!1)}},this.renderer=new jd;const o=this.components.renderer.get().clippingPlanes;this.renderer.clippingPlanes=o,this.renderTarget=new Dl(i,r),this.bufferSize=i*r*4,this._buffer=new Uint8Array(this.bufferSize),this.materialCache=new Map;const a=new Blob(['\n      addEventListener("message", (event) => {\n        const { buffer } = event.data;\n        const colors = new Set();\n        for (let i = 0; i < buffer.length; i += 4) {\n            const r = buffer[i];\n            const g = buffer[i + 1];\n            const b = buffer[i + 2];\n            const code = "" + r + g + b;\n            colors.add(code);\n        }\n        postMessage({ colors });\n      });\n    '],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(a)),this.worker.addEventListener("message",this.handleWorkerMessage),s&&window.setInterval(this.updateVisibility,n)}dispose(){this.enabled=!1,this._scene.children.length=0,this.viewUpdated.reset(),this.worker.terminate(),this.renderer.dispose(),this.renderTarget.dispose(),this._buffer=null,this._transparentMat.dispose(),this.viewUpdated.reset(),this.fragmentColorMap.clear(),this.visibleFragments=[];for(const t in this.materialCache){const e=this.materialCache.get(t);e&&e.dispose()}for(const t in this.meshes){const e=this.meshes.get(t);e&&this._disposer.dispose(e)}this.meshes.clear()}add(t){const{geometry:e,material:n}=t.mesh,{r:i,g:r,b:s,code:o}=this.getNextColor(),a=this.getMaterial(i,r,s);let l;if(Array.isArray(n)){let t=!0;const e=[];for(const i of n)this.isTransparent(i)?e.push(this._transparentMat):(t=!1,e.push(a));if(t)return void a.dispose();l=e}else{if(this.isTransparent(n))return void a.dispose();l=a}this.fragmentColorMap.set(o,t);const h=new Df(e,l,t.capacity);t.mesh.visible=!1,h.instanceMatrix=t.mesh.instanceMatrix,h.applyMatrix4(t.mesh.matrix),h.updateMatrix(),this._scene.add(h),this.meshes.set(t.id,h)}getMaterial(t,e,n){const i="rgb(".concat(t,", ").concat(e,", ").concat(n,")");let r=this.materialCache.get(i);const s=this.components.renderer.get().clippingPlanes;return r||(r=new nc({color:new ec(i),clippingPlanes:s}),this.materialCache.set(i,r)),r}isTransparent(t){return t.transparent&&t.opacity<1}getNextColor(){return 0===this._colors.i&&(this._colors.b++,256===this._colors.b&&(this._colors.b=0,this._colors.i=1)),1===this._colors.i&&(this._colors.g++,this._colors.i=0,256===this._colors.g&&(this._colors.g=0,this._colors.i=2)),2===this._colors.i&&(this._colors.r++,this._colors.i=1,256===this._colors.r&&(this._colors.r=0,this._colors.i=0)),{r:this._colors.r,g:this._colors.g,b:this._colors.b,code:"".concat(this._colors.r).concat(this._colors.g).concat(this._colors.b)}}cullEdges(t,e){e&&this.updateEdges(t),this.fragment.edges.edgesList[t.id]&&(this.fragment.edges.edgesList[t.id].visible=e)}updateEdges(t){this.fragment.edges.edgesToUpdate.has(t.id)&&(this.fragment.edges.generate(t),this.fragment.edges.edgesToUpdate.delete(t.id))}}class vI{constructor(t){this.groupSystems={category:{},floor:{}},this._fragments=t}dispose(){this.groupSystems={}}add(t,e){for(const n in e){this.groupSystems[n]||(this.groupSystems[n]={});const i=this.groupSystems[n],r=e[n];for(const e in r)i[e]||(i[e]={}),i[e][t]=r[e]}}setVisibility(t,e,n){const i=this.groupSystems[t][e];for(const r in i){const t=this._fragments.list[r],e=i[r];t.setVisibility(e,n)}}remove(t){for(const e in this.groupSystems){const n=this.groupSystems[e];for(const e in n){delete n[e][t]}}}get(t){const e={};for(const n in t){const i=t[n],r=this.groupSystems[n][i];if(r)for(const t in r)e[t]||(e[t]=[]),e[t].push(...r[t])}return e}}class TI{constructor(t){this.edgesList={},this.edgesToUpdate=new Set,this.threshold=80,this._mat4=new ch,this._dummy=new Fh,this._pos=[],this._rot=[],this._scl=[],this.lineMat=new Of({color:5592405,onBeforeCompile:t=>{t.vertexShader="\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ".concat(t.vertexShader,"\n").replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n")}}),this.disposer=new _T,this._components=t}dispose(){for(const t in this.edgesList){const e=this.edgesList[t];this.disposer.dispose(e,!0)}this.lineMat.dispose(),this.edgesList={},this.edgesToUpdate.clear()}generate(t){if(this.edgesList[t.id]){const e=this.edgesList[t.id];e.removeFromParent(),e.geometry.dispose(),e.geometry=null,delete this.edgesList[t.id]}this.getInstanceTransforms(t);const e=new im(t.mesh.geometry,this.threshold),n=(new ay).copy(e);n.instanceCount=1/0,this.setAttributes(n);const i=new zf(n,this.lineMat);i.frustumCulled=!1;return this._components.scene.get().add(i),this.edgesList[t.id]=i,this.updateInstancedEdges(t,n),i.visible=!1,i}updateInstancedEdges(t,e){for(let n=0;n<t.mesh.count;n++)t.mesh.getMatrixAt(n,this._mat4),this._mat4.decompose(this._dummy.position,this._dummy.quaternion,this._dummy.scale),this.linesTRS(n,this._dummy,e)}setAttributes(t){t.setAttribute("instT",new wf(new Float32Array(this._pos),3)),t.setAttribute("instR",new wf(new Float32Array(this._rot),4)),t.setAttribute("instS",new wf(new Float32Array(this._scl),3)),this._pos.length=0,this._rot.length=0,this._scl.length=0}getInstanceTransforms(t){for(let e=0;e<t.mesh.count;e++)t.getInstance(e,this._dummy.matrix),this._dummy.updateMatrix(),this._pos.push(this._dummy.position.x,this._dummy.position.y,this._dummy.position.z),this._rot.push(this._dummy.quaternion.x,this._dummy.quaternion.y,this._dummy.quaternion.z,this._dummy.quaternion.w),this._scl.push(this._dummy.scale.x,this._dummy.scale.y,this._dummy.scale.z)}linesTRS(t,e,n){n.attributes.instT.setXYZ(t,e.position.x,e.position.y,e.position.z),n.attributes.instT.needsUpdate=!0,n.attributes.instR.setXYZW(t,e.quaternion.x,e.quaternion.y,e.quaternion.z,e.quaternion.w),n.attributes.instR.needsUpdate=!0,n.attributes.instS.setXYZ(t,e.scale.x,e.scale.y,e.scale.z),n.attributes.instS.needsUpdate=!0}}class EI{constructor(t){this.fragments=t,this.originals={},this.materials=new Set}dispose(){for(const t of this.materials)t.dispose();this.materials.clear()}apply(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(this.fragments.list);this.materials.add(t);for(const n of e){const e=this.fragments.list[n];this.save(e),e.mesh.material=t}}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.fragments.list);for(const e of t){const t=this.fragments.list[e],n=this.originals[e];n&&(t.mesh.material=n)}}save(t){this.originals[t.id]||(this.originals[t.id]=t.mesh.material)}}class xI{constructor(){this.properties={},this.fragmentGuid=new Map}dispose(){this.properties={},this.fragmentGuid.clear()}add(t){const e=Object.values(t).find((t=>"IFCPROJECT"===t.type)).GlobalId;return this.properties[e]=t,e}assign(t,e){this.fragmentGuid.set(e,t)}getItemsOfType(t,e){const n=this.properties[t];return Object.values(n).filter((t=>t.type===e))}get(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)throw new Error("This fragment has no properties assigned.");const i=this.properties[t][e],r=i.expressID;return n&&this.getPropertySets(t,r,i),i}getPropertySets(t,e,n){this.getItemsOfType(t,"IFCRELDEFINESBYPROPERTIES");const i=this.getPsetDefinition(t,e),r=this.properties[t];for(const s of i)s.HasProperties&&(s.HasProperties=s.HasProperties.map((t=>r[t]))),s.Quantities&&(s.Quantities=s.Quantities.map((t=>r[t])));n.psets=i}getPsetDefinition(t,e){const n=this.getItemsOfType(t,"IFCRELDEFINESBYPROPERTIES").filter((t=>t.RelatedObjects.includes(e))),i=this.properties[t];return n.map((t=>i[t.RelatingPropertyDefinition]))}}class II{constructor(t){this.props=t,this.relAggregates="IFCRELAGGREGATES",this.relSpatial="IFCRELCONTAINEDINSPATIALSTRUCTURE"}generate(t){const e={expressID:this.props.getItemsOfType(t,"IFCPROJECT")[0].expressID,type:"IFCPROJECT",children:[]},n=this.props.getItemsOfType(t,this.relAggregates),i=this.props.getItemsOfType(t,this.relSpatial);return this.constructSpatialNode(t,e,n,i),e}constructSpatialNode(t,e,n,i){const r=i.filter((t=>t.RelatingStructure===e.expressID)),s=n.filter((t=>t.RelatingObject===e.expressID)),o=[];for(const c of r)o.push(...c.RelatedElements);const a=[];for(const c of s)a.push(...c.RelatedObjects);const l=[...o,...a],h=[];for(let c=0;c<l.length;c++){const e=l[c],r=this.props.get(t,e.toString()),s={expressID:r.expressID,type:r.type,children:[]};this.constructSpatialNode(t,s,n,i),h.push(s)}e.children=h}}var bI="/index.js",wI=Object.defineProperty,SI=Object.getOwnPropertySymbols,AI=Object.prototype.hasOwnProperty,CI=Object.prototype.propertyIsEnumerable,RI=(t,e,n)=>e in t?wI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DI=(t,e)=>{for(var n in e||(e={}))AI.call(e,n)&&RI(t,n,e[n]);if(SI)for(var n of SI(e))CI.call(e,n)&&RI(t,n,e[n]);return t},OI=t=>n(5073)(t),NI=(t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports},MI=(t,e,n)=>new Promise(((i,r)=>{var s=t=>{try{a(n.next(t))}catch(C8){r(C8)}},o=t=>{try{a(n.throw(t))}catch(C8){r(C8)}},a=t=>t.done?i(t.value):Promise.resolve(t.value).then(s,o);a((n=n.apply(t,e)).next())})),PI=NI({"(disabled):crypto"(){}}),FI=NI({"dist/web-ifc-mt.js"(t,e){var i=function(){var t="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return t=t||bI,function(e){function i(){return k.buffer!=Z&&pt(k.buffer),K}function r(){return k.buffer!=Z&&pt(k.buffer),Q}function s(){return k.buffer!=Z&&pt(k.buffer),J}function o(){return k.buffer!=Z&&pt(k.buffer),$}function a(){return k.buffer!=Z&&pt(k.buffer),tt}function l(){return k.buffer!=Z&&pt(k.buffer),et}function h(){return k.buffer!=Z&&pt(k.buffer),it}var c,u,p="undefined"!==typeof(e=e||{})?e:{};p.ready=new Promise((function(t,e){c=t,u=e}));var d,f={};for(d in p)p.hasOwnProperty(d)&&(f[d]=p[d]);var m,g,y,_,v,T=[],E="./this.program",x=function(t,e){throw e},I="object"===typeof window,b="function"===typeof importScripts,w="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,S=p.ENVIRONMENT_IS_PTHREAD||!1,A="";function C(t){return p.locateFile?p.locateFile(t,A):A+t}if(w){var R;A=b?OI("path").dirname(A)+"/":"//",m=function(t,e){return _||(_=OI("fs")),v||(v=OI("path")),t=v.normalize(t),_.readFileSync(t,e?null:"utf8")},y=function(t){var e=m(t,!0);return e.buffer||(e=new Uint8Array(e)),G(e.buffer),e},g=function(t,e,n){_||(_=OI("fs")),v||(v=OI("path")),t=v.normalize(t),_.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))},process.argv.length>1&&(E=process.argv[1].replace(/\\/g,"/")),T=process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Bi))throw t})),process.on("unhandledRejection",Dt),x=function(t,e){if(Et())throw process.exitCode=t,e;process.exit(t)},p.inspect=function(){return"[Emscripten Module object]"};try{R=OI("worker_threads")}catch(C8){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),C8}n.g.Worker=R.Worker}else(I||b)&&(b?A=self.location.href:"undefined"!==typeof document&&document.currentScript&&(A=document.currentScript.src),t&&(A=t),A=0!==A.indexOf("blob:")?A.substr(0,A.lastIndexOf("/")+1):"",w?(m=function(t,e){return _||(_=OI("fs")),v||(v=OI("path")),t=v.normalize(t),_.readFileSync(t,e?null:"utf8")},y=function(t){var e=m(t,!0);return e.buffer||(e=new Uint8Array(e)),G(e.buffer),e},g=function(t,e,n){_||(_=OI("fs")),v||(v=OI("path")),t=v.normalize(t),_.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))}):(m=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},b&&(y=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),g=function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)}),function(t){document.title=t});w&&"undefined"===typeof performance&&(n.g.performance=OI("perf_hooks").performance);var D=p.print||console.log.bind(console),O=p.printErr||console.warn.bind(console);for(d in f)f.hasOwnProperty(d)&&(p[d]=f[d]);f=null,p.arguments&&(T=p.arguments),p.thisProgram&&(E=p.thisProgram),p.quit&&(x=p.quit);var N=16;function M(t){M.shown||(M.shown={}),M.shown[t]||(M.shown[t]=1,O(t))}var P,F=0,L=function(t){F=t};Atomics.load,Atomics.store,Atomics.compareExchange;p.wasmBinary&&(P=p.wasmBinary);var k,U,B=p.noExitRuntime||!0;"object"!==typeof WebAssembly&&Dt("no native wasm support detected");var z=!1;function G(t,e){t||Dt("Assertion failed: "+e)}function H(t){var e=new TextDecoder(t);this.decode=function(t){return t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode.call(e,t)}}var V="undefined"!==typeof TextDecoder?new H("utf8"):void 0;function j(t,e,n){for(var i=(e>>>=0)+n,r=e;t[r>>>0]&&!(r>=i);)++r;if(r-e>16&&t.subarray&&V)return V.decode(t.subarray(e>>>0,r>>>0));for(var s="";e<r;){var o=t[e++>>>0];if(128&o){var a=63&t[e++>>>0];if(192!=(224&o)){var l=63&t[e++>>>0];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&t[e++>>>0])<65536)s+=String.fromCharCode(o);else{var h=o-65536;s+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function W(t,e){return(t>>>=0)?j(r(),t,e):""}function Y(t,e,n,i){if(!(i>0))return 0;for(var r=n>>>=0,s=n+i-1,o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o);if(a<=127){if(n>=s)break;e[n++>>>0]=a}else if(a<=2047){if(n+1>=s)break;e[n++>>>0]=192|a>>6,e[n++>>>0]=128|63&a}else if(a<=65535){if(n+2>=s)break;e[n++>>>0]=224|a>>12,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}else{if(n+3>=s)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-r}function q(t,e,n){return Y(t,r(),e,n)}function X(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),i<=127?++e:e+=i<=2047?2:i<=65535?3:4}return e}var Z,K,Q,J,$,tt,et,nt,it,rt="undefined"!==typeof TextDecoder?new H("utf-16le"):void 0;function st(t,e){for(var n=t,i=n>>1,a=i+e/2;!(i>=a)&&o()[i>>>0];)++i;if((n=i<<1)-t>32&&rt)return rt.decode(r().subarray(t>>>0,n>>>0));for(var l="",h=0;!(h>=e/2);++h){var c=s()[t+2*h>>>1];if(0==c)break;l+=String.fromCharCode(c)}return l}function ot(t,e,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var i=e,r=(n-=2)<2*t.length?n/2:t.length,o=0;o<r;++o){var a=t.charCodeAt(o);s()[e>>>1]=a,e+=2}return s()[e>>>1]=0,e-i}function at(t){return 2*t.length}function lt(t,e){for(var n=0,i="";!(n>=e/4);){var r=a()[t+4*n>>>2];if(0==r)break;if(++n,r>=65536){var s=r-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}else i+=String.fromCharCode(r)}return i}function ht(t,e,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var i=e>>>=0,r=i+n-4,s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s);if(a()[e>>>2]=o,(e+=4)+4>r)break}return a()[e>>>2]=0,e-i}function ct(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&++n,e+=4}return e}function ut(t,e){return t%e>0&&(t+=e-t%e),t}function pt(t){Z=t,p.HEAP8=K=new Int8Array(t),p.HEAP16=J=new Int16Array(t),p.HEAP32=tt=new Int32Array(t),p.HEAPU8=Q=new Uint8Array(t),p.HEAPU16=$=new Uint16Array(t),p.HEAPU32=et=new Uint32Array(t),p.HEAPF32=nt=new Float32Array(t),p.HEAPF64=it=new Float64Array(t)}S&&(Z=p.buffer);var dt,ft=p.INITIAL_MEMORY||16777216;if(S)k=p.wasmMemory,Z=p.buffer;else if(p.wasmMemory)k=p.wasmMemory;else if(!((k=new WebAssembly.Memory({initial:ft/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw O("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");k&&(Z=k.buffer),ft=Z.byteLength,pt(Z);var mt=[],gt=[],yt=[],_t=[],vt=[],Tt=0;function Et(){return B||Tt>0}function xt(){!0,S||(p.noFSInit||ee.init.initialized||ee.init(),ee.ignorePermissions=!1,Jt.init(),Bt(gt))}function It(t){mt.unshift(t)}function bt(t){vt.unshift(t)}var wt=0,St=null,At=null;function Ct(t){wt++,p.monitorRunDependencies&&p.monitorRunDependencies(wt)}function Rt(t){if(wt--,p.monitorRunDependencies&&p.monitorRunDependencies(wt),0==wt&&(null!==St&&(clearInterval(St),St=null),At)){var e=At;At=null,e()}}function Dt(t){p.onAbort&&p.onAbort(t),S&&console.error("Pthread aborting at "+(new Error).stack),O(t+=""),z=!0,1,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw u(e),e}p.preloadedImages={},p.preloadedAudios={};var Ot,Nt,Mt,Pt="data:application/octet-stream;base64,";function Ft(t){return t.startsWith(Pt)}function Lt(t){return t.startsWith("file://")}function kt(t){try{if(t==Ot&&P)return new Uint8Array(P);if(y)return y(t);throw"both async and sync fetching of the wasm failed"}catch(e){Dt(e)}}Ft(Ot="web-ifc-mt.wasm")||(Ot=C(Ot));var Ut={56684:function(){throw"Canceled!"},56702:function(t,e){setTimeout((function(){_i(t,e)}),0)}};function Bt(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"===typeof n?void 0===e.arg?dt.get(n)():dt.get(n)(e.arg):n(void 0===e.arg?null:e.arg)}else e(p)}}function zt(t,e){if(t<=0||t>i().length||!0&t||e<0)return-28;if(0==e)return 0;e>=2147483647&&(e=1/0);var n=Atomics.load(a(),Ui>>2),r=0;if(n==t&&(Atomics.compareExchange(a(),Ui>>2,n,0)==n&&(r=1,--e<=0)))return 1;var s=Atomics.notify(a(),t>>2,e);if(s>=0)return s+r;throw"Atomics.notify returned an unexpected value "+s}p._emscripten_futex_wake=zt;var Gt,Ht={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],initMainThreadBlock:function(){for(var t=navigator.hardwareConcurrency,e=0;e<t;++e)Ht.allocateUnusedWorker()},initRuntime:function(){for(var t=fi(228),e=0;e<57;++e)l()[t/4+e>>>0]=0;a()[t+12>>>2]=t;var n=t+152;a()[n>>>2]=n;var i=fi(512);for(e=0;e<128;++e)l()[i/4+e>>>0]=0;Atomics.store(l(),t+100>>2,i),Atomics.store(l(),t+40>>2,t),Ii(t,!b,1),yi(t)},initWorker:function(){},pthreads:{},threadExitHandlers:[],runExitHandlers:function(){for(;Ht.threadExitHandlers.length>0;)Ht.threadExitHandlers.pop()();Ai()},runExitHandlersAndDeinitThread:function(t,e){Atomics.store(l(),t+56>>2,1),Atomics.store(l(),t+60>>2,0),Ht.runExitHandlers(),Atomics.store(l(),t+4>>2,e),Atomics.store(l(),t+0>>2,1),zt(t+0,2147483647),Ii(0,0,0)},setExitStatus:function(t){t},threadExit:function(t){var e=Si();e&&(Ht.runExitHandlersAndDeinitThread(e,t),S&&postMessage({cmd:"exit"}))},threadCancel:function(){Ht.runExitHandlersAndDeinitThread(Si(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var t in Ht.pthreads){(i=Ht.pthreads[t])&&i.worker&&Ht.returnWorkerToPool(i.worker)}Ht.pthreads={};for(var e=0;e<Ht.unusedWorkers.length;++e){(n=Ht.unusedWorkers[e]).terminate()}Ht.unusedWorkers=[];for(e=0;e<Ht.runningWorkers.length;++e){var n,i=(n=Ht.runningWorkers[e]).pthread;Ht.freeThreadData(i),n.terminate()}Ht.runningWorkers=[]},freeThreadData:function(t){if(t){if(t.threadInfoStruct){var e=a()[t.threadInfoStruct+100>>>2];a()[t.threadInfoStruct+100>>>2]=0,mi(e),mi(t.threadInfoStruct)}t.threadInfoStruct=0,t.allocatedOwnStack&&t.stackBase&&mi(t.stackBase),t.stackBase=0,t.worker&&(t.worker.pthread=null)}},returnWorkerToPool:function(t){Ht.runWithoutMainThreadQueuedCalls((function(){delete Ht.pthreads[t.pthread.threadInfoStruct],Ht.unusedWorkers.push(t),Ht.runningWorkers.splice(Ht.runningWorkers.indexOf(t),1),Ht.freeThreadData(t.pthread),t.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(t){a()[ki>>>2]=0;try{t()}finally{a()[ki>>>2]=1}},receiveObjectTransfer:function(t){},threadInit:function(){for(var t in Ht.tlsInitFunctions)Ht.tlsInitFunctions[t]()},loadWasmModuleToWorker:function(e,n){e.onmessage=function(t){var i=t.data,r=i.cmd;if(e.pthread&&(Ht.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),i.targetThread&&i.targetThread!=Si()){var s=Ht.pthreads[i.targetThread];return s?s.worker.postMessage(t.data,i.transferList):console.error('Internal error! Worker sent a message "'+r+'" to target pthread '+i.targetThread+", but that thread no longer exists!"),void(Ht.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===r)Ti();else if("spawnThread"===r)$n(t.data);else if("cleanupThread"===r)!function(t){if(S)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!t)throw"Internal Error! Null pthread_ptr in cleanupThread!";var e=Ht.pthreads[t];if(e){a()[t+12>>>2]=0;var n=e.worker;Ht.returnWorkerToPool(n)}}(i.thread);else if("killThread"===r)!function(t){if(S)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!t)throw"Internal Error! Null pthread_ptr in killThread!";a()[t+12>>>2]=0;var e=Ht.pthreads[t];e.worker.terminate(),Ht.freeThreadData(e),Ht.runningWorkers.splice(Ht.runningWorkers.indexOf(e.worker),1),e.worker.pthread=void 0}(i.thread);else if("cancelThread"===r)!function(t){if(S)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!t)throw"Internal Error! Null pthread_ptr in cancelThread!";Ht.pthreads[t].worker.postMessage({cmd:"cancel"})}(i.thread);else if("loaded"===r)e.loaded=!0,n&&n(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===r)D("Thread "+i.threadId+": "+i.text);else if("printErr"===r)O("Thread "+i.threadId+": "+i.text);else if("alert"===r)alert("Thread "+i.threadId+": "+i.text);else if("exit"===r){e.pthread&&Atomics.load(l(),e.pthread.threadInfoStruct+64>>2)&&Ht.returnWorkerToPool(e)}else if("exitProcess"===r)try{Gi(i.returnCode)}catch(o){if(o instanceof Bi)return;throw o}else"cancelDone"===r?Ht.returnWorkerToPool(e):"objectTransfer"===r?Ht.receiveObjectTransfer(t.data):"setimmediate"===t.data.target?e.postMessage(t.data):O("worker sent an unknown command "+r);Ht.currentProxiedOperationCallerThread=void 0},e.onerror=function(t){O("pthread sent an error! "+t.filename+":"+t.lineno+": "+t.message)},w&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("exit",(function(t){}))),e.postMessage({cmd:"load",urlOrBlob:p.mainScriptUrlOrBlob||t,wasmMemory:k,wasmModule:U})},allocateUnusedWorker:function(){var t=C("web-ifc-mt.worker.js");Ht.unusedWorkers.push(new Worker(t))},getNewWorker:function(){return 0==Ht.unusedWorkers.length&&(Ht.allocateUnusedWorker(),Ht.loadWasmModuleToWorker(Ht.unusedWorkers[0])),Ht.unusedWorkers.pop()},busySpinWait:function(t){for(var e=performance.now()+t;performance.now()<e;);}};p.establishStackSpace=function(t,e){Oi(t,e),Ri(t)},p.invokeEntryPoint=function(t,e){return dt.get(t)(e)},Gt=w?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:S?function(){return performance.now()-p.__performance_now_clock_drift}:function(){return performance.now()};function Vt(t){return a()[wi()>>>2]=t,t}function jt(t){this.excPtr=t,this.ptr=t-16,this.set_type=function(t){a()[this.ptr+4>>>2]=t},this.get_type=function(){return a()[this.ptr+4>>>2]},this.set_destructor=function(t){a()[this.ptr+8>>>2]=t},this.get_destructor=function(){return a()[this.ptr+8>>>2]},this.set_refcount=function(t){a()[this.ptr>>>2]=t},this.set_caught=function(t){t=t?1:0,i()[this.ptr+12>>>0]=t},this.get_caught=function(){return 0!=i()[this.ptr+12>>>0]},this.set_rethrown=function(t){t=t?1:0,i()[this.ptr+13>>>0]=t},this.get_rethrown=function(){return 0!=i()[this.ptr+13>>>0]},this.init=function(t,e){this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Atomics.add(a(),this.ptr+0>>2,1)},this.release_ref=function(){return 1===Atomics.sub(a(),this.ptr+0>>2,1)}}function Wt(t){this.free=function(){mi(this.ptr),this.ptr=0},this.set_base_ptr=function(t){a()[this.ptr>>>2]=t},this.get_base_ptr=function(){return a()[this.ptr>>>2]},this.set_adjusted_ptr=function(t){a()[this.ptr+4>>>2]=t},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return a()[this.ptr+4>>>2]},this.get_exception_ptr=function(){if(Pi(this.get_exception_info().get_type()))return a()[this.get_base_ptr()>>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.get_base_ptr()},this.get_exception_info=function(){return new jt(this.get_base_ptr())},void 0===t?(this.ptr=fi(8),this.set_adjusted_ptr(0)):this.ptr=t}var Yt=[];var qt=0;var Xt=0;function Zt(t){return mi(new jt(t).ptr)}var Kt={splitPath:function(t){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1)},normalizeArray:function(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},normalize:function(t){var e="/"===t.charAt(0),n="/"===t.substr(-1);return t=Kt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=Kt.splitPath(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},basename:function(t){if("/"===t)return"/";var e=(t=(t=Kt.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},extname:function(t){return Kt.splitPath(t)[3]},join:function(){var t=Array.prototype.slice.call(arguments,0);return Kt.normalize(t.join("/"))},join2:function(t,e){return Kt.normalize(t+"/"+e)}};var Qt={resolve:function(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:ee.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t,e="/"===i.charAt(0)}return t=Kt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),(e?"/":"")+t||"."},relative:function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=Qt.resolve(t).substr(1),e=Qt.resolve(e).substr(1);for(var i=n(t.split("/")),r=n(e.split("/")),s=Math.min(i.length,r.length),o=s,a=0;a<s;a++)if(i[a]!==r[a]){o=a;break}var l=[];for(a=o;a<i.length;a++)l.push("..");return(l=l.concat(r.slice(o))).join("/")}},Jt={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){Jt.ttys[t]={input:[],output:[],ops:e},ee.registerDevice(t,Jt.stream_ops)},stream_ops:{open:function(t){var e=Jt.ttys[t.node.rdev];if(!e)throw new ee.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.get_char)throw new ee.ErrnoError(60);for(var s=0,o=0;o<i;o++){var a;try{a=t.tty.ops.get_char(t.tty)}catch(C8){throw new ee.ErrnoError(29)}if(void 0===a&&0===s)throw new ee.ErrnoError(6);if(null===a||void 0===a)break;s++,e[n+o]=a}return s&&(t.node.timestamp=Date.now()),s},write:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.put_char)throw new ee.ErrnoError(60);try{for(var s=0;s<i;s++)t.tty.ops.put_char(t.tty,e[n+s])}catch(C8){throw new ee.ErrnoError(29)}return i&&(t.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if(w){var n=Buffer.alloc(256),i=0;try{i=_.readSync(process.stdin.fd,n,0,256,null)}catch(C8){if(!C8.toString().includes("EOF"))throw C8;i=0}e=i>0?n.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n");if(!e)return null;t.input=ui(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(D(j(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(D(j(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(O(j(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(O(j(t.output,0)),t.output=[])}}};function $t(t){t=function(t,e){return e||(e=N),Math.ceil(t/e)*e}(t,65536);var e=Fi(65536,t);return e?(function(t,e){r().fill(0,t,t+e)}(e,t),e):0}var te={ops_table:null,mount:function(t){return te.createNode(null,"/",16895,0)},createNode:function(t,e,n,i){if(ee.isBlkdev(n)||ee.isFIFO(n))throw new ee.ErrnoError(63);te.ops_table||(te.ops_table={dir:{node:{getattr:te.node_ops.getattr,setattr:te.node_ops.setattr,lookup:te.node_ops.lookup,mknod:te.node_ops.mknod,rename:te.node_ops.rename,unlink:te.node_ops.unlink,rmdir:te.node_ops.rmdir,readdir:te.node_ops.readdir,symlink:te.node_ops.symlink},stream:{llseek:te.stream_ops.llseek}},file:{node:{getattr:te.node_ops.getattr,setattr:te.node_ops.setattr},stream:{llseek:te.stream_ops.llseek,read:te.stream_ops.read,write:te.stream_ops.write,allocate:te.stream_ops.allocate,mmap:te.stream_ops.mmap,msync:te.stream_ops.msync}},link:{node:{getattr:te.node_ops.getattr,setattr:te.node_ops.setattr,readlink:te.node_ops.readlink},stream:{}},chrdev:{node:{getattr:te.node_ops.getattr,setattr:te.node_ops.setattr},stream:ee.chrdev_stream_ops}});var r=ee.createNode(t,e,n,i);return ee.isDir(r.mode)?(r.node_ops=te.ops_table.dir.node,r.stream_ops=te.ops_table.dir.stream,r.contents={}):ee.isFile(r.mode)?(r.node_ops=te.ops_table.file.node,r.stream_ops=te.ops_table.file.stream,r.usedBytes=0,r.contents=null):ee.isLink(r.mode)?(r.node_ops=te.ops_table.link.node,r.stream_ops=te.ops_table.link.stream):ee.isChrdev(r.mode)&&(r.node_ops=te.ops_table.chrdev.node,r.stream_ops=te.ops_table.chrdev.stream),r.timestamp=Date.now(),t&&(t.contents[e]=r,t.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){e>>>=0;var n=t.contents?t.contents.length:0;if(!(n>=e)){e=Math.max(e,n*(n<1048576?2:1.125)>>>0),0!=n&&(e=Math.max(e,256));var i=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(i.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(e>>>=0,t.usedBytes!=e)if(0==e)t.contents=null,t.usedBytes=0;else{var n=t.contents;t.contents=new Uint8Array(e),n&&t.contents.set(n.subarray(0,Math.min(e,t.usedBytes))),t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=ee.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,ee.isDir(t.mode)?e.size=4096:ee.isFile(t.mode)?e.size=t.usedBytes:ee.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&te.resizeFileStorage(t,e.size)},lookup:function(t,e){throw ee.genericErrors[44]},mknod:function(t,e,n,i){return te.createNode(t,e,n,i)},rename:function(t,e,n){if(ee.isDir(t.mode)){var i;try{i=ee.lookupNode(e,n)}catch(C8){}if(i)for(var r in i.contents)throw new ee.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=n,e.contents[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.contents[e],t.timestamp=Date.now()},rmdir:function(t,e){var n=ee.lookupNode(t,e);for(var i in n.contents)throw new ee.ErrnoError(55);delete t.contents[e],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."];for(var n in t.contents)t.contents.hasOwnProperty(n)&&e.push(n);return e},symlink:function(t,e,n){var i=te.createNode(t,e,41471,0);return i.link=n,i},readlink:function(t){if(!ee.isLink(t.mode))throw new ee.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,n,i,r){var s=t.node.contents;if(r>=t.node.usedBytes)return 0;var o=Math.min(t.node.usedBytes-r,i);if(o>8&&s.subarray)e.set(s.subarray(r,r+o),n);else for(var a=0;a<o;a++)e[n+a]=s[r+a];return o},write:function(t,e,n,r,s,o){if(e.buffer===i().buffer&&(o=!1),!r)return 0;var a=t.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=e.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===s)return a.contents=e.slice(n,n+r),a.usedBytes=r,r;if(s+r<=a.usedBytes)return a.contents.set(e.subarray(n,n+r),s),r}if(te.expandFileStorage(a,s+r),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(n,n+r),s);else for(var l=0;l<r;l++)a.contents[s+l]=e[n+l];return a.usedBytes=Math.max(a.usedBytes,s+r),r},llseek:function(t,e,n){var i=e;if(1===n?i+=t.position:2===n&&ee.isFile(t.node.mode)&&(i+=t.node.usedBytes),i<0)throw new ee.ErrnoError(28);return i},allocate:function(t,e,n){te.expandFileStorage(t.node,e+n),t.node.usedBytes=Math.max(t.node.usedBytes,e+n)},mmap:function(t,e,n,r,s,o){if(0!==e)throw new ee.ErrnoError(28);if(!ee.isFile(t.node.mode))throw new ee.ErrnoError(43);var a,l,h=t.node.contents;if(2&o||h.buffer!==Z){if((r>0||r+n<h.length)&&(h=h.subarray?h.subarray(r,r+n):Array.prototype.slice.call(h,r,r+n)),l=!0,!(a=$t(n)))throw new ee.ErrnoError(48);a>>>=0,i().set(h,a>>>0)}else l=!1,a=h.byteOffset;return{ptr:a,allocated:l}},msync:function(t,e,n,i,r){if(!ee.isFile(t.node.mode))throw new ee.ErrnoError(43);if(2&r)return 0;te.stream_ops.write(t,e,0,i,n,!1);return 0}}};var ee={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,e){if(e=e||{},!(t=Qt.resolve(ee.cwd(),t)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var i in n)void 0===e[i]&&(e[i]=n[i]);if(e.recurse_count>8)throw new ee.ErrnoError(32);for(var r=Kt.normalizeArray(t.split("/").filter((function(t){return!!t})),!1),s=ee.root,o="/",a=0;a<r.length;a++){var l=a===r.length-1;if(l&&e.parent)break;if(s=ee.lookupNode(s,r[a]),o=Kt.join2(o,r[a]),ee.isMountpoint(s)&&(!l||l&&e.follow_mount)&&(s=s.mounted.root),!l||e.follow)for(var h=0;ee.isLink(s.mode);){var c=ee.readlink(o);if(o=Qt.resolve(Kt.dirname(o),c),s=ee.lookupPath(o,{recurse_count:e.recurse_count}).node,h++>40)throw new ee.ErrnoError(32)}}return{path:o,node:s}},getPath:function(t){for(var e;;){if(ee.isRoot(t)){var n=t.mount.mountpoint;return e?"/"!==n[n.length-1]?n+"/"+e:n+e:n}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,e){for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)|0;return(t+n>>>0)%ee.nameTable.length},hashAddNode:function(t){var e=ee.hashName(t.parent.id,t.name);t.name_next=ee.nameTable[e],ee.nameTable[e]=t},hashRemoveNode:function(t){var e=ee.hashName(t.parent.id,t.name);if(ee.nameTable[e]===t)ee.nameTable[e]=t.name_next;else for(var n=ee.nameTable[e];n;){if(n.name_next===t){n.name_next=t.name_next;break}n=n.name_next}},lookupNode:function(t,e){var n=ee.mayLookup(t);if(n)throw new ee.ErrnoError(n,t);for(var i=ee.hashName(t.id,e),r=ee.nameTable[i];r;r=r.name_next){var s=r.name;if(r.parent.id===t.id&&s===e)return r}return ee.lookup(t,e)},createNode:function(t,e,n,i){var r=new ee.FSNode(t,e,n,i);return ee.hashAddNode(r),r},destroyNode:function(t){ee.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return 32768===(61440&t)},isDir:function(t){return 16384===(61440&t)},isLink:function(t){return 40960===(61440&t)},isChrdev:function(t){return 8192===(61440&t)},isBlkdev:function(t){return 24576===(61440&t)},isFIFO:function(t){return 4096===(61440&t)},isSocket:function(t){return 49152===(49152&t)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=ee.flagModes[t];if("undefined"===typeof e)throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:function(t,e){return ee.ignorePermissions||(!e.includes("r")||292&t.mode)&&(!e.includes("w")||146&t.mode)&&(!e.includes("x")||73&t.mode)?0:2},mayLookup:function(t){var e=ee.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,e){try{ee.lookupNode(t,e);return 20}catch(C8){}return ee.nodePermissions(t,"wx")},mayDelete:function(t,e,n){var i;try{i=ee.lookupNode(t,e)}catch(C8){return C8.errno}var r=ee.nodePermissions(t,"wx");if(r)return r;if(n){if(!ee.isDir(i.mode))return 54;if(ee.isRoot(i)||ee.getPath(i)===ee.cwd())return 10}else if(ee.isDir(i.mode))return 31;return 0},mayOpen:function(t,e){return t?ee.isLink(t.mode)?32:ee.isDir(t.mode)&&("r"!==ee.flagsToPermissionString(e)||512&e)?31:ee.nodePermissions(t,ee.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd:function(t,e){t=t||0,e=e||ee.MAX_OPEN_FDS;for(var n=t;n<=e;n++)if(!ee.streams[n])return n;throw new ee.ErrnoError(33)},getStream:function(t){return ee.streams[t]},createStream:function(t,e,n){ee.FSStream||(ee.FSStream=function(){},ee.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var i=new ee.FSStream;for(var r in t)i[r]=t[r];t=i;var s=ee.nextfd(e,n);return t.fd=s,ee.streams[s]=t,t},closeStream:function(t){ee.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=ee.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new ee.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return 255&t},makedev:function(t,e){return t<<8|e},registerDevice:function(t,e){ee.devices[t]={stream_ops:e}},getDevice:function(t){return ee.devices[t]},getMounts:function(t){for(var e=[],n=[t];n.length;){var i=n.pop();e.push(i),n.push.apply(n,i.mounts)}return e},syncfs:function(t,e){"function"===typeof t&&(e=t,t=!1),ee.syncFSRequests++,ee.syncFSRequests>1&&O("warning: "+ee.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ee.getMounts(ee.root.mount),i=0;function r(t){return ee.syncFSRequests--,e(t)}function s(t){if(t)return s.errored?void 0:(s.errored=!0,r(t));++i>=n.length&&r(null)}n.forEach((function(e){if(!e.type.syncfs)return s(null);e.type.syncfs(e,t,s)}))},mount:function(t,e,n){var i,r="/"===n,s=!n;if(r&&ee.root)throw new ee.ErrnoError(10);if(!r&&!s){var o=ee.lookupPath(n,{follow_mount:!1});if(n=o.path,i=o.node,ee.isMountpoint(i))throw new ee.ErrnoError(10);if(!ee.isDir(i.mode))throw new ee.ErrnoError(54)}var a={type:t,opts:e,mountpoint:n,mounts:[]},l=t.mount(a);return l.mount=a,a.root=l,r?ee.root=l:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),l},unmount:function(t){var e=ee.lookupPath(t,{follow_mount:!1});if(!ee.isMountpoint(e.node))throw new ee.ErrnoError(28);var n=e.node,i=n.mounted,r=ee.getMounts(i);Object.keys(ee.nameTable).forEach((function(t){for(var e=ee.nameTable[t];e;){var n=e.name_next;r.includes(e.mount)&&ee.destroyNode(e),e=n}})),n.mounted=null;var s=n.mount.mounts.indexOf(i);n.mount.mounts.splice(s,1)},lookup:function(t,e){return t.node_ops.lookup(t,e)},mknod:function(t,e,n){var i=ee.lookupPath(t,{parent:!0}).node,r=Kt.basename(t);if(!r||"."===r||".."===r)throw new ee.ErrnoError(28);var s=ee.mayCreate(i,r);if(s)throw new ee.ErrnoError(s);if(!i.node_ops.mknod)throw new ee.ErrnoError(63);return i.node_ops.mknod(i,r,e,n)},create:function(t,e){return e=void 0!==e?e:438,e&=4095,e|=32768,ee.mknod(t,e,0)},mkdir:function(t,e){return e=void 0!==e?e:511,e&=1023,e|=16384,ee.mknod(t,e,0)},mkdirTree:function(t,e){for(var n=t.split("/"),i="",r=0;r<n.length;++r)if(n[r]){i+="/"+n[r];try{ee.mkdir(i,e)}catch(C8){if(20!=C8.errno)throw C8}}},mkdev:function(t,e,n){return"undefined"===typeof n&&(n=e,e=438),e|=8192,ee.mknod(t,e,n)},symlink:function(t,e){if(!Qt.resolve(t))throw new ee.ErrnoError(44);var n=ee.lookupPath(e,{parent:!0}).node;if(!n)throw new ee.ErrnoError(44);var i=Kt.basename(e),r=ee.mayCreate(n,i);if(r)throw new ee.ErrnoError(r);if(!n.node_ops.symlink)throw new ee.ErrnoError(63);return n.node_ops.symlink(n,i,t)},rename:function(t,e){var n,i,r=Kt.dirname(t),s=Kt.dirname(e),o=Kt.basename(t),a=Kt.basename(e);if(n=ee.lookupPath(t,{parent:!0}).node,i=ee.lookupPath(e,{parent:!0}).node,!n||!i)throw new ee.ErrnoError(44);if(n.mount!==i.mount)throw new ee.ErrnoError(75);var l,h=ee.lookupNode(n,o),c=Qt.relative(t,s);if("."!==c.charAt(0))throw new ee.ErrnoError(28);if("."!==(c=Qt.relative(e,r)).charAt(0))throw new ee.ErrnoError(55);try{l=ee.lookupNode(i,a)}catch(C8){}if(h!==l){var u=ee.isDir(h.mode),p=ee.mayDelete(n,o,u);if(p)throw new ee.ErrnoError(p);if(p=l?ee.mayDelete(i,a,u):ee.mayCreate(i,a))throw new ee.ErrnoError(p);if(!n.node_ops.rename)throw new ee.ErrnoError(63);if(ee.isMountpoint(h)||l&&ee.isMountpoint(l))throw new ee.ErrnoError(10);if(i!==n&&(p=ee.nodePermissions(n,"w")))throw new ee.ErrnoError(p);try{ee.trackingDelegate.willMovePath&&ee.trackingDelegate.willMovePath(t,e)}catch(C8){O("FS.trackingDelegate['willMovePath']('"+t+"', '"+e+"') threw an exception: "+C8.message)}ee.hashRemoveNode(h);try{n.node_ops.rename(h,i,a)}catch(C8){throw C8}finally{ee.hashAddNode(h)}try{ee.trackingDelegate.onMovePath&&ee.trackingDelegate.onMovePath(t,e)}catch(C8){O("FS.trackingDelegate['onMovePath']('"+t+"', '"+e+"') threw an exception: "+C8.message)}}},rmdir:function(t){var e=ee.lookupPath(t,{parent:!0}).node,n=Kt.basename(t),i=ee.lookupNode(e,n),r=ee.mayDelete(e,n,!0);if(r)throw new ee.ErrnoError(r);if(!e.node_ops.rmdir)throw new ee.ErrnoError(63);if(ee.isMountpoint(i))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath&&ee.trackingDelegate.willDeletePath(t)}catch(C8){O("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+C8.message)}e.node_ops.rmdir(e,n),ee.destroyNode(i);try{ee.trackingDelegate.onDeletePath&&ee.trackingDelegate.onDeletePath(t)}catch(C8){O("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+C8.message)}},readdir:function(t){var e=ee.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new ee.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(t){var e=ee.lookupPath(t,{parent:!0}).node,n=Kt.basename(t),i=ee.lookupNode(e,n),r=ee.mayDelete(e,n,!1);if(r)throw new ee.ErrnoError(r);if(!e.node_ops.unlink)throw new ee.ErrnoError(63);if(ee.isMountpoint(i))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath&&ee.trackingDelegate.willDeletePath(t)}catch(C8){O("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+C8.message)}e.node_ops.unlink(e,n),ee.destroyNode(i);try{ee.trackingDelegate.onDeletePath&&ee.trackingDelegate.onDeletePath(t)}catch(C8){O("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+C8.message)}},readlink:function(t){var e=ee.lookupPath(t).node;if(!e)throw new ee.ErrnoError(44);if(!e.node_ops.readlink)throw new ee.ErrnoError(28);return Qt.resolve(ee.getPath(e.parent),e.node_ops.readlink(e))},stat:function(t,e){var n=ee.lookupPath(t,{follow:!e}).node;if(!n)throw new ee.ErrnoError(44);if(!n.node_ops.getattr)throw new ee.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(t){return ee.stat(t,!0)},chmod:function(t,e,n){var i;"string"===typeof t?i=ee.lookupPath(t,{follow:!n}).node:i=t;if(!i.node_ops.setattr)throw new ee.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&e|-4096&i.mode,timestamp:Date.now()})},lchmod:function(t,e){ee.chmod(t,e,!0)},fchmod:function(t,e){var n=ee.getStream(t);if(!n)throw new ee.ErrnoError(8);ee.chmod(n.node,e)},chown:function(t,e,n,i){var r;"string"===typeof t?r=ee.lookupPath(t,{follow:!i}).node:r=t;if(!r.node_ops.setattr)throw new ee.ErrnoError(63);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:function(t,e,n){ee.chown(t,e,n,!0)},fchown:function(t,e,n){var i=ee.getStream(t);if(!i)throw new ee.ErrnoError(8);ee.chown(i.node,e,n)},truncate:function(t,e){if(e<0)throw new ee.ErrnoError(28);var n;"string"===typeof t?n=ee.lookupPath(t,{follow:!0}).node:n=t;if(!n.node_ops.setattr)throw new ee.ErrnoError(63);if(ee.isDir(n.mode))throw new ee.ErrnoError(31);if(!ee.isFile(n.mode))throw new ee.ErrnoError(28);var i=ee.nodePermissions(n,"w");if(i)throw new ee.ErrnoError(i);n.node_ops.setattr(n,{size:e,timestamp:Date.now()})},ftruncate:function(t,e){var n=ee.getStream(t);if(!n)throw new ee.ErrnoError(8);if(0===(2097155&n.flags))throw new ee.ErrnoError(28);ee.truncate(n.node,e)},utime:function(t,e,n){var i=ee.lookupPath(t,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(e,n)})},open:function(t,e,n,i,r){if(""===t)throw new ee.ErrnoError(44);var s;if(n="undefined"===typeof n?438:n,n=64&(e="string"===typeof e?ee.modeStringToFlags(e):e)?4095&n|32768:0,"object"===typeof t)s=t;else{t=Kt.normalize(t);try{s=ee.lookupPath(t,{follow:!(131072&e)}).node}catch(C8){}}var o=!1;if(64&e)if(s){if(128&e)throw new ee.ErrnoError(20)}else s=ee.mknod(t,n,0),o=!0;if(!s)throw new ee.ErrnoError(44);if(ee.isChrdev(s.mode)&&(e&=-513),65536&e&&!ee.isDir(s.mode))throw new ee.ErrnoError(54);if(!o){var a=ee.mayOpen(s,e);if(a)throw new ee.ErrnoError(a)}512&e&&ee.truncate(s,0),e&=-131713;var l=ee.createStream({node:s,path:ee.getPath(s),flags:e,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1},i,r);l.stream_ops.open&&l.stream_ops.open(l),!p.logReadFiles||1&e||(ee.readFiles||(ee.readFiles={}),t in ee.readFiles||(ee.readFiles[t]=1,O("FS.trackingDelegate error on read file: "+t)));try{if(ee.trackingDelegate.onOpenFile){var h=0;1!==(2097155&e)&&(h|=ee.tracking.openFlags.READ),0!==(2097155&e)&&(h|=ee.tracking.openFlags.WRITE),ee.trackingDelegate.onOpenFile(t,h)}}catch(C8){O("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+C8.message)}return l},close:function(t){if(ee.isClosed(t))throw new ee.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(C8){throw C8}finally{ee.closeStream(t.fd)}t.fd=null},isClosed:function(t){return null===t.fd},llseek:function(t,e,n){if(ee.isClosed(t))throw new ee.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new ee.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ee.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,n),t.ungotten=[],t.position},read:function(t,e,n,i,r){if(n>>>=0,i<0||r<0)throw new ee.ErrnoError(28);if(ee.isClosed(t))throw new ee.ErrnoError(8);if(1===(2097155&t.flags))throw new ee.ErrnoError(8);if(ee.isDir(t.node.mode))throw new ee.ErrnoError(31);if(!t.stream_ops.read)throw new ee.ErrnoError(28);var s="undefined"!==typeof r;if(s){if(!t.seekable)throw new ee.ErrnoError(70)}else r=t.position;var o=t.stream_ops.read(t,e,n,i,r);return s||(t.position+=o),o},write:function(t,e,n,i,r,s){if(n>>>=0,i<0||r<0)throw new ee.ErrnoError(28);if(ee.isClosed(t))throw new ee.ErrnoError(8);if(0===(2097155&t.flags))throw new ee.ErrnoError(8);if(ee.isDir(t.node.mode))throw new ee.ErrnoError(31);if(!t.stream_ops.write)throw new ee.ErrnoError(28);t.seekable&&1024&t.flags&&ee.llseek(t,0,2);var o="undefined"!==typeof r;if(o){if(!t.seekable)throw new ee.ErrnoError(70)}else r=t.position;var a=t.stream_ops.write(t,e,n,i,r,s);o||(t.position+=a);try{t.path&&ee.trackingDelegate.onWriteToFile&&ee.trackingDelegate.onWriteToFile(t.path)}catch(C8){O("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+C8.message)}return a},allocate:function(t,e,n){if(ee.isClosed(t))throw new ee.ErrnoError(8);if(e<0||n<=0)throw new ee.ErrnoError(28);if(0===(2097155&t.flags))throw new ee.ErrnoError(8);if(!ee.isFile(t.node.mode)&&!ee.isDir(t.node.mode))throw new ee.ErrnoError(43);if(!t.stream_ops.allocate)throw new ee.ErrnoError(138);t.stream_ops.allocate(t,e,n)},mmap:function(t,e,n,i,r,s){if(e>>>=0,0!==(2&r)&&0===(2&s)&&2!==(2097155&t.flags))throw new ee.ErrnoError(2);if(1===(2097155&t.flags))throw new ee.ErrnoError(2);if(!t.stream_ops.mmap)throw new ee.ErrnoError(43);return t.stream_ops.mmap(t,e,n,i,r,s)},msync:function(t,e,n,i,r){return n>>>=0,t&&t.stream_ops.msync?t.stream_ops.msync(t,e,n,i,r):0},munmap:function(t){return 0},ioctl:function(t,e,n){if(!t.stream_ops.ioctl)throw new ee.ErrnoError(59);return t.stream_ops.ioctl(t,e,n)},readFile:function(t,e){if((e=e||{}).flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error('Invalid encoding type "'+e.encoding+'"');var n,i=ee.open(t,e.flags),r=ee.stat(t).size,s=new Uint8Array(r);return ee.read(i,s,0,r,0),"utf8"===e.encoding?n=j(s,0):"binary"===e.encoding&&(n=s),ee.close(i),n},writeFile:function(t,e,n){(n=n||{}).flags=n.flags||577;var i=ee.open(t,n.flags,n.mode);if("string"===typeof e){var r=new Uint8Array(X(e)+1),s=Y(e,r,0,r.length);ee.write(i,r,0,s,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");ee.write(i,e,0,e.byteLength,void 0,n.canOwn)}ee.close(i)},cwd:function(){return ee.currentPath},chdir:function(t){var e=ee.lookupPath(t,{follow:!0});if(null===e.node)throw new ee.ErrnoError(44);if(!ee.isDir(e.node.mode))throw new ee.ErrnoError(54);var n=ee.nodePermissions(e.node,"x");if(n)throw new ee.ErrnoError(n);ee.currentPath=e.path},createDefaultDirectories:function(){ee.mkdir("/tmp"),ee.mkdir("/home"),ee.mkdir("/home/web_user")},createDefaultDevices:function(){ee.mkdir("/dev"),ee.registerDevice(ee.makedev(1,3),{read:function(){return 0},write:function(t,e,n,i,r){return i}}),ee.mkdev("/dev/null",ee.makedev(1,3)),Jt.register(ee.makedev(5,0),Jt.default_tty_ops),Jt.register(ee.makedev(6,0),Jt.default_tty1_ops),ee.mkdev("/dev/tty",ee.makedev(5,0)),ee.mkdev("/dev/tty1",ee.makedev(6,0));var t=function(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(w)try{var e=PI();return function(){return e.randomBytes(1)[0]}}catch(C8){}return function(){Dt("randomDevice")}}();ee.createDevice("/dev","random",t),ee.createDevice("/dev","urandom",t),ee.mkdir("/dev/shm"),ee.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ee.mkdir("/proc");var t=ee.mkdir("/proc/self");ee.mkdir("/proc/self/fd"),ee.mount({mount:function(){var e=ee.createNode(t,"fd",16895,73);return e.node_ops={lookup:function(t,e){var n=+e,i=ee.getStream(n);if(!i)throw new ee.ErrnoError(8);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return i.path}}};return r.parent=r,r}},e}},{},"/proc/self/fd")},createStandardStreams:function(){p.stdin?ee.createDevice("/dev","stdin",p.stdin):ee.symlink("/dev/tty","/dev/stdin"),p.stdout?ee.createDevice("/dev","stdout",null,p.stdout):ee.symlink("/dev/tty","/dev/stdout"),p.stderr?ee.createDevice("/dev","stderr",null,p.stderr):ee.symlink("/dev/tty1","/dev/stderr");ee.open("/dev/stdin",0),ee.open("/dev/stdout",1),ee.open("/dev/stderr",1)},ensureErrnoError:function(){ee.ErrnoError||(ee.ErrnoError=function(t,e){this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},ee.ErrnoError.prototype=new Error,ee.ErrnoError.prototype.constructor=ee.ErrnoError,[44].forEach((function(t){ee.genericErrors[t]=new ee.ErrnoError(t),ee.genericErrors[t].stack="<generic error, no stack>"})))},staticInit:function(){ee.ensureErrnoError(),ee.nameTable=new Array(4096),ee.mount(te,{},"/"),ee.createDefaultDirectories(),ee.createDefaultDevices(),ee.createSpecialDirectories(),ee.filesystems={MEMFS:te}},init:function(t,e,n){ee.init.initialized=!0,ee.ensureErrnoError(),p.stdin=t||p.stdin,p.stdout=e||p.stdout,p.stderr=n||p.stderr,ee.createStandardStreams()},quit:function(){ee.init.initialized=!1;var t=p._fflush;t&&t(0);for(var e=0;e<ee.streams.length;e++){var n=ee.streams[e];n&&ee.close(n)}},getMode:function(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n},findObject:function(t,e){var n=ee.analyzePath(t,e);return n.exists?n.object:null},analyzePath:function(t,e){try{t=(i=ee.lookupPath(t,{follow:!e})).path}catch(C8){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=ee.lookupPath(t,{parent:!0});n.parentExists=!0,n.parentPath=i.path,n.parentObject=i.node,n.name=Kt.basename(t),i=ee.lookupPath(t,{follow:!e}),n.exists=!0,n.path=i.path,n.object=i.node,n.name=i.node.name,n.isRoot="/"===i.path}catch(C8){n.error=C8.errno}return n},createPath:function(t,e,n,i){t="string"===typeof t?t:ee.getPath(t);for(var r=e.split("/").reverse();r.length;){var s=r.pop();if(s){var o=Kt.join2(t,s);try{ee.mkdir(o)}catch(C8){}t=o}}return o},createFile:function(t,e,n,i,r){var s=Kt.join2("string"===typeof t?t:ee.getPath(t),e),o=ee.getMode(i,r);return ee.create(s,o)},createDataFile:function(t,e,n,i,r,s){var o=e?Kt.join2("string"===typeof t?t:ee.getPath(t),e):t,a=ee.getMode(i,r),l=ee.create(o,a);if(n){if("string"===typeof n){for(var h=new Array(n.length),c=0,u=n.length;c<u;++c)h[c]=n.charCodeAt(c);n=h}ee.chmod(l,146|a);var p=ee.open(l,577);ee.write(p,n,0,n.length,0,s),ee.close(p),ee.chmod(l,a)}return l},createDevice:function(t,e,n,i){var r=Kt.join2("string"===typeof t?t:ee.getPath(t),e),s=ee.getMode(!!n,!!i);ee.createDevice.major||(ee.createDevice.major=64);var o=ee.makedev(ee.createDevice.major++,0);return ee.registerDevice(o,{open:function(t){t.seekable=!1},close:function(t){i&&i.buffer&&i.buffer.length&&i(10)},read:function(t,e,i,r,s){for(var o=0,a=0;a<r;a++){var l;try{l=n()}catch(C8){throw new ee.ErrnoError(29)}if(void 0===l&&0===o)throw new ee.ErrnoError(6);if(null===l||void 0===l)break;o++,e[i+a]=l}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,r,s){for(var o=0;o<r;o++)try{i(e[n+o])}catch(C8){throw new ee.ErrnoError(29)}return r&&(t.node.timestamp=Date.now()),o}}),ee.mkdev(r,s,o)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!m)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=ui(m(t.url),!0),t.usedBytes=t.contents.length}catch(C8){throw new ee.ErrnoError(29)}},createLazyFile:function(t,e,n,i,r){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,n=t/this.chunkSize|0;return this.getter(n)[e]}},s.prototype.setDataGetter=function(t){this.getter=t},s.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",n,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+n+". Status: "+t.status);var e,i=Number(t.getResponseHeader("Content-length")),r=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,s=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,o=1048576;r||(o=i);var a=this;a.setDataGetter((function(t){var e=t*o,r=(t+1)*o-1;if(r=Math.min(r,i-1),"undefined"===typeof a.chunks[t]&&(a.chunks[t]=function(t,e){if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>i-1)throw new Error("only "+i+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",n,!1),i!==o&&r.setRequestHeader("Range","bytes="+t+"-"+e),"undefined"!=typeof Uint8Array&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(r.status>=200&&r.status<300||304===r.status))throw new Error("Couldn't load "+n+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):ui(r.responseText||"",!0)}(e,r)),"undefined"===typeof a.chunks[t])throw new Error("doXHR failed!");return a.chunks[t]})),!s&&i||(o=i=1,i=this.getter(0).length,o=i,D("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=o,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!b)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new s;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:n};var l=ee.createFile(t,e,a,i,r);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var h={};return Object.keys(l.stream_ops).forEach((function(t){var e=l.stream_ops[t];h[t]=function(){return ee.forceLoadFile(l),e.apply(null,arguments)}})),h.read=function(t,e,n,i,r){ee.forceLoadFile(l);var s=t.node.contents;if(r>=s.length)return 0;var o=Math.min(s.length-r,i);if(s.slice)for(var a=0;a<o;a++)e[n+a]=s[r+a];else for(a=0;a<o;a++)e[n+a]=s.get(r+a);return o},l.stream_ops=h,l},createPreloadedFile:function(t,e,n,i,r,s,o,a,l,h){Browser.init();var c=e?Qt.resolve(Kt.join2(t,e)):t;function u(n){function u(n){h&&h(),a||ee.createDataFile(t,e,n,i,r,l),s&&s(),Rt()}var d=!1;p.preloadPlugins.forEach((function(t){d||t.canHandle(c)&&(t.handle(n,c,u,(function(){o&&o(),Rt()})),d=!0)})),d||u(n)}Ct(),"string"==typeof n?function(t,e,n,i){var r=i?"":"al "+t;g(t,(function(n){G(n,'Loading data file "'+t+'" failed (no arrayBuffer).'),e(new Uint8Array(n)),r&&Rt()}),(function(e){if(!n)throw'Loading data file "'+t+'" failed.';n()})),r&&Ct()}(n,(function(t){u(t)}),o):u(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=ee.indexedDB();try{var r=i.open(ee.DB_NAME(),ee.DB_VERSION)}catch(C8){return n(C8)}r.onupgradeneeded=function(){D("creating db"),r.result.createObjectStore(ee.DB_STORE_NAME)},r.onsuccess=function(){var i=r.result.transaction([ee.DB_STORE_NAME],"readwrite"),s=i.objectStore(ee.DB_STORE_NAME),o=0,a=0,l=t.length;function h(){0==a?e():n()}t.forEach((function(t){var e=s.put(ee.analyzePath(t).object.contents,t);e.onsuccess=function(){++o+a==l&&h()},e.onerror=function(){a++,o+a==l&&h()}})),i.onerror=n},r.onerror=n},loadFilesFromDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=ee.indexedDB();try{var r=i.open(ee.DB_NAME(),ee.DB_VERSION)}catch(C8){return n(C8)}r.onupgradeneeded=n,r.onsuccess=function(){var i=r.result;try{var s=i.transaction([ee.DB_STORE_NAME],"readonly")}catch(C8){return void n(C8)}var o=s.objectStore(ee.DB_STORE_NAME),a=0,l=0,h=t.length;function c(){0==l?e():n()}t.forEach((function(t){var e=o.get(t);e.onsuccess=function(){ee.analyzePath(t).exists&&ee.unlink(t),ee.createDataFile(Kt.dirname(t),Kt.basename(t),e.result,!0,!0,!0),++a+l==h&&c()},e.onerror=function(){l++,a+l==h&&c()}})),s.onerror=n},r.onerror=n}},ne={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(t,e,n){if("/"===e[0])return e;var i;if(-100===t)i=ee.cwd();else{var r=ee.getStream(t);if(!r)throw new ee.ErrnoError(8);i=r.path}if(0==e.length){if(!n)throw new ee.ErrnoError(44);return i}return Kt.join2(i,e)},doStat:function(t,e,n){try{var i=t(e)}catch(C8){if(C8&&C8.node&&Kt.normalize(e)!==Kt.normalize(ee.getPath(C8.node)))return-54;throw C8}return a()[n>>>2]=i.dev,a()[n+4>>>2]=0,a()[n+8>>>2]=i.ino,a()[n+12>>>2]=i.mode,a()[n+16>>>2]=i.nlink,a()[n+20>>>2]=i.uid,a()[n+24>>>2]=i.gid,a()[n+28>>>2]=i.rdev,a()[n+32>>>2]=0,Mt=[i.size>>>0,(Nt=i.size,+Math.abs(Nt)>=1?Nt>0?(0|Math.min(+Math.floor(Nt/4294967296),4294967295))>>>0:~~+Math.ceil((Nt-+(~~Nt>>>0))/4294967296)>>>0:0)],a()[n+40>>>2]=Mt[0],a()[n+44>>>2]=Mt[1],a()[n+48>>>2]=4096,a()[n+52>>>2]=i.blocks,a()[n+56>>>2]=i.atime.getTime()/1e3|0,a()[n+60>>>2]=0,a()[n+64>>>2]=i.mtime.getTime()/1e3|0,a()[n+68>>>2]=0,a()[n+72>>>2]=i.ctime.getTime()/1e3|0,a()[n+76>>>2]=0,Mt=[i.ino>>>0,(Nt=i.ino,+Math.abs(Nt)>=1?Nt>0?(0|Math.min(+Math.floor(Nt/4294967296),4294967295))>>>0:~~+Math.ceil((Nt-+(~~Nt>>>0))/4294967296)>>>0:0)],a()[n+80>>>2]=Mt[0],a()[n+84>>>2]=Mt[1],0},doMsync:function(t,e,n,i,s){var o=r().slice(t,t+n);ee.msync(e,o,s,n,i)},doMkdir:function(t,e){return"/"===(t=Kt.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),ee.mkdir(t,e,0),0},doMknod:function(t,e,n){switch(61440&e){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ee.mknod(t,e,n),0},doReadlink:function(t,e,n){if(n<=0)return-28;var r=ee.readlink(t),s=Math.min(n,X(r)),o=i()[e+s>>>0];return q(r,e,n+1),i()[e+s>>>0]=o,s},doAccess:function(t,e){if(-8&e)return-28;var n;if(!(n=ee.lookupPath(t,{follow:!0}).node))return-44;var i="";return 4&e&&(i+="r"),2&e&&(i+="w"),1&e&&(i+="x"),i&&ee.nodePermissions(n,i)?-2:0},doDup:function(t,e,n){var i=ee.getStream(n);return i&&ee.close(i),ee.open(t,e,0,n,n).fd},doReadv:function(t,e,n,r){for(var s=0,o=0;o<n;o++){var l=a()[e+8*o>>>2],h=a()[e+(8*o+4)>>>2],c=ee.read(t,i(),l,h,r);if(c<0)return-1;if(s+=c,c<h)break}return s},doWritev:function(t,e,n,r){for(var s=0,o=0;o<n;o++){var l=a()[e+8*o>>>2],h=a()[e+(8*o+4)>>>2],c=ee.write(t,i(),l,h,r);if(c<0)return-1;s+=c}return s},varargs:void 0,get:function(){return ne.varargs+=4,a()[ne.varargs-4>>>2]},getStr:function(t){return W(t)},getStreamFromFD:function(t){var e=ee.getStream(t);if(!e)throw new ee.ErrnoError(8);return e},get64:function(t,e){return t}};function ie(t,e,n){if(S)return Mn(2,1,t,e,n);ne.varargs=n;try{var i=ne.getStreamFromFD(t);switch(e){case 0:return(r=ne.get())<0?-28:ee.open(i.path,i.flags,0,r).fd;case 1:case 2:case 13:case 14:return 0;case 3:return i.flags;case 4:var r=ne.get();return i.flags|=r,0;case 12:r=ne.get();return s()[r+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return Vt(28),-1}}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),-C8.errno}}function re(t,e,n){if(S)return Mn(3,1,t,e,n);ne.varargs=n;try{var i=ne.getStreamFromFD(t);switch(e){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return i.tty?0:-59;case 21519:if(!i.tty)return-59;var r=ne.get();return a()[r>>>2]=0,0;case 21520:return i.tty?-28:-59;case 21531:r=ne.get();return ee.ioctl(i,e,r);default:Dt("bad ioctl syscall "+e)}}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),-C8.errno}}function se(t,e,n){if(S)return Mn(4,1,t,e,n);ne.varargs=n;try{var i=ne.getStr(t),r=n?ne.get():0;return ee.open(i,e,r).fd}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),-C8.errno}}var oe={};function ae(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function le(t){return this.fromWireType(l()[t>>>2])}var he={},ce={},ue={},pe=48,de=57;function fe(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=pe&&e<=de?"_"+t:t}function me(t,e){return t=fe(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function ge(t,e){var n=me(e,(function(t){this.name=e,this.message=t;var n=new Error(t).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var ye=void 0;function _e(t){throw new ye(t)}function ve(t,e,n){function i(e){var i=n(e);i.length!==t.length&&_e("Mismatched type converter count");for(var r=0;r<t.length;++r)Se(t[r],i[r])}t.forEach((function(t){ue[t]=e}));var r=new Array(e.length),s=[],o=0;e.forEach((function(t,e){ce.hasOwnProperty(t)?r[e]=ce[t]:(s.push(t),he.hasOwnProperty(t)||(he[t]=[]),he[t].push((function(){r[e]=ce[t],++o===s.length&&i(r)})))})),0===s.length&&i(r)}var Te={};function Ee(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var xe=void 0;function Ie(t){for(var e="",n=t;r()[n>>>0];)e+=xe[r()[n++>>>0]];return e}var be=void 0;function we(t){throw new be(t)}function Se(t,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=e.name;if(t||we('type "'+i+'" must have a positive integer typeid pointer'),ce.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;we("Cannot register type '"+i+"' twice")}if(ce[t]=e,delete ue[t],he.hasOwnProperty(t)){var r=he[t];delete he[t],r.forEach((function(t){t()}))}}function Ae(t){if(!(this instanceof Ge))return!1;if(!(t instanceof Ge))return!1;for(var e=this.$$.ptrType.registeredClass,n=this.$$.ptr,i=t.$$.ptrType.registeredClass,r=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return e===i&&n===r}function Ce(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function Re(t){we(t.$$.ptrType.registeredClass.name+" instance already deleted")}var De=!1;function Oe(t){}function Ne(t){t.count.value-=1,0===t.count.value&&function(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}(t)}function Me(t){return"undefined"===typeof FinalizationGroup?(Me=function(t){return t},t):(De=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var n=e.value;n.ptr?Ne(n):console.warn("object already deleted: "+n.ptr)}})),Oe=function(t){De.unregister(t.$$)},(Me=function(t){return De.register(t,t.$$,t.$$),t})(t))}function Pe(){if(this.$$.ptr||Re(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Me(Object.create(Object.getPrototypeOf(this),{$$:{value:Ce(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Fe(){this.$$.ptr||Re(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&we("Object already scheduled for deletion"),Oe(this),Ne(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Le(){return!this.$$.ptr}var ke=void 0,Ue=[];function Be(){for(;Ue.length;){var t=Ue.pop();t.$$.deleteScheduled=!1,t.delete()}}function ze(){return this.$$.ptr||Re(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&we("Object already scheduled for deletion"),Ue.push(this),1===Ue.length&&ke&&ke(Be),this.$$.deleteScheduled=!0,this}function Ge(){}var He={};function Ve(t,e,n){if(void 0===t[e].overloadTable){var i=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||we("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[i.argCount]=i}}function je(t,e,n){p.hasOwnProperty(t)?((void 0===n||void 0!==p[t].overloadTable&&void 0!==p[t].overloadTable[n])&&we("Cannot register public name '"+t+"' twice"),Ve(p,t,t),p.hasOwnProperty(n)&&we("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),p[t].overloadTable[n]=e):(p[t]=e,void 0!==n&&(p[t].numArguments=n))}function We(t,e,n,i,r,s,o,a){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=r,this.getActualType=s,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function Ye(t,e,n){for(;e!==n;)e.upcast||we("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function qe(t,e){if(null===e)return this.isReference&&we("null is not a valid "+this.name),0;e.$$||we('Cannot pass "'+wn(e)+'" as a '+this.name),e.$$.ptr||we("Cannot pass deleted object as a pointer of type "+this.name);var n=e.$$.ptrType.registeredClass;return Ye(e.$$.ptr,n,this.registeredClass)}function Xe(t,e){var n;if(null===e)return this.isReference&&we("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,n),n):0;e.$$||we('Cannot pass "'+wn(e)+'" as a '+this.name),e.$$.ptr||we("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&we("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var i=e.$$.ptrType.registeredClass;if(n=Ye(e.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&we("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:we("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var r=e.clone();n=this.rawShare(n,xn((function(){r.delete()}))),null!==t&&t.push(this.rawDestructor,n)}break;default:we("Unsupporting sharing policy")}return n}function Ze(t,e){if(null===e)return this.isReference&&we("null is not a valid "+this.name),0;e.$$||we('Cannot pass "'+wn(e)+'" as a '+this.name),e.$$.ptr||we("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&we("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;return Ye(e.$$.ptr,n,this.registeredClass)}function Ke(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function Qe(t){this.rawDestructor&&this.rawDestructor(t)}function Je(t){null!==t&&t.delete()}function $e(t,e,n){if(e===n)return t;if(void 0===n.baseClass)return null;var i=$e(t,e,n.baseClass);return null===i?null:n.downcast(i)}function tn(){return Object.keys(rn).length}function en(){var t=[];for(var e in rn)rn.hasOwnProperty(e)&&t.push(rn[e]);return t}function nn(t){ke=t,Ue.length&&ke&&ke(Be)}var rn={};function sn(t,e){return e=function(t,e){for(void 0===e&&we("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),rn[e]}function on(t,e){return e.ptrType&&e.ptr||_e("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!==!!e.smartPtr&&_e("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Me(Object.create(t,{$$:{value:e}}))}function an(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var n=sn(this.registeredClass,e);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=e,n.$$.smartPtr=t,n.clone();var i=n.clone();return this.destructor(t),i}function r(){return this.isSmartPointer?on(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):on(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var s,o=this.registeredClass.getActualType(e),a=He[o];if(!a)return r.call(this);s=this.isConst?a.constPointerType:a.pointerType;var l=$e(e,this.registeredClass,s.registeredClass);return null===l?r.call(this):this.isSmartPointer?on(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:t}):on(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function ln(t,e,n,i,r,s,o,a,l,h,c){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=i,this.isSmartPointer=r,this.pointeeType=s,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=h,this.rawDestructor=c,r||void 0!==e.baseClass?this.toWireType=Xe:i?(this.toWireType=qe,this.destructorFunction=null):(this.toWireType=Ze,this.destructorFunction=null)}function hn(t,e,n){p.hasOwnProperty(t)||_e("Replacing nonexistant public symbol"),void 0!==p[t].overloadTable&&void 0!==n?p[t].overloadTable[n]=e:(p[t]=e,p[t].argCount=n)}function cn(t,e,n){return t.includes("j")?function(t,e,n){var i=p["dynCall_"+t];return n&&n.length?i.apply(null,[e].concat(n)):i.call(null,e)}(t,e,n):dt.get(e).apply(null,n)}function un(t,e){var n=(t=Ie(t)).includes("j")?function(t,e){var n=[];return function(){n.length=arguments.length;for(var i=0;i<arguments.length;i++)n[i]=arguments[i];return cn(t,e,n)}}(t,e):dt.get(e);return"function"!==typeof n&&we("unknown function pointer with signature "+t+": "+e),n}var pn=void 0;function dn(t){var e=gi(t),n=Ie(e);return mi(e),n}function fn(t,e){var n=[],i={};throw e.forEach((function t(e){i[e]||ce[e]||(ue[e]?ue[e].forEach(t):(n.push(e),i[e]=!0))})),new pn(t+": "+n.map(dn).join([", "]))}function mn(t,e){for(var n=[],i=0;i<t;i++)n.push(a()[(e>>2)+i>>>0]);return n}function gn(t,e,n,i,r){var s=e.length;s<2&&we("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==e[1]&&null!==n,a=!1,l=1;l<e.length;++l)if(null!==e[l]&&void 0===e[l].destructorFunction){a=!0;break}var h="void"!==e[0].name,c="",u="";for(l=0;l<s-2;++l)c+=(0!==l?", ":"")+"arg"+l,u+=(0!==l?", ":"")+"arg"+l+"Wired";var p="return function "+fe(t)+"("+c+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n";a&&(p+="var destructors = [];\n");var d=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[we,i,r,ae,e[0],e[1]];o&&(p+="var thisWired = classParam.toWireType("+d+", this);\n");for(l=0;l<s-2;++l)p+="var arg"+l+"Wired = argType"+l+".toWireType("+d+", arg"+l+"); // "+e[l+2].name+"\n",f.push("argType"+l),m.push(e[l+2]);if(o&&(u="thisWired"+(u.length>0?", ":"")+u),p+=(h?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",a)p+="runDestructors(destructors);\n";else for(l=o?1:2;l<e.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==e[l].destructorFunction&&(p+=g+"_dtor("+g+"); // "+e[l].name+"\n",f.push(g+"_dtor"),m.push(e[l].destructorFunction))}h&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",f.push(p);var y=function(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=me(t.name||"unknownFunctionName",(function(){}));n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return r instanceof Object?r:i}(Function,f).apply(null,m);return y}var yn=[],_n=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function vn(t){t>4&&0===--_n[t].refcount&&(_n[t]=void 0,yn.push(t))}function Tn(){for(var t=0,e=5;e<_n.length;++e)void 0!==_n[e]&&++t;return t}function En(){for(var t=5;t<_n.length;++t)if(void 0!==_n[t])return _n[t];return null}function xn(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=yn.length?yn.pop():_n.length;return _n[e]={refcount:1,value:t},e}}function In(t,e,n){switch(e){case 0:return function(t){var e=n?i():r();return this.fromWireType(e[t>>>0])};case 1:return function(t){var e=n?s():o();return this.fromWireType(e[t>>>1])};case 2:return function(t){var e=n?a():l();return this.fromWireType(e[t>>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function bn(t,e){var n=ce[t];return void 0===n&&we(e+" has unknown type "+dn(t)),n}function wn(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function Sn(t,e){switch(e){case 2:return function(t){return this.fromWireType((k.buffer!=Z&&pt(k.buffer),nt)[t>>>2])};case 3:return function(t){return this.fromWireType(h()[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function An(t,e,n){switch(e){case 0:return n?function(t){return i()[t>>>0]}:function(t){return r()[t>>>0]};case 1:return n?function(t){return s()[t>>>1]}:function(t){return o()[t>>>1]};case 2:return n?function(t){return a()[t>>>2]}:function(t){return l()[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Cn(t){return t||we("Cannot use deleted val. handle = "+t),_n[t].value}var Rn={};function Dn(t){var e=Rn[t];return void 0===e?Ie(t):e}function On(){return"object"===typeof globalThis?globalThis:Function("return this")()}var Nn=[];function Mn(t,e){for(var n=arguments.length-2,i=Ci(),r=n,s=Di(8*r),o=s>>3,a=0;a<n;a++){var l=arguments[2+a];h()[o+a>>>0]=l}var c=Ei(t,r,s,e);return Ri(i),c}var Pn=[];function Fn(t){try{return k.grow(t-Z.byteLength+65535>>>16),pt(k.buffer),1}catch(C8){}}var Ln={inEventHandler:0,removeAllEventListeners:function(){for(var t=Ln.eventHandlers.length-1;t>=0;--t)Ln._removeHandler(t);Ln.eventHandlers=[],Ln.deferredCalls=[]},registerRemoveEventListeners:function(){Ln.removeEventListenersRegistered||(_t.push(Ln.removeAllEventListeners),Ln.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(t,e,n){function i(t,e){if(t.length!=e.length)return!1;for(var n in t)if(t[n]!=e[n])return!1;return!0}for(var r in Ln.deferredCalls){var s=Ln.deferredCalls[r];if(s.targetFunction==t&&i(s.argsList,n))return}Ln.deferredCalls.push({targetFunction:t,precedence:e,argsList:n}),Ln.deferredCalls.sort((function(t,e){return t.precedence<e.precedence}))},removeDeferredCalls:function(t){for(var e=0;e<Ln.deferredCalls.length;++e)Ln.deferredCalls[e].targetFunction==t&&(Ln.deferredCalls.splice(e,1),--e)},canPerformEventHandlerRequests:function(){return Ln.inEventHandler&&Ln.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ln.canPerformEventHandlerRequests())for(var t=0;t<Ln.deferredCalls.length;++t){var e=Ln.deferredCalls[t];Ln.deferredCalls.splice(t,1),--t,e.targetFunction.apply(null,e.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(t,e){for(var n=0;n<Ln.eventHandlers.length;++n)Ln.eventHandlers[n].target!=t||e&&e!=Ln.eventHandlers[n].eventTypeString||Ln._removeHandler(n--)},_removeHandler:function(t){var e=Ln.eventHandlers[t];e.target.removeEventListener(e.eventTypeString,e.eventListenerFunc,e.useCapture),Ln.eventHandlers.splice(t,1)},registerOrRemoveHandler:function(t){var e=function(e){++Ln.inEventHandler,Ln.currentEventHandler=t,Ln.runDeferredCalls(),t.handlerFunc(e),Ln.runDeferredCalls(),--Ln.inEventHandler};if(t.callbackfunc)t.eventListenerFunc=e,t.target.addEventListener(t.eventTypeString,e,t.useCapture),Ln.eventHandlers.push(t),Ln.registerRemoveEventListeners();else for(var n=0;n<Ln.eventHandlers.length;++n)Ln.eventHandlers[n].target==t.target&&Ln.eventHandlers[n].eventTypeString==t.eventTypeString&&Ln._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(t,e,n,i,r){var s=Ci(),o=Di(12);a()[o>>>2]=n,a()[o+4>>>2]=i,a()[o+8>>>2]=r,xi(0,t,637534208,e,i,o),Ri(s)},getTargetThreadForEventCallback:function(t){switch(t){case 1:return 0;case 2:return Ht.currentProxiedOperationCallerThread;default:return t}},getNodeNameForTarget:function(t){return t?t==window?"#window":t==screen?"#screen":t&&t.nodeName?t.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function kn(t,e,n,i){var r=Ci(),s=Di(12),o=0;e&&(o=function(t){var e=X(t)+1,n=fi(e);return q(t,n,e),n}(e)),a()[s>>>2]=o,a()[s+4>>>2]=n,a()[s+8>>>2]=i,xi(0,t,657457152,0,o,s),Ri(r)}var Un=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];function Bn(t){var e;return t=(e=t)>2?W(e):e,Un[t]||("undefined"!==typeof document?document.querySelector(t):void 0)}function zn(t){return Bn(t)}function Gn(t,e,n){var i=zn(t);if(!i)return-4;if(i.canvasSharedPtr&&(a()[i.canvasSharedPtr>>>2]=e,a()[i.canvasSharedPtr+4>>>2]=n),!i.offscreenCanvas&&i.controlTransferredOffscreen)return i.canvasSharedPtr?(function(t,e,n,i){kn(t,e=e?W(e):"",n,i)}(a()[i.canvasSharedPtr+8>>>2],t,e,n),1):-4;i.offscreenCanvas&&(i=i.offscreenCanvas);var r=!1;if(i.GLctxObject&&i.GLctxObject.GLctx){var s=i.GLctxObject.GLctx.getParameter(2978);r=0===s[0]&&0===s[1]&&s[2]===i.width&&s[3]===i.height}return i.width=e,i.height=n,r&&i.GLctxObject.GLctx.viewport(0,0,e,n),0}function Hn(t,e,n){return S?Mn(5,1,t,e,n):Gn(t,e,n)}var Vn={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(t){Vn.lastError||(Vn.lastError=t)},getNewId:function(t){for(var e=Vn.counter++,n=t.length;n<e;n++)t[n]=null;return e},getSource:function(t,e,n,i){for(var r="",s=0;s<e;++s){var o=i?a()[i+4*s>>>2]:-1;r+=W(a()[n+4*s>>>2],o<0?void 0:o)}return r},createContext:function(t,e){t.getContextSafariWebGL2Fixed||(t.getContextSafariWebGL2Fixed=t.getContext,t.getContext=function(e,n){var i=t.getContextSafariWebGL2Fixed(e,n);return"webgl"==e==i instanceof WebGLRenderingContext?i:null});var n=t.getContext("webgl",e);return n?Vn.registerContext(n,e):0},registerContext:function(t,e){var n=fi(8);a()[n+4>>>2]=Si();var i={handle:n,attributes:e,version:e.majorVersion,GLctx:t};return t.canvas&&(t.canvas.GLctxObject=i),Vn.contexts[n]=i,("undefined"===typeof e.enableExtensionsByDefault||e.enableExtensionsByDefault)&&Vn.initExtensions(i),n},makeContextCurrent:function(t){return Vn.currentContext=Vn.contexts[t],p.ctx=oi=Vn.currentContext&&Vn.currentContext.GLctx,!(t&&!oi)},getContext:function(t){return Vn.contexts[t]},deleteContext:function(t){Vn.currentContext===Vn.contexts[t]&&(Vn.currentContext=null),"object"===typeof Ln&&Ln.removeAllHandlersOnTarget(Vn.contexts[t].GLctx.canvas),Vn.contexts[t]&&Vn.contexts[t].GLctx.canvas&&(Vn.contexts[t].GLctx.canvas.GLctxObject=void 0),mi(Vn.contexts[t].handle),Vn.contexts[t]=null},initExtensions:function(t){if(t||(t=Vn.currentContext),!t.initExtensionsDone){t.initExtensionsDone=!0;var e,n=t.GLctx;!function(t){var e=t.getExtension("ANGLE_instanced_arrays");if(e)t.vertexAttribDivisor=function(t,n){e.vertexAttribDivisorANGLE(t,n)},t.drawArraysInstanced=function(t,n,i,r){e.drawArraysInstancedANGLE(t,n,i,r)},t.drawElementsInstanced=function(t,n,i,r,s){e.drawElementsInstancedANGLE(t,n,i,r,s)}}(n),function(t){var e=t.getExtension("OES_vertex_array_object");if(e)t.createVertexArray=function(){return e.createVertexArrayOES()},t.deleteVertexArray=function(t){e.deleteVertexArrayOES(t)},t.bindVertexArray=function(t){e.bindVertexArrayOES(t)},t.isVertexArray=function(t){return e.isVertexArrayOES(t)}}(n),function(t){var e=t.getExtension("WEBGL_draw_buffers");if(e)t.drawBuffers=function(t,n){e.drawBuffersWEBGL(t,n)}}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(e=n).multiDrawWebgl=e.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach((function(t){t.includes("lose_context")||t.includes("debug")||n.getExtension(t)}))}}},jn=["default","low-power","high-performance"];var Wn={};function Yn(){if(!Yn.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"};for(var e in Wn)void 0===Wn[e]?delete t[e]:t[e]=Wn[e];var n=[];for(var e in t)n.push(e+"="+t[e]);Yn.strings=n}return Yn.strings}function qn(t,e){if(S)return Mn(6,1,t,e);try{var n=0;return Yn().forEach((function(r,s){var o=e+n;a()[t+4*s>>>2]=o,function(t,e,n){for(var r=0;r<t.length;++r)i()[e++>>>0]=t.charCodeAt(r);n||(i()[e>>>0]=0)}(r,o),n+=r.length+1})),0}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),C8.errno}}function Xn(t,e){if(S)return Mn(7,1,t,e);try{var n=Yn();a()[t>>>2]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),a()[e>>>2]=i,0}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),C8.errno}}function Zn(t){if(S)return Mn(8,1,t);try{var e=ne.getStreamFromFD(t);return ee.close(e),0}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),C8.errno}}function Kn(t,e,n,i){if(S)return Mn(9,1,t,e,n,i);try{var r=ne.getStreamFromFD(t),s=ne.doReadv(r,e,n);return a()[i>>>2]=s,0}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),C8.errno}}function Qn(t,e,n,i,r){if(S)return Mn(10,1,t,e,n,i,r);try{var s=ne.getStreamFromFD(t),o=4294967296*n+(e>>>0),l=9007199254740992;return o<=-l||o>=l?-61:(ee.llseek(s,o,i),Mt=[s.position>>>0,(Nt=s.position,+Math.abs(Nt)>=1?Nt>0?(0|Math.min(+Math.floor(Nt/4294967296),4294967295))>>>0:~~+Math.ceil((Nt-+(~~Nt>>>0))/4294967296)>>>0:0)],a()[r>>>2]=Mt[0],a()[r+4>>>2]=Mt[1],s.getdents&&0===o&&0===i&&(s.getdents=null),0)}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),C8.errno}}function Jn(t,e,n,i){if(S)return Mn(11,1,t,e,n,i);try{var r=ne.getStreamFromFD(t),s=ne.doWritev(r,e,n);return a()[i>>>2]=s,0}catch(C8){return"undefined"!==typeof ee&&C8 instanceof ee.ErrnoError||Dt(C8),C8.errno}}function $n(t){if(S)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var e=Ht.getNewWorker();if(!e)return 6;if(void 0!==e.pthread)throw"Internal error!";if(!t.pthread_ptr)throw"Internal error, no pthread ptr!";Ht.runningWorkers.push(e);for(var n=fi(512),i=0;i<128;++i)a()[n+4*i>>>2]=0;var r=t.stackBase+t.stackSize,s=Ht.pthreads[t.pthread_ptr]={worker:e,stackBase:t.stackBase,stackSize:t.stackSize,allocatedOwnStack:t.allocatedOwnStack,threadInfoStruct:t.pthread_ptr},o=s.threadInfoStruct>>2;Atomics.store(l(),o+16,t.detached),Atomics.store(l(),o+25,n),Atomics.store(l(),o+10,s.threadInfoStruct),Atomics.store(l(),o+20,t.stackSize),Atomics.store(l(),o+19,r),Atomics.store(l(),o+26,t.stackSize),Atomics.store(l(),o+28,r),Atomics.store(l(),o+29,t.detached);var h=bi()+40;Atomics.store(l(),o+43,h),e.pthread=s;var c={cmd:"run",start_routine:t.startRoutine,arg:t.arg,threadInfoStruct:t.pthread_ptr,stackBase:t.stackBase,stackSize:t.stackSize};return e.runPthread=function(){c.time=performance.now(),e.postMessage(c,t.transferList)},e.loaded&&(e.runPthread(),delete e.runPthread),0}function ti(t){return t%4===0&&(t%100!==0||t%400===0)}function ei(t,e){for(var n=0,i=0;i<=e;n+=t[i++]);return n}var ni=[31,29,31,30,31,30,31,31,30,31,30,31],ii=[31,28,31,30,31,30,31,31,30,31,30,31];function ri(t,e){for(var n=new Date(t.getTime());e>0;){var i=ti(n.getFullYear()),r=n.getMonth(),s=(i?ni:ii)[r];if(!(e>s-n.getDate()))return n.setDate(n.getDate()+e),n;e-=s-n.getDate()+1,n.setDate(1),r<11?n.setMonth(r+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function si(t,e,n,r){var s=a()[r+40>>>2],o={tm_sec:a()[r>>>2],tm_min:a()[r+4>>>2],tm_hour:a()[r+8>>>2],tm_mday:a()[r+12>>>2],tm_mon:a()[r+16>>>2],tm_year:a()[r+20>>>2],tm_wday:a()[r+24>>>2],tm_yday:a()[r+28>>>2],tm_isdst:a()[r+32>>>2],tm_gmtoff:a()[r+36>>>2],tm_zone:s?W(s):""},l=W(n),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in h)l=l.replace(new RegExp(c,"g"),h[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(t,e,n){for(var i="number"===typeof t?t.toString():t||"";i.length<e;)i=n[0]+i;return i}function f(t,e){return d(t,e,"0")}function m(t,e){function n(t){return t<0?-1:t>0?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function g(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function y(t){var e=ri(new Date(t.tm_year+1900,0,1),t.tm_yday),n=new Date(e.getFullYear(),0,4),i=new Date(e.getFullYear()+1,0,4),r=g(n),s=g(i);return m(r,e)<=0?m(s,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var _={"%a":function(t){return u[t.tm_wday].substring(0,3)},"%A":function(t){return u[t.tm_wday]},"%b":function(t){return p[t.tm_mon].substring(0,3)},"%B":function(t){return p[t.tm_mon]},"%C":function(t){return f((t.tm_year+1900)/100|0,2)},"%d":function(t){return f(t.tm_mday,2)},"%e":function(t){return d(t.tm_mday,2," ")},"%g":function(t){return y(t).toString().substring(2)},"%G":function(t){return y(t)},"%H":function(t){return f(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),f(e,2)},"%j":function(t){return f(t.tm_mday+ei(ti(t.tm_year+1900)?ni:ii,t.tm_mon-1),3)},"%m":function(t){return f(t.tm_mon+1,2)},"%M":function(t){return f(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return f(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),n=0===e.getDay()?e:ri(e,7-e.getDay()),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(m(n,i)<0){var r=ei(ti(i.getFullYear())?ni:ii,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return f(Math.ceil(s/7),2)}return 0===m(n,e)?"01":"00"},"%V":function(t){var e,n=new Date(t.tm_year+1900,0,4),i=new Date(t.tm_year+1901,0,4),r=g(n),s=g(i),o=ri(new Date(t.tm_year+1900,0,1),t.tm_yday);return m(o,r)<0?"53":m(s,o)<=0?"01":(e=r.getFullYear()<t.tm_year+1900?t.tm_yday+32-r.getDate():t.tm_yday+1-r.getDate(),f(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),n=1===e.getDay()?e:ri(e,0===e.getDay()?1:7-e.getDay()+1),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(m(n,i)<0){var r=ei(ti(i.getFullYear())?ni:ii,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return f(Math.ceil(s/7),2)}return 0===m(n,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,n=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(n?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var c in _)l.includes(c)&&(l=l.replace(new RegExp(c,"g"),_[c](o)));var v,T,E=ui(l,!1);return E.length>e?0:(v=E,T=t,i().set(v,T>>>0),E.length-1)}S||Ht.initMainThreadBlock();var oi,ai=function(t,e,n,i){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=ee.nextInode++,this.name=e,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=i},li=365,hi=146;Object.defineProperties(ai.prototype,{read:{get:function(){return(this.mode&li)===li},set:function(t){t?this.mode|=li:this.mode&=-366}},write:{get:function(){return(this.mode&hi)===hi},set:function(t){t?this.mode|=hi:this.mode&=-147}},isFolder:{get:function(){return ee.isDir(this.mode)}},isDevice:{get:function(){return ee.isChrdev(this.mode)}}}),ee.FSNode=ai,ee.staticInit(),p.FS_createPath=ee.createPath,p.FS_createDataFile=ee.createDataFile,p.FS_createPreloadedFile=ee.createPreloadedFile,p.FS_createLazyFile=ee.createLazyFile,p.FS_createDevice=ee.createDevice,p.FS_unlink=ee.unlink,ye=p.InternalError=ge(Error,"InternalError"),function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);xe=t}(),be=p.BindingError=ge(Error,"BindingError"),Ge.prototype.isAliasOf=Ae,Ge.prototype.clone=Pe,Ge.prototype.delete=Fe,Ge.prototype.isDeleted=Le,Ge.prototype.deleteLater=ze,ln.prototype.getPointee=Ke,ln.prototype.destructor=Qe,ln.prototype.argPackAdvance=8,ln.prototype.readValueFromPointer=le,ln.prototype.deleteObject=Je,ln.prototype.fromWireType=an,p.getInheritedInstanceCount=tn,p.getLiveInheritedInstances=en,p.flushPendingDeletes=Be,p.setDelayFunction=nn,pn=p.UnboundTypeError=ge(Error,"UnboundTypeError"),p.count_emval_handles=Tn,p.get_first_emval=En;var ci=[null,function(t,e){if(S)return Mn(1,1,t,e)},ie,re,se,Hn,qn,Xn,Zn,Kn,Qn,Jn];function ui(t,e,n){var i=n>0?n:X(t)+1,r=new Array(i),s=Y(t,r,0,r.length);return e&&(r.length=s),r}var pi,di={z:function(t,e,n,i){Dt("Assertion failed: "+W(t)+", at: "+[e?W(e):"unknown filename",n,i?W(i):"unknown function"])},n:function(t){return fi(t+16)+16},v:function(t){var e=new Wt(t),n=e.get_exception_info();return n.get_caught()||(n.set_caught(!0),qt--),n.set_rethrown(!1),Yt.push(e),function(t){t.add_ref()}(n),e.get_exception_ptr()},y:function(){Ni(0);var t=Yt.pop();!function(t){if(t.release_ref()&&!t.get_rethrown()){var e=t.get_destructor();e&&dt.get(e)(t.excPtr),Zt(t.excPtr)}}(t.get_exception_info()),t.free(),Xt=0},c:function(){var t=Xt;if(!t)return L(0),0;var e=new jt(t).get_type(),n=new Wt;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return L(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Mi(s,e,n.get_adjusted_ptr_addr()))return L(s),0|n.ptr}return L(e),0|n.ptr},m:function(){var t=Xt;if(!t)return L(0),0;var e=new jt(t).get_type(),n=new Wt;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return L(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Mi(s,e,n.get_adjusted_ptr_addr()))return L(s),0|n.ptr}return L(e),0|n.ptr},C:Zt,ba:function(){var t=Yt.pop();t||Dt("no exception to throw");var e=t.get_exception_info(),n=t.get_base_ptr();throw e.get_rethrown()?t.free():(Yt.push(t),e.set_rethrown(!0),e.set_caught(!1),qt++),Xt=n,n},La:function(t,e){Ht.threadExitHandlers.push((function(){dt.get(t)(e)}))},o:function(t,e,n){throw new jt(t).init(e,n),Xt=t,qt++,t},ta:function(){return qt},i:function(t){var e=new Wt(t),n=e.get_base_ptr();throw Xt||(Xt=n),e.free(),n},da:ie,ua:re,va:se,Oa:function(t){var e=oe[t];delete oe[t];var n=e.elements,i=n.length,r=n.map((function(t){return t.getterReturnType})).concat(n.map((function(t){return t.setterArgumentType}))),s=e.rawConstructor,o=e.rawDestructor;ve([t],r,(function(t){return n.forEach((function(e,n){var r=t[n],s=e.getter,o=e.getterContext,a=t[n+i],l=e.setter,h=e.setterContext;e.read=function(t){return r.fromWireType(s(o,t))},e.write=function(t,e){var n=[];l(h,t,a.toWireType(n,e)),ae(n)}})),[{name:e.name,fromWireType:function(t){for(var e=new Array(i),r=0;r<i;++r)e[r]=n[r].read(t);return o(t),e},toWireType:function(t,r){if(i!==r.length)throw new TypeError("Incorrect number of tuple elements for "+e.name+": expected="+i+", actual="+r.length);for(var a=s(),l=0;l<i;++l)n[l].write(a,r[l]);return null!==t&&t.push(o,a),a},argPackAdvance:8,readValueFromPointer:le,destructorFunction:o}]}))},Ra:function(t){var e=Te[t];delete Te[t];var n=e.rawConstructor,i=e.rawDestructor,r=e.fields;ve([t],r.map((function(t){return t.getterReturnType})).concat(r.map((function(t){return t.setterArgumentType}))),(function(t){var s={};return r.forEach((function(e,n){var i=e.fieldName,o=t[n],a=e.getter,l=e.getterContext,h=t[n+r.length],c=e.setter,u=e.setterContext;s[i]={read:function(t){return o.fromWireType(a(l,t))},write:function(t,e){var n=[];c(u,t,h.toWireType(n,e)),ae(n)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var n in s)e[n]=s[n].read(t);return i(t),e},toWireType:function(t,e){for(var r in s)if(!(r in e))throw new TypeError('Missing field:  "'+r+'"');var o=n();for(r in s)s[r].write(o,e[r]);return null!==t&&t.push(i,o),o},argPackAdvance:8,readValueFromPointer:le,destructorFunction:i}]}))},_a:function(t,e,n,i,r){},Ja:function(t,e,n,r,o){var l=Ee(n);Se(t,{name:e=Ie(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:o},argPackAdvance:8,readValueFromPointer:function(t){var r;if(1===n)r=i();else if(2===n)r=s();else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);r=a()}return this.fromWireType(r[t>>>l])},destructorFunction:null})},O:function(t,e,n,i,r,s,o,a,l,h,c,u,p){c=Ie(c),s=un(r,s),a&&(a=un(o,a)),h&&(h=un(l,h)),p=un(u,p);var d=fe(c);je(d,(function(){fn("Cannot construct "+c+" due to unbound types",[i])})),ve([t,e,n],i?[i]:[],(function(e){var n,r;e=e[0],r=i?(n=e.registeredClass).instancePrototype:Ge.prototype;var o=me(d,(function(){if(Object.getPrototypeOf(this)!==l)throw new be("Use 'new' to construct "+c);if(void 0===u.constructor_body)throw new be(c+" has no accessible constructor");var t=u.constructor_body[arguments.length];if(void 0===t)throw new be("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),l=Object.create(r,{constructor:{value:o}});o.prototype=l;var u=new We(c,o,l,p,n,s,a,h),f=new ln(c,u,!0,!1,!1),m=new ln(c+"*",u,!1,!1,!1),g=new ln(c+" const*",u,!1,!0,!1);return He[t]={pointerType:m,constPointerType:g},hn(d,o),[f,m,g]}))},N:function(t,e,n,i,r,s){G(e>0);var o=mn(e,n);r=un(i,r);var a=[s],l=[];ve([],[t],(function(t){var n="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new be("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){fn("Cannot construct "+t.name+" due to unbound types",o)},ve([],o,(function(i){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&we(n+" called with "+arguments.length+" arguments, expected "+(e-1)),l.length=0,a.length=e;for(var t=1;t<e;++t)a[t]=i[t].toWireType(l,arguments[t-1]);var s=r.apply(null,a);return ae(l),i[0].fromWireType(s)},[]})),[]}))},q:function(t,e,n,i,r,s,o,a){var l=mn(n,i);e=Ie(e),s=un(r,s),ve([],[t],(function(t){var i=(t=t[0]).name+"."+e;function r(){fn("Cannot call "+i+" due to unbound types",l)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var h=t.registeredClass.instancePrototype,c=h[e];return void 0===c||void 0===c.overloadTable&&c.className!==t.name&&c.argCount===n-2?(r.argCount=n-2,r.className=t.name,h[e]=r):(Ve(h,e,i),h[e].overloadTable[n-2]=r),ve([],l,(function(r){var a=gn(i,r,t,s,o);return void 0===h[e].overloadTable?(a.argCount=n-2,h[e]=a):h[e].overloadTable[n-2]=a,[]})),[]}))},Ia:function(t,e){Se(t,{name:e=Ie(e),fromWireType:function(t){var e=_n[t].value;return vn(t),e},toWireType:function(t,e){return xn(e)},argPackAdvance:8,readValueFromPointer:le,destructorFunction:null})},Ma:function(t,e,n,i){var r=Ee(n);function s(){}e=Ie(e),s.values={},Se(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:In(e,r,i),destructorFunction:null}),je(e,s)},T:function(t,e,n){var i=bn(t,"enum");e=Ie(e);var r=i.constructor,s=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:me(i.name+"_"+e,(function(){}))}});r.values[n]=s,r[e]=s},ja:function(t,e,n){var i=Ee(n);Se(t,{name:e=Ie(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!==typeof e&&"boolean"!==typeof e)throw new TypeError('Cannot convert "'+wn(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:Sn(e,i),destructorFunction:null})},t:function(t,e,n,i,r,s){var o=mn(e,n);t=Ie(t),r=un(i,r),je(t,(function(){fn("Cannot call "+t+" due to unbound types",o)}),e-1),ve([],o,(function(n){var i=[n[0],null].concat(n.slice(1));return hn(t,gn(t,i,null,r,s),e-1),[]}))},B:function(t,e,n,i,r){e=Ie(e),-1===r&&(r=4294967295);var s=Ee(n),o=function(t){return t};if(0===i){var a=32-8*n;o=function(t){return t<<a>>>a}}var l=e.includes("unsigned");Se(t,{name:e,fromWireType:o,toWireType:function(t,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+wn(n)+'" to '+this.name);if(n<i||n>r)throw new TypeError('Passing a number "'+wn(n)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+i+", "+r+"]!");return l?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:An(e,s,0!==i),destructorFunction:null})},x:function(t,e,n){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){t>>=2;var e=l(),n=e[t>>>0],r=e[t+1>>>0];return new i(Z,r,n)}Se(t,{name:n=Ie(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},ka:function(t,e){var n="std::string"===(e=Ie(e));Se(t,{name:e,fromWireType:function(t){var e,i=l()[t>>>2];if(n)for(var s=t+4,o=0;o<=i;++o){var a=t+4+o;if(o==i||0==r()[a>>>0]){var h=W(s,a-s);void 0===e?e=h:(e+=String.fromCharCode(0),e+=h),s=a+1}}else{var c=new Array(i);for(o=0;o<i;++o)c[o]=String.fromCharCode(r()[t+4+o>>>0]);e=c.join("")}return mi(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i="string"===typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||we("Cannot pass non-string to std::string");var s=(n&&i?function(){return X(e)}:function(){return e.length})(),o=fi(4+s+1);if(o>>>=0,l()[o>>>2]=s,n&&i)q(e,o+4,s+1);else if(i)for(var a=0;a<s;++a){var h=e.charCodeAt(a);h>255&&(mi(o),we("String has UTF-16 code units that do not fit in 8 bits")),r()[o+4+a>>>0]=h}else for(a=0;a<s;++a)r()[o+4+a>>>0]=e[a];return null!==t&&t.push(mi,o),o},argPackAdvance:8,readValueFromPointer:le,destructorFunction:function(t){mi(t)}})},Y:function(t,e,n){var i,r,s,a,h;n=Ie(n),2===e?(i=st,r=ot,a=at,s=function(){return o()},h=1):4===e&&(i=lt,r=ht,a=ct,s=function(){return l()},h=2),Se(t,{name:n,fromWireType:function(t){for(var n,r=l()[t>>>2],o=s(),a=t+4,c=0;c<=r;++c){var u=t+4+c*e;if(c==r||0==o[u>>>h]){var p=i(a,u-a);void 0===n?n=p:(n+=String.fromCharCode(0),n+=p),a=u+e}}return mi(t),n},toWireType:function(t,i){"string"!==typeof i&&we("Cannot pass non-string to C++ string type "+n);var s=a(i),o=fi(4+s+e);return o>>>=0,l()[o>>>2]=s>>h,r(i,o+4,s+e),null!==t&&t.push(mi,o),o},argPackAdvance:8,readValueFromPointer:le,destructorFunction:function(t){mi(t)}})},Pa:function(t,e,n,i,r,s){oe[t]={name:Ie(e),rawConstructor:un(n,i),rawDestructor:un(r,s),elements:[]}},Na:function(t,e,n,i,r,s,o,a,l){oe[t].elements.push({getterReturnType:e,getter:un(n,i),getterContext:r,setterArgumentType:s,setter:un(o,a),setterContext:l})},M:function(t,e,n,i,r,s){Te[t]={name:Ie(e),rawConstructor:un(n,i),rawDestructor:un(r,s),fields:[]}},Qa:function(t,e,n,i,r,s,o,a,l,h){Te[t].fields.push({fieldName:Ie(e),getterReturnType:n,getter:un(i,r),getterContext:s,setterArgumentType:o,setter:un(a,l),setterContext:h})},Ka:function(t,e){Se(t,{isVoid:!0,name:e=Ie(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},Ca:function(t,e){if(t==e)postMessage({cmd:"processQueuedMainThreadWork"});else if(S)postMessage({targetThread:t,cmd:"processThreadQueue"});else{var n=Ht.pthreads[t],i=n&&n.worker;if(!i)return;i.postMessage({cmd:"processThreadQueue"})}return 1},U:function(t,e,n){t=Cn(t),e=bn(e,"emval::as");var i=[],r=xn(i);return a()[n>>>2]=r,e.toWireType(i,t)},la:function(t,e,n,i){t=Cn(t);for(var r=function(t,e){for(var n=new Array(t),i=0;i<t;++i)n[i]=bn(a()[(e>>2)+i>>>0],"parameter "+i);return n}(e,n),s=new Array(e),o=0;o<e;++o){var l=r[o];s[o]=l.readValueFromPointer(i),i+=l.argPackAdvance}return xn(t.apply(void 0,s))},xa:vn,$a:function(t){return 0===t?xn(On()):(t=Dn(t),xn(On()[t]))},Ua:function(t,e){return xn((t=Cn(t))[e=Cn(e)])},aa:function(t){t>4&&(_n[t].refcount+=1)},pa:function(t,e){return(t=Cn(t))instanceof(e=Cn(e))},Xa:function(t){return"number"===typeof(t=Cn(t))},Wa:function(){return xn([])},Z:function(t){return xn(Dn(t))},Va:function(){return xn({})},Ta:function(t){ae(_n[t].value),vn(t)},Sa:function(t,e,n){t=Cn(t),e=Cn(e),n=Cn(n),t[e]=n},D:function(t,e){return xn((t=bn(t,"_emval_take_value")).readValueFromPointer(e))},ia:function(){Dt()},ca:function(t,e){var n;if(0===t)n=Date.now();else{if(1!==t&&4!==t)return Vt(28),-1;n=Gt()}return a()[e>>>2]=n/1e3|0,a()[e+4>>>2]=n%1e3*1e3*1e3|0,0},ga:function(t,e,n){var i=function(t,e){var n;for(Nn.length=0,e>>=2;n=r()[t++>>>0];){var i=n<105;i&&1&e&&e++,Nn.push(i?h()[e++>>>1]:a()[e>>>0]),++e}return Nn}(e,n);return Ut[t].apply(null,i)},wa:function(){w||b||M("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},fa:function(t,e){},K:function(t,e,n){if(t<=0||t>i().length||!0&t)return-28;if(I){if(Atomics.load(a(),t>>2)!=e)return-6;var r=performance.now(),s=r+n;for(Atomics.exchange(a(),Ui>>2,t);;){if((r=performance.now())>s)return Atomics.exchange(a(),Ui>>2,0),-73;if(0==Atomics.exchange(a(),Ui>>2,0))break;if(Ti(),Atomics.load(a(),t>>2)!=e)return-6;Atomics.exchange(a(),Ui>>2,t)}return 0}var o=Atomics.wait(a(),t>>2,e,n);if("timed-out"===o)return-73;if("not-equal"===o)return-6;if("ok"===o)return 0;throw"Atomics.wait returned an unexpected value "+o},J:zt,S:Gt,ra:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},ya:function(t,e,n){Pn.length=e;for(var i=n>>3,r=0;r<e;r++)Pn[r]=h()[i+r>>>0];return(t<0?Ut[-t-1]:ci[t]).apply(null,Pn)},sa:function(t){var e=r().length;if((t>>>=0)<=e)return!1;var n=4294901760;if(t>n)return!1;for(var i=1;i<=4;i*=2){var s=e*(1+.2/i);if(s=Math.min(s,t+100663296),Fn(Math.min(n,ut(Math.max(t,s),65536))))return!0}return!1},za:function(t,e,n){return zn(t)?Gn(t,e,n):Hn(t,e,n)},ea:function(t){},Aa:function(t,e){return function(t,e){var n=e>>2,i=a()[n+6>>>0],r={alpha:!!a()[n+0>>>0],depth:!!a()[n+1>>>0],stencil:!!a()[n+2>>>0],antialias:!!a()[n+3>>>0],premultipliedAlpha:!!a()[n+4>>>0],preserveDrawingBuffer:!!a()[n+5>>>0],powerPreference:jn[i],failIfMajorPerformanceCaveat:!!a()[n+7>>>0],majorVersion:a()[n+8>>>0],minorVersion:a()[n+9>>>0],enableExtensionsByDefault:a()[n+10>>>0],explicitSwapControl:a()[n+11>>>0],proxyContextToMainThread:a()[n+12>>>0],renderViaOffscreenBackBuffer:a()[n+13>>>0]},s=zn(t);return s?r.explicitSwapControl?0:Vn.createContext(s,r):0}(t,e)},Ea:qn,Fa:Xn,ha:Zn,Ha:Kn,Za:Qn,Ga:Jn,b:function(){return F},qa:function(){Ht.initRuntime()},I:function(t,e,n,i){var r=Ci();try{return dt.get(t)(e,n,i)}catch(C8){if(Ri(r),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},E:function(t){var e=Ci();try{return dt.get(t)()}catch(C8){if(Ri(e),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},d:function(t,e){var n=Ci();try{return dt.get(t)(e)}catch(C8){if(Ri(n),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},Q:function(t,e,n){var i=Ci();try{return dt.get(t)(e,n)}catch(C8){if(Ri(i),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},j:function(t,e,n){var i=Ci();try{return dt.get(t)(e,n)}catch(C8){if(Ri(i),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},k:function(t,e,n,i){var r=Ci();try{return dt.get(t)(e,n,i)}catch(C8){if(Ri(r),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},R:function(t,e,n,i,r){var s=Ci();try{return dt.get(t)(e,n,i,r)}catch(C8){if(Ri(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},na:function(t,e,n,i,r,s){var o=Ci();try{return dt.get(t)(e,n,i,r,s)}catch(C8){if(Ri(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},G:function(t,e,n,i,r,s){var o=Ci();try{return dt.get(t)(e,n,i,r,s)}catch(C8){if(Ri(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},A:function(t,e,n,i,r,s,o){var a=Ci();try{return dt.get(t)(e,n,i,r,s,o)}catch(C8){if(Ri(a),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},_:function(t,e,n,i,r,s,o,a){var l=Ci();try{return dt.get(t)(e,n,i,r,s,o,a)}catch(C8){if(Ri(l),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},P:function(t,e,n,i,r,s,o,a,l){var h=Ci();try{return dt.get(t)(e,n,i,r,s,o,a,l)}catch(C8){if(Ri(h),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},W:function(t,e,n,i,r,s,o,a,l,h,c,u){var p=Ci();try{return dt.get(t)(e,n,i,r,s,o,a,l,h,c,u)}catch(C8){if(Ri(p),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},Ya:function(t){var e=Ci();try{return Li(t)}catch(C8){if(Ri(e),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},g:function(t){var e=Ci();try{dt.get(t)()}catch(C8){if(Ri(e),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},f:function(t,e){var n=Ci();try{dt.get(t)(e)}catch(C8){if(Ri(n),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},L:function(t,e,n,i,r){var s=Ci();try{dt.get(t)(e,n,i,r)}catch(C8){if(Ri(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},H:function(t,e,n,i,r,s,o){var a=Ci();try{dt.get(t)(e,n,i,r,s,o)}catch(C8){if(Ri(a),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},h:function(t,e,n){var i=Ci();try{dt.get(t)(e,n)}catch(C8){if(Ri(i),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},s:function(t,e,n,i,r){var s=Ci();try{dt.get(t)(e,n,i,r)}catch(C8){if(Ri(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},e:function(t,e,n,i){var r=Ci();try{dt.get(t)(e,n,i)}catch(C8){if(Ri(r),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},l:function(t,e,n,i,r){var s=Ci();try{dt.get(t)(e,n,i,r)}catch(C8){if(Ri(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},$:function(t,e,n,i,r,s){var o=Ci();try{dt.get(t)(e,n,i,r,s)}catch(C8){if(Ri(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},X:function(t,e,n,i,r,s,o,a){var l=Ci();try{dt.get(t)(e,n,i,r,s,o,a)}catch(C8){if(Ri(l),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},F:function(t,e,n,i,r,s){var o=Ci();try{dt.get(t)(e,n,i,r,s)}catch(C8){if(Ri(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},w:function(t,e,n,i,r,s,o){var a=Ci();try{dt.get(t)(e,n,i,r,s,o)}catch(C8){if(Ri(a),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},r:function(t,e,n,i,r,s,o,a){var l=Ci();try{dt.get(t)(e,n,i,r,s,o,a)}catch(C8){if(Ri(l),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},u:function(t,e,n,i,r,s,o,a,l,h){var c=Ci();try{dt.get(t)(e,n,i,r,s,o,a,l,h)}catch(C8){if(Ri(c),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},p:function(t,e,n,i,r,s,o,a,l,h,c){var u=Ci();try{dt.get(t)(e,n,i,r,s,o,a,l,h,c)}catch(C8){if(Ri(u),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},V:function(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){var g=Ci();try{dt.get(t)(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m)}catch(C8){if(Ri(g),C8!==C8+0&&"longjmp"!==C8)throw C8;Ni(1,0)}},oa:function(t){return t},a:k||p.wasmMemory,Ba:function(t,e,n,i){if("undefined"===typeof SharedArrayBuffer)return O("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!t)return O("pthread_create called with a null thread pointer!"),28;var r=[];if(S&&0===r.length)return vi(687865856,t,e,n,i);var s=0,o=0,h=0;e&&-1!=e?(s=a()[e>>>2],s+=81920,o=a()[e+8>>>2],h=0!==a()[e+12>>>2]):s=2097152;var c=0==o;c?o=Fi(16,s):G((o-=s)>0);for(var u=fi(228),p=0;p<57;++p)l()[(u>>2)+p>>>0]=0;a()[t>>>2]=u,a()[u+12>>>2]=u;var d=u+152;a()[d>>>2]=d;var f={stackBase:o,stackSize:s,allocatedOwnStack:c,detached:h,startRoutine:n,pthread_ptr:u,arg:i,transferList:r};return S?(f.cmd="spawnThread",postMessage(f,r),0):$n(f)},ma:function(t){L(t)},Da:function(t,e,n,i){return si(t,e,n,i)}},fi=(function(){var t={a:di};function e(t,e){var n=t.exports;if(p.asm=n,dt=p.asm.db,function(t){gt.unshift(t)}(p.asm.ab),Ht.tlsInitFunctions.push(p.asm.fb),U=e,!S){var i=Ht.unusedWorkers.length;Ht.unusedWorkers.forEach((function(t){Ht.loadWasmModuleToWorker(t,(function(){--i||Rt()}))}))}}function n(t){e(t.instance,t.module)}function i(e){return function(){if(!P&&(I||b)){if("function"===typeof fetch&&!Lt(Ot))return fetch(Ot,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Ot+"'";return t.arrayBuffer()})).catch((function(){return kt(Ot)}));if(g)return new Promise((function(t,e){g(Ot,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return kt(Ot)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){O("failed to asynchronously prepare wasm: "+t),Dt(t)}))}if(S||Ct(),p.instantiateWasm)try{return p.instantiateWasm(t,e)}catch(C8){return O("Module.instantiateWasm callback failed with error: "+C8),!1}(P||"function"!==typeof WebAssembly.instantiateStreaming||Ft(Ot)||Lt(Ot)||"function"!==typeof fetch?i(n):fetch(Ot,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(n,(function(t){return O("wasm streaming compile failed: "+t),O("falling back to ArrayBuffer instantiation"),i(n)}))}))).catch(u)}(),p.___wasm_call_ctors=function(){return(p.___wasm_call_ctors=p.asm.ab).apply(null,arguments)},p._main=function(){return(p._main=p.asm.bb).apply(null,arguments)},p._malloc=function(){return(fi=p._malloc=p.asm.cb).apply(null,arguments)}),mi=p._free=function(){return(mi=p._free=p.asm.eb).apply(null,arguments)},gi=(p._emscripten_tls_init=function(){return(p._emscripten_tls_init=p.asm.fb).apply(null,arguments)},p.___getTypeName=function(){return(gi=p.___getTypeName=p.asm.gb).apply(null,arguments)}),yi=(p.___embind_register_native_and_builtin_types=function(){return(p.___embind_register_native_and_builtin_types=p.asm.hb).apply(null,arguments)},p._emscripten_current_thread_process_queued_calls=function(){return(p._emscripten_current_thread_process_queued_calls=p.asm.ib).apply(null,arguments)},p._emscripten_register_main_browser_thread_id=function(){return(yi=p._emscripten_register_main_browser_thread_id=p.asm.jb).apply(null,arguments)}),_i=p.__emscripten_do_dispatch_to_thread=function(){return(_i=p.__emscripten_do_dispatch_to_thread=p.asm.kb).apply(null,arguments)},vi=p._emscripten_sync_run_in_main_thread_4=function(){return(vi=p._emscripten_sync_run_in_main_thread_4=p.asm.lb).apply(null,arguments)},Ti=p._emscripten_main_thread_process_queued_calls=function(){return(Ti=p._emscripten_main_thread_process_queued_calls=p.asm.mb).apply(null,arguments)},Ei=p._emscripten_run_in_main_runtime_thread_js=function(){return(Ei=p._emscripten_run_in_main_runtime_thread_js=p.asm.nb).apply(null,arguments)},xi=p.__emscripten_call_on_thread=function(){return(xi=p.__emscripten_call_on_thread=p.asm.ob).apply(null,arguments)},Ii=p.__emscripten_thread_init=function(){return(Ii=p.__emscripten_thread_init=p.asm.pb).apply(null,arguments)},bi=p._emscripten_get_global_libc=function(){return(bi=p._emscripten_get_global_libc=p.asm.qb).apply(null,arguments)},wi=p.___errno_location=function(){return(wi=p.___errno_location=p.asm.rb).apply(null,arguments)},Si=p._pthread_self=function(){return(Si=p._pthread_self=p.asm.sb).apply(null,arguments)},Ai=p.___pthread_tsd_run_dtors=function(){return(Ai=p.___pthread_tsd_run_dtors=p.asm.tb).apply(null,arguments)},Ci=p.stackSave=function(){return(Ci=p.stackSave=p.asm.ub).apply(null,arguments)},Ri=p.stackRestore=function(){return(Ri=p.stackRestore=p.asm.vb).apply(null,arguments)},Di=p.stackAlloc=function(){return(Di=p.stackAlloc=p.asm.wb).apply(null,arguments)},Oi=p._emscripten_stack_set_limits=function(){return(Oi=p._emscripten_stack_set_limits=p.asm.xb).apply(null,arguments)},Ni=p._setThrew=function(){return(Ni=p._setThrew=p.asm.yb).apply(null,arguments)},Mi=p.___cxa_can_catch=function(){return(Mi=p.___cxa_can_catch=p.asm.zb).apply(null,arguments)},Pi=p.___cxa_is_pointer_type=function(){return(Pi=p.___cxa_is_pointer_type=p.asm.Ab).apply(null,arguments)},Fi=p._memalign=function(){return(Fi=p._memalign=p.asm.Bb).apply(null,arguments)},Li=(p.dynCall_jiji=function(){return(p.dynCall_jiji=p.asm.Cb).apply(null,arguments)},p.dynCall_j=function(){return(Li=p.dynCall_j=p.asm.Db).apply(null,arguments)}),ki=(p.dynCall_viijii=function(){return(p.dynCall_viijii=p.asm.Eb).apply(null,arguments)},p.dynCall_iiiiij=function(){return(p.dynCall_iiiiij=p.asm.Fb).apply(null,arguments)},p.dynCall_iiiiijj=function(){return(p.dynCall_iiiiijj=p.asm.Gb).apply(null,arguments)},p.dynCall_iiiiiijj=function(){return(p.dynCall_iiiiiijj=p.asm.Hb).apply(null,arguments)},p.__emscripten_allow_main_runtime_queued_calls=56672),Ui=p.__emscripten_main_thread_futex=60132;function Bi(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}p.addRunDependency=Ct,p.removeRunDependency=Rt,p.FS_createPath=ee.createPath,p.FS_createDataFile=ee.createDataFile,p.FS_createPreloadedFile=ee.createPreloadedFile,p.FS_createLazyFile=ee.createLazyFile,p.FS_createDevice=ee.createDevice,p.FS_unlink=ee.unlink,p.keepRuntimeAlive=Et,p.FS=ee,p.PThread=Ht,p.PThread=Ht,p.wasmMemory=k,p.ExitStatus=Bi;function zi(t){if(t=t||T,!(wt>0)){if(S)return c(p),xt(),void postMessage({cmd:"loaded"});!function(){if(!S){if(p.preRun)for("function"==typeof p.preRun&&(p.preRun=[p.preRun]);p.preRun.length;)It(p.preRun.shift());Bt(mt)}}(),wt>0||(p.setStatus?(p.setStatus("Running..."),setTimeout((function(){setTimeout((function(){p.setStatus("")}),1),e()}),1)):e())}function e(){pi||(pi=!0,p.calledRun=!0,z||(xt(),S||Bt(yt),c(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),Hi&&function(t){var e=p._main;try{Gi(e(0,0),!0)}catch(C8){if(C8 instanceof Bi||"unwind"==C8)return;var n=C8;C8&&"object"===typeof C8&&C8.stack&&(n=[C8,C8.stack]),O("exception thrown: "+n),x(1,C8)}finally{!0}}(),function(){if(!S){if(p.postRun)for("function"==typeof p.postRun&&(p.postRun=[p.postRun]);p.postRun.length;)bt(p.postRun.shift());Bt(vt)}}()))}}function Gi(t,e){if(t,!e&&S)throw postMessage({cmd:"exitProcess",returnCode:t}),new Bi(t);Et()||(Ht.terminateAllThreads(),S||!0,p.onExit&&p.onExit(t),z=!0),x(t,new Bi(t))}if(At=function t(){pi||zi(),pi||(At=t)},p.run=zi,p.preInit)for("function"==typeof p.preInit&&(p.preInit=[p.preInit]);p.preInit.length>0;)p.preInit.pop()();var Hi=!0;return p.noInitialRun&&(Hi=!1),S&&(B=!1,Ht.initWorker()),zi(),e.ready}}();"object"===typeof t&&"object"===typeof e?e.exports=i:"function"===typeof define&&n.amdO?define([],(function(){return i})):"object"===typeof t&&(t.WebIFCWasm=i)}}),LI=NI({"dist/web-ifc.js"(t,e){var i=function(){var t="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return t=t||bI,function(e){var n,i,r="undefined"!==typeof(e=e||{})?e:{};r.ready=new Promise((function(t,e){n=t,i=e}));var s,o={};for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);var a,l,h,c,u,p=[],d="./this.program",f=function(t,e){throw e},m="object"===typeof window,g="function"===typeof importScripts,y="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,_="";y?(_=g?OI("path").dirname(_)+"/":"//",a=function(t,e){return c||(c=OI("fs")),u||(u=OI("path")),t=u.normalize(t),c.readFileSync(t,e?null:"utf8")},h=function(t){var e=a(t,!0);return e.buffer||(e=new Uint8Array(e)),A(e.buffer),e},l=function(t,e,n){c||(c=OI("fs")),u||(u=OI("path")),t=u.normalize(t),c.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))},process.argv.length>1&&(d=process.argv[1].replace(/\\/g,"/")),p=process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Mn))throw t})),process.on("unhandledRejection",pt),f=function(t,e){if(rt())throw process.exitCode=t,e;process.exit(t)},r.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?_=self.location.href:"undefined"!==typeof document&&document.currentScript&&(_=document.currentScript.src),t&&(_=t),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",a=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},g&&(h=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),l=function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)});var v=r.print||console.log.bind(console),T=r.printErr||console.warn.bind(console);for(s in o)o.hasOwnProperty(s)&&(r[s]=o[s]);o=null,r.arguments&&(p=r.arguments),r.thisProgram&&(d=r.thisProgram),r.quit&&(f=r.quit);var E,x=0,I=function(t){x=t};r.wasmBinary&&(E=r.wasmBinary);var b,w=r.noExitRuntime||!0;"object"!==typeof WebAssembly&&pt("no native wasm support detected");var S=!1;function A(t,e){t||pt("Assertion failed: "+e)}var C="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){for(var i=(e>>>=0)+n,r=e;t[r>>>0]&&!(r>=i);)++r;if(r-e>16&&t.subarray&&C)return C.decode(t.subarray(e>>>0,r>>>0));for(var s="";e<r;){var o=t[e++>>>0];if(128&o){var a=63&t[e++>>>0];if(192!=(224&o)){var l=63&t[e++>>>0];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&t[e++>>>0])<65536)s+=String.fromCharCode(o);else{var h=o-65536;s+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function D(t,e){return(t>>>=0)?R(L,t,e):""}function O(t,e,n,i){if(!(i>0))return 0;for(var r=n>>>=0,s=n+i-1,o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o);if(a<=127){if(n>=s)break;e[n++>>>0]=a}else if(a<=2047){if(n+1>=s)break;e[n++>>>0]=192|a>>6,e[n++>>>0]=128|63&a}else if(a<=65535){if(n+2>=s)break;e[n++>>>0]=224|a>>12,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}else{if(n+3>=s)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-r}function N(t,e,n){return O(t,L,e,n)}function M(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),i<=127?++e:e+=i<=2047?2:i<=65535?3:4}return e}var P,F,L,k,U,B,z,G,H,V="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function j(t,e){for(var n=t,i=n>>1,r=i+e/2;!(i>=r)&&U[i>>>0];)++i;if((n=i<<1)-t>32&&V)return V.decode(L.subarray(t>>>0,n>>>0));for(var s="",o=0;!(o>=e/2);++o){var a=k[t+2*o>>>1];if(0==a)break;s+=String.fromCharCode(a)}return s}function W(t,e,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var i=e,r=(n-=2)<2*t.length?n/2:t.length,s=0;s<r;++s){var o=t.charCodeAt(s);k[e>>>1]=o,e+=2}return k[e>>>1]=0,e-i}function Y(t){return 2*t.length}function q(t,e){for(var n=0,i="";!(n>=e/4);){var r=B[t+4*n>>>2];if(0==r)break;if(++n,r>=65536){var s=r-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}else i+=String.fromCharCode(r)}return i}function X(t,e,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var i=e>>>=0,r=i+n-4,s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s);if(B[e>>>2]=o,(e+=4)+4>r)break}return B[e>>>2]=0,e-i}function Z(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&++n,e+=4}return e}function K(t,e){return t%e>0&&(t+=e-t%e),t}function Q(t){P=t,r.HEAP8=F=new Int8Array(t),r.HEAP16=k=new Int16Array(t),r.HEAP32=B=new Int32Array(t),r.HEAPU8=L=new Uint8Array(t),r.HEAPU16=U=new Uint16Array(t),r.HEAPU32=z=new Uint32Array(t),r.HEAPF32=G=new Float32Array(t),r.HEAPF64=H=new Float64Array(t)}r.INITIAL_MEMORY;var J,$=[],tt=[],et=[],nt=[],it=0;function rt(){return w||it>0}function st(t){$.unshift(t)}function ot(t){nt.unshift(t)}var at=0,lt=null,ht=null;function ct(t){at++,r.monitorRunDependencies&&r.monitorRunDependencies(at)}function ut(t){if(at--,r.monitorRunDependencies&&r.monitorRunDependencies(at),0==at&&(null!==lt&&(clearInterval(lt),lt=null),ht)){var e=ht;ht=null,e()}}function pt(t){r.onAbort&&r.onAbort(t),T(t+=""),S=!0,1,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw i(e),e}r.preloadedImages={},r.preloadedAudios={};var dt,ft,mt,gt,yt="data:application/octet-stream;base64,";function _t(t){return t.startsWith(yt)}function vt(t){return t.startsWith("file://")}function Tt(t){try{if(t==dt&&E)return new Uint8Array(E);if(h)return h(t);throw"both async and sync fetching of the wasm failed"}catch(e){pt(e)}}function Et(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"===typeof n?void 0===e.arg?J.get(n)():J.get(n)(e.arg):n(void 0===e.arg?null:e.arg)}else e(r)}}function xt(t){this.excPtr=t,this.ptr=t-16,this.set_type=function(t){B[this.ptr+4>>>2]=t},this.get_type=function(){return B[this.ptr+4>>>2]},this.set_destructor=function(t){B[this.ptr+8>>>2]=t},this.get_destructor=function(){return B[this.ptr+8>>>2]},this.set_refcount=function(t){B[this.ptr>>>2]=t},this.set_caught=function(t){t=t?1:0,F[this.ptr+12>>>0]=t},this.get_caught=function(){return 0!=F[this.ptr+12>>>0]},this.set_rethrown=function(t){t=t?1:0,F[this.ptr+13>>>0]=t},this.get_rethrown=function(){return 0!=F[this.ptr+13>>>0]},this.init=function(t,e){this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=B[this.ptr>>>2];B[this.ptr>>>2]=t+1},this.release_ref=function(){var t=B[this.ptr>>>2];return B[this.ptr>>>2]=t-1,1===t}}function It(t){this.free=function(){bn(this.ptr),this.ptr=0},this.set_base_ptr=function(t){B[this.ptr>>>2]=t},this.get_base_ptr=function(){return B[this.ptr>>>2]},this.set_adjusted_ptr=function(t){B[this.ptr+4>>>2]=t},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return B[this.ptr+4>>>2]},this.get_exception_ptr=function(){if(On(this.get_exception_info().get_type()))return B[this.get_base_ptr()>>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.get_base_ptr()},this.get_exception_info=function(){return new xt(this.get_base_ptr())},void 0===t?(this.ptr=In(8),this.set_adjusted_ptr(0)):this.ptr=t}_t(dt="web-ifc.wasm")||(ft=dt,dt=r.locateFile?r.locateFile(ft,_):_+ft);var bt=[];var wt=0;var St=0;function At(t){return bn(new xt(t).ptr)}function Ct(t){return B[Sn()>>>2]=t,t}var Rt={splitPath:function(t){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1)},normalizeArray:function(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},normalize:function(t){var e="/"===t.charAt(0),n="/"===t.substr(-1);return t=Rt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=Rt.splitPath(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},basename:function(t){if("/"===t)return"/";var e=(t=(t=Rt.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},extname:function(t){return Rt.splitPath(t)[3]},join:function(){var t=Array.prototype.slice.call(arguments,0);return Rt.normalize(t.join("/"))},join2:function(t,e){return Rt.normalize(t+"/"+e)}};var Dt={resolve:function(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:Mt.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t,e="/"===i.charAt(0)}return t=Rt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),(e?"/":"")+t||"."},relative:function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=Dt.resolve(t).substr(1),e=Dt.resolve(e).substr(1);for(var i=n(t.split("/")),r=n(e.split("/")),s=Math.min(i.length,r.length),o=s,a=0;a<s;a++)if(i[a]!==r[a]){o=a;break}var l=[];for(a=o;a<i.length;a++)l.push("..");return(l=l.concat(r.slice(o))).join("/")}},Ot={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){Ot.ttys[t]={input:[],output:[],ops:e},Mt.registerDevice(t,Ot.stream_ops)},stream_ops:{open:function(t){var e=Ot.ttys[t.node.rdev];if(!e)throw new Mt.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.get_char)throw new Mt.ErrnoError(60);for(var s=0,o=0;o<i;o++){var a;try{a=t.tty.ops.get_char(t.tty)}catch(C8){throw new Mt.ErrnoError(29)}if(void 0===a&&0===s)throw new Mt.ErrnoError(6);if(null===a||void 0===a)break;s++,e[n+o]=a}return s&&(t.node.timestamp=Date.now()),s},write:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.put_char)throw new Mt.ErrnoError(60);try{for(var s=0;s<i;s++)t.tty.ops.put_char(t.tty,e[n+s])}catch(C8){throw new Mt.ErrnoError(29)}return i&&(t.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if(y){var n=Buffer.alloc(256),i=0;try{i=c.readSync(process.stdin.fd,n,0,256,null)}catch(C8){if(!C8.toString().includes("EOF"))throw C8;i=0}e=i>0?n.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n");if(!e)return null;t.input=Tn(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(v(R(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(v(R(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(T(R(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(T(R(t.output,0)),t.output=[])}}};var Nt={ops_table:null,mount:function(t){return Nt.createNode(null,"/",16895,0)},createNode:function(t,e,n,i){if(Mt.isBlkdev(n)||Mt.isFIFO(n))throw new Mt.ErrnoError(63);Nt.ops_table||(Nt.ops_table={dir:{node:{getattr:Nt.node_ops.getattr,setattr:Nt.node_ops.setattr,lookup:Nt.node_ops.lookup,mknod:Nt.node_ops.mknod,rename:Nt.node_ops.rename,unlink:Nt.node_ops.unlink,rmdir:Nt.node_ops.rmdir,readdir:Nt.node_ops.readdir,symlink:Nt.node_ops.symlink},stream:{llseek:Nt.stream_ops.llseek}},file:{node:{getattr:Nt.node_ops.getattr,setattr:Nt.node_ops.setattr},stream:{llseek:Nt.stream_ops.llseek,read:Nt.stream_ops.read,write:Nt.stream_ops.write,allocate:Nt.stream_ops.allocate,mmap:Nt.stream_ops.mmap,msync:Nt.stream_ops.msync}},link:{node:{getattr:Nt.node_ops.getattr,setattr:Nt.node_ops.setattr,readlink:Nt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Nt.node_ops.getattr,setattr:Nt.node_ops.setattr},stream:Mt.chrdev_stream_ops}});var r=Mt.createNode(t,e,n,i);return Mt.isDir(r.mode)?(r.node_ops=Nt.ops_table.dir.node,r.stream_ops=Nt.ops_table.dir.stream,r.contents={}):Mt.isFile(r.mode)?(r.node_ops=Nt.ops_table.file.node,r.stream_ops=Nt.ops_table.file.stream,r.usedBytes=0,r.contents=null):Mt.isLink(r.mode)?(r.node_ops=Nt.ops_table.link.node,r.stream_ops=Nt.ops_table.link.stream):Mt.isChrdev(r.mode)&&(r.node_ops=Nt.ops_table.chrdev.node,r.stream_ops=Nt.ops_table.chrdev.stream),r.timestamp=Date.now(),t&&(t.contents[e]=r,t.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){e>>>=0;var n=t.contents?t.contents.length:0;if(!(n>=e)){e=Math.max(e,n*(n<1048576?2:1.125)>>>0),0!=n&&(e=Math.max(e,256));var i=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(i.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(e>>>=0,t.usedBytes!=e)if(0==e)t.contents=null,t.usedBytes=0;else{var n=t.contents;t.contents=new Uint8Array(e),n&&t.contents.set(n.subarray(0,Math.min(e,t.usedBytes))),t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=Mt.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Mt.isDir(t.mode)?e.size=4096:Mt.isFile(t.mode)?e.size=t.usedBytes:Mt.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Nt.resizeFileStorage(t,e.size)},lookup:function(t,e){throw Mt.genericErrors[44]},mknod:function(t,e,n,i){return Nt.createNode(t,e,n,i)},rename:function(t,e,n){if(Mt.isDir(t.mode)){var i;try{i=Mt.lookupNode(e,n)}catch(C8){}if(i)for(var r in i.contents)throw new Mt.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=n,e.contents[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.contents[e],t.timestamp=Date.now()},rmdir:function(t,e){var n=Mt.lookupNode(t,e);for(var i in n.contents)throw new Mt.ErrnoError(55);delete t.contents[e],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."];for(var n in t.contents)t.contents.hasOwnProperty(n)&&e.push(n);return e},symlink:function(t,e,n){var i=Nt.createNode(t,e,41471,0);return i.link=n,i},readlink:function(t){if(!Mt.isLink(t.mode))throw new Mt.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,n,i,r){var s=t.node.contents;if(r>=t.node.usedBytes)return 0;var o=Math.min(t.node.usedBytes-r,i);if(o>8&&s.subarray)e.set(s.subarray(r,r+o),n);else for(var a=0;a<o;a++)e[n+a]=s[r+a];return o},write:function(t,e,n,i,r,s){if(e.buffer===F.buffer&&(s=!1),!i)return 0;var o=t.node;if(o.timestamp=Date.now(),e.subarray&&(!o.contents||o.contents.subarray)){if(s)return o.contents=e.subarray(n,n+i),o.usedBytes=i,i;if(0===o.usedBytes&&0===r)return o.contents=e.slice(n,n+i),o.usedBytes=i,i;if(r+i<=o.usedBytes)return o.contents.set(e.subarray(n,n+i),r),i}if(Nt.expandFileStorage(o,r+i),o.contents.subarray&&e.subarray)o.contents.set(e.subarray(n,n+i),r);else for(var a=0;a<i;a++)o.contents[r+a]=e[n+a];return o.usedBytes=Math.max(o.usedBytes,r+i),i},llseek:function(t,e,n){var i=e;if(1===n?i+=t.position:2===n&&Mt.isFile(t.node.mode)&&(i+=t.node.usedBytes),i<0)throw new Mt.ErrnoError(28);return i},allocate:function(t,e,n){Nt.expandFileStorage(t.node,e+n),t.node.usedBytes=Math.max(t.node.usedBytes,e+n)},mmap:function(t,e,n,i,r,s){if(0!==e)throw new Mt.ErrnoError(28);if(!Mt.isFile(t.node.mode))throw new Mt.ErrnoError(43);var o,a,l=t.node.contents;if(2&s||l.buffer!==P){if((i>0||i+n<l.length)&&(l=l.subarray?l.subarray(i,i+n):Array.prototype.slice.call(l,i,i+n)),a=!0,!(o=void pt()))throw new Mt.ErrnoError(48);o>>>=0,F.set(l,o>>>0)}else a=!1,o=l.byteOffset;return{ptr:o,allocated:a}},msync:function(t,e,n,i,r){if(!Mt.isFile(t.node.mode))throw new Mt.ErrnoError(43);if(2&r)return 0;Nt.stream_ops.write(t,e,0,i,n,!1);return 0}}};var Mt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,e){if(e=e||{},!(t=Dt.resolve(Mt.cwd(),t)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var i in n)void 0===e[i]&&(e[i]=n[i]);if(e.recurse_count>8)throw new Mt.ErrnoError(32);for(var r=Rt.normalizeArray(t.split("/").filter((function(t){return!!t})),!1),s=Mt.root,o="/",a=0;a<r.length;a++){var l=a===r.length-1;if(l&&e.parent)break;if(s=Mt.lookupNode(s,r[a]),o=Rt.join2(o,r[a]),Mt.isMountpoint(s)&&(!l||l&&e.follow_mount)&&(s=s.mounted.root),!l||e.follow)for(var h=0;Mt.isLink(s.mode);){var c=Mt.readlink(o);if(o=Dt.resolve(Rt.dirname(o),c),s=Mt.lookupPath(o,{recurse_count:e.recurse_count}).node,h++>40)throw new Mt.ErrnoError(32)}}return{path:o,node:s}},getPath:function(t){for(var e;;){if(Mt.isRoot(t)){var n=t.mount.mountpoint;return e?"/"!==n[n.length-1]?n+"/"+e:n+e:n}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,e){for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)|0;return(t+n>>>0)%Mt.nameTable.length},hashAddNode:function(t){var e=Mt.hashName(t.parent.id,t.name);t.name_next=Mt.nameTable[e],Mt.nameTable[e]=t},hashRemoveNode:function(t){var e=Mt.hashName(t.parent.id,t.name);if(Mt.nameTable[e]===t)Mt.nameTable[e]=t.name_next;else for(var n=Mt.nameTable[e];n;){if(n.name_next===t){n.name_next=t.name_next;break}n=n.name_next}},lookupNode:function(t,e){var n=Mt.mayLookup(t);if(n)throw new Mt.ErrnoError(n,t);for(var i=Mt.hashName(t.id,e),r=Mt.nameTable[i];r;r=r.name_next){var s=r.name;if(r.parent.id===t.id&&s===e)return r}return Mt.lookup(t,e)},createNode:function(t,e,n,i){var r=new Mt.FSNode(t,e,n,i);return Mt.hashAddNode(r),r},destroyNode:function(t){Mt.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return 32768===(61440&t)},isDir:function(t){return 16384===(61440&t)},isLink:function(t){return 40960===(61440&t)},isChrdev:function(t){return 8192===(61440&t)},isBlkdev:function(t){return 24576===(61440&t)},isFIFO:function(t){return 4096===(61440&t)},isSocket:function(t){return 49152===(49152&t)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=Mt.flagModes[t];if("undefined"===typeof e)throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:function(t,e){return Mt.ignorePermissions||(!e.includes("r")||292&t.mode)&&(!e.includes("w")||146&t.mode)&&(!e.includes("x")||73&t.mode)?0:2},mayLookup:function(t){var e=Mt.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,e){try{Mt.lookupNode(t,e);return 20}catch(C8){}return Mt.nodePermissions(t,"wx")},mayDelete:function(t,e,n){var i;try{i=Mt.lookupNode(t,e)}catch(C8){return C8.errno}var r=Mt.nodePermissions(t,"wx");if(r)return r;if(n){if(!Mt.isDir(i.mode))return 54;if(Mt.isRoot(i)||Mt.getPath(i)===Mt.cwd())return 10}else if(Mt.isDir(i.mode))return 31;return 0},mayOpen:function(t,e){return t?Mt.isLink(t.mode)?32:Mt.isDir(t.mode)&&("r"!==Mt.flagsToPermissionString(e)||512&e)?31:Mt.nodePermissions(t,Mt.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd:function(t,e){t=t||0,e=e||Mt.MAX_OPEN_FDS;for(var n=t;n<=e;n++)if(!Mt.streams[n])return n;throw new Mt.ErrnoError(33)},getStream:function(t){return Mt.streams[t]},createStream:function(t,e,n){Mt.FSStream||(Mt.FSStream=function(){},Mt.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var i=new Mt.FSStream;for(var r in t)i[r]=t[r];t=i;var s=Mt.nextfd(e,n);return t.fd=s,Mt.streams[s]=t,t},closeStream:function(t){Mt.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=Mt.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new Mt.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return 255&t},makedev:function(t,e){return t<<8|e},registerDevice:function(t,e){Mt.devices[t]={stream_ops:e}},getDevice:function(t){return Mt.devices[t]},getMounts:function(t){for(var e=[],n=[t];n.length;){var i=n.pop();e.push(i),n.push.apply(n,i.mounts)}return e},syncfs:function(t,e){"function"===typeof t&&(e=t,t=!1),Mt.syncFSRequests++,Mt.syncFSRequests>1&&T("warning: "+Mt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=Mt.getMounts(Mt.root.mount),i=0;function r(t){return Mt.syncFSRequests--,e(t)}function s(t){if(t)return s.errored?void 0:(s.errored=!0,r(t));++i>=n.length&&r(null)}n.forEach((function(e){if(!e.type.syncfs)return s(null);e.type.syncfs(e,t,s)}))},mount:function(t,e,n){var i,r="/"===n,s=!n;if(r&&Mt.root)throw new Mt.ErrnoError(10);if(!r&&!s){var o=Mt.lookupPath(n,{follow_mount:!1});if(n=o.path,i=o.node,Mt.isMountpoint(i))throw new Mt.ErrnoError(10);if(!Mt.isDir(i.mode))throw new Mt.ErrnoError(54)}var a={type:t,opts:e,mountpoint:n,mounts:[]},l=t.mount(a);return l.mount=a,a.root=l,r?Mt.root=l:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),l},unmount:function(t){var e=Mt.lookupPath(t,{follow_mount:!1});if(!Mt.isMountpoint(e.node))throw new Mt.ErrnoError(28);var n=e.node,i=n.mounted,r=Mt.getMounts(i);Object.keys(Mt.nameTable).forEach((function(t){for(var e=Mt.nameTable[t];e;){var n=e.name_next;r.includes(e.mount)&&Mt.destroyNode(e),e=n}})),n.mounted=null;var s=n.mount.mounts.indexOf(i);n.mount.mounts.splice(s,1)},lookup:function(t,e){return t.node_ops.lookup(t,e)},mknod:function(t,e,n){var i=Mt.lookupPath(t,{parent:!0}).node,r=Rt.basename(t);if(!r||"."===r||".."===r)throw new Mt.ErrnoError(28);var s=Mt.mayCreate(i,r);if(s)throw new Mt.ErrnoError(s);if(!i.node_ops.mknod)throw new Mt.ErrnoError(63);return i.node_ops.mknod(i,r,e,n)},create:function(t,e){return e=void 0!==e?e:438,e&=4095,e|=32768,Mt.mknod(t,e,0)},mkdir:function(t,e){return e=void 0!==e?e:511,e&=1023,e|=16384,Mt.mknod(t,e,0)},mkdirTree:function(t,e){for(var n=t.split("/"),i="",r=0;r<n.length;++r)if(n[r]){i+="/"+n[r];try{Mt.mkdir(i,e)}catch(C8){if(20!=C8.errno)throw C8}}},mkdev:function(t,e,n){return"undefined"===typeof n&&(n=e,e=438),e|=8192,Mt.mknod(t,e,n)},symlink:function(t,e){if(!Dt.resolve(t))throw new Mt.ErrnoError(44);var n=Mt.lookupPath(e,{parent:!0}).node;if(!n)throw new Mt.ErrnoError(44);var i=Rt.basename(e),r=Mt.mayCreate(n,i);if(r)throw new Mt.ErrnoError(r);if(!n.node_ops.symlink)throw new Mt.ErrnoError(63);return n.node_ops.symlink(n,i,t)},rename:function(t,e){var n,i,r=Rt.dirname(t),s=Rt.dirname(e),o=Rt.basename(t),a=Rt.basename(e);if(n=Mt.lookupPath(t,{parent:!0}).node,i=Mt.lookupPath(e,{parent:!0}).node,!n||!i)throw new Mt.ErrnoError(44);if(n.mount!==i.mount)throw new Mt.ErrnoError(75);var l,h=Mt.lookupNode(n,o),c=Dt.relative(t,s);if("."!==c.charAt(0))throw new Mt.ErrnoError(28);if("."!==(c=Dt.relative(e,r)).charAt(0))throw new Mt.ErrnoError(55);try{l=Mt.lookupNode(i,a)}catch(C8){}if(h!==l){var u=Mt.isDir(h.mode),p=Mt.mayDelete(n,o,u);if(p)throw new Mt.ErrnoError(p);if(p=l?Mt.mayDelete(i,a,u):Mt.mayCreate(i,a))throw new Mt.ErrnoError(p);if(!n.node_ops.rename)throw new Mt.ErrnoError(63);if(Mt.isMountpoint(h)||l&&Mt.isMountpoint(l))throw new Mt.ErrnoError(10);if(i!==n&&(p=Mt.nodePermissions(n,"w")))throw new Mt.ErrnoError(p);try{Mt.trackingDelegate.willMovePath&&Mt.trackingDelegate.willMovePath(t,e)}catch(C8){T("FS.trackingDelegate['willMovePath']('"+t+"', '"+e+"') threw an exception: "+C8.message)}Mt.hashRemoveNode(h);try{n.node_ops.rename(h,i,a)}catch(C8){throw C8}finally{Mt.hashAddNode(h)}try{Mt.trackingDelegate.onMovePath&&Mt.trackingDelegate.onMovePath(t,e)}catch(C8){T("FS.trackingDelegate['onMovePath']('"+t+"', '"+e+"') threw an exception: "+C8.message)}}},rmdir:function(t){var e=Mt.lookupPath(t,{parent:!0}).node,n=Rt.basename(t),i=Mt.lookupNode(e,n),r=Mt.mayDelete(e,n,!0);if(r)throw new Mt.ErrnoError(r);if(!e.node_ops.rmdir)throw new Mt.ErrnoError(63);if(Mt.isMountpoint(i))throw new Mt.ErrnoError(10);try{Mt.trackingDelegate.willDeletePath&&Mt.trackingDelegate.willDeletePath(t)}catch(C8){T("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+C8.message)}e.node_ops.rmdir(e,n),Mt.destroyNode(i);try{Mt.trackingDelegate.onDeletePath&&Mt.trackingDelegate.onDeletePath(t)}catch(C8){T("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+C8.message)}},readdir:function(t){var e=Mt.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new Mt.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(t){var e=Mt.lookupPath(t,{parent:!0}).node,n=Rt.basename(t),i=Mt.lookupNode(e,n),r=Mt.mayDelete(e,n,!1);if(r)throw new Mt.ErrnoError(r);if(!e.node_ops.unlink)throw new Mt.ErrnoError(63);if(Mt.isMountpoint(i))throw new Mt.ErrnoError(10);try{Mt.trackingDelegate.willDeletePath&&Mt.trackingDelegate.willDeletePath(t)}catch(C8){T("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+C8.message)}e.node_ops.unlink(e,n),Mt.destroyNode(i);try{Mt.trackingDelegate.onDeletePath&&Mt.trackingDelegate.onDeletePath(t)}catch(C8){T("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+C8.message)}},readlink:function(t){var e=Mt.lookupPath(t).node;if(!e)throw new Mt.ErrnoError(44);if(!e.node_ops.readlink)throw new Mt.ErrnoError(28);return Dt.resolve(Mt.getPath(e.parent),e.node_ops.readlink(e))},stat:function(t,e){var n=Mt.lookupPath(t,{follow:!e}).node;if(!n)throw new Mt.ErrnoError(44);if(!n.node_ops.getattr)throw new Mt.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(t){return Mt.stat(t,!0)},chmod:function(t,e,n){var i;"string"===typeof t?i=Mt.lookupPath(t,{follow:!n}).node:i=t;if(!i.node_ops.setattr)throw new Mt.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&e|-4096&i.mode,timestamp:Date.now()})},lchmod:function(t,e){Mt.chmod(t,e,!0)},fchmod:function(t,e){var n=Mt.getStream(t);if(!n)throw new Mt.ErrnoError(8);Mt.chmod(n.node,e)},chown:function(t,e,n,i){var r;"string"===typeof t?r=Mt.lookupPath(t,{follow:!i}).node:r=t;if(!r.node_ops.setattr)throw new Mt.ErrnoError(63);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:function(t,e,n){Mt.chown(t,e,n,!0)},fchown:function(t,e,n){var i=Mt.getStream(t);if(!i)throw new Mt.ErrnoError(8);Mt.chown(i.node,e,n)},truncate:function(t,e){if(e<0)throw new Mt.ErrnoError(28);var n;"string"===typeof t?n=Mt.lookupPath(t,{follow:!0}).node:n=t;if(!n.node_ops.setattr)throw new Mt.ErrnoError(63);if(Mt.isDir(n.mode))throw new Mt.ErrnoError(31);if(!Mt.isFile(n.mode))throw new Mt.ErrnoError(28);var i=Mt.nodePermissions(n,"w");if(i)throw new Mt.ErrnoError(i);n.node_ops.setattr(n,{size:e,timestamp:Date.now()})},ftruncate:function(t,e){var n=Mt.getStream(t);if(!n)throw new Mt.ErrnoError(8);if(0===(2097155&n.flags))throw new Mt.ErrnoError(28);Mt.truncate(n.node,e)},utime:function(t,e,n){var i=Mt.lookupPath(t,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(e,n)})},open:function(t,e,n,i,s){if(""===t)throw new Mt.ErrnoError(44);var o;if(n="undefined"===typeof n?438:n,n=64&(e="string"===typeof e?Mt.modeStringToFlags(e):e)?4095&n|32768:0,"object"===typeof t)o=t;else{t=Rt.normalize(t);try{o=Mt.lookupPath(t,{follow:!(131072&e)}).node}catch(C8){}}var a=!1;if(64&e)if(o){if(128&e)throw new Mt.ErrnoError(20)}else o=Mt.mknod(t,n,0),a=!0;if(!o)throw new Mt.ErrnoError(44);if(Mt.isChrdev(o.mode)&&(e&=-513),65536&e&&!Mt.isDir(o.mode))throw new Mt.ErrnoError(54);if(!a){var l=Mt.mayOpen(o,e);if(l)throw new Mt.ErrnoError(l)}512&e&&Mt.truncate(o,0),e&=-131713;var h=Mt.createStream({node:o,path:Mt.getPath(o),flags:e,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},i,s);h.stream_ops.open&&h.stream_ops.open(h),!r.logReadFiles||1&e||(Mt.readFiles||(Mt.readFiles={}),t in Mt.readFiles||(Mt.readFiles[t]=1,T("FS.trackingDelegate error on read file: "+t)));try{if(Mt.trackingDelegate.onOpenFile){var c=0;1!==(2097155&e)&&(c|=Mt.tracking.openFlags.READ),0!==(2097155&e)&&(c|=Mt.tracking.openFlags.WRITE),Mt.trackingDelegate.onOpenFile(t,c)}}catch(C8){T("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+C8.message)}return h},close:function(t){if(Mt.isClosed(t))throw new Mt.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(C8){throw C8}finally{Mt.closeStream(t.fd)}t.fd=null},isClosed:function(t){return null===t.fd},llseek:function(t,e,n){if(Mt.isClosed(t))throw new Mt.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new Mt.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Mt.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,n),t.ungotten=[],t.position},read:function(t,e,n,i,r){if(n>>>=0,i<0||r<0)throw new Mt.ErrnoError(28);if(Mt.isClosed(t))throw new Mt.ErrnoError(8);if(1===(2097155&t.flags))throw new Mt.ErrnoError(8);if(Mt.isDir(t.node.mode))throw new Mt.ErrnoError(31);if(!t.stream_ops.read)throw new Mt.ErrnoError(28);var s="undefined"!==typeof r;if(s){if(!t.seekable)throw new Mt.ErrnoError(70)}else r=t.position;var o=t.stream_ops.read(t,e,n,i,r);return s||(t.position+=o),o},write:function(t,e,n,i,r,s){if(n>>>=0,i<0||r<0)throw new Mt.ErrnoError(28);if(Mt.isClosed(t))throw new Mt.ErrnoError(8);if(0===(2097155&t.flags))throw new Mt.ErrnoError(8);if(Mt.isDir(t.node.mode))throw new Mt.ErrnoError(31);if(!t.stream_ops.write)throw new Mt.ErrnoError(28);t.seekable&&1024&t.flags&&Mt.llseek(t,0,2);var o="undefined"!==typeof r;if(o){if(!t.seekable)throw new Mt.ErrnoError(70)}else r=t.position;var a=t.stream_ops.write(t,e,n,i,r,s);o||(t.position+=a);try{t.path&&Mt.trackingDelegate.onWriteToFile&&Mt.trackingDelegate.onWriteToFile(t.path)}catch(C8){T("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+C8.message)}return a},allocate:function(t,e,n){if(Mt.isClosed(t))throw new Mt.ErrnoError(8);if(e<0||n<=0)throw new Mt.ErrnoError(28);if(0===(2097155&t.flags))throw new Mt.ErrnoError(8);if(!Mt.isFile(t.node.mode)&&!Mt.isDir(t.node.mode))throw new Mt.ErrnoError(43);if(!t.stream_ops.allocate)throw new Mt.ErrnoError(138);t.stream_ops.allocate(t,e,n)},mmap:function(t,e,n,i,r,s){if(e>>>=0,0!==(2&r)&&0===(2&s)&&2!==(2097155&t.flags))throw new Mt.ErrnoError(2);if(1===(2097155&t.flags))throw new Mt.ErrnoError(2);if(!t.stream_ops.mmap)throw new Mt.ErrnoError(43);return t.stream_ops.mmap(t,e,n,i,r,s)},msync:function(t,e,n,i,r){return n>>>=0,t&&t.stream_ops.msync?t.stream_ops.msync(t,e,n,i,r):0},munmap:function(t){return 0},ioctl:function(t,e,n){if(!t.stream_ops.ioctl)throw new Mt.ErrnoError(59);return t.stream_ops.ioctl(t,e,n)},readFile:function(t,e){if((e=e||{}).flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error('Invalid encoding type "'+e.encoding+'"');var n,i=Mt.open(t,e.flags),r=Mt.stat(t).size,s=new Uint8Array(r);return Mt.read(i,s,0,r,0),"utf8"===e.encoding?n=R(s,0):"binary"===e.encoding&&(n=s),Mt.close(i),n},writeFile:function(t,e,n){(n=n||{}).flags=n.flags||577;var i=Mt.open(t,n.flags,n.mode);if("string"===typeof e){var r=new Uint8Array(M(e)+1),s=O(e,r,0,r.length);Mt.write(i,r,0,s,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");Mt.write(i,e,0,e.byteLength,void 0,n.canOwn)}Mt.close(i)},cwd:function(){return Mt.currentPath},chdir:function(t){var e=Mt.lookupPath(t,{follow:!0});if(null===e.node)throw new Mt.ErrnoError(44);if(!Mt.isDir(e.node.mode))throw new Mt.ErrnoError(54);var n=Mt.nodePermissions(e.node,"x");if(n)throw new Mt.ErrnoError(n);Mt.currentPath=e.path},createDefaultDirectories:function(){Mt.mkdir("/tmp"),Mt.mkdir("/home"),Mt.mkdir("/home/web_user")},createDefaultDevices:function(){Mt.mkdir("/dev"),Mt.registerDevice(Mt.makedev(1,3),{read:function(){return 0},write:function(t,e,n,i,r){return i}}),Mt.mkdev("/dev/null",Mt.makedev(1,3)),Ot.register(Mt.makedev(5,0),Ot.default_tty_ops),Ot.register(Mt.makedev(6,0),Ot.default_tty1_ops),Mt.mkdev("/dev/tty",Mt.makedev(5,0)),Mt.mkdev("/dev/tty1",Mt.makedev(6,0));var t=function(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(y)try{var e=PI();return function(){return e.randomBytes(1)[0]}}catch(C8){}return function(){pt("randomDevice")}}();Mt.createDevice("/dev","random",t),Mt.createDevice("/dev","urandom",t),Mt.mkdir("/dev/shm"),Mt.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Mt.mkdir("/proc");var t=Mt.mkdir("/proc/self");Mt.mkdir("/proc/self/fd"),Mt.mount({mount:function(){var e=Mt.createNode(t,"fd",16895,73);return e.node_ops={lookup:function(t,e){var n=+e,i=Mt.getStream(n);if(!i)throw new Mt.ErrnoError(8);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return i.path}}};return r.parent=r,r}},e}},{},"/proc/self/fd")},createStandardStreams:function(){r.stdin?Mt.createDevice("/dev","stdin",r.stdin):Mt.symlink("/dev/tty","/dev/stdin"),r.stdout?Mt.createDevice("/dev","stdout",null,r.stdout):Mt.symlink("/dev/tty","/dev/stdout"),r.stderr?Mt.createDevice("/dev","stderr",null,r.stderr):Mt.symlink("/dev/tty1","/dev/stderr");Mt.open("/dev/stdin",0),Mt.open("/dev/stdout",1),Mt.open("/dev/stderr",1)},ensureErrnoError:function(){Mt.ErrnoError||(Mt.ErrnoError=function(t,e){this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},Mt.ErrnoError.prototype=new Error,Mt.ErrnoError.prototype.constructor=Mt.ErrnoError,[44].forEach((function(t){Mt.genericErrors[t]=new Mt.ErrnoError(t),Mt.genericErrors[t].stack="<generic error, no stack>"})))},staticInit:function(){Mt.ensureErrnoError(),Mt.nameTable=new Array(4096),Mt.mount(Nt,{},"/"),Mt.createDefaultDirectories(),Mt.createDefaultDevices(),Mt.createSpecialDirectories(),Mt.filesystems={MEMFS:Nt}},init:function(t,e,n){Mt.init.initialized=!0,Mt.ensureErrnoError(),r.stdin=t||r.stdin,r.stdout=e||r.stdout,r.stderr=n||r.stderr,Mt.createStandardStreams()},quit:function(){Mt.init.initialized=!1;var t=r._fflush;t&&t(0);for(var e=0;e<Mt.streams.length;e++){var n=Mt.streams[e];n&&Mt.close(n)}},getMode:function(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n},findObject:function(t,e){var n=Mt.analyzePath(t,e);return n.exists?n.object:null},analyzePath:function(t,e){try{t=(i=Mt.lookupPath(t,{follow:!e})).path}catch(C8){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=Mt.lookupPath(t,{parent:!0});n.parentExists=!0,n.parentPath=i.path,n.parentObject=i.node,n.name=Rt.basename(t),i=Mt.lookupPath(t,{follow:!e}),n.exists=!0,n.path=i.path,n.object=i.node,n.name=i.node.name,n.isRoot="/"===i.path}catch(C8){n.error=C8.errno}return n},createPath:function(t,e,n,i){t="string"===typeof t?t:Mt.getPath(t);for(var r=e.split("/").reverse();r.length;){var s=r.pop();if(s){var o=Rt.join2(t,s);try{Mt.mkdir(o)}catch(C8){}t=o}}return o},createFile:function(t,e,n,i,r){var s=Rt.join2("string"===typeof t?t:Mt.getPath(t),e),o=Mt.getMode(i,r);return Mt.create(s,o)},createDataFile:function(t,e,n,i,r,s){var o=e?Rt.join2("string"===typeof t?t:Mt.getPath(t),e):t,a=Mt.getMode(i,r),l=Mt.create(o,a);if(n){if("string"===typeof n){for(var h=new Array(n.length),c=0,u=n.length;c<u;++c)h[c]=n.charCodeAt(c);n=h}Mt.chmod(l,146|a);var p=Mt.open(l,577);Mt.write(p,n,0,n.length,0,s),Mt.close(p),Mt.chmod(l,a)}return l},createDevice:function(t,e,n,i){var r=Rt.join2("string"===typeof t?t:Mt.getPath(t),e),s=Mt.getMode(!!n,!!i);Mt.createDevice.major||(Mt.createDevice.major=64);var o=Mt.makedev(Mt.createDevice.major++,0);return Mt.registerDevice(o,{open:function(t){t.seekable=!1},close:function(t){i&&i.buffer&&i.buffer.length&&i(10)},read:function(t,e,i,r,s){for(var o=0,a=0;a<r;a++){var l;try{l=n()}catch(C8){throw new Mt.ErrnoError(29)}if(void 0===l&&0===o)throw new Mt.ErrnoError(6);if(null===l||void 0===l)break;o++,e[i+a]=l}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,r,s){for(var o=0;o<r;o++)try{i(e[n+o])}catch(C8){throw new Mt.ErrnoError(29)}return r&&(t.node.timestamp=Date.now()),o}}),Mt.mkdev(r,s,o)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!a)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=Tn(a(t.url),!0),t.usedBytes=t.contents.length}catch(C8){throw new Mt.ErrnoError(29)}},createLazyFile:function(t,e,n,i,r){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,n=t/this.chunkSize|0;return this.getter(n)[e]}},s.prototype.setDataGetter=function(t){this.getter=t},s.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",n,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+n+". Status: "+t.status);var e,i=Number(t.getResponseHeader("Content-length")),r=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,s=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,o=1048576;r||(o=i);var a=this;a.setDataGetter((function(t){var e=t*o,r=(t+1)*o-1;if(r=Math.min(r,i-1),"undefined"===typeof a.chunks[t]&&(a.chunks[t]=function(t,e){if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>i-1)throw new Error("only "+i+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",n,!1),i!==o&&r.setRequestHeader("Range","bytes="+t+"-"+e),"undefined"!=typeof Uint8Array&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(r.status>=200&&r.status<300||304===r.status))throw new Error("Couldn't load "+n+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):Tn(r.responseText||"",!0)}(e,r)),"undefined"===typeof a.chunks[t])throw new Error("doXHR failed!");return a.chunks[t]})),!s&&i||(o=i=1,i=this.getter(0).length,o=i,v("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=o,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!g)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new s;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:n};var l=Mt.createFile(t,e,a,i,r);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var h={};return Object.keys(l.stream_ops).forEach((function(t){var e=l.stream_ops[t];h[t]=function(){return Mt.forceLoadFile(l),e.apply(null,arguments)}})),h.read=function(t,e,n,i,r){Mt.forceLoadFile(l);var s=t.node.contents;if(r>=s.length)return 0;var o=Math.min(s.length-r,i);if(s.slice)for(var a=0;a<o;a++)e[n+a]=s[r+a];else for(a=0;a<o;a++)e[n+a]=s.get(r+a);return o},l.stream_ops=h,l},createPreloadedFile:function(t,e,n,i,s,o,a,h,c,u){Browser.init();var p=e?Dt.resolve(Rt.join2(t,e)):t;function d(n){function l(n){u&&u(),h||Mt.createDataFile(t,e,n,i,s,c),o&&o(),ut()}var d=!1;r.preloadPlugins.forEach((function(t){d||t.canHandle(p)&&(t.handle(n,p,l,(function(){a&&a(),ut()})),d=!0)})),d||l(n)}ct(),"string"==typeof n?function(t,e,n,i){var r=i?"":"al "+t;l(t,(function(n){A(n,'Loading data file "'+t+'" failed (no arrayBuffer).'),e(new Uint8Array(n)),r&&ut()}),(function(e){if(!n)throw'Loading data file "'+t+'" failed.';n()})),r&&ct()}(n,(function(t){d(t)}),a):d(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=Mt.indexedDB();try{var r=i.open(Mt.DB_NAME(),Mt.DB_VERSION)}catch(C8){return n(C8)}r.onupgradeneeded=function(){v("creating db"),r.result.createObjectStore(Mt.DB_STORE_NAME)},r.onsuccess=function(){var i=r.result.transaction([Mt.DB_STORE_NAME],"readwrite"),s=i.objectStore(Mt.DB_STORE_NAME),o=0,a=0,l=t.length;function h(){0==a?e():n()}t.forEach((function(t){var e=s.put(Mt.analyzePath(t).object.contents,t);e.onsuccess=function(){++o+a==l&&h()},e.onerror=function(){a++,o+a==l&&h()}})),i.onerror=n},r.onerror=n},loadFilesFromDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=Mt.indexedDB();try{var r=i.open(Mt.DB_NAME(),Mt.DB_VERSION)}catch(C8){return n(C8)}r.onupgradeneeded=n,r.onsuccess=function(){var i=r.result;try{var s=i.transaction([Mt.DB_STORE_NAME],"readonly")}catch(C8){return void n(C8)}var o=s.objectStore(Mt.DB_STORE_NAME),a=0,l=0,h=t.length;function c(){0==l?e():n()}t.forEach((function(t){var e=o.get(t);e.onsuccess=function(){Mt.analyzePath(t).exists&&Mt.unlink(t),Mt.createDataFile(Rt.dirname(t),Rt.basename(t),e.result,!0,!0,!0),++a+l==h&&c()},e.onerror=function(){l++,a+l==h&&c()}})),s.onerror=n},r.onerror=n}},Pt={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(t,e,n){if("/"===e[0])return e;var i;if(-100===t)i=Mt.cwd();else{var r=Mt.getStream(t);if(!r)throw new Mt.ErrnoError(8);i=r.path}if(0==e.length){if(!n)throw new Mt.ErrnoError(44);return i}return Rt.join2(i,e)},doStat:function(t,e,n){try{var i=t(e)}catch(C8){if(C8&&C8.node&&Rt.normalize(e)!==Rt.normalize(Mt.getPath(C8.node)))return-54;throw C8}return B[n>>>2]=i.dev,B[n+4>>>2]=0,B[n+8>>>2]=i.ino,B[n+12>>>2]=i.mode,B[n+16>>>2]=i.nlink,B[n+20>>>2]=i.uid,B[n+24>>>2]=i.gid,B[n+28>>>2]=i.rdev,B[n+32>>>2]=0,gt=[i.size>>>0,(mt=i.size,+Math.abs(mt)>=1?mt>0?(0|Math.min(+Math.floor(mt/4294967296),4294967295))>>>0:~~+Math.ceil((mt-+(~~mt>>>0))/4294967296)>>>0:0)],B[n+40>>>2]=gt[0],B[n+44>>>2]=gt[1],B[n+48>>>2]=4096,B[n+52>>>2]=i.blocks,B[n+56>>>2]=i.atime.getTime()/1e3|0,B[n+60>>>2]=0,B[n+64>>>2]=i.mtime.getTime()/1e3|0,B[n+68>>>2]=0,B[n+72>>>2]=i.ctime.getTime()/1e3|0,B[n+76>>>2]=0,gt=[i.ino>>>0,(mt=i.ino,+Math.abs(mt)>=1?mt>0?(0|Math.min(+Math.floor(mt/4294967296),4294967295))>>>0:~~+Math.ceil((mt-+(~~mt>>>0))/4294967296)>>>0:0)],B[n+80>>>2]=gt[0],B[n+84>>>2]=gt[1],0},doMsync:function(t,e,n,i,r){var s=L.slice(t,t+n);Mt.msync(e,s,r,n,i)},doMkdir:function(t,e){return"/"===(t=Rt.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),Mt.mkdir(t,e,0),0},doMknod:function(t,e,n){switch(61440&e){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Mt.mknod(t,e,n),0},doReadlink:function(t,e,n){if(n<=0)return-28;var i=Mt.readlink(t),r=Math.min(n,M(i)),s=F[e+r>>>0];return N(i,e,n+1),F[e+r>>>0]=s,r},doAccess:function(t,e){if(-8&e)return-28;var n;if(!(n=Mt.lookupPath(t,{follow:!0}).node))return-44;var i="";return 4&e&&(i+="r"),2&e&&(i+="w"),1&e&&(i+="x"),i&&Mt.nodePermissions(n,i)?-2:0},doDup:function(t,e,n){var i=Mt.getStream(n);return i&&Mt.close(i),Mt.open(t,e,0,n,n).fd},doReadv:function(t,e,n,i){for(var r=0,s=0;s<n;s++){var o=B[e+8*s>>>2],a=B[e+(8*s+4)>>>2],l=Mt.read(t,F,o,a,i);if(l<0)return-1;if(r+=l,l<a)break}return r},doWritev:function(t,e,n,i){for(var r=0,s=0;s<n;s++){var o=B[e+8*s>>>2],a=B[e+(8*s+4)>>>2],l=Mt.write(t,F,o,a,i);if(l<0)return-1;r+=l}return r},varargs:void 0,get:function(){return Pt.varargs+=4,B[Pt.varargs-4>>>2]},getStr:function(t){return D(t)},getStreamFromFD:function(t){var e=Mt.getStream(t);if(!e)throw new Mt.ErrnoError(8);return e},get64:function(t,e){return t}};var Ft={};function Lt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function kt(t){return this.fromWireType(z[t>>>2])}var Ut={},Bt={},zt={},Gt=48,Ht=57;function Vt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=Gt&&e<=Ht?"_"+t:t}function jt(t,e){return t=Vt(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function Wt(t,e){var n=jt(e,(function(t){this.name=e,this.message=t;var n=new Error(t).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Yt=void 0;function qt(t){throw new Yt(t)}function Xt(t,e,n){function i(e){var i=n(e);i.length!==t.length&&qt("Mismatched type converter count");for(var r=0;r<t.length;++r)ee(t[r],i[r])}t.forEach((function(t){zt[t]=e}));var r=new Array(e.length),s=[],o=0;e.forEach((function(t,e){Bt.hasOwnProperty(t)?r[e]=Bt[t]:(s.push(t),Ut.hasOwnProperty(t)||(Ut[t]=[]),Ut[t].push((function(){r[e]=Bt[t],++o===s.length&&i(r)})))})),0===s.length&&i(r)}var Zt={};function Kt(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var Qt=void 0;function Jt(t){for(var e="",n=t;L[n>>>0];)e+=Qt[L[n++>>>0]];return e}var $t=void 0;function te(t){throw new $t(t)}function ee(t,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=e.name;if(t||te('type "'+i+'" must have a positive integer typeid pointer'),Bt.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;te("Cannot register type '"+i+"' twice")}if(Bt[t]=e,delete zt[t],Ut.hasOwnProperty(t)){var r=Ut[t];delete Ut[t],r.forEach((function(t){t()}))}}function ne(t){if(!(this instanceof ge))return!1;if(!(t instanceof ge))return!1;for(var e=this.$$.ptrType.registeredClass,n=this.$$.ptr,i=t.$$.ptrType.registeredClass,r=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return e===i&&n===r}function ie(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function re(t){te(t.$$.ptrType.registeredClass.name+" instance already deleted")}var se=!1;function oe(t){}function ae(t){t.count.value-=1,0===t.count.value&&function(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}(t)}function le(t){return"undefined"===typeof FinalizationGroup?(le=function(t){return t},t):(se=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var n=e.value;n.ptr?ae(n):console.warn("object already deleted: "+n.ptr)}})),oe=function(t){se.unregister(t.$$)},(le=function(t){return se.register(t,t.$$,t.$$),t})(t))}function he(){if(this.$$.ptr||re(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=le(Object.create(Object.getPrototypeOf(this),{$$:{value:ie(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function ce(){this.$$.ptr||re(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&te("Object already scheduled for deletion"),oe(this),ae(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ue(){return!this.$$.ptr}var pe=void 0,de=[];function fe(){for(;de.length;){var t=de.pop();t.$$.deleteScheduled=!1,t.delete()}}function me(){return this.$$.ptr||re(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&te("Object already scheduled for deletion"),de.push(this),1===de.length&&pe&&pe(fe),this.$$.deleteScheduled=!0,this}function ge(){}var ye={};function _e(t,e,n){if(void 0===t[e].overloadTable){var i=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||te("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[i.argCount]=i}}function ve(t,e,n){r.hasOwnProperty(t)?((void 0===n||void 0!==r[t].overloadTable&&void 0!==r[t].overloadTable[n])&&te("Cannot register public name '"+t+"' twice"),_e(r,t,t),r.hasOwnProperty(n)&&te("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[t].overloadTable[n]=e):(r[t]=e,void 0!==n&&(r[t].numArguments=n))}function Te(t,e,n,i,r,s,o,a){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=r,this.getActualType=s,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function Ee(t,e,n){for(;e!==n;)e.upcast||te("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function xe(t,e){if(null===e)return this.isReference&&te("null is not a valid "+this.name),0;e.$$||te('Cannot pass "'+$e(e)+'" as a '+this.name),e.$$.ptr||te("Cannot pass deleted object as a pointer of type "+this.name);var n=e.$$.ptrType.registeredClass;return Ee(e.$$.ptr,n,this.registeredClass)}function Ie(t,e){var n;if(null===e)return this.isReference&&te("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,n),n):0;e.$$||te('Cannot pass "'+$e(e)+'" as a '+this.name),e.$$.ptr||te("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&te("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var i=e.$$.ptrType.registeredClass;if(n=Ee(e.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&te("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:te("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var r=e.clone();n=this.rawShare(n,Ke((function(){r.delete()}))),null!==t&&t.push(this.rawDestructor,n)}break;default:te("Unsupporting sharing policy")}return n}function be(t,e){if(null===e)return this.isReference&&te("null is not a valid "+this.name),0;e.$$||te('Cannot pass "'+$e(e)+'" as a '+this.name),e.$$.ptr||te("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&te("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;return Ee(e.$$.ptr,n,this.registeredClass)}function we(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function Se(t){this.rawDestructor&&this.rawDestructor(t)}function Ae(t){null!==t&&t.delete()}function Ce(t,e,n){if(e===n)return t;if(void 0===n.baseClass)return null;var i=Ce(t,e,n.baseClass);return null===i?null:n.downcast(i)}function Re(){return Object.keys(Ne).length}function De(){var t=[];for(var e in Ne)Ne.hasOwnProperty(e)&&t.push(Ne[e]);return t}function Oe(t){pe=t,de.length&&pe&&pe(fe)}var Ne={};function Me(t,e){return e=function(t,e){for(void 0===e&&te("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),Ne[e]}function Pe(t,e){return e.ptrType&&e.ptr||qt("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!==!!e.smartPtr&&qt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},le(Object.create(t,{$$:{value:e}}))}function Fe(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var n=Me(this.registeredClass,e);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=e,n.$$.smartPtr=t,n.clone();var i=n.clone();return this.destructor(t),i}function r(){return this.isSmartPointer?Pe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Pe(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var s,o=this.registeredClass.getActualType(e),a=ye[o];if(!a)return r.call(this);s=this.isConst?a.constPointerType:a.pointerType;var l=Ce(e,this.registeredClass,s.registeredClass);return null===l?r.call(this):this.isSmartPointer?Pe(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:t}):Pe(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function Le(t,e,n,i,r,s,o,a,l,h,c){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=i,this.isSmartPointer=r,this.pointeeType=s,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=h,this.rawDestructor=c,r||void 0!==e.baseClass?this.toWireType=Ie:i?(this.toWireType=xe,this.destructorFunction=null):(this.toWireType=be,this.destructorFunction=null)}function ke(t,e,n){r.hasOwnProperty(t)||qt("Replacing nonexistant public symbol"),void 0!==r[t].overloadTable&&void 0!==n?r[t].overloadTable[n]=e:(r[t]=e,r[t].argCount=n)}function Ue(t,e,n){return t.includes("j")?function(t,e,n){var i=r["dynCall_"+t];return n&&n.length?i.apply(null,[e].concat(n)):i.call(null,e)}(t,e,n):J.get(e).apply(null,n)}function Be(t,e){var n=(t=Jt(t)).includes("j")?function(t,e){var n=[];return function(){n.length=arguments.length;for(var i=0;i<arguments.length;i++)n[i]=arguments[i];return Ue(t,e,n)}}(t,e):J.get(e);return"function"!==typeof n&&te("unknown function pointer with signature "+t+": "+e),n}var ze=void 0;function Ge(t){var e=wn(t),n=Jt(e);return bn(e),n}function He(t,e){var n=[],i={};throw e.forEach((function t(e){i[e]||Bt[e]||(zt[e]?zt[e].forEach(t):(n.push(e),i[e]=!0))})),new ze(t+": "+n.map(Ge).join([", "]))}function Ve(t,e){for(var n=[],i=0;i<t;i++)n.push(B[(e>>2)+i>>>0]);return n}function je(t,e,n,i,r){var s=e.length;s<2&&te("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==e[1]&&null!==n,a=!1,l=1;l<e.length;++l)if(null!==e[l]&&void 0===e[l].destructorFunction){a=!0;break}var h="void"!==e[0].name,c="",u="";for(l=0;l<s-2;++l)c+=(0!==l?", ":"")+"arg"+l,u+=(0!==l?", ":"")+"arg"+l+"Wired";var p="return function "+Vt(t)+"("+c+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n";a&&(p+="var destructors = [];\n");var d=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[te,i,r,Lt,e[0],e[1]];o&&(p+="var thisWired = classParam.toWireType("+d+", this);\n");for(l=0;l<s-2;++l)p+="var arg"+l+"Wired = argType"+l+".toWireType("+d+", arg"+l+"); // "+e[l+2].name+"\n",f.push("argType"+l),m.push(e[l+2]);if(o&&(u="thisWired"+(u.length>0?", ":"")+u),p+=(h?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",a)p+="runDestructors(destructors);\n";else for(l=o?1:2;l<e.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==e[l].destructorFunction&&(p+=g+"_dtor("+g+"); // "+e[l].name+"\n",f.push(g+"_dtor"),m.push(e[l].destructorFunction))}h&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",f.push(p);var y=function(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=jt(t.name||"unknownFunctionName",(function(){}));n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return r instanceof Object?r:i}(Function,f).apply(null,m);return y}var We=[],Ye=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function qe(t){t>4&&0===--Ye[t].refcount&&(Ye[t]=void 0,We.push(t))}function Xe(){for(var t=0,e=5;e<Ye.length;++e)void 0!==Ye[e]&&++t;return t}function Ze(){for(var t=5;t<Ye.length;++t)if(void 0!==Ye[t])return Ye[t];return null}function Ke(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=We.length?We.pop():Ye.length;return Ye[e]={refcount:1,value:t},e}}function Qe(t,e,n){switch(e){case 0:return function(t){var e=n?F:L;return this.fromWireType(e[t>>>0])};case 1:return function(t){var e=n?k:U;return this.fromWireType(e[t>>>1])};case 2:return function(t){var e=n?B:z;return this.fromWireType(e[t>>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function Je(t,e){var n=Bt[t];return void 0===n&&te(e+" has unknown type "+Ge(t)),n}function $e(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function tn(t,e){switch(e){case 2:return function(t){return this.fromWireType(G[t>>>2])};case 3:return function(t){return this.fromWireType(H[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function en(t,e,n){switch(e){case 0:return n?function(t){return F[t>>>0]}:function(t){return L[t>>>0]};case 1:return n?function(t){return k[t>>>1]}:function(t){return U[t>>>1]};case 2:return n?function(t){return B[t>>>2]}:function(t){return z[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function nn(t){return t||te("Cannot use deleted val. handle = "+t),Ye[t].value}var rn,sn={};function on(t){var e=sn[t];return void 0===e?Jt(t):e}function an(){return"object"===typeof globalThis?globalThis:Function("return this")()}rn=y?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:function(){return performance.now()};function ln(t){try{return b.grow(t-P.byteLength+65535>>>16),Q(b.buffer),1}catch(C8){}}var hn={};function cn(){if(!cn.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(var e in hn)void 0===hn[e]?delete t[e]:t[e]=hn[e];var n=[];for(var e in t)n.push(e+"="+t[e]);cn.strings=n}return cn.strings}function un(t){return t%4===0&&(t%100!==0||t%400===0)}function pn(t,e){for(var n=0,i=0;i<=e;n+=t[i++]);return n}var dn=[31,29,31,30,31,30,31,31,30,31,30,31],fn=[31,28,31,30,31,30,31,31,30,31,30,31];function mn(t,e){for(var n=new Date(t.getTime());e>0;){var i=un(n.getFullYear()),r=n.getMonth(),s=(i?dn:fn)[r];if(!(e>s-n.getDate()))return n.setDate(n.getDate()+e),n;e-=s-n.getDate()+1,n.setDate(1),r<11?n.setMonth(r+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function gn(t,e,n,i){var r=B[i+40>>>2],s={tm_sec:B[i>>>2],tm_min:B[i+4>>>2],tm_hour:B[i+8>>>2],tm_mday:B[i+12>>>2],tm_mon:B[i+16>>>2],tm_year:B[i+20>>>2],tm_wday:B[i+24>>>2],tm_yday:B[i+28>>>2],tm_isdst:B[i+32>>>2],tm_gmtoff:B[i+36>>>2],tm_zone:r?D(r):""},o=D(n),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in a)o=o.replace(new RegExp(l,"g"),a[l]);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(t,e,n){for(var i="number"===typeof t?t.toString():t||"";i.length<e;)i=n[0]+i;return i}function p(t,e){return u(t,e,"0")}function d(t,e){function n(t){return t<0?-1:t>0?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function f(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function m(t){var e=mn(new Date(t.tm_year+1900,0,1),t.tm_yday),n=new Date(e.getFullYear(),0,4),i=new Date(e.getFullYear()+1,0,4),r=f(n),s=f(i);return d(r,e)<=0?d(s,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var g={"%a":function(t){return h[t.tm_wday].substring(0,3)},"%A":function(t){return h[t.tm_wday]},"%b":function(t){return c[t.tm_mon].substring(0,3)},"%B":function(t){return c[t.tm_mon]},"%C":function(t){return p((t.tm_year+1900)/100|0,2)},"%d":function(t){return p(t.tm_mday,2)},"%e":function(t){return u(t.tm_mday,2," ")},"%g":function(t){return m(t).toString().substring(2)},"%G":function(t){return m(t)},"%H":function(t){return p(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),p(e,2)},"%j":function(t){return p(t.tm_mday+pn(un(t.tm_year+1900)?dn:fn,t.tm_mon-1),3)},"%m":function(t){return p(t.tm_mon+1,2)},"%M":function(t){return p(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return p(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),n=0===e.getDay()?e:mn(e,7-e.getDay()),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(d(n,i)<0){var r=pn(un(i.getFullYear())?dn:fn,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return p(Math.ceil(s/7),2)}return 0===d(n,e)?"01":"00"},"%V":function(t){var e,n=new Date(t.tm_year+1900,0,4),i=new Date(t.tm_year+1901,0,4),r=f(n),s=f(i),o=mn(new Date(t.tm_year+1900,0,1),t.tm_yday);return d(o,r)<0?"53":d(s,o)<=0?"01":(e=r.getFullYear()<t.tm_year+1900?t.tm_yday+32-r.getDate():t.tm_yday+1-r.getDate(),p(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),n=1===e.getDay()?e:mn(e,0===e.getDay()?1:7-e.getDay()+1),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(d(n,i)<0){var r=pn(un(i.getFullYear())?dn:fn,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return p(Math.ceil(s/7),2)}return 0===d(n,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,n=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(n?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var l in g)o.includes(l)&&(o=o.replace(new RegExp(l,"g"),g[l](s)));var y,_,v=Tn(o,!1);return v.length>e?0:(y=v,_=t,F.set(y,_>>>0),v.length-1)}var yn=function(t,e,n,i){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=Mt.nextInode++,this.name=e,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=i},_n=365,vn=146;function Tn(t,e,n){var i=n>0?n:M(t)+1,r=new Array(i),s=O(t,r,0,r.length);return e&&(r.length=s),r}Object.defineProperties(yn.prototype,{read:{get:function(){return(this.mode&_n)===_n},set:function(t){t?this.mode|=_n:this.mode&=-366}},write:{get:function(){return(this.mode&vn)===vn},set:function(t){t?this.mode|=vn:this.mode&=-147}},isFolder:{get:function(){return Mt.isDir(this.mode)}},isDevice:{get:function(){return Mt.isChrdev(this.mode)}}}),Mt.FSNode=yn,Mt.staticInit(),r.FS_createPath=Mt.createPath,r.FS_createDataFile=Mt.createDataFile,r.FS_createPreloadedFile=Mt.createPreloadedFile,r.FS_createLazyFile=Mt.createLazyFile,r.FS_createDevice=Mt.createDevice,r.FS_unlink=Mt.unlink,Yt=r.InternalError=Wt(Error,"InternalError"),function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Qt=t}(),$t=r.BindingError=Wt(Error,"BindingError"),ge.prototype.isAliasOf=ne,ge.prototype.clone=he,ge.prototype.delete=ce,ge.prototype.isDeleted=ue,ge.prototype.deleteLater=me,Le.prototype.getPointee=we,Le.prototype.destructor=Se,Le.prototype.argPackAdvance=8,Le.prototype.readValueFromPointer=kt,Le.prototype.deleteObject=Ae,Le.prototype.fromWireType=Fe,r.getInheritedInstanceCount=Re,r.getLiveInheritedInstances=De,r.flushPendingDeletes=fe,r.setDelayFunction=Oe,ze=r.UnboundTypeError=Wt(Error,"UnboundTypeError"),r.count_emval_handles=Xe,r.get_first_emval=Ze;var En,xn={ga:function(t,e,n,i){pt("Assertion failed: "+D(t)+", at: "+[e?D(e):"unknown filename",n,i?D(i):"unknown function"])},m:function(t){return In(t+16)+16},u:function(t){var e=new It(t),n=e.get_exception_info();return n.get_caught()||(n.set_caught(!0),wt--),n.set_rethrown(!1),bt.push(e),function(t){t.add_ref()}(n),e.get_exception_ptr()},x:function(){Rn(0);var t=bt.pop();!function(t){if(t.release_ref()&&!t.get_rethrown()){var e=t.get_destructor();e&&J.get(e)(t.excPtr),At(t.excPtr)}}(t.get_exception_info()),t.free(),St=0},b:function(){var t=St;if(!t)return I(0),0;var e=new xt(t).get_type(),n=new It;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return I(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Dn(s,e,n.get_adjusted_ptr_addr()))return I(s),0|n.ptr}return I(e),0|n.ptr},l:function(){var t=St;if(!t)return I(0),0;var e=new xt(t).get_type(),n=new It;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return I(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Dn(s,e,n.get_adjusted_ptr_addr()))return I(s),0|n.ptr}return I(e),0|n.ptr},A:At,$:function(){var t=bt.pop();t||pt("no exception to throw");var e=t.get_exception_info(),n=t.get_base_ptr();throw e.get_rethrown()?t.free():(bt.push(t),e.set_rethrown(!0),e.set_caught(!1),wt++),St=n,n},n:function(t,e,n){throw new xt(t).init(e,n),St=t,wt++,t},pa:function(){return wt},h:function(t){var e=new It(t),n=e.get_base_ptr();throw St||(St=n),e.free(),n},ba:function(t,e,n){Pt.varargs=n;try{var i=Pt.getStreamFromFD(t);switch(e){case 0:return(r=Pt.get())<0?-28:Mt.open(i.path,i.flags,0,r).fd;case 1:case 2:case 13:case 14:return 0;case 3:return i.flags;case 4:var r=Pt.get();return i.flags|=r,0;case 12:r=Pt.get();return k[r+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return Ct(28),-1}}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),-C8.errno}},qa:function(t,e,n){Pt.varargs=n;try{var i=Pt.getStreamFromFD(t);switch(e){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return i.tty?0:-59;case 21519:if(!i.tty)return-59;var r=Pt.get();return B[r>>>2]=0,0;case 21520:return i.tty?-28:-59;case 21531:r=Pt.get();return Mt.ioctl(i,e,r);default:pt("bad ioctl syscall "+e)}}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),-C8.errno}},ra:function(t,e,n){Pt.varargs=n;try{var i=Pt.getStr(t),r=n?Pt.get():0;return Mt.open(i,e,r).fd}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),-C8.errno}},Ca:function(t){var e=Ft[t];delete Ft[t];var n=e.elements,i=n.length,r=n.map((function(t){return t.getterReturnType})).concat(n.map((function(t){return t.setterArgumentType}))),s=e.rawConstructor,o=e.rawDestructor;Xt([t],r,(function(t){return n.forEach((function(e,n){var r=t[n],s=e.getter,o=e.getterContext,a=t[n+i],l=e.setter,h=e.setterContext;e.read=function(t){return r.fromWireType(s(o,t))},e.write=function(t,e){var n=[];l(h,t,a.toWireType(n,e)),Lt(n)}})),[{name:e.name,fromWireType:function(t){for(var e=new Array(i),r=0;r<i;++r)e[r]=n[r].read(t);return o(t),e},toWireType:function(t,r){if(i!==r.length)throw new TypeError("Incorrect number of tuple elements for "+e.name+": expected="+i+", actual="+r.length);for(var a=s(),l=0;l<i;++l)n[l].write(a,r[l]);return null!==t&&t.push(o,a),a},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:o}]}))},Fa:function(t){var e=Zt[t];delete Zt[t];var n=e.rawConstructor,i=e.rawDestructor,r=e.fields;Xt([t],r.map((function(t){return t.getterReturnType})).concat(r.map((function(t){return t.setterArgumentType}))),(function(t){var s={};return r.forEach((function(e,n){var i=e.fieldName,o=t[n],a=e.getter,l=e.getterContext,h=t[n+r.length],c=e.setter,u=e.setterContext;s[i]={read:function(t){return o.fromWireType(a(l,t))},write:function(t,e){var n=[];c(u,t,h.toWireType(n,e)),Lt(n)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var n in s)e[n]=s[n].read(t);return i(t),e},toWireType:function(t,e){for(var r in s)if(!(r in e))throw new TypeError('Missing field:  "'+r+'"');var o=n();for(r in s)s[r].write(o,e[r]);return null!==t&&t.push(i,o),o},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:i}]}))},ka:function(t,e,n,i,r){},ya:function(t,e,n,i,r){var s=Kt(n);ee(t,{name:e=Jt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:r},argPackAdvance:8,readValueFromPointer:function(t){var i;if(1===n)i=F;else if(2===n)i=k;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);i=B}return this.fromWireType(i[t>>>s])},destructorFunction:null})},K:function(t,e,n,i,r,s,o,a,l,h,c,u,p){c=Jt(c),s=Be(r,s),a&&(a=Be(o,a)),h&&(h=Be(l,h)),p=Be(u,p);var d=Vt(c);ve(d,(function(){He("Cannot construct "+c+" due to unbound types",[i])})),Xt([t,e,n],i?[i]:[],(function(e){var n,r;e=e[0],r=i?(n=e.registeredClass).instancePrototype:ge.prototype;var o=jt(d,(function(){if(Object.getPrototypeOf(this)!==l)throw new $t("Use 'new' to construct "+c);if(void 0===u.constructor_body)throw new $t(c+" has no accessible constructor");var t=u.constructor_body[arguments.length];if(void 0===t)throw new $t("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),l=Object.create(r,{constructor:{value:o}});o.prototype=l;var u=new Te(c,o,l,p,n,s,a,h),f=new Le(c,u,!0,!1,!1),m=new Le(c+"*",u,!1,!1,!1),g=new Le(c+" const*",u,!1,!0,!1);return ye[t]={pointerType:m,constPointerType:g},ke(d,o),[f,m,g]}))},J:function(t,e,n,i,r,s){A(e>0);var o=Ve(e,n);r=Be(i,r);var a=[s],l=[];Xt([],[t],(function(t){var n="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new $t("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){He("Cannot construct "+t.name+" due to unbound types",o)},Xt([],o,(function(i){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&te(n+" called with "+arguments.length+" arguments, expected "+(e-1)),l.length=0,a.length=e;for(var t=1;t<e;++t)a[t]=i[t].toWireType(l,arguments[t-1]);var s=r.apply(null,a);return Lt(l),i[0].fromWireType(s)},[]})),[]}))},p:function(t,e,n,i,r,s,o,a){var l=Ve(n,i);e=Jt(e),s=Be(r,s),Xt([],[t],(function(t){var i=(t=t[0]).name+"."+e;function r(){He("Cannot call "+i+" due to unbound types",l)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var h=t.registeredClass.instancePrototype,c=h[e];return void 0===c||void 0===c.overloadTable&&c.className!==t.name&&c.argCount===n-2?(r.argCount=n-2,r.className=t.name,h[e]=r):(_e(h,e,i),h[e].overloadTable[n-2]=r),Xt([],l,(function(r){var a=je(i,r,t,s,o);return void 0===h[e].overloadTable?(a.argCount=n-2,h[e]=a):h[e].overloadTable[n-2]=a,[]})),[]}))},xa:function(t,e){ee(t,{name:e=Jt(e),fromWireType:function(t){var e=Ye[t].value;return qe(t),e},toWireType:function(t,e){return Ke(e)},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:null})},Aa:function(t,e,n,i){var r=Kt(n);function s(){}e=Jt(e),s.values={},ee(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:Qe(e,r,i),destructorFunction:null}),ve(e,s)},Q:function(t,e,n){var i=Je(t,"enum");e=Jt(e);var r=i.constructor,s=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:jt(i.name+"_"+e,(function(){}))}});r.values[n]=s,r[e]=s},ea:function(t,e,n){var i=Kt(n);ee(t,{name:e=Jt(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!==typeof e&&"boolean"!==typeof e)throw new TypeError('Cannot convert "'+$e(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:tn(e,i),destructorFunction:null})},s:function(t,e,n,i,r,s){var o=Ve(e,n);t=Jt(t),r=Be(i,r),ve(t,(function(){He("Cannot call "+t+" due to unbound types",o)}),e-1),Xt([],o,(function(n){var i=[n[0],null].concat(n.slice(1));return ke(t,je(t,i,null,r,s),e-1),[]}))},z:function(t,e,n,i,r){e=Jt(e),-1===r&&(r=4294967295);var s=Kt(n),o=function(t){return t};if(0===i){var a=32-8*n;o=function(t){return t<<a>>>a}}var l=e.includes("unsigned");ee(t,{name:e,fromWireType:o,toWireType:function(t,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+$e(n)+'" to '+this.name);if(n<i||n>r)throw new TypeError('Passing a number "'+$e(n)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+i+", "+r+"]!");return l?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:en(e,s,0!==i),destructorFunction:null})},w:function(t,e,n){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){var e=z,n=e[(t>>=2)>>>0],r=e[t+1>>>0];return new i(P,r,n)}ee(t,{name:n=Jt(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},fa:function(t,e){var n="std::string"===(e=Jt(e));ee(t,{name:e,fromWireType:function(t){var e,i=z[t>>>2];if(n)for(var r=t+4,s=0;s<=i;++s){var o=t+4+s;if(s==i||0==L[o>>>0]){var a=D(r,o-r);void 0===e?e=a:(e+=String.fromCharCode(0),e+=a),r=o+1}}else{var l=new Array(i);for(s=0;s<i;++s)l[s]=String.fromCharCode(L[t+4+s>>>0]);e=l.join("")}return bn(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i="string"===typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||te("Cannot pass non-string to std::string");var r=(n&&i?function(){return M(e)}:function(){return e.length})(),s=In(4+r+1);if(z[(s>>>=0)>>>2]=r,n&&i)N(e,s+4,r+1);else if(i)for(var o=0;o<r;++o){var a=e.charCodeAt(o);a>255&&(bn(s),te("String has UTF-16 code units that do not fit in 8 bits")),L[s+4+o>>>0]=a}else for(o=0;o<r;++o)L[s+4+o>>>0]=e[o];return null!==t&&t.push(bn,s),s},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:function(t){bn(t)}})},U:function(t,e,n){var i,r,s,o,a;n=Jt(n),2===e?(i=j,r=W,o=Y,s=function(){return U},a=1):4===e&&(i=q,r=X,o=Z,s=function(){return z},a=2),ee(t,{name:n,fromWireType:function(t){for(var n,r=z[t>>>2],o=s(),l=t+4,h=0;h<=r;++h){var c=t+4+h*e;if(h==r||0==o[c>>>a]){var u=i(l,c-l);void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),l=c+e}}return bn(t),n},toWireType:function(t,i){"string"!==typeof i&&te("Cannot pass non-string to C++ string type "+n);var s=o(i),l=In(4+s+e);return z[(l>>>=0)>>>2]=s>>a,r(i,l+4,s+e),null!==t&&t.push(bn,l),l},argPackAdvance:8,readValueFromPointer:kt,destructorFunction:function(t){bn(t)}})},Da:function(t,e,n,i,r,s){Ft[t]={name:Jt(e),rawConstructor:Be(n,i),rawDestructor:Be(r,s),elements:[]}},Ba:function(t,e,n,i,r,s,o,a,l){Ft[t].elements.push({getterReturnType:e,getter:Be(n,i),getterContext:r,setterArgumentType:s,setter:Be(o,a),setterContext:l})},I:function(t,e,n,i,r,s){Zt[t]={name:Jt(e),rawConstructor:Be(n,i),rawDestructor:Be(r,s),fields:[]}},Ea:function(t,e,n,i,r,s,o,a,l,h){Zt[t].fields.push({fieldName:Jt(e),getterReturnType:n,getter:Be(i,r),getterContext:s,setterArgumentType:o,setter:Be(a,l),setterContext:h})},za:function(t,e){ee(t,{isVoid:!0,name:e=Jt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},R:function(t,e,n){t=nn(t),e=Je(e,"emval::as");var i=[],r=Ke(i);return B[n>>>2]=r,e.toWireType(i,t)},ha:function(t,e,n,i){t=nn(t);for(var r=function(t,e){for(var n=new Array(t),i=0;i<t;++i)n[i]=Je(B[(e>>2)+i>>>0],"parameter "+i);return n}(e,n),s=new Array(e),o=0;o<e;++o){var a=r[o];s[o]=a.readValueFromPointer(i),i+=a.argPackAdvance}return Ke(t.apply(void 0,s))},na:qe,Ma:function(t){return 0===t?Ke(an()):(t=on(t),Ke(an()[t]))},Ia:function(t,e){return Ke((t=nn(t))[e=nn(e)])},_:function(t){t>4&&(Ye[t].refcount+=1)},la:function(t,e){return(t=nn(t))instanceof(e=nn(e))},La:function(t){return"number"===typeof(t=nn(t))},Ka:function(){return Ke([])},V:function(t){return Ke(on(t))},Ja:function(){return Ke({})},Ha:function(t){Lt(Ye[t].value),qe(t)},Ga:function(t,e,n){t=nn(t),e=nn(e),n=nn(n),t[e]=n},B:function(t,e){return Ke((t=Je(t,"_emval_take_value")).readValueFromPointer(e))},da:function(){pt()},aa:function(t,e){var n;if(0===t)n=Date.now();else{if(1!==t&&4!==t)return Ct(28),-1;n=rn()}return B[e>>>2]=n/1e3|0,B[e+4>>>2]=n%1e3*1e3*1e3|0,0},oa:function(t,e,n){L.copyWithin(t>>>0,e>>>0,e+n>>>0)},T:function(t){var e=L.length,n=4294901760;if((t>>>=0)>n)return!1;for(var i=1;i<=4;i*=2){var r=e*(1+.2/i);if(r=Math.min(r,t+100663296),ln(Math.min(n,K(Math.max(t,r),65536))))return!0}return!1},ta:function(t,e){try{var n=0;return cn().forEach((function(i,r){var s=e+n;B[t+4*r>>>2]=s,function(t,e,n){for(var i=0;i<t.length;++i)F[e++>>>0]=t.charCodeAt(i);n||(F[e>>>0]=0)}(i,s),n+=i.length+1})),0}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),C8.errno}},ua:function(t,e){try{var n=cn();B[t>>>2]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),B[e>>>2]=i,0}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),C8.errno}},ca:function(t){try{var e=Pt.getStreamFromFD(t);return Mt.close(e),0}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),C8.errno}},wa:function(t,e,n,i){try{var r=Pt.getStreamFromFD(t),s=Pt.doReadv(r,e,n);return B[i>>>2]=s,0}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),C8.errno}},ja:function(t,e,n,i,r){try{var s=Pt.getStreamFromFD(t),o=4294967296*n+(e>>>0),a=9007199254740992;return o<=-a||o>=a?-61:(Mt.llseek(s,o,i),gt=[s.position>>>0,(mt=s.position,+Math.abs(mt)>=1?mt>0?(0|Math.min(+Math.floor(mt/4294967296),4294967295))>>>0:~~+Math.ceil((mt-+(~~mt>>>0))/4294967296)>>>0:0)],B[r>>>2]=gt[0],B[r+4>>>2]=gt[1],s.getdents&&0===o&&0===i&&(s.getdents=null),0)}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),C8.errno}},va:function(t,e,n,i){try{var r=Pt.getStreamFromFD(t),s=Pt.doWritev(r,e,n);return B[i>>>2]=s,0}catch(C8){return"undefined"!==typeof Mt&&C8 instanceof Mt.ErrnoError||pt(C8),C8.errno}},a:function(){return x},G:function(t,e,n,i){var r=An();try{return J.get(t)(e,n,i)}catch(C8){if(Cn(r),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},C:function(t){var e=An();try{return J.get(t)()}catch(C8){if(Cn(e),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},c:function(t,e){var n=An();try{return J.get(t)(e)}catch(C8){if(Cn(n),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},O:function(t,e,n){var i=An();try{return J.get(t)(e,n)}catch(C8){if(Cn(i),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},i:function(t,e,n){var i=An();try{return J.get(t)(e,n)}catch(C8){if(Cn(i),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},j:function(t,e,n,i){var r=An();try{return J.get(t)(e,n,i)}catch(C8){if(Cn(r),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},P:function(t,e,n,i,r){var s=An();try{return J.get(t)(e,n,i,r)}catch(C8){if(Cn(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},X:function(t,e,n,i,r,s){var o=An();try{return J.get(t)(e,n,i,r,s)}catch(C8){if(Cn(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},E:function(t,e,n,i,r,s){var o=An();try{return J.get(t)(e,n,i,r,s)}catch(C8){if(Cn(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},y:function(t,e,n,i,r,s,o){var a=An();try{return J.get(t)(e,n,i,r,s,o)}catch(C8){if(Cn(a),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},Y:function(t,e,n,i,r,s,o,a){var l=An();try{return J.get(t)(e,n,i,r,s,o,a)}catch(C8){if(Cn(l),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},N:function(t,e,n,i,r,s,o,a,l){var h=An();try{return J.get(t)(e,n,i,r,s,o,a,l)}catch(C8){if(Cn(h),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},M:function(t,e,n,i,r,s,o,a,l,h,c,u){var p=An();try{return J.get(t)(e,n,i,r,s,o,a,l,h,c,u)}catch(C8){if(Cn(p),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},ia:function(t){var e=An();try{return Nn(t)}catch(C8){if(Cn(e),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},f:function(t){var e=An();try{J.get(t)()}catch(C8){if(Cn(e),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},e:function(t,e){var n=An();try{J.get(t)(e)}catch(C8){if(Cn(n),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},H:function(t,e,n,i,r){var s=An();try{J.get(t)(e,n,i,r)}catch(C8){if(Cn(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},F:function(t,e,n,i,r,s,o){var a=An();try{J.get(t)(e,n,i,r,s,o)}catch(C8){if(Cn(a),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},g:function(t,e,n){var i=An();try{J.get(t)(e,n)}catch(C8){if(Cn(i),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},r:function(t,e,n,i,r){var s=An();try{J.get(t)(e,n,i,r)}catch(C8){if(Cn(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},d:function(t,e,n,i){var r=An();try{J.get(t)(e,n,i)}catch(C8){if(Cn(r),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},k:function(t,e,n,i,r){var s=An();try{J.get(t)(e,n,i,r)}catch(C8){if(Cn(s),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},Z:function(t,e,n,i,r,s){var o=An();try{J.get(t)(e,n,i,r,s)}catch(C8){if(Cn(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},S:function(t,e,n,i,r,s,o,a){var l=An();try{J.get(t)(e,n,i,r,s,o,a)}catch(C8){if(Cn(l),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},D:function(t,e,n,i,r,s){var o=An();try{J.get(t)(e,n,i,r,s)}catch(C8){if(Cn(o),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},v:function(t,e,n,i,r,s,o){var a=An();try{J.get(t)(e,n,i,r,s,o)}catch(C8){if(Cn(a),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},q:function(t,e,n,i,r,s,o,a){var l=An();try{J.get(t)(e,n,i,r,s,o,a)}catch(C8){if(Cn(l),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},t:function(t,e,n,i,r,s,o,a,l,h){var c=An();try{J.get(t)(e,n,i,r,s,o,a,l,h)}catch(C8){if(Cn(c),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},o:function(t,e,n,i,r,s,o,a,l,h,c){var u=An();try{J.get(t)(e,n,i,r,s,o,a,l,h,c)}catch(C8){if(Cn(u),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},L:function(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){var g=An();try{J.get(t)(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m)}catch(C8){if(Cn(g),C8!==C8+0&&"longjmp"!==C8)throw C8;Rn(1,0)}},ma:function(t){return t},W:function(t){I(t)},sa:function(t,e,n,i){return gn(t,e,n,i)}},In=(function(){var t={a:xn};function e(t,e){var n=t.exports;r.asm=n,Q((b=r.asm.Na).buffer),J=r.asm.Ra,function(t){tt.unshift(t)}(r.asm.Oa),ut()}function n(t){e(t.instance)}function s(e){return function(){if(!E&&(m||g)){if("function"===typeof fetch&&!vt(dt))return fetch(dt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+dt+"'";return t.arrayBuffer()})).catch((function(){return Tt(dt)}));if(l)return new Promise((function(t,e){l(dt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return Tt(dt)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){T("failed to asynchronously prepare wasm: "+t),pt(t)}))}if(ct(),r.instantiateWasm)try{return r.instantiateWasm(t,e)}catch(C8){return T("Module.instantiateWasm callback failed with error: "+C8),!1}(E||"function"!==typeof WebAssembly.instantiateStreaming||_t(dt)||vt(dt)||"function"!==typeof fetch?s(n):fetch(dt,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(n,(function(t){return T("wasm streaming compile failed: "+t),T("falling back to ArrayBuffer instantiation"),s(n)}))}))).catch(i)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.Oa).apply(null,arguments)},r._main=function(){return(r._main=r.asm.Pa).apply(null,arguments)},r._malloc=function(){return(In=r._malloc=r.asm.Qa).apply(null,arguments)}),bn=r._free=function(){return(bn=r._free=r.asm.Sa).apply(null,arguments)},wn=r.___getTypeName=function(){return(wn=r.___getTypeName=r.asm.Ta).apply(null,arguments)},Sn=(r.___embind_register_native_and_builtin_types=function(){return(r.___embind_register_native_and_builtin_types=r.asm.Ua).apply(null,arguments)},r.___errno_location=function(){return(Sn=r.___errno_location=r.asm.Va).apply(null,arguments)}),An=r.stackSave=function(){return(An=r.stackSave=r.asm.Wa).apply(null,arguments)},Cn=r.stackRestore=function(){return(Cn=r.stackRestore=r.asm.Xa).apply(null,arguments)},Rn=r._setThrew=function(){return(Rn=r._setThrew=r.asm.Ya).apply(null,arguments)},Dn=r.___cxa_can_catch=function(){return(Dn=r.___cxa_can_catch=r.asm.Za).apply(null,arguments)},On=r.___cxa_is_pointer_type=function(){return(On=r.___cxa_is_pointer_type=r.asm._a).apply(null,arguments)},Nn=(r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.$a).apply(null,arguments)},r.dynCall_j=function(){return(Nn=r.dynCall_j=r.asm.ab).apply(null,arguments)});r.dynCall_viijii=function(){return(r.dynCall_viijii=r.asm.bb).apply(null,arguments)},r.dynCall_iiiiij=function(){return(r.dynCall_iiiiij=r.asm.cb).apply(null,arguments)},r.dynCall_iiiiijj=function(){return(r.dynCall_iiiiijj=r.asm.db).apply(null,arguments)},r.dynCall_iiiiiijj=function(){return(r.dynCall_iiiiiijj=r.asm.eb).apply(null,arguments)};function Mn(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}r.addRunDependency=ct,r.removeRunDependency=ut,r.FS_createPath=Mt.createPath,r.FS_createDataFile=Mt.createDataFile,r.FS_createPreloadedFile=Mt.createPreloadedFile,r.FS_createLazyFile=Mt.createLazyFile,r.FS_createDevice=Mt.createDevice,r.FS_unlink=Mt.unlink,r.FS=Mt;function Pn(t){var e=r._main;try{!function(t,e){t,rt()||(!0,r.onExit&&r.onExit(t),S=!0);f(t,new Mn(t))}(e(0,0))}catch(C8){if(C8 instanceof Mn||"unwind"==C8)return;var n=C8;C8&&"object"===typeof C8&&C8.stack&&(n=[C8,C8.stack]),T("exception thrown: "+n),f(1,C8)}finally{!0}}function Fn(t){function e(){En||(En=!0,r.calledRun=!0,S||(!0,r.noFSInit||Mt.init.initialized||Mt.init(),Mt.ignorePermissions=!1,Ot.init(),Et(tt),Et(et),n(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Ln&&Pn(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)ot(r.postRun.shift());Et(nt)}()))}t=t||p,at>0||(!function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)st(r.preRun.shift());Et($)}(),at>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e()))}if(ht=function t(){En||Fn(),En||(ht=t)},r.run=Fn,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();var Ln=!0;return r.noInitialRun&&(Ln=!1),Fn(),e.ready}}();"object"===typeof t&&"object"===typeof e?e.exports=i:"function"===typeof define&&n.amdO?define([],(function(){return i})):"object"===typeof t&&(t.WebIFCWasm=i)}}),kI=4288193352,UI=1634111441,BI=177149247,zI=2056796094,GI=3087945054,HI=325726236,VI=1674181508,jI=277319702,WI=753842376,YI=2906023776,qI=4196446775,XI=32344328,ZI=644574406,KI=963979645,QI=4031249490,JI=3299480353,$I=2979338954,tb=1095909175,eb=3124254112,nb=2938176219,ib=635142910,rb=3758799889,sb=1051757585,ob=4217484030,ab=3999819293,lb=3902619387,hb=3296154744,cb=1677625105,ub=639361253,pb=843113511,db=905975707,fb=3221913625,mb=3571504051,gb=2272882330,yb=25142252,_b=4136498852,vb=3640358203,Tb=1973544240,Eb=3495092785,xb=4074379575,Ib=3426335179,bb=1335981549,wb=1052013943,Sb=1062813311,Ab=1945004755,Cb=3040386961,Rb=3041715199,Db=395920057,Ob=3242481149,Nb=342316401,Mb=3518393246,Pb=1360408905,Fb=1904799276,Lb=862014818,kb=3310460725,Ub=264262732,Bb=402227799,zb=1003880860,Gb=1758889154,Hb=4123344466,Vb=1623761950,jb=1658829314,Wb=2814081492,Yb=3747195512,qb=484807127,Xb=1209101575,Zb=2853485674,Kb=24185140,Qb=1310830890,Jb=3415622556,$b=647756555,tw=2827207264,ew=2143335405,nw=1287392070,iw=819412036,rw=1426591983,sw=2058353004,ow=4278956645,aw=182646315,lw=2188021234,hw=3132237377,cw=987401354,uw=707683696,pw=2223149337,dw=3508470533,fw=900683007,mw=263784265,gw=1509553395,yw=3493046030,_w=3009204131,vw=3319311131,Tw=2068733104,Ew=4175244083,xw=2176052936,Iw=76236018,bw=629592764,ww=1154579445,Sw=377706215,Aw=1437502449,Cw=1073191201,Rw=1911478936,Dw=2474470126,Ow=3588315303,Nw=3079942009,Mw=3694346114,Pw=1687234759,Fw=310824031,Lw=3612865200,kw=3171933400,Uw=1156407060,Bw=3740093272,zw=1946335990,Gw=103090709,Hw=3651124850,Vw=738039164,jw=2295281155,Ww=3219374653,Yw=90941305,qw=2262370178,Xw=3024970846,Zw=3283111854,Kw=4021432810,Qw=979691226,Jw=3027567501,$w=2320036040,tS=160246688,eS=2655215786,nS=3242617779,iS=4186316022,rS=781010003,sS=1401173127,oS=2016517767,aS=3053780830,lS=4086658281,hS=1329646415,cS=4097777520,uS=1529196076,pS=3127900445,dS=3027962421,fS=3420628829,mS=3856911033,gS=1999602285,yS=1412071761,_S=2706606064,vS=463610769,TS=1404847402,ES=331165859,xS=4252922144,IS=682877961,bS=3544373492,wS=1179482911,SS=1004757350,AS=4243806635,CS=214636428,RS=2445595289,DS=2757150158,OS=3136571912,NS=1807405624,MS=530289379,PS=1621171031,FS=2082059205,LS=734778138,kS=1235345126,US=3689010777,BS=3657597509,zS=1975003073,GS=3979015343,HS=2218152070,VS=603775116,jS=3101698114,WS=1162798199,YS=413509423,qS=812556717,XS=3824725483,ZS=2347447852,KS=3663046924,QS=3825984169,JS=1620046519,$S=3026737570,tA=180925521,eA=630975310,nA=4292641817,iA=4207607924,rA=1530820697,sA=2391383451,oA=2769231204,aA=926996030,lA=2391406946,hA=4156078855,cA=3512223829,uA=4237592921,pA=3304561284,dA=486154966,fA=[kI,UI,BI,zI,GI,HI,VI,jI,WI,YI,qI,XI,ZI,KI,QI,JI,$I,tb,eb,nb,ib,rb,sb,ob,ab,lb,hb,cb,ub,pb,db,fb,mb,gb,yb,_b,vb,Tb,Eb,xb,Ib,bb,wb,Sb,Ab,Cb,Rb,Db,Ob,Nb,Mb,Pb,Fb,Lb,kb,Ub,Bb,zb,Gb,Hb,Vb,jb,Wb,Yb,qb,Xb,Zb,Kb,Qb,Jb,$b,tw,ew,nw,iw,rw,sw,ow,aw,lw,hw,cw,uw,pw,dw,fw,mw,gw,yw,_w,vw,Tw,Ew,xw,Iw,bw,ww,Sw,Aw,Cw,Rw,Dw,Ow,Nw,Mw,Pw,Fw,Lw,kw,Uw,Bw,zw,Hw,Vw,jw,Ww,Yw,qw,Xw,Zw,Kw,Qw,Jw,$w,oS,aS,lS,hS,cS,uS,pS,dS,fS,mS,gS,yS,_S,vS,TS,ES,xS,IS,bS,wS,SS,AS,CS,RS,DS,OS,NS,MS,PS,FS,LS,kS,US,BS,zS,GS,HS,VS,jS,WS,YS,qS,XS,ZS,KS,QS,JS,$S,eA,nA,iA,rA,sA,oA,aA,lA,hA,cA,uA,pA,dA],mA={3821786052:t=>yO.FromTape(t.ID,t.type,t.arguments),2296667514:t=>_O.FromTape(t.ID,t.type,t.arguments),3630933823:t=>vO.FromTape(t.ID,t.type,t.arguments),4288193352:t=>TO.FromTape(t.ID,t.type,t.arguments),2874132201:t=>EO.FromTape(t.ID,t.type,t.arguments),618182010:t=>xO.FromTape(t.ID,t.type,t.arguments),1635779807:t=>IO.FromTape(t.ID,t.type,t.arguments),2603310189:t=>bO.FromTape(t.ID,t.type,t.arguments),3406155212:t=>wO.FromTape(t.ID,t.type,t.arguments),1634111441:t=>SO.FromTape(t.ID,t.type,t.arguments),177149247:t=>AO.FromTape(t.ID,t.type,t.arguments),1411407467:t=>CO.FromTape(t.ID,t.type,t.arguments),3352864051:t=>RO.FromTape(t.ID,t.type,t.arguments),2056796094:t=>DO.FromTape(t.ID,t.type,t.arguments),1871374353:t=>OO.FromTape(t.ID,t.type,t.arguments),3087945054:t=>NO.FromTape(t.ID,t.type,t.arguments),3001207471:t=>MO.FromTape(t.ID,t.type,t.arguments),325726236:t=>PO.FromTape(t.ID,t.type,t.arguments),749761778:t=>FO.FromTape(t.ID,t.type,t.arguments),3199563722:t=>LO.FromTape(t.ID,t.type,t.arguments),2483840362:t=>kO.FromTape(t.ID,t.type,t.arguments),3379348081:t=>UO.FromTape(t.ID,t.type,t.arguments),3239324667:t=>BO.FromTape(t.ID,t.type,t.arguments),4263986512:t=>zO.FromTape(t.ID,t.type,t.arguments),53199957:t=>GO.FromTape(t.ID,t.type,t.arguments),2029264950:t=>HO.FromTape(t.ID,t.type,t.arguments),3512275521:t=>VO.FromTape(t.ID,t.type,t.arguments),1674181508:t=>jO.FromTape(t.ID,t.type,t.arguments),669184980:t=>WO.FromTape(t.ID,t.type,t.arguments),639542469:t=>YO.FromTape(t.ID,t.type,t.arguments),411424972:t=>qO.FromTape(t.ID,t.type,t.arguments),130549933:t=>XO.FromTape(t.ID,t.type,t.arguments),3869604511:t=>ZO.FromTape(t.ID,t.type,t.arguments),3798115385:t=>KO.FromTape(t.ID,t.type,t.arguments),1310608509:t=>QO.FromTape(t.ID,t.type,t.arguments),2705031697:t=>JO.FromTape(t.ID,t.type,t.arguments),3460190687:t=>$O.FromTape(t.ID,t.type,t.arguments),3207858831:t=>tN.FromTape(t.ID,t.type,t.arguments),277319702:t=>eN.FromTape(t.ID,t.type,t.arguments),1532957894:t=>nN.FromTape(t.ID,t.type,t.arguments),4261334040:t=>iN.FromTape(t.ID,t.type,t.arguments),3125803723:t=>rN.FromTape(t.ID,t.type,t.arguments),2740243338:t=>sN.FromTape(t.ID,t.type,t.arguments),1967976161:t=>oN.FromTape(t.ID,t.type,t.arguments),2461110595:t=>aN.FromTape(t.ID,t.type,t.arguments),2887950389:t=>lN.FromTape(t.ID,t.type,t.arguments),167062518:t=>hN.FromTape(t.ID,t.type,t.arguments),753842376:t=>cN.FromTape(t.ID,t.type,t.arguments),2906023776:t=>uN.FromTape(t.ID,t.type,t.arguments),819618141:t=>pN.FromTape(t.ID,t.type,t.arguments),4196446775:t=>dN.FromTape(t.ID,t.type,t.arguments),3649138523:t=>fN.FromTape(t.ID,t.type,t.arguments),616511568:t=>mN.FromTape(t.ID,t.type,t.arguments),1334484129:t=>gN.FromTape(t.ID,t.type,t.arguments),32344328:t=>yN.FromTape(t.ID,t.type,t.arguments),231477066:t=>_N.FromTape(t.ID,t.type,t.arguments),3649129432:t=>vN.FromTape(t.ID,t.type,t.arguments),2736907675:t=>TN.FromTape(t.ID,t.type,t.arguments),4037036970:t=>EN.FromTape(t.ID,t.type,t.arguments),1136057603:t=>xN.FromTape(t.ID,t.type,t.arguments),1560379544:t=>IN.FromTape(t.ID,t.type,t.arguments),3367102660:t=>bN.FromTape(t.ID,t.type,t.arguments),1387855156:t=>wN.FromTape(t.ID,t.type,t.arguments),2069777674:t=>SN.FromTape(t.ID,t.type,t.arguments),1260505505:t=>AN.FromTape(t.ID,t.type,t.arguments),4182860854:t=>CN.FromTape(t.ID,t.type,t.arguments),2581212453:t=>RN.FromTape(t.ID,t.type,t.arguments),2713105998:t=>DN.FromTape(t.ID,t.type,t.arguments),644574406:t=>ON.FromTape(t.ID,t.type,t.arguments),963979645:t=>NN.FromTape(t.ID,t.type,t.arguments),4031249490:t=>MN.FromTape(t.ID,t.type,t.arguments),3299480353:t=>PN.FromTape(t.ID,t.type,t.arguments),2979338954:t=>FN.FromTape(t.ID,t.type,t.arguments),39481116:t=>LN.FromTape(t.ID,t.type,t.arguments),1095909175:t=>kN.FromTape(t.ID,t.type,t.arguments),1909888760:t=>UN.FromTape(t.ID,t.type,t.arguments),1950629157:t=>BN.FromTape(t.ID,t.type,t.arguments),3124254112:t=>zN.FromTape(t.ID,t.type,t.arguments),1177604601:t=>GN.FromTape(t.ID,t.type,t.arguments),2938176219:t=>HN.FromTape(t.ID,t.type,t.arguments),2188180465:t=>VN.FromTape(t.ID,t.type,t.arguments),2898889636:t=>jN.FromTape(t.ID,t.type,t.arguments),635142910:t=>WN.FromTape(t.ID,t.type,t.arguments),395041908:t=>YN.FromTape(t.ID,t.type,t.arguments),3758799889:t=>qN.FromTape(t.ID,t.type,t.arguments),3293546465:t=>XN.FromTape(t.ID,t.type,t.arguments),1051757585:t=>ZN.FromTape(t.ID,t.type,t.arguments),2674252688:t=>KN.FromTape(t.ID,t.type,t.arguments),4217484030:t=>QN.FromTape(t.ID,t.type,t.arguments),1285652485:t=>JN.FromTape(t.ID,t.type,t.arguments),3999819293:t=>$N.FromTape(t.ID,t.type,t.arguments),3203706013:t=>tM.FromTape(t.ID,t.type,t.arguments),1123145078:t=>eM.FromTape(t.ID,t.type,t.arguments),574549367:t=>nM.FromTape(t.ID,t.type,t.arguments),1675464909:t=>iM.FromTape(t.ID,t.type,t.arguments),2059837836:t=>rM.FromTape(t.ID,t.type,t.arguments),59481748:t=>sM.FromTape(t.ID,t.type,t.arguments),3749851601:t=>oM.FromTape(t.ID,t.type,t.arguments),3486308946:t=>aM.FromTape(t.ID,t.type,t.arguments),3331915920:t=>lM.FromTape(t.ID,t.type,t.arguments),1416205885:t=>hM.FromTape(t.ID,t.type,t.arguments),3150382593:t=>cM.FromTape(t.ID,t.type,t.arguments),3902619387:t=>uM.FromTape(t.ID,t.type,t.arguments),2951183804:t=>pM.FromTape(t.ID,t.type,t.arguments),3296154744:t=>dM.FromTape(t.ID,t.type,t.arguments),2197970202:t=>fM.FromTape(t.ID,t.type,t.arguments),2611217952:t=>mM.FromTape(t.ID,t.type,t.arguments),2937912522:t=>gM.FromTape(t.ID,t.type,t.arguments),1383045692:t=>yM.FromTape(t.ID,t.type,t.arguments),1062206242:t=>_M.FromTape(t.ID,t.type,t.arguments),1677625105:t=>vM.FromTape(t.ID,t.type,t.arguments),3893394355:t=>TM.FromTape(t.ID,t.type,t.arguments),747523909:t=>EM.FromTape(t.ID,t.type,t.arguments),647927063:t=>xM.FromTape(t.ID,t.type,t.arguments),2205249479:t=>IM.FromTape(t.ID,t.type,t.arguments),639361253:t=>bM.FromTape(t.ID,t.type,t.arguments),2301859152:t=>wM.FromTape(t.ID,t.type,t.arguments),776857604:t=>SM.FromTape(t.ID,t.type,t.arguments),3285139300:t=>AM.FromTape(t.ID,t.type,t.arguments),3264961684:t=>CM.FromTape(t.ID,t.type,t.arguments),843113511:t=>RM.FromTape(t.ID,t.type,t.arguments),905975707:t=>DM.FromTape(t.ID,t.type,t.arguments),300633059:t=>OM.FromTape(t.ID,t.type,t.arguments),3221913625:t=>NM.FromTape(t.ID,t.type,t.arguments),400855858:t=>MM.FromTape(t.ID,t.type,t.arguments),2542286263:t=>PM.FromTape(t.ID,t.type,t.arguments),3875453745:t=>FM.FromTape(t.ID,t.type,t.arguments),3732776249:t=>LM.FromTape(t.ID,t.type,t.arguments),15328376:t=>kM.FromTape(t.ID,t.type,t.arguments),2485617015:t=>UM.FromTape(t.ID,t.type,t.arguments),1485152156:t=>BM.FromTape(t.ID,t.type,t.arguments),3571504051:t=>zM.FromTape(t.ID,t.type,t.arguments),3850581409:t=>GM.FromTape(t.ID,t.type,t.arguments),2272882330:t=>HM.FromTape(t.ID,t.type,t.arguments),2816379211:t=>VM.FromTape(t.ID,t.type,t.arguments),2510884976:t=>jM.FromTape(t.ID,t.type,t.arguments),370225590:t=>WM.FromTape(t.ID,t.type,t.arguments),1981873012:t=>YM.FromTape(t.ID,t.type,t.arguments),2859738748:t=>qM.FromTape(t.ID,t.type,t.arguments),45288368:t=>XM.FromTape(t.ID,t.type,t.arguments),2614616156:t=>ZM.FromTape(t.ID,t.type,t.arguments),2732653382:t=>KM.FromTape(t.ID,t.type,t.arguments),775493141:t=>QM.FromTape(t.ID,t.type,t.arguments),1959218052:t=>JM.FromTape(t.ID,t.type,t.arguments),3898045240:t=>$M.FromTape(t.ID,t.type,t.arguments),2185764099:t=>tP.FromTape(t.ID,t.type,t.arguments),1060000209:t=>eP.FromTape(t.ID,t.type,t.arguments),4105962743:t=>nP.FromTape(t.ID,t.type,t.arguments),488727124:t=>iP.FromTape(t.ID,t.type,t.arguments),1525564444:t=>rP.FromTape(t.ID,t.type,t.arguments),2559216714:t=>sP.FromTape(t.ID,t.type,t.arguments),2574617495:t=>oP.FromTape(t.ID,t.type,t.arguments),3419103109:t=>aP.FromTape(t.ID,t.type,t.arguments),3050246964:t=>lP.FromTape(t.ID,t.type,t.arguments),3293443760:t=>hP.FromTape(t.ID,t.type,t.arguments),25142252:t=>cP.FromTape(t.ID,t.type,t.arguments),578613899:t=>uP.FromTape(t.ID,t.type,t.arguments),2889183280:t=>pP.FromTape(t.ID,t.type,t.arguments),2713554722:t=>dP.FromTape(t.ID,t.type,t.arguments),4136498852:t=>fP.FromTape(t.ID,t.type,t.arguments),335055490:t=>mP.FromTape(t.ID,t.type,t.arguments),3640358203:t=>gP.FromTape(t.ID,t.type,t.arguments),2954562838:t=>yP.FromTape(t.ID,t.type,t.arguments),1785450214:t=>_P.FromTape(t.ID,t.type,t.arguments),1466758467:t=>vP.FromTape(t.ID,t.type,t.arguments),3895139033:t=>TP.FromTape(t.ID,t.type,t.arguments),1419761937:t=>EP.FromTape(t.ID,t.type,t.arguments),602808272:t=>xP.FromTape(t.ID,t.type,t.arguments),1973544240:t=>IP.FromTape(t.ID,t.type,t.arguments),1916426348:t=>bP.FromTape(t.ID,t.type,t.arguments),3295246426:t=>wP.FromTape(t.ID,t.type,t.arguments),1815067380:t=>SP.FromTape(t.ID,t.type,t.arguments),2506170314:t=>AP.FromTape(t.ID,t.type,t.arguments),2147822146:t=>CP.FromTape(t.ID,t.type,t.arguments),539742890:t=>RP.FromTape(t.ID,t.type,t.arguments),3495092785:t=>DP.FromTape(t.ID,t.type,t.arguments),1457835157:t=>OP.FromTape(t.ID,t.type,t.arguments),2601014836:t=>NP.FromTape(t.ID,t.type,t.arguments),2827736869:t=>MP.FromTape(t.ID,t.type,t.arguments),2629017746:t=>PP.FromTape(t.ID,t.type,t.arguments),1186437898:t=>FP.FromTape(t.ID,t.type,t.arguments),3800577675:t=>LP.FromTape(t.ID,t.type,t.arguments),1105321065:t=>kP.FromTape(t.ID,t.type,t.arguments),2367409068:t=>UP.FromTape(t.ID,t.type,t.arguments),3510044353:t=>BP.FromTape(t.ID,t.type,t.arguments),1213902940:t=>zP.FromTape(t.ID,t.type,t.arguments),4074379575:t=>GP.FromTape(t.ID,t.type,t.arguments),3961806047:t=>HP.FromTape(t.ID,t.type,t.arguments),3426335179:t=>VP.FromTape(t.ID,t.type,t.arguments),1306400036:t=>jP.FromTape(t.ID,t.type,t.arguments),3632507154:t=>WP.FromTape(t.ID,t.type,t.arguments),1765591967:t=>YP.FromTape(t.ID,t.type,t.arguments),1045800335:t=>qP.FromTape(t.ID,t.type,t.arguments),2949456006:t=>XP.FromTape(t.ID,t.type,t.arguments),32440307:t=>ZP.FromTape(t.ID,t.type,t.arguments),1335981549:t=>KP.FromTape(t.ID,t.type,t.arguments),2635815018:t=>QP.FromTape(t.ID,t.type,t.arguments),1945343521:t=>JP.FromTape(t.ID,t.type,t.arguments),1052013943:t=>$P.FromTape(t.ID,t.type,t.arguments),1599208980:t=>tF.FromTape(t.ID,t.type,t.arguments),562808652:t=>eF.FromTape(t.ID,t.type,t.arguments),1062813311:t=>nF.FromTape(t.ID,t.type,t.arguments),2063403501:t=>iF.FromTape(t.ID,t.type,t.arguments),1945004755:t=>rF.FromTape(t.ID,t.type,t.arguments),3256556792:t=>sF.FromTape(t.ID,t.type,t.arguments),3040386961:t=>oF.FromTape(t.ID,t.type,t.arguments),3849074793:t=>aF.FromTape(t.ID,t.type,t.arguments),3041715199:t=>lF.FromTape(t.ID,t.type,t.arguments),3205830791:t=>hF.FromTape(t.ID,t.type,t.arguments),1154170062:t=>cF.FromTape(t.ID,t.type,t.arguments),770865208:t=>uF.FromTape(t.ID,t.type,t.arguments),3732053477:t=>pF.FromTape(t.ID,t.type,t.arguments),395920057:t=>dF.FromTape(t.ID,t.type,t.arguments),2963535650:t=>fF.FromTape(t.ID,t.type,t.arguments),1714330368:t=>mF.FromTape(t.ID,t.type,t.arguments),3242481149:t=>gF.FromTape(t.ID,t.type,t.arguments),526551008:t=>yF.FromTape(t.ID,t.type,t.arguments),2323601079:t=>_F.FromTape(t.ID,t.type,t.arguments),445594917:t=>vF.FromTape(t.ID,t.type,t.arguments),4006246654:t=>TF.FromTape(t.ID,t.type,t.arguments),342316401:t=>EF.FromTape(t.ID,t.type,t.arguments),869906466:t=>xF.FromTape(t.ID,t.type,t.arguments),3518393246:t=>IF.FromTape(t.ID,t.type,t.arguments),3760055223:t=>bF.FromTape(t.ID,t.type,t.arguments),1360408905:t=>wF.FromTape(t.ID,t.type,t.arguments),2030761528:t=>SF.FromTape(t.ID,t.type,t.arguments),3900360178:t=>AF.FromTape(t.ID,t.type,t.arguments),476780140:t=>CF.FromTape(t.ID,t.type,t.arguments),1472233963:t=>RF.FromTape(t.ID,t.type,t.arguments),1904799276:t=>DF.FromTape(t.ID,t.type,t.arguments),663422040:t=>OF.FromTape(t.ID,t.type,t.arguments),862014818:t=>NF.FromTape(t.ID,t.type,t.arguments),2417008758:t=>MF.FromTape(t.ID,t.type,t.arguments),3310460725:t=>PF.FromTape(t.ID,t.type,t.arguments),3277789161:t=>FF.FromTape(t.ID,t.type,t.arguments),264262732:t=>LF.FromTape(t.ID,t.type,t.arguments),1534661035:t=>kF.FromTape(t.ID,t.type,t.arguments),402227799:t=>UF.FromTape(t.ID,t.type,t.arguments),1217240411:t=>BF.FromTape(t.ID,t.type,t.arguments),1003880860:t=>zF.FromTape(t.ID,t.type,t.arguments),712377611:t=>GF.FromTape(t.ID,t.type,t.arguments),1758889154:t=>HF.FromTape(t.ID,t.type,t.arguments),4123344466:t=>VF.FromTape(t.ID,t.type,t.arguments),2397081782:t=>jF.FromTape(t.ID,t.type,t.arguments),1623761950:t=>WF.FromTape(t.ID,t.type,t.arguments),2590856083:t=>YF.FromTape(t.ID,t.type,t.arguments),1883228015:t=>qF.FromTape(t.ID,t.type,t.arguments),339256511:t=>XF.FromTape(t.ID,t.type,t.arguments),2777663545:t=>ZF.FromTape(t.ID,t.type,t.arguments),1704287377:t=>KF.FromTape(t.ID,t.type,t.arguments),2835456948:t=>QF.FromTape(t.ID,t.type,t.arguments),1658829314:t=>JF.FromTape(t.ID,t.type,t.arguments),2107101300:t=>$F.FromTape(t.ID,t.type,t.arguments),2814081492:t=>tL.FromTape(t.ID,t.type,t.arguments),132023988:t=>eL.FromTape(t.ID,t.type,t.arguments),3747195512:t=>nL.FromTape(t.ID,t.type,t.arguments),3174744832:t=>iL.FromTape(t.ID,t.type,t.arguments),484807127:t=>rL.FromTape(t.ID,t.type,t.arguments),3390157468:t=>sL.FromTape(t.ID,t.type,t.arguments),4148101412:t=>oL.FromTape(t.ID,t.type,t.arguments),211053100:t=>aL.FromTape(t.ID,t.type,t.arguments),4024345920:t=>lL.FromTape(t.ID,t.type,t.arguments),297599258:t=>hL.FromTape(t.ID,t.type,t.arguments),4294318154:t=>cL.FromTape(t.ID,t.type,t.arguments),3200245327:t=>uL.FromTape(t.ID,t.type,t.arguments),1437805879:t=>pL.FromTape(t.ID,t.type,t.arguments),1209101575:t=>dL.FromTape(t.ID,t.type,t.arguments),2853485674:t=>fL.FromTape(t.ID,t.type,t.arguments),2242383968:t=>mL.FromTape(t.ID,t.type,t.arguments),1040185647:t=>gL.FromTape(t.ID,t.type,t.arguments),3548104201:t=>yL.FromTape(t.ID,t.type,t.arguments),477187591:t=>_L.FromTape(t.ID,t.type,t.arguments),2804161546:t=>vL.FromTape(t.ID,t.type,t.arguments),2556980723:t=>TL.FromTape(t.ID,t.type,t.arguments),2047409740:t=>EL.FromTape(t.ID,t.type,t.arguments),1809719519:t=>xL.FromTape(t.ID,t.type,t.arguments),803316827:t=>IL.FromTape(t.ID,t.type,t.arguments),3008276851:t=>bL.FromTape(t.ID,t.type,t.arguments),807026263:t=>wL.FromTape(t.ID,t.type,t.arguments),3737207727:t=>SL.FromTape(t.ID,t.type,t.arguments),24185140:t=>AL.FromTape(t.ID,t.type,t.arguments),1310830890:t=>CL.FromTape(t.ID,t.type,t.arguments),4219587988:t=>RL.FromTape(t.ID,t.type,t.arguments),3415622556:t=>DL.FromTape(t.ID,t.type,t.arguments),346874300:t=>OL.FromTape(t.ID,t.type,t.arguments),647756555:t=>NL.FromTape(t.ID,t.type,t.arguments),2489546625:t=>ML.FromTape(t.ID,t.type,t.arguments),2827207264:t=>PL.FromTape(t.ID,t.type,t.arguments),2143335405:t=>FL.FromTape(t.ID,t.type,t.arguments),1287392070:t=>LL.FromTape(t.ID,t.type,t.arguments),738692330:t=>kL.FromTape(t.ID,t.type,t.arguments),374418227:t=>UL.FromTape(t.ID,t.type,t.arguments),315944413:t=>BL.FromTape(t.ID,t.type,t.arguments),819412036:t=>zL.FromTape(t.ID,t.type,t.arguments),1810631287:t=>GL.FromTape(t.ID,t.type,t.arguments),1426591983:t=>HL.FromTape(t.ID,t.type,t.arguments),4222183408:t=>VL.FromTape(t.ID,t.type,t.arguments),2652556860:t=>jL.FromTape(t.ID,t.type,t.arguments),2058353004:t=>WL.FromTape(t.ID,t.type,t.arguments),3907093117:t=>YL.FromTape(t.ID,t.type,t.arguments),4278956645:t=>qL.FromTape(t.ID,t.type,t.arguments),3198132628:t=>XL.FromTape(t.ID,t.type,t.arguments),182646315:t=>ZL.FromTape(t.ID,t.type,t.arguments),4037862832:t=>KL.FromTape(t.ID,t.type,t.arguments),2188021234:t=>QL.FromTape(t.ID,t.type,t.arguments),3815607619:t=>JL.FromTape(t.ID,t.type,t.arguments),3132237377:t=>$L.FromTape(t.ID,t.type,t.arguments),1482959167:t=>tk.FromTape(t.ID,t.type,t.arguments),987401354:t=>ek.FromTape(t.ID,t.type,t.arguments),1834744321:t=>nk.FromTape(t.ID,t.type,t.arguments),707683696:t=>ik.FromTape(t.ID,t.type,t.arguments),1339347760:t=>rk.FromTape(t.ID,t.type,t.arguments),2223149337:t=>sk.FromTape(t.ID,t.type,t.arguments),2297155007:t=>ok.FromTape(t.ID,t.type,t.arguments),3508470533:t=>ak.FromTape(t.ID,t.type,t.arguments),3009222698:t=>lk.FromTape(t.ID,t.type,t.arguments),900683007:t=>hk.FromTape(t.ID,t.type,t.arguments),1893162501:t=>ck.FromTape(t.ID,t.type,t.arguments),263784265:t=>uk.FromTape(t.ID,t.type,t.arguments),4238390223:t=>pk.FromTape(t.ID,t.type,t.arguments),1509553395:t=>dk.FromTape(t.ID,t.type,t.arguments),1268542332:t=>fk.FromTape(t.ID,t.type,t.arguments),3493046030:t=>mk.FromTape(t.ID,t.type,t.arguments),4095422895:t=>gk.FromTape(t.ID,t.type,t.arguments),987898635:t=>yk.FromTape(t.ID,t.type,t.arguments),3448662350:t=>_k.FromTape(t.ID,t.type,t.arguments),2453401579:t=>vk.FromTape(t.ID,t.type,t.arguments),4142052618:t=>Tk.FromTape(t.ID,t.type,t.arguments),3590301190:t=>Ek.FromTape(t.ID,t.type,t.arguments),3009204131:t=>xk.FromTape(t.ID,t.type,t.arguments),852622518:t=>Ik.FromTape(t.ID,t.type,t.arguments),178086475:t=>bk.FromTape(t.ID,t.type,t.arguments),2706460486:t=>wk.FromTape(t.ID,t.type,t.arguments),812098782:t=>Sk.FromTape(t.ID,t.type,t.arguments),3319311131:t=>Ak.FromTape(t.ID,t.type,t.arguments),1251058090:t=>Ck.FromTape(t.ID,t.type,t.arguments),2068733104:t=>Rk.FromTape(t.ID,t.type,t.arguments),1806887404:t=>Dk.FromTape(t.ID,t.type,t.arguments),1484403080:t=>Ok.FromTape(t.ID,t.type,t.arguments),3905492369:t=>Nk.FromTape(t.ID,t.type,t.arguments),3570813810:t=>Mk.FromTape(t.ID,t.type,t.arguments),2571569899:t=>Pk.FromTape(t.ID,t.type,t.arguments),178912537:t=>Fk.FromTape(t.ID,t.type,t.arguments),2294589976:t=>Lk.FromTape(t.ID,t.type,t.arguments),1437953363:t=>kk.FromTape(t.ID,t.type,t.arguments),2133299955:t=>Uk.FromTape(t.ID,t.type,t.arguments),4175244083:t=>Bk.FromTape(t.ID,t.type,t.arguments),3946677679:t=>zk.FromTape(t.ID,t.type,t.arguments),3113134337:t=>Gk.FromTape(t.ID,t.type,t.arguments),2391368822:t=>Hk.FromTape(t.ID,t.type,t.arguments),3741457305:t=>Vk.FromTape(t.ID,t.type,t.arguments),3020489413:t=>jk.FromTape(t.ID,t.type,t.arguments),2176052936:t=>Wk.FromTape(t.ID,t.type,t.arguments),4288270099:t=>Yk.FromTape(t.ID,t.type,t.arguments),572779678:t=>qk.FromTape(t.ID,t.type,t.arguments),3827777499:t=>Xk.FromTape(t.ID,t.type,t.arguments),428585644:t=>Zk.FromTape(t.ID,t.type,t.arguments),1585845231:t=>Kk.FromTape(t.ID,t.type,t.arguments),76236018:t=>Qk.FromTape(t.ID,t.type,t.arguments),1051575348:t=>Jk.FromTape(t.ID,t.type,t.arguments),2655187982:t=>$k.FromTape(t.ID,t.type,t.arguments),3452421091:t=>tU.FromTape(t.ID,t.type,t.arguments),4162380809:t=>eU.FromTape(t.ID,t.type,t.arguments),629592764:t=>nU.FromTape(t.ID,t.type,t.arguments),1161773419:t=>iU.FromTape(t.ID,t.type,t.arguments),1566485204:t=>rU.FromTape(t.ID,t.type,t.arguments),1402838566:t=>sU.FromTape(t.ID,t.type,t.arguments),125510826:t=>oU.FromTape(t.ID,t.type,t.arguments),2604431987:t=>aU.FromTape(t.ID,t.type,t.arguments),4266656042:t=>lU.FromTape(t.ID,t.type,t.arguments),1520743889:t=>hU.FromTape(t.ID,t.type,t.arguments),3422422726:t=>cU.FromTape(t.ID,t.type,t.arguments),1281925730:t=>uU.FromTape(t.ID,t.type,t.arguments),3092502836:t=>pU.FromTape(t.ID,t.type,t.arguments),388784114:t=>dU.FromTape(t.ID,t.type,t.arguments),1154579445:t=>fU.FromTape(t.ID,t.type,t.arguments),2624227202:t=>mU.FromTape(t.ID,t.type,t.arguments),1008929658:t=>gU.FromTape(t.ID,t.type,t.arguments),1425443689:t=>yU.FromTape(t.ID,t.type,t.arguments),3057273783:t=>_U.FromTape(t.ID,t.type,t.arguments),2347385850:t=>vU.FromTape(t.ID,t.type,t.arguments),1838606355:t=>TU.FromTape(t.ID,t.type,t.arguments),1847130766:t=>EU.FromTape(t.ID,t.type,t.arguments),3708119e3:t=>xU.FromTape(t.ID,t.type,t.arguments),2852063980:t=>IU.FromTape(t.ID,t.type,t.arguments),760658860:t=>bU.FromTape(t.ID,t.type,t.arguments),2022407955:t=>wU.FromTape(t.ID,t.type,t.arguments),248100487:t=>SU.FromTape(t.ID,t.type,t.arguments),3303938423:t=>AU.FromTape(t.ID,t.type,t.arguments),1303795690:t=>CU.FromTape(t.ID,t.type,t.arguments),1847252529:t=>RU.FromTape(t.ID,t.type,t.arguments),2199411900:t=>DU.FromTape(t.ID,t.type,t.arguments),2235152071:t=>OU.FromTape(t.ID,t.type,t.arguments),164193824:t=>NU.FromTape(t.ID,t.type,t.arguments),3079605661:t=>MU.FromTape(t.ID,t.type,t.arguments),3404854881:t=>PU.FromTape(t.ID,t.type,t.arguments),552965576:t=>FU.FromTape(t.ID,t.type,t.arguments),3265635763:t=>LU.FromTape(t.ID,t.type,t.arguments),853536259:t=>kU.FromTape(t.ID,t.type,t.arguments),1507914824:t=>UU.FromTape(t.ID,t.type,t.arguments),2597039031:t=>BU.FromTape(t.ID,t.type,t.arguments),377706215:t=>zU.FromTape(t.ID,t.type,t.arguments),2108223431:t=>GU.FromTape(t.ID,t.type,t.arguments),1437502449:t=>HU.FromTape(t.ID,t.type,t.arguments),1114901282:t=>VU.FromTape(t.ID,t.type,t.arguments),1073191201:t=>jU.FromTape(t.ID,t.type,t.arguments),1911478936:t=>WU.FromTape(t.ID,t.type,t.arguments),3181161470:t=>YU.FromTape(t.ID,t.type,t.arguments),3368373690:t=>qU.FromTape(t.ID,t.type,t.arguments),2998442950:t=>XU.FromTape(t.ID,t.type,t.arguments),2706619895:t=>ZU.FromTape(t.ID,t.type,t.arguments),2474470126:t=>KU.FromTape(t.ID,t.type,t.arguments),977012517:t=>QU.FromTape(t.ID,t.type,t.arguments),1918398963:t=>JU.FromTape(t.ID,t.type,t.arguments),3888040117:t=>$U.FromTape(t.ID,t.type,t.arguments),219451334:t=>tB.FromTape(t.ID,t.type,t.arguments),3701648758:t=>eB.FromTape(t.ID,t.type,t.arguments),2251480897:t=>nB.FromTape(t.ID,t.type,t.arguments),4143007308:t=>iB.FromTape(t.ID,t.type,t.arguments),590820931:t=>rB.FromTape(t.ID,t.type,t.arguments),3388369263:t=>sB.FromTape(t.ID,t.type,t.arguments),3505215534:t=>oB.FromTape(t.ID,t.type,t.arguments),2485787929:t=>aB.FromTape(t.ID,t.type,t.arguments),2665983363:t=>lB.FromTape(t.ID,t.type,t.arguments),3588315303:t=>hB.FromTape(t.ID,t.type,t.arguments),3079942009:t=>cB.FromTape(t.ID,t.type,t.arguments),4251960020:t=>uB.FromTape(t.ID,t.type,t.arguments),1411181986:t=>pB.FromTape(t.ID,t.type,t.arguments),643959842:t=>dB.FromTape(t.ID,t.type,t.arguments),1029017970:t=>fB.FromTape(t.ID,t.type,t.arguments),144952367:t=>mB.FromTape(t.ID,t.type,t.arguments),3694346114:t=>gB.FromTape(t.ID,t.type,t.arguments),2837617999:t=>yB.FromTape(t.ID,t.type,t.arguments),1207048766:t=>_B.FromTape(t.ID,t.type,t.arguments),2529465313:t=>vB.FromTape(t.ID,t.type,t.arguments),2519244187:t=>TB.FromTape(t.ID,t.type,t.arguments),1682466193:t=>EB.FromTape(t.ID,t.type,t.arguments),2382730787:t=>xB.FromTape(t.ID,t.type,t.arguments),3566463478:t=>IB.FromTape(t.ID,t.type,t.arguments),3327091369:t=>bB.FromTape(t.ID,t.type,t.arguments),2077209135:t=>wB.FromTape(t.ID,t.type,t.arguments),101040310:t=>SB.FromTape(t.ID,t.type,t.arguments),3021840470:t=>AB.FromTape(t.ID,t.type,t.arguments),2483315170:t=>CB.FromTape(t.ID,t.type,t.arguments),2226359599:t=>RB.FromTape(t.ID,t.type,t.arguments),1687234759:t=>DB.FromTape(t.ID,t.type,t.arguments),1158309216:t=>OB.FromTape(t.ID,t.type,t.arguments),310824031:t=>NB.FromTape(t.ID,t.type,t.arguments),804291784:t=>MB.FromTape(t.ID,t.type,t.arguments),3612865200:t=>PB.FromTape(t.ID,t.type,t.arguments),4231323485:t=>FB.FromTape(t.ID,t.type,t.arguments),597895409:t=>LB.FromTape(t.ID,t.type,t.arguments),2004835150:t=>kB.FromTape(t.ID,t.type,t.arguments),603570806:t=>UB.FromTape(t.ID,t.type,t.arguments),1663979128:t=>BB.FromTape(t.ID,t.type,t.arguments),220341763:t=>zB.FromTape(t.ID,t.type,t.arguments),3171933400:t=>GB.FromTape(t.ID,t.type,t.arguments),1156407060:t=>HB.FromTape(t.ID,t.type,t.arguments),4017108033:t=>VB.FromTape(t.ID,t.type,t.arguments),2067069095:t=>jB.FromTape(t.ID,t.type,t.arguments),4022376103:t=>WB.FromTape(t.ID,t.type,t.arguments),1423911732:t=>YB.FromTape(t.ID,t.type,t.arguments),2924175390:t=>qB.FromTape(t.ID,t.type,t.arguments),2775532180:t=>XB.FromTape(t.ID,t.type,t.arguments),2839578677:t=>ZB.FromTape(t.ID,t.type,t.arguments),3724593414:t=>KB.FromTape(t.ID,t.type,t.arguments),3740093272:t=>QB.FromTape(t.ID,t.type,t.arguments),1946335990:t=>JB.FromTape(t.ID,t.type,t.arguments),3355820592:t=>$B.FromTape(t.ID,t.type,t.arguments),759155922:t=>tz.FromTape(t.ID,t.type,t.arguments),2559016684:t=>ez.FromTape(t.ID,t.type,t.arguments),3727388367:t=>nz.FromTape(t.ID,t.type,t.arguments),3778827333:t=>iz.FromTape(t.ID,t.type,t.arguments),3967405729:t=>rz.FromTape(t.ID,t.type,t.arguments),1775413392:t=>sz.FromTape(t.ID,t.type,t.arguments),677532197:t=>oz.FromTape(t.ID,t.type,t.arguments),2022622350:t=>az.FromTape(t.ID,t.type,t.arguments),1304840413:t=>lz.FromTape(t.ID,t.type,t.arguments),3119450353:t=>hz.FromTape(t.ID,t.type,t.arguments),2417041796:t=>cz.FromTape(t.ID,t.type,t.arguments),2744685151:t=>uz.FromTape(t.ID,t.type,t.arguments),569719735:t=>pz.FromTape(t.ID,t.type,t.arguments),2945172077:t=>dz.FromTape(t.ID,t.type,t.arguments),4208778838:t=>fz.FromTape(t.ID,t.type,t.arguments),673634403:t=>mz.FromTape(t.ID,t.type,t.arguments),2095639259:t=>gz.FromTape(t.ID,t.type,t.arguments),3958567839:t=>yz.FromTape(t.ID,t.type,t.arguments),2802850158:t=>_z.FromTape(t.ID,t.type,t.arguments),103090709:t=>vz.FromTape(t.ID,t.type,t.arguments),653396225:t=>Tz.FromTape(t.ID,t.type,t.arguments),2904328755:t=>Ez.FromTape(t.ID,t.type,t.arguments),3843373140:t=>xz.FromTape(t.ID,t.type,t.arguments),3651124850:t=>Iz.FromTape(t.ID,t.type,t.arguments),2598011224:t=>bz.FromTape(t.ID,t.type,t.arguments),986844984:t=>wz.FromTape(t.ID,t.type,t.arguments),871118103:t=>Sz.FromTape(t.ID,t.type,t.arguments),1680319473:t=>Az.FromTape(t.ID,t.type,t.arguments),148025276:t=>Cz.FromTape(t.ID,t.type,t.arguments),4166981789:t=>Rz.FromTape(t.ID,t.type,t.arguments),3710013099:t=>Dz.FromTape(t.ID,t.type,t.arguments),2752243245:t=>Oz.FromTape(t.ID,t.type,t.arguments),941946838:t=>Nz.FromTape(t.ID,t.type,t.arguments),1451395588:t=>Mz.FromTape(t.ID,t.type,t.arguments),3357820518:t=>Pz.FromTape(t.ID,t.type,t.arguments),492091185:t=>Fz.FromTape(t.ID,t.type,t.arguments),3650150729:t=>Lz.FromTape(t.ID,t.type,t.arguments),110355661:t=>kz.FromTape(t.ID,t.type,t.arguments),3521284610:t=>Uz.FromTape(t.ID,t.type,t.arguments),1482703590:t=>Bz.FromTape(t.ID,t.type,t.arguments),738039164:t=>zz.FromTape(t.ID,t.type,t.arguments),2295281155:t=>Gz.FromTape(t.ID,t.type,t.arguments),655969474:t=>Hz.FromTape(t.ID,t.type,t.arguments),1842657554:t=>Vz.FromTape(t.ID,t.type,t.arguments),3219374653:t=>jz.FromTape(t.ID,t.type,t.arguments),90941305:t=>Wz.FromTape(t.ID,t.type,t.arguments),2250791053:t=>Yz.FromTape(t.ID,t.type,t.arguments),2044713172:t=>qz.FromTape(t.ID,t.type,t.arguments),2093928680:t=>Xz.FromTape(t.ID,t.type,t.arguments),931644368:t=>Zz.FromTape(t.ID,t.type,t.arguments),2090586900:t=>Kz.FromTape(t.ID,t.type,t.arguments),3252649465:t=>Qz.FromTape(t.ID,t.type,t.arguments),2405470396:t=>Jz.FromTape(t.ID,t.type,t.arguments),825690147:t=>$z.FromTape(t.ID,t.type,t.arguments),2262370178:t=>tG.FromTape(t.ID,t.type,t.arguments),2893384427:t=>eG.FromTape(t.ID,t.type,t.arguments),3024970846:t=>nG.FromTape(t.ID,t.type,t.arguments),3283111854:t=>iG.FromTape(t.ID,t.type,t.arguments),2324767716:t=>rG.FromTape(t.ID,t.type,t.arguments),1469900589:t=>sG.FromTape(t.ID,t.type,t.arguments),1232101972:t=>oG.FromTape(t.ID,t.type,t.arguments),683857671:t=>aG.FromTape(t.ID,t.type,t.arguments),2770003689:t=>lG.FromTape(t.ID,t.type,t.arguments),3615266464:t=>hG.FromTape(t.ID,t.type,t.arguments),2798486643:t=>cG.FromTape(t.ID,t.type,t.arguments),3454111270:t=>uG.FromTape(t.ID,t.type,t.arguments),3915482550:t=>pG.FromTape(t.ID,t.type,t.arguments),2433181523:t=>dG.FromTape(t.ID,t.type,t.arguments),4021432810:t=>fG.FromTape(t.ID,t.type,t.arguments),3413951693:t=>mG.FromTape(t.ID,t.type,t.arguments),1580146022:t=>gG.FromTape(t.ID,t.type,t.arguments),3765753017:t=>yG.FromTape(t.ID,t.type,t.arguments),979691226:t=>_G.FromTape(t.ID,t.type,t.arguments),2572171363:t=>vG.FromTape(t.ID,t.type,t.arguments),3027567501:t=>TG.FromTape(t.ID,t.type,t.arguments),964333572:t=>EG.FromTape(t.ID,t.type,t.arguments),2320036040:t=>xG.FromTape(t.ID,t.type,t.arguments),2310774935:t=>IG.FromTape(t.ID,t.type,t.arguments),160246688:t=>bG.FromTape(t.ID,t.type,t.arguments),3939117080:t=>wG.FromTape(t.ID,t.type,t.arguments),1683148259:t=>SG.FromTape(t.ID,t.type,t.arguments),2495723537:t=>AG.FromTape(t.ID,t.type,t.arguments),1307041759:t=>CG.FromTape(t.ID,t.type,t.arguments),1027710054:t=>RG.FromTape(t.ID,t.type,t.arguments),4278684876:t=>DG.FromTape(t.ID,t.type,t.arguments),2857406711:t=>OG.FromTape(t.ID,t.type,t.arguments),205026976:t=>NG.FromTape(t.ID,t.type,t.arguments),1865459582:t=>MG.FromTape(t.ID,t.type,t.arguments),4095574036:t=>PG.FromTape(t.ID,t.type,t.arguments),919958153:t=>FG.FromTape(t.ID,t.type,t.arguments),2728634034:t=>LG.FromTape(t.ID,t.type,t.arguments),982818633:t=>kG.FromTape(t.ID,t.type,t.arguments),3840914261:t=>UG.FromTape(t.ID,t.type,t.arguments),2655215786:t=>BG.FromTape(t.ID,t.type,t.arguments),826625072:t=>zG.FromTape(t.ID,t.type,t.arguments),1204542856:t=>GG.FromTape(t.ID,t.type,t.arguments),3945020480:t=>HG.FromTape(t.ID,t.type,t.arguments),4201705270:t=>VG.FromTape(t.ID,t.type,t.arguments),3190031847:t=>jG.FromTape(t.ID,t.type,t.arguments),2127690289:t=>WG.FromTape(t.ID,t.type,t.arguments),1638771189:t=>YG.FromTape(t.ID,t.type,t.arguments),504942748:t=>qG.FromTape(t.ID,t.type,t.arguments),3678494232:t=>XG.FromTape(t.ID,t.type,t.arguments),3242617779:t=>ZG.FromTape(t.ID,t.type,t.arguments),886880790:t=>KG.FromTape(t.ID,t.type,t.arguments),2802773753:t=>QG.FromTape(t.ID,t.type,t.arguments),2565941209:t=>JG.FromTape(t.ID,t.type,t.arguments),2551354335:t=>$G.FromTape(t.ID,t.type,t.arguments),693640335:t=>tH.FromTape(t.ID,t.type,t.arguments),1462361463:t=>eH.FromTape(t.ID,t.type,t.arguments),4186316022:t=>nH.FromTape(t.ID,t.type,t.arguments),307848117:t=>iH.FromTape(t.ID,t.type,t.arguments),781010003:t=>rH.FromTape(t.ID,t.type,t.arguments),3940055652:t=>sH.FromTape(t.ID,t.type,t.arguments),279856033:t=>oH.FromTape(t.ID,t.type,t.arguments),427948657:t=>aH.FromTape(t.ID,t.type,t.arguments),3268803585:t=>lH.FromTape(t.ID,t.type,t.arguments),1441486842:t=>hH.FromTape(t.ID,t.type,t.arguments),750771296:t=>cH.FromTape(t.ID,t.type,t.arguments),1245217292:t=>uH.FromTape(t.ID,t.type,t.arguments),4122056220:t=>pH.FromTape(t.ID,t.type,t.arguments),366585022:t=>dH.FromTape(t.ID,t.type,t.arguments),3451746338:t=>fH.FromTape(t.ID,t.type,t.arguments),3523091289:t=>mH.FromTape(t.ID,t.type,t.arguments),1521410863:t=>gH.FromTape(t.ID,t.type,t.arguments),1401173127:t=>yH.FromTape(t.ID,t.type,t.arguments),478536968:t=>_H.FromTape(t.ID,t.type,t.arguments),816062949:t=>vH.FromTape(t.ID,t.type,t.arguments),1076942058:t=>TH.FromTape(t.ID,t.type,t.arguments),3377609919:t=>EH.FromTape(t.ID,t.type,t.arguments),3008791417:t=>xH.FromTape(t.ID,t.type,t.arguments),1660063152:t=>IH.FromTape(t.ID,t.type,t.arguments),2914609552:t=>bH.FromTape(t.ID,t.type,t.arguments),2943643501:t=>wH.FromTape(t.ID,t.type,t.arguments),1608871552:t=>SH.FromTape(t.ID,t.type,t.arguments),2439245199:t=>AH.FromTape(t.ID,t.type,t.arguments),1042787934:t=>CH.FromTape(t.ID,t.type,t.arguments),1856042241:t=>RH.FromTape(t.ID,t.type,t.arguments),3243963512:t=>DH.FromTape(t.ID,t.type,t.arguments),4158566097:t=>OH.FromTape(t.ID,t.type,t.arguments),3626867408:t=>NH.FromTape(t.ID,t.type,t.arguments),2016517767:t=>MH.FromTape(t.ID,t.type,t.arguments),2781568857:t=>PH.FromTape(t.ID,t.type,t.arguments),2341007311:t=>FH.FromTape(t.ID,t.type,t.arguments),2778083089:t=>LH.FromTape(t.ID,t.type,t.arguments),448429030:t=>kH.FromTape(t.ID,t.type,t.arguments),3053780830:t=>UH.FromTape(t.ID,t.type,t.arguments),1768891740:t=>BH.FromTape(t.ID,t.type,t.arguments),1054537805:t=>zH.FromTape(t.ID,t.type,t.arguments),2157484638:t=>GH.FromTape(t.ID,t.type,t.arguments),2042790032:t=>HH.FromTape(t.ID,t.type,t.arguments),4165799628:t=>VH.FromTape(t.ID,t.type,t.arguments),1862484736:t=>jH.FromTape(t.ID,t.type,t.arguments),1290935644:t=>WH.FromTape(t.ID,t.type,t.arguments),1509187699:t=>YH.FromTape(t.ID,t.type,t.arguments),4086658281:t=>qH.FromTape(t.ID,t.type,t.arguments),1783015770:t=>XH.FromTape(t.ID,t.type,t.arguments),1329646415:t=>ZH.FromTape(t.ID,t.type,t.arguments),4074543187:t=>KH.FromTape(t.ID,t.type,t.arguments),867548509:t=>QH.FromTape(t.ID,t.type,t.arguments),3982875396:t=>JH.FromTape(t.ID,t.type,t.arguments),4240577450:t=>$H.FromTape(t.ID,t.type,t.arguments),4124623270:t=>tV.FromTape(t.ID,t.type,t.arguments),3692461612:t=>eV.FromTape(t.ID,t.type,t.arguments),3663146110:t=>nV.FromTape(t.ID,t.type,t.arguments),4097777520:t=>iV.FromTape(t.ID,t.type,t.arguments),1529196076:t=>rV.FromTape(t.ID,t.type,t.arguments),3127900445:t=>sV.FromTape(t.ID,t.type,t.arguments),3027962421:t=>oV.FromTape(t.ID,t.type,t.arguments),2533589738:t=>aV.FromTape(t.ID,t.type,t.arguments),2609359061:t=>lV.FromTape(t.ID,t.type,t.arguments),3420628829:t=>hV.FromTape(t.ID,t.type,t.arguments),1072016465:t=>cV.FromTape(t.ID,t.type,t.arguments),723233188:t=>uV.FromTape(t.ID,t.type,t.arguments),3856911033:t=>pV.FromTape(t.ID,t.type,t.arguments),1999602285:t=>dV.FromTape(t.ID,t.type,t.arguments),1305183839:t=>fV.FromTape(t.ID,t.type,t.arguments),3812236995:t=>mV.FromTape(t.ID,t.type,t.arguments),1412071761:t=>gV.FromTape(t.ID,t.type,t.arguments),710998568:t=>yV.FromTape(t.ID,t.type,t.arguments),2706606064:t=>_V.FromTape(t.ID,t.type,t.arguments),3893378262:t=>vV.FromTape(t.ID,t.type,t.arguments),463610769:t=>TV.FromTape(t.ID,t.type,t.arguments),2481509218:t=>EV.FromTape(t.ID,t.type,t.arguments),451544542:t=>xV.FromTape(t.ID,t.type,t.arguments),4015995234:t=>IV.FromTape(t.ID,t.type,t.arguments),1404847402:t=>bV.FromTape(t.ID,t.type,t.arguments),3112655638:t=>wV.FromTape(t.ID,t.type,t.arguments),331165859:t=>SV.FromTape(t.ID,t.type,t.arguments),4252922144:t=>AV.FromTape(t.ID,t.type,t.arguments),1039846685:t=>CV.FromTape(t.ID,t.type,t.arguments),338393293:t=>RV.FromTape(t.ID,t.type,t.arguments),682877961:t=>DV.FromTape(t.ID,t.type,t.arguments),3544373492:t=>OV.FromTape(t.ID,t.type,t.arguments),2515109513:t=>NV.FromTape(t.ID,t.type,t.arguments),1179482911:t=>MV.FromTape(t.ID,t.type,t.arguments),2273995522:t=>PV.FromTape(t.ID,t.type,t.arguments),1004757350:t=>FV.FromTape(t.ID,t.type,t.arguments),4243806635:t=>LV.FromTape(t.ID,t.type,t.arguments),214636428:t=>kV.FromTape(t.ID,t.type,t.arguments),2445595289:t=>UV.FromTape(t.ID,t.type,t.arguments),2757150158:t=>BV.FromTape(t.ID,t.type,t.arguments),3136571912:t=>zV.FromTape(t.ID,t.type,t.arguments),1807405624:t=>GV.FromTape(t.ID,t.type,t.arguments),2162789131:t=>HV.FromTape(t.ID,t.type,t.arguments),385403989:t=>VV.FromTape(t.ID,t.type,t.arguments),3478079324:t=>jV.FromTape(t.ID,t.type,t.arguments),1252848954:t=>WV.FromTape(t.ID,t.type,t.arguments),1595516126:t=>YV.FromTape(t.ID,t.type,t.arguments),609421318:t=>qV.FromTape(t.ID,t.type,t.arguments),2668620305:t=>XV.FromTape(t.ID,t.type,t.arguments),2473145415:t=>ZV.FromTape(t.ID,t.type,t.arguments),1973038258:t=>KV.FromTape(t.ID,t.type,t.arguments),1597423693:t=>QV.FromTape(t.ID,t.type,t.arguments),1190533807:t=>JV.FromTape(t.ID,t.type,t.arguments),2525727697:t=>$V.FromTape(t.ID,t.type,t.arguments),3408363356:t=>tj.FromTape(t.ID,t.type,t.arguments),530289379:t=>ej.FromTape(t.ID,t.type,t.arguments),1621171031:t=>nj.FromTape(t.ID,t.type,t.arguments),2082059205:t=>ij.FromTape(t.ID,t.type,t.arguments),734778138:t=>rj.FromTape(t.ID,t.type,t.arguments),1235345126:t=>sj.FromTape(t.ID,t.type,t.arguments),3689010777:t=>oj.FromTape(t.ID,t.type,t.arguments),2986769608:t=>aj.FromTape(t.ID,t.type,t.arguments),3657597509:t=>lj.FromTape(t.ID,t.type,t.arguments),1975003073:t=>hj.FromTape(t.ID,t.type,t.arguments),3979015343:t=>cj.FromTape(t.ID,t.type,t.arguments),2218152070:t=>uj.FromTape(t.ID,t.type,t.arguments),603775116:t=>pj.FromTape(t.ID,t.type,t.arguments),2830218821:t=>dj.FromTape(t.ID,t.type,t.arguments),3958052878:t=>fj.FromTape(t.ID,t.type,t.arguments),3049322572:t=>mj.FromTape(t.ID,t.type,t.arguments),148013059:t=>gj.FromTape(t.ID,t.type,t.arguments),4095615324:t=>yj.FromTape(t.ID,t.type,t.arguments),2233826070:t=>_j.FromTape(t.ID,t.type,t.arguments),2513912981:t=>vj.FromTape(t.ID,t.type,t.arguments),699246055:t=>Tj.FromTape(t.ID,t.type,t.arguments),2028607225:t=>Ej.FromTape(t.ID,t.type,t.arguments),3101698114:t=>xj.FromTape(t.ID,t.type,t.arguments),2809605785:t=>Ij.FromTape(t.ID,t.type,t.arguments),4124788165:t=>bj.FromTape(t.ID,t.type,t.arguments),2934153892:t=>wj.FromTape(t.ID,t.type,t.arguments),1300840506:t=>Sj.FromTape(t.ID,t.type,t.arguments),3303107099:t=>Aj.FromTape(t.ID,t.type,t.arguments),1607154358:t=>Cj.FromTape(t.ID,t.type,t.arguments),1878645084:t=>Rj.FromTape(t.ID,t.type,t.arguments),846575682:t=>Dj.FromTape(t.ID,t.type,t.arguments),1351298697:t=>Oj.FromTape(t.ID,t.type,t.arguments),626085974:t=>Nj.FromTape(t.ID,t.type,t.arguments),2247615214:t=>Mj.FromTape(t.ID,t.type,t.arguments),1260650574:t=>Pj.FromTape(t.ID,t.type,t.arguments),1096409881:t=>Fj.FromTape(t.ID,t.type,t.arguments),230924584:t=>Lj.FromTape(t.ID,t.type,t.arguments),1162798199:t=>kj.FromTape(t.ID,t.type,t.arguments),2315554128:t=>Uj.FromTape(t.ID,t.type,t.arguments),2254336722:t=>Bj.FromTape(t.ID,t.type,t.arguments),413509423:t=>zj.FromTape(t.ID,t.type,t.arguments),1580310250:t=>Gj.FromTape(t.ID,t.type,t.arguments),3071757647:t=>Hj.FromTape(t.ID,t.type,t.arguments),985171141:t=>Vj.FromTape(t.ID,t.type,t.arguments),2043862942:t=>jj.FromTape(t.ID,t.type,t.arguments),531007025:t=>Wj.FromTape(t.ID,t.type,t.arguments),812556717:t=>Yj.FromTape(t.ID,t.type,t.arguments),5716631:t=>qj.FromTape(t.ID,t.type,t.arguments),3473067441:t=>Xj.FromTape(t.ID,t.type,t.arguments),1549132990:t=>Zj.FromTape(t.ID,t.type,t.arguments),2771591690:t=>Kj.FromTape(t.ID,t.type,t.arguments),3206491090:t=>Qj.FromTape(t.ID,t.type,t.arguments),912023232:t=>Jj.FromTape(t.ID,t.type,t.arguments),3824725483:t=>$j.FromTape(t.ID,t.type,t.arguments),2347447852:t=>tW.FromTape(t.ID,t.type,t.arguments),3081323446:t=>eW.FromTape(t.ID,t.type,t.arguments),3663046924:t=>nW.FromTape(t.ID,t.type,t.arguments),2281632017:t=>iW.FromTape(t.ID,t.type,t.arguments),2415094496:t=>rW.FromTape(t.ID,t.type,t.arguments),2387106220:t=>sW.FromTape(t.ID,t.type,t.arguments),901063453:t=>oW.FromTape(t.ID,t.type,t.arguments),4282788508:t=>aW.FromTape(t.ID,t.type,t.arguments),3124975700:t=>lW.FromTape(t.ID,t.type,t.arguments),1447204868:t=>hW.FromTape(t.ID,t.type,t.arguments),1983826977:t=>cW.FromTape(t.ID,t.type,t.arguments),2636378356:t=>uW.FromTape(t.ID,t.type,t.arguments),1640371178:t=>pW.FromTape(t.ID,t.type,t.arguments),280115917:t=>dW.FromTape(t.ID,t.type,t.arguments),1742049831:t=>fW.FromTape(t.ID,t.type,t.arguments),2552916305:t=>mW.FromTape(t.ID,t.type,t.arguments),1210645708:t=>gW.FromTape(t.ID,t.type,t.arguments),3611470254:t=>yW.FromTape(t.ID,t.type,t.arguments),1199560280:t=>_W.FromTape(t.ID,t.type,t.arguments),3101149627:t=>vW.FromTape(t.ID,t.type,t.arguments),581633288:t=>TW.FromTape(t.ID,t.type,t.arguments),1377556343:t=>EW.FromTape(t.ID,t.type,t.arguments),1735638870:t=>xW.FromTape(t.ID,t.type,t.arguments),1935646853:t=>IW.FromTape(t.ID,t.type,t.arguments),3825984169:t=>bW.FromTape(t.ID,t.type,t.arguments),1692211062:t=>wW.FromTape(t.ID,t.type,t.arguments),2595432518:t=>SW.FromTape(t.ID,t.type,t.arguments),1620046519:t=>AW.FromTape(t.ID,t.type,t.arguments),2097647324:t=>CW.FromTape(t.ID,t.type,t.arguments),2715220739:t=>RW.FromTape(t.ID,t.type,t.arguments),2916149573:t=>DW.FromTape(t.ID,t.type,t.arguments),1229763772:t=>OW.FromTape(t.ID,t.type,t.arguments),3593883385:t=>NW.FromTape(t.ID,t.type,t.arguments),3026737570:t=>MW.FromTape(t.ID,t.type,t.arguments),1600972822:t=>PW.FromTape(t.ID,t.type,t.arguments),1628702193:t=>FW.FromTape(t.ID,t.type,t.arguments),3736923433:t=>LW.FromTape(t.ID,t.type,t.arguments),2347495698:t=>kW.FromTape(t.ID,t.type,t.arguments),3698973494:t=>UW.FromTape(t.ID,t.type,t.arguments),427810014:t=>BW.FromTape(t.ID,t.type,t.arguments),180925521:t=>zW.FromTape(t.ID,t.type,t.arguments),630975310:t=>GW.FromTape(t.ID,t.type,t.arguments),3179687236:t=>HW.FromTape(t.ID,t.type,t.arguments),4292641817:t=>VW.FromTape(t.ID,t.type,t.arguments),1911125066:t=>jW.FromTape(t.ID,t.type,t.arguments),4207607924:t=>WW.FromTape(t.ID,t.type,t.arguments),728799441:t=>YW.FromTape(t.ID,t.type,t.arguments),1417489154:t=>qW.FromTape(t.ID,t.type,t.arguments),2799835756:t=>XW.FromTape(t.ID,t.type,t.arguments),2759199220:t=>ZW.FromTape(t.ID,t.type,t.arguments),1907098498:t=>KW.FromTape(t.ID,t.type,t.arguments),1530820697:t=>QW.FromTape(t.ID,t.type,t.arguments),3956297820:t=>JW.FromTape(t.ID,t.type,t.arguments),2391383451:t=>$W.FromTape(t.ID,t.type,t.arguments),3313531582:t=>tY.FromTape(t.ID,t.type,t.arguments),2769231204:t=>eY.FromTape(t.ID,t.type,t.arguments),891718957:t=>nY.FromTape(t.ID,t.type,t.arguments),926996030:t=>iY.FromTape(t.ID,t.type,t.arguments),2391406946:t=>rY.FromTape(t.ID,t.type,t.arguments),4156078855:t=>sY.FromTape(t.ID,t.type,t.arguments),3512223829:t=>oY.FromTape(t.ID,t.type,t.arguments),1898987631:t=>aY.FromTape(t.ID,t.type,t.arguments),4237592921:t=>lY.FromTape(t.ID,t.type,t.arguments),1133259667:t=>hY.FromTape(t.ID,t.type,t.arguments),3304561284:t=>cY.FromTape(t.ID,t.type,t.arguments),336235671:t=>uY.FromTape(t.ID,t.type,t.arguments),512836454:t=>pY.FromTape(t.ID,t.type,t.arguments),486154966:t=>dY.FromTape(t.ID,t.type,t.arguments),1299126871:t=>fY.FromTape(t.ID,t.type,t.arguments),4009809668:t=>mY.FromTape(t.ID,t.type,t.arguments),4088093105:t=>gY.FromTape(t.ID,t.type,t.arguments),1028945134:t=>yY.FromTape(t.ID,t.type,t.arguments),4218914973:t=>_Y.FromTape(t.ID,t.type,t.arguments),3342526732:t=>vY.FromTape(t.ID,t.type,t.arguments),1236880293:t=>TY.FromTape(t.ID,t.type,t.arguments),2543172580:t=>EY.FromTape(t.ID,t.type,t.arguments),1033361043:t=>xY.FromTape(t.ID,t.type,t.arguments)};var gA=class{constructor(t){this.value=t}};gA.EMAIL="EMAIL",gA.FAX="FAX",gA.PHONE="PHONE",gA.POST="POST",gA.VERBAL="VERBAL",gA.USERDEFINED="USERDEFINED",gA.NOTDEFINED="NOTDEFINED";var yA=class{constructor(t){this.value=t}};yA.DEAD_LOAD_G="DEAD_LOAD_G",yA.COMPLETION_G1="COMPLETION_G1",yA.LIVE_LOAD_Q="LIVE_LOAD_Q",yA.SNOW_S="SNOW_S",yA.WIND_W="WIND_W",yA.PRESTRESSING_P="PRESTRESSING_P",yA.SETTLEMENT_U="SETTLEMENT_U",yA.TEMPERATURE_T="TEMPERATURE_T",yA.EARTHQUAKE_E="EARTHQUAKE_E",yA.FIRE="FIRE",yA.IMPULSE="IMPULSE",yA.IMPACT="IMPACT",yA.TRANSPORT="TRANSPORT",yA.ERECTION="ERECTION",yA.PROPPING="PROPPING",yA.SYSTEM_IMPERFECTION="SYSTEM_IMPERFECTION",yA.SHRINKAGE="SHRINKAGE",yA.CREEP="CREEP",yA.LACK_OF_FIT="LACK_OF_FIT",yA.BUOYANCY="BUOYANCY",yA.ICE="ICE",yA.CURRENT="CURRENT",yA.WAVE="WAVE",yA.RAIN="RAIN",yA.BRAKES="BRAKES",yA.USERDEFINED="USERDEFINED",yA.NOTDEFINED="NOTDEFINED";var _A=class{constructor(t){this.value=t}};_A.PERMANENT_G="PERMANENT_G",_A.VARIABLE_Q="VARIABLE_Q",_A.EXTRAORDINARY_A="EXTRAORDINARY_A",_A.USERDEFINED="USERDEFINED",_A.NOTDEFINED="NOTDEFINED";var vA=class{constructor(t){this.value=t}};vA.ELECTRICACTUATOR="ELECTRICACTUATOR",vA.HANDOPERATEDACTUATOR="HANDOPERATEDACTUATOR",vA.HYDRAULICACTUATOR="HYDRAULICACTUATOR",vA.PNEUMATICACTUATOR="PNEUMATICACTUATOR",vA.THERMOSTATICACTUATOR="THERMOSTATICACTUATOR",vA.USERDEFINED="USERDEFINED",vA.NOTDEFINED="NOTDEFINED";var TA=class{constructor(t){this.value=t}};TA.OFFICE="OFFICE",TA.SITE="SITE",TA.HOME="HOME",TA.DISTRIBUTIONPOINT="DISTRIBUTIONPOINT",TA.USERDEFINED="USERDEFINED";var EA=class{constructor(t){this.value=t}};EA.CONSTANTFLOW="CONSTANTFLOW",EA.VARIABLEFLOWPRESSUREDEPENDANT="VARIABLEFLOWPRESSUREDEPENDANT",EA.VARIABLEFLOWPRESSUREINDEPENDANT="VARIABLEFLOWPRESSUREINDEPENDANT",EA.USERDEFINED="USERDEFINED",EA.NOTDEFINED="NOTDEFINED";var xA=class{constructor(t){this.value=t}};xA.DIFFUSER="DIFFUSER",xA.GRILLE="GRILLE",xA.LOUVRE="LOUVRE",xA.REGISTER="REGISTER",xA.USERDEFINED="USERDEFINED",xA.NOTDEFINED="NOTDEFINED";var IA=class{constructor(t){this.value=t}};IA.FIXEDPLATECOUNTERFLOWEXCHANGER="FIXEDPLATECOUNTERFLOWEXCHANGER",IA.FIXEDPLATECROSSFLOWEXCHANGER="FIXEDPLATECROSSFLOWEXCHANGER",IA.FIXEDPLATEPARALLELFLOWEXCHANGER="FIXEDPLATEPARALLELFLOWEXCHANGER",IA.ROTARYWHEEL="ROTARYWHEEL",IA.RUNAROUNDCOILLOOP="RUNAROUNDCOILLOOP",IA.HEATPIPE="HEATPIPE",IA.TWINTOWERENTHALPYRECOVERYLOOPS="TWINTOWERENTHALPYRECOVERYLOOPS",IA.THERMOSIPHONSEALEDTUBEHEATEXCHANGERS="THERMOSIPHONSEALEDTUBEHEATEXCHANGERS",IA.THERMOSIPHONCOILTYPEHEATEXCHANGERS="THERMOSIPHONCOILTYPEHEATEXCHANGERS",IA.USERDEFINED="USERDEFINED",IA.NOTDEFINED="NOTDEFINED";var bA=class{constructor(t){this.value=t}};bA.BELL="BELL",bA.BREAKGLASSBUTTON="BREAKGLASSBUTTON",bA.LIGHT="LIGHT",bA.MANUALPULLBOX="MANUALPULLBOX",bA.SIREN="SIREN",bA.WHISTLE="WHISTLE",bA.USERDEFINED="USERDEFINED",bA.NOTDEFINED="NOTDEFINED";var wA=class{constructor(t){this.value=t}};wA.USERDEFINED="USERDEFINED",wA.NOTDEFINED="NOTDEFINED";var SA=class{constructor(t){this.value=t}};SA.IN_PLANE_LOADING_2D="IN_PLANE_LOADING_2D",SA.OUT_PLANE_LOADING_2D="OUT_PLANE_LOADING_2D",SA.LOADING_3D="LOADING_3D",SA.USERDEFINED="USERDEFINED",SA.NOTDEFINED="NOTDEFINED";var AA=class{constructor(t){this.value=t}};AA.FIRST_ORDER_THEORY="FIRST_ORDER_THEORY",AA.SECOND_ORDER_THEORY="SECOND_ORDER_THEORY",AA.THIRD_ORDER_THEORY="THIRD_ORDER_THEORY",AA.FULL_NONLINEAR_THEORY="FULL_NONLINEAR_THEORY",AA.USERDEFINED="USERDEFINED",AA.NOTDEFINED="NOTDEFINED";var CA=class{constructor(t){this.value=t}};CA.ADD="ADD",CA.DIVIDE="DIVIDE",CA.MULTIPLY="MULTIPLY",CA.SUBTRACT="SUBTRACT";var RA=class{constructor(t){this.value=t}};RA.SITE="SITE",RA.FACTORY="FACTORY",RA.NOTDEFINED="NOTDEFINED";var DA=class{constructor(t){this.value=t}};DA.AMPLIFIER="AMPLIFIER",DA.CAMERA="CAMERA",DA.DISPLAY="DISPLAY",DA.MICROPHONE="MICROPHONE",DA.PLAYER="PLAYER",DA.PROJECTOR="PROJECTOR",DA.RECEIVER="RECEIVER",DA.SPEAKER="SPEAKER",DA.SWITCHER="SWITCHER",DA.TELEPHONE="TELEPHONE",DA.TUNER="TUNER",DA.USERDEFINED="USERDEFINED",DA.NOTDEFINED="NOTDEFINED";var OA=class{constructor(t){this.value=t}};OA.POLYLINE_FORM="POLYLINE_FORM",OA.CIRCULAR_ARC="CIRCULAR_ARC",OA.ELLIPTIC_ARC="ELLIPTIC_ARC",OA.PARABOLIC_ARC="PARABOLIC_ARC",OA.HYPERBOLIC_ARC="HYPERBOLIC_ARC",OA.UNSPECIFIED="UNSPECIFIED";var NA=class{constructor(t){this.value=t}};NA.PLANE_SURF="PLANE_SURF",NA.CYLINDRICAL_SURF="CYLINDRICAL_SURF",NA.CONICAL_SURF="CONICAL_SURF",NA.SPHERICAL_SURF="SPHERICAL_SURF",NA.TOROIDAL_SURF="TOROIDAL_SURF",NA.SURF_OF_REVOLUTION="SURF_OF_REVOLUTION",NA.RULED_SURF="RULED_SURF",NA.GENERALISED_CONE="GENERALISED_CONE",NA.QUADRIC_SURF="QUADRIC_SURF",NA.SURF_OF_LINEAR_EXTRUSION="SURF_OF_LINEAR_EXTRUSION",NA.UNSPECIFIED="UNSPECIFIED";var MA=class{constructor(t){this.value=t}};MA.BEAM="BEAM",MA.JOIST="JOIST",MA.HOLLOWCORE="HOLLOWCORE",MA.LINTEL="LINTEL",MA.SPANDREL="SPANDREL",MA.T_BEAM="T_BEAM",MA.GIRDER_SEGMENT="GIRDER_SEGMENT",MA.DIAPHRAGM="DIAPHRAGM",MA.PIERCAP="PIERCAP",MA.HATSTONE="HATSTONE",MA.CORNICE="CORNICE",MA.EDGEBEAM="EDGEBEAM",MA.USERDEFINED="USERDEFINED",MA.NOTDEFINED="NOTDEFINED";var PA=class{constructor(t){this.value=t}};PA.FIXED_MOVEMENT="FIXED_MOVEMENT",PA.GUIDED_LONGITUDINAL="GUIDED_LONGITUDINAL",PA.GUIDED_TRANSVERSAL="GUIDED_TRANSVERSAL",PA.FREE_MOVEMENT="FREE_MOVEMENT",PA.NOTDEFINED="NOTDEFINED";var FA=class{constructor(t){this.value=t}};FA.CYLINDRICAL="CYLINDRICAL",FA.SPHERICAL="SPHERICAL",FA.ELASTOMERIC="ELASTOMERIC",FA.POT="POT",FA.GUIDE="GUIDE",FA.ROCKER="ROCKER",FA.ROLLER="ROLLER",FA.DISK="DISK",FA.USERDEFINED="USERDEFINED",FA.NOTDEFINED="NOTDEFINED";var LA=class{constructor(t){this.value=t}};LA.GREATERTHAN="GREATERTHAN",LA.GREATERTHANOREQUALTO="GREATERTHANOREQUALTO",LA.LESSTHAN="LESSTHAN",LA.LESSTHANOREQUALTO="LESSTHANOREQUALTO",LA.EQUALTO="EQUALTO",LA.NOTEQUALTO="NOTEQUALTO",LA.INCLUDES="INCLUDES",LA.NOTINCLUDES="NOTINCLUDES",LA.INCLUDEDIN="INCLUDEDIN",LA.NOTINCLUDEDIN="NOTINCLUDEDIN";var kA=class{constructor(t){this.value=t}};kA.WATER="WATER",kA.STEAM="STEAM",kA.USERDEFINED="USERDEFINED",kA.NOTDEFINED="NOTDEFINED";var UA=class{constructor(t){this.value=t}};UA.UNION="UNION",UA.INTERSECTION="INTERSECTION",UA.DIFFERENCE="DIFFERENCE";var BA=class{constructor(t){this.value=t}};BA.ABUTMENT="ABUTMENT",BA.DECK="DECK",BA.DECK_SEGMENT="DECK_SEGMENT",BA.FOUNDATION="FOUNDATION",BA.PIER="PIER",BA.PIER_SEGMENT="PIER_SEGMENT",BA.PYLON="PYLON",BA.SUBSTRUCTURE="SUBSTRUCTURE",BA.SUPERSTRUCTURE="SUPERSTRUCTURE",BA.SURFACESTRUCTURE="SURFACESTRUCTURE",BA.USERDEFINED="USERDEFINED",BA.NOTDEFINED="NOTDEFINED";var zA=class{constructor(t){this.value=t}};zA.ARCHED="ARCHED",zA.CABLE_STAYED="CABLE_STAYED",zA.CANTILEVER="CANTILEVER",zA.CULVERT="CULVERT",zA.FRAMEWORK="FRAMEWORK",zA.GIRDER="GIRDER",zA.SUSPENSION="SUSPENSION",zA.TRUSS="TRUSS",zA.USERDEFINED="USERDEFINED",zA.NOTDEFINED="NOTDEFINED";var GA=class{constructor(t){this.value=t}};GA.INSULATION="INSULATION",GA.PRECASTPANEL="PRECASTPANEL",GA.APRON="APRON",GA.USERDEFINED="USERDEFINED",GA.NOTDEFINED="NOTDEFINED";var HA=class{constructor(t){this.value=t}};HA.COMPLEX="COMPLEX",HA.ELEMENT="ELEMENT",HA.PARTIAL="PARTIAL",HA.PROVISIONFORVOID="PROVISIONFORVOID",HA.PROVISIONFORSPACE="PROVISIONFORSPACE",HA.USERDEFINED="USERDEFINED",HA.NOTDEFINED="NOTDEFINED";var VA=class{constructor(t){this.value=t}};VA.FENESTRATION="FENESTRATION",VA.FOUNDATION="FOUNDATION",VA.LOADBEARING="LOADBEARING",VA.OUTERSHELL="OUTERSHELL",VA.SHADING="SHADING",VA.TRANSPORT="TRANSPORT",VA.REINFORCING="REINFORCING",VA.PRESTRESSING="PRESTRESSING",VA.USERDEFINED="USERDEFINED",VA.NOTDEFINED="NOTDEFINED";var jA=class{constructor(t){this.value=t}};jA.USERDEFINED="USERDEFINED",jA.NOTDEFINED="NOTDEFINED";var WA=class{constructor(t){this.value=t}};WA.BEND="BEND",WA.CROSS="CROSS",WA.REDUCER="REDUCER",WA.TEE="TEE",WA.USERDEFINED="USERDEFINED",WA.NOTDEFINED="NOTDEFINED";var YA=class{constructor(t){this.value=t}};YA.CABLELADDERSEGMENT="CABLELADDERSEGMENT",YA.CABLETRAYSEGMENT="CABLETRAYSEGMENT",YA.CABLETRUNKINGSEGMENT="CABLETRUNKINGSEGMENT",YA.CONDUITSEGMENT="CONDUITSEGMENT",YA.USERDEFINED="USERDEFINED",YA.NOTDEFINED="NOTDEFINED";var qA=class{constructor(t){this.value=t}};qA.CONNECTOR="CONNECTOR",qA.ENTRY="ENTRY",qA.EXIT="EXIT",qA.JUNCTION="JUNCTION",qA.TRANSITION="TRANSITION",qA.USERDEFINED="USERDEFINED",qA.NOTDEFINED="NOTDEFINED";var XA=class{constructor(t){this.value=t}};XA.BUSBARSEGMENT="BUSBARSEGMENT",XA.CABLESEGMENT="CABLESEGMENT",XA.CONDUCTORSEGMENT="CONDUCTORSEGMENT",XA.CORESEGMENT="CORESEGMENT",XA.USERDEFINED="USERDEFINED",XA.NOTDEFINED="NOTDEFINED";var ZA=class{constructor(t){this.value=t}};ZA.WELL="WELL",ZA.CAISSON="CAISSON",ZA.USERDEFINED="USERDEFINED",ZA.NOTDEFINED="NOTDEFINED";var KA=class{constructor(t){this.value=t}};KA.NOCHANGE="NOCHANGE",KA.MODIFIED="MODIFIED",KA.ADDED="ADDED",KA.DELETED="DELETED",KA.NOTDEFINED="NOTDEFINED";var QA=class{constructor(t){this.value=t}};QA.AIRCOOLED="AIRCOOLED",QA.WATERCOOLED="WATERCOOLED",QA.HEATRECOVERY="HEATRECOVERY",QA.USERDEFINED="USERDEFINED",QA.NOTDEFINED="NOTDEFINED";var JA=class{constructor(t){this.value=t}};JA.USERDEFINED="USERDEFINED",JA.NOTDEFINED="NOTDEFINED";var $A=class{constructor(t){this.value=t}};$A.DXCOOLINGCOIL="DXCOOLINGCOIL",$A.ELECTRICHEATINGCOIL="ELECTRICHEATINGCOIL",$A.GASHEATINGCOIL="GASHEATINGCOIL",$A.HYDRONICCOIL="HYDRONICCOIL",$A.STEAMHEATINGCOIL="STEAMHEATINGCOIL",$A.WATERCOOLINGCOIL="WATERCOOLINGCOIL",$A.WATERHEATINGCOIL="WATERHEATINGCOIL",$A.USERDEFINED="USERDEFINED",$A.NOTDEFINED="NOTDEFINED";var tC=class{constructor(t){this.value=t}};tC.COLUMN="COLUMN",tC.PILASTER="PILASTER",tC.PIERSTEM="PIERSTEM",tC.PIERSTEM_SEGMENT="PIERSTEM_SEGMENT",tC.STANDCOLUMN="STANDCOLUMN",tC.USERDEFINED="USERDEFINED",tC.NOTDEFINED="NOTDEFINED";var eC=class{constructor(t){this.value=t}};eC.ANTENNA="ANTENNA",eC.COMPUTER="COMPUTER",eC.FAX="FAX",eC.GATEWAY="GATEWAY",eC.MODEM="MODEM",eC.NETWORKAPPLIANCE="NETWORKAPPLIANCE",eC.NETWORKBRIDGE="NETWORKBRIDGE",eC.NETWORKHUB="NETWORKHUB",eC.PRINTER="PRINTER",eC.REPEATER="REPEATER",eC.ROUTER="ROUTER",eC.SCANNER="SCANNER",eC.USERDEFINED="USERDEFINED",eC.NOTDEFINED="NOTDEFINED";var nC=class{constructor(t){this.value=t}};nC.P_COMPLEX="P_COMPLEX",nC.Q_COMPLEX="Q_COMPLEX";var iC=class{constructor(t){this.value=t}};iC.DYNAMIC="DYNAMIC",iC.RECIPROCATING="RECIPROCATING",iC.ROTARY="ROTARY",iC.SCROLL="SCROLL",iC.TROCHOIDAL="TROCHOIDAL",iC.SINGLESTAGE="SINGLESTAGE",iC.BOOSTER="BOOSTER",iC.OPENTYPE="OPENTYPE",iC.HERMETIC="HERMETIC",iC.SEMIHERMETIC="SEMIHERMETIC",iC.WELDEDSHELLHERMETIC="WELDEDSHELLHERMETIC",iC.ROLLINGPISTON="ROLLINGPISTON",iC.ROTARYVANE="ROTARYVANE",iC.SINGLESCREW="SINGLESCREW",iC.TWINSCREW="TWINSCREW",iC.USERDEFINED="USERDEFINED",iC.NOTDEFINED="NOTDEFINED";var rC=class{constructor(t){this.value=t}};rC.AIRCOOLED="AIRCOOLED",rC.EVAPORATIVECOOLED="EVAPORATIVECOOLED",rC.WATERCOOLED="WATERCOOLED",rC.WATERCOOLEDBRAZEDPLATE="WATERCOOLEDBRAZEDPLATE",rC.WATERCOOLEDSHELLCOIL="WATERCOOLEDSHELLCOIL",rC.WATERCOOLEDSHELLTUBE="WATERCOOLEDSHELLTUBE",rC.WATERCOOLEDTUBEINTUBE="WATERCOOLEDTUBEINTUBE",rC.USERDEFINED="USERDEFINED",rC.NOTDEFINED="NOTDEFINED";var sC=class{constructor(t){this.value=t}};sC.ATPATH="ATPATH",sC.ATSTART="ATSTART",sC.ATEND="ATEND",sC.NOTDEFINED="NOTDEFINED";var oC=class{constructor(t){this.value=t}};oC.HARD="HARD",oC.SOFT="SOFT",oC.ADVISORY="ADVISORY",oC.USERDEFINED="USERDEFINED",oC.NOTDEFINED="NOTDEFINED";var aC=class{constructor(t){this.value=t}};aC.DEMOLISHING="DEMOLISHING",aC.EARTHMOVING="EARTHMOVING",aC.ERECTING="ERECTING",aC.HEATING="HEATING",aC.LIGHTING="LIGHTING",aC.PAVING="PAVING",aC.PUMPING="PUMPING",aC.TRANSPORTING="TRANSPORTING",aC.USERDEFINED="USERDEFINED",aC.NOTDEFINED="NOTDEFINED";var lC=class{constructor(t){this.value=t}};lC.AGGREGATES="AGGREGATES",lC.CONCRETE="CONCRETE",lC.DRYWALL="DRYWALL",lC.FUEL="FUEL",lC.GYPSUM="GYPSUM",lC.MASONRY="MASONRY",lC.METAL="METAL",lC.PLASTIC="PLASTIC",lC.WOOD="WOOD",lC.NOTDEFINED="NOTDEFINED",lC.USERDEFINED="USERDEFINED";var hC=class{constructor(t){this.value=t}};hC.ASSEMBLY="ASSEMBLY",hC.FORMWORK="FORMWORK",hC.USERDEFINED="USERDEFINED",hC.NOTDEFINED="NOTDEFINED";var cC=class{constructor(t){this.value=t}};cC.FLOATING="FLOATING",cC.PROGRAMMABLE="PROGRAMMABLE",cC.PROPORTIONAL="PROPORTIONAL",cC.MULTIPOSITION="MULTIPOSITION",cC.TWOPOSITION="TWOPOSITION",cC.USERDEFINED="USERDEFINED",cC.NOTDEFINED="NOTDEFINED";var uC=class{constructor(t){this.value=t}};uC.ACTIVE="ACTIVE",uC.PASSIVE="PASSIVE",uC.USERDEFINED="USERDEFINED",uC.NOTDEFINED="NOTDEFINED";var pC=class{constructor(t){this.value=t}};pC.NATURALDRAFT="NATURALDRAFT",pC.MECHANICALINDUCEDDRAFT="MECHANICALINDUCEDDRAFT",pC.MECHANICALFORCEDDRAFT="MECHANICALFORCEDDRAFT",pC.USERDEFINED="USERDEFINED",pC.NOTDEFINED="NOTDEFINED";var dC=class{constructor(t){this.value=t}};dC.USERDEFINED="USERDEFINED",dC.NOTDEFINED="NOTDEFINED";var fC=class{constructor(t){this.value=t}};fC.BUDGET="BUDGET",fC.COSTPLAN="COSTPLAN",fC.ESTIMATE="ESTIMATE",fC.TENDER="TENDER",fC.PRICEDBILLOFQUANTITIES="PRICEDBILLOFQUANTITIES",fC.UNPRICEDBILLOFQUANTITIES="UNPRICEDBILLOFQUANTITIES",fC.SCHEDULEOFRATES="SCHEDULEOFRATES",fC.USERDEFINED="USERDEFINED",fC.NOTDEFINED="NOTDEFINED";var mC=class{constructor(t){this.value=t}};mC.CEILING="CEILING",mC.FLOORING="FLOORING",mC.CLADDING="CLADDING",mC.ROOFING="ROOFING",mC.MOLDING="MOLDING",mC.SKIRTINGBOARD="SKIRTINGBOARD",mC.INSULATION="INSULATION",mC.MEMBRANE="MEMBRANE",mC.SLEEVING="SLEEVING",mC.WRAPPING="WRAPPING",mC.COPING="COPING",mC.USERDEFINED="USERDEFINED",mC.NOTDEFINED="NOTDEFINED";var gC=class{constructor(t){this.value=t}};gC.OFFICE="OFFICE",gC.SITE="SITE",gC.USERDEFINED="USERDEFINED",gC.NOTDEFINED="NOTDEFINED";var yC=class{constructor(t){this.value=t}};yC.USERDEFINED="USERDEFINED",yC.NOTDEFINED="NOTDEFINED";var _C=class{constructor(t){this.value=t}};_C.LINEAR="LINEAR",_C.LOG_LINEAR="LOG_LINEAR",_C.LOG_LOG="LOG_LOG",_C.NOTDEFINED="NOTDEFINED";var vC=class{constructor(t){this.value=t}};vC.BACKDRAFTDAMPER="BACKDRAFTDAMPER",vC.BALANCINGDAMPER="BALANCINGDAMPER",vC.BLASTDAMPER="BLASTDAMPER",vC.CONTROLDAMPER="CONTROLDAMPER",vC.FIREDAMPER="FIREDAMPER",vC.FIRESMOKEDAMPER="FIRESMOKEDAMPER",vC.FUMEHOODEXHAUST="FUMEHOODEXHAUST",vC.GRAVITYDAMPER="GRAVITYDAMPER",vC.GRAVITYRELIEFDAMPER="GRAVITYRELIEFDAMPER",vC.RELIEFDAMPER="RELIEFDAMPER",vC.SMOKEDAMPER="SMOKEDAMPER",vC.USERDEFINED="USERDEFINED",vC.NOTDEFINED="NOTDEFINED";var TC=class{constructor(t){this.value=t}};TC.MEASURED="MEASURED",TC.PREDICTED="PREDICTED",TC.SIMULATED="SIMULATED",TC.USERDEFINED="USERDEFINED",TC.NOTDEFINED="NOTDEFINED";var EC=class{constructor(t){this.value=t}};EC.ANGULARVELOCITYUNIT="ANGULARVELOCITYUNIT",EC.AREADENSITYUNIT="AREADENSITYUNIT",EC.COMPOUNDPLANEANGLEUNIT="COMPOUNDPLANEANGLEUNIT",EC.DYNAMICVISCOSITYUNIT="DYNAMICVISCOSITYUNIT",EC.HEATFLUXDENSITYUNIT="HEATFLUXDENSITYUNIT",EC.INTEGERCOUNTRATEUNIT="INTEGERCOUNTRATEUNIT",EC.ISOTHERMALMOISTURECAPACITYUNIT="ISOTHERMALMOISTURECAPACITYUNIT",EC.KINEMATICVISCOSITYUNIT="KINEMATICVISCOSITYUNIT",EC.LINEARVELOCITYUNIT="LINEARVELOCITYUNIT",EC.MASSDENSITYUNIT="MASSDENSITYUNIT",EC.MASSFLOWRATEUNIT="MASSFLOWRATEUNIT",EC.MOISTUREDIFFUSIVITYUNIT="MOISTUREDIFFUSIVITYUNIT",EC.MOLECULARWEIGHTUNIT="MOLECULARWEIGHTUNIT",EC.SPECIFICHEATCAPACITYUNIT="SPECIFICHEATCAPACITYUNIT",EC.THERMALADMITTANCEUNIT="THERMALADMITTANCEUNIT",EC.THERMALCONDUCTANCEUNIT="THERMALCONDUCTANCEUNIT",EC.THERMALRESISTANCEUNIT="THERMALRESISTANCEUNIT",EC.THERMALTRANSMITTANCEUNIT="THERMALTRANSMITTANCEUNIT",EC.VAPORPERMEABILITYUNIT="VAPORPERMEABILITYUNIT",EC.VOLUMETRICFLOWRATEUNIT="VOLUMETRICFLOWRATEUNIT",EC.ROTATIONALFREQUENCYUNIT="ROTATIONALFREQUENCYUNIT",EC.TORQUEUNIT="TORQUEUNIT",EC.MOMENTOFINERTIAUNIT="MOMENTOFINERTIAUNIT",EC.LINEARMOMENTUNIT="LINEARMOMENTUNIT",EC.LINEARFORCEUNIT="LINEARFORCEUNIT",EC.PLANARFORCEUNIT="PLANARFORCEUNIT",EC.MODULUSOFELASTICITYUNIT="MODULUSOFELASTICITYUNIT",EC.SHEARMODULUSUNIT="SHEARMODULUSUNIT",EC.LINEARSTIFFNESSUNIT="LINEARSTIFFNESSUNIT",EC.ROTATIONALSTIFFNESSUNIT="ROTATIONALSTIFFNESSUNIT",EC.MODULUSOFSUBGRADEREACTIONUNIT="MODULUSOFSUBGRADEREACTIONUNIT",EC.ACCELERATIONUNIT="ACCELERATIONUNIT",EC.CURVATUREUNIT="CURVATUREUNIT",EC.HEATINGVALUEUNIT="HEATINGVALUEUNIT",EC.IONCONCENTRATIONUNIT="IONCONCENTRATIONUNIT",EC.LUMINOUSINTENSITYDISTRIBUTIONUNIT="LUMINOUSINTENSITYDISTRIBUTIONUNIT",EC.MASSPERLENGTHUNIT="MASSPERLENGTHUNIT",EC.MODULUSOFLINEARSUBGRADEREACTIONUNIT="MODULUSOFLINEARSUBGRADEREACTIONUNIT",EC.MODULUSOFROTATIONALSUBGRADEREACTIONUNIT="MODULUSOFROTATIONALSUBGRADEREACTIONUNIT",EC.PHUNIT="PHUNIT",EC.ROTATIONALMASSUNIT="ROTATIONALMASSUNIT",EC.SECTIONAREAINTEGRALUNIT="SECTIONAREAINTEGRALUNIT",EC.SECTIONMODULUSUNIT="SECTIONMODULUSUNIT",EC.SOUNDPOWERLEVELUNIT="SOUNDPOWERLEVELUNIT",EC.SOUNDPOWERUNIT="SOUNDPOWERUNIT",EC.SOUNDPRESSURELEVELUNIT="SOUNDPRESSURELEVELUNIT",EC.SOUNDPRESSUREUNIT="SOUNDPRESSUREUNIT",EC.TEMPERATUREGRADIENTUNIT="TEMPERATUREGRADIENTUNIT",EC.TEMPERATURERATEOFCHANGEUNIT="TEMPERATURERATEOFCHANGEUNIT",EC.THERMALEXPANSIONCOEFFICIENTUNIT="THERMALEXPANSIONCOEFFICIENTUNIT",EC.WARPINGCONSTANTUNIT="WARPINGCONSTANTUNIT",EC.WARPINGMOMENTUNIT="WARPINGMOMENTUNIT",EC.USERDEFINED="USERDEFINED";var xC=class{constructor(t){this.value=t}};xC.POSITIVE="POSITIVE",xC.NEGATIVE="NEGATIVE";var IC=class{constructor(t){this.value=t}};IC.ANCHORPLATE="ANCHORPLATE",IC.BRACKET="BRACKET",IC.SHOE="SHOE",IC.EXPANSION_JOINT_DEVICE="EXPANSION_JOINT_DEVICE",IC.USERDEFINED="USERDEFINED",IC.NOTDEFINED="NOTDEFINED";var bC=class{constructor(t){this.value=t}};bC.FORMEDDUCT="FORMEDDUCT",bC.INSPECTIONCHAMBER="INSPECTIONCHAMBER",bC.INSPECTIONPIT="INSPECTIONPIT",bC.MANHOLE="MANHOLE",bC.METERCHAMBER="METERCHAMBER",bC.SUMP="SUMP",bC.TRENCH="TRENCH",bC.VALVECHAMBER="VALVECHAMBER",bC.USERDEFINED="USERDEFINED",bC.NOTDEFINED="NOTDEFINED";var wC=class{constructor(t){this.value=t}};wC.CABLE="CABLE",wC.CABLECARRIER="CABLECARRIER",wC.DUCT="DUCT",wC.PIPE="PIPE",wC.USERDEFINED="USERDEFINED",wC.NOTDEFINED="NOTDEFINED";var SC=class{constructor(t){this.value=t}};SC.AIRCONDITIONING="AIRCONDITIONING",SC.AUDIOVISUAL="AUDIOVISUAL",SC.CHEMICAL="CHEMICAL",SC.CHILLEDWATER="CHILLEDWATER",SC.COMMUNICATION="COMMUNICATION",SC.COMPRESSEDAIR="COMPRESSEDAIR",SC.CONDENSERWATER="CONDENSERWATER",SC.CONTROL="CONTROL",SC.CONVEYING="CONVEYING",SC.DATA="DATA",SC.DISPOSAL="DISPOSAL",SC.DOMESTICCOLDWATER="DOMESTICCOLDWATER",SC.DOMESTICHOTWATER="DOMESTICHOTWATER",SC.DRAINAGE="DRAINAGE",SC.EARTHING="EARTHING",SC.ELECTRICAL="ELECTRICAL",SC.ELECTROACOUSTIC="ELECTROACOUSTIC",SC.EXHAUST="EXHAUST",SC.FIREPROTECTION="FIREPROTECTION",SC.FUEL="FUEL",SC.GAS="GAS",SC.HAZARDOUS="HAZARDOUS",SC.HEATING="HEATING",SC.LIGHTING="LIGHTING",SC.LIGHTNINGPROTECTION="LIGHTNINGPROTECTION",SC.MUNICIPALSOLIDWASTE="MUNICIPALSOLIDWASTE",SC.OIL="OIL",SC.OPERATIONAL="OPERATIONAL",SC.POWERGENERATION="POWERGENERATION",SC.RAINWATER="RAINWATER",SC.REFRIGERATION="REFRIGERATION",SC.SECURITY="SECURITY",SC.SEWAGE="SEWAGE",SC.SIGNAL="SIGNAL",SC.STORMWATER="STORMWATER",SC.TELEPHONE="TELEPHONE",SC.TV="TV",SC.VACUUM="VACUUM",SC.VENT="VENT",SC.VENTILATION="VENTILATION",SC.WASTEWATER="WASTEWATER",SC.WATERSUPPLY="WATERSUPPLY",SC.USERDEFINED="USERDEFINED",SC.NOTDEFINED="NOTDEFINED";var AC=class{constructor(t){this.value=t}};AC.PUBLIC="PUBLIC",AC.RESTRICTED="RESTRICTED",AC.CONFIDENTIAL="CONFIDENTIAL",AC.PERSONAL="PERSONAL",AC.USERDEFINED="USERDEFINED",AC.NOTDEFINED="NOTDEFINED";var CC=class{constructor(t){this.value=t}};CC.DRAFT="DRAFT",CC.FINALDRAFT="FINALDRAFT",CC.FINAL="FINAL",CC.REVISION="REVISION",CC.NOTDEFINED="NOTDEFINED";var RC=class{constructor(t){this.value=t}};RC.SWINGING="SWINGING",RC.DOUBLE_ACTING="DOUBLE_ACTING",RC.SLIDING="SLIDING",RC.FOLDING="FOLDING",RC.REVOLVING="REVOLVING",RC.ROLLINGUP="ROLLINGUP",RC.FIXEDPANEL="FIXEDPANEL",RC.USERDEFINED="USERDEFINED",RC.NOTDEFINED="NOTDEFINED";var DC=class{constructor(t){this.value=t}};DC.LEFT="LEFT",DC.MIDDLE="MIDDLE",DC.RIGHT="RIGHT",DC.NOTDEFINED="NOTDEFINED";var OC=class{constructor(t){this.value=t}};OC.ALUMINIUM="ALUMINIUM",OC.HIGH_GRADE_STEEL="HIGH_GRADE_STEEL",OC.STEEL="STEEL",OC.WOOD="WOOD",OC.ALUMINIUM_WOOD="ALUMINIUM_WOOD",OC.ALUMINIUM_PLASTIC="ALUMINIUM_PLASTIC",OC.PLASTIC="PLASTIC",OC.USERDEFINED="USERDEFINED",OC.NOTDEFINED="NOTDEFINED";var NC=class{constructor(t){this.value=t}};NC.SINGLE_SWING_LEFT="SINGLE_SWING_LEFT",NC.SINGLE_SWING_RIGHT="SINGLE_SWING_RIGHT",NC.DOUBLE_DOOR_SINGLE_SWING="DOUBLE_DOOR_SINGLE_SWING",NC.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT",NC.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT",NC.DOUBLE_SWING_LEFT="DOUBLE_SWING_LEFT",NC.DOUBLE_SWING_RIGHT="DOUBLE_SWING_RIGHT",NC.DOUBLE_DOOR_DOUBLE_SWING="DOUBLE_DOOR_DOUBLE_SWING",NC.SLIDING_TO_LEFT="SLIDING_TO_LEFT",NC.SLIDING_TO_RIGHT="SLIDING_TO_RIGHT",NC.DOUBLE_DOOR_SLIDING="DOUBLE_DOOR_SLIDING",NC.FOLDING_TO_LEFT="FOLDING_TO_LEFT",NC.FOLDING_TO_RIGHT="FOLDING_TO_RIGHT",NC.DOUBLE_DOOR_FOLDING="DOUBLE_DOOR_FOLDING",NC.REVOLVING="REVOLVING",NC.ROLLINGUP="ROLLINGUP",NC.USERDEFINED="USERDEFINED",NC.NOTDEFINED="NOTDEFINED";var MC=class{constructor(t){this.value=t}};MC.DOOR="DOOR",MC.GATE="GATE",MC.TRAPDOOR="TRAPDOOR",MC.USERDEFINED="USERDEFINED",MC.NOTDEFINED="NOTDEFINED";var PC=class{constructor(t){this.value=t}};PC.SINGLE_SWING_LEFT="SINGLE_SWING_LEFT",PC.SINGLE_SWING_RIGHT="SINGLE_SWING_RIGHT",PC.DOUBLE_DOOR_SINGLE_SWING="DOUBLE_DOOR_SINGLE_SWING",PC.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT",PC.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT",PC.DOUBLE_SWING_LEFT="DOUBLE_SWING_LEFT",PC.DOUBLE_SWING_RIGHT="DOUBLE_SWING_RIGHT",PC.DOUBLE_DOOR_DOUBLE_SWING="DOUBLE_DOOR_DOUBLE_SWING",PC.SLIDING_TO_LEFT="SLIDING_TO_LEFT",PC.SLIDING_TO_RIGHT="SLIDING_TO_RIGHT",PC.DOUBLE_DOOR_SLIDING="DOUBLE_DOOR_SLIDING",PC.FOLDING_TO_LEFT="FOLDING_TO_LEFT",PC.FOLDING_TO_RIGHT="FOLDING_TO_RIGHT",PC.DOUBLE_DOOR_FOLDING="DOUBLE_DOOR_FOLDING",PC.REVOLVING="REVOLVING",PC.ROLLINGUP="ROLLINGUP",PC.SWING_FIXED_LEFT="SWING_FIXED_LEFT",PC.SWING_FIXED_RIGHT="SWING_FIXED_RIGHT",PC.USERDEFINED="USERDEFINED",PC.NOTDEFINED="NOTDEFINED";var FC=class{constructor(t){this.value=t}};FC.BEND="BEND",FC.CONNECTOR="CONNECTOR",FC.ENTRY="ENTRY",FC.EXIT="EXIT",FC.JUNCTION="JUNCTION",FC.OBSTRUCTION="OBSTRUCTION",FC.TRANSITION="TRANSITION",FC.USERDEFINED="USERDEFINED",FC.NOTDEFINED="NOTDEFINED";var LC=class{constructor(t){this.value=t}};LC.RIGIDSEGMENT="RIGIDSEGMENT",LC.FLEXIBLESEGMENT="FLEXIBLESEGMENT",LC.USERDEFINED="USERDEFINED",LC.NOTDEFINED="NOTDEFINED";var kC=class{constructor(t){this.value=t}};kC.FLATOVAL="FLATOVAL",kC.RECTANGULAR="RECTANGULAR",kC.ROUND="ROUND",kC.USERDEFINED="USERDEFINED",kC.NOTDEFINED="NOTDEFINED";var UC=class{constructor(t){this.value=t}};UC.DISHWASHER="DISHWASHER",UC.ELECTRICCOOKER="ELECTRICCOOKER",UC.FREESTANDINGELECTRICHEATER="FREESTANDINGELECTRICHEATER",UC.FREESTANDINGFAN="FREESTANDINGFAN",UC.FREESTANDINGWATERHEATER="FREESTANDINGWATERHEATER",UC.FREESTANDINGWATERCOOLER="FREESTANDINGWATERCOOLER",UC.FREEZER="FREEZER",UC.FRIDGE_FREEZER="FRIDGE_FREEZER",UC.HANDDRYER="HANDDRYER",UC.KITCHENMACHINE="KITCHENMACHINE",UC.MICROWAVE="MICROWAVE",UC.PHOTOCOPIER="PHOTOCOPIER",UC.REFRIGERATOR="REFRIGERATOR",UC.TUMBLEDRYER="TUMBLEDRYER",UC.VENDINGMACHINE="VENDINGMACHINE",UC.WASHINGMACHINE="WASHINGMACHINE",UC.USERDEFINED="USERDEFINED",UC.NOTDEFINED="NOTDEFINED";var BC=class{constructor(t){this.value=t}};BC.CONSUMERUNIT="CONSUMERUNIT",BC.DISTRIBUTIONBOARD="DISTRIBUTIONBOARD",BC.MOTORCONTROLCENTRE="MOTORCONTROLCENTRE",BC.SWITCHBOARD="SWITCHBOARD",BC.USERDEFINED="USERDEFINED",BC.NOTDEFINED="NOTDEFINED";var zC=class{constructor(t){this.value=t}};zC.BATTERY="BATTERY",zC.CAPACITORBANK="CAPACITORBANK",zC.HARMONICFILTER="HARMONICFILTER",zC.INDUCTORBANK="INDUCTORBANK",zC.UPS="UPS",zC.USERDEFINED="USERDEFINED",zC.NOTDEFINED="NOTDEFINED";var GC=class{constructor(t){this.value=t}};GC.CHP="CHP",GC.ENGINEGENERATOR="ENGINEGENERATOR",GC.STANDALONE="STANDALONE",GC.USERDEFINED="USERDEFINED",GC.NOTDEFINED="NOTDEFINED";var HC=class{constructor(t){this.value=t}};HC.DC="DC",HC.INDUCTION="INDUCTION",HC.POLYPHASE="POLYPHASE",HC.RELUCTANCESYNCHRONOUS="RELUCTANCESYNCHRONOUS",HC.SYNCHRONOUS="SYNCHRONOUS",HC.USERDEFINED="USERDEFINED",HC.NOTDEFINED="NOTDEFINED";var VC=class{constructor(t){this.value=t}};VC.TIMECLOCK="TIMECLOCK",VC.TIMEDELAY="TIMEDELAY",VC.RELAY="RELAY",VC.USERDEFINED="USERDEFINED",VC.NOTDEFINED="NOTDEFINED";var jC=class{constructor(t){this.value=t}};jC.ACCESSORY_ASSEMBLY="ACCESSORY_ASSEMBLY",jC.ARCH="ARCH",jC.BEAM_GRID="BEAM_GRID",jC.BRACED_FRAME="BRACED_FRAME",jC.GIRDER="GIRDER",jC.REINFORCEMENT_UNIT="REINFORCEMENT_UNIT",jC.RIGID_FRAME="RIGID_FRAME",jC.SLAB_FIELD="SLAB_FIELD",jC.TRUSS="TRUSS",jC.ABUTMENT="ABUTMENT",jC.PIER="PIER",jC.PYLON="PYLON",jC.CROSS_BRACING="CROSS_BRACING",jC.DECK="DECK",jC.USERDEFINED="USERDEFINED",jC.NOTDEFINED="NOTDEFINED";var WC=class{constructor(t){this.value=t}};WC.COMPLEX="COMPLEX",WC.ELEMENT="ELEMENT",WC.PARTIAL="PARTIAL";var YC=class{constructor(t){this.value=t}};YC.EXTERNALCOMBUSTION="EXTERNALCOMBUSTION",YC.INTERNALCOMBUSTION="INTERNALCOMBUSTION",YC.USERDEFINED="USERDEFINED",YC.NOTDEFINED="NOTDEFINED";var qC=class{constructor(t){this.value=t}};qC.DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER="DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER",qC.DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER="DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER",qC.DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER="DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER",qC.DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER="DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER",qC.DIRECTEVAPORATIVEAIRWASHER="DIRECTEVAPORATIVEAIRWASHER",qC.INDIRECTEVAPORATIVEPACKAGEAIRCOOLER="INDIRECTEVAPORATIVEPACKAGEAIRCOOLER",qC.INDIRECTEVAPORATIVEWETCOIL="INDIRECTEVAPORATIVEWETCOIL",qC.INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER="INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER",qC.INDIRECTDIRECTCOMBINATION="INDIRECTDIRECTCOMBINATION",qC.USERDEFINED="USERDEFINED",qC.NOTDEFINED="NOTDEFINED";var XC=class{constructor(t){this.value=t}};XC.DIRECTEXPANSION="DIRECTEXPANSION",XC.DIRECTEXPANSIONSHELLANDTUBE="DIRECTEXPANSIONSHELLANDTUBE",XC.DIRECTEXPANSIONTUBEINTUBE="DIRECTEXPANSIONTUBEINTUBE",XC.DIRECTEXPANSIONBRAZEDPLATE="DIRECTEXPANSIONBRAZEDPLATE",XC.FLOODEDSHELLANDTUBE="FLOODEDSHELLANDTUBE",XC.SHELLANDCOIL="SHELLANDCOIL",XC.USERDEFINED="USERDEFINED",XC.NOTDEFINED="NOTDEFINED";var ZC=class{constructor(t){this.value=t}};ZC.EVENTRULE="EVENTRULE",ZC.EVENTMESSAGE="EVENTMESSAGE",ZC.EVENTTIME="EVENTTIME",ZC.EVENTCOMPLEX="EVENTCOMPLEX",ZC.USERDEFINED="USERDEFINED",ZC.NOTDEFINED="NOTDEFINED";var KC=class{constructor(t){this.value=t}};KC.STARTEVENT="STARTEVENT",KC.ENDEVENT="ENDEVENT",KC.INTERMEDIATEEVENT="INTERMEDIATEEVENT",KC.USERDEFINED="USERDEFINED",KC.NOTDEFINED="NOTDEFINED";var QC=class{constructor(t){this.value=t}};QC.EXTERNAL="EXTERNAL",QC.EXTERNAL_EARTH="EXTERNAL_EARTH",QC.EXTERNAL_WATER="EXTERNAL_WATER",QC.EXTERNAL_FIRE="EXTERNAL_FIRE",QC.USERDEFINED="USERDEFINED",QC.NOTDEFINED="NOTDEFINED";var JC=class{constructor(t){this.value=t}};JC.CENTRIFUGALFORWARDCURVED="CENTRIFUGALFORWARDCURVED",JC.CENTRIFUGALRADIAL="CENTRIFUGALRADIAL",JC.CENTRIFUGALBACKWARDINCLINEDCURVED="CENTRIFUGALBACKWARDINCLINEDCURVED",JC.CENTRIFUGALAIRFOIL="CENTRIFUGALAIRFOIL",JC.TUBEAXIAL="TUBEAXIAL",JC.VANEAXIAL="VANEAXIAL",JC.PROPELLORAXIAL="PROPELLORAXIAL",JC.USERDEFINED="USERDEFINED",JC.NOTDEFINED="NOTDEFINED";var $C=class{constructor(t){this.value=t}};$C.GLUE="GLUE",$C.MORTAR="MORTAR",$C.WELD="WELD",$C.USERDEFINED="USERDEFINED",$C.NOTDEFINED="NOTDEFINED";var tR=class{constructor(t){this.value=t}};tR.AIRPARTICLEFILTER="AIRPARTICLEFILTER",tR.COMPRESSEDAIRFILTER="COMPRESSEDAIRFILTER",tR.ODORFILTER="ODORFILTER",tR.OILFILTER="OILFILTER",tR.STRAINER="STRAINER",tR.WATERFILTER="WATERFILTER",tR.USERDEFINED="USERDEFINED",tR.NOTDEFINED="NOTDEFINED";var eR=class{constructor(t){this.value=t}};eR.BREECHINGINLET="BREECHINGINLET",eR.FIREHYDRANT="FIREHYDRANT",eR.HOSEREEL="HOSEREEL",eR.SPRINKLER="SPRINKLER",eR.SPRINKLERDEFLECTOR="SPRINKLERDEFLECTOR",eR.USERDEFINED="USERDEFINED",eR.NOTDEFINED="NOTDEFINED";var nR=class{constructor(t){this.value=t}};nR.SOURCE="SOURCE",nR.SINK="SINK",nR.SOURCEANDSINK="SOURCEANDSINK",nR.NOTDEFINED="NOTDEFINED";var iR=class{constructor(t){this.value=t}};iR.PRESSUREGAUGE="PRESSUREGAUGE",iR.THERMOMETER="THERMOMETER",iR.AMMETER="AMMETER",iR.FREQUENCYMETER="FREQUENCYMETER",iR.POWERFACTORMETER="POWERFACTORMETER",iR.PHASEANGLEMETER="PHASEANGLEMETER",iR.VOLTMETER_PEAK="VOLTMETER_PEAK",iR.VOLTMETER_RMS="VOLTMETER_RMS",iR.USERDEFINED="USERDEFINED",iR.NOTDEFINED="NOTDEFINED";var rR=class{constructor(t){this.value=t}};rR.ENERGYMETER="ENERGYMETER",rR.GASMETER="GASMETER",rR.OILMETER="OILMETER",rR.WATERMETER="WATERMETER",rR.USERDEFINED="USERDEFINED",rR.NOTDEFINED="NOTDEFINED";var sR=class{constructor(t){this.value=t}};sR.CAISSON_FOUNDATION="CAISSON_FOUNDATION",sR.FOOTING_BEAM="FOOTING_BEAM",sR.PAD_FOOTING="PAD_FOOTING",sR.PILE_CAP="PILE_CAP",sR.STRIP_FOOTING="STRIP_FOOTING",sR.USERDEFINED="USERDEFINED",sR.NOTDEFINED="NOTDEFINED";var oR=class{constructor(t){this.value=t}};oR.CHAIR="CHAIR",oR.TABLE="TABLE",oR.DESK="DESK",oR.BED="BED",oR.FILECABINET="FILECABINET",oR.SHELF="SHELF",oR.SOFA="SOFA",oR.USERDEFINED="USERDEFINED",oR.NOTDEFINED="NOTDEFINED";var aR=class{constructor(t){this.value=t}};aR.TERRAIN="TERRAIN",aR.SOIL_BORING_POINT="SOIL_BORING_POINT",aR.USERDEFINED="USERDEFINED",aR.NOTDEFINED="NOTDEFINED";var lR=class{constructor(t){this.value=t}};lR.GRAPH_VIEW="GRAPH_VIEW",lR.SKETCH_VIEW="SKETCH_VIEW",lR.MODEL_VIEW="MODEL_VIEW",lR.PLAN_VIEW="PLAN_VIEW",lR.REFLECTED_PLAN_VIEW="REFLECTED_PLAN_VIEW",lR.SECTION_VIEW="SECTION_VIEW",lR.ELEVATION_VIEW="ELEVATION_VIEW",lR.USERDEFINED="USERDEFINED",lR.NOTDEFINED="NOTDEFINED";var hR=class{constructor(t){this.value=t}};hR.GLOBAL_COORDS="GLOBAL_COORDS",hR.LOCAL_COORDS="LOCAL_COORDS";var cR=class{constructor(t){this.value=t}};cR.RECTANGULAR="RECTANGULAR",cR.RADIAL="RADIAL",cR.TRIANGULAR="TRIANGULAR",cR.IRREGULAR="IRREGULAR",cR.USERDEFINED="USERDEFINED",cR.NOTDEFINED="NOTDEFINED";var uR=class{constructor(t){this.value=t}};uR.PLATE="PLATE",uR.SHELLANDTUBE="SHELLANDTUBE",uR.USERDEFINED="USERDEFINED",uR.NOTDEFINED="NOTDEFINED";var pR=class{constructor(t){this.value=t}};pR.STEAMINJECTION="STEAMINJECTION",pR.ADIABATICAIRWASHER="ADIABATICAIRWASHER",pR.ADIABATICPAN="ADIABATICPAN",pR.ADIABATICWETTEDELEMENT="ADIABATICWETTEDELEMENT",pR.ADIABATICATOMIZING="ADIABATICATOMIZING",pR.ADIABATICULTRASONIC="ADIABATICULTRASONIC",pR.ADIABATICRIGIDMEDIA="ADIABATICRIGIDMEDIA",pR.ADIABATICCOMPRESSEDAIRNOZZLE="ADIABATICCOMPRESSEDAIRNOZZLE",pR.ASSISTEDELECTRIC="ASSISTEDELECTRIC",pR.ASSISTEDNATURALGAS="ASSISTEDNATURALGAS",pR.ASSISTEDPROPANE="ASSISTEDPROPANE",pR.ASSISTEDBUTANE="ASSISTEDBUTANE",pR.ASSISTEDSTEAM="ASSISTEDSTEAM",pR.USERDEFINED="USERDEFINED",pR.NOTDEFINED="NOTDEFINED";var dR=class{constructor(t){this.value=t}};dR.CYCLONIC="CYCLONIC",dR.GREASE="GREASE",dR.OIL="OIL",dR.PETROL="PETROL",dR.USERDEFINED="USERDEFINED",dR.NOTDEFINED="NOTDEFINED";var fR=class{constructor(t){this.value=t}};fR.INTERNAL="INTERNAL",fR.EXTERNAL="EXTERNAL",fR.EXTERNAL_EARTH="EXTERNAL_EARTH",fR.EXTERNAL_WATER="EXTERNAL_WATER",fR.EXTERNAL_FIRE="EXTERNAL_FIRE",fR.NOTDEFINED="NOTDEFINED";var mR=class{constructor(t){this.value=t}};mR.ASSETINVENTORY="ASSETINVENTORY",mR.SPACEINVENTORY="SPACEINVENTORY",mR.FURNITUREINVENTORY="FURNITUREINVENTORY",mR.USERDEFINED="USERDEFINED",mR.NOTDEFINED="NOTDEFINED";var gR=class{constructor(t){this.value=t}};gR.DATA="DATA",gR.POWER="POWER",gR.USERDEFINED="USERDEFINED",gR.NOTDEFINED="NOTDEFINED";var yR=class{constructor(t){this.value=t}};yR.UNIFORM_KNOTS="UNIFORM_KNOTS",yR.QUASI_UNIFORM_KNOTS="QUASI_UNIFORM_KNOTS",yR.PIECEWISE_BEZIER_KNOTS="PIECEWISE_BEZIER_KNOTS",yR.UNSPECIFIED="UNSPECIFIED";var _R=class{constructor(t){this.value=t}};_R.ADMINISTRATION="ADMINISTRATION",_R.CARPENTRY="CARPENTRY",_R.CLEANING="CLEANING",_R.CONCRETE="CONCRETE",_R.DRYWALL="DRYWALL",_R.ELECTRIC="ELECTRIC",_R.FINISHING="FINISHING",_R.FLOORING="FLOORING",_R.GENERAL="GENERAL",_R.HVAC="HVAC",_R.LANDSCAPING="LANDSCAPING",_R.MASONRY="MASONRY",_R.PAINTING="PAINTING",_R.PAVING="PAVING",_R.PLUMBING="PLUMBING",_R.ROOFING="ROOFING",_R.SITEGRADING="SITEGRADING",_R.STEELWORK="STEELWORK",_R.SURVEYING="SURVEYING",_R.USERDEFINED="USERDEFINED",_R.NOTDEFINED="NOTDEFINED";var vR=class{constructor(t){this.value=t}};vR.COMPACTFLUORESCENT="COMPACTFLUORESCENT",vR.FLUORESCENT="FLUORESCENT",vR.HALOGEN="HALOGEN",vR.HIGHPRESSUREMERCURY="HIGHPRESSUREMERCURY",vR.HIGHPRESSURESODIUM="HIGHPRESSURESODIUM",vR.LED="LED",vR.METALHALIDE="METALHALIDE",vR.OLED="OLED",vR.TUNGSTENFILAMENT="TUNGSTENFILAMENT",vR.USERDEFINED="USERDEFINED",vR.NOTDEFINED="NOTDEFINED";var TR=class{constructor(t){this.value=t}};TR.AXIS1="AXIS1",TR.AXIS2="AXIS2",TR.AXIS3="AXIS3";var ER=class{constructor(t){this.value=t}};ER.TYPE_A="TYPE_A",ER.TYPE_B="TYPE_B",ER.TYPE_C="TYPE_C",ER.NOTDEFINED="NOTDEFINED";var xR=class{constructor(t){this.value=t}};xR.COMPACTFLUORESCENT="COMPACTFLUORESCENT",xR.FLUORESCENT="FLUORESCENT",xR.HIGHPRESSUREMERCURY="HIGHPRESSUREMERCURY",xR.HIGHPRESSURESODIUM="HIGHPRESSURESODIUM",xR.LIGHTEMITTINGDIODE="LIGHTEMITTINGDIODE",xR.LOWPRESSURESODIUM="LOWPRESSURESODIUM",xR.LOWVOLTAGEHALOGEN="LOWVOLTAGEHALOGEN",xR.MAINVOLTAGEHALOGEN="MAINVOLTAGEHALOGEN",xR.METALHALIDE="METALHALIDE",xR.TUNGSTENFILAMENT="TUNGSTENFILAMENT",xR.NOTDEFINED="NOTDEFINED";var IR=class{constructor(t){this.value=t}};IR.POINTSOURCE="POINTSOURCE",IR.DIRECTIONSOURCE="DIRECTIONSOURCE",IR.SECURITYLIGHTING="SECURITYLIGHTING",IR.USERDEFINED="USERDEFINED",IR.NOTDEFINED="NOTDEFINED";var bR=class{constructor(t){this.value=t}};bR.LOAD_GROUP="LOAD_GROUP",bR.LOAD_CASE="LOAD_CASE",bR.LOAD_COMBINATION="LOAD_COMBINATION",bR.USERDEFINED="USERDEFINED",bR.NOTDEFINED="NOTDEFINED";var wR=class{constructor(t){this.value=t}};wR.LOGICALAND="LOGICALAND",wR.LOGICALOR="LOGICALOR",wR.LOGICALXOR="LOGICALXOR",wR.LOGICALNOTAND="LOGICALNOTAND",wR.LOGICALNOTOR="LOGICALNOTOR";var SR=class{constructor(t){this.value=t}};SR.ANCHORBOLT="ANCHORBOLT",SR.BOLT="BOLT",SR.DOWEL="DOWEL",SR.NAIL="NAIL",SR.NAILPLATE="NAILPLATE",SR.RIVET="RIVET",SR.SCREW="SCREW",SR.SHEARCONNECTOR="SHEARCONNECTOR",SR.STAPLE="STAPLE",SR.STUDSHEARCONNECTOR="STUDSHEARCONNECTOR",SR.COUPLER="COUPLER",SR.USERDEFINED="USERDEFINED",SR.NOTDEFINED="NOTDEFINED";var AR=class{constructor(t){this.value=t}};AR.AIRSTATION="AIRSTATION",AR.FEEDAIRUNIT="FEEDAIRUNIT",AR.OXYGENGENERATOR="OXYGENGENERATOR",AR.OXYGENPLANT="OXYGENPLANT",AR.VACUUMSTATION="VACUUMSTATION",AR.USERDEFINED="USERDEFINED",AR.NOTDEFINED="NOTDEFINED";var CR=class{constructor(t){this.value=t}};CR.BRACE="BRACE",CR.CHORD="CHORD",CR.COLLAR="COLLAR",CR.MEMBER="MEMBER",CR.MULLION="MULLION",CR.PLATE="PLATE",CR.POST="POST",CR.PURLIN="PURLIN",CR.RAFTER="RAFTER",CR.STRINGER="STRINGER",CR.STRUT="STRUT",CR.STUD="STUD",CR.STIFFENING_RIB="STIFFENING_RIB",CR.ARCH_SEGMENT="ARCH_SEGMENT",CR.SUSPENSION_CABLE="SUSPENSION_CABLE",CR.SUSPENDER="SUSPENDER",CR.STAY_CABLE="STAY_CABLE",CR.USERDEFINED="USERDEFINED",CR.NOTDEFINED="NOTDEFINED";var RR=class{constructor(t){this.value=t}};RR.BELTDRIVE="BELTDRIVE",RR.COUPLING="COUPLING",RR.DIRECTDRIVE="DIRECTDRIVE",RR.USERDEFINED="USERDEFINED",RR.NOTDEFINED="NOTDEFINED";var DR=class{constructor(t){this.value=t}};DR.PRODUCT="PRODUCT",DR.PROCESS="PROCESS",DR.CONTROL="CONTROL",DR.RESOURCE="RESOURCE",DR.ACTOR="ACTOR",DR.GROUP="GROUP",DR.PROJECT="PROJECT",DR.NOTDEFINED="NOTDEFINED";var OR=class{constructor(t){this.value=t}};OR.CODECOMPLIANCE="CODECOMPLIANCE",OR.CODEWAIVER="CODEWAIVER",OR.DESIGNINTENT="DESIGNINTENT",OR.EXTERNAL="EXTERNAL",OR.HEALTHANDSAFETY="HEALTHANDSAFETY",OR.MERGECONFLICT="MERGECONFLICT",OR.MODELVIEW="MODELVIEW",OR.PARAMETER="PARAMETER",OR.REQUIREMENT="REQUIREMENT",OR.SPECIFICATION="SPECIFICATION",OR.TRIGGERCONDITION="TRIGGERCONDITION",OR.USERDEFINED="USERDEFINED",OR.NOTDEFINED="NOTDEFINED";var NR=class{constructor(t){this.value=t}};NR.ASSIGNEE="ASSIGNEE",NR.ASSIGNOR="ASSIGNOR",NR.LESSEE="LESSEE",NR.LESSOR="LESSOR",NR.LETTINGAGENT="LETTINGAGENT",NR.OWNER="OWNER",NR.TENANT="TENANT",NR.USERDEFINED="USERDEFINED",NR.NOTDEFINED="NOTDEFINED";var MR=class{constructor(t){this.value=t}};MR.OPENING="OPENING",MR.RECESS="RECESS",MR.USERDEFINED="USERDEFINED",MR.NOTDEFINED="NOTDEFINED";var PR=class{constructor(t){this.value=t}};PR.AUDIOVISUALOUTLET="AUDIOVISUALOUTLET",PR.COMMUNICATIONSOUTLET="COMMUNICATIONSOUTLET",PR.POWEROUTLET="POWEROUTLET",PR.DATAOUTLET="DATAOUTLET",PR.TELEPHONEOUTLET="TELEPHONEOUTLET",PR.USERDEFINED="USERDEFINED",PR.NOTDEFINED="NOTDEFINED";var FR=class{constructor(t){this.value=t}};FR.USERDEFINED="USERDEFINED",FR.NOTDEFINED="NOTDEFINED";var LR=class{constructor(t){this.value=t}};LR.GRILL="GRILL",LR.LOUVER="LOUVER",LR.SCREEN="SCREEN",LR.USERDEFINED="USERDEFINED",LR.NOTDEFINED="NOTDEFINED";var kR=class{constructor(t){this.value=t}};kR.ACCESS="ACCESS",kR.BUILDING="BUILDING",kR.WORK="WORK",kR.USERDEFINED="USERDEFINED",kR.NOTDEFINED="NOTDEFINED";var UR=class{constructor(t){this.value=t}};UR.PHYSICAL="PHYSICAL",UR.VIRTUAL="VIRTUAL",UR.NOTDEFINED="NOTDEFINED";var BR=class{constructor(t){this.value=t}};BR.CAST_IN_PLACE="CAST_IN_PLACE",BR.COMPOSITE="COMPOSITE",BR.PRECAST_CONCRETE="PRECAST_CONCRETE",BR.PREFAB_STEEL="PREFAB_STEEL",BR.USERDEFINED="USERDEFINED",BR.NOTDEFINED="NOTDEFINED";var zR=class{constructor(t){this.value=t}};zR.BORED="BORED",zR.DRIVEN="DRIVEN",zR.JETGROUTING="JETGROUTING",zR.COHESION="COHESION",zR.FRICTION="FRICTION",zR.SUPPORT="SUPPORT",zR.USERDEFINED="USERDEFINED",zR.NOTDEFINED="NOTDEFINED";var GR=class{constructor(t){this.value=t}};GR.BEND="BEND",GR.CONNECTOR="CONNECTOR",GR.ENTRY="ENTRY",GR.EXIT="EXIT",GR.JUNCTION="JUNCTION",GR.OBSTRUCTION="OBSTRUCTION",GR.TRANSITION="TRANSITION",GR.USERDEFINED="USERDEFINED",GR.NOTDEFINED="NOTDEFINED";var HR=class{constructor(t){this.value=t}};HR.CULVERT="CULVERT",HR.FLEXIBLESEGMENT="FLEXIBLESEGMENT",HR.RIGIDSEGMENT="RIGIDSEGMENT",HR.GUTTER="GUTTER",HR.SPOOL="SPOOL",HR.USERDEFINED="USERDEFINED",HR.NOTDEFINED="NOTDEFINED";var VR=class{constructor(t){this.value=t}};VR.CURTAIN_PANEL="CURTAIN_PANEL",VR.SHEET="SHEET",VR.FLANGE_PLATE="FLANGE_PLATE",VR.WEB_PLATE="WEB_PLATE",VR.STIFFENER_PLATE="STIFFENER_PLATE",VR.GUSSET_PLATE="GUSSET_PLATE",VR.COVER_PLATE="COVER_PLATE",VR.SPLICE_PLATE="SPLICE_PLATE",VR.BASE_PLATE="BASE_PLATE",VR.USERDEFINED="USERDEFINED",VR.NOTDEFINED="NOTDEFINED";var jR=class{constructor(t){this.value=t}};jR.CURVE3D="CURVE3D",jR.PCURVE_S1="PCURVE_S1",jR.PCURVE_S2="PCURVE_S2";var WR=class{constructor(t){this.value=t}};WR.ADVICE_CAUTION="ADVICE_CAUTION",WR.ADVICE_NOTE="ADVICE_NOTE",WR.ADVICE_WARNING="ADVICE_WARNING",WR.CALIBRATION="CALIBRATION",WR.DIAGNOSTIC="DIAGNOSTIC",WR.SHUTDOWN="SHUTDOWN",WR.STARTUP="STARTUP",WR.USERDEFINED="USERDEFINED",WR.NOTDEFINED="NOTDEFINED";var YR=class{constructor(t){this.value=t}};YR.CURVE="CURVE",YR.AREA="AREA";var qR=class{constructor(t){this.value=t}};qR.CHANGEORDER="CHANGEORDER",qR.MAINTENANCEWORKORDER="MAINTENANCEWORKORDER",qR.MOVEORDER="MOVEORDER",qR.PURCHASEORDER="PURCHASEORDER",qR.WORKORDER="WORKORDER",qR.USERDEFINED="USERDEFINED",qR.NOTDEFINED="NOTDEFINED";var XR=class{constructor(t){this.value=t}};XR.PROJECTED_LENGTH="PROJECTED_LENGTH",XR.TRUE_LENGTH="TRUE_LENGTH";var ZR=class{constructor(t){this.value=t}};ZR.BLISTER="BLISTER",ZR.DEVIATOR="DEVIATOR",ZR.USERDEFINED="USERDEFINED",ZR.NOTDEFINED="NOTDEFINED";var KR=class{constructor(t){this.value=t}};KR.PSET_TYPEDRIVENONLY="PSET_TYPEDRIVENONLY",KR.PSET_TYPEDRIVENOVERRIDE="PSET_TYPEDRIVENOVERRIDE",KR.PSET_OCCURRENCEDRIVEN="PSET_OCCURRENCEDRIVEN",KR.PSET_PERFORMANCEDRIVEN="PSET_PERFORMANCEDRIVEN",KR.QTO_TYPEDRIVENONLY="QTO_TYPEDRIVENONLY",KR.QTO_TYPEDRIVENOVERRIDE="QTO_TYPEDRIVENOVERRIDE",KR.QTO_OCCURRENCEDRIVEN="QTO_OCCURRENCEDRIVEN",KR.NOTDEFINED="NOTDEFINED";var QR=class{constructor(t){this.value=t}};QR.ELECTRONIC="ELECTRONIC",QR.ELECTROMAGNETIC="ELECTROMAGNETIC",QR.RESIDUALCURRENT="RESIDUALCURRENT",QR.THERMAL="THERMAL",QR.USERDEFINED="USERDEFINED",QR.NOTDEFINED="NOTDEFINED";var JR=class{constructor(t){this.value=t}};JR.CIRCUITBREAKER="CIRCUITBREAKER",JR.EARTHLEAKAGECIRCUITBREAKER="EARTHLEAKAGECIRCUITBREAKER",JR.EARTHINGSWITCH="EARTHINGSWITCH",JR.FUSEDISCONNECTOR="FUSEDISCONNECTOR",JR.RESIDUALCURRENTCIRCUITBREAKER="RESIDUALCURRENTCIRCUITBREAKER",JR.RESIDUALCURRENTSWITCH="RESIDUALCURRENTSWITCH",JR.VARISTOR="VARISTOR",JR.USERDEFINED="USERDEFINED",JR.NOTDEFINED="NOTDEFINED";var $R=class{constructor(t){this.value=t}};$R.CIRCULATOR="CIRCULATOR",$R.ENDSUCTION="ENDSUCTION",$R.SPLITCASE="SPLITCASE",$R.SUBMERSIBLEPUMP="SUBMERSIBLEPUMP",$R.SUMPPUMP="SUMPPUMP",$R.VERTICALINLINE="VERTICALINLINE",$R.VERTICALTURBINE="VERTICALTURBINE",$R.USERDEFINED="USERDEFINED",$R.NOTDEFINED="NOTDEFINED";var tD=class{constructor(t){this.value=t}};tD.HANDRAIL="HANDRAIL",tD.GUARDRAIL="GUARDRAIL",tD.BALUSTRADE="BALUSTRADE",tD.USERDEFINED="USERDEFINED",tD.NOTDEFINED="NOTDEFINED";var eD=class{constructor(t){this.value=t}};eD.STRAIGHT="STRAIGHT",eD.SPIRAL="SPIRAL",eD.USERDEFINED="USERDEFINED",eD.NOTDEFINED="NOTDEFINED";var nD=class{constructor(t){this.value=t}};nD.STRAIGHT_RUN_RAMP="STRAIGHT_RUN_RAMP",nD.TWO_STRAIGHT_RUN_RAMP="TWO_STRAIGHT_RUN_RAMP",nD.QUARTER_TURN_RAMP="QUARTER_TURN_RAMP",nD.TWO_QUARTER_TURN_RAMP="TWO_QUARTER_TURN_RAMP",nD.HALF_TURN_RAMP="HALF_TURN_RAMP",nD.SPIRAL_RAMP="SPIRAL_RAMP",nD.USERDEFINED="USERDEFINED",nD.NOTDEFINED="NOTDEFINED";var iD=class{constructor(t){this.value=t}};iD.DAILY="DAILY",iD.WEEKLY="WEEKLY",iD.MONTHLY_BY_DAY_OF_MONTH="MONTHLY_BY_DAY_OF_MONTH",iD.MONTHLY_BY_POSITION="MONTHLY_BY_POSITION",iD.BY_DAY_COUNT="BY_DAY_COUNT",iD.BY_WEEKDAY_COUNT="BY_WEEKDAY_COUNT",iD.YEARLY_BY_DAY_OF_MONTH="YEARLY_BY_DAY_OF_MONTH",iD.YEARLY_BY_POSITION="YEARLY_BY_POSITION";var rD=class{constructor(t){this.value=t}};rD.KILOPOINT="KILOPOINT",rD.MILEPOINT="MILEPOINT",rD.STATION="STATION",rD.USERDEFINED="USERDEFINED",rD.NOTDEFINED="NOTDEFINED";var sD=class{constructor(t){this.value=t}};sD.BLINN="BLINN",sD.FLAT="FLAT",sD.GLASS="GLASS",sD.MATT="MATT",sD.METAL="METAL",sD.MIRROR="MIRROR",sD.PHONG="PHONG",sD.PLASTIC="PLASTIC",sD.STRAUSS="STRAUSS",sD.NOTDEFINED="NOTDEFINED";var oD=class{constructor(t){this.value=t}};oD.MAIN="MAIN",oD.SHEAR="SHEAR",oD.LIGATURE="LIGATURE",oD.STUD="STUD",oD.PUNCHING="PUNCHING",oD.EDGE="EDGE",oD.RING="RING",oD.ANCHORING="ANCHORING",oD.USERDEFINED="USERDEFINED",oD.NOTDEFINED="NOTDEFINED";var aD=class{constructor(t){this.value=t}};aD.PLAIN="PLAIN",aD.TEXTURED="TEXTURED";var lD=class{constructor(t){this.value=t}};lD.ANCHORING="ANCHORING",lD.EDGE="EDGE",lD.LIGATURE="LIGATURE",lD.MAIN="MAIN",lD.PUNCHING="PUNCHING",lD.RING="RING",lD.SHEAR="SHEAR",lD.STUD="STUD",lD.SPACEBAR="SPACEBAR",lD.USERDEFINED="USERDEFINED",lD.NOTDEFINED="NOTDEFINED";var hD=class{constructor(t){this.value=t}};hD.USERDEFINED="USERDEFINED",hD.NOTDEFINED="NOTDEFINED";var cD=class{constructor(t){this.value=t}};cD.SUPPLIER="SUPPLIER",cD.MANUFACTURER="MANUFACTURER",cD.CONTRACTOR="CONTRACTOR",cD.SUBCONTRACTOR="SUBCONTRACTOR",cD.ARCHITECT="ARCHITECT",cD.STRUCTURALENGINEER="STRUCTURALENGINEER",cD.COSTENGINEER="COSTENGINEER",cD.CLIENT="CLIENT",cD.BUILDINGOWNER="BUILDINGOWNER",cD.BUILDINGOPERATOR="BUILDINGOPERATOR",cD.MECHANICALENGINEER="MECHANICALENGINEER",cD.ELECTRICALENGINEER="ELECTRICALENGINEER",cD.PROJECTMANAGER="PROJECTMANAGER",cD.FACILITIESMANAGER="FACILITIESMANAGER",cD.CIVILENGINEER="CIVILENGINEER",cD.COMMISSIONINGENGINEER="COMMISSIONINGENGINEER",cD.ENGINEER="ENGINEER",cD.OWNER="OWNER",cD.CONSULTANT="CONSULTANT",cD.CONSTRUCTIONMANAGER="CONSTRUCTIONMANAGER",cD.FIELDCONSTRUCTIONMANAGER="FIELDCONSTRUCTIONMANAGER",cD.RESELLER="RESELLER",cD.USERDEFINED="USERDEFINED";var uD=class{constructor(t){this.value=t}};uD.FLAT_ROOF="FLAT_ROOF",uD.SHED_ROOF="SHED_ROOF",uD.GABLE_ROOF="GABLE_ROOF",uD.HIP_ROOF="HIP_ROOF",uD.HIPPED_GABLE_ROOF="HIPPED_GABLE_ROOF",uD.GAMBREL_ROOF="GAMBREL_ROOF",uD.MANSARD_ROOF="MANSARD_ROOF",uD.BARREL_ROOF="BARREL_ROOF",uD.RAINBOW_ROOF="RAINBOW_ROOF",uD.BUTTERFLY_ROOF="BUTTERFLY_ROOF",uD.PAVILION_ROOF="PAVILION_ROOF",uD.DOME_ROOF="DOME_ROOF",uD.FREEFORM="FREEFORM",uD.USERDEFINED="USERDEFINED",uD.NOTDEFINED="NOTDEFINED";var pD=class{constructor(t){this.value=t}};pD.EXA="EXA",pD.PETA="PETA",pD.TERA="TERA",pD.GIGA="GIGA",pD.MEGA="MEGA",pD.KILO="KILO",pD.HECTO="HECTO",pD.DECA="DECA",pD.DECI="DECI",pD.CENTI="CENTI",pD.MILLI="MILLI",pD.MICRO="MICRO",pD.NANO="NANO",pD.PICO="PICO",pD.FEMTO="FEMTO",pD.ATTO="ATTO";var dD=class{constructor(t){this.value=t}};dD.AMPERE="AMPERE",dD.BECQUEREL="BECQUEREL",dD.CANDELA="CANDELA",dD.COULOMB="COULOMB",dD.CUBIC_METRE="CUBIC_METRE",dD.DEGREE_CELSIUS="DEGREE_CELSIUS",dD.FARAD="FARAD",dD.GRAM="GRAM",dD.GRAY="GRAY",dD.HENRY="HENRY",dD.HERTZ="HERTZ",dD.JOULE="JOULE",dD.KELVIN="KELVIN",dD.LUMEN="LUMEN",dD.LUX="LUX",dD.METRE="METRE",dD.MOLE="MOLE",dD.NEWTON="NEWTON",dD.OHM="OHM",dD.PASCAL="PASCAL",dD.RADIAN="RADIAN",dD.SECOND="SECOND",dD.SIEMENS="SIEMENS",dD.SIEVERT="SIEVERT",dD.SQUARE_METRE="SQUARE_METRE",dD.STERADIAN="STERADIAN",dD.TESLA="TESLA",dD.VOLT="VOLT",dD.WATT="WATT",dD.WEBER="WEBER";var fD=class{constructor(t){this.value=t}};fD.BATH="BATH",fD.BIDET="BIDET",fD.CISTERN="CISTERN",fD.SHOWER="SHOWER",fD.SINK="SINK",fD.SANITARYFOUNTAIN="SANITARYFOUNTAIN",fD.TOILETPAN="TOILETPAN",fD.URINAL="URINAL",fD.WASHHANDBASIN="WASHHANDBASIN",fD.WCSEAT="WCSEAT",fD.USERDEFINED="USERDEFINED",fD.NOTDEFINED="NOTDEFINED";var mD=class{constructor(t){this.value=t}};mD.UNIFORM="UNIFORM",mD.TAPERED="TAPERED";var gD=class{constructor(t){this.value=t}};gD.COSENSOR="COSENSOR",gD.CO2SENSOR="CO2SENSOR",gD.CONDUCTANCESENSOR="CONDUCTANCESENSOR",gD.CONTACTSENSOR="CONTACTSENSOR",gD.FIRESENSOR="FIRESENSOR",gD.FLOWSENSOR="FLOWSENSOR",gD.FROSTSENSOR="FROSTSENSOR",gD.GASSENSOR="GASSENSOR",gD.HEATSENSOR="HEATSENSOR",gD.HUMIDITYSENSOR="HUMIDITYSENSOR",gD.IDENTIFIERSENSOR="IDENTIFIERSENSOR",gD.IONCONCENTRATIONSENSOR="IONCONCENTRATIONSENSOR",gD.LEVELSENSOR="LEVELSENSOR",gD.LIGHTSENSOR="LIGHTSENSOR",gD.MOISTURESENSOR="MOISTURESENSOR",gD.MOVEMENTSENSOR="MOVEMENTSENSOR",gD.PHSENSOR="PHSENSOR",gD.PRESSURESENSOR="PRESSURESENSOR",gD.RADIATIONSENSOR="RADIATIONSENSOR",gD.RADIOACTIVITYSENSOR="RADIOACTIVITYSENSOR",gD.SMOKESENSOR="SMOKESENSOR",gD.SOUNDSENSOR="SOUNDSENSOR",gD.TEMPERATURESENSOR="TEMPERATURESENSOR",gD.WINDSENSOR="WINDSENSOR",gD.USERDEFINED="USERDEFINED",gD.NOTDEFINED="NOTDEFINED";var yD=class{constructor(t){this.value=t}};yD.START_START="START_START",yD.START_FINISH="START_FINISH",yD.FINISH_START="FINISH_START",yD.FINISH_FINISH="FINISH_FINISH",yD.USERDEFINED="USERDEFINED",yD.NOTDEFINED="NOTDEFINED";var _D=class{constructor(t){this.value=t}};_D.JALOUSIE="JALOUSIE",_D.SHUTTER="SHUTTER",_D.AWNING="AWNING",_D.USERDEFINED="USERDEFINED",_D.NOTDEFINED="NOTDEFINED";var vD=class{constructor(t){this.value=t}};vD.P_SINGLEVALUE="P_SINGLEVALUE",vD.P_ENUMERATEDVALUE="P_ENUMERATEDVALUE",vD.P_BOUNDEDVALUE="P_BOUNDEDVALUE",vD.P_LISTVALUE="P_LISTVALUE",vD.P_TABLEVALUE="P_TABLEVALUE",vD.P_REFERENCEVALUE="P_REFERENCEVALUE",vD.Q_LENGTH="Q_LENGTH",vD.Q_AREA="Q_AREA",vD.Q_VOLUME="Q_VOLUME",vD.Q_COUNT="Q_COUNT",vD.Q_WEIGHT="Q_WEIGHT",vD.Q_TIME="Q_TIME";var TD=class{constructor(t){this.value=t}};TD.FLOOR="FLOOR",TD.ROOF="ROOF",TD.LANDING="LANDING",TD.BASESLAB="BASESLAB",TD.APPROACH_SLAB="APPROACH_SLAB",TD.PAVING="PAVING",TD.WEARING="WEARING",TD.SIDEWALK="SIDEWALK",TD.USERDEFINED="USERDEFINED",TD.NOTDEFINED="NOTDEFINED";var ED=class{constructor(t){this.value=t}};ED.SOLARCOLLECTOR="SOLARCOLLECTOR",ED.SOLARPANEL="SOLARPANEL",ED.USERDEFINED="USERDEFINED",ED.NOTDEFINED="NOTDEFINED";var xD=class{constructor(t){this.value=t}};xD.CONVECTOR="CONVECTOR",xD.RADIATOR="RADIATOR",xD.USERDEFINED="USERDEFINED",xD.NOTDEFINED="NOTDEFINED";var ID=class{constructor(t){this.value=t}};ID.SPACE="SPACE",ID.PARKING="PARKING",ID.GFA="GFA",ID.INTERNAL="INTERNAL",ID.EXTERNAL="EXTERNAL",ID.USERDEFINED="USERDEFINED",ID.NOTDEFINED="NOTDEFINED";var bD=class{constructor(t){this.value=t}};bD.CONSTRUCTION="CONSTRUCTION",bD.FIRESAFETY="FIRESAFETY",bD.LIGHTING="LIGHTING",bD.OCCUPANCY="OCCUPANCY",bD.SECURITY="SECURITY",bD.THERMAL="THERMAL",bD.TRANSPORT="TRANSPORT",bD.VENTILATION="VENTILATION",bD.USERDEFINED="USERDEFINED",bD.NOTDEFINED="NOTDEFINED";var wD=class{constructor(t){this.value=t}};wD.BIRDCAGE="BIRDCAGE",wD.COWL="COWL",wD.RAINWATERHOPPER="RAINWATERHOPPER",wD.USERDEFINED="USERDEFINED",wD.NOTDEFINED="NOTDEFINED";var SD=class{constructor(t){this.value=t}};SD.STRAIGHT="STRAIGHT",SD.WINDER="WINDER",SD.SPIRAL="SPIRAL",SD.CURVED="CURVED",SD.FREEFORM="FREEFORM",SD.USERDEFINED="USERDEFINED",SD.NOTDEFINED="NOTDEFINED";var AD=class{constructor(t){this.value=t}};AD.STRAIGHT_RUN_STAIR="STRAIGHT_RUN_STAIR",AD.TWO_STRAIGHT_RUN_STAIR="TWO_STRAIGHT_RUN_STAIR",AD.QUARTER_WINDING_STAIR="QUARTER_WINDING_STAIR",AD.QUARTER_TURN_STAIR="QUARTER_TURN_STAIR",AD.HALF_WINDING_STAIR="HALF_WINDING_STAIR",AD.HALF_TURN_STAIR="HALF_TURN_STAIR",AD.TWO_QUARTER_WINDING_STAIR="TWO_QUARTER_WINDING_STAIR",AD.TWO_QUARTER_TURN_STAIR="TWO_QUARTER_TURN_STAIR",AD.THREE_QUARTER_WINDING_STAIR="THREE_QUARTER_WINDING_STAIR",AD.THREE_QUARTER_TURN_STAIR="THREE_QUARTER_TURN_STAIR",AD.SPIRAL_STAIR="SPIRAL_STAIR",AD.DOUBLE_RETURN_STAIR="DOUBLE_RETURN_STAIR",AD.CURVED_RUN_STAIR="CURVED_RUN_STAIR",AD.TWO_CURVED_RUN_STAIR="TWO_CURVED_RUN_STAIR",AD.USERDEFINED="USERDEFINED",AD.NOTDEFINED="NOTDEFINED";var CD=class{constructor(t){this.value=t}};CD.READWRITE="READWRITE",CD.READONLY="READONLY",CD.LOCKED="LOCKED",CD.READWRITELOCKED="READWRITELOCKED",CD.READONLYLOCKED="READONLYLOCKED";var RD=class{constructor(t){this.value=t}};RD.CONST="CONST",RD.LINEAR="LINEAR",RD.POLYGONAL="POLYGONAL",RD.EQUIDISTANT="EQUIDISTANT",RD.SINUS="SINUS",RD.PARABOLA="PARABOLA",RD.DISCRETE="DISCRETE",RD.USERDEFINED="USERDEFINED",RD.NOTDEFINED="NOTDEFINED";var DD=class{constructor(t){this.value=t}};DD.RIGID_JOINED_MEMBER="RIGID_JOINED_MEMBER",DD.PIN_JOINED_MEMBER="PIN_JOINED_MEMBER",DD.CABLE="CABLE",DD.TENSION_MEMBER="TENSION_MEMBER",DD.COMPRESSION_MEMBER="COMPRESSION_MEMBER",DD.USERDEFINED="USERDEFINED",DD.NOTDEFINED="NOTDEFINED";var OD=class{constructor(t){this.value=t}};OD.CONST="CONST",OD.BILINEAR="BILINEAR",OD.DISCRETE="DISCRETE",OD.ISOCONTOUR="ISOCONTOUR",OD.USERDEFINED="USERDEFINED",OD.NOTDEFINED="NOTDEFINED";var ND=class{constructor(t){this.value=t}};ND.BENDING_ELEMENT="BENDING_ELEMENT",ND.MEMBRANE_ELEMENT="MEMBRANE_ELEMENT",ND.SHELL="SHELL",ND.USERDEFINED="USERDEFINED",ND.NOTDEFINED="NOTDEFINED";var MD=class{constructor(t){this.value=t}};MD.PURCHASE="PURCHASE",MD.WORK="WORK",MD.USERDEFINED="USERDEFINED",MD.NOTDEFINED="NOTDEFINED";var PD=class{constructor(t){this.value=t}};PD.MARK="MARK",PD.TAG="TAG",PD.TREATMENT="TREATMENT",PD.DEFECT="DEFECT",PD.USERDEFINED="USERDEFINED",PD.NOTDEFINED="NOTDEFINED";var FD=class{constructor(t){this.value=t}};FD.POSITIVE="POSITIVE",FD.NEGATIVE="NEGATIVE",FD.BOTH="BOTH";var LD=class{constructor(t){this.value=t}};LD.CONTACTOR="CONTACTOR",LD.DIMMERSWITCH="DIMMERSWITCH",LD.EMERGENCYSTOP="EMERGENCYSTOP",LD.KEYPAD="KEYPAD",LD.MOMENTARYSWITCH="MOMENTARYSWITCH",LD.SELECTORSWITCH="SELECTORSWITCH",LD.STARTER="STARTER",LD.SWITCHDISCONNECTOR="SWITCHDISCONNECTOR",LD.TOGGLESWITCH="TOGGLESWITCH",LD.USERDEFINED="USERDEFINED",LD.NOTDEFINED="NOTDEFINED";var kD=class{constructor(t){this.value=t}};kD.PANEL="PANEL",kD.WORKSURFACE="WORKSURFACE",kD.USERDEFINED="USERDEFINED",kD.NOTDEFINED="NOTDEFINED";var UD=class{constructor(t){this.value=t}};UD.BASIN="BASIN",UD.BREAKPRESSURE="BREAKPRESSURE",UD.EXPANSION="EXPANSION",UD.FEEDANDEXPANSION="FEEDANDEXPANSION",UD.PRESSUREVESSEL="PRESSUREVESSEL",UD.STORAGE="STORAGE",UD.VESSEL="VESSEL",UD.USERDEFINED="USERDEFINED",UD.NOTDEFINED="NOTDEFINED";var BD=class{constructor(t){this.value=t}};BD.ELAPSEDTIME="ELAPSEDTIME",BD.WORKTIME="WORKTIME",BD.NOTDEFINED="NOTDEFINED";var zD=class{constructor(t){this.value=t}};zD.ATTENDANCE="ATTENDANCE",zD.CONSTRUCTION="CONSTRUCTION",zD.DEMOLITION="DEMOLITION",zD.DISMANTLE="DISMANTLE",zD.DISPOSAL="DISPOSAL",zD.INSTALLATION="INSTALLATION",zD.LOGISTIC="LOGISTIC",zD.MAINTENANCE="MAINTENANCE",zD.MOVE="MOVE",zD.OPERATION="OPERATION",zD.REMOVAL="REMOVAL",zD.RENOVATION="RENOVATION",zD.USERDEFINED="USERDEFINED",zD.NOTDEFINED="NOTDEFINED";var GD=class{constructor(t){this.value=t}};GD.COUPLER="COUPLER",GD.FIXED_END="FIXED_END",GD.TENSIONING_END="TENSIONING_END",GD.USERDEFINED="USERDEFINED",GD.NOTDEFINED="NOTDEFINED";var HD=class{constructor(t){this.value=t}};HD.DUCT="DUCT",HD.COUPLER="COUPLER",HD.GROUTING_DUCT="GROUTING_DUCT",HD.TRUMPET="TRUMPET",HD.DIABOLO="DIABOLO",HD.USERDEFINED="USERDEFINED",HD.NOTDEFINED="NOTDEFINED";var VD=class{constructor(t){this.value=t}};VD.BAR="BAR",VD.COATED="COATED",VD.STRAND="STRAND",VD.WIRE="WIRE",VD.USERDEFINED="USERDEFINED",VD.NOTDEFINED="NOTDEFINED";var jD=class{constructor(t){this.value=t}};jD.LEFT="LEFT",jD.RIGHT="RIGHT",jD.UP="UP",jD.DOWN="DOWN";var WD=class{constructor(t){this.value=t}};WD.CONTINUOUS="CONTINUOUS",WD.DISCRETE="DISCRETE",WD.DISCRETEBINARY="DISCRETEBINARY",WD.PIECEWISEBINARY="PIECEWISEBINARY",WD.PIECEWISECONSTANT="PIECEWISECONSTANT",WD.PIECEWISECONTINUOUS="PIECEWISECONTINUOUS",WD.NOTDEFINED="NOTDEFINED";var YD=class{constructor(t){this.value=t}};YD.CURRENT="CURRENT",YD.FREQUENCY="FREQUENCY",YD.INVERTER="INVERTER",YD.RECTIFIER="RECTIFIER",YD.VOLTAGE="VOLTAGE",YD.USERDEFINED="USERDEFINED",YD.NOTDEFINED="NOTDEFINED";var qD=class{constructor(t){this.value=t}};qD.DISCONTINUOUS="DISCONTINUOUS",qD.CONTINUOUS="CONTINUOUS",qD.CONTSAMEGRADIENT="CONTSAMEGRADIENT",qD.CONTSAMEGRADIENTSAMECURVATURE="CONTSAMEGRADIENTSAMECURVATURE";var XD=class{constructor(t){this.value=t}};XD.BIQUADRATICPARABOLA="BIQUADRATICPARABOLA",XD.BLOSSCURVE="BLOSSCURVE",XD.CLOTHOIDCURVE="CLOTHOIDCURVE",XD.COSINECURVE="COSINECURVE",XD.CUBICPARABOLA="CUBICPARABOLA",XD.SINECURVE="SINECURVE";var ZD=class{constructor(t){this.value=t}};ZD.ELEVATOR="ELEVATOR",ZD.ESCALATOR="ESCALATOR",ZD.MOVINGWALKWAY="MOVINGWALKWAY",ZD.CRANEWAY="CRANEWAY",ZD.LIFTINGGEAR="LIFTINGGEAR",ZD.USERDEFINED="USERDEFINED",ZD.NOTDEFINED="NOTDEFINED";var KD=class{constructor(t){this.value=t}};KD.CARTESIAN="CARTESIAN",KD.PARAMETER="PARAMETER",KD.UNSPECIFIED="UNSPECIFIED";var QD=class{constructor(t){this.value=t}};QD.FINNED="FINNED",QD.USERDEFINED="USERDEFINED",QD.NOTDEFINED="NOTDEFINED";var JD=class{constructor(t){this.value=t}};JD.ABSORBEDDOSEUNIT="ABSORBEDDOSEUNIT",JD.AMOUNTOFSUBSTANCEUNIT="AMOUNTOFSUBSTANCEUNIT",JD.AREAUNIT="AREAUNIT",JD.DOSEEQUIVALENTUNIT="DOSEEQUIVALENTUNIT",JD.ELECTRICCAPACITANCEUNIT="ELECTRICCAPACITANCEUNIT",JD.ELECTRICCHARGEUNIT="ELECTRICCHARGEUNIT",JD.ELECTRICCONDUCTANCEUNIT="ELECTRICCONDUCTANCEUNIT",JD.ELECTRICCURRENTUNIT="ELECTRICCURRENTUNIT",JD.ELECTRICRESISTANCEUNIT="ELECTRICRESISTANCEUNIT",JD.ELECTRICVOLTAGEUNIT="ELECTRICVOLTAGEUNIT",JD.ENERGYUNIT="ENERGYUNIT",JD.FORCEUNIT="FORCEUNIT",JD.FREQUENCYUNIT="FREQUENCYUNIT",JD.ILLUMINANCEUNIT="ILLUMINANCEUNIT",JD.INDUCTANCEUNIT="INDUCTANCEUNIT",JD.LENGTHUNIT="LENGTHUNIT",JD.LUMINOUSFLUXUNIT="LUMINOUSFLUXUNIT",JD.LUMINOUSINTENSITYUNIT="LUMINOUSINTENSITYUNIT",JD.MAGNETICFLUXDENSITYUNIT="MAGNETICFLUXDENSITYUNIT",JD.MAGNETICFLUXUNIT="MAGNETICFLUXUNIT",JD.MASSUNIT="MASSUNIT",JD.PLANEANGLEUNIT="PLANEANGLEUNIT",JD.POWERUNIT="POWERUNIT",JD.PRESSUREUNIT="PRESSUREUNIT",JD.RADIOACTIVITYUNIT="RADIOACTIVITYUNIT",JD.SOLIDANGLEUNIT="SOLIDANGLEUNIT",JD.THERMODYNAMICTEMPERATUREUNIT="THERMODYNAMICTEMPERATUREUNIT",JD.TIMEUNIT="TIMEUNIT",JD.VOLUMEUNIT="VOLUMEUNIT",JD.USERDEFINED="USERDEFINED";var $D=class{constructor(t){this.value=t}};$D.ALARMPANEL="ALARMPANEL",$D.CONTROLPANEL="CONTROLPANEL",$D.GASDETECTIONPANEL="GASDETECTIONPANEL",$D.INDICATORPANEL="INDICATORPANEL",$D.MIMICPANEL="MIMICPANEL",$D.HUMIDISTAT="HUMIDISTAT",$D.THERMOSTAT="THERMOSTAT",$D.WEATHERSTATION="WEATHERSTATION",$D.USERDEFINED="USERDEFINED",$D.NOTDEFINED="NOTDEFINED";var tO=class{constructor(t){this.value=t}};tO.AIRHANDLER="AIRHANDLER",tO.AIRCONDITIONINGUNIT="AIRCONDITIONINGUNIT",tO.DEHUMIDIFIER="DEHUMIDIFIER",tO.SPLITSYSTEM="SPLITSYSTEM",tO.ROOFTOPUNIT="ROOFTOPUNIT",tO.USERDEFINED="USERDEFINED",tO.NOTDEFINED="NOTDEFINED";var eO=class{constructor(t){this.value=t}};eO.AIRRELEASE="AIRRELEASE",eO.ANTIVACUUM="ANTIVACUUM",eO.CHANGEOVER="CHANGEOVER",eO.CHECK="CHECK",eO.COMMISSIONING="COMMISSIONING",eO.DIVERTING="DIVERTING",eO.DRAWOFFCOCK="DRAWOFFCOCK",eO.DOUBLECHECK="DOUBLECHECK",eO.DOUBLEREGULATING="DOUBLEREGULATING",eO.FAUCET="FAUCET",eO.FLUSHING="FLUSHING",eO.GASCOCK="GASCOCK",eO.GASTAP="GASTAP",eO.ISOLATING="ISOLATING",eO.MIXING="MIXING",eO.PRESSUREREDUCING="PRESSUREREDUCING",eO.PRESSURERELIEF="PRESSURERELIEF",eO.REGULATING="REGULATING",eO.SAFETYCUTOFF="SAFETYCUTOFF",eO.STEAMTRAP="STEAMTRAP",eO.STOPCOCK="STOPCOCK",eO.USERDEFINED="USERDEFINED",eO.NOTDEFINED="NOTDEFINED";var nO=class{constructor(t){this.value=t}};nO.BENDING_YIELD="BENDING_YIELD",nO.SHEAR_YIELD="SHEAR_YIELD",nO.AXIAL_YIELD="AXIAL_YIELD",nO.FRICTION="FRICTION",nO.VISCOUS="VISCOUS",nO.RUBBER="RUBBER",nO.USERDEFINED="USERDEFINED",nO.NOTDEFINED="NOTDEFINED";var iO=class{constructor(t){this.value=t}};iO.COMPRESSION="COMPRESSION",iO.SPRING="SPRING",iO.BASE="BASE",iO.USERDEFINED="USERDEFINED",iO.NOTDEFINED="NOTDEFINED";var rO=class{constructor(t){this.value=t}};rO.CUTOUT="CUTOUT",rO.NOTCH="NOTCH",rO.HOLE="HOLE",rO.MITER="MITER",rO.CHAMFER="CHAMFER",rO.EDGE="EDGE",rO.USERDEFINED="USERDEFINED",rO.NOTDEFINED="NOTDEFINED";var sO=class{constructor(t){this.value=t}};sO.MOVABLE="MOVABLE",sO.PARAPET="PARAPET",sO.PARTITIONING="PARTITIONING",sO.PLUMBINGWALL="PLUMBINGWALL",sO.SHEAR="SHEAR",sO.SOLIDWALL="SOLIDWALL",sO.STANDARD="STANDARD",sO.POLYGONAL="POLYGONAL",sO.ELEMENTEDWALL="ELEMENTEDWALL",sO.RETAININGWALL="RETAININGWALL",sO.USERDEFINED="USERDEFINED",sO.NOTDEFINED="NOTDEFINED";var oO=class{constructor(t){this.value=t}};oO.FLOORTRAP="FLOORTRAP",oO.FLOORWASTE="FLOORWASTE",oO.GULLYSUMP="GULLYSUMP",oO.GULLYTRAP="GULLYTRAP",oO.ROOFDRAIN="ROOFDRAIN",oO.WASTEDISPOSALUNIT="WASTEDISPOSALUNIT",oO.WASTETRAP="WASTETRAP",oO.USERDEFINED="USERDEFINED",oO.NOTDEFINED="NOTDEFINED";var aO=class{constructor(t){this.value=t}};aO.SIDEHUNGRIGHTHAND="SIDEHUNGRIGHTHAND",aO.SIDEHUNGLEFTHAND="SIDEHUNGLEFTHAND",aO.TILTANDTURNRIGHTHAND="TILTANDTURNRIGHTHAND",aO.TILTANDTURNLEFTHAND="TILTANDTURNLEFTHAND",aO.TOPHUNG="TOPHUNG",aO.BOTTOMHUNG="BOTTOMHUNG",aO.PIVOTHORIZONTAL="PIVOTHORIZONTAL",aO.PIVOTVERTICAL="PIVOTVERTICAL",aO.SLIDINGHORIZONTAL="SLIDINGHORIZONTAL",aO.SLIDINGVERTICAL="SLIDINGVERTICAL",aO.REMOVABLECASEMENT="REMOVABLECASEMENT",aO.FIXEDCASEMENT="FIXEDCASEMENT",aO.OTHEROPERATION="OTHEROPERATION",aO.NOTDEFINED="NOTDEFINED";var lO=class{constructor(t){this.value=t}};lO.LEFT="LEFT",lO.MIDDLE="MIDDLE",lO.RIGHT="RIGHT",lO.BOTTOM="BOTTOM",lO.TOP="TOP",lO.NOTDEFINED="NOTDEFINED";var hO=class{constructor(t){this.value=t}};hO.ALUMINIUM="ALUMINIUM",hO.HIGH_GRADE_STEEL="HIGH_GRADE_STEEL",hO.STEEL="STEEL",hO.WOOD="WOOD",hO.ALUMINIUM_WOOD="ALUMINIUM_WOOD",hO.PLASTIC="PLASTIC",hO.OTHER_CONSTRUCTION="OTHER_CONSTRUCTION",hO.NOTDEFINED="NOTDEFINED";var cO=class{constructor(t){this.value=t}};cO.SINGLE_PANEL="SINGLE_PANEL",cO.DOUBLE_PANEL_VERTICAL="DOUBLE_PANEL_VERTICAL",cO.DOUBLE_PANEL_HORIZONTAL="DOUBLE_PANEL_HORIZONTAL",cO.TRIPLE_PANEL_VERTICAL="TRIPLE_PANEL_VERTICAL",cO.TRIPLE_PANEL_BOTTOM="TRIPLE_PANEL_BOTTOM",cO.TRIPLE_PANEL_TOP="TRIPLE_PANEL_TOP",cO.TRIPLE_PANEL_LEFT="TRIPLE_PANEL_LEFT",cO.TRIPLE_PANEL_RIGHT="TRIPLE_PANEL_RIGHT",cO.TRIPLE_PANEL_HORIZONTAL="TRIPLE_PANEL_HORIZONTAL",cO.USERDEFINED="USERDEFINED",cO.NOTDEFINED="NOTDEFINED";var uO=class{constructor(t){this.value=t}};uO.WINDOW="WINDOW",uO.SKYLIGHT="SKYLIGHT",uO.LIGHTDOME="LIGHTDOME",uO.USERDEFINED="USERDEFINED",uO.NOTDEFINED="NOTDEFINED";var pO=class{constructor(t){this.value=t}};pO.SINGLE_PANEL="SINGLE_PANEL",pO.DOUBLE_PANEL_VERTICAL="DOUBLE_PANEL_VERTICAL",pO.DOUBLE_PANEL_HORIZONTAL="DOUBLE_PANEL_HORIZONTAL",pO.TRIPLE_PANEL_VERTICAL="TRIPLE_PANEL_VERTICAL",pO.TRIPLE_PANEL_BOTTOM="TRIPLE_PANEL_BOTTOM",pO.TRIPLE_PANEL_TOP="TRIPLE_PANEL_TOP",pO.TRIPLE_PANEL_LEFT="TRIPLE_PANEL_LEFT",pO.TRIPLE_PANEL_RIGHT="TRIPLE_PANEL_RIGHT",pO.TRIPLE_PANEL_HORIZONTAL="TRIPLE_PANEL_HORIZONTAL",pO.USERDEFINED="USERDEFINED",pO.NOTDEFINED="NOTDEFINED";var dO=class{constructor(t){this.value=t}};dO.FIRSTSHIFT="FIRSTSHIFT",dO.SECONDSHIFT="SECONDSHIFT",dO.THIRDSHIFT="THIRDSHIFT",dO.USERDEFINED="USERDEFINED",dO.NOTDEFINED="NOTDEFINED";var fO=class{constructor(t){this.value=t}};fO.ACTUAL="ACTUAL",fO.BASELINE="BASELINE",fO.PLANNED="PLANNED",fO.USERDEFINED="USERDEFINED",fO.NOTDEFINED="NOTDEFINED";var mO=class{constructor(t){this.value=t}};mO.ACTUAL="ACTUAL",mO.BASELINE="BASELINE",mO.PLANNED="PLANNED",mO.USERDEFINED="USERDEFINED",mO.NOTDEFINED="NOTDEFINED";var gO,yO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.LongDescription=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new yO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},_O=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.TheActor=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new _O(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheActor),t}},vO=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Role=n,this.UserDefinedRole=i,this.Description=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new vO(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Role),t.push(this.UserDefinedRole),t.push(this.Description),t}},TO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},EO=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new EO(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},xO=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Purpose=n,this.Description=i,this.UserDefinedPurpose=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new xO(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t}},IO=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Outer=n}static FromTape(t,e,n){let i=0,r=n[i++];return new IO(t,e,r)}ToTape(){let t=[];return t.push(this.Outer),t}},bO=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Outer=n,this.Voids=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new bO(t,e,r,s)}ToTape(){let t=[];return t.push(this.Outer),t.push(this.Voids),t}},wO=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Bounds=n,this.FaceSurface=i,this.SameSense=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new wO(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Bounds),t.push(this.FaceSurface),t.push(this.SameSense),t}},SO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new SO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},AO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new AO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},CO=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new CO(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},RO=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new RO(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},DO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new DO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},OO=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OO(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},NO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new NO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},MO=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new MO(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},PO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Axis=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new PO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Axis),t.push(this.PredefinedType),t}},FO=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.StartDistAlong=n,this.Segments=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new FO(t,e,r,s)}ToTape(){let t=[];return t.push(this.StartDistAlong),t.push(this.Segments),t}},LO=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.CurveGeometry=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new LO(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.CurveGeometry),t}},kO=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new kO(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t}},UO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l,this.Radius=h,this.IsConvex=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new UO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t.push(this.Radius),t.push(this.IsConvex),t}},BO=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new BO(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t}},zO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l,this.ParabolaConstant=h,this.IsConvex=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t.push(this.ParabolaConstant),t.push(this.IsConvex),t}},GO=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Segments=n}static FromTape(t,e,n){let i=0,r=n[i++];return new GO(t,e,r)}ToTape(){let t=[];return t.push(this.Segments),t}},HO=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new HO(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t}},VO=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Horizontal=n,this.Vertical=i,this.Tag=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new VO(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Horizontal),t.push(this.Vertical),t.push(this.Tag),t}},jO=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new jO(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},WO=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.OuterBoundary=n,this.InnerBoundaries=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new WO(t,e,r,s)}ToTape(){let t=[];return t.push(this.OuterBoundary),t.push(this.InnerBoundaries),t}},YO=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ApplicationDeveloper=n,this.Version=i,this.ApplicationFullName=r,this.ApplicationIdentifier=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new YO(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ApplicationDeveloper),t.push(this.Version),t.push(this.ApplicationFullName),t.push(this.ApplicationIdentifier),t}},qO=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AppliedValue=r,this.UnitBasis=s,this.ApplicableDate=o,this.FixedUntilDate=a,this.Category=l,this.Condition=h,this.ArithmeticOperator=c,this.Components=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new qO(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AppliedValue),t.push(this.UnitBasis),t.push(this.ApplicableDate),t.push(this.FixedUntilDate),t.push(this.Category),t.push(this.Condition),t.push(this.ArithmeticOperator),t.push(this.Components),t}},XO=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Identifier=n,this.Name=i,this.Description=r,this.TimeOfApproval=s,this.Status=o,this.Level=a,this.Qualifier=l,this.RequestingApproval=h,this.GivingApproval=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new XO(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Identifier),t.push(this.Name),t.push(this.Description),t.push(this.TimeOfApproval),t.push(this.Status),t.push(this.Level),t.push(this.Qualifier),t.push(this.RequestingApproval),t.push(this.GivingApproval),t}},ZO=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingApproval=r,this.RelatedApprovals=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new ZO(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingApproval),t.push(this.RelatedApprovals),t}},KO=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.OuterCurve=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new KO(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.OuterCurve),t}},QO=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Curve=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new QO(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Curve),t}},JO=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.OuterCurve=r,this.InnerCurves=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new JO(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.OuterCurve),t.push(this.InnerCurves),t}},$O=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.OriginalValue=l,this.CurrentValue=h,this.TotalReplacementCost=c,this.Owner=u,this.User=p,this.ResponsiblePerson=d,this.IncorporationDate=f,this.DepreciatedValue=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new $O(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.OriginalValue),t.push(this.CurrentValue),t.push(this.TotalReplacementCost),t.push(this.Owner),t.push(this.User),t.push(this.ResponsiblePerson),t.push(this.IncorporationDate),t.push(this.DepreciatedValue),t}},tN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.BottomFlangeWidth=s,this.OverallDepth=o,this.WebThickness=a,this.BottomFlangeThickness=l,this.BottomFlangeFilletRadius=h,this.TopFlangeWidth=c,this.TopFlangeThickness=u,this.TopFlangeFilletRadius=p,this.BottomFlangeEdgeRadius=d,this.BottomFlangeSlope=f,this.TopFlangeEdgeRadius=m,this.TopFlangeSlope=g}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++];return new tN(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.BottomFlangeWidth),t.push(this.OverallDepth),t.push(this.WebThickness),t.push(this.BottomFlangeThickness),t.push(this.BottomFlangeFilletRadius),t.push(this.TopFlangeWidth),t.push(this.TopFlangeThickness),t.push(this.TopFlangeFilletRadius),t.push(this.BottomFlangeEdgeRadius),t.push(this.BottomFlangeSlope),t.push(this.TopFlangeEdgeRadius),t.push(this.TopFlangeSlope),t}},eN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new eN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},nN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new nN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},iN=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Location=n,this.Axis=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new iN(t,e,r,s)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Axis),t}},rN=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Location=n,this.RefDirection=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new rN(t,e,r,s)}ToTape(){let t=[];return t.push(this.Location),t.push(this.RefDirection),t}},sN=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Axis=i,this.RefDirection=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new sN(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Axis),t.push(this.RefDirection),t}},oN=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Degree=n,this.ControlPointsList=i,this.CurveForm=r,this.ClosedCurve=s,this.SelfIntersect=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new oN(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t}},aN=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Degree=n,this.ControlPointsList=i,this.CurveForm=r,this.ClosedCurve=s,this.SelfIntersect=o,this.KnotMultiplicities=a,this.Knots=l,this.KnotSpec=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new aN(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t.push(this.KnotMultiplicities),t.push(this.Knots),t.push(this.KnotSpec),t}},lN=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.UDegree=n,this.VDegree=i,this.ControlPointsList=r,this.SurfaceForm=s,this.UClosed=o,this.VClosed=a,this.SelfIntersect=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new lN(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t}},hN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.UDegree=n,this.VDegree=i,this.ControlPointsList=r,this.SurfaceForm=s,this.UClosed=o,this.VClosed=a,this.SelfIntersect=l,this.UMultiplicities=h,this.VMultiplicities=c,this.UKnots=u,this.VKnots=p,this.KnotSpec=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new hN(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t.push(this.UMultiplicities),t.push(this.VMultiplicities),t.push(this.UKnots),t.push(this.VKnots),t.push(this.KnotSpec),t}},cN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},uN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new uN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},pN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new pN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},dN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new fN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mN=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o,this.RasterFormat=a,this.RasterCode=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new mN(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.RasterFormat),t.push(this.RasterCode),t}},gN=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Position=n,this.XLength=i,this.YLength=r,this.ZLength=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new gN(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Position),t.push(this.XLength),t.push(this.YLength),t.push(this.ZLength),t}},yN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new yN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},_N=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new _N(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},vN=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Operator=n,this.FirstOperand=i,this.SecondOperand=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new vN(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Operator),t.push(this.FirstOperand),t.push(this.SecondOperand),t}},TN=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Operator=n,this.FirstOperand=i,this.SecondOperand=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new TN(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Operator),t.push(this.FirstOperand),t.push(this.SecondOperand),t}},EN=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new EN(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},xN=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new xN(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},IN=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessByLengthX=i,this.TranslationalStiffnessByLengthY=r,this.TranslationalStiffnessByLengthZ=s,this.RotationalStiffnessByLengthX=o,this.RotationalStiffnessByLengthY=a,this.RotationalStiffnessByLengthZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new IN(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessByLengthX),t.push(this.TranslationalStiffnessByLengthY),t.push(this.TranslationalStiffnessByLengthZ),t.push(this.RotationalStiffnessByLengthX),t.push(this.RotationalStiffnessByLengthY),t.push(this.RotationalStiffnessByLengthZ),t}},bN=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessByAreaX=i,this.TranslationalStiffnessByAreaY=r,this.TranslationalStiffnessByAreaZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new bN(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessByAreaX),t.push(this.TranslationalStiffnessByAreaY),t.push(this.TranslationalStiffnessByAreaZ),t}},wN=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessX=i,this.TranslationalStiffnessY=r,this.TranslationalStiffnessZ=s,this.RotationalStiffnessX=o,this.RotationalStiffnessY=a,this.RotationalStiffnessZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new wN(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessX),t.push(this.TranslationalStiffnessY),t.push(this.TranslationalStiffnessZ),t.push(this.RotationalStiffnessX),t.push(this.RotationalStiffnessY),t.push(this.RotationalStiffnessZ),t}},SN=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessX=i,this.TranslationalStiffnessY=r,this.TranslationalStiffnessZ=s,this.RotationalStiffnessX=o,this.RotationalStiffnessY=a,this.RotationalStiffnessZ=l,this.WarpingStiffness=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new SN(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessX),t.push(this.TranslationalStiffnessY),t.push(this.TranslationalStiffnessZ),t.push(this.RotationalStiffnessX),t.push(this.RotationalStiffnessY),t.push(this.RotationalStiffnessZ),t.push(this.WarpingStiffness),t}},AN=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new AN(t,e)}ToTape(){return[]}},CN=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new CN(t,e)}ToTape(){return[]}},RN=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Corner=n,this.XDim=i,this.YDim=r,this.ZDim=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new RN(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Corner),t.push(this.XDim),t.push(this.YDim),t.push(this.ZDim),t}},DN=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BaseSurface=n,this.AgreementFlag=i,this.Enclosure=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new DN(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t.push(this.Enclosure),t}},ON=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new ON(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t}},NN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new NN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t}},MN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.ElevationOfRefHeight=u,this.ElevationOfTerrain=p,this.BuildingAddress=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new MN(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.ElevationOfRefHeight),t.push(this.ElevationOfTerrain),t.push(this.BuildingAddress),t}},PN=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new PN(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},FN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new FN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},LN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new LN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},kN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new kN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},UN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new UN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},BN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new BN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},zN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.Elevation=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new zN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.Elevation),t}},GN=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.LongName=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new GN(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.LongName),t}},HN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new HN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},VN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jN=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.Width=o,this.WallThickness=a,this.Girth=l,this.InternalFilletRadius=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new jN(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.Width),t.push(this.WallThickness),t.push(this.Girth),t.push(this.InternalFilletRadius),t}},WN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new WN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},XN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new XN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ZN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ZN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},KN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new KN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},QN=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new QN(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},JN=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new JN(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},$N=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new $N(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},tM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new tM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},eM=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Coordinates=n}static FromTape(t,e,n){let i=0,r=n[i++];return new eM(t,e,r)}ToTape(){let t=[];return t.push(this.Coordinates),t}},nM=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new nM(t,e)}ToTape(){return[]}},iM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CoordList=n,this.TagList=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new iM(t,e,r,s)}ToTape(){let t=[];return t.push(this.CoordList),t.push(this.TagList),t}},rM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CoordList=n,this.TagList=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new rM(t,e,r,s)}ToTape(){let t=[];return t.push(this.CoordList),t.push(this.TagList),t}},sM=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new sM(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t}},oM=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new oM(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t}},aM=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s,this.Scale2=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new aM(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Scale2),t}},lM=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s,this.Axis3=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new lM(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Axis3),t}},hM=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s,this.Axis3=o,this.Scale2=a,this.Scale3=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new hM(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Axis3),t.push(this.Scale2),t.push(this.Scale3),t}},cM=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Curve=r,this.Thickness=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new cM(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Curve),t.push(this.Thickness),t}},uM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new uM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},pM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new pM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},dM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new fM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new mM(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},gM=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Radius=s,this.WallThickness=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new gM(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Radius),t.push(this.WallThickness),t}},yM=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Radius=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new yM(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Radius),t}},_M=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r,this.Radius=s,this.IsCCW=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new _M(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t.push(this.Radius),t.push(this.IsCCW),t}},vM=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new vM(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},TM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},EM=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Source=n,this.Edition=i,this.EditionDate=r,this.Name=s,this.Description=o,this.Location=a,this.ReferenceTokens=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new EM(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Source),t.push(this.Edition),t.push(this.EditionDate),t.push(this.Name),t.push(this.Description),t.push(this.Location),t.push(this.ReferenceTokens),t}},xM=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r,this.ReferencedSource=s,this.Description=o,this.Sort=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new xM(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.ReferencedSource),t.push(this.Description),t.push(this.Sort),t}},IM=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CfsFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new IM(t,e,r)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},bM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new bM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},wM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new wM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},SM=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Red=i,this.Green=r,this.Blue=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new SM(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Red),t.push(this.Green),t.push(this.Blue),t}},AM=class{constructor(t,e,n){this.expressID=t,this.type=e,this.ColourList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new AM(t,e,r)}ToTape(){let t=[];return t.push(this.ColourList),t}},CM=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new CM(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},RM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new RM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},DM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new DM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},OM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},NM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new NM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},MM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new MM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},PM=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.UsageName=r,this.HasProperties=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new PM(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.HasProperties),t}},FM=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.UsageName=o,this.TemplateType=a,this.HasPropertyTemplates=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new FM(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.TemplateType),t.push(this.HasPropertyTemplates),t}},LM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new LM(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},kM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new kM(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},UM=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Transition=n,this.SameSense=i,this.ParentCurve=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new UM(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Transition),t.push(this.SameSense),t.push(this.ParentCurve),t}},BM=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Profiles=r,this.Label=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new BM(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Profiles),t.push(this.Label),t}},zM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},GM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new GM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},HM=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new HM(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},VM=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VM(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jM=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new jM(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},WM=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CfsFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new WM(t,e,r)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},YM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CurveOnRelatingElement=n,this.CurveOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new YM(t,e,r,s)}ToTape(){let t=[];return t.push(this.CurveOnRelatingElement),t.push(this.CurveOnRelatedElement),t}},qM=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new qM(t,e)}ToTape(){return[]}},XM=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.PointOnRelatingElement=n,this.PointOnRelatedElement=i,this.EccentricityInX=r,this.EccentricityInY=s,this.EccentricityInZ=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new XM(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.PointOnRelatingElement),t.push(this.PointOnRelatedElement),t.push(this.EccentricityInX),t.push(this.EccentricityInY),t.push(this.EccentricityInZ),t}},ZM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.PointOnRelatingElement=n,this.PointOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new ZM(t,e,r,s)}ToTape(){let t=[];return t.push(this.PointOnRelatingElement),t.push(this.PointOnRelatedElement),t}},KM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SurfaceOnRelatingElement=n,this.SurfaceOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new KM(t,e,r,s)}ToTape(){let t=[];return t.push(this.SurfaceOnRelatingElement),t.push(this.SurfaceOnRelatedElement),t}},QM=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.VolumeOnRelatingElement=n,this.VolumeOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new QM(t,e,r,s)}ToTape(){let t=[];return t.push(this.VolumeOnRelatingElement),t.push(this.VolumeOnRelatedElement),t}},JM=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ConstraintGrade=r,this.ConstraintSource=s,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new JM(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t}},$M=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new $M(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},tP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new tP(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},eP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new eP(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},nP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new nP(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},iP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new iP(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},rP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new rP(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},sP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t}},oP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new oP(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t}},aP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.Phase=l,this.RepresentationContexts=h,this.UnitsInContext=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},lP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new lP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t}},hP=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new hP(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t}},cP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},uP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new uP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},pP=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Name=r,this.ConversionFactor=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new pP(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t.push(this.ConversionFactor),t}},dP=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Name=r,this.ConversionFactor=s,this.ConversionOffset=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new dP(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t.push(this.ConversionFactor),t.push(this.ConversionOffset),t}},fP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new fP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},mP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new mP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},gP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new gP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},yP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new yP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},_P=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SourceCRS=n,this.TargetCRS=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new _P(t,e,r,s)}ToTape(){let t=[];return t.push(this.SourceCRS),t.push(this.TargetCRS),t}},vP=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.GeodeticDatum=r,this.VerticalDatum=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new vP(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.GeodeticDatum),t.push(this.VerticalDatum),t}},TP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.CostValues=h,this.CostQuantities=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.CostValues),t.push(this.CostQuantities),t}},EP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.SubmittedOn=c,this.UpdateDate=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new EP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.SubmittedOn),t.push(this.UpdateDate),t}},xP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AppliedValue=r,this.UnitBasis=s,this.ApplicableDate=o,this.FixedUntilDate=a,this.Category=l,this.Condition=h,this.ArithmeticOperator=c,this.Components=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new xP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AppliedValue),t.push(this.UnitBasis),t.push(this.ApplicableDate),t.push(this.FixedUntilDate),t.push(this.Category),t.push(this.Condition),t.push(this.ArithmeticOperator),t.push(this.Components),t}},IP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new IP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new bP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},wP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new wP(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},SP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new SP(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},AP=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new AP(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},CP=class{constructor(t,e,n){this.expressID=t,this.type=e,this.TreeRootExpression=n}static FromTape(t,e,n){let i=0,r=n[i++];return new CP(t,e,r)}ToTape(){let t=[];return t.push(this.TreeRootExpression),t}},RP=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingMonetaryUnit=r,this.RelatedMonetaryUnit=s,this.ExchangeRate=o,this.RateDateTime=a,this.RateSource=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new RP(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingMonetaryUnit),t.push(this.RelatedMonetaryUnit),t.push(this.ExchangeRate),t.push(this.RateDateTime),t.push(this.RateSource),t}},DP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new DP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},OP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},NP=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new NP(t,e)}ToTape(){return[]}},MP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisSurface=n,this.OuterBoundary=i,this.InnerBoundaries=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new MP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.OuterBoundary),t.push(this.InnerBoundaries),t}},PP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisSurface=n,this.Boundaries=i,this.ImplicitOuter=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new PP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.Boundaries),t.push(this.ImplicitOuter),t}},FP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new FP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t}},LP=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.CurveFont=i,this.CurveWidth=r,this.CurveColour=s,this.ModelOrDraughting=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new LP(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.CurveFont),t.push(this.CurveWidth),t.push(this.CurveColour),t.push(this.ModelOrDraughting),t}},kP=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.PatternList=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new kP(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.PatternList),t}},UP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.CurveFont=i,this.CurveFontScaling=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new UP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.CurveFont),t.push(this.CurveFontScaling),t}},BP=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.VisibleSegmentLength=n,this.InvisibleSegmentLength=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new BP(t,e,r,s)}ToTape(){let t=[];return t.push(this.VisibleSegmentLength),t.push(this.InvisibleSegmentLength),t}},zP=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new zP(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},GP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new GP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},HP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new HP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},VP=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new VP(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},jP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new jP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},WP=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.ParentProfile=r,this.Operator=s,this.Label=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new WP(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.ParentProfile),t.push(this.Operator),t.push(this.Label),t}},YP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Elements=n,this.UnitType=i,this.UserDefinedType=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new YP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Elements),t.push(this.UnitType),t.push(this.UserDefinedType),t}},qP=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Unit=n,this.Exponent=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new qP(t,e,r,s)}ToTape(){let t=[];return t.push(this.Unit),t.push(this.Exponent),t}},XP=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.LengthExponent=n,this.MassExponent=i,this.TimeExponent=r,this.ElectricCurrentExponent=s,this.ThermodynamicTemperatureExponent=o,this.AmountOfSubstanceExponent=a,this.LuminousIntensityExponent=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new XP(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.LengthExponent),t.push(this.MassExponent),t.push(this.TimeExponent),t.push(this.ElectricCurrentExponent),t.push(this.ThermodynamicTemperatureExponent),t.push(this.AmountOfSubstanceExponent),t.push(this.LuminousIntensityExponent),t}},ZP=class{constructor(t,e,n){this.expressID=t,this.type=e,this.DirectionRatios=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ZP(t,e,r)}ToTape(){let t=[];return t.push(this.DirectionRatios),t}},KP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new KP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},QP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new QP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},JP=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.DistanceAlong=n,this.OffsetLateral=i,this.OffsetVertical=r,this.OffsetLongitudinal=s,this.AlongHorizontal=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new JP(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.DistanceAlong),t.push(this.OffsetLateral),t.push(this.OffsetVertical),t.push(this.OffsetLongitudinal),t.push(this.AlongHorizontal),t}},$P=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new $P(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},tF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new tF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},eF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.PredefinedType=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new eF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.PredefinedType),t}},nF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new nF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},iF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new iF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},rF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new rF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},sF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new sF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},oF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new oF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},aF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},lF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.FlowDirection=h,this.PredefinedType=c,this.SystemType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.FlowDirection),t.push(this.PredefinedType),t.push(this.SystemType),t}},hF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.PredefinedType=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new hF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.PredefinedType),t}},cF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_){this.expressID=t,this.type=e,this.Identification=n,this.Name=i,this.Description=r,this.Location=s,this.Purpose=o,this.IntendedUse=a,this.Scope=l,this.Revision=h,this.DocumentOwner=c,this.Editors=u,this.CreationTime=p,this.LastRevisionTime=d,this.ElectronicFormat=f,this.ValidFrom=m,this.ValidUntil=g,this.Confidentiality=y,this.Status=_}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++];return new cF(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Location),t.push(this.Purpose),t.push(this.IntendedUse),t.push(this.Scope),t.push(this.Revision),t.push(this.DocumentOwner),t.push(this.Editors),t.push(this.CreationTime),t.push(this.LastRevisionTime),t.push(this.ElectronicFormat),t.push(this.ValidFrom),t.push(this.ValidUntil),t.push(this.Confidentiality),t.push(this.Status),t}},uF=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingDocument=r,this.RelatedDocuments=s,this.RelationshipType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new uF(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingDocument),t.push(this.RelatedDocuments),t.push(this.RelationshipType),t}},pF=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r,this.Description=s,this.ReferencedDocument=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new pF(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.ReferencedDocument),t}},dF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.OperationType=d,this.UserDefinedOperationType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new dF(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.UserDefinedOperationType),t}},fF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.LiningDepth=o,this.LiningThickness=a,this.ThresholdDepth=l,this.ThresholdThickness=h,this.TransomThickness=c,this.TransomOffset=u,this.LiningOffset=p,this.ThresholdOffset=d,this.CasingThickness=f,this.CasingDepth=m,this.ShapeAspectStyle=g,this.LiningToPanelOffsetX=y,this.LiningToPanelOffsetY=_}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++];return new fF(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.LiningDepth),t.push(this.LiningThickness),t.push(this.ThresholdDepth),t.push(this.ThresholdThickness),t.push(this.TransomThickness),t.push(this.TransomOffset),t.push(this.LiningOffset),t.push(this.ThresholdOffset),t.push(this.CasingThickness),t.push(this.CasingDepth),t.push(this.ShapeAspectStyle),t.push(this.LiningToPanelOffsetX),t.push(this.LiningToPanelOffsetY),t}},mF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.PanelDepth=o,this.PanelOperation=a,this.PanelWidth=l,this.PanelPosition=h,this.ShapeAspectStyle=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new mF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.PanelDepth),t.push(this.PanelOperation),t.push(this.PanelWidth),t.push(this.PanelPosition),t.push(this.ShapeAspectStyle),t}},gF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.OperationType=d,this.UserDefinedOperationType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new gF(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.UserDefinedOperationType),t}},yF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.OperationType=c,this.ConstructionType=u,this.ParameterTakesPrecedence=p,this.Sizeable=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new yF(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.OperationType),t.push(this.ConstructionType),t.push(this.ParameterTakesPrecedence),t.push(this.Sizeable),t}},_F=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.OperationType=p,this.ParameterTakesPrecedence=d,this.UserDefinedOperationType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new _F(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.ParameterTakesPrecedence),t.push(this.UserDefinedOperationType),t}},vF=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new vF(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},TF=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new TF(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},EF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new EF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},xF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new xF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},IF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new IF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new bF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},wF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new wF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},SF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new SF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},AF=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new AF(t,e,r,s)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t}},CF=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i,this.EdgeGeometry=r,this.SameSense=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new CF(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.EdgeGeometry),t.push(this.SameSense),t}},RF=class{constructor(t,e,n){this.expressID=t,this.type=e,this.EdgeList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new RF(t,e,r)}ToTape(){let t=[];return t.push(this.EdgeList),t}},DF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new DF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},OF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},NF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new NF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},MF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new MF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},PF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new PF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},FF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new FF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},LF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},kF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new kF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},UF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new UF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},BF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new BF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},zF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},GF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new GF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},HF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new HF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},VF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.AssemblyPlace=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.AssemblyPlace),t.push(this.PredefinedType),t}},jF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new jF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},WF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new WF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},YF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new YF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},qF=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.MethodOfMeasurement=o,this.Quantities=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new qF(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.MethodOfMeasurement),t.push(this.Quantities),t}},XF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new XF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},ZF=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ZF(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},KF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.SemiAxis1=i,this.SemiAxis2=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new KF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.SemiAxis1),t.push(this.SemiAxis2),t}},QF=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.SemiAxis1=s,this.SemiAxis2=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new QF(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.SemiAxis1),t.push(this.SemiAxis2),t}},JF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new JF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},$F=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new $F(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},tL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},eL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new eL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new iL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.PredefinedType=h,this.EventTriggerType=c,this.UserDefinedEventTriggerType=u,this.EventOccurenceTime=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new oL(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.PredefinedType),t.push(this.EventTriggerType),t.push(this.UserDefinedEventTriggerType),t.push(this.EventOccurenceTime),t}},aL=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.ActualDate=s,this.EarlyDate=o,this.LateDate=a,this.ScheduleDate=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new aL(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.ActualDate),t.push(this.EarlyDate),t.push(this.LateDate),t.push(this.ScheduleDate),t}},lL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c,this.PredefinedType=u,this.EventTriggerType=p,this.UserDefinedEventTriggerType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new lL(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t.push(this.EventTriggerType),t.push(this.UserDefinedEventTriggerType),t}},hL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Properties=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new hL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t}},cL=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new cL(t,e)}ToTape(){return[]}},uL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new uL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},pL=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingReference=r,this.RelatedResourceObjects=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new pL(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingReference),t.push(this.RelatedResourceObjects),t}},dL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.PredefinedType),t}},fL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new fL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t}},mL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new mL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},gL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new gL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},yL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new yL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},_L=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.ExtrudedDirection=r,this.Depth=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new _L(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t}},vL=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.ExtrudedDirection=r,this.Depth=s,this.EndSweptArea=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new vL(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t.push(this.EndSweptArea),t}},TL=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Bounds=n}static FromTape(t,e,n){let i=0,r=n[i++];return new TL(t,e,r)}ToTape(){let t=[];return t.push(this.Bounds),t}},EL=class{constructor(t,e,n){this.expressID=t,this.type=e,this.FbsmFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new EL(t,e,r)}ToTape(){let t=[];return t.push(this.FbsmFaces),t}},xL=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Bound=n,this.Orientation=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new xL(t,e,r,s)}ToTape(){let t=[];return t.push(this.Bound),t.push(this.Orientation),t}},IL=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Bound=n,this.Orientation=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new IL(t,e,r,s)}ToTape(){let t=[];return t.push(this.Bound),t.push(this.Orientation),t}},bL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Bounds=n,this.FaceSurface=i,this.SameSense=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new bL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Bounds),t.push(this.FaceSurface),t.push(this.SameSense),t}},wL=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Outer=n}static FromTape(t,e,n){let i=0,r=n[i++];return new wL(t,e,r)}ToTape(){let t=[];return t.push(this.Outer),t}},SL=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Outer=n,this.Voids=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new SL(t,e,r,s)}ToTape(){let t=[];return t.push(this.Outer),t.push(this.Voids),t}},AL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new AL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},CL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new CL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},RL=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.TensionFailureX=i,this.TensionFailureY=r,this.TensionFailureZ=s,this.CompressionFailureX=o,this.CompressionFailureY=a,this.CompressionFailureZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new RL(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TensionFailureX),t.push(this.TensionFailureY),t.push(this.TensionFailureZ),t.push(this.CompressionFailureX),t.push(this.CompressionFailureY),t.push(this.CompressionFailureZ),t}},DL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new DL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},OL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},NL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new NL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},ML=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new ML(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},PL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new PL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},FL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new FL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},LL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new LL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},kL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.FillStyles=i,this.ModelorDraughting=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new kL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.FillStyles),t.push(this.ModelorDraughting),t}},UL=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.HatchLineAppearance=n,this.StartOfNextHatchLine=i,this.PointOfReferenceHatchLine=r,this.PatternStart=s,this.HatchLineAngle=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new UL(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.HatchLineAppearance),t.push(this.StartOfNextHatchLine),t.push(this.PointOfReferenceHatchLine),t.push(this.PatternStart),t.push(this.HatchLineAngle),t}},BL=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.TilingPattern=n,this.Tiles=i,this.TilingScale=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new BL(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.TilingPattern),t.push(this.Tiles),t.push(this.TilingScale),t}},zL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},GL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new GL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},HL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new HL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},VL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jL=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Directrix=r,this.StartParam=s,this.EndParam=o,this.FixedReference=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new jL(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Directrix),t.push(this.StartParam),t.push(this.EndParam),t.push(this.FixedReference),t}},WL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new WL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},YL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new YL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},qL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new qL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},XL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new XL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},ZL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ZL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},KL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new KL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},QL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new QL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},JL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new JL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},$L=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new $L(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},tk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},ek=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new ek(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},nk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},ik=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new ik(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},rk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},sk=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new sk(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},ok=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ok(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},ak=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new ak(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},lk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new lk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},hk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new hk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},ck=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new ck(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},uk=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new uk(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},pk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new pk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},dk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.AssemblyPlace=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new fk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.AssemblyPlace),t.push(this.PredefinedType),t}},mk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new mk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},gk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new gk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},yk=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Elements=n}static FromTape(t,e,n){let i=0,r=n[i++];return new yk(t,e,r)}ToTape(){let t=[];return t.push(this.Elements),t}},_k=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.ContextIdentifier=n,this.ContextType=i,this.CoordinateSpaceDimension=r,this.Precision=s,this.WorldCoordinateSystem=o,this.TrueNorth=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new _k(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t.push(this.CoordinateSpaceDimension),t.push(this.Precision),t.push(this.WorldCoordinateSystem),t.push(this.TrueNorth),t}},vk=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new vk(t,e)}ToTape(){return[]}},Tk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.ContextIdentifier=n,this.ContextType=i,this.CoordinateSpaceDimension=r,this.Precision=s,this.WorldCoordinateSystem=o,this.TrueNorth=a,this.ParentContext=l,this.TargetScale=h,this.TargetView=c,this.UserDefinedTargetView=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Tk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t.push(this.CoordinateSpaceDimension),t.push(this.Precision),t.push(this.WorldCoordinateSystem),t.push(this.TrueNorth),t.push(this.ParentContext),t.push(this.TargetScale),t.push(this.TargetView),t.push(this.UserDefinedTargetView),t}},Ek=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Elements=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Ek(t,e,r)}ToTape(){let t=[];return t.push(this.Elements),t}},xk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.UAxes=h,this.VAxes=c,this.WAxes=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new xk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.UAxes),t.push(this.VAxes),t.push(this.WAxes),t.push(this.PredefinedType),t}},Ik=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.AxisTag=n,this.AxisCurve=i,this.SameSense=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Ik(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.AxisTag),t.push(this.AxisCurve),t.push(this.SameSense),t}},bk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.PlacementRelTo=n,this.PlacementLocation=i,this.PlacementRefDirection=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new bk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.PlacementLocation),t.push(this.PlacementRefDirection),t}},wk=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new wk(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},Sk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.BaseSurface=n,this.AgreementFlag=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Sk(t,e,r,s)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t}},Ak=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Ak(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Ck=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Ck(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Rk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Rk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Dk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Dk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Ok=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.OverallWidth=s,this.OverallDepth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.FlangeEdgeRadius=c,this.FlangeSlope=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Ok(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.OverallWidth),t.push(this.OverallDepth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.FlangeEdgeRadius),t.push(this.FlangeSlope),t}},Nk=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o,this.URLReference=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Nk(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.URLReference),t}},Mk=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.MappedTo=n,this.Opacity=i,this.Colours=r,this.ColourIndex=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Mk(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.MappedTo),t.push(this.Opacity),t.push(this.Colours),t.push(this.ColourIndex),t}},Pk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Points=n,this.Segments=i,this.SelfIntersect=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Pk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Points),t.push(this.Segments),t.push(this.SelfIntersect),t}},Fk=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CoordIndex=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Fk(t,e,r)}ToTape(){let t=[];return t.push(this.CoordIndex),t}},Lk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CoordIndex=n,this.InnerCoordIndices=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Lk(t,e,r,s)}ToTape(){let t=[];return t.push(this.CoordIndex),t.push(this.InnerCoordIndices),t}},kk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Maps=n,this.MappedTo=i,this.TexCoords=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new kk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.MappedTo),t.push(this.TexCoords),t}},Uk=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Maps=n,this.MappedTo=i,this.TexCoords=r,this.TexCoordIndex=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Uk(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.MappedTo),t.push(this.TexCoords),t.push(this.TexCoordIndex),t}},Bk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Bk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},zk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new zk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Gk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Curve3D=n,this.AssociatedGeometry=i,this.MasterRepresentation=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Gk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},Hk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.Jurisdiction=l,this.ResponsiblePersons=h,this.LastUpdateDate=c,this.CurrentValue=u,this.OriginalValue=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new Hk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.Jurisdiction),t.push(this.ResponsiblePersons),t.push(this.LastUpdateDate),t.push(this.CurrentValue),t.push(this.OriginalValue),t}},Vk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.StartTime=r,this.EndTime=s,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=l,this.Unit=h,this.Values=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Vk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t.push(this.Values),t}},jk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.TimeStamp=n,this.ListValues=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new jk(t,e,r,s)}ToTape(){let t=[];return t.push(this.TimeStamp),t.push(this.ListValues),t}},Wk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Wk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Yk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Yk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.Width=o,this.Thickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.LegSlope=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.Width),t.push(this.Thickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t.push(this.LegSlope),t}},Xk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new Xk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},Zk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new Zk(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},Kk=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.LagValue=s,this.DurationType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Kk(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.LagValue),t.push(this.DurationType),t}},Qk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Qk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Jk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Jk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},$k=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Version=i,this.Publisher=r,this.VersionDate=s,this.Location=o,this.Description=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new $k(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Version),t.push(this.Publisher),t.push(this.VersionDate),t.push(this.Location),t.push(this.Description),t}},tU=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r,this.Description=s,this.Language=o,this.ReferencedLibrary=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new tU(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Language),t.push(this.ReferencedLibrary),t}},eU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.MainPlaneAngle=n,this.SecondaryPlaneAngle=i,this.LuminousIntensity=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new eU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.MainPlaneAngle),t.push(this.SecondaryPlaneAngle),t.push(this.LuminousIntensity),t}},nU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new iU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.LightDistributionCurve=n,this.DistributionData=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new rU(t,e,r,s)}ToTape(){let t=[];return t.push(this.LightDistributionCurve),t.push(this.DistributionData),t}},sU=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new sU(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t}},oU=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new oU(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t}},aU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Orientation=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new aU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Orientation),t}},lU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Position=o,this.ColourAppearance=a,this.ColourTemperature=l,this.LuminousFlux=h,this.LightEmissionSource=c,this.LightDistributionDataSource=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.ColourAppearance),t.push(this.ColourTemperature),t.push(this.LuminousFlux),t.push(this.LightEmissionSource),t.push(this.LightDistributionDataSource),t}},hU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Position=o,this.Radius=a,this.ConstantAttenuation=l,this.DistanceAttenuation=h,this.QuadricAttenuation=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new hU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.Radius),t.push(this.ConstantAttenuation),t.push(this.DistanceAttenuation),t.push(this.QuadricAttenuation),t}},cU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Position=o,this.Radius=a,this.ConstantAttenuation=l,this.DistanceAttenuation=h,this.QuadricAttenuation=c,this.Orientation=u,this.ConcentrationExponent=p,this.SpreadAngle=d,this.BeamWidthAngle=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new cU(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.Radius),t.push(this.ConstantAttenuation),t.push(this.DistanceAttenuation),t.push(this.QuadricAttenuation),t.push(this.Orientation),t.push(this.ConcentrationExponent),t.push(this.SpreadAngle),t.push(this.BeamWidthAngle),t}},uU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Pnt=n,this.Dir=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new uU(t,e,r,s)}ToTape(){let t=[];return t.push(this.Pnt),t.push(this.Dir),t}},pU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new pU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t}},dU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.PlacementRelTo=n,this.PlacementMeasuredAlong=i,this.Distance=r,this.Orientation=s,this.CartesianPosition=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new dU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.PlacementMeasuredAlong),t.push(this.Distance),t.push(this.Orientation),t.push(this.CartesianPosition),t}},fU=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Axis=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new fU(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Axis),t}},mU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.PlacementRelTo=n,this.RelativePlacement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new mU(t,e,r,s)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.RelativePlacement),t}},gU=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new gU(t,e)}ToTape(){return[]}},yU=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Outer=n}static FromTape(t,e,n){let i=0,r=n[i++];return new yU(t,e,r)}ToTape(){let t=[];return t.push(this.Outer),t}},_U=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.SourceCRS=n,this.TargetCRS=i,this.Eastings=r,this.Northings=s,this.OrthogonalHeight=o,this.XAxisAbscissa=a,this.XAxisOrdinate=l,this.Scale=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new _U(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.SourceCRS),t.push(this.TargetCRS),t.push(this.Eastings),t.push(this.Northings),t.push(this.OrthogonalHeight),t.push(this.XAxisAbscissa),t.push(this.XAxisOrdinate),t.push(this.Scale),t}},vU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.MappingSource=n,this.MappingTarget=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new vU(t,e,r,s)}ToTape(){let t=[];return t.push(this.MappingSource),t.push(this.MappingTarget),t}},TU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Category=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new TU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Category),t}},EU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.MaterialClassifications=n,this.ClassifiedMaterial=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new EU(t,e,r,s)}ToTape(){let t=[];return t.push(this.MaterialClassifications),t.push(this.ClassifiedMaterial),t}},xU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Material=r,this.Fraction=s,this.Category=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new xU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Fraction),t.push(this.Category),t}},IU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.MaterialConstituents=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new IU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.MaterialConstituents),t}},bU=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new bU(t,e)}ToTape(){return[]}},wU=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Representations=r,this.RepresentedMaterial=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new wU(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t.push(this.RepresentedMaterial),t}},SU=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Material=n,this.LayerThickness=i,this.IsVentilated=r,this.Name=s,this.Description=o,this.Category=a,this.Priority=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new SU(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Material),t.push(this.LayerThickness),t.push(this.IsVentilated),t.push(this.Name),t.push(this.Description),t.push(this.Category),t.push(this.Priority),t}},AU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.MaterialLayers=n,this.LayerSetName=i,this.Description=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new AU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.MaterialLayers),t.push(this.LayerSetName),t.push(this.Description),t}},CU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ForLayerSet=n,this.LayerSetDirection=i,this.DirectionSense=r,this.OffsetFromReferenceLine=s,this.ReferenceExtent=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new CU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ForLayerSet),t.push(this.LayerSetDirection),t.push(this.DirectionSense),t.push(this.OffsetFromReferenceLine),t.push(this.ReferenceExtent),t}},RU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Material=n,this.LayerThickness=i,this.IsVentilated=r,this.Name=s,this.Description=o,this.Category=a,this.Priority=l,this.OffsetDirection=h,this.OffsetValues=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new RU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Material),t.push(this.LayerThickness),t.push(this.IsVentilated),t.push(this.Name),t.push(this.Description),t.push(this.Category),t.push(this.Priority),t.push(this.OffsetDirection),t.push(this.OffsetValues),t}},DU=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Materials=n}static FromTape(t,e,n){let i=0,r=n[i++];return new DU(t,e,r)}ToTape(){let t=[];return t.push(this.Materials),t}},OU=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Material=r,this.Profile=s,this.Priority=o,this.Category=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new OU(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Profile),t.push(this.Priority),t.push(this.Category),t}},NU=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.MaterialProfiles=r,this.CompositeProfile=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new NU(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.MaterialProfiles),t.push(this.CompositeProfile),t}},MU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ForProfileSet=n,this.CardinalPoint=i,this.ReferenceExtent=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new MU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ForProfileSet),t.push(this.CardinalPoint),t.push(this.ReferenceExtent),t}},PU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ForProfileSet=n,this.CardinalPoint=i,this.ReferenceExtent=r,this.ForProfileEndSet=s,this.CardinalEndPoint=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new PU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ForProfileSet),t.push(this.CardinalPoint),t.push(this.ReferenceExtent),t.push(this.ForProfileEndSet),t.push(this.CardinalEndPoint),t}},FU=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Material=r,this.Profile=s,this.Priority=o,this.Category=a,this.OffsetValues=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new FU(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Profile),t.push(this.Priority),t.push(this.Category),t.push(this.OffsetValues),t}},LU=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Properties=r,this.Material=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new LU(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t.push(this.Material),t}},kU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingMaterial=r,this.RelatedMaterials=s,this.Expression=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new kU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingMaterial),t.push(this.RelatedMaterials),t.push(this.Expression),t}},UU=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new UU(t,e)}ToTape(){return[]}},BU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.ValueComponent=n,this.UnitComponent=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new BU(t,e,r,s)}ToTape(){let t=[];return t.push(this.ValueComponent),t.push(this.UnitComponent),t}},zU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.NominalDiameter=c,this.NominalLength=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new zU(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.NominalDiameter),t.push(this.NominalLength),t.push(this.PredefinedType),t}},GU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.NominalDiameter=p,this.NominalLength=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new GU(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.NominalLength),t}},HU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new HU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},VU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new jU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},WU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new WU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ConstraintGrade=r,this.ConstraintSource=s,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=l,this.Benchmark=h,this.ValueSource=c,this.DataValue=u,this.ReferencePath=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new qU(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t.push(this.Benchmark),t.push(this.ValueSource),t.push(this.DataValue),t.push(this.ReferencePath),t}},XU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.ParentProfile=r,this.Operator=s,this.Label=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new XU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.ParentProfile),t.push(this.Operator),t.push(this.Label),t}},ZU=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Currency=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ZU(t,e,r)}ToTape(){let t=[];return t.push(this.Currency),t}},KU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new KU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},QU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new QU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},JU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new JU(t,e,r,s)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t}},$U=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new $U(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},tB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new tB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},eB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.PlacementRelTo=n}static FromTape(t,e,n){let i=0,r=n[i++];return new eB(t,e,r)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t}},nB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ConstraintGrade=r,this.ConstraintSource=s,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=l,this.BenchmarkValues=h,this.LogicalAggregator=c,this.ObjectiveQualifier=u,this.UserDefinedQualifier=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new nB(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t.push(this.BenchmarkValues),t.push(this.LogicalAggregator),t.push(this.ObjectiveQualifier),t.push(this.UserDefinedQualifier),t}},iB=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.TheActor=a,this.PredefinedType=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new iB(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheActor),t.push(this.PredefinedType),t}},rB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.BasisCurve=n}static FromTape(t,e,n){let i=0,r=n[i++];return new rB(t,e,r)}ToTape(){let t=[];return t.push(this.BasisCurve),t}},sB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisCurve=n,this.Distance=i,this.SelfIntersect=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new sB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Distance),t.push(this.SelfIntersect),t}},oB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.BasisCurve=n,this.Distance=i,this.SelfIntersect=r,this.RefDirection=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new oB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Distance),t.push(this.SelfIntersect),t.push(this.RefDirection),t}},aB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisCurve=n,this.OffsetValues=i,this.Tag=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new aB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.OffsetValues),t.push(this.Tag),t}},lB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CfsFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new lB(t,e,r)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},hB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new hB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},cB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},uB=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Identification=n,this.Name=i,this.Description=r,this.Roles=s,this.Addresses=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new uB(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Roles),t.push(this.Addresses),t}},pB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingOrganization=r,this.RelatedOrganizations=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new pB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingOrganization),t.push(this.RelatedOrganizations),t}},dB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.LateralAxisDirection=n,this.VerticalAxisDirection=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new dB(t,e,r,s)}ToTape(){let t=[];return t.push(this.LateralAxisDirection),t.push(this.VerticalAxisDirection),t}},fB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i,this.EdgeElement=r,this.Orientation=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new fB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.EdgeElement),t.push(this.Orientation),t}},mB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new mB(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},gB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new gB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},yB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new yB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},_B=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.OwningUser=n,this.OwningApplication=i,this.State=r,this.ChangeAction=s,this.LastModifiedDate=o,this.LastModifyingUser=a,this.LastModifyingApplication=l,this.CreationDate=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new _B(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.OwningUser),t.push(this.OwningApplication),t.push(this.State),t.push(this.ChangeAction),t.push(this.LastModifiedDate),t.push(this.LastModifyingUser),t.push(this.LastModifyingApplication),t.push(this.CreationDate),t}},vB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new vB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t}},TB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.EdgeList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new TB(t,e,r)}ToTape(){let t=[];return t.push(this.EdgeList),t}},EB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.BasisSurface=n,this.ReferenceCurve=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new EB(t,e,r,s)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.ReferenceCurve),t}},xB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LifeCyclePhase=l,this.PredefinedType=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new xB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LifeCyclePhase),t.push(this.PredefinedType),t}},IB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.OperationType=o,this.PanelPosition=a,this.FrameDepth=l,this.FrameThickness=h,this.ShapeAspectStyle=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new IB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.OperationType),t.push(this.PanelPosition),t.push(this.FrameDepth),t.push(this.FrameThickness),t.push(this.ShapeAspectStyle),t}},bB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.LongDescription=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new bB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},wB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Identification=n,this.FamilyName=i,this.GivenName=r,this.MiddleNames=s,this.PrefixTitles=o,this.SuffixTitles=a,this.Roles=l,this.Addresses=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new wB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.FamilyName),t.push(this.GivenName),t.push(this.MiddleNames),t.push(this.PrefixTitles),t.push(this.SuffixTitles),t.push(this.Roles),t.push(this.Addresses),t}},SB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ThePerson=n,this.TheOrganization=i,this.Roles=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new SB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ThePerson),t.push(this.TheOrganization),t.push(this.Roles),t}},AB=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.HasQuantities=r,this.Discrimination=s,this.Quality=o,this.Usage=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new AB(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.HasQuantities),t.push(this.Discrimination),t.push(this.Quality),t.push(this.Usage),t}},CB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new CB(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},RB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new RB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t}},DB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c,this.ConstructionType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new DB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t.push(this.ConstructionType),t}},OB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},NB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new NB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},MB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new MB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},PB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new PB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},FB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new FB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},LB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o,this.Width=a,this.Height=l,this.ColourComponents=h,this.Pixel=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.Width),t.push(this.Height),t.push(this.ColourComponents),t.push(this.Pixel),t}},kB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Location=n}static FromTape(t,e,n){let i=0,r=n[i++];return new kB(t,e,r)}ToTape(){let t=[];return t.push(this.Location),t}},UB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SizeInX=n,this.SizeInY=i,this.Placement=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new UB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SizeInX),t.push(this.SizeInY),t.push(this.Placement),t}},BB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SizeInX=n,this.SizeInY=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new BB(t,e,r,s)}ToTape(){let t=[];return t.push(this.SizeInX),t.push(this.SizeInY),t}},zB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new zB(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},GB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new GB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},HB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new HB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},VB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jB=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new jB(t,e)}ToTape(){return[]}},WB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.BasisCurve=n,this.PointParameter=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new WB(t,e,r,s)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.PointParameter),t}},YB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisSurface=n,this.PointParameterU=i,this.PointParameterV=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new YB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.PointParameterU),t.push(this.PointParameterV),t}},qB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Polygon=n}static FromTape(t,e,n){let i=0,r=n[i++];return new qB(t,e,r)}ToTape(){let t=[];return t.push(this.Polygon),t}},XB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.BaseSurface=n,this.AgreementFlag=i,this.Position=r,this.PolygonalBoundary=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new XB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t.push(this.Position),t.push(this.PolygonalBoundary),t}},ZB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Coordinates=n,this.Closed=i,this.Faces=r,this.PnIndex=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new ZB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Closed),t.push(this.Faces),t.push(this.PnIndex),t}},KB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Points=n}static FromTape(t,e,n){let i=0,r=n[i++];return new KB(t,e,r)}ToTape(){let t=[];return t.push(this.Points),t}},QB=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new QB(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},JB=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new JB(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},$B=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Purpose=n,this.Description=i,this.UserDefinedPurpose=r,this.InternalLocation=s,this.AddressLines=o,this.PostalBox=a,this.Town=l,this.Region=h,this.PostalCode=c,this.Country=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new $B(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t.push(this.InternalLocation),t.push(this.AddressLines),t.push(this.PostalBox),t.push(this.Town),t.push(this.Region),t.push(this.PostalCode),t.push(this.Country),t}},tz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new tz(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},ez=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ez(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},nz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new nz(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},iz=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new iz(t,e)}ToTape(){return[]}},rz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new rz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},sz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new sz(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},oz=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new oz(t,e)}ToTape(){return[]}},az=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AssignedItems=r,this.Identifier=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new az(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AssignedItems),t.push(this.Identifier),t}},lz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AssignedItems=r,this.Identifier=s,this.LayerOn=o,this.LayerFrozen=a,this.LayerBlocked=l,this.LayerStyles=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new lz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AssignedItems),t.push(this.Identifier),t.push(this.LayerOn),t.push(this.LayerFrozen),t.push(this.LayerBlocked),t.push(this.LayerStyles),t}},hz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new hz(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},cz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Styles=n}static FromTape(t,e,n){let i=0,r=n[i++];return new cz(t,e,r)}ToTape(){let t=[];return t.push(this.Styles),t}},uz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.PredefinedType=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new uz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.PredefinedType),t}},pz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new pz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t}},dz=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new dz(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t}},fz=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new fz(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},mz=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Representations=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new mz(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t}},gz=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Representations=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new gz(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t}},yz=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new yz(t,e,r,s)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t}},_z=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Properties=r,this.ProfileDefinition=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new _z(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t.push(this.ProfileDefinition),t}},vz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.Phase=l,this.RepresentationContexts=h,this.UnitsInContext=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new vz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},Tz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.Phase=l,this.RepresentationContexts=h,this.UnitsInContext=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Tz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},Ez=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.LongDescription=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Ez(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},xz=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.GeodeticDatum=r,this.VerticalDatum=s,this.MapProjection=o,this.MapZone=a,this.MapUnit=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new xz(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.GeodeticDatum),t.push(this.VerticalDatum),t.push(this.MapProjection),t.push(this.MapZone),t.push(this.MapUnit),t}},Iz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Iz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bz=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new bz(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},wz=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new wz(t,e)}ToTape(){return[]}},Sz=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.UpperBoundValue=r,this.LowerBoundValue=s,this.Unit=o,this.SetPointValue=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Sz(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UpperBoundValue),t.push(this.LowerBoundValue),t.push(this.Unit),t.push(this.SetPointValue),t}},Az=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Az(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},Cz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.DependingProperty=r,this.DependantProperty=s,this.Expression=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Cz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.DependingProperty),t.push(this.DependantProperty),t.push(this.Expression),t}},Rz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.EnumerationValues=r,this.EnumerationReference=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Rz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.EnumerationValues),t.push(this.EnumerationReference),t}},Dz=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.EnumerationValues=i,this.Unit=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Dz(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.EnumerationValues),t.push(this.Unit),t}},Oz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ListValues=r,this.Unit=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Oz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ListValues),t.push(this.Unit),t}},Nz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.UsageName=r,this.PropertyReference=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Nz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.PropertyReference),t}},Mz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.HasProperties=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Mz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.HasProperties),t}},Pz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Pz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},Fz=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.TemplateType=o,this.ApplicableEntity=a,this.HasPropertyTemplates=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Fz(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.TemplateType),t.push(this.ApplicableEntity),t.push(this.HasPropertyTemplates),t}},Lz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.NominalValue=r,this.Unit=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Lz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.NominalValue),t.push(this.Unit),t}},kz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.DefiningValues=r,this.DefinedValues=s,this.Expression=o,this.DefiningUnit=a,this.DefinedUnit=l,this.CurveInterpolation=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new kz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.DefiningValues),t.push(this.DefinedValues),t.push(this.Expression),t.push(this.DefiningUnit),t.push(this.DefinedUnit),t.push(this.CurveInterpolation),t}},Uz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Uz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},Bz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Bz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},zz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Gz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Gz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Hz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Hz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Vz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Vz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.ProxyType=h,this.Tag=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new jz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.ProxyType),t.push(this.Tag),t}},Wz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Wz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Yz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Yz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.AreaValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new qz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.AreaValue),t.push(this.Formula),t}},Xz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.CountValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Xz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.CountValue),t.push(this.Formula),t}},Zz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.LengthValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Zz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.LengthValue),t.push(this.Formula),t}},Kz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Kz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},Qz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.TimeValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Qz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.TimeValue),t.push(this.Formula),t}},Jz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.VolumeValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Jz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.VolumeValue),t.push(this.Formula),t}},$z=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.WeightValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new $z(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.WeightValue),t.push(this.Formula),t}},tG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},eG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new eG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new iG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new rG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},sG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Degree=n,this.ControlPointsList=i,this.CurveForm=r,this.ClosedCurve=s,this.SelfIntersect=o,this.KnotMultiplicities=a,this.Knots=l,this.KnotSpec=h,this.WeightsData=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new oG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t.push(this.KnotMultiplicities),t.push(this.Knots),t.push(this.KnotSpec),t.push(this.WeightsData),t}},aG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.UDegree=n,this.VDegree=i,this.ControlPointsList=r,this.SurfaceForm=s,this.UClosed=o,this.VClosed=a,this.SelfIntersect=l,this.UMultiplicities=h,this.VMultiplicities=c,this.UKnots=u,this.VKnots=p,this.KnotSpec=d,this.WeightsData=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new aG(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t.push(this.UMultiplicities),t.push(this.VMultiplicities),t.push(this.UKnots),t.push(this.VKnots),t.push(this.KnotSpec),t.push(this.WeightsData),t}},lG=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.XDim=s,this.YDim=o,this.WallThickness=a,this.InnerFilletRadius=l,this.OuterFilletRadius=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new lG(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t.push(this.WallThickness),t.push(this.InnerFilletRadius),t.push(this.OuterFilletRadius),t}},hG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.XDim=s,this.YDim=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new hG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t}},cG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Position=n,this.XLength=i,this.YLength=r,this.Height=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new cG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Position),t.push(this.XLength),t.push(this.YLength),t.push(this.Height),t}},uG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.BasisSurface=n,this.U1=i,this.V1=r,this.U2=s,this.V2=o,this.Usense=a,this.Vsense=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new uG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.U1),t.push(this.V1),t.push(this.U2),t.push(this.V2),t.push(this.Usense),t.push(this.Vsense),t}},pG=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.RecurrenceType=n,this.DayComponent=i,this.WeekdayComponent=r,this.MonthComponent=s,this.Position=o,this.Interval=a,this.Occurrences=l,this.TimePeriods=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new pG(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.RecurrenceType),t.push(this.DayComponent),t.push(this.WeekdayComponent),t.push(this.MonthComponent),t.push(this.Position),t.push(this.Interval),t.push(this.Occurrences),t.push(this.TimePeriods),t}},dG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.TypeIdentifier=n,this.AttributeIdentifier=i,this.InstanceName=r,this.ListPositions=s,this.InnerReference=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new dG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.TypeIdentifier),t.push(this.AttributeIdentifier),t.push(this.InstanceName),t.push(this.ListPositions),t.push(this.InnerReference),t}},fG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.RestartDistance=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new fG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.RestartDistance),t}},mG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.StartTime=r,this.EndTime=s,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=l,this.Unit=h,this.TimeStep=c,this.Values=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new mG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t.push(this.TimeStep),t.push(this.Values),t}},gG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.TotalCrossSectionArea=n,this.SteelGrade=i,this.BarSurface=r,this.EffectiveDepth=s,this.NominalBarDiameter=o,this.BarCount=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new gG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.TotalCrossSectionArea),t.push(this.SteelGrade),t.push(this.BarSurface),t.push(this.EffectiveDepth),t.push(this.NominalBarDiameter),t.push(this.BarCount),t}},yG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.DefinitionType=o,this.ReinforcementSectionDefinitions=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new yG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.DefinitionType),t.push(this.ReinforcementSectionDefinitions),t}},_G=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.NominalDiameter=u,this.CrossSectionArea=p,this.BarLength=d,this.PredefinedType=f,this.BarSurface=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new _G(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.BarLength),t.push(this.PredefinedType),t.push(this.BarSurface),t}},vG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.BarLength=f,this.BarSurface=m,this.BendingShapeCode=g,this.BendingParameters=y}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++];return new vG(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.BarLength),t.push(this.BarSurface),t.push(this.BendingShapeCode),t.push(this.BendingParameters),t}},TG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t}},EG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new EG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},xG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.MeshLength=u,this.MeshWidth=p,this.LongitudinalBarNominalDiameter=d,this.TransverseBarNominalDiameter=f,this.LongitudinalBarCrossSectionArea=m,this.TransverseBarCrossSectionArea=g,this.LongitudinalBarSpacing=y,this.TransverseBarSpacing=_,this.PredefinedType=v}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++],E=n[i++];return new xG(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.MeshLength),t.push(this.MeshWidth),t.push(this.LongitudinalBarNominalDiameter),t.push(this.TransverseBarNominalDiameter),t.push(this.LongitudinalBarCrossSectionArea),t.push(this.TransverseBarCrossSectionArea),t.push(this.LongitudinalBarSpacing),t.push(this.TransverseBarSpacing),t.push(this.PredefinedType),t}},IG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.MeshLength=p,this.MeshWidth=d,this.LongitudinalBarNominalDiameter=f,this.TransverseBarNominalDiameter=m,this.LongitudinalBarCrossSectionArea=g,this.TransverseBarCrossSectionArea=y,this.LongitudinalBarSpacing=_,this.TransverseBarSpacing=v,this.BendingShapeCode=T,this.BendingParameters=E}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++],E=n[i++],x=n[i++],I=n[i++];return new IG(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x,I)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.MeshLength),t.push(this.MeshWidth),t.push(this.LongitudinalBarNominalDiameter),t.push(this.TransverseBarNominalDiameter),t.push(this.LongitudinalBarCrossSectionArea),t.push(this.TransverseBarCrossSectionArea),t.push(this.LongitudinalBarSpacing),t.push(this.TransverseBarSpacing),t.push(this.BendingShapeCode),t.push(this.BendingParameters),t}},bG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingObject=o,this.RelatedObjects=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new bG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingObject),t.push(this.RelatedObjects),t}},wG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new wG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t}},SG=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingActor=l,this.ActingRole=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new SG(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingActor),t.push(this.ActingRole),t}},AG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingControl=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new AG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingControl),t}},CG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingGroup=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new CG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingGroup),t}},RG=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingGroup=l,this.Factor=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new RG(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingGroup),t.push(this.Factor),t}},DG=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingProcess=l,this.QuantityInProcess=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new DG(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingProcess),t.push(this.QuantityInProcess),t}},OG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingProduct=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new OG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingProduct),t}},NG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingResource=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new NG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingResource),t}},MG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new MG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t}},PG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingApproval=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new PG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingApproval),t}},FG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingClassification=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new FG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingClassification),t}},LG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.Intent=a,this.RelatingConstraint=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new LG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.Intent),t.push(this.RelatingConstraint),t}},kG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingDocument=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new kG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingDocument),t}},UG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingLibrary=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new UG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingLibrary),t}},BG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingMaterial=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new BG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingMaterial),t}},zG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new zG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},GG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new GG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t}},HG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=l,this.RelatingPriorities=h,this.RelatedPriorities=c,this.RelatedConnectionType=u,this.RelatingConnectionType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new HG(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.RelatingPriorities),t.push(this.RelatedPriorities),t.push(this.RelatedConnectionType),t.push(this.RelatingConnectionType),t}},VG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingPort=o,this.RelatedElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new VG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPort),t.push(this.RelatedElement),t}},jG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingPort=o,this.RelatedPort=a,this.RealizingElement=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new jG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPort),t.push(this.RelatedPort),t.push(this.RealizingElement),t}},WG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingElement=o,this.RelatedStructuralActivity=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new WG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedStructuralActivity),t}},YG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=a,this.AppliedCondition=l,this.AdditionalConditions=h,this.SupportedLength=c,this.ConditionCoordinateSystem=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingStructuralMember),t.push(this.RelatedStructuralConnection),t.push(this.AppliedCondition),t.push(this.AdditionalConditions),t.push(this.SupportedLength),t.push(this.ConditionCoordinateSystem),t}},qG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=a,this.AppliedCondition=l,this.AdditionalConditions=h,this.SupportedLength=c,this.ConditionCoordinateSystem=u,this.ConnectionConstraint=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new qG(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingStructuralMember),t.push(this.RelatedStructuralConnection),t.push(this.AppliedCondition),t.push(this.AdditionalConditions),t.push(this.SupportedLength),t.push(this.ConditionCoordinateSystem),t.push(this.ConnectionConstraint),t}},XG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=l,this.RealizingElements=h,this.ConnectionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new XG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.RealizingElements),t.push(this.ConnectionType),t}},ZG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedElements=o,this.RelatingStructure=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new ZG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedElements),t.push(this.RelatingStructure),t}},KG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingBuildingElement=o,this.RelatedCoverings=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new KG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingBuildingElement),t.push(this.RelatedCoverings),t}},QG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedCoverings=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new QG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedCoverings),t}},JG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingContext=o,this.RelatedDefinitions=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new JG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingContext),t.push(this.RelatedDefinitions),t}},$G=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new $G(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},tH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new tH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},eH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingObject=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new eH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingObject),t}},nH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingPropertyDefinition=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new nH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingPropertyDefinition),t}},iH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedPropertySets=o,this.RelatingTemplate=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new iH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedPropertySets),t.push(this.RelatingTemplate),t}},rH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingType=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new rH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingType),t}},sH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingOpeningElement=o,this.RelatedBuildingElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new sH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingOpeningElement),t.push(this.RelatedBuildingElement),t}},oH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedControlElements=o,this.RelatingFlowElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new oH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedControlElements),t.push(this.RelatingFlowElement),t}},aH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingElement=o,this.RelatedElement=a,this.InterferenceGeometry=l,this.InterferenceType=h,this.ImpliedOrder=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.InterferenceGeometry),t.push(this.InterferenceType),t.push(this.ImpliedOrder),t}},lH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingObject=o,this.RelatedObjects=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new lH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingObject),t.push(this.RelatedObjects),t}},hH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingPositioningElement=o,this.RelatedProducts=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new hH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPositioningElement),t.push(this.RelatedProducts),t}},cH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingElement=o,this.RelatedFeatureElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new cH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedFeatureElement),t}},uH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedElements=o,this.RelatingStructure=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new uH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedElements),t.push(this.RelatingStructure),t}},pH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingProcess=o,this.RelatedProcess=a,this.TimeLag=l,this.SequenceType=h,this.UserDefinedSequenceType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new pH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingProcess),t.push(this.RelatedProcess),t.push(this.TimeLag),t.push(this.SequenceType),t.push(this.UserDefinedSequenceType),t}},dH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSystem=o,this.RelatedBuildings=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new dH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSystem),t.push(this.RelatedBuildings),t}},fH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=l,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new fH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t}},mH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=l,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=c,this.ParentBoundary=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new mH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t.push(this.ParentBoundary),t}},gH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=l,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=c,this.ParentBoundary=u,this.CorrespondingBoundary=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new gH(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t.push(this.ParentBoundary),t.push(this.CorrespondingBoundary),t}},yH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingBuildingElement=o,this.RelatedOpeningElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new yH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingBuildingElement),t.push(this.RelatedOpeningElement),t}},_H=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new _H(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},vH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Transition=n,this.SameSense=i,this.ParentCurve=r,this.ParamLength=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new vH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Transition),t.push(this.SameSense),t.push(this.ParentCurve),t.push(this.ParamLength),t}},TH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new TH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},EH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.ContextIdentifier=n,this.ContextType=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new EH(t,e,r,s)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t}},xH=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new xH(t,e)}ToTape(){return[]}},IH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.MappingOrigin=n,this.MappedRepresentation=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new IH(t,e,r,s)}ToTape(){let t=[];return t.push(this.MappingOrigin),t.push(this.MappedRepresentation),t}},bH=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new bH(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t}},wH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatedResourceObjects=r,this.RelatingApproval=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new wH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatedResourceObjects),t.push(this.RelatingApproval),t}},SH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingConstraint=r,this.RelatedResourceObjects=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new SH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingConstraint),t.push(this.RelatedResourceObjects),t}},AH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new AH(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},CH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.ScheduleWork=s,this.ScheduleUsage=o,this.ScheduleStart=a,this.ScheduleFinish=l,this.ScheduleContour=h,this.LevelingDelay=c,this.IsOverAllocated=u,this.StatusTime=p,this.ActualWork=d,this.ActualUsage=f,this.ActualStart=m,this.ActualFinish=g,this.RemainingWork=y,this.RemainingUsage=_,this.Completion=v}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++],E=n[i++];return new CH(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.ScheduleWork),t.push(this.ScheduleUsage),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.ScheduleContour),t.push(this.LevelingDelay),t.push(this.IsOverAllocated),t.push(this.StatusTime),t.push(this.ActualWork),t.push(this.ActualUsage),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingWork),t.push(this.RemainingUsage),t.push(this.Completion),t}},RH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Axis=r,this.Angle=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new RH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Axis),t.push(this.Angle),t}},DH=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Axis=r,this.Angle=s,this.EndSweptArea=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new DH(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Axis),t.push(this.Angle),t.push(this.EndSweptArea),t}},OH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.Height=i,this.BottomRadius=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new OH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Height),t.push(this.BottomRadius),t}},NH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.Height=i,this.Radius=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new NH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Height),t.push(this.Radius),t}},MH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new MH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},PH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new PH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},FH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new FH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},LH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.XDim=s,this.YDim=o,this.RoundingRadius=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new LH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t.push(this.RoundingRadius),t}},kH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Prefix=r,this.Name=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new kH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Prefix),t.push(this.Name),t}},UH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new UH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},BH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new BH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},zH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new zH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t}},GH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Curve3D=n,this.AssociatedGeometry=i,this.MasterRepresentation=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new GH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},HH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SectionType=n,this.StartProfile=i,this.EndProfile=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new HH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SectionType),t.push(this.StartProfile),t.push(this.EndProfile),t}},VH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.LongitudinalStartPosition=n,this.LongitudinalEndPosition=i,this.TransversePosition=r,this.ReinforcementRole=s,this.SectionDefinition=o,this.CrossSectionReinforcementDefinitions=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new VH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.LongitudinalStartPosition),t.push(this.LongitudinalEndPosition),t.push(this.TransversePosition),t.push(this.ReinforcementRole),t.push(this.SectionDefinition),t.push(this.CrossSectionReinforcementDefinitions),t}},jH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Directrix=n,this.CrossSections=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new jH(t,e,r,s)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.CrossSections),t}},WH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Directrix=n,this.CrossSections=i,this.CrossSectionPositions=r,this.FixedAxisVertical=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new WH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.CrossSections),t.push(this.CrossSectionPositions),t.push(this.FixedAxisVertical),t}},YH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SpineCurve=n,this.CrossSections=i,this.CrossSectionPositions=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new YH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SpineCurve),t.push(this.CrossSections),t.push(this.CrossSectionPositions),t}},qH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},XH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new XH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ZH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ZH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},KH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new KH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},QH=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ShapeRepresentations=n,this.Name=i,this.Description=r,this.ProductDefinitional=s,this.PartOfProductDefinitionShape=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new QH(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ShapeRepresentations),t.push(this.Name),t.push(this.Description),t.push(this.ProductDefinitional),t.push(this.PartOfProductDefinitionShape),t}},JH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new JH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},$H=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new $H(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},tV=class{constructor(t,e,n){this.expressID=t,this.type=e,this.SbsmBoundary=n}static FromTape(t,e,n){let i=0,r=n[i++];return new tV(t,e,r)}ToTape(){let t=[];return t.push(this.SbsmBoundary),t}},eV=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new eV(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},nV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.TemplateType=o,this.PrimaryMeasureType=a,this.SecondaryMeasureType=l,this.Enumerators=h,this.PrimaryUnit=c,this.SecondaryUnit=u,this.Expression=p,this.AccessState=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new nV(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.TemplateType),t.push(this.PrimaryMeasureType),t.push(this.SecondaryMeasureType),t.push(this.Enumerators),t.push(this.PrimaryUnit),t.push(this.SecondaryUnit),t.push(this.Expression),t.push(this.AccessState),t}},iV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.RefLatitude=u,this.RefLongitude=p,this.RefElevation=d,this.LandTitleNumber=f,this.SiteAddress=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new iV(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.RefLatitude),t.push(this.RefLongitude),t.push(this.RefElevation),t.push(this.LandTitleNumber),t.push(this.SiteAddress),t}},rV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new sV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},oV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new oV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new aV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},lV=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.SlippageX=i,this.SlippageY=r,this.SlippageZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new lV(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.SlippageX),t.push(this.SlippageY),t.push(this.SlippageZ),t}},hV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new hV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},cV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new cV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},uV=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new uV(t,e)}ToTape(){return[]}},pV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.PredefinedType=u,this.ElevationWithFlooring=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new pV(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t.push(this.ElevationWithFlooring),t}},dV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new fV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.LongName=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new mV(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.LongName),t}},gV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new gV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t}},yV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new yV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},_V=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new _V(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},vV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new vV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},TV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.PredefinedType),t}},EV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.LongName=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new EV(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.LongName),t}},xV=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new xV(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},IV=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new IV(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},bV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new bV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},wV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new wV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},SV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new SV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},AV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.NumberOfRisers=c,this.NumberOfTreads=u,this.RiserHeight=p,this.TreadLength=d,this.PredefinedType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new AV(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.NumberOfRisers),t.push(this.NumberOfTreads),t.push(this.RiserHeight),t.push(this.TreadLength),t.push(this.PredefinedType),t}},CV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new CV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},RV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new RV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},DV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new DV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t}},OV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new OV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},NV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.OrientationOf2DPlane=l,this.LoadedBy=h,this.HasResults=c,this.SharedPlacement=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new NV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.OrientationOf2DPlane),t.push(this.LoadedBy),t.push(this.HasResults),t.push(this.SharedPlacement),t}},MV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new MV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t}},PV=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new PV(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},FV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new FV(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},LV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h,this.Axis=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t.push(this.Axis),t}},kV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Axis=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new kV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Axis),t}},UV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Axis=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new UV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Axis),t}},BV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new BV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.PredefinedType),t}},zV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new zV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},GV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new GV(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},HV=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new HV(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},VV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.ActionType=l,this.ActionSource=h,this.Coefficient=c,this.Purpose=u,this.SelfWeightCoefficients=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new VV(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.ActionType),t.push(this.ActionSource),t.push(this.Coefficient),t.push(this.Purpose),t.push(this.SelfWeightCoefficients),t}},jV=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Values=i,this.Locations=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new jV(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Values),t.push(this.Locations),t}},WV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.ActionType=l,this.ActionSource=h,this.Coefficient=c,this.Purpose=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new WV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.ActionType),t.push(this.ActionSource),t.push(this.Coefficient),t.push(this.Purpose),t}},YV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.LinearForceX=i,this.LinearForceY=r,this.LinearForceZ=s,this.LinearMomentX=o,this.LinearMomentY=a,this.LinearMomentZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new YV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LinearForceX),t.push(this.LinearForceY),t.push(this.LinearForceZ),t.push(this.LinearMomentX),t.push(this.LinearMomentY),t.push(this.LinearMomentZ),t}},qV=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new qV(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},XV=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.PlanarForceX=i,this.PlanarForceY=r,this.PlanarForceZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new XV(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.PlanarForceX),t.push(this.PlanarForceY),t.push(this.PlanarForceZ),t}},ZV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.DisplacementX=i,this.DisplacementY=r,this.DisplacementZ=s,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=a,this.RotationalDisplacementRZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new ZV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DisplacementX),t.push(this.DisplacementY),t.push(this.DisplacementZ),t.push(this.RotationalDisplacementRX),t.push(this.RotationalDisplacementRY),t.push(this.RotationalDisplacementRZ),t}},KV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.DisplacementX=i,this.DisplacementY=r,this.DisplacementZ=s,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=a,this.RotationalDisplacementRZ=l,this.Distortion=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new KV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DisplacementX),t.push(this.DisplacementY),t.push(this.DisplacementZ),t.push(this.RotationalDisplacementRX),t.push(this.RotationalDisplacementRY),t.push(this.RotationalDisplacementRZ),t.push(this.Distortion),t}},QV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.ForceX=i,this.ForceY=r,this.ForceZ=s,this.MomentX=o,this.MomentY=a,this.MomentZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new QV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.ForceX),t.push(this.ForceY),t.push(this.ForceZ),t.push(this.MomentX),t.push(this.MomentY),t.push(this.MomentZ),t}},JV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.ForceX=i,this.ForceY=r,this.ForceZ=s,this.MomentX=o,this.MomentY=a,this.MomentZ=l,this.WarpingMoment=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new JV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.ForceX),t.push(this.ForceY),t.push(this.ForceZ),t.push(this.MomentX),t.push(this.MomentY),t.push(this.MomentZ),t.push(this.WarpingMoment),t}},$V=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new $V(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},tj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.DeltaTConstant=i,this.DeltaTY=r,this.DeltaTZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new tj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DeltaTConstant),t.push(this.DeltaTY),t.push(this.DeltaTZ),t}},ej=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new ej(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},nj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new nj(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},ij=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new ij(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t}},rj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h,this.ConditionCoordinateSystem=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t.push(this.ConditionCoordinateSystem),t}},sj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new sj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},oj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new oj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},aj=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.TheoryType=a,this.ResultForLoadGroup=l,this.IsLinear=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new aj(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheoryType),t.push(this.ResultForLoadGroup),t.push(this.IsLinear),t}},lj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new lj(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},hj=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new hj(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t}},cj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Thickness=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Thickness),t}},uj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Thickness=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new uj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Thickness),t}},pj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new pj(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.PredefinedType),t}},dj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new dj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},fj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Item=n,this.Styles=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new fj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Item),t.push(this.Styles),t.push(this.Name),t}},mj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new mj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},gj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new gj(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},yj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new yj(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},_j=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i,this.ParentEdge=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new _j(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.ParentEdge),t}},vj=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new vj(t,e)}ToTape(){return[]}},Tj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Curve3D=n,this.AssociatedGeometry=i,this.MasterRepresentation=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Tj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},Ej=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Directrix=r,this.StartParam=s,this.EndParam=o,this.ReferenceSurface=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Ej(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Directrix),t.push(this.StartParam),t.push(this.EndParam),t.push(this.ReferenceSurface),t}},xj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new xj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Ij=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.SweptCurve=n,this.Position=i,this.ExtrudedDirection=r,this.Depth=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Ij(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t}},bj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SweptCurve=n,this.Position=i,this.AxisPosition=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new bj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t.push(this.AxisPosition),t}},wj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.SurfaceReinforcement1=i,this.SurfaceReinforcement2=r,this.ShearReinforcement=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new wj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.SurfaceReinforcement1),t.push(this.SurfaceReinforcement2),t.push(this.ShearReinforcement),t}},Sj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Side=i,this.Styles=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Sj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Side),t.push(this.Styles),t}},Aj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.DiffuseTransmissionColour=n,this.DiffuseReflectionColour=i,this.TransmissionColour=r,this.ReflectanceColour=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Aj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.DiffuseTransmissionColour),t.push(this.DiffuseReflectionColour),t.push(this.TransmissionColour),t.push(this.ReflectanceColour),t}},Cj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.RefractionIndex=n,this.DispersionFactor=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Cj(t,e,r,s)}ToTape(){let t=[];return t.push(this.RefractionIndex),t.push(this.DispersionFactor),t}},Rj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.SurfaceColour=n,this.Transparency=i,this.DiffuseColour=r,this.TransmissionColour=s,this.DiffuseTransmissionColour=o,this.ReflectionColour=a,this.SpecularColour=l,this.SpecularHighlight=h,this.ReflectanceMethod=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Rj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.SurfaceColour),t.push(this.Transparency),t.push(this.DiffuseColour),t.push(this.TransmissionColour),t.push(this.DiffuseTransmissionColour),t.push(this.ReflectionColour),t.push(this.SpecularColour),t.push(this.SpecularHighlight),t.push(this.ReflectanceMethod),t}},Dj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SurfaceColour=n,this.Transparency=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Dj(t,e,r,s)}ToTape(){let t=[];return t.push(this.SurfaceColour),t.push(this.Transparency),t}},Oj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Textures=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Oj(t,e,r)}ToTape(){let t=[];return t.push(this.Textures),t}},Nj=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Nj(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t}},Mj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Mj(t,e,r,s)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t}},Pj=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Directrix=n,this.Radius=i,this.InnerRadius=r,this.StartParam=s,this.EndParam=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Pj(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.Radius),t.push(this.InnerRadius),t.push(this.StartParam),t.push(this.EndParam),t}},Fj=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Directrix=n,this.Radius=i,this.InnerRadius=r,this.StartParam=s,this.EndParam=o,this.FilletRadius=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Fj(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.Radius),t.push(this.InnerRadius),t.push(this.StartParam),t.push(this.EndParam),t.push(this.FilletRadius),t}},Lj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SweptCurve=n,this.Position=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Lj(t,e,r,s)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t}},kj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new kj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Uj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Uj(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Bj=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Bj(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},zj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Gj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Gj(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Hj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.FlangeEdgeRadius=c,this.WebEdgeRadius=u,this.WebSlope=p,this.FlangeSlope=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new Hj(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.FlangeEdgeRadius),t.push(this.WebEdgeRadius),t.push(this.WebSlope),t.push(this.FlangeSlope),t}},Vj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Rows=i,this.Columns=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Vj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Rows),t.push(this.Columns),t}},jj=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Identifier=n,this.Name=i,this.Description=r,this.Unit=s,this.ReferencePath=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new jj(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Identifier),t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.ReferencePath),t}},Wj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.RowCells=n,this.IsHeading=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Wj(t,e,r,s)}ToTape(){let t=[];return t.push(this.RowCells),t.push(this.IsHeading),t}},Yj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Yj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},qj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new qj(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Xj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Status=h,this.WorkMethod=c,this.IsMilestone=u,this.Priority=p,this.TaskTime=d,this.PredefinedType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new Xj(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Status),t.push(this.WorkMethod),t.push(this.IsMilestone),t.push(this.Priority),t.push(this.TaskTime),t.push(this.PredefinedType),t}},Zj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.DurationType=s,this.ScheduleDuration=o,this.ScheduleStart=a,this.ScheduleFinish=l,this.EarlyStart=h,this.EarlyFinish=c,this.LateStart=u,this.LateFinish=p,this.FreeFloat=d,this.TotalFloat=f,this.IsCritical=m,this.StatusTime=g,this.ActualDuration=y,this.ActualStart=_,this.ActualFinish=v,this.RemainingTime=T,this.Completion=E}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++],E=n[i++],x=n[i++],I=n[i++];return new Zj(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x,I)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.DurationType),t.push(this.ScheduleDuration),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.EarlyStart),t.push(this.EarlyFinish),t.push(this.LateStart),t.push(this.LateFinish),t.push(this.FreeFloat),t.push(this.TotalFloat),t.push(this.IsCritical),t.push(this.StatusTime),t.push(this.ActualDuration),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingTime),t.push(this.Completion),t}},Kj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.DurationType=s,this.ScheduleDuration=o,this.ScheduleStart=a,this.ScheduleFinish=l,this.EarlyStart=h,this.EarlyFinish=c,this.LateStart=u,this.LateFinish=p,this.FreeFloat=d,this.TotalFloat=f,this.IsCritical=m,this.StatusTime=g,this.ActualDuration=y,this.ActualStart=_,this.ActualFinish=v,this.RemainingTime=T,this.Completion=E,this.Recurrence=x}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++],E=n[i++],x=n[i++],I=n[i++],b=n[i++];return new Kj(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T,E,x,I,b)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.DurationType),t.push(this.ScheduleDuration),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.EarlyStart),t.push(this.EarlyFinish),t.push(this.LateStart),t.push(this.LateFinish),t.push(this.FreeFloat),t.push(this.TotalFloat),t.push(this.IsCritical),t.push(this.StatusTime),t.push(this.ActualDuration),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingTime),t.push(this.Completion),t.push(this.Recurrence),t}},Qj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c,this.PredefinedType=u,this.WorkMethod=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new Qj(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t.push(this.WorkMethod),t}},Jj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Purpose=n,this.Description=i,this.UserDefinedPurpose=r,this.TelephoneNumbers=s,this.FacsimileNumbers=o,this.PagerNumber=a,this.ElectronicMailAddresses=l,this.WWWHomePageURL=h,this.MessagingIDs=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Jj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t.push(this.TelephoneNumbers),t.push(this.FacsimileNumbers),t.push(this.PagerNumber),t.push(this.ElectronicMailAddresses),t.push(this.WWWHomePageURL),t.push(this.MessagingIDs),t}},$j=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.TensionForce=f,this.PreStress=m,this.FrictionCoefficient=g,this.AnchorageSlip=y,this.MinCurvatureRadius=_}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++],T=n[i++];return new $j(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v,T)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.TensionForce),t.push(this.PreStress),t.push(this.FrictionCoefficient),t.push(this.AnchorageSlip),t.push(this.MinCurvatureRadius),t}},tW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new tW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t}},eW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new eW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new nW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t}},iW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new iW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.SheathDiameter=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new rW(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.SheathDiameter),t}},sW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Coordinates=n}static FromTape(t,e,n){let i=0,r=n[i++];return new sW(t,e,r)}ToTape(){let t=[];return t.push(this.Coordinates),t}},oW=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new oW(t,e)}ToTape(){return[]}},aW=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Literal=n,this.Placement=i,this.Path=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new aW(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Literal),t.push(this.Placement),t.push(this.Path),t}},lW=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Literal=n,this.Placement=i,this.Path=r,this.Extent=s,this.BoxAlignment=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new lW(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Literal),t.push(this.Placement),t.push(this.Path),t.push(this.Extent),t.push(this.BoxAlignment),t}},hW=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.TextCharacterAppearance=i,this.TextStyle=r,this.TextFontStyle=s,this.ModelOrDraughting=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new hW(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TextCharacterAppearance),t.push(this.TextStyle),t.push(this.TextFontStyle),t.push(this.ModelOrDraughting),t}},cW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.FontFamily=i,this.FontStyle=r,this.FontVariant=s,this.FontWeight=o,this.FontSize=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new cW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.FontFamily),t.push(this.FontStyle),t.push(this.FontVariant),t.push(this.FontWeight),t.push(this.FontSize),t}},uW=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Colour=n,this.BackgroundColour=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new uW(t,e,r,s)}ToTape(){let t=[];return t.push(this.Colour),t.push(this.BackgroundColour),t}},pW=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.TextIndent=n,this.TextAlign=i,this.TextDecoration=r,this.LetterSpacing=s,this.WordSpacing=o,this.TextTransform=a,this.LineHeight=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new pW(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.TextIndent),t.push(this.TextAlign),t.push(this.TextDecoration),t.push(this.LetterSpacing),t.push(this.WordSpacing),t.push(this.TextTransform),t.push(this.LineHeight),t}},dW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Maps=n}static FromTape(t,e,n){let i=0,r=n[i++];return new dW(t,e,r)}ToTape(){let t=[];return t.push(this.Maps),t}},fW=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Maps=n,this.Mode=i,this.Parameter=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new fW(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.Mode),t.push(this.Parameter),t}},mW=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Maps=n,this.Vertices=i,this.MappedTo=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new mW(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.Vertices),t.push(this.MappedTo),t}},gW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Coordinates=n}static FromTape(t,e,n){let i=0,r=n[i++];return new gW(t,e,r)}ToTape(){let t=[];return t.push(this.Coordinates),t}},yW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.TexCoordsList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new yW(t,e,r)}ToTape(){let t=[];return t.push(this.TexCoordsList),t}},_W=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.StartTime=n,this.EndTime=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new _W(t,e,r,s)}ToTape(){let t=[];return t.push(this.StartTime),t.push(this.EndTime),t}},vW=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.StartTime=r,this.EndTime=s,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=l,this.Unit=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new vW(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t}},TW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.ListValues=n}static FromTape(t,e,n){let i=0,r=n[i++];return new TW(t,e,r)}ToTape(){let t=[];return t.push(this.ListValues),t}},EW=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new EW(t,e)}ToTape(){return[]}},xW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new xW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},IW=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.MajorRadius=i,this.MinorRadius=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new IW(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.MajorRadius),t.push(this.MinorRadius),t}},bW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new bW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},wW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new wW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},SW=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r,this.StartRadius=s,this.EndRadius=o,this.IsStartRadiusCCW=a,this.IsEndRadiusCCW=l,this.TransitionCurveType=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new SW(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t.push(this.StartRadius),t.push(this.EndRadius),t.push(this.IsStartRadiusCCW),t.push(this.IsEndRadiusCCW),t.push(this.TransitionCurveType),t}},AW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new AW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},CW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new CW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},RW=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.BottomXDim=s,this.TopXDim=o,this.YDim=a,this.TopXOffset=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new RW(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.BottomXDim),t.push(this.TopXDim),t.push(this.YDim),t.push(this.TopXOffset),t}},DW=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Coordinates=n,this.Normals=i,this.Closed=r,this.CoordIndex=s,this.PnIndex=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new DW(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Normals),t.push(this.Closed),t.push(this.CoordIndex),t.push(this.PnIndex),t}},OW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Coordinates=n,this.Normals=i,this.Closed=r,this.CoordIndex=s,this.PnIndex=o,this.Flags=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new OW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Normals),t.push(this.Closed),t.push(this.CoordIndex),t.push(this.PnIndex),t.push(this.Flags),t}},NW=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.BasisCurve=n,this.Trim1=i,this.Trim2=r,this.SenseAgreement=s,this.MasterRepresentation=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new NW(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Trim1),t.push(this.Trim2),t.push(this.SenseAgreement),t.push(this.MasterRepresentation),t}},MW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new MW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},PW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new PW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},FW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new FW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t}},LW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t}},kW=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new kW(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t}},UW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new UW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t}},BW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.EdgeRadius=c,this.FlangeSlope=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new BW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t.push(this.FlangeSlope),t}},zW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Units=n}static FromTape(t,e,n){let i=0,r=n[i++];return new zW(t,e,r)}ToTape(){let t=[];return t.push(this.Units),t}},GW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new GW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},HW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new HW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},VW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new VW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},jW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new jW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},WW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new WW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qW=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Orientation=n,this.Magnitude=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new qW(t,e,r,s)}ToTape(){let t=[];return t.push(this.Orientation),t.push(this.Magnitude),t}},XW=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new XW(t,e)}ToTape(){return[]}},ZW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.LoopVertex=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ZW(t,e,r)}ToTape(){let t=[];return t.push(this.LoopVertex),t}},KW=class{constructor(t,e,n){this.expressID=t,this.type=e,this.VertexGeometry=n}static FromTape(t,e,n){let i=0,r=n[i++];return new KW(t,e,r)}ToTape(){let t=[];return t.push(this.VertexGeometry),t}},QW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new QW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},JW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new JW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},$W=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new $W(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},tY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new tY(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},eY=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new eY(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},nY=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.IntersectingAxes=n,this.OffsetDistances=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new nY(t,e,r,s)}ToTape(){let t=[];return t.push(this.IntersectingAxes),t.push(this.OffsetDistances),t}},iY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new iY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new sY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},oY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new oY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new aY(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},lY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new lY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},hY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new hY(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},cY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.PartitioningType=d,this.UserDefinedPartitioningType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new cY(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.UserDefinedPartitioningType),t}},uY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.LiningDepth=o,this.LiningThickness=a,this.TransomThickness=l,this.MullionThickness=h,this.FirstTransomOffset=c,this.SecondTransomOffset=u,this.FirstMullionOffset=p,this.SecondMullionOffset=d,this.ShapeAspectStyle=f,this.LiningOffset=m,this.LiningToPanelOffsetX=g,this.LiningToPanelOffsetY=y}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],_=n[i++],v=n[i++];return new uY(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,_,v)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.LiningDepth),t.push(this.LiningThickness),t.push(this.TransomThickness),t.push(this.MullionThickness),t.push(this.FirstTransomOffset),t.push(this.SecondTransomOffset),t.push(this.FirstMullionOffset),t.push(this.SecondMullionOffset),t.push(this.ShapeAspectStyle),t.push(this.LiningOffset),t.push(this.LiningToPanelOffsetX),t.push(this.LiningToPanelOffsetY),t}},pY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.OperationType=o,this.PanelPosition=a,this.FrameDepth=l,this.FrameThickness=h,this.ShapeAspectStyle=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new pY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.OperationType),t.push(this.PanelPosition),t.push(this.FrameDepth),t.push(this.FrameThickness),t.push(this.ShapeAspectStyle),t}},dY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.PartitioningType=d,this.UserDefinedPartitioningType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new dY(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.UserDefinedPartitioningType),t}},fY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ConstructionType=c,this.OperationType=u,this.ParameterTakesPrecedence=p,this.Sizeable=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new fY(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ConstructionType),t.push(this.OperationType),t.push(this.ParameterTakesPrecedence),t.push(this.Sizeable),t}},mY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.PartitioningType=p,this.ParameterTakesPrecedence=d,this.UserDefinedPartitioningType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new mY(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.ParameterTakesPrecedence),t.push(this.UserDefinedPartitioningType),t}},gY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.WorkingTimes=l,this.ExceptionTimes=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new gY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.WorkingTimes),t.push(this.ExceptionTimes),t.push(this.PredefinedType),t}},yY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.CreationDate=l,this.Creators=h,this.Purpose=c,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new yY(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t}},_Y=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.CreationDate=l,this.Creators=h,this.Purpose=c,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=f,this.PredefinedType=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new _Y(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t.push(this.PredefinedType),t}},vY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.CreationDate=l,this.Creators=h,this.Purpose=c,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=f,this.PredefinedType=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new vY(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t.push(this.PredefinedType),t}},TY=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.RecurrencePattern=s,this.Start=o,this.Finish=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new TY(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.RecurrencePattern),t.push(this.Start),t.push(this.Finish),t}},EY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.EdgeRadius=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new EY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t}},xY=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new xY(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t}},IY={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"},bY={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"},wY={aggregates:{name:tS,relating:"RelatingObject",related:"RelatedObjects",key:"children"},spatial:{name:nS,relating:"RelatingStructure",related:"RelatedElements",key:"children"},psets:{name:iS,relating:"RelatingPropertyDefinition",related:"RelatedObjects",key:"hasPsets"},materials:{name:eS,relating:"RelatingMaterial",related:"RelatedObjects",key:"hasMaterial"},type:{name:rS,relating:"RelatingType",related:"RelatedObjects",key:"hasType"}},SY=class{constructor(t){this.api=t}getIfcType(t){return bY[t]}getItemProperties(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return MI(this,null,(function*(){return this.api.GetLine(t,e,n)}))}getPropertySets(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return MI(this,null,(function*(){return yield this.getProperty(t,e,n,wY.psets)}))}getTypeProperties(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return MI(this,null,(function*(){return yield this.getProperty(t,e,n,wY.type)}))}getMaterialsProperties(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return MI(this,null,(function*(){return yield this.getProperty(t,e,n,wY.materials)}))}getSpatialStructure(t,e){return MI(this,null,(function*(){yield this.getAllTypesOfModel(t);const n=yield this.getSpatialTreeChunks(t),i=(yield this.api.GetLineIDsWithType(t,Gw)).get(0),r=SY.newIfcProject(i);return yield this.getSpatialNode(t,r,n,e),this.cleanupTypes(),r}))}getAllItemsOfType(t,e,n){return MI(this,null,(function*(){let i=[];const r=yield this.api.GetLineIDsWithType(t,e);for(let t=0;t<r.size();t++)i.push(r.get(t));if(!n)return i;const s=[];for(let e=0;e<i.length;e++)s.push(yield this.api.GetLine(t,i[e]));return s}))}getProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;return MI(this,null,(function*(){const r=yield this.getAllRelatedItemsOfType(t,e,i),s=[];for(let e=0;e<r.length;e++)s.push(yield this.api.GetLine(t,r[e],n));return s}))}getChunks(t,e,n){return MI(this,null,(function*(){const i=yield this.api.GetLineIDsWithType(t,n.name);for(let r=0;r<i.size();r++){const s=yield this.api.GetLine(t,i.get(r),!1);this.saveChunk(e,n,s)}}))}static isRelated(t,e,n){const i=e[n.related];if(Array.isArray(i)){return i.map((t=>t.value)).includes(t)}return i.value===t}static newIfcProject(t){return{expressID:t,type:"IFCPROJECT",children:[]}}getSpatialNode(t,e,n,i){return MI(this,null,(function*(){yield this.getChildren(t,e,n,wY.aggregates,i),yield this.getChildren(t,e,n,wY.spatial,i)}))}getChildren(t,e,n,i,r){return MI(this,null,(function*(){const s=n[e.expressID];if(void 0==s)return;const o=i.key,a=[];for(let e=0;e<s.length;e++){const i=s[e];let o=this.newNode(i);if(r){const e=yield this.getItemProperties(t,o.expressID);o=DI(DI({},e),o)}yield this.getSpatialNode(t,o,n,r),a.push(o)}e[o]=a}))}newNode(t){return{expressID:t,type:this.getNodeType(t),children:[]}}getNodeType(t){const e=this.types[t];return IY[e]}getSpatialTreeChunks(t){return MI(this,null,(function*(){const e={};return yield this.getChunks(t,e,wY.aggregates),yield this.getChunks(t,e,wY.spatial),e}))}saveChunk(t,e,n){const i=n[e.relating].value,r=n[e.related].map((t=>t.value));void 0==t[i]?t[i]=r:t[i]=t[i].concat(r)}getRelated(t,e,n){const i=t[e.relating];Array.isArray(i)?i.forEach((t=>n.push(t.value))):n.push(i.value)}getAllRelatedItemsOfType(t,e,n){return MI(this,null,(function*(){const i=yield this.api.GetLineIDsWithType(t,n.name),r=[];for(let s=0;s<i.size();s++){const o=yield this.api.GetLine(t,i.get(s));SY.isRelated(e,o,n)&&this.getRelated(o,n,r)}return r}))}cleanupTypes(){this.types={}}getAllTypesOfModel(t){return MI(this,null,(function*(){const e={},n=Object.keys(IY).map((t=>parseInt(t)));for(let i=0;i<n.length;i++){const r=n[i],s=yield this.api.GetLineIDsWithType(t,r),o=s.size();for(let t=0;t<o;t++)e[s.get(t)]=r}this.types=e}))}};gO="undefined"!==typeof self&&self.crossOriginIsolated?FI():LI();var AY=class{constructor(){this.wasmModule=void 0,this.fs=void 0,this.wasmPath="",this.isWasmPathAbsolute=!1,this.ifcGuidMap=new Map,this.properties=new SY(this)}Init(t){return MI(this,null,(function*(){if(gO){let e=(t,e)=>t.endsWith(".wasm")?this.isWasmPathAbsolute?this.wasmPath+t:e+this.wasmPath+t:e+t;this.wasmModule=yield gO({noInitialRun:!0,locateFile:t||e}),this.fs=this.wasmModule.FS}else console.error("Could not find wasm module at './web-ifc' from web-ifc-api.ts")}))}OpenModel(t,e){let n=DI({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12,BOOL_ABORT_THRESHOLD:1e4},e),i=0;return this.wasmModule.OpenModel(n,((e,n)=>{let r=Math.min(t.byteLength-i,n),s=this.wasmModule.HEAPU8.subarray(e,e+n),o=t.subarray(i,i+r);return s.set(o),i+=r,r}))}CreateModel(t){let e=DI({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12,BOOL_ABORT_THRESHOLD:1e4},t);return this.wasmModule.CreateModel(e)}ExportFileAsIFC(t){this.wasmModule.ExportFileAsIFC(t);let e=this.fs.readFile("/export.ifc");return this.wasmModule.FS_unlink("/export.ifc"),e}GetGeometry(t,e){return this.wasmModule.GetGeometry(t,e)}GetLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.GetRawLineData(t,e),r=mA[i.type](i);return n&&this.FlattenLine(t,r),r}GetAndClearErrors(t){return this.wasmModule.GetAndClearErrors(t)}WriteLine(t,e){if(Object.keys(e).forEach((n=>{let i=e[n];if(i&&void 0!==i.expressID)this.WriteLine(t,i),e[n]={type:5,value:i.expressID};else if(Array.isArray(i)&&i.length>0)for(let r=0;r<i.length;r++)void 0!==i[r].expressID&&(this.WriteLine(t,i[r]),e[n][r]={type:5,value:i[r].expressID})})),void 0==e.expressID||void 0==e.type||void 0===e.ToType)return void console.warn("Line object cannot be serialized: ",e);let n={ID:e.expressID,type:e.type,arguments:e.ToTape()};this.WriteRawLineData(t,n)}FlattenLine(t,e){Object.keys(e).forEach((n=>{let i=e[n];if(i&&5===i.type)e[n]=this.GetLine(t,i.value,!0);else if(Array.isArray(i)&&i.length>0&&5===i[0].type)for(let r=0;r<i.length;r++)e[n][r]=this.GetLine(t,i[r].value,!0)}))}GetRawLineData(t,e){return this.wasmModule.GetLine(t,e)}WriteRawLineData(t,e){return this.wasmModule.WriteLine(t,e.ID,e.type,e.arguments)}GetLineIDsWithType(t,e){return this.wasmModule.GetLineIDsWithType(t,e)}GetAllLines(t){return this.wasmModule.GetAllLines(t)}SetGeometryTransformation(t,e){16==e.length?this.wasmModule.SetGeometryTransformation(t,e):console.log("Bad transformation matrix size: ".concat(e.length))}GetCoordinationMatrix(t){return this.wasmModule.GetCoordinationMatrix(t)}GetVertexArray(t,e){return this.getSubArray(this.wasmModule.HEAPF32,t,e)}GetIndexArray(t,e){return this.getSubArray(this.wasmModule.HEAPU32,t,e)}getSubArray(t,e,n){return t.subarray(e/4,e/4+n).slice(0)}CloseModel(t){this.ifcGuidMap.delete(t),this.wasmModule.CloseModel(t)}StreamAllMeshes(t,e){this.wasmModule.StreamAllMeshes(t,e)}StreamAllMeshesWithTypes(t,e,n){this.wasmModule.StreamAllMeshesWithTypes(t,e,n)}IsModelOpen(t){return this.wasmModule.IsModelOpen(t)}LoadAllGeometry(t){return this.wasmModule.LoadAllGeometry(t)}GetFlatMesh(t,e){return this.wasmModule.GetFlatMesh(t,e)}CreateIfcGuidToExpressIdMapping(t){const e=new Map;for(let n=0;n<fA.length;n++){const i=fA[n],r=this.GetLineIDsWithType(t,i),s=r.size();for(let n=0;n<s;n++){const i=r.get(n),s=this.GetLine(t,i).GlobalId.value;e.set(i,s),e.set(s,i)}}this.ifcGuidMap.set(t,e)}SetWasmPath(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.wasmPath=t,this.isWasmPathAbsolute=e}};class CY{constructor(){this.instancedCategories=new Set,this.includeProperties=!0,this.optionalCategories=[mS],this.wasm={path:"",absolute:!1},this.webIfc={COORDINATE_TO_ORIGIN:!0,USE_FAST_BOOLS:!0},this.instancedCategories.add(mw),this.instancedCategories.add(pA),this.instancedCategories.add(Db)}}class RY{constructor(t,e,n){this._referenceMatrix=new ch,this._isFirstMatrix=!0,this._voids=new Set,this._geometriesByMaterial={},this._items={},this._webIfc=t,this._items=e,this._materials=n}streamMesh(t,e){this.reset(t);const n=RY.getGeometryID(e);!this._items[n]?this.generateBufferGeometries(e,n):this.getGeometryTransformation(e,n)}cleanUp(){this._geometriesByMaterial={},this._voids.clear()}addVoid(t){this._voids.add(t)}reset(t){this._geometriesByMaterial={},this._referenceMatrix=new ch,this._isFirstMatrix=!0,this._webIfc=null,this._webIfc=t}getGeometryTransformation(t,e){const n=this._items[e].referenceMatrix,i=t.geometries.get(0),r=RY.getMeshMatrix(i);r.multiply(n),this._items[e].instances.push({id:t.expressID,matrix:r,hasVoids:this._voids.has(t.expressID)})}generateBufferGeometries(t,e){const n=t.geometries.size();for(let i=0;i<n;i++){const e=t.geometries.get(i),n=this.getBufferGeometry(e.geometryExpressID);if(!n)return;this.applyTransform(e,n),this.sortGeometriesByMaterials(e,n)}this.saveGeometryInstances(e,t)}saveGeometryInstances(t,e){this._items[t]={instances:[{id:e.expressID,matrix:new ch,hasVoids:this._voids.has(e.expressID)}],geometriesByMaterial:this._geometriesByMaterial,referenceMatrix:this._referenceMatrix}}sortGeometriesByMaterials(t,e){const n=this.saveMaterials(t);this._geometriesByMaterial[n]?this._geometriesByMaterial[n].push(e):this._geometriesByMaterial[n]=[e]}saveMaterials(t){const e=t.color,n="".concat(e.x).concat(e.y).concat(e.z).concat(e.w);return void 0!==this._materials[n]||this.saveNewMaterial(n,e),n}saveNewMaterial(t,e){this._materials[t]=new fg({color:new ec(e.x,e.y,e.z),transparent:1!==e.w,opacity:e.w,side:ws})}applyTransform(t,e){const n=RY.getMeshMatrix(t);e.applyMatrix4(n),this._isFirstMatrix&&(this._referenceMatrix=(new ch).copy(n).invert(),this._isFirstMatrix=!1)}getBufferGeometry(t){const e=this._webIfc.GetGeometry(0,t),n=this.getVertices(e);if(!n.length)return null;const i=this.getIndices(e);if(!i.length)return null;const r=this.constructGeometry(n,i);return e.delete(),r}getIndices(t){return this._webIfc.GetIndexArray(t.GetIndexData(),t.GetIndexDataSize())}getVertices(t){return this._webIfc.GetVertexArray(t.GetVertexData(),t.GetVertexDataSize())}constructGeometry(t,e){const n=new gc,i=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let s=0;s<t.length;s+=6)i[s/2]=t[s],i[s/2+1]=t[s+1],i[s/2+2]=t[s+2],r[s/2]=t[s+3],r[s/2+1]=t[s+4],r[s/2+2]=t[s+5];return n.setAttribute("position",new sc(i,3)),n.setAttribute("normal",new sc(r,3)),n.setIndex(new sc(e,1)),n}static getMeshMatrix(t){const e=t.flatTransformation,n=new ch;return n.fromArray(e),n}static getGeometryID(t){let e="";const n=t.geometries.size();for(let i=0;i<n;i++){e+=t.geometries.get(i).geometryExpressID}return e}}const DY={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"};class OY{getAll(t,e){const n={},i=this.getCategories();for(let r=0;r<i.length;r++){const s=i[r],o=t.GetLineIDsWithType(e,s),a=o.size();for(let t=0;t<a;t++)n[o.get(t)]=s}return n}getCategories(){const t=Object.keys(DY).map((t=>parseInt(t,10)));return t}}const NY={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"},MY=new Set([1123145078,574549367,1675464909,2059837836,3798115385,32440307,3125803723,3207858831,2740243338,2624227202,4240577450,3615266464,3724593414,220341763,477187591,1878645084,1300840506,3303107099,1607154358,1878645084,846575682,1351298697,2417041796,3049322572,3331915920,1416205885,776857604,3285139300,3958052878,2827736869,2732653382,673634403,3448662350,4142052618,2924175390,803316827,2556980723,1809719519,2205249479,807026263,3737207727,1660063152,2347385850,3940055652,2705031697,3732776249,2485617015,2611217952,1704287377,2937912522,2770003689,1281925730,1484403080,3448662350,4142052618,3800577675,4006246654,3590301190,1383045692,2775532180,2047409740,370225590,3593883385,2665983363,4124623270,812098782,3649129432,987898635,1105321065,3510044353,1635779807,2603310189,3406155212,1310608509,4261334040,2736907675,3649129432,1136057603,1260505505,4182860854,2713105998,2898889636,59481748,3749851601,3486308946,3150382593,1062206242,3264961684,15328376,1485152156,370225590,1981873012,2859738748,45288368,2614616156,2732653382,775493141,2147822146,2601014836,2629017746,1186437898,2367409068,1213902940,3632507154,3900360178,476780140,1472233963,2804161546,3008276851,738692330,374418227,315944413,3905492369,3570813810,2571569899,178912537,2294589976,1437953363,2133299955,572779678,3092502836,388784114,2624227202,1425443689,3057273783,2347385850,1682466193,2519244187,2839578677,3958567839,2513912981,2830218821,427810014]);class PY{constructor(){this.loadProgress=new yv,this.propertiesSerialized=new yv,this._progress=0}async export(t,e){const n=await this.getAllGeometriesIDs(e,t);let i={};i.coordinationMatrix=t.GetCoordinationMatrix(e);const r=await t.GetAllLines(e),s=r.size();this._progress=.1;let o=0;for(let a=0;a<s;a++){const l=r.get(a);n.has(l)||(i[l]=await t.GetLine(e,l),o++),void 0!==this.size&&o>this.size&&(this.propertiesSerialized.trigger(i),i=null,i={},o=0),a/s>this._progress&&(this.loadProgress.trigger({progress:a,total:s}),this._progress+=.1)}this.propertiesSerialized.trigger(i),i=null}async getAllGeometriesIDs(t,e){const n=new Set,i=Array.from(MY);for(let r=0;r<i.length;r++){const s=i[r],o=await e.GetLineIDsWithType(t,s),a=o.size();for(let t=0;t<a;t++)n.add(o.get(t))}return n}}class FY{constructor(){this.floorProperties=[],this.itemsByFloor={}}async setupFloors(t,e){this.reset();const n=await this.getFloors(t);for(const i of n)await this.getFloorProperties(t,i,e),this.saveFloorRelations(i)}cleanUp(){this.floorProperties=[],this.itemsByFloor={}}reset(){this.floorProperties=[],this.itemsByFloor={}}async getFloorProperties(t,e,n){const i=e.expressID,r=t.properties,s=await r.getItemProperties(0,i,!1);s.SceneHeight=await this.getHeight(s,t,r,n),this.floorProperties.push(s)}async getHeight(t,e,n,i){const r=t.ObjectPlacement.value,s=e.GetCoordinationMatrix(0)[13]*i.factor,o=await n.getItemProperties(0,r,!0);return this.getPlacementHeight(o,i)+s}getPlacementHeight(t,e){var n,i;let r=0;const s=null===(i=null===(n=t.RelativePlacement)||void 0===n?void 0:n.Location)||void 0===i?void 0:i.Coordinates;return s&&(r+=s[2].value*e.complement*e.factor),t.PlacementRelTo&&(r+=this.getPlacementHeight(t.PlacementRelTo,e)),r}saveFloorRelations(t){for(const e of t.children)if(this.itemsByFloor[e.expressID]=t.expressID,e.children.length)for(const n of e.children)this.itemsByFloor[n.expressID]=t.expressID}async getFloors(t){return(await t.properties.getSpatialStructure(0)).children[0].children[0].children}}class LY{constructor(){this.factor=1,this.complement=1}apply(t){const e=this.getScaleMatrix().multiply(t);t.copy(e)}setUp(t){var e;this.factor=1;const n=this.getLengthUnits(t);"FOOT"===n.Name.value?this.factor=.3048:"MILLI"===(null===(e=n.Prefix)||void 0===e?void 0:e.value)&&(this.complement=.001)}getLengthUnits(t){const e=t.GetLineIDsWithType(0,tA).get(0),n=t.GetLine(0,e).Units[0].value;return t.GetLine(0,n)}getScaleMatrix(){return(new ch).fromArray([this.factor,0,0,0,0,this.factor,0,0,0,0,this.factor,0,0,0,0,1])}}class kY extends Ud{constructor(){super(...arguments),this.fragments=[]}}class UY{getHelper(t){const e=new Fh;let n=0,i=0,r=0,s=0;for(const y of t){const t=y.attributes.position.array;for(let e=0;e<t.length;e+=3)n+=t[e],i+=t[e+1],r+=t[e+2],s++}s>0&&(n/=s,i/=s,r/=s);const o=new Ml(n,i,r);let a=new Ml,l=new Ml,h=new Ml,c=0,u=0,p=0,d=0,f=0,m=0,g=1e13;for(let y=0;y<15;y++){let e=new Ml;0===y&&(e=new Ml(1,0,0)),1===y&&(e=new Ml(1,0,1)),2===y&&(e=new Ml(1,1,0)),3===y&&(e=new Ml(1,1,1)),4===y&&(e=new Ml(0,1,1)),5===y&&(e=new Ml(1,0,.5)),6===y&&(e=new Ml(1,.5,0)),7===y&&(e=new Ml(1,1,.5)),8===y&&(e=new Ml(0,1,.5)),9===y&&(e=new Ml(.5,0,1)),10===y&&(e=new Ml(.5,1,0)),11===y&&(e=new Ml(.5,1,1)),12===y&&(e=new Ml(0,.5,1)),13===y&&(e=new Ml(.5,.5,1)),14===y&&(e=new Ml(1,.5,.5)),e.normalize();const n=new Ml(e.x,e.y,e.z);n.cross(new Ml(0,0,1));const i=new Ml(n.x,n.y,n.z);i.cross(e),e.normalize(),n.normalize(),i.normalize();let r=-1e10,s=-1e10,_=-1e10,v=1e10,T=1e10,E=1e10;for(const a of t){const t=a.attributes.position.array;for(let a=0;a<t.length;a+=3){const l=t[a],h=t[a+1],c=t[a+2],u=l-o.x,p=h-o.y,d=c-o.z,f=new Ml(u,p,d),m=e.dot(f),g=n.dot(f),y=i.dot(f);m>r&&(r=m),g>s&&(s=g),y>_&&(_=y),m<v&&(v=m),g<T&&(T=g),y<E&&(E=y)}}const x=r-v,I=s-T,b=_-E,w=x*I*b;w<g&&(g=w,a=e,l=n,h=i,c=x,u=I,p=b,d=(r+v)/2,f=(s+T)/2,m=(_+E)/2)}return o.x+=d*a.x,o.y+=d*a.y,o.z+=d*a.z,o.x+=f*l.x,o.y+=f*l.y,o.z+=f*l.z,o.x+=m*h.x,o.y+=m*h.y,o.z+=m*h.z,a=a.setLength(c),l=l.setLength(u),h=h.setLength(p),e.matrix=new ch,e.matrix.set(a.x,a.y,a.z,0,l.x,l.y,l.z,0,h.x,h.y,h.z,0,o.x,o.y,o.z,1),e.matrix.transpose(),e}}class BY{constructor(t,e,n){this._categories={},this._model=new kY,this._ifcCategories=new OY,this._uniqueItems={},this._units=new LY,this._boundingBoxes={},this._transparentBoundingBoxes={},this._expressIDfragmentIDMap={},this._transform=new UY,this._propertyExporter=new PY,this._spatialTree=new FY,this._items=t,this._materials=e,this._settings=n}reset(){this._model=new kY,this._uniqueItems={},this._boundingBoxes={},this._transparentBoundingBoxes={}}cleanUp(){this._spatialTree.cleanUp(),this._categories={},this._model=new kY,this._ifcCategories=new OY,this._uniqueItems={},this._units=new LY,this._propertyExporter=new PY}setupCategories(t){this._categories=this._ifcCategories.getAll(t,0)}async generateFragmentData(t){return await this._units.setUp(t),await this._spatialTree.setupFloors(t,this._units),this.processAllFragmentsData(),this.processAllUniqueItems(),await this.saveModelData(t),this._model}async saveModelData(t){this._model.boundingBoxes=this._boundingBoxes,this._model.transparentBoundingBoxes=this._transparentBoundingBoxes,this._model.expressIDFragmentIDMap=this._expressIDfragmentIDMap,this._model.levelRelationships=this._spatialTree.itemsByFloor,this._model.floorsProperties=this._spatialTree.floorProperties,this._model.allTypes=NY,this._model.itemTypes=this._categories,this._model.coordinationMatrix=this.getCoordinationMatrix(t),this._model.properties=await this.getModelProperties(t)}getCoordinationMatrix(t){const e=t.GetCoordinationMatrix(0);return(new ch).fromArray(e)}async getModelProperties(t){return this._settings.includeProperties?new Promise((e=>{this._propertyExporter.propertiesSerialized.on((t=>{e(t)})),this._propertyExporter.export(t,0)})):{}}processAllFragmentsData(){const t=Object.values(this._items);for(const e of t)this.processFragmentData(e)}processFragmentData(t){const e=t.instances[0].id,n=this._categories[e],i=1===t.instances.length,r=this._settings.instancedCategories.has(n),s=0===Object.keys(this._spatialTree.itemsByFloor).length;!i||r||s?this.processInstancedItems(t):this.processMergedItems(t)}processMergedItems(t){for(const e in t.geometriesByMaterial){const n=t.instances[0],i=this._categories[n.id],r=this._spatialTree.itemsByFloor[n.id];this.initializeItem(t,i,r,e),this.applyTransformToMergedGeometries(t,i,r,e)}}applyTransformToMergedGeometries(t,e,n,i){const r=t.geometriesByMaterial[i],s=t.instances[0];this._units.apply(s.matrix);for(const o of r)o.userData.id=s.id,this._uniqueItems[e][n][i].geoms.push(o),o.applyMatrix4(s.matrix)}initializeItem(t,e,n,i){this._uniqueItems[e]||(this._uniqueItems[e]={}),this._uniqueItems[e][n]||(this._uniqueItems[e][n]={}),this._uniqueItems[e][n][i]||(this._uniqueItems[e][n][i]={geoms:[],hasVoids:t.instances[0].hasVoids})}processInstancedItems(t){const e=this.createInstancedFragment(t);this.setFragmentInstances(t,e),e.mesh.updateMatrix(),this._model.fragments.push(e),this._model.add(e.mesh);const n=Object.keys(t.geometriesByMaterial).map((t=>this._materials[t])),i=this.areMatsTransparent(n)||t.instances[0].hasVoids,r=this.getBoxes(i),s=this._transform.getHelper([e.mesh.geometry]);for(let o=0;o<e.mesh.count;o++){const t=new ch,n=new Fh;e.getInstance(o,t),n.applyMatrix4(s.matrix),n.applyMatrix4(t),n.updateMatrix();const i=e.getItemID(o,0);r[i]=n.matrix.elements,this._expressIDfragmentIDMap[i]=e.id}}getBoxes(t){return t?this._transparentBoundingBoxes:this._boundingBoxes}areMatsTransparent(t){for(const e of t)if(e.transparent)return!0;return!1}setFragmentInstances(t,e){for(let n=0;n<t.instances.length;n++){const i=t.instances[n];this._units.apply(i.matrix),e.setInstance(n,{ids:[i.id.toString()],transform:i.matrix})}}createInstancedFragment(t){const e=this.getMaterials(t),n=Object.values(t.geometriesByMaterial),i=mI.merge(n);return new pI(i,e,t.instances.length)}getMaterials(t){const e=Object.keys(t.geometriesByMaterial).map((t=>this._materials[t]));return e}processAllUniqueItems(){const t=Object.keys(this._uniqueItems);for(const e of t)for(const t in this._uniqueItems[e]){const n=parseInt(e,10),i=parseInt(t,10);void 0!==i&&void 0!==n&&this.processUniqueItem(n,i)}}processUniqueItem(t,e){const n=this._uniqueItems[t][e];if(!n)return;const i=Object.values(n),r=i.map((t=>t.geoms)),{buffer:s,ids:o}=this.processIDsAndBuffer(r),a=this.getUniqueItemMaterial(t,e),l={};let h=!1;for(const f of i){h=h||f.hasVoids;for(const t of f.geoms){const e=t.userData.id;l[e]||(l[e]=[]),l[e].push(t)}}const c=this.areMatsTransparent(a)||h,u=this.getBoxes(c);for(const f in l){const t=l[f],e=this._transform.getHelper(t);u[f]=e.matrix.elements}const p=mI.merge(r),d=this.newMergedFragment(p,s,a,o);this._model.fragments.push(d),this._model.add(d.mesh);for(const f in l)this._expressIDfragmentIDMap[f]=d.id}newMergedFragment(t,e,n,i){t.setAttribute("blockID",new sc(e,1));const r=new pI(t,n,1),s=Array.from(i).map((t=>t.toString()));return r.setInstance(0,{ids:s,transform:new ch}),r}processBuffer(t,e){const n=new Uint32Array(e),i=this.getBufferTempData();for(const r of t)for(const t of r){this.updateBufferIDs(i,t);const e=t.attributes.position.count,r=i.currentIDs.get(t.userData.id);n.fill(r,i.offset,i.offset+e),i.offset+=e}return n}updateBufferIDs(t,e){t.currentIDs.has(e.userData.id)||t.currentIDs.set(e.userData.id,t.blockID++)}getBufferTempData(){return{currentIDs:new Map,offset:0,blockID:0}}processIDsAndBuffer(t){let e=0;const n=new Set;for(const i of t)for(const t of i)e+=t.attributes.position.count,n.add(t.userData.id);return{buffer:this.processBuffer(t,e),ids:n}}getUniqueItemMaterial(t,e){const n=Object.keys(this._uniqueItems[t][e]).map((t=>this._materials[t]));return n}}class zY{constructor(t){this.settings=new CY,this._webIfc=new AY,this._items={},this._materials={},this._geometry=new RY(this._webIfc,this._items,this._materials),this._converter=new BY(this._items,this._materials,this.settings),this._fragments=t}dispose(){this.disposeWebIfc(),this.disposeMaterials(),this.disposeItems(),this._geometry.cleanUp(),this._geometry=null,this._converter.cleanUp(),this._converter=null}async load(t){await this.initializeWebIfc();const e=await fetch(t),n=await e.arrayBuffer(),i=new Uint8Array(n);return this._webIfc.OpenModel(i,this.settings.webIfc),this.loadAllGeometry()}async initializeWebIfc(){const{path:t,absolute:e}=this.settings.wasm;this._webIfc.SetWasmPath(t,e),await this._webIfc.Init()}async loadAllGeometry(){await this.loadAllCategories();const t=await this._converter.generateFragmentData(this._webIfc);this.cleanUp();for(const e of t.fragments)this._fragments.list[e.id]=e;return t}async loadAllCategories(){this._converter.setupCategories(this._webIfc),this.loadOptionalCategories(),await this.setupVoids(),await this.loadMainCategories()}async loadMainCategories(){this._webIfc.StreamAllMeshes(0,(t=>{this._geometry.streamMesh(this._webIfc,t)}))}async setupVoids(){const t=this._webIfc.GetLineIDsWithType(0,sS),e=this._webIfc.properties,n=t.size();for(let i=0;i<n;i++){const n=(await e.getItemProperties(0,t.get(i))).RelatingBuildingElement.value;this._geometry.addVoid(n)}}loadOptionalCategories(){const t=this.settings.optionalCategories;this._webIfc.StreamAllMeshesWithTypes(0,t,(t=>{this._geometry.streamMesh(this._webIfc,t)}))}cleanUp(){this.resetWebIfc(),this._geometry.cleanUp(),this._converter.cleanUp(),this.resetObject(this._items),this.resetObject(this._materials)}resetWebIfc(){this.disposeWebIfc(),this._webIfc=new AY}resetObject(t){const e=Object.keys(t);for(const n of e)delete t[n]}disposeWebIfc(){this._webIfc=null}disposeMaterials(){for(const t in this._materials)this._materials[t].dispose()}disposeItems(){for(const t in this._items){const e=this._items[t].geometriesByMaterial;for(const t in e)for(const n of e[t])n.dispose()}}}class GY{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.components=t,this.updateInterval=e,this.rtWidth=n,this.rtHeight=i,this.autoUpdate=r,this.scene=new qd,this.fragmentsDiscovered=new yv,this.enabled=!0,this.opaqueMeshes=[],this.transparentMeshes=[],this.fragmentColorMap=new Map,this.fragmentModelMap=new Map,this.fragmentMeshMap={},this.exclusions=new Map,this.needsUpdate=!1,this.renderDebugFrame=!1,this.isFirstRenderingPass=!0,this.discoveredFragments=new Set,this.undiscoveredFragments=new Map,this.previouslyDiscoveredFragments=new Set,this.visibleExpressId=[],this._disposer=new _T,this.scaleFactor=1e-5,this.invisibleBoxes=new Set,this.colors={r:0,g:0,b:0,i:0},this.updateVisibility=t=>{if(!this.opaqueMeshes)return;if(!this.enabled)return;if(!this.needsUpdate&&!t)return;const e=this.components.camera.get();e.updateMatrix(),this.renderer.setSize(this.rtWidth,this.rtHeight),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(this.scene,e),this.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.rtWidth,this.rtHeight,this._buffer),this.worker.postMessage({buffer:this._buffer});for(const n of this.transparentMeshes)this.scene.add(n);this.renderer.render(this.scene,e),this.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.rtWidth,this.rtHeight,this._buffer),this.worker.postMessage({buffer:this._buffer}),this.renderer.setRenderTarget(null),this.renderDebugFrame&&this.isFirstRenderingPass&&this.renderer.render(this.scene,e);for(const n of this.transparentMeshes)n.removeFromParent();this.needsUpdate=!1},this.handleWorkerMessage=t=>{const e=t.data.colors,n=this.getFragmentsIDs(e);this.isFirstRenderingPass?this.renderFirstPass(n):this.renderSecondPass(n)},this.renderer=new jd;const s=this.components.renderer.get().clippingPlanes;this.renderer.clippingPlanes=s,this.renderTarget=new Dl(n,i),this.bufferSize=n*i*4,this._buffer=new Uint8Array(this.bufferSize);const o=new Blob(['\n      addEventListener("message", (event) => {\n        const { buffer } = event.data;\n        const colors = new Set();\n        for (let i = 0; i < buffer.length; i += 4) {\n            const r = buffer[i];\n            const g = buffer[i + 1];\n            const b = buffer[i + 2];\n            const code = "" + r + "-" + g + "-" + b;\n            colors.add(code);\n        }\n        postMessage({ colors });\n      });\n    '],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(o)),this.worker.addEventListener("message",this.handleWorkerMessage),r&&window.setInterval(this.updateVisibility,e)}dispose(){this.enabled=!1,this.worker.terminate(),this.fragmentsDiscovered.reset(),this.renderTarget.dispose(),this.renderer.dispose(),this.scene.children.length=0;for(const t of this.transparentMeshes)this._disposer.dispose(t);for(const t of this.opaqueMeshes)this._disposer.dispose(t);for(const t in this.fragmentMeshMap)for(const e in this.fragmentMeshMap[t]){const n=this.fragmentMeshMap[t][e].mesh;this._disposer.dispose(n)}this.fragmentMeshMap={},this.transparentMeshes=[],this.opaqueMeshes=[],this._buffer=null,this.exclusions.clear(),this.discoveredFragments.clear(),this.undiscoveredFragments.clear(),this.previouslyDiscoveredFragments.clear(),this.fragmentColorMap.clear(),this.invisibleBoxes.clear()}getNextColor(){return 0===this.colors.i&&(this.colors.b++,256===this.colors.b&&(this.colors.b=0,this.colors.i=1)),1===this.colors.i&&(this.colors.g++,this.colors.i=0,256===this.colors.g&&(this.colors.g=0,this.colors.i=2)),2===this.colors.i&&(this.colors.r++,this.colors.i=1,256===this.colors.r&&(this.colors.r=0,this.colors.i=0)),{r:this.colors.r,g:this.colors.g,b:this.colors.b,code:"".concat(this.colors.r,"-").concat(this.colors.g,"-").concat(this.colors.b)}}loadBoxes(t,e,n,i){const r=Object.values(e),s=new Lc,o=this.components.renderer.get().clippingPlanes,a=new nc({clippingPlanes:o}),l=new Df(s,a,r.length),h=new ch,c=Object.keys(e);for(let y=0;y<r.length;y++){const e=c[y],n=i[parseInt(c[y],10)];this.fragmentModelMap.set(n,t);const s=this.getNextColor();h.fromArray(r[y]),l.setMatrixAt(y,h),l.setColorAt(y,new ec("rgb(".concat(s.r,",").concat(s.g,", ").concat(s.b,")"))),void 0===this.fragmentMeshMap[n]&&(this.fragmentMeshMap[n]={}),this.fragmentMeshMap[n][e]={mesh:l,index:y},this.fragmentColorMap.set(s.code,n)}const u=Object.values(n),p=new Lc,d=new nc,f=new Df(p,d,u.length),m=new ch,g=Object.keys(n);for(let y=0;y<u.length;y++){const e=g[y],n=i[parseInt(g[y],10)],r=this.getNextColor();m.fromArray(u[y]),f.setMatrixAt(y,m),f.setColorAt(y,new ec("rgb(".concat(r.r,",").concat(r.g,", ").concat(r.b,")"))),void 0===this.fragmentMeshMap[n]&&(this.fragmentMeshMap[n]={}),this.fragmentMeshMap[n][e]={mesh:f,index:y},this.fragmentModelMap.set(n,t),this.fragmentColorMap.set(r.code,n)}this.scene.add(l),this.opaqueMeshes.push(l),this.transparentMeshes.push(f)}toggleVisibility(t,e){const n=new ch,i=this.getScaleMatrix(t);for(const r in e)for(const s of e[r]){const e=this.fragmentMeshMap[r][s];if(!e)continue;const o="".concat(r,"-").concat(e.index);!this.invisibleBoxes.has(o)!==t&&(t?this.invisibleBoxes.delete(o):this.invisibleBoxes.add(o),e.mesh.getMatrixAt(e.index,n),n.premultiply(i),e.mesh.setMatrixAt(e.index,n),e.mesh.instanceMatrix.needsUpdate=!0)}}getFragmentsIDs(t){const e=new Set;for(const n of t)if(void 0!==n){const t=this.fragmentColorMap.get(n);e.add(t)}return e}renderFirstPass(t){this.discoveredFragments.clear(),this.saveFoundFragments(t),this.isFirstRenderingPass=!1}renderSecondPass(t){this.saveFoundFragments(t);for(const n of this.previouslyDiscoveredFragments)t.has(n)||this.undiscoveredFragments.set(n,performance.now());const e={};for(const n of this.discoveredFragments)this.previouslyDiscoveredFragments.has(n)||this.saveDiscovered(n,e),this.previouslyDiscoveredFragments.add(n);for(const n of t)this.undiscoveredFragments.delete(n);this.fragmentsDiscovered.trigger(e),this.isFirstRenderingPass=!0}saveDiscovered(t,e){const n=this.fragmentModelMap.get(t);if(!n)throw new Error("Error when getting model of fragment");e[n]||(e[n]=[]),e[n].push(t)}saveFoundFragments(t){for(const e of t)void 0!==e&&this.discoveredFragments.add(e)}getScaleMatrix(t){const e=(new ch).fromArray([this.scaleFactor,0,0,0,0,this.scaleFactor,0,0,0,0,this.scaleFactor,0,0,0,0,1]);return t||e.invert(),e}}class HY{constructor(t){this.fragments=t,this.height=10,this.groupName="",this.enabled=!1,this.initialized=!1,this.explodedFragments=new Set}dispose(){this.explodedFragments.clear()}explode(){this.initialized=!0,this.enabled=!0,this.update()}reset(){this.initialized=!0,this.enabled=!1,this.update()}update(){if(!this.initialized)return;const t=this.enabled?1:-1;let e=0;const n=this.fragments.groups.groupSystems[this.groupName];for(const i in n){for(const r in n[i]){const s=this.fragments.list[r],o=i+r;if(!s)continue;if(this.enabled&&this.explodedFragments.has(o))continue;if(!this.enabled&&!this.explodedFragments.has(o))continue;this.enabled?this.explodedFragments.add(o):this.explodedFragments.delete(o);const a=this.getOffsetY(e*t);if(1===s.blocks.count){const t=n[i][r];for(const e of t){const t=new ch,{instanceID:n}=s.getInstanceAndBlockID(e);s.getInstance(n,t),t.premultiply(a),s.setInstance(n,{transform:t,ids:[e]}),this.updateMemoryCulling(r,e,a)}}else{const t=new ch;s.getInstance(0,t),t.premultiply(a),s.setInstance(0,{transform:t,ids:s.items});for(const e of s.items)this.updateMemoryCulling(r,e,a)}s.mesh.instanceMatrix.needsUpdate=!0}e++}}updateMemoryCulling(t,e,n){const i=new ch,r=this.fragments.memoryCuller.fragmentMeshMap[t];if(!r)return;const s=r[e];s&&(s.mesh.getMatrixAt(s.index,i),i.premultiply(n),s.mesh.setMatrixAt(s.index,i),s.mesh.instanceMatrix.needsUpdate=!0)}getOffsetY(t){return(new ch).fromArray([1,0,0,0,0,1,0,0,0,0,1,0,0,t*this.height,0,1])}}class VY extends hT{constructor(t){super(),this.components=t,this.name="Fragments",this.enabled=!0,this.list={},this.ifcLoader=new zY(this),this.groups=new vI(this),this.properties=new xI,this.tree=new II(this.properties),this._loader=new gI,this.highlighter=new yI(t,this),this.exploder=new HY(this),this.edges=new TI(t),this.materials=new EI(this),this.culler=new _I(t,this),this.memoryCuller=new GY(t)}get(){return Object.values(this.list)}get meshes(){const t=[];for(const e in this.list)t.push(this.list[e].mesh);return t}dispose(){this.disposeFragmentList(),this.ifcLoader.dispose(),this.groups.dispose(),this.properties.dispose(),this.highlighter.dispose(),this.edges.dispose(),this.exploder.dispose(),this.materials.dispose(),this.culler.dispose(),this.memoryCuller.dispose()}async load(t,e){const n=await this._loader.load(t,e);this.list[n.id]=n,this.culler.add(n);return this.components.scene.get().add(n.mesh),this.components.meshes.push(n.mesh),n}disposeFragmentList(){for(const t in this.list){const e=this.list[t];this.removeFragmentMesh(e),e.dispose(!0)}this.list={}}removeFragmentMesh(t){const e=this.components.meshes,n=t.mesh;e.includes(n)&&e.splice(e.indexOf(n),1)}}class jY{constructor(t,e){this.components=t,this._previousDistance=-1,this._camera=e;const n="Perspective";this._currentCamera=e.get(n),this._currentProjection=n}get projection(){return this._currentProjection}async setProjection(t){this.projection!==t&&("Orthographic"===t?this.setOrthoCamera():await this.setPerspectiveCamera(),await this.updateActiveCamera())}setOrthoCamera(){if("FirstPerson"===this._camera.currentMode.id)return;this._previousDistance=this._camera.controls.distance,this._camera.controls.distance=200;const{width:t,height:e}=this.getDims();this.setupOrthoCamera(e,t),this._currentCamera=this._camera.get("Orthographic"),this._currentProjection="Orthographic"}async updateActiveCamera(){await new Promise((t=>{setTimeout((()=>{this._camera.activeCamera=this._currentCamera,t()}),50)}))}getDims(){const t=new Ml;this._camera.get("Perspective").getWorldDirection(t);const e=new Ml;this._camera.controls.getTarget(e);const n=e.clone().sub(this._camera.get("Perspective").position).dot(t),i=this.components.renderer.getSize(),r=i.x/i.y,s=this._camera.get("Perspective"),o=2*n*Math.atan(s.fov*(Math.PI/180)/2);return{width:o*r,height:o}}setupOrthoCamera(t,e){this._camera.controls.mouseButtons.wheel=lT.ACTION.ZOOM;const n=this._camera.get("Perspective"),i=this._camera.get("Orthographic");i.zoom=1,i.left=e/-2,i.right=e/2,i.top=t/2,i.bottom=t/-2,i.updateProjectionMatrix(),i.position.copy(n.position),i.quaternion.copy(n.quaternion),this._camera.controls.camera=i}async setPerspectiveCamera(){this._camera.controls.mouseButtons.wheel=lT.ACTION.DOLLY;const t=this._camera.get("Perspective"),e=this._camera.get("Orthographic");t.position.copy(e.position),t.quaternion.copy(e.quaternion),this._camera.controls.mouseButtons.wheel=lT.ACTION.DOLLY,this._camera.controls.distance=this._previousDistance,await this._camera.controls.zoomTo(1),t.updateProjectionMatrix(),this._camera.controls.camera=t,this._currentCamera=t,this._currentProjection="Perspective"}}class WY{constructor(t){this.camera=t,this.enabled=!0,this.id="Orbit",this.projectionChanged=new yv,this.activateOrbitControls()}toggle(t){this.enabled=t,t&&this.activateOrbitControls()}activateOrbitControls(){const t=this.camera.controls;t.minDistance=1,t.maxDistance=300,t.truckSpeed=2}}class YY{constructor(t){this.camera=t,this.enabled=!1,this.id="Plan",this.projectionChanged=new yv,this.mouseInitialized=!1,this.defaultAzimuthSpeed=t.controls.azimuthRotateSpeed,this.defaultPolarSpeed=t.controls.polarRotateSpeed}toggle(t){this.enabled=t;const e=this.camera.controls;e.azimuthRotateSpeed=t?0:this.defaultAzimuthSpeed,e.polarRotateSpeed=t?0:this.defaultPolarSpeed,this.mouseInitialized||(this.mouseAction1=e.touches.one,this.mouseAction2=e.touches.two,this.mouseInitialized=!0),t?(e.mouseButtons.left=lT.ACTION.TRUCK,e.touches.one=lT.ACTION.TOUCH_TRUCK,e.touches.two=lT.ACTION.TOUCH_ZOOM):(e.mouseButtons.left=lT.ACTION.ROTATE,e.touches.one=this.mouseAction1,e.touches.two=this.mouseAction2)}}class qY{constructor(t){this.camera=t,this.enabled=!1,this.id="FirstPerson",this.projectionChanged=new yv}toggle(t){if(this.enabled=t,t){if("Perspective"!==this.camera.getProjection())return void this.camera.setNavigationMode("Orbit");this.setupFirstPersonCamera()}}setupFirstPersonCamera(){const t=this.camera.controls,e=new Ml;t.camera.getWorldPosition(e);const n=new Ml;t.distance--,t.camera.getWorldPosition(n),t.minDistance=1,t.maxDistance=1,t.distance=1,t.moveTo(n.x,n.y,n.z),t.truckSpeed=50,t.mouseButtons.wheel=lT.ACTION.DOLLY,t.touches.two=lT.ACTION.TOUCH_ZOOM_TRUCK}}class XY extends cT{constructor(t){super(t),this.projectionChanged=new yv,this._userInputButtons={},this._frustumSize=50,this._navigationModes=new Map,this._orthoCamera=this.newOrthoCamera(),this._navigationModes.set("Orbit",new WY(this)),this._navigationModes.set("FirstPerson",new qY(this)),this._navigationModes.set("Plan",new YY(this)),this.currentMode=this._navigationModes.get("Orbit"),this.currentMode.toggle(!0,{preventTargetAdjustment:!0}),this.toggleEvents(!0),this._projectionManager=new jY(t,this)}dispose(){super.dispose(),this.toggleEvents(!1),this._orthoCamera.removeFromParent()}get(t){return t?"Orthographic"===t?this._orthoCamera:this._perspectiveCamera:this.activeCamera}getProjection(){return this._projectionManager.projection}async toggleProjection(){const t="Perspective"===this.getProjection()?"Orthographic":"Perspective";await this.setProjection(t)}async setProjection(t){await this._projectionManager.setProjection(t),this.projectionChanged.trigger(this.activeCamera)}toggleUserInput(t){t?this.enableUserInput():this.disableUserInput()}setNavigationMode(t){if(this.currentMode.id!==t){if(this.currentMode.toggle(!1),!this._navigationModes.has(t))throw new Error("The specified mode does not exist!");this.currentMode=this._navigationModes.get(t),this.currentMode.toggle(!0)}}updateAspect(){super.updateAspect(),this.setOrthoCameraAspect()}async fitModelToFrame(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.components.meshes;if(!this.enabled)return;const e=this.components.scene.get();console.log(e);const n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=new Ml(n,n,n),s=new Ml(i,i,i);for(const u of t){const t=(new Ll).setFromObject(u);t.min.x<r.x&&(r.x=t.min.x),t.min.y<r.y&&(r.y=t.min.y),t.min.z<r.z&&(r.z=t.min.z),t.max.x>s.x&&(s.x=t.max.x),t.max.y>s.y&&(s.y=t.max.y),t.max.z>s.z&&(s.z=t.max.z)}const o=new Ll(r,s),a=new Ml;o.getSize(a);const l=new Ml;o.getCenter(l);const h=.5*Math.max(a.x,a.y,a.z),c=new eh(l,h);await this.controls.fitToSphere(c,!0)}disableUserInput(){this._userInputButtons.left=this.controls.mouseButtons.left,this._userInputButtons.right=this.controls.mouseButtons.right,this._userInputButtons.middle=this.controls.mouseButtons.middle,this._userInputButtons.wheel=this.controls.mouseButtons.wheel,this.controls.mouseButtons.left=0,this.controls.mouseButtons.right=0,this.controls.mouseButtons.middle=0,this.controls.mouseButtons.wheel=0}enableUserInput(){0!==Object.keys(this._userInputButtons).length&&(this.controls.mouseButtons.left=this._userInputButtons.left,this.controls.mouseButtons.right=this._userInputButtons.right,this.controls.mouseButtons.middle=this._userInputButtons.middle,this.controls.mouseButtons.wheel=this._userInputButtons.wheel)}newOrthoCamera(){const t=this.components.renderer.getSize(),e=t.x/t.y;return new pu(this._frustumSize*e/-2,this._frustumSize*e/2,this._frustumSize/2,this._frustumSize/-2,.1,1e3)}setOrthoCameraAspect(){const t=this.components.renderer.getSize(),e=t.x/t.y;this._orthoCamera.left=-this._frustumSize*e/2,this._orthoCamera.right=this._frustumSize*e/2,this._orthoCamera.top=this._frustumSize/2,this._orthoCamera.bottom=-this._frustumSize/2,this._orthoCamera.updateProjectionMatrix()}toggleEvents(t){const e=Object.values(this._navigationModes);for(const n of e)t?n.projectionChanged.on(this.projectionChanged.trigger):n.projectionChanged.reset()}}const ZY=new Ll,KY=new Ml;class QY extends ay{constructor(){super(),this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new lc([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new lc([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(t){const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),n.applyMatrix4(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new Ry(e,6,1);return this.setAttribute("instanceStart",new Kd(n,3,0)),this.setAttribute("instanceEnd",new Kd(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new Ry(e,6,1);return this.setAttribute("instanceColorStart",new Kd(n,3,0)),this.setAttribute("instanceColorEnd",new Kd(n,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new og(t.geometry)),this}fromLineSegments(t){const e=t.geometry;if(!e.isGeometry)return e.isBufferGeometry&&this.setPositions(e.attributes.position.array),this;console.error("THREE.LineSegmentsGeometry no longer supports Geometry. Use THREE.BufferGeometry instead.")}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ll);const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),ZY.setFromBufferAttribute(e),this.boundingBox.union(ZY))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new eh),null===this.boundingBox&&this.computeBoundingBox();const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let r=0,s=t.count;r<s;r++)KY.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(KY)),KY.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(KY));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}QY.prototype.isLineSegmentsGeometry=!0,ru.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new vl(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},su.line={uniforms:Bc.merge([ru.common,ru.fog,ru.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 offset;\n\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t}\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t#endif\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t// set the world position\n\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segements overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class JY extends zc{constructor(t){super({type:"LineMaterial",uniforms:Bc.clone(su.line.uniforms),vertexShader:su.line.vertexShader,fragmentShader:su.line.fragmentShader,clipping:!0}),Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){!0===t?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===t?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===t?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}JY.prototype.isLineMaterial=!0;const $Y=new Ml,tq=new Ml,eq=new Rl,nq=new Rl,iq=new Rl,rq=new Ml,sq=new ch,oq=new Uy,aq=new Ml,lq=new Ll,hq=new eh,cq=new Rl;function uq(t,e,n,i){return cq.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),cq.multiplyScalar(1/cq.w),cq.x=n/i.width,cq.y=n/i.height,cq.applyMatrix4(t.projectionMatrixInverse),cq.multiplyScalar(1/cq.w),Math.abs(Math.max(cq.x,cq.y))}class pq extends Pc{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new QY,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new JY({color:16777215*Math.random()})),this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,e=t.attributes.instanceStart,n=t.attributes.instanceEnd,i=new Float32Array(2*e.count);for(let s=0,o=0,a=e.count;s<a;s++,o+=2)$Y.fromBufferAttribute(e,s),tq.fromBufferAttribute(n,s),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+$Y.distanceTo(tq);const r=new Ry(i,2,1);return t.setAttribute("instanceDistanceStart",new Kd(r,1,0)),t.setAttribute("instanceDistanceEnd",new Kd(r,1,1)),this}raycast(t,e){null===t.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');const n=void 0!==t.params.Line2&&t.params.Line2.threshold||0,i=t.ray,r=t.camera,s=r.projectionMatrix,o=this.matrixWorld,a=this.geometry,l=this.material,h=l.resolution,c=l.linewidth+n,u=a.attributes.instanceStart,p=a.attributes.instanceEnd,d=-r.near;null===a.boundingSphere&&a.computeBoundingSphere(),hq.copy(a.boundingSphere).applyMatrix4(o);const f=uq(r,Math.max(r.near,hq.distanceToPoint(i.origin)),c,h);if(hq.radius+=f,!1===t.ray.intersectsSphere(hq))return;null===a.boundingBox&&a.computeBoundingBox(),lq.copy(a.boundingBox).applyMatrix4(o);const m=uq(r,Math.max(r.near,lq.distanceToPoint(i.origin)),c,h);if(lq.max.x+=m,lq.max.y+=m,lq.max.z+=m,lq.min.x-=m,lq.min.y-=m,lq.min.z-=m,!1!==t.ray.intersectsBox(lq)){i.at(1,iq),iq.w=1,iq.applyMatrix4(r.matrixWorldInverse),iq.applyMatrix4(s),iq.multiplyScalar(1/iq.w),iq.x*=h.x/2,iq.y*=h.y/2,iq.z=0,rq.copy(iq),sq.multiplyMatrices(r.matrixWorldInverse,o);for(let t=0,n=u.count;t<n;t++){if(eq.fromBufferAttribute(u,t),nq.fromBufferAttribute(p,t),eq.w=1,nq.w=1,eq.applyMatrix4(sq),nq.applyMatrix4(sq),eq.z>d&&nq.z>d)continue;if(eq.z>d){const t=eq.z-nq.z,e=(eq.z-d)/t;eq.lerp(nq,e)}else if(nq.z>d){const t=nq.z-eq.z,e=(nq.z-d)/t;nq.lerp(eq,e)}eq.applyMatrix4(s),nq.applyMatrix4(s),eq.multiplyScalar(1/eq.w),nq.multiplyScalar(1/nq.w),eq.x*=h.x/2,eq.y*=h.y/2,nq.x*=h.x/2,nq.y*=h.y/2,oq.start.copy(eq),oq.start.z=0,oq.end.copy(nq),oq.end.z=0;const n=oq.closestPointToPointParameter(rq,!0);oq.at(n,aq);const r=_l.lerp(eq.z,nq.z,n),a=r>=-1&&r<=1,l=rq.distanceTo(aq)<.5*c;if(a&&l){oq.start.fromBufferAttribute(u,t),oq.end.fromBufferAttribute(p,t),oq.start.applyMatrix4(o),oq.end.applyMatrix4(o);const n=new Ml,r=new Ml;i.distanceSqToSegment(oq.start,oq.end,r,n),e.push({point:r,pointOnLine:n,distance:i.origin.distanceTo(r),object:this,face:null,faceIndex:t,uv:null,uv2:null})}}}}}pq.prototype.isLineSegments2=!0;class dq extends hT{constructor(t,e,n){super(),this.name="ClippingEdges",this.enabled=!0,this._edges={},this._disposer=new _T,this._visible=!0,this._inverseMatrix=new ch,this._localPlane=new Kc,this._tempLine=new Uy,this._tempVector=new Ml,this.afterUpdate=new yv,this.beforeUpdate=new yv,this._components=t,this._plane=e,this._styles=n}get visible(){return this._visible}set visible(t){this._visible=t;const e=Object.keys(this._edges);for(const n of e)this.updateEdgesVisibility(n,t);t&&this.update()}update(){const t=Object.values(this._styles.get());for(const e of t)this.drawEdges(e.name)}get(){return this._edges}dispose(){const t=Object.values(this._edges);for(const e of t)this._disposer.disposeGeometry(e.generatorGeometry),this._disposer.dispose(e.mesh,!1);dq._basicEdges.removeFromParent(),dq._basicEdges.geometry.dispose(),dq._basicEdges=new zf}static newGeneratorGeometry(){const t=new gc,e=new Float32Array(3e5),n=new sc(e,3,!1);return n.setUsage(rl),t.setAttribute("position",n),t}newThickEdges(t){const e=this._styles.get()[t].material,n=new QY,i=new pq(n,e);return i.material.polygonOffset=!0,i.material.polygonOffsetFactor=-2,i.material.polygonOffsetUnits=1,i.renderOrder=3,i}drawEdges(t){const e=this._styles.get()[t];this._edges[t]||this.initializeStyle(t);const n=this._edges[t];let i=0;const r=n.generatorGeometry.attributes.position;r.array.fill(0);if(e.meshes.filter((t=>t.geometry)).forEach((t=>{if(!t.geometry.boundsTree)throw new Error("Boundstree not found for clipping edges subset.");const e=t;if(e.count>1)for(let n=0;n<e.count;n++){const s=new Pc(t.geometry);s.matrix.copy(t.matrix);const o=new ch;e.getMatrixAt(n,o),s.applyMatrix4(o),s.updateMatrix(),s.updateMatrixWorld(),this._inverseMatrix.copy(s.matrixWorld).invert(),this._localPlane.copy(this._plane).applyMatrix4(this._inverseMatrix),i=this.shapecast(s,r,i)}else this._inverseMatrix.copy(t.matrixWorld).invert(),this._localPlane.copy(this._plane).applyMatrix4(this._inverseMatrix),i=this.shapecast(t,r,i)})),n.mesh.geometry.setDrawRange(0,i),n.mesh.position.copy(this._plane.normal).multiplyScalar(1e-4),r.needsUpdate=!0,!Number.isNaN(n.generatorGeometry.attributes.position.array[0])){dq._basicEdges.geometry=n.generatorGeometry,n.mesh.geometry.fromLineSegments(dq._basicEdges);this._components.scene.get().add(n.mesh)}}initializeStyle(t){this._edges[t]={name:t,generatorGeometry:dq.newGeneratorGeometry(),mesh:this.newThickEdges(t)}}shapecast(t,e,n){return t.geometry.boundsTree.shapecast({intersectsBounds:t=>this._localPlane.intersectsBox(t),intersectsTriangle:i=>{let r=0;if(this._tempLine.start.copy(i.a),this._tempLine.end.copy(i.b),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const i=this._tempVector.applyMatrix4(t.matrixWorld);e.setXYZ(n,i.x,i.y,i.z),r++,n++}if(this._tempLine.start.copy(i.b),this._tempLine.end.copy(i.c),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const i=this._tempVector.applyMatrix4(t.matrixWorld);e.setXYZ(n,i.x,i.y,i.z),r++,n++}if(this._tempLine.start.copy(i.c),this._tempLine.end.copy(i.a),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const i=this._tempVector.applyMatrix4(t.matrixWorld);e.setXYZ(n,i.x,i.y,i.z),r++,n++}2!==r&&(n-=r)}}),n}updateEdgesVisibility(t,e){const n=this._edges[t];if(n.mesh.visible=e,e){this._components.scene.get().add(n.mesh)}else n.mesh.removeFromParent()}}dq._basicEdges=new zf;class fq extends oE{constructor(t,e,n,i,r,s,o){super(t,e,n,i,r,s),this.edges=new dq(t,this._plane,o)}set enabled(t){super.enabled=t,this.edges.visible=t}dispose(){super.dispose(),this.edges.dispose()}update(){super.update(),this.edges.update()}}class mq extends hT{constructor(t){super(),this.components=t,this.name="EdgesStyles",this.enabled=!0,this._styles={},this._defaultMaterial=new JY({color:0,linewidth:.001}),this.afterUpdate=new yv,this.beforeUpdate=new yv}get(){return this._styles}update(t){this.beforeUpdate.trigger(this._styles),this.afterUpdate.trigger(this._styles)}async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._defaultMaterial;for(const r of e)r.geometry.boundsTree||r.geometry.computeBoundsTree();const i=this.components.renderer.get();n.clippingPlanes=i.clippingPlanes,this._styles[t]={name:t,material:n,meshes:e}}dispose(){const t=Object.values(this._styles);for(const e of t)e.meshes.length=0,e.material.dispose();this._styles={}}}class gq extends AT{constructor(t,e){super(t,e),this.name="EdgesClipper",this.styles=new mq(t)}dispose(){super.dispose(),this.styles.dispose()}updateEdges(){if(this.enabled)for(const t of this._planes)t.update()}newPlaneInstance(t,e,n){return new this.PlaneType(this.components,t,e,this.size,this._material,n,this.styles)}}var yq={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class _q{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const vq=new pu(-1,1,1,-1,0,1),Tq=new gc;Tq.setAttribute("position",new lc([-1,3,0,-1,-1,0,3,-1,0],3)),Tq.setAttribute("uv",new lc([0,2,0,0,2,0],2));class Eq{constructor(t){this._mesh=new Pc(Tq,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,vq)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}new pu(-1,1,1,-1,0,1);const xq=new gc;xq.setAttribute("position",new lc([-1,3,0,-1,-1,0,3,-1,0],3)),xq.setAttribute("uv",new lc([0,2,0,0,2,0],2));const Iq={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new vl(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new ch},cameraInverseProjectionMatrix:{value:new ch},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\t#if DIFFUSE_TEXTURE == 1\n\t\tuniform sampler2D tDiffuse;\n\t\t#endif\n\n\t\tuniform sampler2D tDepth;\n\n\t\t#if NORMAL_TEXTURE == 1\n\t\tuniform sampler2D tNormal;\n\t\t#endif\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float scale;\n\t\tuniform float intensity;\n\t\tuniform float bias;\n\t\tuniform float kernelRadius;\n\t\tuniform float minResolution;\n\t\tuniform vec2 size;\n\t\tuniform float randomSeed;\n\n\t\t// RGBA depth\n\n\t\t#include <packing>\n\n\t\tvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t\t\t#if DIFFUSE_TEXTURE == 1\n\t\t\treturn texture2D( tDiffuse, vUv );\n\t\t\t#else\n\t\t\treturn vec4( 1.0 );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\t\t\t#if NORMAL_TEXTURE == 1\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\t\t\t#else\n\t\t\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat scaleDividedByCameraFar;\n\t\tfloat minResolutionMultipliedByCameraFar;\n\n\t\tfloat getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n\t\t\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\t\t\tfloat viewDistance = length( viewDelta );\n\t\t\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n\n\t\t\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\n\t\t}\n\n\t\t// moving costly divides into consts\n\t\tconst float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\tconst float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\tfloat getAmbientOcclusion( const in vec3 centerViewPosition ) {\n\t\t\t// precompute some variables require in getOcclusion.\n\t\t\tscaleDividedByCameraFar = scale / cameraFar;\n\t\t\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\n\t\t\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\n\n\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\tfloat angle = rand( vUv + randomSeed ) * PI2;\n\t\t\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\n\t\t\tvec2 radiusStep = radius;\n\n\t\t\tfloat occlusionSum = 0.0;\n\t\t\tfloat weightSum = 0.0;\n\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\n\t\t\t\tradius += radiusStep;\n\t\t\t\tangle += ANGLE_STEP;\n\n\t\t\t\tfloat sampleDepth = getDepth( sampleUv );\n\t\t\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfloat sampleViewZ = getViewZ( sampleDepth );\n\t\t\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\n\t\t\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n\t\t\t\tweightSum += 1.0;\n\t\t\t}\n\n\t\t\tif( weightSum == 0.0 ) discard;\n\n\t\t\treturn occlusionSum * ( intensity / weightSum );\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat centerDepth = getDepth( vUv );\n\t\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\t\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\n\t\t\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\n\t\t\tgl_FragColor = getDefaultColor( vUv );\n\t\t\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n\t\t}"},bq={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new vl(512,512)},sampleUvOffsets:{value:[new vl(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"\n\n\t\t#include <common>\n\n\t\tuniform vec2 size;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tvInvSize = 1.0 / size;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float depthCutoff;\n\n\t\tuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\n\t\tuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = -getViewZ( depth );\n\t\t\tbool rBreak = false, lBreak = false;\n\n\t\t\tfloat weightSum = sampleWeights[0];\n\t\t\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\n\t\t\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\tfloat sampleWeight = sampleWeights[i];\n\t\t\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\n\t\t\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\t\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\n\t\t\t\tif( ! rBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t\tsampleUv = vUv - sampleUvOffset;\n\t\t\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\n\t\t\t\tif( ! lBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = diffuseSum / weightSum;\n\t\t}"},wq={createSampleWeights:function(t,e){const n=[];for(let i=0;i<=t;i++)n.push(Sq(i,e));return n},createSampleOffsets:function(t,e){const n=[];for(let i=0;i<=t;i++)n.push(e.clone().multiplyScalar(i));return n},configure:function(t,e,n,i){t.defines.KERNEL_RADIUS=e,t.uniforms.sampleUvOffsets.value=wq.createSampleOffsets(e,i),t.uniforms.sampleWeights.value=wq.createSampleWeights(e,n),t.needsUpdate=!0}};function Sq(t,e){return Math.exp(-t*t/(e*e*2))/(Math.sqrt(2*Math.PI)*e)}const Aq={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\n\t\t\tgl_FragColor = vec4( vec3( depth ), opacity );\n\n\t\t}"};class Cq extends _q{constructor(t,e){let n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new vl(256,256);super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=i,this.supportsNormalTexture=r,this.originalClearColor=new ec,this._oldClearColor=new ec,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new vl(s.x,s.y),this.saoRenderTarget=new Dl(this.resolution.x,this.resolution.y,{minFilter:bo,magFilter:bo,format:Go}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new Dl(this.resolution.x,this.resolution.y,{minFilter:Eo,magFilter:Eo,format:Go}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension&&(n=new Gd,n.type=Do,this.beautyRenderTarget.depthTexture=n,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new Rd,this.depthMaterial.depthPacking=$a,this.depthMaterial.blending=Ss,this.normalMaterial=new dg,this.normalMaterial.blending=Ss,void 0===Iq&&console.error("THREE.SAOPass relies on SAOShader"),this.saoMaterial=new zc({defines:Object.assign({},Iq.defines),fragmentShader:Iq.fragmentShader,vertexShader:Iq.vertexShader,uniforms:Bc.clone(Iq.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=Ss,void 0===bq&&console.error("THREE.SAOPass relies on DepthLimitedBlurShader"),this.vBlurMaterial=new zc({uniforms:Bc.clone(bq.uniforms),defines:Object.assign({},bq.defines),vertexShader:bq.vertexShader,fragmentShader:bq.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=Ss,this.hBlurMaterial=new zc({uniforms:Bc.clone(bq.uniforms),defines:Object.assign({},bq.defines),vertexShader:bq.vertexShader,fragmentShader:bq.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=Ss,void 0===yq&&console.error("THREE.SAOPass relies on CopyShader"),this.materialCopy=new zc({uniforms:Bc.clone(yq.uniforms),vertexShader:yq.vertexShader,fragmentShader:yq.fragmentShader,blending:Ss}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=Os,this.materialCopy.blendSrc=Ws,this.materialCopy.blendDst=ks,this.materialCopy.blendEquation=Ns,this.materialCopy.blendSrcAlpha=Vs,this.materialCopy.blendDstAlpha=ks,this.materialCopy.blendEquationAlpha=Ns,void 0===Aq&&console.error("THREE.SAOPass relies on UnpackDepthRGBAShader"),this.depthCopy=new zc({uniforms:Bc.clone(Aq.uniforms),vertexShader:Aq.vertexShader,fragmentShader:Aq.fragmentShader,blending:Ss}),this.fsQuad=new Eq(null)}render(t,e,n){if(this.renderToScreen&&(this.materialCopy.blending=Ss,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(t,this.materialCopy,null)),1===this.params.output)return;t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const i=t.autoClear;t.autoClear=!1,t.setRenderTarget(this.depthRenderTarget),t.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const r=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=r,this.hBlurMaterial.uniforms.depthCutoff.value=r,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(wq.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new vl(0,1)),wq.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new vl(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),t.setClearColor(0),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(t,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(t,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(t,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(t,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let s=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,s=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?s.blending=Os:s.blending=Ss,this.renderPass(t,s,this.renderToScreen?null:n),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=i}renderPass(t,e,n,i,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,void 0!==i&&null!==i&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}renderOverride(t,e,n,i,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,i=e.clearColor||i,r=e.clearAlpha||r,void 0!==i&&null!==i&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}setSize(t,e){this.beautyRenderTarget.setSize(t,e),this.saoRenderTarget.setSize(t,e),this.blurIntermediateRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.depthRenderTarget.setSize(t,e),this.saoMaterial.uniforms.size.value.set(t,e),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(t,e),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(t,e),this.hBlurMaterial.needsUpdate=!0}}Cq.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4};new vl(1/1024,1/512);class Rq extends hT{constructor(t,e){super(),this.clipper=t,this.camera=e,this.name="PlanNavigator",this.enabled=!1,this.defaultSectionOffset=1.5,this.defaultCameraOffset=30,this.storeys=[],this.plans={},this.floorPlanViewCached=!1,this.previousCamera=new Ml,this.previousTarget=new Ml,this.previousProjection="Perspective"}get(){return this.plans}dispose(){this.storeys=[],this.plans={},this.clipper.dispose()}async create(t){if(this.plans[t.id])throw new Error("There's already a plan with the id: ".concat(t.id));this.plans[t.id]=t,await this.createClippingPlane(t)}async goTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;(null===(n=this.currentPlan)||void 0===n?void 0:n.id)!==t&&(this.storeCameraPosition(),this.hidePreviousClippingPlane(),this.updateCurrentPlan(t),this.activateCurrentPlan(),this.enabled||(await this.moveCameraTo2DPlanPosition(e),this.enabled=!0))}async exitPlanView(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.enabled&&(this.enabled=!1,this.cacheFloorplanView(),this.camera.setNavigationMode("Orbit"),await this.camera.setProjection(this.previousProjection),this.currentPlan&&this.currentPlan.plane&&(this.currentPlan.plane.enabled=!1),this.currentPlan=void 0,await this.camera.controls.setLookAt(this.previousCamera.x,this.previousCamera.y,this.previousCamera.z,this.previousTarget.x,this.previousTarget.y,this.previousTarget.z,t))}storeCameraPosition(){this.enabled?this.cacheFloorplanView():this.store3dCameraPosition()}async createClippingPlane(t){const{normal:e,point:n}=t,i=this.clipper.createFromNormalAndCoplanarPoint(e,n,!0);i.enabled=!1,this.plans[t.id].plane=i,await i.edges.update(),i.edges.visible=!1}cacheFloorplanView(){this.floorPlanViewCached=!0,this.camera.controls.saveState()}async moveCameraTo2DPlanPosition(t){this.floorPlanViewCached?await this.camera.controls.reset(t):await this.camera.controls.setLookAt(0,100,0,0,0,0,t)}activateCurrentPlan(){if(!this.currentPlan)throw new Error("Current plan is not defined.");this.currentPlan.plane&&(this.currentPlan.plane.enabled=!0),this.camera.setNavigationMode("Plan");const t=this.currentPlan.ortho?"Orthographic":"Perspective";this.camera.setProjection(t)}store3dCameraPosition(){this.camera.get().getWorldPosition(this.previousCamera),this.camera.controls.getTarget(this.previousTarget),this.previousProjection=this.camera.getProjection()}updateCurrentPlan(t){if(!this.plans[t])throw new Error("The specified plan is undefined!");this.currentPlan=this.plans[t]}hidePreviousClippingPlane(){var t;const e=null===(t=this.currentPlan)||void 0===t?void 0:t.plane;e&&(e.enabled=!1)}}class Dq extends bT{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ml(Math.PI/2,0,0);super(),this.name="MapboxRenderer",this.enabled=!0,this.beforeUpdate=new yv,this.afterUpdate=new yv,this.initialized=new yv,this._labelRenderer=new yT,this._renderer=new jd,this._initError="Mapbox scene isn't initialized yet!",this.updateLabelRendererSize=()=>{var t;(null===(t=this._renderer)||void 0===t?void 0:t.domElement)&&this._labelRenderer.setSize(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)},this._components=t,this._map=e,this._modelTransform=this.newModelTransform(n,i),this.setupMap(e),this.setup3DBuildings()}get(){return this._renderer}getSize(){if(!this._renderer)throw new Error(this._initError);return new vl(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)}resize(){}dispose(){this.enabled=!1,window.removeEventListener("resize",this.updateLabelRendererSize),this._renderer.dispose(),this._map.remove(),this._map=null}initialize(t){const e=new jd({canvas:this._map.getCanvas(),context:t,antialias:!0});this._renderer=e,this._renderer.autoClear=!1,this.initializeLabelRenderer(),this.initialized.trigger(e)}setupMap(t){const e=this._components.scene.get(),n=this.newMapboxLayer(((t,e)=>this.initialize(e)),((t,n)=>this.render(e,n)));t.on("style.load",(()=>{t.addLayer(n,"waterway-label")}))}newMapboxLayer(t,e){return{id:"3d-model",type:"custom",renderingMode:"3d",onAdd:t,render:e}}newModelTransform(t,e){return{translateX:t.x,translateY:t.y,translateZ:t.z,rotateX:e.x,rotateY:e.y,rotateZ:e.z,scale:t.meterInMercatorCoordinateUnits()}}render(t,e){if(!this._renderer||!this.enabled)return;this.beforeUpdate.trigger(this);const n=(new ch).makeRotationAxis(new Ml(1,0,0),this._modelTransform.rotateX),i=(new ch).makeRotationAxis(new Ml(0,1,0),this._modelTransform.rotateY),r=(new ch).makeRotationAxis(new Ml(0,0,1),this._modelTransform.rotateZ),s=(new ch).fromArray(e),o=(new ch).makeTranslation(this._modelTransform.translateX,this._modelTransform.translateY,this._modelTransform.translateZ).scale(new Ml(this._modelTransform.scale,-this._modelTransform.scale,this._modelTransform.scale)).multiply(n).multiply(i).multiply(r),a=this._components.camera.get();a.projectionMatrix=s.multiply(o),this._renderer.resetState(),this._renderer.render(t,a),this._labelRenderer.render(t,a),this._map.triggerRepaint(),this.afterUpdate.trigger(this)}initializeLabelRenderer(){var t,e;this.updateLabelRendererSize(),window.addEventListener("resize",this.updateLabelRendererSize),this._labelRenderer.domElement.style.position="absolute",this._labelRenderer.domElement.style.top="0px";const n=this._labelRenderer.domElement;null===(e=null===(t=this._renderer)||void 0===t?void 0:t.domElement.parentElement)||void 0===e||e.appendChild(n)}setup3DBuildings(){this._map.on("load",(()=>{const t=this._map.getStyle().layers.find((t=>"symbol"===t.type&&t.layout["text-field"])).id;this._map.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)}))}}class Oq extends hT{constructor(){super(...arguments),this.enabled=!0,this.name="MapboxCamera",this._camera=new Gc}get(){return this._camera}}var Nq=n(879);He("firebase","10.8.0","app");var Mq,Pq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Fq={},Lq=Lq||{},kq=Pq||self;function Uq(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Bq(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var zq="closure_uid_"+(1e9*Math.random()>>>0),Gq=0;function Hq(t,e,n){return t.call.apply(t.bind,arguments)}function Vq(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function jq(t,e,n){return(jq=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hq:Vq).apply(null,arguments)}function Wq(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Yq(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function qq(){this.s=this.s,this.o=this.o}qq.prototype.s=!1,qq.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,zq)&&t[zq]||(t[zq]=++Gq)}(this)},qq.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xq=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Zq(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Kq(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(Uq(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function Qq(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Qq.prototype.h=function(){this.defaultPrevented=!0};var Jq=function(){if(!kq.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};kq.addEventListener("test",t,e),kq.removeEventListener("test",t,e)}catch(B8){}return t}();function $q(t){return/^[\s\xa0]*$/.test(t)}function tX(){var t=kq.navigator;return t&&(t=t.userAgent)?t:""}function eX(t){return-1!=tX().indexOf(t)}function nX(t){return nX[" "](t),t}nX[" "]=function(){};var iX,rX,sX=eX("Opera"),oX=eX("Trident")||eX("MSIE"),aX=eX("Edge"),lX=aX||oX,hX=eX("Gecko")&&!(-1!=tX().toLowerCase().indexOf("webkit")&&!eX("Edge"))&&!(eX("Trident")||eX("MSIE"))&&!eX("Edge"),cX=-1!=tX().toLowerCase().indexOf("webkit")&&!eX("Edge");function uX(){var t=kq.document;return t?t.documentMode:void 0}t:{var pX="",dX=function(){var t=tX();return hX?/rv:([^\);]+)(\)|;)/.exec(t):aX?/Edge\/([\d\.]+)/.exec(t):oX?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):cX?/WebKit\/(\S+)/.exec(t):sX?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(dX&&(pX=dX?dX[1]:""),oX){var fX=uX();if(null!=fX&&fX>parseFloat(pX)){iX=String(fX);break t}}iX=pX}if(kq.document&&oX){var mX=uX();rX=mX||(parseInt(iX,10)||void 0)}else rX=void 0;var gX=rX;function yX(t,e){if(Qq.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hX){t:{try{nX(e.nodeName);var r=!0;break t}catch(N8){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:_X[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&yX.$.h.call(this)}}Yq(yX,Qq);var _X={2:"touch",3:"pen",4:"mouse"};yX.prototype.h=function(){yX.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var vX="closure_listenable_"+(1e6*Math.random()|0),TX=0;function EX(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++TX,this.fa=this.ia=!1}function xX(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function IX(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function bX(t){const e={};for(const n in t)e[n]=t[n];return e}const wX="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SX(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<wX.length;e++)n=wX[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function AX(t){this.src=t,this.g={},this.h=0}function CX(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Xq(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(xX(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function RX(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}AX.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=RX(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new EX(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var DX="closure_lm_"+(1e6*Math.random()|0),OX={};function NX(t,e,n,i,r){if(i&&i.once)return PX(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)NX(t,e[s],n,i,r);return null}return n=GX(n),t&&t[vX]?t.O(e,n,Bq(i)?!!i.capture:!!i,r):MX(t,e,n,!1,i,r)}function MX(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Bq(r)?!!r.capture:!!r,a=BX(t);if(a||(t[DX]=a=new AX(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=UX;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Jq||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(kX(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function PX(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)PX(t,e[s],n,i,r);return null}return n=GX(n),t&&t[vX]?t.P(e,n,Bq(i)?!!i.capture:!!i,r):MX(t,e,n,!0,i,r)}function FX(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)FX(t,e[s],n,i,r);else i=Bq(i)?!!i.capture:!!i,n=GX(n),t&&t[vX]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=RX(s=t.g[e],n,i,r))&&(xX(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=BX(t))&&(e=t.g[e.toString()],t=-1,e&&(t=RX(e,n,i,r)),(n=-1<t?e[t]:null)&&LX(n))}function LX(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[vX])CX(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(kX(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=BX(e))?(CX(n,t),0==n.h&&(n.src=null,e[DX]=null)):xX(t)}}}function kX(t){return t in OX?OX[t]:OX[t]="on"+t}function UX(t,e){if(t.fa)t=!0;else{e=new yX(e,this);var n=t.listener,i=t.la||t.src;t.ia&&LX(t),t=n.call(i,e)}return t}function BX(t){return(t=t[DX])instanceof AX?t:null}var zX="__closure_events_fn_"+(1e9*Math.random()>>>0);function GX(t){return"function"===typeof t?t:(t[zX]||(t[zX]=function(e){return t.handleEvent(e)}),t[zX])}function HX(){qq.call(this),this.i=new AX(this),this.S=this,this.J=null}function VX(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new Qq(e,t);else if(e instanceof Qq)e.target=e.target||t;else{var r=e;SX(e=new Qq(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=jX(o,i,!0,e)&&r}if(r=jX(o=e.g=t,i,!0,e)&&r,r=jX(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=jX(o=e.g=n[s],i,!1,e)&&r}function jX(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&CX(t.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Yq(HX,qq),HX.prototype[vX]=!0,HX.prototype.removeEventListener=function(t,e,n,i){FX(this,t,e,n,i)},HX.prototype.N=function(){if(HX.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)xX(n[i]);delete e.g[t],e.h--}}this.J=null},HX.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},HX.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var WX=kq.JSON.stringify;function YX(){var t=$X;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var qX=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new XX),(t=>t.reset()));class XX{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ZX(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function KX(t){kq.setTimeout((()=>{throw t}),0)}let QX,JX=!1,$X=new class{constructor(){this.h=this.g=null}add(t,e){const n=qX.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},tZ=()=>{const t=kq.Promise.resolve(void 0);QX=()=>{t.then(eZ)}};var eZ=()=>{for(var t;t=YX();){try{t.h.call(t.g)}catch(B8){KX(B8)}var e=qX;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}JX=!1};function nZ(t,e){HX.call(this),this.h=t||1,this.g=e||kq,this.j=jq(this.qb,this),this.l=Date.now()}function iZ(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function rZ(t,e,n){if("function"===typeof t)n&&(t=jq(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=jq(t.handleEvent,t)}return 2147483647<Number(e)?-1:kq.setTimeout(t,e||0)}function sZ(t){t.g=rZ((()=>{t.g=null,t.i&&(t.i=!1,sZ(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Yq(nZ,HX),(Mq=nZ.prototype).ga=!1,Mq.T=null,Mq.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),VX(this,"tick"),this.ga&&(iZ(this),this.start()))}},Mq.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Mq.N=function(){nZ.$.N.call(this),iZ(this),delete this.g};class oZ extends qq{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:sZ(this)}N(){super.N(),this.g&&(kq.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aZ(t){qq.call(this),this.h=t,this.g={}}Yq(aZ,qq);var lZ=[];function hZ(t,e,n,i){Array.isArray(n)||(n&&(lZ[0]=n.toString()),n=lZ);for(var r=0;r<n.length;r++){var s=NX(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function cZ(t){IX(t.g,(function(t,e){this.g.hasOwnProperty(e)&&LX(t)}),t),t.g={}}function uZ(){this.g=!0}function pZ(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return WX(n)}catch(A8){return e}}(t,n)+(i?" "+i:"")}))}aZ.prototype.N=function(){aZ.$.N.call(this),cZ(this)},aZ.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uZ.prototype.Ea=function(){this.g=!1},uZ.prototype.info=function(){};var dZ={},fZ=null;function mZ(){return fZ=fZ||new HX}function gZ(t){Qq.call(this,dZ.Ta,t)}function yZ(t){const e=mZ();VX(e,new gZ(e))}function _Z(t,e){Qq.call(this,dZ.STAT_EVENT,t),this.stat=e}function vZ(t){const e=mZ();VX(e,new _Z(e,t))}function TZ(t,e){Qq.call(this,dZ.Ua,t),this.size=e}function EZ(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return kq.setTimeout((function(){t()}),e)}dZ.Ta="serverreachability",Yq(gZ,Qq),dZ.STAT_EVENT="statevent",Yq(_Z,Qq),dZ.Ua="timingevent",Yq(TZ,Qq);var xZ={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},IZ={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bZ(){}function wZ(t){return t.h||(t.h=t.i())}function SZ(){}bZ.prototype.h=null;var AZ,CZ={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function RZ(){Qq.call(this,"d")}function DZ(){Qq.call(this,"c")}function OZ(){}function NZ(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new aZ(this),this.P=PZ,t=lX?125:void 0,this.V=new nZ(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MZ}function MZ(){this.i=null,this.g="",this.h=!1}Yq(RZ,Qq),Yq(DZ,Qq),Yq(OZ,bZ),OZ.prototype.g=function(){return new XMLHttpRequest},OZ.prototype.i=function(){return{}},AZ=new OZ;var PZ=45e3,FZ={},LZ={};function kZ(t,e,n){t.L=1,t.A=nK(QZ(e)),t.u=n,t.S=!0,UZ(t,null)}function UZ(t,e){t.G=Date.now(),HZ(t),t.B=QZ(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),mK(n.i,"t",i),t.o=0,n=t.l.J,t.h=new MZ,t.g=mQ(t.l,n?e:null,!t.u),0<t.O&&(t.M=new oZ(jq(t.Pa,t,t.g),t.O)),hZ(t.U,t.g,"readystatechange",t.nb),e=t.I?bX(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),yZ(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var c=h[0];h=h[1];var u=c.split("_");o=2<=u.length&&"type"==u[1]?o+(c+"=")+h+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function BZ(t){return!!t.g&&("GET"==t.v&&2!=t.L&&t.l.Ha)}function zZ(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=GZ(t,n),i==LZ){4==e&&(t.s=4,vZ(14),r=!1),pZ(t.j,t.m,null,"[Incomplete Response]");break}if(i==FZ){t.s=4,vZ(15),pZ(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}pZ(t.j,t.m,i,null),qZ(t,i)}BZ(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,vZ(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),aQ(e),e.M=!0,vZ(11))):(pZ(t.j,t.m,n,"[Invalid Chunked Response]"),YZ(t),WZ(t))}function GZ(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?LZ:(n=Number(e.substring(n,i)),isNaN(n)?FZ:(i+=1)+n>e.length?LZ:(e=e.slice(i,i+n),t.o=i+n,e))}function HZ(t){t.Y=Date.now()+t.P,VZ(t,t.P)}function VZ(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=EZ(jq(t.lb,t),e)}function jZ(t){t.C&&(kq.clearTimeout(t.C),t.C=null)}function WZ(t){0==t.l.H||t.J||cQ(t.l,t)}function YZ(t){jZ(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,iZ(t.V),cZ(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function qZ(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||xK(n.i,t)))if(!t.K&&xK(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(z8){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;hQ(n),$K(n)}oQ(n),vZ(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=EZ(jq(n.ib,n),6e3));if(1>=EK(n.i)&&n.oa){try{n.oa()}catch(z8){}n.oa=void 0}}else pQ(n,11)}else if((t.K||n.g==t)&&hQ(n),!$q(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let h=r[e];if(n.V=h[0],h=h[1],2==n.H)if("c"==h[0]){n.K=h[1],n.pa=h[2];const e=h[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=h[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const c=h[5];null!=c&&"number"===typeof c&&0<c&&(i=1.5*c,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(IK(s,s.h),s.h=null))}if(i.F){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,eK(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=fQ(i,i.J?i.pa:null,i.Y),o.K){bK(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(jZ(a),HZ(a)),i.g=o}else sQ(i);0<n.j.length&&eQ(n)}else"stop"!=h[0]&&"close"!=h[0]||pQ(n,7);else 3==n.H&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?pQ(n,7):JK(n):"noop"!=h[0]&&n.h&&n.h.Aa(h),n.A=0)}yZ()}catch(z8){}}function XZ(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Uq(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(Uq(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(Uq(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(Mq=NZ.prototype).setTimeout=function(t){this.P=t},Mq.nb=function(t){t=t.target;const e=this.M;e&&3==YK(t)?e.l():this.Pa(t)},Mq.Pa=function(t){try{if(t==this.g)t:{const c=YK(this.g);var e=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||lX||this.g&&(this.h.h||this.g.ja()||qK(this.g)))){this.J||4!=c||7==e||yZ(),jZ(this);var n=this.g.da();this.ca=n;e:if(BZ(this)){var i=qK(this.g);t="";var r=i.length,s=4==YK(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){YZ(this),WZ(this);var o="";break e}this.h.i=new kq.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$q(a)){var h=a;break e}}h=null}if(!(n=h)){this.i=!1,this.s=3,vZ(12),YZ(this),WZ(this);break t}pZ(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qZ(this,n)}this.S?(zZ(this,c,o),lX&&this.i&&3==c&&(hZ(this.U,this.V,"tick",this.mb),this.V.start())):(pZ(this.j,this.m,o,null),qZ(this,o)),4==c&&YZ(this),this.i&&!this.J&&(4==c?cQ(this.l,this):(this.i=!1,HZ(this)))}else(function(t){const e={};t=(t.g&&2<=YK(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if($q(t[i]))continue;var n=ZX(t[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,vZ(12)):(this.s=0,vZ(13)),YZ(this),WZ(this)}}}catch(k8){}},Mq.mb=function(){if(this.g){var t=YK(this.g),e=this.g.ja();this.o<e.length&&(jZ(this),zZ(this,t,e),this.i&&4!=t&&HZ(this))}},Mq.cancel=function(){this.J=!0,YZ(this)},Mq.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(yZ(),vZ(17)),YZ(this),this.s=2,WZ(this)):VZ(this,this.Y-t)};var ZZ=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KZ(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof KZ){this.h=t.h,JZ(this,t.j),this.s=t.s,this.g=t.g,$Z(this,t.m),this.l=t.l;var e=t.i,n=new uK;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),tK(this,n),this.o=t.o}else t&&(e=String(t).match(ZZ))?(this.h=!1,JZ(this,e[1]||"",!0),this.s=iK(e[2]||""),this.g=iK(e[3]||"",!0),$Z(this,e[4]),this.l=iK(e[5]||"",!0),tK(this,e[6]||"",!0),this.o=iK(e[7]||"")):(this.h=!1,this.i=new uK(null,this.h))}function QZ(t){return new KZ(t)}function JZ(t,e,n){t.j=n?iK(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $Z(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tK(t,e,n){e instanceof uK?(t.i=e,function(t,e){e&&!t.j&&(pK(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(dK(this,e),mK(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=rK(e,hK)),t.i=new uK(e,t.h))}function eK(t,e,n){t.i.set(e,n)}function nK(t){return eK(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function iK(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function rK(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,sK),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sK(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}KZ.prototype.toString=function(){var t=[],e=this.j;e&&t.push(rK(e,oK,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(rK(e,oK,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(rK(n,"/"==n.charAt(0)?lK:aK,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",rK(n,cK)),t.join("")};var oK=/[#\/\?@]/g,aK=/[#\?:]/g,lK=/[#\?]/g,hK=/[#\?@]/g,cK=/#/g;function uK(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pK(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function dK(t,e){pK(t),e=gK(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fK(t,e){return pK(t),e=gK(t,e),t.g.has(e)}function mK(t,e,n){dK(t,e),0<n.length&&(t.i=null,t.g.set(gK(t,e),Zq(n)),t.h+=n.length)}function gK(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Mq=uK.prototype).add=function(t,e){pK(this),this.i=null,t=gK(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Mq.forEach=function(t,e){pK(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Mq.ta=function(){pK(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Mq.Z=function(t){pK(this);let e=[];if("string"===typeof t)fK(this,t)&&(e=e.concat(this.g.get(gK(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Mq.set=function(t,e){return pK(this),this.i=null,fK(this,t=gK(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Mq.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Mq.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var yK=class{constructor(t,e){this.g=t,this.map=e}};function _K(t){this.l=t||vK,kq.PerformanceNavigationTiming?t=0<(t=kq.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(kq.g&&kq.g.Ka&&kq.g.Ka()&&kq.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vK=10;function TK(t){return!!t.h||!!t.g&&t.g.size>=t.j}function EK(t){return t.h?1:t.g?t.g.size:0}function xK(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function IK(t,e){t.g?t.g.add(e):t.h=e}function bK(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function wK(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Zq(t.i)}_K.prototype.cancel=function(){if(this.i=wK(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var SK=class{stringify(t){return kq.JSON.stringify(t,void 0)}parse(t){return kq.JSON.parse(t,void 0)}};function AK(){this.g=new SK}function CK(t,e,n){const i=n||"";try{XZ(t,(function(t,n){let r=t;Bq(t)&&(r=WX(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(C8){throw e.push(i+"type="+encodeURIComponent("_badmap")),C8}}function RK(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(N8){}}function DK(t){this.l=t.ec||null,this.j=t.ob||!1}function OK(t,e){HX.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=NK,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yq(DK,bZ),DK.prototype.g=function(){return new OK(this.l,this.j)},DK.prototype.i=function(t){return function(){return t}}({}),Yq(OK,HX);var NK=0;function MK(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function PK(t){t.readyState=4,t.l=null,t.j=null,t.A=null,FK(t)}function FK(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Mq=OK.prototype).open=function(t,e){if(this.readyState!=NK)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,FK(this)},Mq.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||kq).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Mq.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,PK(this)),this.readyState=NK},Mq.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,FK(this)),this.g&&(this.readyState=3,FK(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof kq.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MK(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Mq.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?PK(this):FK(this),3==this.readyState&&MK(this)}},Mq.Za=function(t){this.g&&(this.response=this.responseText=t,PK(this))},Mq.Ya=function(t){this.g&&(this.response=t,PK(this))},Mq.ka=function(){this.g&&PK(this)},Mq.setRequestHeader=function(t,e){this.v.append(t,e)},Mq.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Mq.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(OK.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var LK=kq.JSON.parse;function kK(t){HX.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=UK,this.L=this.M=!1}Yq(kK,HX);var UK="",BK=/^https?$/i,zK=["POST","PUT"];function GK(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,HK(t),jK(t)}function HK(t){t.F||(t.F=!0,VX(t,"complete"),VX(t,"error"))}function VK(t){if(t.h&&"undefined"!=typeof Lq&&(!t.C[1]||4!=YK(t)||2!=t.da()))if(t.v&&4==YK(t))rZ(t.La,0,t);else if(VX(t,"readystatechange"),4==YK(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(ZZ)[1]||null;!r&&kq.self&&kq.self.location&&(r=kq.self.location.protocol.slice(0,-1)),i=!BK.test(r?r.toLowerCase():"")}n=i}if(n)VX(t,"complete"),VX(t,"success");else{t.m=6;try{var s=2<YK(t)?t.g.statusText:""}catch(A8){s=""}t.j=s+" ["+t.da()+"]",HK(t)}}finally{jK(t)}}}function jK(t,e){if(t.g){WK(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||VX(t,"ready");try{n.onreadystatechange=i}catch(C8){}}}function WK(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(kq.clearTimeout(t.A),t.A=null)}function YK(t){return t.g?t.g.readyState:0}function qK(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case UK:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(tJ){return null}}function XK(t){let e="";return IX(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function ZK(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=XK(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):eK(t,e,n))}function KK(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function QK(t){this.Ga=0,this.j=[],this.l=new uZ,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=KK("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=KK("baseRetryDelayMs",5e3,t),this.hb=KK("retryDelaySeedMs",1e4,t),this.eb=KK("forwardChannelMaxRetries",2,t),this.xa=KK("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new _K(t&&t.concurrentRequestLimit),this.Ja=new AK,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function JK(t){if(tQ(t),3==t.H){var e=t.W++,n=QZ(t.I);if(eK(n,"SID",t.K),eK(n,"RID",e),eK(n,"TYPE","terminate"),iQ(t,n),(e=new NZ(t,t.l,e)).L=2,e.A=nK(QZ(n)),n=!1,kq.navigator&&kq.navigator.sendBeacon)try{n=kq.navigator.sendBeacon(e.A.toString(),"")}catch(U8){}!n&&kq.Image&&((new Image).src=e.A,n=!0),n||(e.g=mQ(e.l,null),e.g.ha(e.A)),e.G=Date.now(),HZ(e)}dQ(t)}function $K(t){t.g&&(aQ(t),t.g.cancel(),t.g=null)}function tQ(t){$K(t),t.u&&(kq.clearTimeout(t.u),t.u=null),hQ(t),t.i.cancel(),t.m&&("number"===typeof t.m&&kq.clearTimeout(t.m),t.m=null)}function eQ(t){if(!TK(t.i)&&!t.m){t.m=!0;var e=t.Na;QX||tZ(),JX||(QX(),JX=!0),$X.add(e,t),t.C=0}}function nQ(t,e){var n;n=e?e.m:t.W++;const i=QZ(t.I);eK(i,"SID",t.K),eK(i,"RID",n),eK(i,"AID",t.V),iQ(t,i),t.o&&t.s&&ZK(i,t.o,t.s),n=new NZ(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=rQ(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),IK(t.i,n),kZ(n,i,e)}function iQ(t,e){t.na&&IX(t.na,(function(t,n){eK(e,n,t)})),t.h&&XZ({},(function(t,n){eK(e,n,t)}))}function rQ(t,e,n){n=Math.min(t.j.length,n);var i=t.h?jq(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),o=!1;else try{CK(l,t,"req"+n+"_")}catch(s){i&&i(l)}}if(o){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function sQ(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;QX||tZ(),JX||(QX(),JX=!0),$X.add(e,t),t.A=0}}function oQ(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=EZ(jq(t.Ma,t),uQ(t,t.A)),t.A++,!0)}function aQ(t){null!=t.B&&(kq.clearTimeout(t.B),t.B=null)}function lQ(t){t.g=new NZ(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=QZ(t.wa);eK(e,"RID","rpc"),eK(e,"SID",t.K),eK(e,"AID",t.V),eK(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&eK(e,"TO",t.qa),eK(e,"TYPE","xmlhttp"),iQ(t,e),t.o&&t.s&&ZK(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=nK(QZ(e)),n.u=null,n.S=!0,UZ(n,t)}function hQ(t){null!=t.v&&(kq.clearTimeout(t.v),t.v=null)}function cQ(t,e){var n=null;if(t.g==e){hQ(t),aQ(t),t.g=null;var i=2}else{if(!xK(t.i,e))return;n=e.F,bK(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;VX(i=mZ(),new TZ(i,n)),eQ(t)}else sQ(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(EK(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=EZ(jq(t.Na,t,e),uQ(t,t.C)),t.C++,!0))}(t,e)||2==i&&oQ(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:pQ(t,5);break;case 4:pQ(t,10);break;case 3:pQ(t,6);break;default:pQ(t,2)}}function uQ(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function pQ(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=jq(t.pb,t);n||(n=new KZ("//www.google.com/images/cleardot.gif"),kq.location&&"http"==kq.location.protocol||JZ(n,"https"),nK(n)),function(t,e){const n=new uZ;if(kq.Image){const i=new Image;i.onload=Wq(RK,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Wq(RK,n,i,"TestLoadImage: error",!1,e),i.onabort=Wq(RK,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Wq(RK,n,i,"TestLoadImage: timeout",!1,e),kq.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else vZ(2);t.H=0,t.h&&t.h.za(e),dQ(t),tQ(t)}function dQ(t){if(t.H=0,t.ma=[],t.h){const e=wK(t.i);0==e.length&&0==t.j.length||(Kq(t.ma,e),Kq(t.ma,t.j),t.i.i.length=0,Zq(t.j),t.j.length=0),t.h.ya()}}function fQ(t,e,n){var i=n instanceof KZ?QZ(n):new KZ(n);if(""!=i.g)e&&(i.g=e+"."+i.g),$Z(i,i.m);else{var r=kq.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new KZ(null);i&&JZ(s,i),e&&(s.g=e),r&&$Z(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&eK(i,n,e),eK(i,"VER",t.ra),iQ(t,i),i}function mQ(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new kK(new DK({ob:n})):new kK(t.va)).Oa(t.J),e}function gQ(){}function yQ(){if(oX&&!(10<=Number(gX)))throw Error("Environmental error: no available transport.")}function _Q(t,e){HX.call(this),this.g=new QK(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$q(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$q(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new EQ(this)}function vQ(t){RZ.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function TQ(){DZ.call(this),this.status=1}function EQ(t){this.g=t}function xQ(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function IQ(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function bQ(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(Mq=kK.prototype).Oa=function(t){this.M=t},Mq.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():AZ.g(),this.C=this.u?wZ(this.u):wZ(AZ),this.g.onreadystatechange=jq(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(N8){return void GK(this,N8)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=kq.FormData&&t instanceof kq.FormData,!(0<=Xq(zK,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{WK(this),0<this.B&&((this.L=function(t){return oX&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jq(this.ua,this)):this.A=rZ(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(N8){GK(this,N8)}},Mq.ua=function(){"undefined"!=typeof Lq&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,VX(this,"timeout"),this.abort(8))},Mq.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,VX(this,"complete"),VX(this,"abort"),jK(this))},Mq.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jK(this,!0)),kK.$.N.call(this)},Mq.La=function(){this.s||(this.G||this.v||this.l?VK(this):this.kb())},Mq.kb=function(){VK(this)},Mq.isActive=function(){return!!this.g},Mq.da=function(){try{return 2<YK(this)?this.g.status:-1}catch(F8){return-1}},Mq.ja=function(){try{return this.g?this.g.responseText:""}catch(F8){return""}},Mq.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),LK(e)}},Mq.Ia=function(){return this.m},Mq.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Mq=QK.prototype).ra=8,Mq.H=1,Mq.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new NZ(this,this.l,t);let s=this.s;if(this.U&&(s?(s=bX(s),SX(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=rQ(this,r,e),eK(n=QZ(this.I),"RID",t),eK(n,"CVER",22),this.F&&eK(n,"X-HTTP-Session-Id",this.F),iQ(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(XK(s)))+"&"+e:this.o&&ZK(n,this.o,s)),IK(this.i,r),this.bb&&eK(n,"TYPE","init"),this.P?(eK(n,"$req",e),eK(n,"SID","null"),r.aa=!0,kZ(r,n,null)):kZ(r,n,e),this.H=2}}else 3==this.H&&(t?nQ(this,t):0==this.j.length||TK(this.i)||nQ(this))},Mq.Ma=function(){if(this.u=null,lQ(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=EZ(jq(this.jb,this),t)}},Mq.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vZ(10),$K(this),lQ(this))},Mq.ib=function(){null!=this.v&&(this.v=null,$K(this),oQ(this),vZ(19))},Mq.pb=function(t){t?(this.l.info("Successfully pinged google.com"),vZ(2)):(this.l.info("Failed to ping google.com"),vZ(1))},Mq.isActive=function(){return!!this.h&&this.h.isActive(this)},(Mq=gQ.prototype).Ba=function(){},Mq.Aa=function(){},Mq.za=function(){},Mq.ya=function(){},Mq.isActive=function(){return!0},Mq.Va=function(){},yQ.prototype.g=function(t,e){return new _Q(t,e)},Yq(_Q,HX),_Q.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;vZ(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=fQ(t,null,t.Y),eQ(t)},_Q.prototype.close=function(){JK(this.g)},_Q.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=WX(t),t=n);e.j.push(new yK(e.fb++,t)),3==e.H&&eQ(e)},_Q.prototype.N=function(){this.g.h=null,delete this.j,JK(this.g),delete this.g,_Q.$.N.call(this)},Yq(vQ,RZ),Yq(TQ,DZ),Yq(EQ,gQ),EQ.prototype.Ba=function(){VX(this.g,"a")},EQ.prototype.Aa=function(t){VX(this.g,new vQ(t))},EQ.prototype.za=function(t){VX(this.g,new TQ)},EQ.prototype.ya=function(){VX(this.g,"b")},Yq(xQ,(function(){this.blockSize=-1})),xQ.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},xQ.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)IQ(this,t,s),s+=this.blockSize;if("string"===typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){IQ(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){IQ(this,i),r=0;break}}this.h=r,this.i+=e},xQ.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var wQ={};function SQ(t){return-128<=t&&128>t?function(t,e){var n=wQ;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new bQ([0|t],0>t?-1:0)})):new bQ([0|t],0>t?-1:0)}function AQ(t){if(isNaN(t)||!isFinite(t))return RQ;if(0>t)return PQ(AQ(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=CQ;return new bQ(e,0)}var CQ=4294967296,RQ=SQ(0),DQ=SQ(1),OQ=SQ(16777216);function NQ(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function MQ(t){return-1==t.h}function PQ(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new bQ(n,~t.h).add(DQ)}function FQ(t,e){return t.add(PQ(e))}function LQ(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function kQ(t,e){this.g=t,this.h=e}function UQ(t,e){if(NQ(e))throw Error("division by zero");if(NQ(t))return new kQ(RQ,RQ);if(MQ(t))return e=UQ(PQ(t),e),new kQ(PQ(e.g),PQ(e.h));if(MQ(e))return e=UQ(t,PQ(e)),new kQ(PQ(e.g),e.h);if(30<t.g.length){if(MQ(t)||MQ(e))throw Error("slowDivide_ only works with positive integers.");for(var n=DQ,i=e;0>=i.X(t);)n=BQ(n),i=BQ(i);var r=zQ(n,1),s=zQ(i,1);for(i=zQ(i,2),n=zQ(n,2);!NQ(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=zQ(i,1),n=zQ(n,1)}return e=FQ(t,r.R(e)),new kQ(r,e)}for(r=RQ;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=AQ(n)).R(e);MQ(o)||0<o.X(t);)o=(s=AQ(n-=i)).R(e);NQ(s)&&(s=DQ),r=r.add(s),t=FQ(t,o)}return new kQ(r,t)}function BQ(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new bQ(n,t.h)}function zQ(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new bQ(r,t.h)}(Mq=bQ.prototype).ea=function(){if(MQ(this))return-PQ(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:CQ+i)*e,e*=CQ}return t},Mq.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(NQ(this))return"0";if(MQ(this))return"-"+PQ(this).toString(t);for(var e=AQ(Math.pow(t,6)),n=this,i="";;){var r=UQ(n,e).g,s=((0<(n=FQ(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(NQ(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Mq.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Mq.X=function(t){return MQ(t=FQ(this,t))?-1:NQ(t)?0:1},Mq.abs=function(){return MQ(this)?PQ(this):this},Mq.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new bQ(n,-2147483648&n[n.length-1]?-1:0)},Mq.R=function(t){if(NQ(this)||NQ(t))return RQ;if(MQ(this))return MQ(t)?PQ(this).R(PQ(t)):PQ(PQ(this).R(t));if(MQ(t))return PQ(this.R(PQ(t)));if(0>this.X(OQ)&&0>t.X(OQ))return AQ(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,l=65535&t.D(r);n[2*i+2*r]+=o*l,LQ(n,2*i+2*r),n[2*i+2*r+1]+=s*l,LQ(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,LQ(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,LQ(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new bQ(n,0)},Mq.gb=function(t){return UQ(this,t).h},Mq.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new bQ(n,this.h&t.h)},Mq.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new bQ(n,this.h|t.h)},Mq.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new bQ(n,this.h^t.h)},yQ.prototype.createWebChannel=yQ.prototype.g,_Q.prototype.send=_Q.prototype.u,_Q.prototype.open=_Q.prototype.m,_Q.prototype.close=_Q.prototype.close,xZ.NO_ERROR=0,xZ.TIMEOUT=8,xZ.HTTP_ERROR=6,IZ.COMPLETE="complete",SZ.EventType=CZ,CZ.OPEN="a",CZ.CLOSE="b",CZ.ERROR="c",CZ.MESSAGE="d",HX.prototype.listen=HX.prototype.O,kK.prototype.listenOnce=kK.prototype.P,kK.prototype.getLastError=kK.prototype.Sa,kK.prototype.getLastErrorCode=kK.prototype.Ia,kK.prototype.getStatus=kK.prototype.da,kK.prototype.getResponseJson=kK.prototype.Wa,kK.prototype.getResponseText=kK.prototype.ja,kK.prototype.send=kK.prototype.ha,kK.prototype.setWithCredentials=kK.prototype.Oa,xQ.prototype.digest=xQ.prototype.l,xQ.prototype.reset=xQ.prototype.reset,xQ.prototype.update=xQ.prototype.j,bQ.prototype.add=bQ.prototype.add,bQ.prototype.multiply=bQ.prototype.R,bQ.prototype.modulo=bQ.prototype.gb,bQ.prototype.compare=bQ.prototype.X,bQ.prototype.toNumber=bQ.prototype.ea,bQ.prototype.toString=bQ.prototype.toString,bQ.prototype.getBits=bQ.prototype.D,bQ.fromNumber=AQ,bQ.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return PQ(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=AQ(Math.pow(n,8)),r=RQ,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=AQ(Math.pow(n,o)),r=r.R(o).add(AQ(a))):r=(r=r.R(i)).add(AQ(a))}return r};var GQ=Fq.createWebChannelTransport=function(){return new yQ},HQ=Fq.getStatEventTarget=function(){return mZ()},VQ=Fq.ErrorCode=xZ,jQ=Fq.EventType=IZ,WQ=Fq.Event=dZ,YQ=Fq.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},qQ=(Fq.FetchXmlHttpFactory=DK,Fq.WebChannel=SZ),XQ=Fq.XhrIo=kK,ZQ=Fq.Md5=xQ,KQ=Fq.Integer=bQ;const QQ="@firebase/firestore";class JQ{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}JQ.UNAUTHENTICATED=new JQ(null),JQ.GOOGLE_CREDENTIALS=new JQ("google-credentials-uid"),JQ.FIRST_PARTY=new JQ("first-party-uid"),JQ.MOCK_USER=new JQ("mock-user");let $Q="10.8.0";const tJ=new le("@firebase/firestore");function eJ(){return tJ.logLevel}function nJ(t){if(tJ.logLevel<=ie.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(sJ);tJ.debug("Firestore (".concat($Q,"): ").concat(t),...r)}}function iJ(t){if(tJ.logLevel<=ie.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(sJ);tJ.error("Firestore (".concat($Q,"): ").concat(t),...r)}}function rJ(t){if(tJ.logLevel<=ie.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(sJ);tJ.warn("Firestore (".concat($Q,"): ").concat(t),...r)}}function sJ(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(R8){return t}}function oJ(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat($Q,") INTERNAL ASSERTION FAILED: ")+t;throw iJ(e),new Error(e)}function aJ(t,e){t||oJ()}function lJ(t,e){return t}const hJ={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cJ extends zt{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class uJ{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class pJ{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class dJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(JQ.UNAUTHENTICATED)))}shutdown(){}}class fJ{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class mJ{constructor(t){this.t=t,this.currentUser=JQ.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new uJ;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new uJ,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{nJ("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(nJ("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new uJ)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(nJ("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(aJ("string"==typeof e.accessToken),new pJ(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return aJ(null===t||"string"==typeof t),new JQ(t)}}class gJ{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=JQ.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yJ{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new gJ(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(JQ.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _J{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vJ{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&nJ("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.R;return this.R=t.token,nJ("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{nJ("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):nJ("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(aJ("string"==typeof t.token),this.R=t.token,new _J(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function TJ(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class EJ{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=TJ(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%62))}return n}}function xJ(t,e){return t<e?-1:t>e?1:0}function IJ(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class bJ{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new cJ(hJ.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new cJ(hJ.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new cJ(hJ.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new cJ(hJ.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return bJ.fromMillis(Date.now())}static fromDate(t){return bJ.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new bJ(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xJ(this.nanoseconds,t.nanoseconds):xJ(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wJ{constructor(t){this.timestamp=t}static fromTimestamp(t){return new wJ(t)}static min(){return new wJ(new bJ(0,0))}static max(){return new wJ(new bJ(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class SJ{constructor(t,e,n){void 0===e?e=0:e>t.length&&oJ(),void 0===n?n=t.length-e:n>t.length-e&&oJ(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===SJ.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof SJ?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class AJ extends SJ{construct(t,e,n){return new AJ(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new cJ(hJ.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter((t=>t.length>0)))}return new AJ(t)}static emptyPath(){return new AJ([])}}const CJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class RJ extends SJ{construct(t,e,n){return new RJ(t,e,n)}static isValidIdentifier(t){return CJ.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),RJ.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new RJ(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new cJ(hJ.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new cJ(hJ.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new cJ(hJ.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new cJ(hJ.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new RJ(e)}static emptyPath(){return new RJ([])}}class DJ{constructor(t){this.path=t}static fromPath(t){return new DJ(AJ.fromString(t))}static fromName(t){return new DJ(AJ.fromString(t).popFirst(5))}static empty(){return new DJ(AJ.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===AJ.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return AJ.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new DJ(new AJ(t.slice()))}}class OJ{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}OJ.UNKNOWN_ID=-1;function NJ(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=wJ.fromTimestamp(1e9===i?new bJ(n+1,0):new bJ(n,i));return new PJ(r,DJ.empty(),e)}function MJ(t){return new PJ(t.readTime,t.key,-1)}class PJ{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new PJ(wJ.min(),DJ.empty(),-1)}static max(){return new PJ(wJ.max(),DJ.empty(),-1)}}function FJ(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=DJ.comparator(t.documentKey,e.documentKey),0!==n?n:xJ(t.largestBatchId,e.largestBatchId))}const LJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function UJ(t){if(t.code!==hJ.FAILED_PRECONDITION||t.message!==LJ)throw t;nJ("LocalStore","Unexpectedly lost primary lease")}class BJ{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&oJ(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new BJ(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof BJ?e:BJ.resolve(e)}catch(t){return BJ.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):BJ.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):BJ.reject(e)}static resolve(t){return new BJ(((e,n)=>{e(t)}))}static reject(t){return new BJ(((e,n)=>{n(t)}))}static waitFor(t){return new BJ(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=BJ.resolve(!1);for(const n of t)e=e.next((t=>t?BJ.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new BJ(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next((t=>{s[l]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new BJ(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class zJ{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new uJ,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new VJ(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=XJ(e.target.error);this.V.reject(new VJ(t,n))}}static open(t,e,n,i){try{return new zJ(e,t.transaction(i,n))}catch(t){throw new VJ(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(nJ("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new WJ(e)}}class GJ{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===GJ.S(kt())&&iJ("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return nJ("SimpleDb","Removing database:",t),YJ(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Bt())return!1;if(GJ.C())return!0;const t=kt(),e=GJ.S(t),n=0<e&&e<10,i=GJ.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(nJ("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new VJ(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new cJ(hJ.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new cJ(hJ.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new VJ(t,i))},i.onupgradeneeded=t=>{nJ("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{nJ("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=zJ.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),BJ.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(nJ("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class HJ{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return YJ(this.k.delete())}}class VJ extends cJ{constructor(t,e){super(hJ.UNAVAILABLE,"IndexedDB transaction '".concat(t,"' failed: ").concat(e)),this.name="IndexedDbTransactionError"}}function jJ(t){return"IndexedDbTransactionError"===t.name}class WJ{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(nJ("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(nJ("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),YJ(n)}add(t){return nJ("SimpleDb","ADD",this.store.name,t,t),YJ(this.store.add(t))}get(t){return YJ(this.store.get(t)).next((e=>(void 0===e&&(e=null),nJ("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return nJ("SimpleDb","DELETE",this.store.name,t),YJ(this.store.delete(t))}count(){return nJ("SimpleDb","COUNT",this.store.name),YJ(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new BJ(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new BJ(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){nJ("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new BJ(((n,i)=>{e.onerror=t=>{const e=XJ(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new BJ(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new HJ(r),o=e(r.primaryKey,r.value,s);if(o instanceof BJ){const t=o.catch((t=>(s.done(),BJ.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>BJ.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function YJ(t){return new BJ(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=XJ(t.target.error);n(e)}}))}let qJ=!1;function XJ(t){const e=GJ.S(kt());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new cJ("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(e,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return qJ||(qJ=!0,setTimeout((()=>{throw t}),0)),t}}return t}class ZJ{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function KJ(t){return null==t}function QJ(t){return 0===t&&1/t==-1/0}function JJ(t){return"number"==typeof t&&Number.isInteger(t)&&!QJ(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}ZJ._e=-1;const $J=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e$=t$;function n$(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function i$(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class s${constructor(t,e){this.comparator=t,this.root=e||a$.EMPTY}insert(t,e){return new s$(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,a$.BLACK,null,null))}remove(t){return new s$(this.comparator,this.root.remove(t,this.comparator).copy(null,null,a$.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push("".concat(e,":").concat(n)),!1))),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new o$(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new o$(this.root,t,this.comparator,!1)}getReverseIterator(){return new o$(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new o$(this.root,t,this.comparator,!0)}}class o${constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class a${constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:a$.RED,this.left=null!=i?i:a$.EMPTY,this.right=null!=r?r:a$.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new a$(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return a$.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return a$.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,a$.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,a$.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oJ();if(this.right.isRed())throw oJ();const t=this.left.check();if(t!==this.right.check())throw oJ();return t+(this.isRed()?0:1)}}a$.EMPTY=null,a$.RED=!0,a$.BLACK=!1,a$.EMPTY=new class{constructor(){this.size=0}get key(){throw oJ()}get value(){throw oJ()}get color(){throw oJ()}get left(){throw oJ()}get right(){throw oJ()}copy(t,e,n,i,r){return this}insert(t,e,n){return new a$(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class l${constructor(t){this.comparator=t,this.data=new s$(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new h$(this.data.getIterator())}getIteratorFrom(t){return new h$(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof l$))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new l$(this.comparator);return e.data=t,e}}class h${constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class c${constructor(t){this.fields=t,t.sort(RJ.comparator)}static empty(){return new c$([])}unionWith(t){let e=new l$(RJ.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new c$(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return IJ(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class u$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class p${constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new u$("Invalid base64 string: "+t):t}}(t);return new p$(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new p$(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xJ(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}p$.EMPTY_BYTE_STRING=new p$("");const d$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function f$(t){if(aJ(!!t),"string"==typeof t){let e=0;const n=d$.exec(t);if(aJ(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:m$(t.seconds),nanos:m$(t.nanos)}}function m$(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function g$(t){return"string"==typeof t?p$.fromBase64String(t):p$.fromUint8Array(t)}function y$(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _$(t){const e=t.mapValue.fields.__previous_value__;return y$(e)?_$(e):e}function v$(t){const e=f$(t.mapValue.fields.__local_write_time__.timestampValue);return new bJ(e.seconds,e.nanos)}class T${constructor(t,e,n,i,r,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class E${constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new E$("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof E$&&t.projectId===this.projectId&&t.database===this.database}}const x$={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function I$(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?y$(t)?4:k$(t)?9007199254740991:10:oJ()}function b$(t,e){if(t===e)return!0;const n=I$(t);if(n!==I$(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return v$(t).isEqual(v$(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=f$(t.timestampValue),i=f$(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return g$(t.bytesValue).isEqual(g$(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return m$(t.geoPointValue.latitude)===m$(e.geoPointValue.latitude)&&m$(t.geoPointValue.longitude)===m$(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return m$(t.integerValue)===m$(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=m$(t.doubleValue),i=m$(e.doubleValue);return n===i?QJ(n)===QJ(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return IJ(t.arrayValue.values||[],e.arrayValue.values||[],b$);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(n$(n)!==n$(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!b$(n[r],i[r])))return!1;return!0}(t,e);default:return oJ()}}function w$(t,e){return void 0!==(t.values||[]).find((t=>b$(t,e)))}function S$(t,e){if(t===e)return 0;const n=I$(t),i=I$(e);if(n!==i)return xJ(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return xJ(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=m$(t.integerValue||t.doubleValue),i=m$(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return A$(t.timestampValue,e.timestampValue);case 4:return A$(v$(t),v$(e));case 5:return xJ(t.stringValue,e.stringValue);case 6:return function(t,e){const n=g$(t),i=g$(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=xJ(n[r],i[r]);if(0!==t)return t}return xJ(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=xJ(m$(t.latitude),m$(e.latitude));return 0!==n?n:xJ(m$(t.longitude),m$(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=S$(n[r],i[r]);if(t)return t}return xJ(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===x$.mapValue&&e===x$.mapValue)return 0;if(t===x$.mapValue)return 1;if(e===x$.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=xJ(i[o],s[o]);if(0!==t)return t;const e=S$(n[i[o]],r[s[o]]);if(0!==e)return e}return xJ(i.length,s.length)}(t.mapValue,e.mapValue);default:throw oJ()}}function A$(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return xJ(t,e);const n=f$(t),i=f$(e),r=xJ(n.seconds,i.seconds);return 0!==r?r:xJ(n.nanos,i.nanos)}function C$(t){return R$(t)}function R$(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=f$(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return g$(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return DJ.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=R$(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+="".concat(r,":").concat(R$(t.fields[r]));return n+"}"}(t.mapValue):oJ()}function D$(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function O$(t){return!!t&&"integerValue"in t}function N$(t){return!!t&&"arrayValue"in t}function M$(t){return!!t&&"nullValue"in t}function P$(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function F$(t){return!!t&&"mapValue"in t}function L$(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return i$(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=L$(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=L$(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k$(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class U${constructor(t){this.value=t}static empty(){return new U$({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!F$(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=L$(e)}setAll(t){let e=RJ.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=L$(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());F$(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return b$(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];F$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){i$(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new U$(L$(this.value))}}function B$(t){const e=[];return i$(t.fields,((t,n)=>{const i=new RJ([t]);if(F$(n)){const t=B$(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new c$(e)}class z${constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new z$(t,0,wJ.min(),wJ.min(),wJ.min(),U$.empty(),0)}static newFoundDocument(t,e,n,i){return new z$(t,1,e,wJ.min(),n,i,0)}static newNoDocument(t,e){return new z$(t,2,e,wJ.min(),wJ.min(),U$.empty(),0)}static newUnknownDocument(t,e){return new z$(t,3,e,wJ.min(),wJ.min(),U$.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(wJ.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=U$.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=U$.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wJ.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof z$&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new z$(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class G${constructor(t,e){this.position=t,this.inclusive=e}}function H$(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?DJ.comparator(DJ.fromName(o.referenceValue),n.key):S$(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function V$(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!b$(t.position[n],e.position[n]))return!1;return!0}class j${constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function W$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Y${}class q$ extends Y${constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new e0(t,e,n):"array-contains"===e?new s0(t,n):"in"===e?new o0(t,n):"not-in"===e?new a0(t,n):"array-contains-any"===e?new l0(t,n):new q$(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new n0(t,n):new i0(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(S$(e,this.value)):null!==e&&I$(this.value)===I$(e)&&this.matchesComparison(S$(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return oJ()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class X$ extends Y${constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new X$(t,e)}matches(t){return Z$(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Z$(t){return"and"===t.op}function K$(t){return Q$(t)&&Z$(t)}function Q$(t){for(const e of t.filters)if(e instanceof X$)return!1;return!0}function J$(t){if(t instanceof q$)return t.field.canonicalString()+t.op.toString()+C$(t.value);if(K$(t))return t.filters.map((t=>J$(t))).join(",");{const e=t.filters.map((t=>J$(t))).join(",");return"".concat(t.op,"(").concat(e,")")}}function $$(t,e){return t instanceof q$?function(t,e){return e instanceof q$&&t.op===e.op&&t.field.isEqual(e.field)&&b$(t.value,e.value)}(t,e):t instanceof X$?function(t,e){return e instanceof X$&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&$$(n,e.filters[i])),!0)}(t,e):void oJ()}function t0(t){return t instanceof q$?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(C$(t.value))}(t):t instanceof X$?function(t){return t.op.toString()+" {"+t.getFilters().map(t0).join(" ,")+"}"}(t):"Filter"}class e0 extends q${constructor(t,e,n){super(t,e,n),this.key=DJ.fromName(n.referenceValue)}matches(t){const e=DJ.comparator(t.key,this.key);return this.matchesComparison(e)}}class n0 extends q${constructor(t,e){super(t,"in",e),this.keys=r0("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class i0 extends q${constructor(t,e){super(t,"not-in",e),this.keys=r0("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function r0(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>DJ.fromName(t.referenceValue)))}class s0 extends q${constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return N$(e)&&w$(e.arrayValue,this.value)}}class o0 extends q${constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&w$(this.value.arrayValue,e)}}class a0 extends q${constructor(t,e){super(t,"not-in",e)}matches(t){if(w$(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!w$(this.value.arrayValue,e)}}class l0 extends q${constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!N$(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>w$(this.value.arrayValue,t)))}}class h0{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function c0(t){return new h0(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function u0(t){const e=lJ(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>J$(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),KJ(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>C$(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>C$(t))).join(",")),e.ce=t}return e.ce}function p0(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!V$(t.startAt,e.startAt)&&V$(t.endAt,e.endAt)}function d0(t){return DJ.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class f0{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function m0(t,e,n,i,r,s,o,a){return new f0(t,e,n,i,r,s,o,a)}function g0(t){return new f0(t)}function y0(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function _0(t){return null!==t.collectionGroup}function v0(t){const e=lJ(t);if(null===e.le){e.le=[];const t=new Set;for(const r of e.explicitOrderBy)e.le.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new l$(RJ.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new j$(i,n))})),t.has(RJ.keyField().canonicalString())||e.le.push(new j$(RJ.keyField(),n))}return e.le}function T0(t){const e=lJ(t);return e.he||(e.he=E0(e,v0(t))),e.he}function E0(t,e){if("F"===t.limitType)return c0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new j$(t.field,e)}));const n=t.endAt?new G$(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new G$(t.startAt.position,t.startAt.inclusive):null;return c0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function x0(t,e){const n=t.filters.concat([e]);return new f0(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function I0(t,e,n){return new f0(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function b0(t,e){return p0(T0(t),T0(e))&&t.limitType===e.limitType}function w0(t){return"".concat(u0(T0(t)),"|lt:").concat(t.limitType)}function S0(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((t=>t0(t))).join(", "),"]")),KJ(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t))).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>C$(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>C$(t))).join(",")),"Target(".concat(e,")")}(T0(t)),"; limitType=").concat(t.limitType,")")}function A0(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):DJ.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of v0(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=H$(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,v0(t),e))&&!(t.endAt&&!function(t,e,n){const i=H$(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,v0(t),e))}(t,e)}function C0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R0(t){return(e,n)=>{let i=!1;for(const r of v0(t)){const t=D0(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function D0(t,e,n){const i=t.field.isKeyField()?DJ.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?S$(i,r):oJ()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return oJ()}}class O0{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){i$(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return r$(this.inner)}size(){return this.innerSize}}const N0=new s$(DJ.comparator);function M0(){return N0}const P0=new s$(DJ.comparator);function F0(){let t=P0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.insert(r.key,r);return t}function L0(t){let e=P0;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function k0(){return B0()}function U0(){return B0()}function B0(){return new O0((t=>t.toString()),((t,e)=>t.isEqual(e)))}const z0=new s$(DJ.comparator),G0=new l$(DJ.comparator);function H0(){let t=G0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.add(r);return t}const V0=new l$(xJ);function j0(){return V0}function W0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:QJ(e)?"-0":e}}function Y0(t){return{integerValue:""+t}}function q0(t,e){return JJ(e)?Y0(e):W0(t,e)}class X0{constructor(){this._=void 0}}function Z0(t,e,n){return t instanceof J0?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&y$(e)&&(e=_$(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof $0?t1(t,e):t instanceof e1?n1(t,e):function(t,e){const n=Q0(t,e),i=r1(n)+r1(t.Ie);return O$(n)&&O$(t.Ie)?Y0(i):W0(t.serializer,i)}(t,e)}function K0(t,e,n){return t instanceof $0?t1(t,e):t instanceof e1?n1(t,e):n}function Q0(t,e){return t instanceof i1?function(t){return O$(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class J0 extends X0{}class $0 extends X0{constructor(t){super(),this.elements=t}}function t1(t,e){const n=s1(e);for(const i of t.elements)n.some((t=>b$(t,i)))||n.push(i);return{arrayValue:{values:n}}}class e1 extends X0{constructor(t){super(),this.elements=t}}function n1(t,e){let n=s1(e);for(const i of t.elements)n=n.filter((t=>!b$(t,i)));return{arrayValue:{values:n}}}class i1 extends X0{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function r1(t){return m$(t.integerValue||t.doubleValue)}function s1(t){return N$(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class o1{constructor(t,e){this.version=t,this.transformResults=e}}class a1{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new a1}static exists(t){return new a1(void 0,t)}static updateTime(t){return new a1(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function l1(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class h1{}function c1(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new T1(t.key,a1.none()):new m1(t.key,t.data,a1.none());{const n=t.data,i=U$.empty();let r=new l$(RJ.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new g1(t.key,i,new c$(r.toArray()),a1.none())}}function u1(t,e,n){t instanceof m1?function(t,e,n){const i=t.value.clone(),r=_1(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof g1?function(t,e,n){if(!l1(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=_1(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(y1(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function p1(t,e,n,i){return t instanceof m1?function(t,e,n,i){if(!l1(t.precondition,e))return n;const r=t.value.clone(),s=v1(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof g1?function(t,e,n,i){if(!l1(t.precondition,e))return n;const r=v1(t.fieldTransforms,i,e),s=e.data;return s.setAll(y1(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return l1(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function d1(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Q0(i.transform,t||null);null!=r&&(null===n&&(n=U$.empty()),n.set(i.field,r))}return n||null}function f1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&IJ(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof $0&&e instanceof $0||t instanceof e1&&e instanceof e1?IJ(t.elements,e.elements,b$):t instanceof i1&&e instanceof i1?b$(t.Ie,e.Ie):t instanceof J0&&e instanceof J0}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class m1 extends h1{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class g1 extends h1{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function y1(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function _1(t,e,n){const i=new Map;aJ(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,K0(o,a,n[r]))}return i}function v1(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Z0(t,s,e))}return i}class T1 extends h1{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E1 extends h1{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class x1{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&u1(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=p1(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=p1(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=U0();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=c1(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(wJ.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),H0())}isEqual(t){return this.batchId===t.batchId&&IJ(this.mutations,t.mutations,((t,e)=>f1(t,e)))&&IJ(this.baseMutations,t.baseMutations,((t,e)=>f1(t,e)))}}class I1{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){aJ(t.mutations.length===n.length);let i=z0;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new I1(t,e,n,i)}}class b1{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class w1{constructor(t,e){this.count=t,this.unchangedNames=e}}var S1,A1;function C1(t){switch(t){default:return oJ();case hJ.CANCELLED:case hJ.UNKNOWN:case hJ.DEADLINE_EXCEEDED:case hJ.RESOURCE_EXHAUSTED:case hJ.INTERNAL:case hJ.UNAVAILABLE:case hJ.UNAUTHENTICATED:return!1;case hJ.INVALID_ARGUMENT:case hJ.NOT_FOUND:case hJ.ALREADY_EXISTS:case hJ.PERMISSION_DENIED:case hJ.FAILED_PRECONDITION:case hJ.ABORTED:case hJ.OUT_OF_RANGE:case hJ.UNIMPLEMENTED:case hJ.DATA_LOSS:return!0}}function R1(t){if(void 0===t)return iJ("GRPC error has no .code"),hJ.UNKNOWN;switch(t){case S1.OK:return hJ.OK;case S1.CANCELLED:return hJ.CANCELLED;case S1.UNKNOWN:return hJ.UNKNOWN;case S1.DEADLINE_EXCEEDED:return hJ.DEADLINE_EXCEEDED;case S1.RESOURCE_EXHAUSTED:return hJ.RESOURCE_EXHAUSTED;case S1.INTERNAL:return hJ.INTERNAL;case S1.UNAVAILABLE:return hJ.UNAVAILABLE;case S1.UNAUTHENTICATED:return hJ.UNAUTHENTICATED;case S1.INVALID_ARGUMENT:return hJ.INVALID_ARGUMENT;case S1.NOT_FOUND:return hJ.NOT_FOUND;case S1.ALREADY_EXISTS:return hJ.ALREADY_EXISTS;case S1.PERMISSION_DENIED:return hJ.PERMISSION_DENIED;case S1.FAILED_PRECONDITION:return hJ.FAILED_PRECONDITION;case S1.ABORTED:return hJ.ABORTED;case S1.OUT_OF_RANGE:return hJ.OUT_OF_RANGE;case S1.UNIMPLEMENTED:return hJ.UNIMPLEMENTED;case S1.DATA_LOSS:return hJ.DATA_LOSS;default:return oJ()}}(A1=S1||(S1={}))[A1.OK=0]="OK",A1[A1.CANCELLED=1]="CANCELLED",A1[A1.UNKNOWN=2]="UNKNOWN",A1[A1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",A1[A1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",A1[A1.NOT_FOUND=5]="NOT_FOUND",A1[A1.ALREADY_EXISTS=6]="ALREADY_EXISTS",A1[A1.PERMISSION_DENIED=7]="PERMISSION_DENIED",A1[A1.UNAUTHENTICATED=16]="UNAUTHENTICATED",A1[A1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",A1[A1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",A1[A1.ABORTED=10]="ABORTED",A1[A1.OUT_OF_RANGE=11]="OUT_OF_RANGE",A1[A1.UNIMPLEMENTED=12]="UNIMPLEMENTED",A1[A1.INTERNAL=13]="INTERNAL",A1[A1.UNAVAILABLE=14]="UNAVAILABLE",A1[A1.DATA_LOSS=15]="DATA_LOSS";let D1=null;function O1(){return new TextEncoder}const N1=new KQ([4294967295,4294967295],0);function M1(t){const e=O1().encode(t),n=new ZQ;return n.update(e),new Uint8Array(n.digest())}function P1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new KQ([n,i],0),new KQ([r,s],0)]}class F1{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new L1("Invalid padding: ".concat(e));if(n<0)throw new L1("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new L1("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new L1("Invalid padding when bitmap length is 0: ".concat(e));this.Te=8*t.length-e,this.Ee=KQ.fromNumber(this.Te)}de(t,e,n){let i=t.add(e.multiply(KQ.fromNumber(n)));return 1===i.compare(N1)&&(i=new KQ([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=M1(t),[n,i]=P1(e);for(let r=0;r<this.hashCount;r++){const t=this.de(n,i,r);if(!this.Ae(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new F1(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=M1(t),[n,i]=P1(e);for(let r=0;r<this.hashCount;r++){const t=this.de(n,i,r);this.Re(t)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class L1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class k1{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,U1.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new k1(wJ.min(),i,new s$(xJ),M0(),H0())}}class U1{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new U1(n,e,H0(),H0(),H0())}}class B1{constructor(t,e,n,i){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=i}}class z1{constructor(t,e){this.targetId=t,this.fe=e}}class G1{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p$.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class H1{constructor(){this.ge=0,this.pe=W1(),this.ye=p$.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=H0(),e=H0(),n=H0();return this.pe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:oJ()}})),new U1(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=W1()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,aJ(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class V1{constructor(t){this.Le=t,this.ke=new Map,this.qe=M0(),this.Qe=j1(),this.Ke=new s$(xJ)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:oJ()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,i=this.Ye(e);if(i){const r=i.target;if(d0(r))if(0===n){const t=new DJ(r.path);this.We(e,t,z$.newNoDocument(t,wJ.min()))}else aJ(1===n);else{const i=this.Ze(e);if(i!==n){const n=this.Xe(t),r=n?this.et(n,t,i):1;if(0!==r){this.He(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}null==D1||D1.tt(function(t,e,n,i,r){var s,o,a,l,h,c;const u={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},p=e.unchangedNames;return p&&(u.bloomFilter={applied:0===r,hashCount:null!==(s=null==p?void 0:p.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==p?void 0:p.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(h=null==p?void 0:p.bits)||void 0===h?void 0:h.padding)&&void 0!==c?c:0,mightContain:t=>{var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),u}(i,t.fe,this.Le.nt(),n,r))}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=g$(n).toUint8Array()}catch(t){if(t instanceof u$)return rJ("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new F1(s,i,r)}catch(t){return rJ(t instanceof L1?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Le.nt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());t.mightContain(s)||(this.We(e,n,null),i++)})),i}it(t){const e=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&d0(r.target)){const e=new DJ(r.target.path);null!==this.qe.get(e)||this.st(i,e)||this.We(i,e,z$.newNoDocument(e,t))}n.De&&(e.set(i,n.ve()),n.Fe())}}));let n=H0();this.Qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const i=new k1(t,e,this.Ke,this.qe,n);return this.qe=M0(),this.Qe=j1(),this.Ke=new s$(xJ),i}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const i=this.ze(t);this.st(t,e)?i.Me(e,1):i.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new H1,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new l$(xJ),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||nJ("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new H1),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function j1(){return new s$(DJ.comparator)}function W1(){return new s$(DJ.comparator)}const Y1={asc:"ASCENDING",desc:"DESCENDING"},q1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X1={and:"AND",or:"OR"};class Z1{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function K1(t,e){return t.useProto3Json||KJ(e)?e:{value:e}}function Q1(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function J1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $1(t,e){return Q1(t,e.toTimestamp())}function t2(t){return aJ(!!t),wJ.fromTimestamp(function(t){const e=f$(t);return new bJ(e.seconds,e.nanos)}(t))}function e2(t,e){return n2(t,e).canonicalString()}function n2(t,e){const n=function(t){return new AJ(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function i2(t){const e=AJ.fromString(t);return aJ(I2(e)),e}function r2(t,e){return e2(t.databaseId,e.path)}function s2(t,e){const n=i2(e);if(n.get(1)!==t.databaseId.projectId)throw new cJ(hJ.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new cJ(hJ.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new DJ(h2(n))}function o2(t,e){return e2(t.databaseId,e)}function a2(t){const e=i2(t);return 4===e.length?AJ.emptyPath():h2(e)}function l2(t){return new AJ(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function h2(t){return aJ(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function c2(t,e,n){return{name:r2(t,e),fields:n.value.mapValue.fields}}function u2(t,e){let n;if(e instanceof m1)n={update:c2(t,e.key,e.value)};else if(e instanceof T1)n={delete:r2(t,e.key)};else if(e instanceof g1)n={update:c2(t,e.key,e.data),updateMask:x2(e.fieldMask)};else{if(!(e instanceof E1))return oJ();n={verify:r2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof J0)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $0)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof e1)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof i1)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw oJ()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:$1(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:oJ()}(t,e.precondition)),n}function p2(t,e){return{documents:[o2(t,e.path)]}}function d2(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=o2(t,r);const s=function(t){if(0!==t.length)return E2(X$.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:v2(t.field),direction:g2(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=K1(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:r}}function f2(t){let e=a2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){aJ(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=m2(t);return e instanceof X$&&K$(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new j$(T2(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,KJ(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new G$(n,e)}(n.startAt));let h=null;return n.endAt&&(h=function(t){const e=!t.before,n=t.values||[];return new G$(n,e)}(n.endAt)),m0(e,r,o,s,a,"F",l,h)}function m2(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=T2(t.unaryFilter.field);return q$.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=T2(t.unaryFilter.field);return q$.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=T2(t.unaryFilter.field);return q$.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=T2(t.unaryFilter.field);return q$.create(r,"!=",{nullValue:"NULL_VALUE"});default:return oJ()}}(t):void 0!==t.fieldFilter?function(t){return q$.create(T2(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oJ()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return X$.create(t.compositeFilter.filters.map((t=>m2(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return oJ()}}(t.compositeFilter.op))}(t):oJ()}function g2(t){return Y1[t]}function y2(t){return q1[t]}function _2(t){return X1[t]}function v2(t){return{fieldPath:t.canonicalString()}}function T2(t){return RJ.fromServerFormat(t.fieldPath)}function E2(t){return t instanceof q$?function(t){if("=="===t.op){if(P$(t.value))return{unaryFilter:{field:v2(t.field),op:"IS_NAN"}};if(M$(t.value))return{unaryFilter:{field:v2(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(P$(t.value))return{unaryFilter:{field:v2(t.field),op:"IS_NOT_NAN"}};if(M$(t.value))return{unaryFilter:{field:v2(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:v2(t.field),op:y2(t.op),value:t.value}}}(t):t instanceof X$?function(t){const e=t.getFilters().map((t=>E2(t)));return 1===e.length?e[0]:{compositeFilter:{op:_2(t.op),filters:e}}}(t):oJ()}function x2(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function I2(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class b2{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wJ.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:wJ.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p$.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new b2(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new b2(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new b2(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new b2(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class w2{constructor(t){this.ct=t}}function S2(t){const e=f2({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?I0(e,e.limit,"L"):e}class A2{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(m$(t.integerValue));else if("doubleValue"in t){const n=m$(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),QJ(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At("".concat(n.seconds||"")),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(g$(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?k$(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):oJ()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const i of Object.keys(n))this.Rt(i,e),this.It(n[i],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const i of n)this.It(i,e)}gt(t,e){this.Et(e,37),DJ.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}A2.bt=new A2;class C2{constructor(){this._n=new R2}addToCollectionParentIndex(t,e){return this._n.add(e),BJ.resolve()}getCollectionParents(t,e){return BJ.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return BJ.resolve()}deleteFieldIndex(t,e){return BJ.resolve()}deleteAllFieldIndexes(t){return BJ.resolve()}createTargetIndexes(t,e){return BJ.resolve()}getDocumentsMatchingTarget(t,e){return BJ.resolve(null)}getIndexType(t,e){return BJ.resolve(0)}getFieldIndexes(t,e){return BJ.resolve([])}getNextCollectionGroupToUpdate(t){return BJ.resolve(null)}getMinOffset(t,e){return BJ.resolve(PJ.min())}getMinOffsetFromCollectionGroup(t,e){return BJ.resolve(PJ.min())}updateCollectionGroup(t,e,n){return BJ.resolve()}updateIndexEntries(t,e){return BJ.resolve()}}class R2{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new l$(AJ.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new l$(AJ.comparator)).toArray()}}new Uint8Array(0);class D2{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new D2(t,D2.DEFAULT_COLLECTION_PERCENTILE,D2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}D2.DEFAULT_COLLECTION_PERCENTILE=10,D2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,D2.DEFAULT=new D2(41943040,D2.DEFAULT_COLLECTION_PERCENTILE,D2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),D2.DISABLED=new D2(-1,0,0);class O2{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new O2(0)}static Bn(){return new O2(-1)}}class N2{constructor(){this.changes=new O0((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,z$.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?BJ.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class M2{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class P2{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&p1(n.mutation,t,c$.empty(),bJ.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,H0()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H0();const i=k0();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=F0();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=k0();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,H0())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=M0();const s=B0(),o=B0();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof g1)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),p1(o.mutation,e,o.mutation.getFieldMask(),bJ.now())):s.set(e.key,c$.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new M2(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=B0();let i=new s$(((t,e)=>t-e)),r=H0();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||c$.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||H0()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,h=U0();l.forEach((t=>{if(!r.has(t)){const i=c1(e.get(t),n.get(t));null!==i&&h.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,h))}return BJ.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return DJ.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):_0(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):BJ.resolve(k0());let o=-1,a=r;return s.next((e=>BJ.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?BJ.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,H0()))).next((t=>({batchId:o,changes:L0(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new DJ(e)).next((t=>{let e=F0();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=F0();return this.indexManager.getCollectionParents(t,r).next((o=>BJ.forEach(o,(o=>{const a=function(t,e){return new f0(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,z$.newInvalidDocument(i)))}));let n=F0();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&p1(s.mutation,i,c$.empty(),bJ.now()),A0(e,i)&&(n=n.insert(t,i))})),n}))}}class F2{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return BJ.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:t2(t.createTime)}}(e)),BJ.resolve()}getNamedQuery(t,e){return BJ.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:S2(t.bundledQuery),readTime:t2(t.readTime)}}(e)),BJ.resolve()}}class L2{constructor(){this.overlays=new s$(DJ.comparator),this.hr=new Map}getOverlay(t,e){return BJ.resolve(this.overlays.get(e))}getOverlays(t,e){const n=k0();return BJ.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),BJ.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),BJ.resolve()}getOverlaysForCollection(t,e,n){const i=k0(),r=e.length+1,s=new DJ(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return BJ.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new s$(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=k0(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=k0(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return BJ.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new b1(e,n));let r=this.hr.get(e);void 0===r&&(r=H0(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class k2{constructor(){this.Pr=new l$(U2.Ir),this.Tr=new l$(U2.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new U2(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new U2(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new DJ(new AJ([])),n=new U2(e,t),i=new U2(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new DJ(new AJ([])),n=new U2(e,t),i=new U2(e,t+1);let r=H0();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new U2(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class U2{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return DJ.comparator(t.key,e.key)||xJ(t.pr,e.pr)}static Er(t,e){return xJ(t.pr,e.pr)||DJ.comparator(t.key,e.key)}}class B2{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new l$(U2.Ir)}checkEmpty(t){return BJ.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new x1(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.wr=this.wr.add(new U2(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return BJ.resolve(s)}lookupMutationBatch(t,e){return BJ.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return BJ.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return BJ.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return BJ.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new U2(e,0),i=new U2(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),BJ.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new l$(xJ);return e.forEach((t=>{const e=new U2(t,0),i=new U2(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),BJ.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;DJ.isDocumentKey(r)||(r=r.child(""));const s=new U2(new DJ(r),0);let o=new l$(xJ);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),BJ.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){aJ(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return BJ.forEach(e.mutations,(i=>{const r=new U2(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new U2(e,0),i=this.wr.firstAfterOrEqual(n);return BJ.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,BJ.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class z2{constructor(t){this.vr=t,this.docs=new s$(DJ.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return BJ.resolve(n?n.document.mutableCopy():z$.newInvalidDocument(e))}getEntries(t,e){let n=M0();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():z$.newInvalidDocument(t))})),BJ.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=M0();const s=e.path,o=new DJ(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||FJ(MJ(o),n)<=0||(i.has(o.key)||A0(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return BJ.resolve(r)}getAllFromCollectionGroup(t,e,n,i){oJ()}Fr(t,e){return BJ.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new G2(this)}getSize(t){return BJ.resolve(this.size)}}class G2 extends N2{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),BJ.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class H2{constructor(t){this.persistence=t,this.Mr=new O0((t=>u0(t)),p0),this.lastRemoteSnapshotVersion=wJ.min(),this.highestTargetId=0,this.Or=0,this.Nr=new k2,this.targetCount=0,this.Br=O2.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),BJ.resolve()}getLastRemoteSnapshotVersion(t){return BJ.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return BJ.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),BJ.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),BJ.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new O2(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,BJ.resolve()}updateTargetData(t,e){return this.qn(e),BJ.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,BJ.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),BJ.waitFor(r).next((()=>i))}getTargetCount(t){return BJ.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return BJ.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),BJ.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),BJ.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),BJ.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return BJ.resolve(n)}containsKey(t,e){return BJ.resolve(this.Nr.containsKey(e))}}class V2{constructor(t,e){this.Lr={},this.overlays={},this.kr=new ZJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new H2(this),this.indexManager=new C2,this.remoteDocumentCache=function(t){return new z2(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new w2(e),this.$r=new F2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new L2,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new B2(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){nJ("MemoryPersistence","Starting transaction:",t);const i=new j2(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return BJ.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class j2 extends kJ{constructor(t){super(),this.currentSequenceNumber=t}}class W2{constructor(t){this.persistence=t,this.zr=new k2,this.jr=null}static Hr(t){return new W2(t)}get Jr(){if(this.jr)return this.jr;throw oJ()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),BJ.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),BJ.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),BJ.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return BJ.forEach(this.Jr,(n=>{const i=DJ.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,wJ.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return BJ.or([()=>BJ.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class Y2{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=H0(),i=H0();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Y2(t,e.fromCache,n,i)}}class q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class X2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Ut()?8:GJ.v(kt())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new q2;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(eJ()<=ie.DEBUG&&nJ("QueryEngine","SDK will not create cache indexes for query:",S0(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),BJ.resolve()):(eJ()<=ie.DEBUG&&nJ("QueryEngine","Query:",S0(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(eJ()<=ie.DEBUG&&nJ("QueryEngine","The SDK decides to create cache indexes for query:",S0(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,T0(e))):BJ.resolve())}ji(t,e){if(y0(e))return BJ.resolve(null);let n=T0(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=I0(e,null,"F"),n=T0(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=H0(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,I0(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return y0(e)||i.isEqual(wJ.min())?BJ.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?BJ.resolve(null):(eJ()<=ie.DEBUG&&nJ("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),S0(e)),this.es(t,s,e,NJ(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new l$(R0(t));return e.forEach(((e,i)=>{A0(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return eJ()<=ie.DEBUG&&nJ("QueryEngine","Using full collection scan to execute query:",S0(e)),this.zi.getDocumentsMatchingQuery(t,e,PJ.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Z2{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new s$(xJ),this.rs=new O0((t=>u0(t)),p0),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new P2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}function K2(t,e,n,i){return new Z2(t,e,n,i)}async function Q2(t,e){const n=lJ(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=H0();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function J2(t){const e=lJ(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function $2(t,e,n){let i=H0(),r=H0();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=M0();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(wJ.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):nJ("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}function t3(t,e){const n=lJ(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function e3(t,e){const n=lJ(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((r=>r?(i=r,BJ.resolve(i)):n.Qr.allocateTargetId(t).next((r=>(i=new b2(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}async function n3(t,e,n){const i=lJ(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!jJ(t))throw t;nJ("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function i3(t,e,n){const i=lJ(t);let r=wJ.min(),s=H0();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=lJ(t),r=i.rs.get(n);return void 0!==r?BJ.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,T0(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?r:wJ.min(),n?s:H0()))).next((t=>(r3(i,C0(e),t),{documents:t,hs:s})))))}function r3(t,e,n){let i=t.ss.get(e)||wJ.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}class s3{constructor(){this.activeTargetIds=j0()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class o3{constructor(){this.no=new s3,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new s3,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class a3{io(t){}shutdown(){}}class l3{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){nJ("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){nJ("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let h3=null;function c3(){return null===h3?h3=268435456+Math.round(2147483648*Math.random()):h3++,"0x"+h3.toString(16)}const u3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class p3{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const d3="WebChannelConnection";class f3 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po="projects/".concat(n,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get wo(){return!1}So(t,e,n,i,r){const s=c3(),o=this.bo(t,e.toUriEncodedString());nJ("RestConnection","Sending RPC '".concat(t,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(nJ("RestConnection","Received RPC '".concat(t,"' ").concat(s,": "),e),e)),(e=>{throw rJ("RestConnection","RPC '".concat(t,"' ").concat(s," failed with error: "),e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+$Q,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=u3[t];return"".concat(this.fo,"/v1/").concat(e,":").concat(n)}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=c3();return new Promise(((s,o)=>{const a=new XQ;a.setWithCredentials(!0),a.listenOnce(jQ.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case VQ.NO_ERROR:const e=a.getResponseJson();nJ(d3,"XHR for RPC '".concat(t,"' ").concat(r," received:"),JSON.stringify(e)),s(e);break;case VQ.TIMEOUT:nJ(d3,"RPC '".concat(t,"' ").concat(r," timed out")),o(new cJ(hJ.DEADLINE_EXCEEDED,"Request time out"));break;case VQ.HTTP_ERROR:const n=a.getStatus();if(nJ(d3,"RPC '".concat(t,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(hJ).indexOf(e)>=0?e:hJ.UNKNOWN}(e.status);o(new cJ(t,e.message))}else o(new cJ(hJ.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new cJ(hJ.UNAVAILABLE,"Connection failed."));break;default:oJ()}}finally{nJ(d3,"RPC '".concat(t,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);nJ(d3,"RPC '".concat(t,"' ").concat(r," sending request:"),i),a.send(e,"POST",l,n,15)}))}Fo(t,e,n){const i=c3(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=GQ(),o=HQ(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const h=r.join("");nJ(d3,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(h),a);const c=s.createWebChannel(h,a);let u=!1,p=!1;const d=new p3({lo:e=>{p?nJ(d3,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(u||(nJ(d3,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),c.open(),u=!0),nJ(d3,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),c.send(e))},ho:()=>c.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(c,qQ.EventType.OPEN,(()=>{p||nJ(d3,"RPC '".concat(t,"' stream ").concat(i," transport opened."))})),f(c,qQ.EventType.CLOSE,(()=>{p||(p=!0,nJ(d3,"RPC '".concat(t,"' stream ").concat(i," transport closed")),d.Vo())})),f(c,qQ.EventType.ERROR,(e=>{p||(p=!0,rJ(d3,"RPC '".concat(t,"' stream ").concat(i," transport errored:"),e),d.Vo(new cJ(hJ.UNAVAILABLE,"The operation could not be completed")))})),f(c,qQ.EventType.MESSAGE,(e=>{var n;if(!p){const r=e.data[0];aJ(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){nJ(d3,"RPC '".concat(t,"' stream ").concat(i," received error:"),o);const e=o.status;let n=function(t){const e=S1[t];if(void 0!==e)return R1(e)}(e),r=o.message;void 0===n&&(n=hJ.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),p=!0,d.Vo(new cJ(n,r)),c.close()}else nJ(d3,"RPC '".concat(t,"' stream ").concat(i," received:"),r),d.mo(r)}})),f(o,WQ.STAT_EVENT,(e=>{e.stat===YQ.PROXY?nJ(d3,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===YQ.NOPROXY&&nJ(d3,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{d.Ro()}),0),d}}function m3(){return"undefined"!=typeof document?document:null}function g3(t){return new Z1(t,!0)}class y3{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&nJ("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class _3{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new y3(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===hJ.RESOURCE_EXHAUSTED?(iJ(e.toString()),iJ("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===hJ.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,i]=t;this.Wo===e&&this.o_(n,i)}),(e=>{t((()=>{const t=new cJ(hJ.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return nJ("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(nJ("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class v3 extends _3{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:oJ()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(aJ(void 0===e||"string"==typeof e),p$.fromBase64String(e||"")):(aJ(void 0===e||e instanceof Uint8Array),p$.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?hJ.UNKNOWN:R1(t.code);return new cJ(e,t.message||"")}(o);n=new G1(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=s2(t,i.document.name),s=t2(i.document.updateTime),o=i.document.createTime?t2(i.document.createTime):wJ.min(),a=new U$({mapValue:{fields:i.document.fields}}),l=z$.newFoundDocument(r,s,o,a),h=i.targetIds||[],c=i.removedTargetIds||[];n=new B1(h,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=s2(t,i.document),s=i.readTime?t2(i.readTime):wJ.min(),o=z$.newNoDocument(r,s),a=i.removedTargetIds||[];n=new B1([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=s2(t,i.document),s=i.removedTargetIds||[];n=new B1([],s,r,null)}else{if(!("filter"in e))return oJ();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new w1(i,r),o=t.targetId;n=new z1(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return wJ.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?wJ.min():e.readTime?t2(e.readTime):wJ.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=l2(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=d0(i)?{documents:p2(t,i)}:{query:d2(t,i).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=J1(t,e.resumeToken);const i=K1(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(wJ.min())>0){n.readTime=Q1(t,e.snapshotVersion.toTimestamp());const i=K1(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oJ()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=l2(this.serializer),e.removeTarget=t,this.t_(e)}}class T3 extends _3{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(aJ(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(aJ(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?t2(t.updateTime):t2(e);return n.isEqual(wJ.min())&&(n=t2(e)),new o1(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=t2(t.commitTime);return this.listener.T_(n,e)}return aJ(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=l2(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>u2(this.serializer,t)))};this.t_(e)}}class E3 extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new cJ(hJ.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.So(t,n2(e,n),i,s,o)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===hJ.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new cJ(hJ.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(t,n2(e,n),i,o,a,r)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===hJ.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new cJ(hJ.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class x3{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(iJ(e),this.g_=!1):nJ("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class I3{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{N3(this)&&(nJ("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=lJ(t);e.v_.add(4),await w3(e),e.x_.set("Unknown"),e.v_.delete(4),await b3(e)}(this))}))})),this.x_=new x3(n,i)}}async function b3(t){if(N3(t))for(const e of t.F_)await e(!0)}async function w3(t){for(const e of t.F_)await e(!1)}function S3(t,e){const n=lJ(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),O3(n)?D3(n):K3(n).Jo()&&C3(n,e))}function A3(t,e){const n=lJ(t),i=K3(n);n.C_.delete(e),i.Jo()&&R3(n,e),0===n.C_.size&&(i.Jo()?i.Xo():N3(n)&&n.x_.set("Unknown"))}function C3(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wJ.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}K3(t).c_(e)}function R3(t,e){t.O_.Oe(e),K3(t).l_(e)}function D3(t){t.O_=new V1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),K3(t).start(),t.x_.p_()}function O3(t){return N3(t)&&!K3(t).Ho()&&t.C_.size>0}function N3(t){return 0===lJ(t).v_.size}function M3(t){t.O_=void 0}async function P3(t){t.C_.forEach(((e,n)=>{C3(t,e)}))}async function F3(t,e){M3(t),O3(t)?(t.x_.S_(e),D3(t)):t.x_.set("Unknown")}async function L3(t,e,n){if(t.x_.set("Online"),e instanceof G1&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.C_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.C_.delete(i),t.O_.removeTarget(i))}(t,e)}catch(n){nJ("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await k3(t,n)}else if(e instanceof B1?t.O_.$e(e):e instanceof z1?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(wJ.min()))try{const e=await J2(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.C_.get(e);if(!i)return;t.C_.set(e,i.withResumeToken(p$.EMPTY_BYTE_STRING,i.snapshotVersion)),R3(t,e);const r=new b2(i.target,e,n,i.sequenceNumber);C3(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){nJ("RemoteStore","Failed to raise snapshot:",e),await k3(t,e)}}async function k3(t,e,n){if(!jJ(e))throw e;t.v_.add(1),await w3(t),t.x_.set("Offline"),n||(n=()=>J2(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{nJ("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await b3(t)}))}function U3(t,e){return e().catch((n=>k3(t,n,e)))}async function B3(t){const e=lJ(t),n=Q3(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;z3(e);)try{const t=await t3(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,G3(e,t)}catch(t){await k3(e,t)}H3(e)&&V3(e)}function z3(t){return N3(t)&&t.D_.length<10}function G3(t,e){t.D_.push(e);const n=Q3(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function H3(t){return N3(t)&&!Q3(t).Ho()&&t.D_.length>0}function V3(t){Q3(t).start()}async function j3(t){Q3(t).d_()}async function W3(t){const e=Q3(t);for(const n of t.D_)e.I_(n.mutations)}async function Y3(t,e,n){const i=t.D_.shift(),r=I1.from(i,e,n);await U3(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await B3(t)}async function q3(t,e){e&&Q3(t).P_&&await async function(t,e){if(function(t){return C1(t)&&t!==hJ.ABORTED}(e.code)){const n=t.D_.shift();Q3(t).Zo(),await U3(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await B3(t)}}(t,e),H3(t)&&V3(t)}async function X3(t,e){const n=lJ(t);n.asyncQueue.verifyOperationInProgress(),nJ("RemoteStore","RemoteStore received new credentials");const i=N3(n);n.v_.add(3),await w3(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await b3(n)}async function Z3(t,e){const n=lJ(t);e?(n.v_.delete(2),await b3(n)):e||(n.v_.add(2),await w3(n),n.x_.set("Unknown"))}function K3(t){return t.N_||(t.N_=function(t,e,n){const i=lJ(t);return i.R_(),new v3(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:P3.bind(null,t),To:F3.bind(null,t),u_:L3.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),O3(t)?D3(t):t.x_.set("Unknown")):(await t.N_.stop(),M3(t))}))),t.N_}function Q3(t){return t.B_||(t.B_=function(t,e,n){const i=lJ(t);return i.R_(),new T3(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:j3.bind(null,t),To:q3.bind(null,t),E_:W3.bind(null,t),T_:Y3.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await B3(t)):(await t.B_.stop(),t.D_.length>0&&(nJ("RemoteStore","Stopping write stream with ".concat(t.D_.length," pending writes")),t.D_=[]))}))),t.B_}class J3{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new uJ,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new J3(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cJ(hJ.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $3(t,e){if(iJ("AsyncQueue","".concat(e,": ").concat(t)),jJ(t))return new cJ(hJ.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class t4{constructor(t){this.comparator=t?(e,n)=>t(e,n)||DJ.comparator(e.key,n.key):(t,e)=>DJ.comparator(t.key,e.key),this.keyedMap=F0(),this.sortedSet=new s$(this.comparator)}static emptySet(t){return new t4(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof t4))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new t4;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class e4{constructor(){this.L_=new s$(DJ.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):oJ():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class n4{constructor(t,e,n,i,r,s,o,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new n4(t,e,t4.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&b0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class i4{constructor(){this.q_=void 0,this.Q_=[]}}class r4{constructor(){this.queries=new O0((t=>w0(t)),b0),this.onlineState="Unknown",this.K_=new Set}}async function s4(t,e){const n=lJ(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new i4),r)try{s.q_=await n.onListen(i)}catch(t){const n=$3(t,"Initialization of query '".concat(S0(e.query),"' failed"));return void e.onError(n)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&h4(n)}async function o4(t,e){const n=lJ(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),r=0===s.Q_.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function a4(t,e){const n=lJ(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.Q_)t.W_(r)&&(i=!0);e.q_=r}}i&&h4(n)}function l4(t,e,n){const i=lJ(t),r=i.queries.get(e);if(r)for(const s of r.Q_)s.onError(n);i.queries.delete(e)}function h4(t){t.K_.forEach((t=>{t.next()}))}class c4{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new n4(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=n4.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class u4{constructor(t){this.key=t}}class p4{constructor(t){this.key=t}}class d4{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=H0(),this.mutatedKeys=H0(),this.ua=R0(t),this.ca=new t4(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new e4,i=e?e.ca:this.ca;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const h=i.get(t),c=A0(this.query,e)?e:null,u=!!h&&this.mutatedKeys.has(h.key),p=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let d=!1;h&&c?h.data.isEqual(c.data)?u!==p&&(n.track({type:3,doc:c}),d=!0):this.Ia(h,c)||(n.track({type:2,doc:c}),d=!0,(a&&this.ua(c,a)>0||l&&this.ua(c,l)<0)&&(o=!0)):!h&&c?(n.track({type:0,doc:c}),d=!0):h&&!c&&(n.track({type:1,doc:h}),d=!0,(a||l)&&(o=!0)),d&&(c?(s=s.add(c),r=p?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,Xi:o,mutatedKeys:r}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const s=t.Pa.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oJ()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),i=null!=i&&i;const o=e&&!i?this.Ea():[],a=0===this.aa.size&&this.current&&!i?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new n4(this.query,t.ca,r,s,t.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new e4,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=H0(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new p4(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new u4(n))})),e}Ra(t){this.oa=t.hs,this.aa=H0();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return n4.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class f4{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class m4{constructor(t){this.key=t,this.ma=!1}}class g4{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new O0((t=>w0(t)),b0),this.pa=new Map,this.ya=new Set,this.wa=new s$(DJ.comparator),this.Sa=new Map,this.ba=new k2,this.Da={},this.Ca=new Map,this.va=O2.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function y4(t,e){const n=F4(t);let i,r;const s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const t=await e3(n.localStore,T0(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await _4(n,e,i,"current"===s,t.resumeToken),n.isPrimaryClient&&S3(n.remoteStore,t)}return r}async function _4(t,e,n,i,r){t.Ma=(e,n,i)=>async function(t,e,n,i){let r=e.view.ha(n);r.Xi&&(r=await i3(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.ha(n,r)})));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return R4(t,e.targetId,a.da),a.snapshot}(t,e,n,i);const s=await i3(t.localStore,e,!0),o=new d4(e,s.hs),a=o.ha(s.documents),l=U1.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),h=o.applyChanges(a,t.isPrimaryClient,l);R4(t,n,h.da);const c=new f4(e,n,o);return t.ga.set(e,c),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),h.snapshot}async function v4(t,e){const n=lJ(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter((t=>!b0(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await n3(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),A3(n.remoteStore,i.targetId),A4(n,i.targetId)})).catch(UJ)):(A4(n,i.targetId),await n3(n.localStore,i.targetId,!0))}async function T4(t,e){const n=lJ(t);try{const t=await function(t,e){const n=lJ(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let h=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?h=h.withResumeToken(p$.EMPTY_BYTE_STRING,wJ.min()).withLastLimboFreeSnapshotVersion(wJ.min()):s.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(s.resumeToken,i)),r=r.insert(a,h),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,h,s)&&o.push(n.Qr.updateTargetData(t,h))}));let a=M0(),l=H0();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push($2(t,s,e.documentUpdates).next((t=>{a=t.cs,l=t.ls}))),!i.isEqual(wJ.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return BJ.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,l))).next((()=>a))})).then((t=>(n.ns=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Sa.get(e);i&&(aJ(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ma=!0:t.modifiedDocuments.size>0?aJ(i.ma):t.removedDocuments.size>0&&(aJ(i.ma),i.ma=!1))})),await N4(n,t,e)}catch(t){await UJ(t)}}function E4(t,e,n){const i=lJ(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=lJ(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.Q_)r.U_(e)&&(i=!0)})),i&&h4(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function x4(t,e,n){const i=lJ(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Sa.get(e),s=r&&r.key;if(s){let t=new s$(DJ.comparator);t=t.insert(s,z$.newNoDocument(s,wJ.min()));const n=H0().add(s),r=new k1(wJ.min(),new Map,new s$(xJ),t,n);await T4(i,r),i.wa=i.wa.remove(s),i.Sa.delete(e),O4(i)}else await n3(i.localStore,e,!1).then((()=>A4(i,e,n))).catch(UJ)}async function I4(t,e){const n=lJ(t),i=e.batch.batchId;try{const t=await function(t,e){const n=lJ(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=BJ.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);aJ(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=H0();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);S4(n,i,null),w4(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await N4(n,t)}catch(t){await UJ(t)}}async function b4(t,e,n){const i=lJ(t);try{const t=await function(t,e){const n=lJ(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(aJ(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);S4(i,e,n),w4(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await N4(i,t)}catch(n){await UJ(n)}}function w4(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function S4(t,e,n){const i=lJ(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function A4(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||C4(t,e)}))}function C4(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(A3(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),O4(t))}function R4(t,e,n){for(const i of n)i instanceof u4?(t.ba.addReference(i.key,e),D4(t,i)):i instanceof p4?(nJ("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||C4(t,i.key)):oJ()}function D4(t,e){const n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(nJ("SyncEngine","New document in limbo: "+n),t.ya.add(i),O4(t))}function O4(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new DJ(AJ.fromString(e)),i=t.va.next();t.Sa.set(i,new m4(n)),t.wa=t.wa.insert(n,i),S3(t.remoteStore,new b2(T0(g0(n.path)),i,"TargetPurposeLimboResolution",ZJ._e))}}async function N4(t,e,n){const i=lJ(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=Y2.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=lJ(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>BJ.forEach(e,(e=>BJ.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>BJ.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!jJ(t))throw t;nJ("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.ns.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(t,r)}}}(i.localStore,s))}async function M4(t,e){const n=lJ(t);if(!n.currentUser.isEqual(e)){nJ("SyncEngine","User change. New user:",e.toKey());const t=await Q2(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new cJ(hJ.CANCELLED,e))}))})),t.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await N4(n,t.us)}}function P4(t,e){const n=lJ(t),i=n.Sa.get(e);if(i&&i.ma)return H0().add(i.key);{let t=H0();const i=n.pa.get(e);if(!i)return t;for(const e of i){const i=n.ga.get(e);t=t.unionWith(i.view.la)}return t}}function F4(t){const e=lJ(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x4.bind(null,e),e.fa.u_=a4.bind(null,e.eventManager),e.fa.xa=l4.bind(null,e.eventManager),e}function L4(t){const e=lJ(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b4.bind(null,e),e}class k4{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=g3(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return K2(this.persistence,new X2,t.initialUser,this.serializer)}createPersistence(t){return new V2(W2.Hr,this.serializer)}createSharedClientState(t){return new o3}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class U4{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>E4(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=M4.bind(null,this.syncEngine),await Z3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new r4}createDatastore(t){const e=g3(t.databaseInfo.databaseId),n=function(t){return new f3(t)}(t.databaseInfo);return function(t,e,n,i){return new E3(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new I3(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>E4(this.syncEngine,t,0)),l3.D()?new l3:new a3)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new g4(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=lJ(t);nJ("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await w3(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class B4{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):iJ("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class z4{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=JQ.UNAUTHENTICATED,this.clientId=EJ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{nJ("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(nJ("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new cJ(hJ.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new uJ;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(R8){const n=$3(R8,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function G4(t,e){t.asyncQueue.verifyOperationInProgress(),nJ("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Q2(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function H4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j4(t);nJ("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>X3(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>X3(e.remoteStore,n))),t._onlineComponents=e}function V4(t){return"FirebaseError"===t.name?t.code===hJ.FAILED_PRECONDITION||t.code===hJ.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function j4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){nJ("FirestoreClient","Using user provided OfflineComponentProvider");try{await G4(t,t._uninitializedComponentsProvider._offline)}catch(R8){const n=R8;if(!V4(n))throw n;rJ("Error using user provided cache. Falling back to memory cache: "+n),await G4(t,new k4)}}else nJ("FirestoreClient","Using default OfflineComponentProvider"),await G4(t,new k4);return t._offlineComponents}async function W4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(nJ("FirestoreClient","Using user provided OnlineComponentProvider"),await H4(t,t._uninitializedComponentsProvider._online)):(nJ("FirestoreClient","Using default OnlineComponentProvider"),await H4(t,new U4))),t._onlineComponents}function Y4(t){return W4(t).then((t=>t.syncEngine))}async function q4(t){const e=await W4(t),n=e.eventManager;return n.onListen=y4.bind(null,e.syncEngine),n.onUnlisten=v4.bind(null,e.syncEngine),n}function X4(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Z4=new Map;function K4(t,e,n){if(!n)throw new cJ(hJ.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Q4(t){if(!DJ.isDocumentKey(t))throw new cJ(hJ.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function J4(t){if(DJ.isDocumentKey(t))throw new cJ(hJ.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function $4(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":oJ()}function t5(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new cJ(hJ.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$4(t);throw new cJ(hJ.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}class e5{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new cJ(hJ.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new cJ(hJ.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new cJ(hJ.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X4(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new cJ(hJ.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new cJ(hJ.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new cJ(hJ.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class n5{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e5({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new cJ(hJ.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new cJ(hJ.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e5(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new dJ;switch(t.type){case"firstParty":return new yJ(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new cJ(hJ.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Z4.get(t);e&&(nJ("ComponentProvider","Removing Datastore"),Z4.delete(t),e.terminate())}(this),Promise.resolve()}}class i5{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new i5(this.firestore,t,this._query)}}class r5{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new s5(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new r5(this.firestore,t,this._key)}}class s5 extends i5{constructor(t,e,n){super(t,e,g0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new r5(this.firestore,null,new DJ(t))}withConverter(t){return new s5(this.firestore,t,this._path)}}function o5(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=Kt(t),K4("collection","path",e),t instanceof n5){const n=AJ.fromString(e,...i);return J4(n),new s5(t,null,n)}{if(!(t instanceof r5||t instanceof s5))throw new cJ(hJ.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(AJ.fromString(e,...i));return J4(n),new s5(t.firestore,null,n)}}function a5(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=Kt(t),1===arguments.length&&(e=EJ.newId()),K4("doc","path",e),t instanceof n5){const n=AJ.fromString(e,...i);return Q4(n),new r5(t,null,new DJ(n))}{if(!(t instanceof r5||t instanceof s5))throw new cJ(hJ.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(AJ.fromString(e,...i));return Q4(n),new r5(t.firestore,t instanceof s5?t.converter:null,new DJ(n))}}class l5{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new y3(this,"async_queue_retry"),this._u=()=>{const t=m3();t&&nJ("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=m3();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=m3();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new uJ;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(C8){if(!jJ(C8))throw C8;nJ("AsyncQueue","Operation failed with retryable error: "+C8)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw iJ("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=J3.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&oJ()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}function h5(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"==typeof n[i])return!0;return!1}(t,["next","error","complete"])}class c5 extends n5{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new l5,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||d5(this),this._firestoreClient.terminate()}}function u5(t,e){const n="string"==typeof t?t:e||"(default)",i=Le("object"==typeof t?t:Ge(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=Nt("firestore");t&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(t=t5(t,n5))._getSettings(),o="".concat(e,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&rJ("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=JQ.MOCK_USER;else{e=Lt(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new cJ(hJ.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new JQ(s)}t._authCredentials=new fJ(new pJ(e,n))}}(i,...t)}return i}function p5(t){return t._firestoreClient||d5(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function d5(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new T$(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,X4(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new z4(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class f5{constructor(t){this._byteString=t}static fromBase64String(t){try{return new f5(p$.fromBase64String(t))}catch(t){throw new cJ(hJ.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new f5(p$.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class m5{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new cJ(hJ.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new RJ(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class g5{constructor(t){this._methodName=t}}class y5{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new cJ(hJ.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new cJ(hJ.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xJ(this._lat,t._lat)||xJ(this._long,t._long)}}const _5=/^__.*__$/;class v5{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new g1(t,this.data,this.fieldMask,e,this.fieldTransforms):new m1(t,this.data,e,this.fieldTransforms)}}class T5{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new g1(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function E5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oJ()}}class x5{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new x5(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return k5(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(E5(this.du)&&_5.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class I5{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||g3(t)}Su(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new x5({du:t,methodName:e,wu:n,path:RJ.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function b5(t){const e=t._freezeSettings(),n=g3(t._databaseId);return new I5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function w5(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);M5("Data must be an object, but it was:",o,i);const a=O5(i,o);let l,h;if(s.merge)l=new c$(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=P5(e,i,n);if(!o.contains(r))throw new cJ(hJ.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));U5(t,r)||t.push(r)}l=new c$(t),h=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,h=o.fieldTransforms;return new v5(new U$(a),l,h)}class S5 extends g5{_toFieldTransform(t){if(2!==t.du)throw 1===t.du?t.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):t.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof S5}}function A5(t,e,n,i){const r=t.Su(1,e,n);M5("Data must be an object, but it was:",r,i);const s=[],o=U$.empty();i$(i,((t,i)=>{const a=L5(e,t,n);i=Kt(i);const l=r.fu(a);if(i instanceof S5)s.push(a);else{const t=D5(i,l);null!=t&&(s.push(a),o.set(a,t))}}));const a=new c$(s);return new T5(o,a,r.fieldTransforms)}function C5(t,e,n,i,r,s){const o=t.Su(1,e,n),a=[P5(e,i,n)],l=[r];if(s.length%2!=0)throw new cJ(hJ.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let p=0;p<s.length;p+=2)a.push(P5(e,s[p])),l.push(s[p+1]);const h=[],c=U$.empty();for(let p=a.length-1;p>=0;--p)if(!U5(h,a[p])){const t=a[p];let e=l[p];e=Kt(e);const n=o.fu(t);if(e instanceof S5)h.push(t);else{const i=D5(e,n);null!=i&&(h.push(t),c.set(t,i))}}const u=new c$(h);return new T5(c,u,o.fieldTransforms)}function R5(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return D5(n,t.Su(i?4:3,e))}function D5(t,e){if(N5(t=Kt(t)))return M5("Unsupported field value:",e,t),O5(t,e);if(t instanceof g5)return function(t,e){if(!E5(e.du))throw e.pu("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.pu("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=D5(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Kt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return q0(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=bJ.fromDate(t);return{timestampValue:Q1(e.serializer,n)}}if(t instanceof bJ){const n=new bJ(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Q1(e.serializer,n)}}if(t instanceof y5)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof f5)return{bytesValue:J1(e.serializer,t._byteString)};if(t instanceof r5){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:e2(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu("Unsupported field value: ".concat($4(t)))}(t,e)}function O5(t,e){const n={};return r$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):i$(t,((t,i)=>{const r=D5(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function N5(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof bJ||t instanceof y5||t instanceof f5||t instanceof r5||t instanceof g5)}function M5(t,e,n){if(!N5(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=$4(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function P5(t,e,n){if((e=Kt(e))instanceof m5)return e._internalPath;if("string"==typeof e)return L5(t,e);throw k5("Field path arguments must be of type string or ",t,!1,void 0,n)}const F5=new RegExp("[~\\*/\\[\\]]");function L5(t,e,n){if(e.search(F5)>=0)throw k5("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new m5(...e.split("."))._internalPath}catch(Yq){throw k5("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function k5(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new cJ(hJ.INVALID_ARGUMENT,a+t+l)}function U5(t,e){return t.some((t=>t.isEqual(e)))}class B5{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new r5(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new z5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(G5("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class z5 extends B5{data(){return super.data()}}function G5(t,e){return"string"==typeof e?L5(t,e):e instanceof m5?e._internalPath:e._delegate._internalPath}function H5(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new cJ(hJ.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V5{}class j5 extends V5{}class W5 extends j5{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new W5(t,e,n)}_apply(t){const e=this._parse(t);return Z5(t._query,e),new i5(t.firestore,t.converter,x0(t._query,e))}_parse(t){const e=b5(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new cJ(hJ.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){X5(o,s);const e=[];for(const n of o)e.push(q5(i,t,n));a={arrayValue:{values:e}}}else a=q5(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||X5(o,s),a=R5(n,e,o,"in"===s||"not-in"===s);return q$.create(r,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class Y5 extends V5{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Y5(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:X$.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)Z5(n,r),n=x0(n,r)}(t._query,e),new i5(t.firestore,t.converter,x0(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function q5(t,e,n){if("string"==typeof(n=Kt(n))){if(""===n)throw new cJ(hJ.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_0(e)&&-1!==n.indexOf("/"))throw new cJ(hJ.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=e.path.child(AJ.fromString(n));if(!DJ.isDocumentKey(i))throw new cJ(hJ.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return D$(t,new DJ(i))}if(n instanceof r5)return D$(t,n._key);throw new cJ(hJ.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat($4(n),"."))}function X5(t,e){if(!Array.isArray(t)||0===t.length)throw new cJ(hJ.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function Z5(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new cJ(hJ.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new cJ(hJ.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class K5{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(I$(t)){case 0:return null;case 1:return t.booleanValue;case 2:return m$(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(g$(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw oJ()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return i$(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new y5(m$(t.latitude),m$(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=_$(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(v$(t));default:return null}}convertTimestamp(t){const e=f$(t);return new bJ(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=AJ.fromString(t);aJ(I2(n));const i=new E$(n.get(1),n.get(3)),r=new DJ(n.popFirst(5));return i.isEqual(e)||iJ("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}function Q5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class J5{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $5 extends B5{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new t6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(G5("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class t6 extends $5{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class e6{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new J5(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new t6(this._firestore,this._userDataWriter,n.key,n,new J5(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new cJ(hJ.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new t6(t._firestore,t._userDataWriter,n.doc.key,n.doc,new J5(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new t6(t._firestore,t._userDataWriter,e.doc.key,e.doc,new J5(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:n6(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function n6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oJ()}}class i6 extends K5{constructor(t){super(),this.firestore=t}convertBytes(t){return new f5(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new r5(this.firestore,null,e)}}function r6(t,e){return function(t,e){const n=new uJ;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=L4(t);try{const t=await function(t,e){const n=lJ(t),i=bJ.now(),r=e.reduce(((t,e)=>t.add(e.key)),H0());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=M0(),l=H0();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=d1(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new g1(t.key,e,B$(e.value.mapValue),a1.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:L0(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new s$(xJ)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await N4(i,t.changes),await B3(i.remoteStore)}catch(t){const e=$3(t,"Failed to persist write");n.reject(e)}}(await Y4(t),e,n))),n.promise}(p5(t),e)}function s6(t,e,n){const i=n.docs.get(e._key),r=new i6(t);return new $5(t,r,e._key,i,new J5(n.hasPendingWrites,n.fromCache),e.converter)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){$Q=t}(Be),Fe(new Qt("firestore",((t,n)=>{let{instanceIdentifier:i,options:r}=n;const s=t.getProvider("app").getImmediate(),o=new c5(new mJ(t.getProvider("auth-internal")),new vJ(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new cJ(hJ.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new E$(t.options.projectId,e)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),He(QQ,"4.4.2",t),He(QQ,"4.4.2","esm2017")}();class o6{constructor(){this.buildings="buildings"}async add(t){const e=u5(Ge()),{lat:n,lng:i,userID:r,name:s,models:o}=t,a=await function(t,e){const n=t5(t.firestore,c5),i=a5(t),r=Q5(t.converter,e);return r6(n,[w5(b5(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,a1.exists(!1))]).then((()=>i))}(o5(e,this.buildings),{lat:n,lng:i,userID:r,name:s,models:o});return a.id}async getBuildings(t){const e=function(t,e){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];e instanceof V5&&n.push(e),n=n.concat(r),function(t){const e=t.filter((t=>t instanceof Y5)).length,n=t.filter((t=>t instanceof W5)).length;if(e>1||e>0&&n>0)throw new cJ(hJ.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)t=o._apply(t);return t}(o5(u5(Ge()),this.buildings),function(t,e,n){const i=e,r=G5("where",t);return W5._create(r,i,n)}("userID","==",t.uid));return new Promise((t=>{const n=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r,s,o;t=Kt(t);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||h5(n[l])||(a=n[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(h5(n[l])){const t=n[l];n[l]=null===(r=t.next)||void 0===r?void 0:r.bind(t),n[l+1]=null===(s=t.error)||void 0===s?void 0:s.bind(t),n[l+2]=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}let c,u,p;if(t instanceof r5)u=t5(t.firestore,c5),p=g0(t._key.path),c={next:e=>{n[l]&&n[l](s6(u,t,e))},error:n[l+1],complete:n[l+2]};else{const e=t5(t,i5);u=t5(e.firestore,c5),p=e._query;const i=new i6(u);c={next:t=>{n[l]&&n[l](new e6(u,i,e,t))},error:n[l+1],complete:n[l+2]},H5(t._query)}return function(t,e,n,i){const r=new B4(i),s=new c4(e,r,n);return t.asyncQueue.enqueueAndForget((async()=>s4(await q4(t),s))),()=>{r.La(),t.asyncQueue.enqueueAndForget((async()=>o4(await q4(t),s)))}}(p5(u),p,h,c)}(e,(e=>{const i=[];e.docs.forEach((t=>{i.push({...t.data(),uid:t.id})})),n(),t(i)}))}))}}class a6{constructor(t,e){this.components=new lE,this.style="mapbox://styles/mapbox/light-v10",this.map=void 0,this.clickedCoordinates={lat:0,lng:0},this.center={lat:0,lng:0},this.labels={},this.database=new o6,this.events=void 0,this.storeMousePosition=t=>{this.clickedCoordinates={...t.lngLat}},this.events=e;const n=this.getConfig(t);this.map=this.createMap(n),this.initializeComponent(n),this.createScene()}dispose(){this.components.dispose(),this.map=null,this.components=null;for(const t in this.labels){const e=this.labels[t];e.removeFromParent(),e.element.remove()}this.labels={}}async getAllBuildings(t){const e=await this.database.getBuildings(t);this.components&&this.addToScene(e)}async addBuilding(t){const{lat:e,lng:n}=this.clickedCoordinates,i={userID:t.uid,lat:e,lng:n,uid:"",name:"",models:[]};i.uid=await this.database.add(i),this.addToScene([i])}addToScene(t){for(const e of t){const{uid:t,lng:n,lat:i}=e,r=this.createHTMLElement(e),s=new uT(r),o=Nq.MercatorCoordinate.fromLngLat({...this.center},0),a=o.meterInMercatorCoordinateUnits(),l=Nq.MercatorCoordinate.fromLngLat({lng:n,lat:i},0);l.x/=a,l.y/=a,o.x/=a,o.y/=a,s.position.set(l.x-o.x,0,l.y-o.y),this.components.scene.get().add(s),this.labels[t]=s}}createHTMLElement(t){const e=document.createElement("div");return e.textContent="\ud83c\udfe2",e.onclick=()=>{this.events.trigger({type:"OPEN_BUILDING",payload:t})},e.classList.add("thumbnail"),e}initializeComponent(t){this.components.scene=new ST(this.components),this.components.camera=new Oq,this.components.renderer=this.createRenderer(t),this.components.init()}getCoordinates(t){return Nq.MercatorCoordinate.fromLngLat(t.center,0)}createRenderer(t){const e=this.getCoordinates(t);return new Dq(this.components,this.map,e)}createMap(t){const e=new Nq.Map({...t,style:this.style,antialias:!0});return e.on("contextmenu",this.storeMousePosition),e}createScene(){const t=this.components.scene.get();t.background=null;const e=new ey(16777215);e.position.set(0,-70,100).normalize(),t.add(e);const n=new ey(16777215);n.position.set(0,70,100).normalize(),t.add(n)}getConfig(t){const e=[76.95884245733829,11.022957822087053];return this.center={lng:e[0],lat:e[1]},{container:t,accessToken:"pk.eyJ1IjoidHRyZ2hhcnNoYTEzIiwiYSI6ImNsc3p4MW5iMTB3cGgyam8yYmd3cXdwZXoifQ.pXgCdTqbmkx24VLq5Zc53A",zoom:20,pitch:30,bearing:-30,center:e,buildings:[]}}}const l6={viewer:null,async start(t,e,n){this.viewer||(this.viewer=new a6(t,n),await this.viewer.getAllBuildings(e))},remove(){this.viewer&&(this.viewer.dispose(),this.viewer=null)},async addBuilding(t){this.viewer&&await this.viewer.addBuilding(t)}},h6="firebasestorage.googleapis.com",c6="storageBucket";class u6 extends zt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(f6(t),"Firebase Storage: ".concat(e," (").concat(f6(t),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,u6.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return f6(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var p6,d6;function f6(t){return"storage/"+t}function m6(){return new u6(p6.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function g6(){return new u6(p6.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function y6(){return new u6(p6.CANCELED,"User canceled the upload/download.")}function _6(){return new u6(p6.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v6(t){return new u6(p6.INVALID_ARGUMENT,t)}function T6(){return new u6(p6.APP_DELETED,"The Firebase app was deleted.")}function E6(t,e){return new u6(p6.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function x6(t){throw new u6(p6.INTERNAL_ERROR,"Internal error: "+t)}!function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(p6||(p6={}));class I6{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=I6.makeFromUrl(t,e)}catch(C8){return new I6(t,"")}if(""===n.path)return n;throw i=t,new u6(p6.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(t,e){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(e===h6?"(?:storage.googleapis.com|storage.cloud.google.com)":e,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const e=a[l],i=e.regex.exec(t);if(i){const t=i[e.indices.bucket];let r=i[e.indices.path];r||(r=""),n=new I6(t,r),e.postModify(n);break}}if(null==n)throw function(t){return new u6(p6.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return n}}class b6{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(){}}function w6(t){return"string"===typeof t||t instanceof String}function S6(t){return A6()&&t instanceof Blob}function A6(){return"undefined"!==typeof Blob}function C6(t,e,n,i){if(i<e)throw v6("Invalid value for '".concat(t,"'. Expected ").concat(e," or greater."));if(i>n)throw v6("Invalid value for '".concat(t,"'. Expected ").concat(n," or less."))}function R6(t,e,n){let i=e;return null==n&&(i="https://".concat(e)),"".concat(n,"://").concat(i,"/v0").concat(t)}function D6(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){n=n+(e(i)+"="+e(t[i]))+"&"}return n=n.slice(0,-1),n}function O6(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),r=-1!==e.indexOf(t);return n||i||r}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(d6||(d6={}));class N6{constructor(t,e,n,i,r,s,o,a,l,h,c){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=c,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{if(e)return void t(!1,new M6(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const e=n.getErrorCode()===d6.NO_ERROR,r=n.getStatus();if(!e||O6(r,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===d6.ABORT;return void t(!1,new M6(!1,null,e))}const s=-1!==this.successCodes_.indexOf(r);t(!0,new M6(s,n))}))},e=(t,e)=>{const n=this.resolve_,i=this.reject_,r=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(r,r.getResponse());!function(t){return void 0!==t}(t)?n():n(t)}catch(C8){i(C8)}else if(null!==r){const t=m6();t.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,t)):i(t)}else if(e.canceled){i(this.appDelete_?T6():y6())}else{i(g6())}};this.canceled_?e(0,new M6(!1,null,!0)):this.backoffId_=function(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let h=!1;function c(){if(!h){h=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(null,n)}}function u(e){r=setTimeout((()=>{r=null,t(d,l())}),e)}function p(){s&&clearTimeout(s)}function d(t){if(h)return void p();for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(t)return p(),void c.call(null,t,...n);if(l()||o)return p(),void c.call(null,t,...n);let s;i<64&&(i*=2),1===a?(a=2,s=0):s=1e3*(i+Math.random()),u(s)}let f=!1;function m(t){f||(f=!0,p(),h||(null!==r?(t||(a=2),clearTimeout(r),u(0)):t||(a=1)))}return u(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class M6{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function P6(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function F6(){const t=P6();for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(void 0!==t){const e=new t;for(let t=0;t<n.length;t++)e.append(n[t]);return e.getBlob()}if(A6())return new Blob(n);throw new u6(p6.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function L6(t){if("undefined"===typeof atob)throw e="base-64",new u6(p6.UNSUPPORTED_ENVIRONMENT,"".concat(e," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var e;return atob(t)}const k6={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class U6{constructor(t,e){this.data=t,this.contentType=e||null}}function B6(t,e){switch(t){case k6.RAW:return new U6(z6(e));case k6.BASE64:case k6.BASE64URL:return new U6(G6(t,e));case k6.DATA_URL:return new U6(function(t){const e=new H6(t);return e.base64?G6(k6.BASE64,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(C8){throw E6(k6.DATA_URL,"Malformed data URL.")}return z6(e)}(e.rest)}(e),new H6(e).contentType)}throw m6()}function z6(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&t.charCodeAt(++n),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else e.push(239,191,189)}else 56320===(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function G6(t,e){switch(t){case k6.BASE64:{const n=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(n||i){throw E6(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case k6.BASE64URL:{const n=-1!==e.indexOf("+"),i=-1!==e.indexOf("/");if(n||i){throw E6(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=L6(e)}catch(C8){if(C8.message.includes("polyfill"))throw C8;throw E6(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class H6{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw E6(k6.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;null!=n&&(this.base64=function(t,e){const n=t.length>=e.length;if(!n)return!1;return t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}class V6{constructor(t,e){let n=0,i="";S6(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(S6(this.data_)){const n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new V6(n)}{const n=new Uint8Array(this.data_.buffer,t,e-t);return new V6(n,!0)}}static getBlob(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(A6()){const t=e.map((t=>t instanceof V6?t.data_:t));return new V6(F6.apply(null,t))}{const t=e.map((t=>w6(t)?B6(k6.RAW,t).data:t.data_));let n=0;t.forEach((t=>{n+=t.byteLength}));const i=new Uint8Array(n);let r=0;return t.forEach((t=>{for(let e=0;e<t.length;e++)i[r++]=t[e]})),new V6(i,!0)}}uploadData(){return this.data_}}function j6(t){let e;try{e=JSON.parse(t)}catch(C8){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function W6(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Y6(t,e){return e}class q6{constructor(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||Y6}}let X6=null;function Z6(){if(X6)return X6;const t=[];t.push(new q6("bucket")),t.push(new q6("generation")),t.push(new q6("metageneration")),t.push(new q6("name","fullPath",!0));const e=new q6("name");e.xform=function(t,e){return function(t){return!w6(t)||t.length<2?t:W6(t)}(e)},t.push(e);const n=new q6("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new q6("timeCreated")),t.push(new q6("updated")),t.push(new q6("md5Hash",null,!0)),t.push(new q6("cacheControl",null,!0)),t.push(new q6("contentDisposition",null,!0)),t.push(new q6("contentEncoding",null,!0)),t.push(new q6("contentLanguage",null,!0)),t.push(new q6("contentType",null,!0)),t.push(new q6("metadata","customMetadata",!0)),X6=t,X6}function K6(t,e,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const t=n[s];i[t.local]=t.xform(i,e[t.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,i=t.fullPath,r=new I6(n,i);return e._makeStorageReference(r)}})}(i,t),i}function Q6(t,e,n){const i=j6(e);if(null===i)return null;return K6(t,i,n)}function J6(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class $6{constructor(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function t8(t){if(!t)throw m6()}function e8(t,e){return function(n,i){const r=Q6(t,i,e);return t8(null!==r),r}}function n8(t,e){return function(n,i){const r=Q6(t,i,e);return t8(null!==r),function(t,e,n,i){const r=j6(e);if(null===r)return null;if(!w6(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((e=>{const r=t.bucket,s=t.fullPath;return R6("/b/"+o(r)+"/o/"+o(s),n,i)+D6({alt:"media",token:e})}))[0]}(r,i,t.host,t._protocol)}}function i8(t){return function(e,n){let i;var r,s;return 401===e.getStatus()?i=e.getErrorText().includes("Firebase App Check token is invalid")?new u6(p6.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new u6(p6.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(s=t.bucket,i=new u6(p6.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(r=t.path,i=new u6(p6.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=e.getStatus(),i.serverResponse=n.serverResponse,i}}function r8(t){const e=i8(t);return function(n,i){let r=e(n,i);var s;return 404===n.getStatus()&&(s=t.path,r=new u6(p6.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function s8(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}function o8(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const l=s8(e,i,r),h="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+J6(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+a+"--",u=V6.getBlob(h,i,c);if(null===u)throw _6();const p={name:l.fullPath},d=R6(s,t.host,t._protocol),f=t.maxUploadRetryTime,m=new $6(d,"POST",e8(t,n),f);return m.urlParams=p,m.headers=o,m.body=u.uploadData(),m.errorHandler=i8(e),m}let a8=null;class l8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=d6.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=d6.ABORT,t()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=d6.NETWORK_ERROR,t()})),this.xhr_.addEventListener("load",(()=>{t()}))}))}send(t,e,n,i){if(this.sent_)throw x6("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw x6("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw x6("cannot .getStatus() before sending");try{return this.xhr_.status}catch(C8){return-1}}getResponse(){if(!this.sent_)throw x6("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw x6("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class h8 extends l8{initXhr(){this.xhr_.responseType="text"}}function c8(){return a8?a8():new h8}class u8{constructor(t,e){this._service=t,this._location=e instanceof I6?e:I6.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new u8(t,e)}get root(){const t=new I6(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W6(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new I6(this._location.bucket,t);return new u8(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new u6(p6.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function p8(t,e,n){t._throwIfRoot("uploadBytes");const i=o8(t.storage,t._location,Z6(),new V6(e,!0),n);return t.storage.makeRequestWithTokens(i,c8).then((e=>({metadata:e,ref:t})))}function d8(t){t._throwIfRoot("getDownloadURL");const e=function(t,e,n){const i=R6(e.fullServerUrl(),t.host,t._protocol),r=t.maxOperationRetryTime,s=new $6(i,"GET",n8(t,n),r);return s.errorHandler=r8(e),s}(t.storage,t._location,Z6());return t.storage.makeRequestWithTokens(e,c8).then((t=>{if(null===t)throw new u6(p6.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t}))}function f8(t){t._throwIfRoot("deleteObject");const e=function(t,e){const n=R6(e.fullServerUrl(),t.host,t._protocol),i=t.maxOperationRetryTime,r=new $6(n,"DELETE",(function(t,e){}),i);return r.successCodes=[200,204],r.errorHandler=r8(e),r}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,c8)}function m8(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),i=new I6(t._location.bucket,n);return new u8(t.storage,i)}function g8(t,e){if(t instanceof v8){const n=t;if(null==n._bucket)throw new u6(p6.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+c6+"' property when initializing the app?");const i=new u8(n,n._bucket);return null!=e?g8(i,e):i}return void 0!==e?m8(t,e):t}function y8(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof v8)return new u8(t,e);throw v6("To use ref(service, url), the first argument must be a Storage instance.")}return g8(t,e)}function _8(t,e){const n=null===e||void 0===e?void 0:e[c6];return null==n?null:I6.makeFromBucketSpec(n,t)}class v8{constructor(t,e,n,i,r){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=h6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?I6.makeFromBucketSpec(i,this._host):_8(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=I6.makeFromBucketSpec(this._url,t):this._bucket=_8(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){C6("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){C6("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});if(t){return(await t.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new u8(this,t)}_makeRequest(t,e,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new b6(T6());{const s=function(t,e,n,i,r,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=D6(t.urlParams),l=t.url+a,h=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(h,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(h,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(h,s),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(h,i),new N6(l,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}(t,this._appId,n,i,e,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(t,e){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,i).getPromise()}}const T8="@firebase/storage",E8="0.12.1",x8="storage";function I8(t){return f8(t=Kt(t))}function b8(t,e){return y8(t=Kt(t),e)}function w8(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge(),e=arguments.length>1?arguments[1]:void 0;t=Kt(t);const n=Le(t,x8).getImmediate({identifier:e}),i=Nt("storage");return i&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.host="".concat(e,":").concat(n),t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken="string"===typeof r?r:Lt(r,t.app.options.projectId))}(t,e,n,i)}(n,...i),n}function S8(t,e){let{instanceIdentifier:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new v8(i,r,s,n,Be)}Fe(new Qt(x8,S8,"PUBLIC").setMultipleInstances(!0)),He(T8,E8,""),He(T8,E8,"esm2017"),"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(t,e,n){const i=Number(0xffffffffn&e),r=Number(e>>32n);this.setUint32(t+(n?0:4),i,n),this.setUint32(t+(n?4:0),r,n)}});var A8=t=>new DataView(new ArrayBuffer(t)),C8=t=>new Uint8Array(t.buffer||t),R8=t=>(new TextEncoder).encode(String(t)),D8=t=>Math.min(4294967295,Number(t)),O8=t=>Math.min(65535,Number(t));function N8(t,e){if(void 0===e||e instanceof Date||(e=new Date(e)),t instanceof File)return{isFile:1,t:e||new Date(t.lastModified),i:t.stream()};if(t instanceof Response)return{isFile:1,t:e||new Date(t.headers.get("Last-Modified")||Date.now()),i:t.body};if(void 0===e)e=new Date;else if(isNaN(e))throw new Error("Invalid modification date.");if(void 0===t)return{isFile:0,t:e};if("string"==typeof t)return{isFile:1,t:e,i:R8(t)};if(t instanceof Blob)return{isFile:1,t:e,i:t.stream()};if(t instanceof Uint8Array||t instanceof ReadableStream)return{isFile:1,t:e,i:t};if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return{isFile:1,t:e,i:C8(t)};if(Symbol.asyncIterator in t)return{isFile:1,t:e,i:M8(t)};throw new TypeError("Unsupported input format.")}function M8(t){const e="next"in t?t:t[Symbol.asyncIterator]();return new ReadableStream({async pull(t){let n=0;for(;t.desiredSize>n;){const i=await e.next();if(!i.value){t.close();break}{const e=P8(i.value);t.enqueue(e),n+=e.byteLength}}}})}function P8(t){return"string"==typeof t?R8(t):t instanceof Uint8Array?t:C8(t)}function F8(t,e,n){if(void 0===e||e instanceof Uint8Array||(e=R8(e)),t instanceof File)return{o:k8(e||R8(t.name)),A:BigInt(t.size)};if(t instanceof Response){const i=t.headers.get("content-disposition"),r=i&&i.match(/;\s*filename\*?=["']?(.*?)["']?$/i),s=r&&r[1]||t.url&&new URL(t.url).pathname.split("/").findLast(Boolean),o=s&&decodeURIComponent(s),a=n||+t.headers.get("content-length");return{o:k8(e||R8(o)),A:BigInt(a)}}return e=k8(e,void 0!==t||void 0!==n),"string"==typeof t?{o:e,A:BigInt(R8(t).length)}:t instanceof Blob?{o:e,A:BigInt(t.size)}:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?{o:e,A:BigInt(t.byteLength)}:{o:e,A:L8(t,n)}}function L8(t,e){return e>-1?BigInt(e):t?void 0:0n}function k8(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t||t.every((t=>47===t)))throw new Error("The file must have a name.");if(e)for(;47===t[t.length-1];)t=t.subarray(0,-1);else 47!==t[t.length-1]&&(t=new Uint8Array([...t,47]));return t}var U8=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob("AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBwkCAW0CAAFjAAEIAQAKlQECSQEDfwNAIAEhAEEAIQIDQCAAQQF2IABBAXFBoIbi7X5scyEAIAJBAWoiAkEIRw0ACyABQQJ0IAA2AgAgAUEBaiIBQYACRw0ACwtJAQF/IAFBf3MhAUGAgAQhAkGAgAQgAGohAANAIAFB/wFxIAItAABzQQJ0KAIAIAFBCHZzIQEgAkEBaiICIABJDQALIAFBf3O4Cw"),(t=>t.charCodeAt(0))))),{c:B8,m:z8}=U8.exports,G8=C8(z8).subarray(65536);function H8(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(const n of function*(t){for(;t.length>65536;)yield t.subarray(0,65536),t=t.subarray(65536);t.length&&(yield t)}(t))G8.set(n),e=B8(n.length,e);return e}function V8(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t.getSeconds()>>1|t.getMinutes()<<5|t.getHours()<<11,r=t.getDate()|t.getMonth()+1<<5|t.getFullYear()-1980<<9;e.setUint16(n,i,1),e.setUint16(n+2,r,1)}function j8(t){const e=A8(30);return e.setUint32(0,1347093252),e.setUint32(4,754976768),V8(t.t,e,10),e.setUint16(26,t.o.length,1),C8(e)}async function*W8(t){let{i:e}=t;if("then"in e&&(e=await e),e instanceof Uint8Array)yield e,t.u=H8(e,0),t.A=BigInt(e.length);else{t.A=0n;const n=e.getReader();for(;;){const{value:e,done:i}=await n.read();if(i)break;t.u=H8(e,t.u),t.A+=BigInt(e.length),yield e}}}function Y8(t,e){const n=A8(16+(e?8:0));return n.setUint32(0,1347094280),n.setUint32(4,t.isFile?t.u:0,1),e?(n.setBigUint64(8,t.A,1),n.setBigUint64(16,t.A,1)):(n.setUint32(8,D8(t.A),1),n.setUint32(12,D8(t.A),1)),C8(n)}function q8(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=A8(46);return i.setUint32(0,1347092738),i.setUint32(4,755182848),i.setUint16(8,2048),V8(t.t,i,12),i.setUint32(16,t.isFile?t.u:0,1),i.setUint32(20,D8(t.A),1),i.setUint32(24,D8(t.A),1),i.setUint16(28,t.o.length,1),i.setUint16(30,n,1),i.setUint16(40,t.isFile?33204:16893,1),i.setUint32(42,D8(e),1),C8(i)}function X8(t,e,n){const i=A8(n);return i.setUint16(0,1,1),i.setUint16(2,n-4,1),16&n&&(i.setBigUint64(4,t.A,1),i.setBigUint64(12,t.A,1)),i.setBigUint64(n-8,e,1),C8(i)}function Z8(t){return t instanceof File||t instanceof Response?[[t],[t]]:[[t.input,t.name,t.size],[t.input,t.lastModified]]}function K8(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof e.length||Number.isInteger(e.length))&&e.length>0&&(n["Content-Length"]=String(e.length)),e.metadata&&(n["Content-Length"]=String((t=>function(t){let e=BigInt(22),n=0n,i=0;for(const r of t){if(!r.o)throw new Error("Every file must have a non-empty name.");if(void 0===r.A)throw new Error('Missing size for file "'.concat((new TextDecoder).decode(r.o),'".'));const t=r.A>=0xffffffffn,s=n>=0xffffffffn;n+=BigInt(46+r.o.length+(t&&8))+r.A,e+=BigInt(r.o.length+46+(12*s|28*t)),i||(i=t)}return(i||n>=0xffffffffn)&&(e+=BigInt(76)),e+n}(function*(t){for(const e of t)yield F8(...Z8(e)[0])}(t)))(e.metadata))),new Response(Q8(t),{headers:n})}function Q8(t){return M8(async function*(t){const e=[];let n=0n,i=0n,r=0;for await(const a of t){yield j8(a),yield a.o,a.isFile&&(yield*W8(a));const t=a.A>=0xffffffffn,s=12*(n>=0xffffffffn)|28*t;yield Y8(a,t),e.push(q8(a,n,s)),e.push(a.o),s&&e.push(X8(a,n,s)),t&&(n+=8n),i++,n+=BigInt(46+a.o.length)+a.A,r||(r=t)}let s=0n;for(const a of e)yield a,s+=BigInt(a.length);if(r||n>=0xffffffffn){const t=A8(76);t.setUint32(0,1347094022),t.setBigUint64(4,BigInt(44),1),t.setUint32(12,755182848),t.setBigUint64(24,i,1),t.setBigUint64(32,i,1),t.setBigUint64(40,s,1),t.setBigUint64(48,n,1),t.setUint32(56,1347094023),t.setBigUint64(64,n+s,1),t.setUint32(72,1,1),yield C8(t)}const o=A8(22);o.setUint32(0,1347093766),o.setUint16(8,O8(i),1),o.setUint16(10,O8(i),1),o.setUint32(12,D8(s),1),o.setUint32(16,D8(n),1),yield C8(o)}(async function*(t){for await(const e of t){const[t,n]=Z8(e);yield Object.assign(N8(...n),F8(...t))}}(t)))}const J8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,$8=Object.keys,t9=Array.isArray;function e9(t,e){return"object"!=typeof e||$8(e).forEach((function(n){t[n]=e[n]})),t}"undefined"==typeof Promise||J8.Promise||(J8.Promise=Promise);const n9=Object.getPrototypeOf,i9={}.hasOwnProperty;function r9(t,e){return i9.call(t,e)}function s9(t,e){"function"==typeof e&&(e=e(n9(t))),("undefined"==typeof Reflect?$8:Reflect.ownKeys)(e).forEach((n=>{a9(t,n,e[n])}))}const o9=Object.defineProperty;function a9(t,e,n,i){o9(t,e,e9(n&&r9(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function l9(t){return{from:function(e){return t.prototype=Object.create(e.prototype),a9(t.prototype,"constructor",t),{extend:s9.bind(null,t.prototype)}}}}const h9=Object.getOwnPropertyDescriptor;function c9(t,e){let n;return h9(t,e)||(n=n9(t))&&c9(n,e)}const u9=[].slice;function p9(t,e,n){return u9.call(t,e,n)}function d9(t,e){return e(t)}function f9(t){if(!t)throw new Error("Assertion Failed")}function m9(t){J8.setImmediate?setImmediate(t):setTimeout(t,0)}function g9(t,e){return t.reduce(((t,n,i)=>{var r=e(n,i);return r&&(t[r[0]]=r[1]),t}),{})}function y9(t,e){if(r9(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],i=0,r=e.length;i<r;++i){var s=y9(t,e[i]);n.push(s)}return n}var o=e.indexOf(".");if(-1!==o){var a=t[e.substr(0,o)];return void 0===a?void 0:y9(a,e.substr(o+1))}}function _9(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){f9("string"!=typeof n&&"length"in n);for(var i=0,r=e.length;i<r;++i)_9(t,e[i],n[i])}else{var s=e.indexOf(".");if(-1!==s){var o=e.substr(0,s),a=e.substr(s+1);if(""===a)void 0===n?t9(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&r9(t,o)||(l=t[o]={}),_9(l,a,n)}}else void 0===n?t9(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function v9(t){var e={};for(var n in t)r9(t,n)&&(e[n]=t[n]);return e}const T9=[].concat;function E9(t){return T9.apply([],t)}const x9="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E9([8,16,32,64].map((t=>["Int","Uint","Float"].map((e=>e+t+"Array")))))).filter((t=>J8[t])),I9=x9.map((t=>J8[t]));g9(x9,(t=>[t,!0]));let b9=null;function w9(t){b9="undefined"!=typeof WeakMap&&new WeakMap;const e=S9(t);return b9=null,e}function S9(t){if(!t||"object"!=typeof t)return t;let e=b9&&b9.get(t);if(e)return e;if(t9(t)){e=[],b9&&b9.set(t,e);for(var n=0,i=t.length;n<i;++n)e.push(S9(t[n]))}else if(I9.indexOf(t.constructor)>=0)e=t;else{const n=n9(t);for(var r in e=n===Object.prototype?{}:Object.create(n),b9&&b9.set(t,e),t)r9(t,r)&&(e[r]=S9(t[r]))}return e}const{toString:A9}={};function C9(t){return A9.call(t).slice(8,-1)}const R9="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",D9="symbol"==typeof R9?function(t){var e;return null!=t&&(e=t[R9])&&e.apply(t)}:function(){return null},O9={};function N9(t){var e,n,i,r;if(1===arguments.length){if(t9(t))return t.slice();if(this===O9&&"string"==typeof t)return[t];if(r=D9(t)){for(n=[];!(i=r.next()).done;)n.push(i.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const M9="undefined"!=typeof Symbol?t=>"AsyncFunction"===t[Symbol.toStringTag]:()=>!1;var P9="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F9(t,e){P9=t,L9=e}var L9=()=>!0;const k9=!new Error("").stack;function U9(){if(k9)try{throw U9.arguments,new Error}catch(C8){return C8}return new Error}function B9(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(L9).map((t=>"\n"+t)).join("")):""}var z9=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],G9=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(z9),H9={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function V9(t,e){this._e=U9(),this.name=t,this.message=e}function j9(t,e){return t+". Errors: "+Object.keys(e).map((t=>e[t].toString())).filter(((t,e,n)=>n.indexOf(t)===e)).join("\n")}function W9(t,e,n,i){this._e=U9(),this.failures=e,this.failedKeys=i,this.successCount=n,this.message=j9(t,e)}function Y9(t,e){this._e=U9(),this.name="BulkError",this.failures=Object.keys(e).map((t=>e[t])),this.failuresByPos=e,this.message=j9(t,e)}l9(V9).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+B9(this._e,2))}},toString:function(){return this.name+": "+this.message}}),l9(W9).from(V9),l9(Y9).from(V9);var q9=G9.reduce(((t,e)=>(t[e]=e+"Error",t)),{});const X9=V9;var Z9=G9.reduce(((t,e)=>{var n=e+"Error";function i(t,i){this._e=U9(),this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(i?"\n "+i:""),this.inner=i||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=H9[e]||n,this.inner=null)}return l9(i).from(X9),t[e]=i,t}),{});Z9.Syntax=SyntaxError,Z9.Type=TypeError,Z9.Range=RangeError;var K9=z9.reduce(((t,e)=>(t[e+"Error"]=Z9[e],t)),{}),Q9=G9.reduce(((t,e)=>(-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Z9[e]),t)),{});function J9(){}function $9(t){return t}function t7(t,e){return null==t||t===$9?e:function(n){return e(t(n))}}function e7(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function n7(t,e){return t===J9?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?e7(i,this.onsuccess):i),r&&(this.onerror=this.onerror?e7(r,this.onerror):r),void 0!==s?s:n}}function i7(t,e){return t===J9?e:function(){t.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?e7(n,this.onsuccess):n),i&&(this.onerror=this.onerror?e7(i,this.onerror):i)}}function r7(t,e){return t===J9?e:function(n){var i=t.apply(this,arguments);e9(n,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?e7(r,this.onsuccess):r),s&&(this.onerror=this.onerror?e7(s,this.onerror):s),void 0===i?void 0===o?void 0:o:e9(i,o)}}function s7(t,e){return t===J9?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function o7(t,e){return t===J9?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return n.then((function(){return e.apply(i,s)}))}return e.apply(this,arguments)}}Q9.ModifyError=W9,Q9.DexieError=V9,Q9.BulkError=Y9;var a7={};const[l7,h7,c7]="undefined"==typeof Promise?[]:(()=>{let t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,n9(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,n9(e),t]})(),u7=h7&&h7.then,p7=l7&&l7.constructor,d7=!!c7;var f7=!1,m7=c7?()=>{c7.then(U7)}:J8.setImmediate?setImmediate.bind(null,U7):J8.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver((()=>{U7(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(U7,0)},g7=function(t,e){w7.push([t,e]),_7&&(m7(),_7=!1)},y7=!0,_7=!0,v7=[],T7=[],E7=null,x7=$9,I7={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ltt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((t=>{try{ltt(t[0],t[1])}catch(t){}}))}},b7=I7,w7=[],S7=0,A7=[];function C7(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=J9,this._lib=!1;var e=this._PSD=b7;if(P9&&(this._stackHolder=U9(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==a7)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&N7(this,this._value))}this._state=null,this._value=null,++e.ref,O7(this,t)}const R7={get:function(){var t=b7,e=X7;function n(n,i){var r=!t.global&&(t!==b7||e!==X7);const s=r&&!J7();var o=new C7(((e,o)=>{P7(this,new D7(ott(n,t,r,s),ott(i,t,r,s),e,o,t))}));return P9&&k7(o,this),o}return n.prototype=a7,n},set:function(t){a9(this,"then",t&&t.prototype===a7?R7:{get:function(){return t},set:R7.set})}};function D7(t,e,n,i,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i,this.psd=r}function O7(t,e){try{e((e=>{if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&B7();e&&"function"==typeof e.then?O7(t,((t,n)=>{e instanceof C7?e._then(t,n):e.then(t,n)})):(t._state=!0,t._value=e,M7(t)),n&&z7()}}),N7.bind(null,t))}catch(e){N7(t,e)}}function N7(t,e){if(T7.push(e),null===t._state){var n=t._lib&&B7();e=x7(e),t._state=!1,t._value=e,P9&&null!==e&&"object"==typeof e&&!e._promise&&function(t,e,n){try{t.apply(null,void 0)}catch(t){}}((()=>{var n=c9(e,"stack");e._promise=t,a9(e,"stack",{get:()=>f7?n&&(n.get?n.get.apply(e):n.value):t.stack})})),function(t){v7.some((e=>e._value===t._value))||v7.push(t)}(t),M7(t),n&&z7()}}function M7(t){var e=t._listeners;t._listeners=[];for(var n=0,i=e.length;n<i;++n)P7(t,e[n]);var r=t._PSD;--r.ref||r.finalize(),0===S7&&(++S7,g7((()=>{0==--S7&&G7()}),[]))}function P7(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++S7,g7(F7,[n,t,e])}else t._listeners.push(e)}function F7(t,e,n){try{E7=e;var i,r=e._value;e._state?i=t(r):(T7.length&&(T7=[]),i=t(r),-1===T7.indexOf(r)&&function(t){for(var e=v7.length;e;)if(v7[--e]._value===t._value)return void v7.splice(e,1)}(e)),n.resolve(i)}catch(t){n.reject(t)}finally{E7=null,0==--S7&&G7(),--n.psd.ref||n.psd.finalize()}}function L7(t,e,n){if(e.length===n)return e;var i="";if(!1===t._state){var r,s,o=t._value;null!=o?(r=o.name||"Error",s=o.message||o,i=B9(o,0)):(r=o,s=""),e.push(r+(s?": "+s:"")+i)}return P9&&((i=B9(t._stackHolder,2))&&-1===e.indexOf(i)&&e.push(i),t._prev&&L7(t._prev,e,n)),e}function k7(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function U7(){B7()&&z7()}function B7(){var t=y7;return y7=!1,_7=!1,t}function z7(){var t,e,n;do{for(;w7.length>0;)for(t=w7,w7=[],n=t.length,e=0;e<n;++e){var i=t[e];i[0].apply(null,i[1])}}while(w7.length>0);y7=!0,_7=!0}function G7(){var t=v7;v7=[],t.forEach((t=>{t._PSD.onunhandled.call(null,t._value,t)}));for(var e=A7.slice(0),n=e.length;n;)e[--n]()}function H7(t){return new C7(a7,!1,t)}function V7(t,e){var n=b7;return function(){var i=B7(),r=b7;try{return ntt(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{ntt(r,!1),i&&z7()}}}s9(C7.prototype,{then:R7,_then:function(t,e){P7(this,new D7(null,null,t,e,b7))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,(t=>t instanceof e?n(t):H7(t))):this.then(null,(t=>t&&t.name===e?n(t):H7(t)))},finally:function(t){return this.then((e=>(t(),e)),(e=>(t(),H7(e))))},stack:{get:function(){if(this._stack)return this._stack;try{f7=!0;var t=L7(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{f7=!1}}},timeout:function(t,e){return t<1/0?new C7(((n,i)=>{var r=setTimeout((()=>i(new Z9.Timeout(e))),t);this.then(n,i).finally(clearTimeout.bind(null,r))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&a9(C7.prototype,Symbol.toStringTag,"Dexie.Promise"),I7.env=itt(),s9(C7,{all:function(){var t=N9.apply(null,arguments).map($7);return new C7((function(e,n){0===t.length&&e([]);var i=t.length;t.forEach(((r,s)=>C7.resolve(r).then((n=>{t[s]=n,--i||e(t)}),n)))}))},resolve:t=>{if(t instanceof C7)return t;if(t&&"function"==typeof t.then)return new C7(((e,n)=>{t.then(e,n)}));var e=new C7(a7,!0,t);return k7(e,E7),e},reject:H7,race:function(){var t=N9.apply(null,arguments).map($7);return new C7(((e,n)=>{t.map((t=>C7.resolve(t).then(e,n)))}))},PSD:{get:()=>b7,set:t=>b7=t},totalEchoes:{get:()=>X7},newPSD:K7,usePSD:rtt,scheduler:{get:()=>g7,set:t=>{g7=t}},rejectionMapper:{get:()=>x7,set:t=>{x7=t}},follow:(t,e)=>new C7(((n,i)=>K7(((e,n)=>{var i=b7;i.unhandleds=[],i.onunhandled=n,i.finalize=e7((function(){!function(t){A7.push((function e(){t(),A7.splice(A7.indexOf(e),1)})),++S7,g7((()=>{0==--S7&&G7()}),[])}((()=>{0===this.unhandleds.length?e():n(this.unhandleds[0])}))}),i.finalize),t()}),e,n,i)))}),p7&&(p7.allSettled&&a9(C7,"allSettled",(function(){const t=N9.apply(null,arguments).map($7);return new C7((e=>{0===t.length&&e([]);let n=t.length;const i=new Array(n);t.forEach(((t,r)=>C7.resolve(t).then((t=>i[r]={status:"fulfilled",value:t}),(t=>i[r]={status:"rejected",reason:t})).then((()=>--n||e(i)))))}))})),p7.any&&"undefined"!=typeof AggregateError&&a9(C7,"any",(function(){const t=N9.apply(null,arguments).map($7);return new C7(((e,n)=>{0===t.length&&n(new AggregateError([]));let i=t.length;const r=new Array(i);t.forEach(((t,s)=>C7.resolve(t).then((t=>e(t)),(t=>{r[s]=t,--i||n(new AggregateError(r))}))))}))})));const j7={awaits:0,echoes:0,id:0};var W7=0,Y7=[],q7=0,X7=0,Z7=0;function K7(t,e,n,i){var r=b7,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++Z7;var o=I7.env;s.env=d7?{Promise:C7,PromiseProp:{value:C7,configurable:!0,writable:!0},all:C7.all,race:C7.race,allSettled:C7.allSettled,any:C7.any,resolve:C7.resolve,reject:C7.reject,nthen:att(o.nthen,s),gthen:att(o.gthen,s)}:{},e&&e9(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=rtt(s,t,n,i);return 0===s.ref&&s.finalize(),a}function Q7(){return j7.id||(j7.id=++W7),++j7.awaits,j7.echoes+=100,j7.id}function J7(){return!!j7.awaits&&(0==--j7.awaits&&(j7.id=0),j7.echoes=100*j7.awaits,!0)}function $7(t){return j7.echoes&&t&&t.constructor===p7?(Q7(),t.then((t=>(J7(),t)),(t=>(J7(),htt(t))))):t}function ttt(t){++X7,j7.echoes&&0!=--j7.echoes||(j7.echoes=j7.id=0),Y7.push(b7),ntt(t,!0)}function ett(){var t=Y7[Y7.length-1];Y7.pop(),ntt(t,!1)}function ntt(t,e){var n=b7;if((e?!j7.echoes||q7++&&t===b7:!q7||--q7&&t===b7)||stt(e?ttt.bind(null,t):ett),t!==b7&&(b7=t,n===I7&&(I7.env=itt()),d7)){var i=I7.env.Promise,r=t.env;h7.then=r.nthen,i.prototype.then=r.gthen,(n.global||t.global)&&(Object.defineProperty(J8,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function itt(){var t=J8.Promise;return d7?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(J8,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:h7.then,gthen:t.prototype.then}:{}}function rtt(t,e,n,i,r){var s=b7;try{return ntt(t,!0),e(n,i,r)}finally{ntt(s,!1)}}function stt(t){u7.call(l7,t)}function ott(t,e,n,i){return"function"!=typeof t?t:function(){var r=b7;n&&Q7(),ntt(e,!0);try{return t.apply(this,arguments)}finally{ntt(r,!1),i&&stt(J7)}}}function att(t,e){return function(n,i){return t.call(this,ott(n,e),ott(i,e))}}function ltt(t,e){var n;try{n=e.onuncatched(t)}catch(C8){}if(!1!==n)try{var i,r={promise:e,reason:t};if(J8.document&&document.createEvent?((i=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),e9(i,r)):J8.CustomEvent&&e9(i=new CustomEvent("unhandledrejection",{detail:r}),r),i&&J8.dispatchEvent&&(dispatchEvent(i),!J8.PromiseRejectionEvent&&J8.onunhandledrejection))try{J8.onunhandledrejection(i)}catch(C8){}P9&&i&&!i.defaultPrevented&&console.warn("Unhandled rejection: ".concat(t.stack||t))}catch(C8){}}-1===(""+u7).indexOf("[native code]")&&(Q7=J7=J9);var htt=C7.reject;function ctt(t,e,n,i){if(t.idbdb&&(t._state.openComplete||b7.letThrough||t._vip)){var r=t._createTransaction(e,n,t._dbSchema);try{r.create(),t._state.PR1398_maxLoop=3}catch(r){return r.name===q9.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>ctt(t,e,n,i)))):htt(r)}return r._promise(e,((t,e)=>K7((()=>(b7.trans=r,i(t,e,r)))))).then((t=>r._completion.then((()=>t))))}if(t._state.openComplete)return htt(new Z9.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return htt(new Z9.DatabaseClosed);t.open().catch(J9)}return t._state.dbReadyPromise.then((()=>ctt(t,e,n,i)))}const utt=String.fromCharCode(65535),ptt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",dtt=[],ftt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),mtt=ftt,gtt=ftt,ytt=t=>!/(dexie\.js|dexie\.min\.js)/.test(t);function _tt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const vtt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ttt(t){return"string"!=typeof t||/\./.test(t)?t=>t:e=>(void 0===e[t]&&t in e&&delete(e=w9(e))[t],e)}class Ett{_trans(t,e,n){const i=this._tx||b7.trans,r=this.name;function s(t,n,i){if(!i.schema[r])throw new Z9.NotFound("Table "+r+" not part of transaction");return e(i.idbtrans,i)}const o=B7();try{return i&&i.db===this.db?i===b7.trans?i._promise(t,s,n):K7((()=>i._promise(t,s,n)),{trans:i,transless:b7.transless||b7}):ctt(this.db,t,[this.name],s)}finally{o&&z7()}}get(t,e){return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",(e=>this.core.get({trans:e,key:t}).then((t=>this.hook.reading.fire(t))))).then(e)}where(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(t9(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));const e=$8(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((t=>t.compound&&e.every((e=>t.keyPath.indexOf(e)>=0))&&t.keyPath.every((t=>e.indexOf(t)>=0))))[0];if(n&&this.db._maxKey!==utt)return this.where(n.name).equals(n.keyPath.map((e=>t[e])));!n&&P9&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit of a compound index [").concat(e.join("+"),"]"));const{idxByName:i}=this.schema,r=this.db._deps.indexedDB;function s(t,e){try{return 0===r.cmp(t,e)}catch(t){return!1}}const[o,a]=e.reduce(((e,n)=>{let[r,o]=e;const a=i[n],l=t[n];return[r||a,r||!a?_tt(o,a&&a.multi?t=>{const e=y9(t,n);return t9(e)&&e.some((t=>s(l,t)))}:t=>s(l,y9(t,n))):o]}),[null,null]);return o?this.where(o.name).equals(t[o.keyPath]).filter(a):n?this.filter(a):this.where(e).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,t9(t)?"[".concat(t.join("+"),"]"):t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const e=e=>{if(!e)return e;const n=Object.create(t.prototype);for(var i in e)if(r9(e,i))try{n[i]=e[i]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t}defineClass(){return this.mapToClass((function(t){e9(this,t)}))}add(t,e){const{auto:n,keyPath:i}=this.schema.primKey;let r=t;return i&&n&&(r=Ttt(i)(t)),this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[r]}))).then((t=>t.numFailures?C7.reject(t.failures[0]):t.lastResult)).then((e=>{if(i)try{_9(t,i,e)}catch(t){}return e}))}update(t,e){if("object"!=typeof t||t9(t))return this.where(":id").equals(t).modify(e);{const n=y9(t,this.schema.primKey.keyPath);if(void 0===n)return htt(new Z9.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof e?$8(e).forEach((n=>{_9(t,n,e[n])})):e(t,{value:t,primKey:n})}catch(t){}return this.where(":id").equals(n).modify(e)}}put(t,e){const{auto:n,keyPath:i}=this.schema.primKey;let r=t;return i&&n&&(r=Ttt(i)(t)),this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"put",values:[r],keys:null!=e?[e]:null}))).then((t=>t.numFailures?C7.reject(t.failures[0]):t.lastResult)).then((e=>{if(i)try{_9(t,i,e)}catch(t){}return e}))}delete(t){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"delete",keys:[t]}))).then((t=>t.numFailures?C7.reject(t.failures[0]):void 0))}clear(){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"deleteRange",range:vtt}))).then((t=>t.numFailures?C7.reject(t.failures[0]):void 0))}bulkGet(t){return this._trans("readonly",(e=>this.core.getMany({keys:t,trans:e}).then((t=>t.map((t=>this.hook.reading.fire(t)))))))}bulkAdd(t,e,n){const i=Array.isArray(e)?e:void 0,r=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(e=>{const{auto:n,keyPath:s}=this.schema.primKey;if(s&&i)throw new Z9.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z9.InvalidArgument("Arguments objects and keys must have the same length");const o=t.length;let a=s&&n?t.map(Ttt(s)):t;return this.core.mutate({trans:e,type:"add",keys:i,values:a,wantResults:r}).then((t=>{let{numFailures:e,results:n,lastResult:i,failures:s}=t;if(0===e)return r?n:i;throw new Y9("".concat(this.name,".bulkAdd(): ").concat(e," of ").concat(o," operations failed"),s)}))}))}bulkPut(t,e,n){const i=Array.isArray(e)?e:void 0,r=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(e=>{const{auto:n,keyPath:s}=this.schema.primKey;if(s&&i)throw new Z9.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z9.InvalidArgument("Arguments objects and keys must have the same length");const o=t.length;let a=s&&n?t.map(Ttt(s)):t;return this.core.mutate({trans:e,type:"put",keys:i,values:a,wantResults:r}).then((t=>{let{numFailures:e,results:n,lastResult:i,failures:s}=t;if(0===e)return r?n:i;throw new Y9("".concat(this.name,".bulkPut(): ").concat(e," of ").concat(o," operations failed"),s)}))}))}bulkDelete(t){const e=t.length;return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"delete",keys:t}))).then((t=>{let{numFailures:n,lastResult:i,failures:r}=t;if(0===n)return i;throw new Y9("".concat(this.name,".bulkDelete(): ").concat(n," of ").concat(e," operations failed"),r)}))}}function xtt(t){var e={},n=function(n,i){if(i){for(var r=arguments.length,s=new Array(r-1);--r;)s[r-1]=arguments[r];return e[n].subscribe.apply(null,s),t}if("string"==typeof n)return e[n]};n.addEventType=s;for(var i=1,r=arguments.length;i<r;++i)s(arguments[i]);return n;function s(t,i,r){if("object"==typeof t)return function(t){$8(t).forEach((function(e){var n=t[e];if(t9(n))s(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new Z9.InvalidArgument("Invalid event config");var i=s(e,$9,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];i.subscribers.forEach((function(t){m9((function(){t.apply(null,e)}))}))}))}}))}(t);i||(i=s7),r||(r=J9);var o={subscribers:[],fire:r,subscribe:function(t){-1===o.subscribers.indexOf(t)&&(o.subscribers.push(t),o.fire=i(o.fire,t))},unsubscribe:function(t){o.subscribers=o.subscribers.filter((function(e){return e!==t})),o.fire=o.subscribers.reduce(i,r)}};return e[t]=n[t]=o,o}}function Itt(t,e){return l9(e).from({prototype:t}),e}function btt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function wtt(t,e){t.filter=_tt(t.filter,e)}function Stt(t,e,n){var i=t.replayFilter;t.replayFilter=i?()=>_tt(i(),e()):e,t.justLimit=n&&!i}function Att(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new Z9.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ctt(t,e,n){const i=Att(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:i,range:t.range}})}function Rtt(t,e,n,i){const r=t.replayFilter?_tt(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(t,n,i)=>{if(!r||r(n,i,(t=>n.stop(t)),(t=>n.fail(t)))){var o=n.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),r9(s,a)||(s[a]=!0,e(t,n,i))}};return Promise.all([t.or._iterate(o,n),Dtt(Ctt(t,i,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return Dtt(Ctt(t,i,n),_tt(t.algorithm,r),e,!t.keysOnly&&t.valueMapper)}function Dtt(t,e,n,i){var r=V7(i?(t,e,r)=>n(i(t),e,r):n);return t.then((t=>{if(t)return t.start((()=>{var n=()=>t.continue();e&&!e(t,(t=>n=t),(e=>{t.stop(e),n=J9}),(e=>{t.fail(e),n=J9}))||r(t.value,t,(t=>n=t)),n()}))}))}function Ott(t,e){try{const n=Ntt(t),i=Ntt(e);if(n!==i)return"Array"===n?1:"Array"===i?-1:"binary"===n?1:"binary"===i?-1:"string"===n?1:"string"===i?-1:"Date"===n?1:"Date"!==i?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(t,e){const n=t.length,i=e.length,r=n<i?n:i;for(let s=0;s<r;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===i?0:n<i?-1:1}(Mtt(t),Mtt(e));case"Array":return function(t,e){const n=t.length,i=e.length,r=n<i?n:i;for(let s=0;s<r;++s){const n=Ott(t[s],e[s]);if(0!==n)return n}return n===i?0:n<i?-1:1}(t,e)}}catch(t){}return NaN}function Ntt(t){const e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";const n=C9(t);return"ArrayBuffer"===n?"binary":n}function Mtt(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Ptt{_read(t,e){var n=this._ctx;return n.error?n.table._trans(null,htt.bind(null,n.error)):n.table._trans("readonly",t).then(e)}_write(t){var e=this._ctx;return e.error?e.table._trans(null,htt.bind(null,e.error)):e.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var e=this._ctx;e.algorithm=_tt(e.algorithm,t)}_iterate(t,e){return Rtt(this._ctx,t,e,this._ctx.table.core)}clone(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&e9(n,t),e._ctx=n,e}raw(){return this._ctx.valueMapper=null,this}each(t){var e=this._ctx;return this._read((n=>Rtt(e,t,n,e.table.core)))}count(t){return this._read((t=>{const e=this._ctx,n=e.table.core;if(btt(e,!0))return n.count({trans:t,query:{index:Att(e,n.schema),range:e.range}}).then((t=>Math.min(t,e.limit)));var i=0;return Rtt(e,(()=>(++i,!1)),t,n).then((()=>i))})).then(t)}sortBy(t,e){const n=t.split(".").reverse(),i=n[0],r=n.length-1;function s(t,e){return e?s(t[n[e]],e-1):t[i]}var o="next"===this._ctx.dir?1:-1;function a(t,e){var n=s(t,r),i=s(e,r);return n<i?-o:n>i?o:0}return this.toArray((function(t){return t.sort(a)})).then(e)}toArray(t){return this._read((t=>{var e=this._ctx;if("next"===e.dir&&btt(e,!0)&&e.limit>0){const{valueMapper:n}=e,i=Att(e,e.table.core.schema);return e.table.core.query({trans:t,limit:e.limit,values:!0,query:{index:i,range:e.range}}).then((t=>{let{result:e}=t;return n?e.map(n):e}))}{const n=[];return Rtt(e,(t=>n.push(t)),t,e.table.core).then((()=>n))}}),t)}offset(t){var e=this._ctx;return t<=0||(e.offset+=t,btt(e)?Stt(e,(()=>{var e=t;return(t,n)=>0===e||(1===e?(--e,!1):(n((()=>{t.advance(e),e=0})),!1))})):Stt(e,(()=>{var e=t;return()=>--e<0}))),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Stt(this._ctx,(()=>{var e=t;return function(t,n,i){return--e<=0&&n(i),e>=0}}),!0),this}until(t,e){return wtt(this._ctx,(function(n,i,r){return!t(n.value)||(i(r),e)})),this}first(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)}last(t){return this.reverse().first(t)}filter(t){var e,n;return wtt(this._ctx,(function(e){return t(e.value)})),e=this._ctx,n=t,e.isMatch=_tt(e.isMatch,n),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))}keys(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)}primaryKeys(t){var e=this._ctx;if("next"===e.dir&&btt(e,!0)&&e.limit>0)return this._read((t=>{var n=Att(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})})).then((t=>{let{result:e}=t;return e})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys((function(t){return t[0]})).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return wtt(this._ctx,(function(t){var e=t.primaryKey.toString(),i=r9(n,e);return n[e]=!0,!i})),this}modify(t){var e=this._ctx;return this._write((n=>{var i;if("function"==typeof t)i=t;else{var r=$8(t),s=r.length;i=function(e){for(var n=!1,i=0;i<s;++i){var o=r[i],a=t[o];y9(e,o)!==a&&(_9(e,o,a),n=!0)}return n}}const o=e.table.core,{outbound:a,extractKey:l}=o.schema.primaryKey,h=this.db._options.modifyChunkSize||200,c=[];let u=0;const p=[],d=(t,e)=>{const{failures:n,numFailures:i}=e;u+=t-i;for(let r of $8(n))c.push(n[r])};return this.clone().primaryKeys().then((r=>{const s=c=>{const u=Math.min(h,r.length-c);return o.getMany({trans:n,keys:r.slice(c,c+u),cache:"immutable"}).then((p=>{const f=[],m=[],g=a?[]:null,y=[];for(let t=0;t<u;++t){const e=p[t],n={value:w9(e),primKey:r[c+t]};!1!==i.call(n,n.value,n)&&(null==n.value?y.push(r[c+t]):a||0===Ott(l(e),l(n.value))?(m.push(n.value),a&&g.push(r[c+t])):(y.push(r[c+t]),f.push(n.value)))}const _=btt(e)&&e.limit===1/0&&("function"!=typeof t||t===Ftt)&&{index:e.index,range:e.range};return Promise.resolve(f.length>0&&o.mutate({trans:n,type:"add",values:f}).then((t=>{for(let e in t.failures)y.splice(parseInt(e),1);d(f.length,t)}))).then((()=>(m.length>0||_&&"object"==typeof t)&&o.mutate({trans:n,type:"put",keys:g,values:m,criteria:_,changeSpec:"function"!=typeof t&&t}).then((t=>d(m.length,t))))).then((()=>(y.length>0||_&&t===Ftt)&&o.mutate({trans:n,type:"delete",keys:y,criteria:_}).then((t=>d(y.length,t))))).then((()=>r.length>c+u&&s(c+h)))}))};return s(0).then((()=>{if(c.length>0)throw new W9("Error modifying one or more objects",c,u,p);return r.length}))}))}))}delete(){var t=this._ctx,e=t.range;return btt(t)&&(t.isPrimKey&&!gtt||3===e.type)?this._write((n=>{const{primaryKey:i}=t.table.core.schema,r=e;return t.table.core.count({trans:n,query:{index:i,range:r}}).then((e=>t.table.core.mutate({trans:n,type:"deleteRange",range:r}).then((t=>{let{failures:n,lastResult:i,results:r,numFailures:s}=t;if(s)throw new W9("Could not delete some values",Object.keys(n).map((t=>n[t])),e-s);return e-s}))))})):this.modify(Ftt)}}const Ftt=(t,e)=>e.value=null;function Ltt(t,e){return t<e?-1:t===e?0:1}function ktt(t,e){return t>e?-1:t===e?0:1}function Utt(t,e,n){var i=t instanceof jtt?new t.Collection(t):t;return i._ctx.error=n?new n(e):new TypeError(e),i}function Btt(t){return new t.Collection(t,(()=>Vtt(""))).limit(0)}function ztt(t,e,n,i,r,s){for(var o=Math.min(t.length,i.length),a=-1,l=0;l<o;++l){var h=e[l];if(h!==i[l])return r(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):r(t[l],i[l])<0?t.substr(0,l)+i[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;r(t[l],h)<0&&(a=l)}return o<i.length&&"next"===s?t+n.substr(t.length):o<t.length&&"prev"===s?t.substr(0,n.length):a<0?null:t.substr(0,a)+i[a]+n.substr(a+1)}function Gtt(t,e,n,i){var r,s,o,a,l,h,c,u=n.length;if(!n.every((t=>"string"==typeof t)))return Utt(t,"String expected.");function p(t){r=function(t){return"next"===t?t=>t.toUpperCase():t=>t.toLowerCase()}(t),s=function(t){return"next"===t?t=>t.toLowerCase():t=>t.toUpperCase()}(t),o="next"===t?Ltt:ktt;var e=n.map((function(t){return{lower:s(t),upper:r(t)}})).sort((function(t,e){return o(t.lower,e.lower)}));a=e.map((function(t){return t.upper})),l=e.map((function(t){return t.lower})),h=t,c="next"===t?"":i}p("next");var d=new t.Collection(t,(()=>Htt(a[0],l[u-1]+i)));d._ondirectionchange=function(t){p(t)};var f=0;return d._addAlgorithm((function(t,n,i){var r=t.key;if("string"!=typeof r)return!1;var p=s(r);if(e(p,l,f))return!0;for(var d=null,m=f;m<u;++m){var g=ztt(r,p,a[m],l[m],o,h);null===g&&null===d?f=m+1:(null===d||o(d,g)>0)&&(d=g)}return n(null!==d?function(){t.continue(d+c)}:i),!1})),d}function Htt(t,e,n,i){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:i}}function Vtt(t){return{type:1,lower:t,upper:t}}class jtt{get Collection(){return this._ctx.table.db.Collection}between(t,e,n,i){n=!1!==n,i=!0===i;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||i)&&(!n||!i)?Btt(this):new this.Collection(this,(()=>Htt(t,e,!n,!i)))}catch(t){return Utt(this,ptt)}}equals(t){return null==t?Utt(this,ptt):new this.Collection(this,(()=>Vtt(t)))}above(t){return null==t?Utt(this,ptt):new this.Collection(this,(()=>Htt(t,void 0,!0)))}aboveOrEqual(t){return null==t?Utt(this,ptt):new this.Collection(this,(()=>Htt(t,void 0,!1)))}below(t){return null==t?Utt(this,ptt):new this.Collection(this,(()=>Htt(void 0,t,!1,!0)))}belowOrEqual(t){return null==t?Utt(this,ptt):new this.Collection(this,(()=>Htt(void 0,t)))}startsWith(t){return"string"!=typeof t?Utt(this,"String expected."):this.between(t,t+utt,!0,!0)}startsWithIgnoreCase(t){return""===t?this.startsWith(t):Gtt(this,((t,e)=>0===t.indexOf(e[0])),[t],utt)}equalsIgnoreCase(t){return Gtt(this,((t,e)=>t===e[0]),[t],"")}anyOfIgnoreCase(){var t=N9.apply(O9,arguments);return 0===t.length?Btt(this):Gtt(this,((t,e)=>-1!==e.indexOf(t)),t,"")}startsWithAnyOfIgnoreCase(){var t=N9.apply(O9,arguments);return 0===t.length?Btt(this):Gtt(this,((t,e)=>e.some((e=>0===t.indexOf(e)))),t,utt)}anyOf(){const t=N9.apply(O9,arguments);let e=this._cmp;try{t.sort(e)}catch(t){return Utt(this,ptt)}if(0===t.length)return Btt(this);const n=new this.Collection(this,(()=>Htt(t[0],t[t.length-1])));n._ondirectionchange=n=>{e="next"===n?this._ascending:this._descending,t.sort(e)};let i=0;return n._addAlgorithm(((n,r,s)=>{const o=n.key;for(;e(o,t[i])>0;)if(++i,i===t.length)return r(s),!1;return 0===e(o,t[i])||(r((()=>{n.continue(t[i])})),!1)})),n}notEqual(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=N9.apply(O9,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return Utt(this,ptt)}const e=t.reduce(((t,e)=>t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,e){const n=this._cmp,i=this._ascending,r=this._descending,s=this._min,o=this._max;if(0===t.length)return Btt(this);if(!t.every((t=>void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0)))return Utt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z9.InvalidArgument);const a=!e||!1!==e.includeLowers,l=e&&!0===e.includeUppers;let h,c=i;function u(t,e){return c(t[0],e[0])}try{h=t.reduce((function(t,e){let i=0,r=t.length;for(;i<r;++i){const r=t[i];if(n(e[0],r[1])<0&&n(e[1],r[0])>0){r[0]=s(r[0],e[0]),r[1]=o(r[1],e[1]);break}}return i===r&&t.push(e),t}),[]),h.sort(u)}catch(t){return Utt(this,ptt)}let p=0;const d=l?t=>i(t,h[p][1])>0:t=>i(t,h[p][1])>=0,f=a?t=>r(t,h[p][0])>0:t=>r(t,h[p][0])>=0;let m=d;const g=new this.Collection(this,(()=>Htt(h[0][0],h[h.length-1][1],!a,!l)));return g._ondirectionchange=t=>{"next"===t?(m=d,c=i):(m=f,c=r),h.sort(u)},g._addAlgorithm(((t,e,n)=>{for(var r=t.key;m(r);)if(++p,p===h.length)return e(n),!1;return!!function(t){return!d(t)&&!f(t)}(r)||(0===this._cmp(r,h[p][1])||0===this._cmp(r,h[p][0])||e((()=>{c===i?t.continue(h[p][0]):t.continue(h[p][1])})),!1)})),g}startsWithAnyOf(){const t=N9.apply(O9,arguments);return t.every((t=>"string"==typeof t))?0===t.length?Btt(this):this.inAnyRange(t.map((t=>[t,t+utt]))):Utt(this,"startsWithAnyOf() only works with strings")}}function Wtt(t){return V7((function(e){return Ytt(e),t(e.target.error),!1}))}function Ytt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const qtt=xtt(null,"storagemutated");class Xtt{_lock(){return f9(!b7.global),++this._reculock,1!==this._reculock||b7.global||(b7.lockOwnerFor=this),this}_unlock(){if(f9(!b7.global),0==--this._reculock)for(b7.global||(b7.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{rtt(t[1],t[0])}catch(t){}}return this}_locked(){return this._reculock&&b7.lockOwnerFor!==this}create(t){if(!this.mode)return this;const e=this.db.idbdb,n=this.db._state.dbOpenError;if(f9(!this.idbtrans),!t&&!e)switch(n&&n.name){case"DatabaseClosedError":throw new Z9.DatabaseClosed(n);case"MissingAPIError":throw new Z9.MissingAPI(n.message,n);default:throw new Z9.OpenFailed(n)}if(!this.active)throw new Z9.TransactionInactive;return f9(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):e.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=V7((e=>{Ytt(e),this._reject(t.error)})),t.onabort=V7((e=>{Ytt(e),this.active&&this._reject(new Z9.Abort(t.error)),this.active=!1,this.on("abort").fire(e)})),t.oncomplete=V7((()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&qtt.storagemutated.fire(t.mutatedParts)})),this}_promise(t,e,n){if("readwrite"===t&&"readwrite"!==this.mode)return htt(new Z9.ReadOnly("Transaction is readonly"));if(!this.active)return htt(new Z9.TransactionInactive);if(this._locked())return new C7(((i,r)=>{this._blockedFuncs.push([()=>{this._promise(t,e,n).then(i,r)},b7])}));if(n)return K7((()=>{var t=new C7(((t,n)=>{this._lock();const i=e(t,n,this);i&&i.then&&i.then(t,n)}));return t.finally((()=>this._unlock())),t._lib=!0,t}));var i=new C7(((t,n)=>{var i=e(t,n,this);i&&i.then&&i.then(t,n)}));return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var e=this._root();const n=C7.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then((()=>n));else{e._waitingFor=n,e._waitingQueue=[];var i=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(i.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new C7(((t,i)=>{n.then((n=>e._waitingQueue.push(V7(t.bind(null,n)))),(t=>e._waitingQueue.push(V7(i.bind(null,t))))).finally((()=>{e._waitingFor===r&&(e._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z9.Abort))}table(t){const e=this._memoizedTables||(this._memoizedTables={});if(r9(e,t))return e[t];const n=this.schema[t];if(!n)throw new Z9.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,n,this);return i.core=this.db.core.table(t),e[t]=i,i}}function Ztt(t,e,n,i,r,s,o){return{name:t,keyPath:e,unique:n,multi:i,auto:r,compound:s,src:(n&&!o?"&":"")+(i?"*":"")+(r?"++":"")+Ktt(e)}}function Ktt(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function Qtt(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:g9(n,(t=>[t.name,t]))}}let Jtt=t=>{try{return t.only([[]]),Jtt=()=>[[]],[[]]}catch(t){return Jtt=()=>utt,utt}};function $tt(t){return null==t?()=>{}:"string"==typeof t?function(t){return 1===t.split(".").length?e=>e[t]:e=>y9(e,t)}(t):e=>y9(e,t)}function tet(t){return[].slice.call(t)}let eet=0;function net(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function iet(t,e){let{_novip:n}=t;const i=e.db,r=function(t,e,n,i){let{IDBKeyRange:r,indexedDB:s}=n;const o=function(t,e){return e.reduce(((t,e)=>{let{create:n}=e;return{...t,...n(t)}}),t)}(function(t,e,n){function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:i,lowerOpen:r,upperOpen:s}=t;return void 0===n?void 0===i?null:e.upperBound(i,!!s):void 0===i?e.lowerBound(n,!!r):e.bound(n,i,!!r,!!s)}const{schema:r,hasGetAll:s}=function(t,e){const n=tet(t.objectStoreNames);return{schema:{name:t.name,tables:n.map((t=>e.objectStore(t))).map((t=>{const{keyPath:e,autoIncrement:n}=t,i=t9(e),r=null==e,s={},o={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:r,compound:i,keyPath:e,autoIncrement:n,unique:!0,extractKey:$tt(e)},indexes:tet(t.indexNames).map((e=>t.index(e))).map((t=>{const{name:e,unique:n,multiEntry:i,keyPath:r}=t,o={name:e,compound:t9(r),keyPath:r,unique:n,multiEntry:i,extractKey:$tt(r)};return s[net(r)]=o,o})),getIndexByKeyPath:t=>s[net(t)]};return s[":id"]=o.primaryKey,null!=e&&(s[net(e)]=o.primaryKey),o}))},hasGetAll:n.length>0&&"getAll"in e.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=r.tables.map((t=>function(t){const e=t.name;return{name:e,schema:t,mutate:function(t){let{trans:n,type:r,keys:s,values:o,range:a}=t;return new Promise(((t,l)=>{t=V7(t);const h=n.objectStore(e),c=null==h.keyPath,u="put"===r||"add"===r;if(!u&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);const{length:p}=s||o||{length:1};if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return t({numFailures:0,failures:{},results:[],lastResult:void 0});let d;const f=[],m=[];let g=0;const y=t=>{++g,Ytt(t)};if("deleteRange"===r){if(4===a.type)return t({numFailures:g,failures:m,results:[],lastResult:void 0});3===a.type?f.push(d=h.clear()):f.push(d=h.delete(i(a)))}else{const[t,e]=u?c?[o,s]:[o,null]:[s,null];if(u)for(let n=0;n<p;++n)f.push(d=e&&void 0!==e[n]?h[r](t[n],e[n]):h[r](t[n])),d.onerror=y;else for(let n=0;n<p;++n)f.push(d=h[r](t[n])),d.onerror=y}const _=e=>{const n=e.target.result;f.forEach(((t,e)=>null!=t.error&&(m[e]=t.error))),t({numFailures:g,failures:m,results:"delete"===r?s:f.map((t=>t.result)),lastResult:n})};d.onerror=t=>{y(t),_(t)},d.onsuccess=_}))},getMany:t=>{let{trans:n,keys:i}=t;return new Promise(((t,r)=>{t=V7(t);const s=n.objectStore(e),o=i.length,a=new Array(o);let l,h=0,c=0;const u=e=>{const n=e.target;a[n._pos]=n.result,++c===h&&t(a)},p=Wtt(r);for(let e=0;e<o;++e)null!=i[e]&&(l=s.get(i[e]),l._pos=e,l.onsuccess=u,l.onerror=p,++h);0===h&&t(a)}))},get:t=>{let{trans:n,key:i}=t;return new Promise(((t,r)=>{t=V7(t);const s=n.objectStore(e).get(i);s.onsuccess=e=>t(e.target.result),s.onerror=Wtt(r)}))},query:function(t){return n=>new Promise(((r,s)=>{r=V7(r);const{trans:o,values:a,limit:l,query:h}=n,c=l===1/0?void 0:l,{index:u,range:p}=h,d=o.objectStore(e),f=u.isPrimaryKey?d:d.index(u.name),m=i(p);if(0===l)return r({result:[]});if(t){const t=a?f.getAll(m,c):f.getAllKeys(m,c);t.onsuccess=t=>r({result:t.target.result}),t.onerror=Wtt(s)}else{let t=0;const e=a||!("openKeyCursor"in f)?f.openCursor(m):f.openKeyCursor(m),n=[];e.onsuccess=i=>{const s=e.result;return s?(n.push(a?s.value:s.primaryKey),++t===l?r({result:n}):void s.continue()):r({result:n})},e.onerror=Wtt(s)}}))}(s),openCursor:function(t){let{trans:n,values:r,query:s,reverse:o,unique:a}=t;return new Promise(((t,l)=>{t=V7(t);const{index:h,range:c}=s,u=n.objectStore(e),p=h.isPrimaryKey?u:u.index(h.name),d=o?a?"prevunique":"prev":a?"nextunique":"next",f=r||!("openKeyCursor"in p)?p.openCursor(i(c),d):p.openKeyCursor(i(c),d);f.onerror=Wtt(l),f.onsuccess=V7((e=>{const i=f.result;if(!i)return void t(null);i.___id=++eet,i.done=!1;const r=i.continue.bind(i);let s=i.continuePrimaryKey;s&&(s=s.bind(i));const o=i.advance.bind(i),a=()=>{throw new Error("Cursor not stopped")};i.trans=n,i.stop=i.continue=i.continuePrimaryKey=i.advance=()=>{throw new Error("Cursor not started")},i.fail=V7(l),i.next=function(){let t=1;return this.start((()=>t--?this.continue():this.stop())).then((()=>this))},i.start=t=>{const e=new Promise(((t,e)=>{t=V7(t),f.onerror=Wtt(e),i.fail=e,i.stop=e=>{i.stop=i.continue=i.continuePrimaryKey=i.advance=a,t(e)}})),n=()=>{if(f.result)try{t()}catch(t){i.fail(t)}else i.done=!0,i.start=()=>{throw new Error("Cursor behind last entry")},i.stop()};return f.onsuccess=V7((t=>{f.onsuccess=n,n()})),i.continue=r,i.continuePrimaryKey=s,i.advance=o,n(),e},t(i)}),l)}))},count(t){let{query:n,trans:r}=t;const{index:s,range:o}=n;return new Promise(((t,n)=>{const a=r.objectStore(e),l=s.isPrimaryKey?a:a.index(s.name),h=i(o),c=h?l.count(h):l.count();c.onsuccess=V7((e=>t(e.target.result))),c.onerror=Wtt(n)}))}}}(t))),a={};return o.forEach((t=>a[t.name]=t)),{stack:"dbcore",transaction:t.transaction.bind(t),table(t){if(!a[t])throw new Error("Table '".concat(t,"' not found"));return a[t]},MIN_KEY:-1/0,MAX_KEY:Jtt(e),schema:r}}(e,r,i),t.dbcore);return{dbcore:o}}(n._middlewares,i,n._deps,e);n.core=r.dbcore,n.tables.forEach((t=>{const e=t.name;n.core.schema.tables.some((t=>t.name===e))&&(t.core=n.core.table(e),n[e]instanceof n.Table&&(n[e].core=t.core))}))}function ret(t,e,n,i){let{_novip:r}=t;n.forEach((t=>{const n=i[t];e.forEach((e=>{const i=c9(e,t);(!i||"value"in i&&void 0===i.value)&&(e===r.Transaction.prototype||e instanceof r.Transaction?a9(e,t,{get(){return this.table(t)},set(e){o9(this,t,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):e[t]=new r.Table(t,n))}))}))}function set(t,e){let{_novip:n}=t;e.forEach((t=>{for(let e in t)t[e]instanceof n.Table&&delete t[e]}))}function oet(t,e){return t._cfg.version-e._cfg.version}function aet(t,e){const n={del:[],add:[],change:[]};let i;for(i in t)e[i]||n.del.push(i);for(i in e){const r=t[i],s=e[i];if(r){const t={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!ftt)t.recreate=!0,n.change.push(t);else{const e=r.idxByName,i=s.idxByName;let o;for(o in e)i[o]||t.del.push(o);for(o in i){const n=e[o],r=i[o];n?n.src!==r.src&&t.change.push(r):t.add.push(r)}(t.del.length>0||t.add.length>0||t.change.length>0)&&n.change.push(t)}}else n.add.push([i,s])}return n}function het(t,e,n,i){const r=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach((t=>cet(r,t))),r}function cet(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function uet(t,e,n){const i={};return p9(e.objectStoreNames,0).forEach((t=>{const e=n.objectStore(t);let r=e.keyPath;const s=Ztt(Ktt(r),r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,!0),o=[];for(let n=0;n<e.indexNames.length;++n){const t=e.index(e.indexNames[n]);r=t.keyPath;var a=Ztt(t.name,r,!!t.unique,!!t.multiEntry,!1,r&&"string"!=typeof r,!1);o.push(a)}i[t]=Qtt(t,s,o)})),i}function pet(t,e,n){let{_novip:i}=t;const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const t=r[s],o=n.objectStore(t);i._hasGetAll="getAll"in o;for(let n=0;n<o.indexNames.length;++n){const i=o.indexNames[n],r=o.index(i).keyPath,s="string"==typeof r?r:"["+p9(r).join("+")+"]";if(e[t]){const n=e[t].idxByName[s];n&&(n.name=i,delete e[t].idxByName[s],e[t].idxByName[i]=n)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&J8.WorkerGlobalScope&&J8 instanceof J8.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}class det{_parseStoresSpec(t,e){$8(t).forEach((n=>{if(null!==t[n]){var i=t[n].split(",").map(((t,e)=>{const n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Ztt(n,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),t9(i),0===e)})),r=i.shift();if(r.multi)throw new Z9.Schema("Primary key cannot be multi-valued");i.forEach((t=>{if(t.auto)throw new Z9.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Z9.Schema("Index must have a name and cannot be an empty string")})),e[n]=Qtt(n,r,i)}}))}stores(t){const e=this.db;this._cfg.storesSource=this._cfg.storesSource?e9(this._cfg.storesSource,t):t;const n=e._versions,i={};let r={};return n.forEach((t=>{e9(i,t._cfg.storesSource),r=t._cfg.dbschema={},t._parseStoresSpec(i,r)})),e._dbSchema=r,set(e,[e._allTables,e,e.Transaction.prototype]),ret(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],$8(r),r),e._storeNames=$8(r),this}upgrade(t){return this._cfg.contentUpgrade=o7(this._cfg.contentUpgrade||J9,t),this}}function fet(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ket("__dbnames",{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function met(t){return t&&"function"==typeof t.databases}function get(t){return K7((function(){return b7.letThrough=!0,t()}))}function yet(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()})).finally((function(){return clearInterval(t)})):Promise.resolve()}function _et(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((()=>e.dbOpenError?htt(e.dbOpenError):t));P9&&(e.openCanceller._stackHolder=U9()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const i=e.openCanceller;function r(){if(e.openCanceller!==i)throw new Z9.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;return C7.race([i,("undefined"==typeof navigator?C7.resolve():yet()).then((()=>new C7(((i,s)=>{if(r(),!n)throw new Z9.MissingAPI;const l=t.name,h=e.autoSchema?n.open(l):n.open(l,Math.round(10*t.verno));if(!h)throw new Z9.MissingAPI;h.onerror=Wtt(s),h.onblocked=V7(t._fireOnBlocked),h.onupgradeneeded=V7((i=>{if(o=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=Ytt,o.abort(),h.result.close();const t=n.deleteDatabase(l);t.onsuccess=t.onerror=V7((()=>{s(new Z9.NoSuchDatabase("Database ".concat(l," doesnt exist")))}))}else{o.onerror=Wtt(s);var r=i.oldVersion>Math.pow(2,62)?0:i.oldVersion;a=r<1,t._novip.idbdb=h.result,function(t,e,n,i){const r=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,r);s.create(n),s._completion.catch(i);const o=s._reject.bind(s),a=b7.transless||b7;K7((()=>{b7.trans=s,b7.transless=a,0===e?($8(r).forEach((t=>{het(n,t,r[t].primKey,r[t].indexes)})),iet(t,n),C7.follow((()=>t.on.populate.fire(s))).catch(o)):function(t,e,n,i){let{_novip:r}=t;const s=[],o=r._versions;let a=r._dbSchema=uet(0,r.idbdb,i),l=!1;return o.filter((t=>t._cfg.version>=e)).forEach((t=>{s.push((()=>{const s=a,o=t._cfg.dbschema;pet(r,s,i),pet(r,o,i),a=r._dbSchema=o;const h=aet(s,o);h.add.forEach((t=>{het(i,t[0],t[1].primKey,t[1].indexes)})),h.change.forEach((t=>{if(t.recreate)throw new Z9.Upgrade("Not yet support for changing primary key");{const e=i.objectStore(t.name);t.add.forEach((t=>cet(e,t))),t.change.forEach((t=>{e.deleteIndex(t.name),cet(e,t)})),t.del.forEach((t=>e.deleteIndex(t)))}}));const c=t._cfg.contentUpgrade;if(c&&t._cfg.version>e){iet(r,i),n._memoizedTables={},l=!0;let t=v9(o);h.del.forEach((e=>{t[e]=s[e]})),set(r,[r.Transaction.prototype]),ret(r,[r.Transaction.prototype],$8(t),t),n.schema=t;const e=M9(c);let a;e&&Q7();const u=C7.follow((()=>{if(a=c(n),a&&e){var t=J7.bind(null,null);a.then(t,t)}}));return a&&"function"==typeof a.then?C7.resolve(a):u.then((()=>a))}})),s.push((e=>{l&&mtt||function(t,e){[].slice.call(e.db.objectStoreNames).forEach((n=>null==t[n]&&e.db.deleteObjectStore(n)))}(t._cfg.dbschema,e),set(r,[r.Transaction.prototype]),ret(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),n.schema=r._dbSchema}))})),function t(){return s.length?C7.resolve(s.shift()(n.idbtrans)).then(t):C7.resolve()}().then((()=>{var t,e;e=i,$8(t=a).forEach((n=>{e.db.objectStoreNames.contains(n)||het(e,n,t[n].primKey,t[n].indexes)}))}))}(t,e,s,n).catch(o)}))}(t,r/10,o,s)}}),s),h.onsuccess=V7((()=>{o=null;const n=t._novip.idbdb=h.result,r=p9(n.objectStoreNames);if(r.length>0)try{const i=n.transaction(1===(s=r).length?s[0]:s,"readonly");e.autoSchema?function(t,e,n){let{_novip:i}=t;i.verno=e.version/10;const r=i._dbSchema=uet(0,e,n);i._storeNames=p9(e.objectStoreNames,0),ret(i,[i._allTables],$8(r),r)}(t,n,i):(pet(t,t._dbSchema,i),function(t,e){const n=aet(uet(0,t.idbdb,e),t._dbSchema);return!(n.add.length||n.change.some((t=>t.add.length||t.change.length)))}(t,i)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),iet(t,i)}catch(t){}var s;dtt.push(t),n.onversionchange=V7((n=>{e.vcFired=!0,t.on("versionchange").fire(n)})),n.onclose=V7((e=>{t.on("close").fire(e)})),a&&function(t,e){let{indexedDB:n,IDBKeyRange:i}=t;!met(n)&&"__dbnames"!==e&&fet(n,i).put({name:e}).catch(J9)}(t._deps,l),i()}),s)}))))]).then((()=>(r(),e.onReadyBeingFired=[],C7.resolve(get((()=>t.on.ready.fire(t.vip)))).then((function n(){if(e.onReadyBeingFired.length>0){let i=e.onReadyBeingFired.reduce(o7,J9);return e.onReadyBeingFired=[],C7.resolve(get((()=>i(t.vip)))).then(n)}}))))).finally((()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1})).then((()=>t)).catch((n=>{e.dbOpenError=n;try{o&&o.abort()}catch(t){}return i===e.openCanceller&&t._close(),htt(n)})).finally((()=>{e.openComplete=!0,s()}))}function vet(t){var e=e=>t.next(e),n=r(e),i=r((e=>t.throw(e)));function r(t){return e=>{var r=t(e),s=r.value;return r.done?s:s&&"function"==typeof s.then?s.then(n,i):t9(s)?Promise.all(s).then(n,i):n(s)}}return r(e)()}function Tet(t,e,n){var i=arguments.length;if(i<2)throw new Z9.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];return n=r.pop(),[t,E9(r),n]}function Eet(t,e,n,i,r){return C7.resolve().then((()=>{const s=b7.transless||b7,o=t._createTransaction(e,n,t._dbSchema,i),a={trans:o,transless:s};if(i)o.idbtrans=i.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===q9.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>Eet(t,e,n,null,r)))):htt(i)}const l=M9(r);let h;l&&Q7();const c=C7.follow((()=>{if(h=r.call(o,o),h)if(l){var t=J7.bind(null,null);h.then(t,t)}else"function"==typeof h.next&&"function"==typeof h.throw&&(h=vet(h))}),a);return(h&&"function"==typeof h.then?C7.resolve(h).then((t=>o.active?t:htt(new Z9.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):c.then((()=>h))).then((t=>(i&&o._resolve(),o._completion.then((()=>t))))).catch((t=>(o._reject(t),htt(t))))}))}function xet(t,e,n){const i=t9(t)?t.slice():[t];for(let r=0;r<n;++r)i.push(e);return i}const Iet={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:i}=n,r={},s=[];function o(t,e,n){const i=net(t),a=r[i]=r[i]||[],l=null==t?0:"string"==typeof t?1:t.length,h=e>0,c={...n,isVirtual:h,keyTail:e,keyLength:l,extractKey:$tt(t),unique:!h&&n.unique};return a.push(c),c.isPrimaryKey||s.push(c),l>1&&o(2===l?t[0]:t.slice(0,l-1),e+1,n),a.sort(((t,e)=>t.keyTail-e.keyTail)),c}const a=o(i.primaryKey.keyPath,0,i.primaryKey);r[":id"]=[a];for(const t of i.indexes)o(t.keyPath,0,t);function l(e){const n=e.query.index;return n.isVirtual?{...e,query:{index:n,range:(i=e.query.range,r=n.keyTail,{type:1===i.type?2:i.type,lower:xet(i.lower,i.lowerOpen?t.MAX_KEY:t.MIN_KEY,r),lowerOpen:!0,upper:xet(i.upper,i.upperOpen?t.MIN_KEY:t.MAX_KEY,r),upperOpen:!0})}}:e;var i,r}const h={...n,schema:{...i,primaryKey:a,indexes:s,getIndexByKeyPath:function(t){const e=r[net(t)];return e&&e[0]}},count:t=>n.count(l(t)),query:t=>n.query(l(t)),openCursor(e){const{keyTail:i,isVirtual:r,keyLength:s}=e.query.index;return r?n.openCursor(l(e)).then((n=>n&&function(n){const r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(xet(r,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?n.continue(n.key.slice(0,s).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value(e,r){n.continuePrimaryKey(xet(e,t.MAX_KEY,i),r)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const t=n.key;return 1===s?t[0]:t.slice(0,s)}},value:{get:()=>n.value}});return r}(n))):n.openCursor(e)}};return h}}}};function bet(t,e,n,i){return n=n||{},i=i||"",$8(t).forEach((r=>{if(r9(e,r)){var s=t[r],o=e[r];if("object"==typeof s&&"object"==typeof o&&s&&o){const t=C9(s);t!==C9(o)?n[i+r]=e[r]:"Object"===t?bet(s,o,n,i+r+"."):s!==o&&(n[i+r]=e[r])}else s!==o&&(n[i+r]=e[r])}else n[i+r]=void 0})),$8(e).forEach((r=>{r9(t,r)||(n[i+r]=e[r])})),n}const wet={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:i}=n.schema,r={...n,mutate(t){const r=b7.trans,{deleting:s,creating:o,updating:a}=r.table(e).hook;switch(t.type){case"add":if(o.fire===J9)break;return r._promise("readwrite",(()=>l(t)),!0);case"put":if(o.fire===J9&&a.fire===J9)break;return r._promise("readwrite",(()=>l(t)),!0);case"delete":if(s.fire===J9)break;return r._promise("readwrite",(()=>l(t)),!0);case"deleteRange":if(s.fire===J9)break;return r._promise("readwrite",(()=>function(t){return h(t.trans,t.range,1e4)}(t)),!0)}return n.mutate(t);function l(t){const e=b7.trans,r=t.keys||function(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}(i,t);if(!r)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?{...t,keys:r}:{...t}).type&&(t.values=[...t.values]),t.keys&&(t.keys=[...t.keys]),function(t,e,n){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}(n,t,r).then((l=>{const h=r.map(((n,r)=>{const h=l[r],c={onerror:null,onsuccess:null};if("delete"===t.type)s.fire.call(c,n,h,e);else if("add"===t.type||void 0===h){const s=o.fire.call(c,n,t.values[r],e);null==n&&null!=s&&(n=s,t.keys[r]=n,i.outbound||_9(t.values[r],i.keyPath,n))}else{const i=bet(h,t.values[r]),s=a.fire.call(c,i,n,h,e);if(s){const e=t.values[r];Object.keys(s).forEach((t=>{r9(e,t)?e[t]=s[t]:_9(e,t,s[t])}))}}return c}));return n.mutate(t).then((e=>{let{failures:n,results:i,numFailures:s,lastResult:o}=e;for(let a=0;a<r.length;++a){const e=i?i[a]:r[a],s=h[a];null==e?s.onerror&&s.onerror(n[a]):s.onsuccess&&s.onsuccess("put"===t.type&&l[a]?t.values[a]:e)}return{failures:n,results:i,numFailures:s,lastResult:o}})).catch((t=>(h.forEach((e=>e.onerror&&e.onerror(t))),Promise.reject(t))))}))}function h(t,e,r){return n.query({trans:t,values:!1,query:{index:i,range:e},limit:r}).then((n=>{let{result:i}=n;return l({type:"delete",keys:i,trans:t}).then((n=>n.numFailures>0?Promise.reject(n.failures[0]):i.length<r?{failures:[],numFailures:0,lastResult:void 0}:h(t,{...e,lower:i[i.length-1],lowerOpen:!0},r)))}))}}};return r}})};function Aet(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;const i=[];for(let r=0,s=0;r<e.keys.length&&s<t.length;++r)0===Ott(e.keys[r],t[s])&&(i.push(n?w9(e.values[r]):e.values[r]),++s);return i.length===t.length?i:null}catch(t){return null}}const Cet={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:t=>{if(!t.cache)return n.getMany(t);const e=Aet(t.keys,t.trans._cache,"clone"===t.cache);return e?C7.resolve(e):n.getMany(t).then((e=>(t.trans._cache={keys:t.keys,values:"clone"===t.cache?w9(e):e},e)))},mutate:t=>("add"!==t.type&&(t.trans._cache=null),n.mutate(t))}}})};function Ret(t){return!("from"in t)}const Det=function(t,e){if(!this){const e=new Det;return t&&"d"in t&&e9(e,t),e}e9(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Oet(t,e,n){const i=Ott(e,n);if(isNaN(i))return;if(i>0)throw RangeError();if(Ret(t))return e9(t,{from:e,to:n,d:1});const r=t.l,s=t.r;if(Ott(n,t.from)<0)return r?Oet(r,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Pet(t);if(Ott(e,t.to)>0)return s?Oet(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Pet(t);Ott(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Ott(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;r&&!t.l&&Net(t,r),s&&o&&Net(t,s)}function Net(t,e){Ret(e)||function t(e,n){let{from:i,to:r,l:s,r:o}=n;Oet(e,i,r),s&&t(e,s),o&&t(e,o)}(t,e)}function Met(t){let e=Ret(t)?null:{s:0,n:t};return{next(t){const n=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&Ott(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||Ott(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Pet(t){var e,n;const i=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(n=t.l)||void 0===n?void 0:n.d)||0),r=i>1?"r":i<-1?"l":"";if(r){const e="r"===r?"l":"r",n={...t},i=t[r];t.from=i.from,t.to=i.to,t[r]=i[r],n[r]=i[e],t[e]=n,n.d=Fet(n)}t.d=Fet(t)}function Fet(t){let{r:e,l:n}=t;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}s9(Det.prototype,{add(t){return Net(this,t),this},addKey(t){return Oet(this,t,t),this},addKeys(t){return t.forEach((t=>Oet(this,t,t))),this},[R9](){return Met(this)}});const Let={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Det(t.MIN_KEY,t.MAX_KEY);return{...t,table:i=>{const r=t.table(i),{schema:s}=r,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,h={...r,mutate:t=>{const o=t.trans,a=o.mutatedParts||(o.mutatedParts={}),l=t=>{const n="idb://".concat(e,"/").concat(i,"/").concat(t);return a[n]||(a[n]=new Det)},h=l(""),c=l(":dels"),{type:u}=t;let[p,d]="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[[],t.values]:[];const f=t.trans._cache;return r.mutate(t).then((t=>{if(t9(p)){"delete"!==u&&(p=t.results),h.addKeys(p);const e=Aet(p,f);e||"add"===u||c.addKeys(p),(e||d)&&function(t,e,n,i){e.indexes.forEach((function(e){const r=t(e.name||"");function s(t){return null!=t?e.extractKey(t):null}const o=t=>e.multiEntry&&t9(t)?t.forEach((t=>r.addKey(t))):r.addKey(t);(n||i).forEach(((t,e)=>{const r=n&&s(n[e]),a=i&&s(i[e]);0!==Ott(r,a)&&(null!=r&&o(r),null!=a&&o(a))}))}))}(l,s,e,d)}else if(p){const t={from:p.lower,to:p.upper};c.add(t),h.add(t)}else h.add(n),c.add(n),s.indexes.forEach((t=>l(t.name).add(n)));return t}))}},c=e=>{let{query:{index:n,range:i}}=e;var r,s;return[n,new Det(null!==(r=i.lower)&&void 0!==r?r:t.MIN_KEY,null!==(s=i.upper)&&void 0!==s?s:t.MAX_KEY)]},u={get:t=>[o,new Det(t.key)],getMany:t=>[o,(new Det).addKeys(t.keys)],count:c,query:c,openCursor:c};return $8(u).forEach((t=>{h[t]=function(s){const{subscr:o}=b7;if(o){const h=t=>{const n="idb://".concat(e,"/").concat(i,"/").concat(t);return o[n]||(o[n]=new Det)},c=h(""),p=h(":dels"),[d,f]=u[t](s);if(h(d.name||"").add(f),!d.isPrimaryKey){if("count"!==t){const e="query"===t&&l&&s.values&&r.query({...s,values:!1});return r[t].apply(this,arguments).then((n=>{if("query"===t){if(l&&s.values)return e.then((t=>{let{result:e}=t;return c.addKeys(e),n}));const t=s.values?n.result.map(a):n.result;s.values?c.addKeys(t):p.addKeys(t)}else if("openCursor"===t){const t=n,e=s.values;return t&&Object.create(t,{key:{get:()=>(p.addKey(t.primaryKey),t.key)},primaryKey:{get(){const e=t.primaryKey;return p.addKey(e),e}},value:{get:()=>(e&&c.addKey(t.primaryKey),t.value)}})}return n}))}p.add(n)}}return r[t].apply(this,arguments)}})),h}}}};class ket{constructor(t,e){this._middlewares={},this.verno=0;const n=ket.dependencies;this._options=e={addons:ket.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...e},this._deps={indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange};const{addons:i}=e;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const r={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:J9,dbReadyPromise:null,cancelOpen:J9,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;r.dbReadyPromise=new C7((t=>{r.dbReadyResolve=t})),r.openCanceller=new C7(((t,e)=>{r.cancelOpen=e})),this._state=r,this.name=t,this.on=xtt(this,"populate","blocked","versionchange","close",{ready:[o7,J9]}),this.on.ready.subscribe=d9(this.on.ready.subscribe,(t=>(e,n)=>{ket.vip((()=>{const i=this._state;if(i.openComplete)i.dbOpenError||C7.resolve().then(e),n&&t(e);else if(i.onReadyBeingFired)i.onReadyBeingFired.push(e),n&&t(e);else{t(e);const i=this;n||t((function t(){i.on.ready.unsubscribe(e),i.on.ready.unsubscribe(t)}))}}))})),this.Collection=(s=this,Itt(Ptt.prototype,(function(t,e){this.db=s;let n=vtt,i=null;if(e)try{n=e()}catch(t){i=t}const r=t._ctx,o=r.table,a=o.hook.reading.fire;this._ctx={table:o,index:r.index,isPrimKey:!r.index||o.schema.primKey.keyPath&&r.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:r.or,valueMapper:a!==$9?a:null}}))),this.Table=function(t){return Itt(Ett.prototype,(function(e,n,i){this.db=t,this._tx=i,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:xtt(null,{creating:[n7,J9],reading:[t7,$9],updating:[r7,J9],deleting:[i7,J9]})}))}(this),this.Transaction=function(t){return Itt(Xtt.prototype,(function(e,n,i,r,s){this.db=t,this.mode=e,this.storeNames=n,this.schema=i,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=xtt(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C7(((t,e)=>{this._resolve=t,this._reject=e})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(t=>{var e=this.active;return this.active=!1,this.on.error.fire(t),this.parent?this.parent._reject(t):e&&this.idbtrans&&this.idbtrans.abort(),htt(t)}))}))}(this),this.Version=function(t){return Itt(det.prototype,(function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(t){return Itt(jtt.prototype,(function(e,n,i){this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:i};const r=t._deps.indexedDB;if(!r)throw new Z9.MissingAPI;this._cmp=this._ascending=r.cmp.bind(r),this._descending=(t,e)=>r.cmp(e,t),this._max=(t,e)=>r.cmp(t,e)>0?t:e,this._min=(t,e)=>r.cmp(t,e)<0?t:e,this._IDBKeyRange=t._deps.IDBKeyRange}))}(this),this.on("versionchange",(t=>{t.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(this.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(this.name,"'. Closing db now to resume the delete request.")),this.close()})),this.on("blocked",(t=>{!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(this.name,"') was blocked")):console.warn("Upgrade '".concat(this.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))})),this._maxKey=Jtt(e.IDBKeyRange),this._createTransaction=(t,e,n,i)=>new this.Transaction(t,e,n,this._options.chromeTransactionDurability,i),this._fireOnBlocked=t=>{this.on("blocked").fire(t),dtt.filter((t=>t.name===this.name&&t!==this&&!t._state.vcFired)).map((e=>e.on("versionchange").fire(t)))},this.use(Iet),this.use(wet),this.use(Let),this.use(Cet),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach((t=>t(this)))}version(t){if(isNaN(t)||t<.1)throw new Z9.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Z9.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const e=this._versions;var n=e.filter((e=>e._cfg.version===t))[0];return n||(n=new this.Version(t),e.push(n),e.sort(oet),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(t){return this.idbdb&&(this._state.openComplete||b7.letThrough||this._vip)?t():new C7(((t,e)=>{if(this._state.openComplete)return e(new Z9.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void e(new Z9.DatabaseClosed);this.open().catch(J9)}this._state.dbReadyPromise.then(t,e)})).then(t)}use(t){let{stack:e,create:n,level:i,name:r}=t;r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:null==i?10:i,name:r}),s.sort(((t,e)=>t.level-e.level)),this}unuse(t){let{stack:e,name:n,create:i}=t;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((t=>i?t.create!==i:!!n&&t.name!==n))),this}open(){return _et(this)}_close(){const t=this._state,e=dtt.indexOf(this);if(e>=0&&dtt.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this._novip.idbdb=null}t.dbReadyPromise=new C7((e=>{t.dbReadyResolve=e})),t.openCanceller=new C7(((e,n)=>{t.cancelOpen=n}))}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new Z9.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,e=this._state;return new C7(((n,i)=>{const r=()=>{this.close();var t=this._deps.indexedDB.deleteDatabase(this.name);t.onsuccess=V7((()=>{!function(t,e){let{indexedDB:n,IDBKeyRange:i}=t;!met(n)&&"__dbnames"!==e&&fet(n,i).delete(e).catch(J9)}(this._deps,this.name),n()})),t.onerror=Wtt(i),t.onblocked=this._fireOnBlocked};if(t)throw new Z9.InvalidArgument("Arguments not allowed in db.delete()");e.isBeingOpened?e.dbReadyPromise.then(r):r()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return $8(this._allTables).map((t=>this._allTables[t]))}transaction(){const t=Tet.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,e,n){let i=b7.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);const r=-1!==t.indexOf("?");let s,o;t=t.replace("!","").replace("?","");try{if(o=e.map((t=>{var e=t instanceof this.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==t||"readonly"===t)s="readonly";else{if("rw"!=t&&"readwrite"!=t)throw new Z9.InvalidArgument("Invalid transaction mode: "+t);s="readwrite"}if(i){if("readonly"===i.mode&&"readwrite"===s){if(!r)throw new Z9.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((t=>{if(i&&-1===i.storeNames.indexOf(t)){if(!r)throw new Z9.SubTransaction("Table "+t+" not included in parent transaction.");i=null}})),r&&i&&!i.active&&(i=null)}}catch(t){return i?i._promise(null,((e,n)=>{n(t)})):htt(t)}const a=Eet.bind(null,this,s,o,i,n);return i?i._promise(s,a,"lock"):b7.trans?rtt(b7.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(t){if(!r9(this._allTables,t))throw new Z9.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]}}const Uet="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class Bet{constructor(t){this._subscribe=t}subscribe(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})}[Uet](){return this}}function zet(t,e){return $8(e).forEach((n=>{Net(t[n]||(t[n]=new Det),e[n])})),t}let Get;try{Get={indexedDB:J8.indexedDB||J8.mozIndexedDB||J8.webkitIndexedDB||J8.msIndexedDB,IDBKeyRange:J8.IDBKeyRange||J8.webkitIDBKeyRange}}catch(C8){Get={indexedDB:null,IDBKeyRange:null}}const Het=ket;function Vet(t){let e=jet;try{jet=!0,qtt.storagemutated.fire(t)}finally{jet=e}}s9(Het,{...Q9,delete:t=>new Het(t,{addons:[]}).delete(),exists:t=>new Het(t,{addons:[]}).open().then((t=>(t.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(t){try{return function(t){let{indexedDB:e,IDBKeyRange:n}=t;return met(e)?Promise.resolve(e.databases()).then((t=>t.map((t=>t.name)).filter((t=>"__dbnames"!==t)))):fet(e,n).toCollection().primaryKeys()}(Het.dependencies).then(t)}catch(t){return htt(new Z9.MissingAPI)}},defineClass:()=>function(t){e9(this,t)},ignoreTransaction:t=>b7.trans?rtt(b7.transless,t):t(),vip:get,async:function(t){return function(){try{var e=vet(t.apply(this,arguments));return e&&"function"==typeof e.then?e:C7.resolve(e)}catch(t){return htt(t)}}},spawn:function(t,e,n){try{var i=vet(t.apply(n,e||[]));return i&&"function"==typeof i.then?i:C7.resolve(i)}catch(t){return htt(t)}},currentTransaction:{get:()=>b7.trans||null},waitFor:function(t,e){const n=C7.resolve("function"==typeof t?Het.ignoreTransaction(t):t).timeout(e||6e4);return b7.trans?b7.trans.waitFor(n):n},Promise:C7,debug:{get:()=>P9,set:t=>{F9(t,"dexie"===t?()=>!0:ytt)}},derive:l9,extend:e9,props:s9,override:d9,Events:xtt,on:qtt,liveQuery:function(t){return new Bet((e=>{const n=M9(t);let i=!1,r={},s={};const o={get closed(){return i},unsubscribe:()=>{i=!0,qtt.storagemutated.unsubscribe(c)}};e.start&&e.start(o);let a=!1,l=!1;function h(){return $8(s).some((t=>r[t]&&function(t,e){const n=Met(e);let i=n.next();if(i.done)return!1;let r=i.value;const s=Met(t);let o=s.next(r.from),a=o.value;for(;!i.done&&!o.done;){if(Ott(a.from,r.to)<=0&&Ott(a.to,r.from)>=0)return!0;Ott(r.from,a.from)<0?r=(i=n.next(a.from)).value:a=(o=s.next(r.from)).value}return!1}(r[t],s[t])))}const c=t=>{zet(r,t),h()&&u()},u=()=>{if(a||i)return;r={};const p={},d=function(e){n&&Q7();const i=()=>K7(t,{subscr:e,trans:null}),r=b7.trans?rtt(b7.transless,i):i();return n&&r.then(J7,J7),r}(p);l||(qtt("storagemutated",c),l=!0),a=!0,Promise.resolve(d).then((t=>{a=!1,i||(h()?u():(r={},s=p,e.next&&e.next(t)))}),(t=>{a=!1,e.error&&e.error(t),o.unsubscribe()}))};return u(),o}))},extendObservabilitySet:zet,getByKeyPath:y9,setByKeyPath:_9,delByKeyPath:function(t,e){"string"==typeof e?_9(t,e,void 0):"length"in e&&[].map.call(e,(function(e){_9(t,e,void 0)}))},shallowClone:v9,deepClone:w9,getObjectDiff:bet,cmp:Ott,asap:m9,minKey:-1/0,addons:[],connections:dtt,errnames:q9,dependencies:Get,semVer:"3.2.3",version:"3.2.3".split(".").map((t=>parseInt(t))).reduce(((t,e,n)=>t+e/Math.pow(10,2*n)))}),Het.maxKey=Jtt(Het.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(qtt("storagemutated",(t=>{if(!jet){let e;ftt?(e=document.createEvent("CustomEvent"),e.initCustomEvent("x-storagemutated-1",!0,!0,t)):e=new CustomEvent("x-storagemutated-1",{detail:t}),jet=!0,dispatchEvent(e),jet=!1}})),addEventListener("x-storagemutated-1",(t=>{let{detail:e}=t;jet||Vet(e)})));let jet=!1;if("undefined"!=typeof BroadcastChannel){const t=new BroadcastChannel("x-storagemutated-1");"function"==typeof t.unref&&t.unref(),qtt("storagemutated",(e=>{jet||t.postMessage(e)})),t.onmessage=t=>{t.data&&Vet(t.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){qtt("storagemutated",(t=>{try{jet||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((e=>e.postMessage({type:"x-storagemutated-1",changedParts:t}))))}catch(t){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(t=>{if("x-storagemutated-1"===t.key){const e=JSON.parse(t.newValue);e&&Vet(e.changedParts)}}));const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",(function(t){let{data:e}=t;e&&"x-storagemutated-1"===e.type&&Vet(e.changedParts)}))}C7.rejectionMapper=function(t,e){if(!t||t instanceof V9||t instanceof TypeError||t instanceof SyntaxError||!t.name||!K9[t.name])return t;var n=new K9[t.name](e||t.message,t);return"stack"in t&&a9(n,"stack",{get:function(){return this.inner.stack}}),n},F9(P9,ytt);class Wet extends ket{constructor(){super("ModelDatabase"),this.models=void 0,this.version(2).stores({models:"id, file"})}}class Yet{constructor(){this.db=void 0,this.db=new Wet}async getModels(t){await this.db.open();const e=w8(Ge()),n=[];for(const i of t.models){const t=await this.getModelURL(e,i.id),r=i.id;n.push({url:t,id:r})}return this.db.close(),n}async clearCache(t){await this.db.open();for(const e of t.models)localStorage.removeItem(e.id);await this.db.delete(),this.db=new Wet,this.db.close()}async deleteModels(t){await this.db.open();for(const e of t)this.isModelCached(e)&&(localStorage.removeItem(e),await this.db.models.where("id").equals(e).delete());this.db.close()}async getModelURL(t,e){return this.isModelCached(e)?this.getModelFromLocalCache(e):this.getModelFromFirebase(t,e)}async getModelFromFirebase(t,e){const n=b8(t,e),i=await function(t){return d8(t=Kt(t))}(n);return await this.cacheModel(e,i),console.log("Got model from firebase!"),i}async getModelFromLocalCache(t){const e=(await this.db.models.where("id").equals(t).toArray())[0].file;return console.log("Got model from local cache!"),URL.createObjectURL(e)}isModelCached(t){return null!==localStorage.getItem(t)}async cacheModel(t,e){const n=performance.now().toString();localStorage.setItem(t,n);const i=await fetch(e),r=await i.blob();await this.db.models.add({id:t,file:r})}}var qet=n(3165);class Xet{get container(){return this.components.renderer.get().domElement.parentElement}constructor(t,e,n){this.database=new Yet,this.floorplans=[],this.components=void 0,this.fragments=void 0,this.loadedModels=new Set,this.whiteMaterial=new nc({color:"white"}),this.properties={},this.sceneEvents=[],this.events=void 0,this.createClippingPlane=t=>{if("KeyS"===t.code){const t=this.getClipper();t&&t.create()}},this.createDimension=t=>{if("KeyD"===t.code){const t=this.getDimensions();t&&t.create()}},this.deleteClippingPlaneOrDimension=t=>{if("Delete"===t.code){this.getDimensions().delete();this.getClipper().delete()}},this.updateCulling=()=>{this.fragments.culler.needsUpdate=!0},this.preselect=()=>{this.fragments.highlighter.highlight("preselection")},this.select=()=>{const t=this.fragments.highlighter.highlight("selection");if(t){const e=this.properties[t.fragment.id][t.id];if(e){const t=[];for(const n in e){let i=e[n];i||(i="Unknown"),i.value&&(i=i.value),"number"===typeof i&&(i=i.toString()),t.push({name:n,value:i})}return this.events.trigger({type:"UPDATE_PROPERTIES",payload:t})}}this.events.trigger({type:"UPDATE_PROPERTIES",payload:[]})},this.events=n,this.components=new lE,this.components.scene=new ST(this.components),this.components.renderer=new wT(this.components,t);const i=this.components.scene.get();i.background=new ec;const r=new XY(this.components);this.components.camera=r,this.components.raycaster=new ET(this.components),this.components.init();const s=new xT(this.components);this.components.tools.add(s);const o=new gq(this.components,fq);this.components.tools.add(o);const a=new JY({color:0,linewidth:.001});o.styles.create("thin_lines",[],a);const l=new Rq(o,r);this.components.tools.add(l);const h=new ey;h.position.set(5,10,3),h.intensity=.5,i.add(h);const c=new ny;c.intensity=.5,i.add(c);const u=new IT(this.components);this.components.tools.add(u),this.fragments=new VY(this.components),this.fragments.highlighter.active=!0;const p=new nc({color:1668818}),d=new nc({color:1668818,opacity:.5,transparent:!0});this.fragments.highlighter.add("selection",[p]),this.fragments.highlighter.add("preselection",[d]),this.setupEvents(),this.loadAllModels(e),this.fragments.exploder.groupName="floor"}dispose(){this.properties={},this.toggleEvents(!1),this.loadedModels.clear(),this.components.dispose(),this.fragments.dispose(),this.whiteMaterial.dispose(),this.components=null,this.fragments=null}explode(t){const e=this.fragments.exploder;t?e.explode():e.reset()}async convertIfcToFragments(t){let e=new VY(this.components);e.ifcLoader.settings.optionalCategories.length=0,e.ifcLoader.settings.wasm={path:"../../",absolute:!1},e.ifcLoader.settings.webIfc={COORDINATE_TO_ORIGIN:!0,USE_FAST_BOOLS:!0};const n=URL.createObjectURL(t),i=await e.ifcLoader.load(n),r=await this.serializeFragments(i);return e.dispose(),e=null,r}toggleFloorplan(t,e){const n=this.getFloorNav();this.floorplans.length&&(t&&e?(this.toggleGrid(!1),this.toggleEdges(!0),n.goTo(e.id),this.fragments.materials.apply(this.whiteMaterial)):(this.toggleGrid(!0),this.toggleEdges(!1),this.fragments.materials.reset(),n.exitPlanView()))}toggleClippingPlanes(t){const e=this.getClipper();e&&(e.enabled=t)}toggleDimensions(t){const e=this.getDimensions();e&&(e.enabled=t)}setupEvents(){this.sceneEvents=[{name:"mousemove",action:this.preselect},{name:"click",action:this.select},{name:"mouseup",action:this.updateCulling},{name:"wheel",action:this.updateCulling},{name:"keydown",action:this.createClippingPlane},{name:"keydown",action:this.createDimension},{name:"keydown",action:this.deleteClippingPlaneOrDimension}],this.toggleEvents(!0)}toggleEvents(t){for(const e of this.sceneEvents)t?window.addEventListener(e.name,e.action):window.removeEventListener(e.name,e.action)}toggleGrid(t){this.components.tools.get("SimpleGrid").get().visible=t}getClipper(){return this.components.tools.get("EdgesClipper")}getFloorNav(){return this.components.tools.get("PlanNavigator")}getDimensions(){return this.components.tools.get("SimpleDimensions")}async serializeFragments(t){const e=[];for(const n of t.fragments){const t=await n.export();e.push(t.geometry,t.data)}return e.push(new File([JSON.stringify(t.properties)],"properties.json")),e.push(new File([JSON.stringify(t.levelRelationships)],"levels-relationship.json")),e.push(new File([JSON.stringify(t.itemTypes)],"model-types.json")),e.push(new File([JSON.stringify(t.allTypes)],"all-types.json")),e.push(new File([JSON.stringify(t.floorsProperties)],"levels-properties.json")),e.push(new File([JSON.stringify(t.coordinationMatrix)],"coordination-matrix.json")),e.push(new File([JSON.stringify(t.expressIDFragmentIDMap)],"express-fragment-map.json")),K8(e).blob()}toggleEdges(t){const e=Object.values(this.fragments.edges.edgesList),n=this.components.scene.get();for(const i of e)t?n.add(i):i.removeFromParent()}async loadAllModels(t){const e=await this.database.getModels(t);for(const n of e){const{url:t,id:e}=n;if(this.loadedModels.has(e))continue;this.loadedModels.add(e);const{entries:i}=await(0,qet.$1)(t),r=Object.keys(i),s=await i["properties.json"].json(),o=await i["all-types.json"].json(),a=await i["model-types.json"].json(),l=await i["levels-properties.json"].json(),h=await i["levels-relationship.json"].json(),c=1.5,u=this.getFloorNav();if(0===this.floorplans.length){for(const t of l){const e=t.SceneHeight+c;this.floorplans.push({id:t.expressID,name:t.Name.value}),await u.create({id:t.expressID,ortho:!0,normal:new Ml(0,-1,0),point:new Ml(0,e,0)})}this.events.trigger({type:"UPDATE_FLOORPLANS",payload:this.floorplans})}for(let n=0;n<r.length;n++){if(!r[n].includes(".glb"))continue;const t=r[n],e=await i[t].blob(),c=URL.createObjectURL(e),u=t.substring(0,t.indexOf(".glb"))+".json",p=await i[u].json(),d=await i[u].blob(),f=URL.createObjectURL(d),m=await this.fragments.load(c,f);this.properties[m.id]=s;this.fragments.edges.generate(m).removeFromParent();this.getClipper().styles.get().thin_lines.meshes.push(m.mesh);const g={category:{},floor:{}},y={};for(const n of l)y[n.expressID]=n.Name.value;for(const n of p.ids){const t=o[a[n]];g.category[t]||(g.category[t]=[]),g.category[t].push(n);const e=y[h[n]];g.floor[e]||(g.floor[e]=[]),g.floor[e].push(n)}this.fragments.groups.add(m.id,g),this.fragments.culler.needsUpdate=!0,this.fragments.highlighter.update()}}}}const Zet={viewer:null,async start(t,e,n){this.viewer||(this.viewer=new Xet(t,e,n))},remove(){this.viewer&&(this.viewer.dispose(),this.viewer=null)},async convertIfcToFragments(t){if(!this.viewer)throw new Error("Building viewer not active!");return this.viewer.convertIfcToFragments(t)},async deleteModels(t){this.viewer&&await this.viewer.database.deleteModels(t)},async refreshModels(t,e){if(this.viewer){const n=this.viewer.container;this.viewer.dispose(),this.viewer=null,this.viewer=new Xet(n,t,e)}},explode(t){this.viewer&&this.viewer.explode(t)},toggleClippingPlanes(t){this.viewer&&this.viewer.toggleClippingPlanes(t)},toggleDimensions(t){this.viewer&&this.viewer.toggleDimensions(t)},toggleFloorplan(t,e){this.viewer&&this.viewer.toggleFloorplan(t,e)}},Ket=()=>{!async function(t,e,n){const i=di(t);un(t,e,Pi);const r=yr(i,n);new br(i,"signInViaPopup",e,r).executeNotNull()}(cs(),new ki)},Qet=()=>{!function(t){Kt(t).signOut()}(cs())},Jet=async(t,e)=>{const n=t.uid,i=u5(Ge());await function(t){return r6(t5(t.firestore,c5),[new T1(t._key,a1.none())])}(a5(i,"buildings",n));const r=w8(Ge()),s=[];for(const o of t.models){s.push(o.id);const t=b8(r,o.id);await I8(t)}await Zet.deleteModels(s),e.trigger({type:"CLOSE_BUILDING"})},$et=async t=>{const e=u5(Ge());await function(t,e,n){t=t5(t,r5);const i=t5(t.firestore,c5),r=b5(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(e=Kt(e))||e instanceof m5?C5(r,"updateDoc",t._key,e,n,a):A5(r,"updateDoc",t._key,e),r6(i,[s.toMutation(t._key,a1.exists(!0))])}(a5(e,"buildings",t.uid),{...t})},tnt=async(t,e,n,i)=>{const r=b8(w8(Ge()),t.id);await function(t,e,n){return p8(t=Kt(t),e,n)}(r,e),await Zet.refreshModels(n,i),i.trigger({type:"UPDATE_BUILDING",payload:n})},ent=async(t,e,n)=>{const i=b8(w8(Ge()),t.id);await I8(i),await Zet.refreshModels(e,n),n.trigger({type:"UPDATE_BUILDING",payload:e})};class nnt{constructor(){this.list={}}on(t,e){this.list[t]||(this.list[t]=[]),this.list[t].push(e)}trigger(t){if(this.list[t.type])for(const e of this.list[t.type])e(t.payload)}}const int=(0,e.createContext)([It,()=>{}]),rnt=t=>{let{children:n}=t;const[i,r]=(0,e.useReducer)(xt,It),s=new nnt,o=t=>{r(t),(async(t,e)=>{if("LOGIN"===t.type)return Ket();if("LOGOUT"===t.type)return Zet.remove(),l6.remove(),Qet();if("START_MAP"===t.type){const{container:n,user:i}=t.payload;return l6.start(n,i,e)}if("REMOVE_MAP"===t.type||"OPEN_BUILDING"===t.type)return l6.remove();if("ADD_BUILDING"===t.type)return l6.addBuilding(t.payload);if("DELETE_BUILDING"===t.type)return Jet(t.payload,e);if("UPDATE_BUILDING"===t.type)return $et(t.payload);if("START_BUILDING"===t.type){const{container:n,building:i}=t.payload;return Zet.start(n,i,e)}if("CLOSE_BUILDING"===t.type)return Zet.remove();if("UPLOAD_MODEL"===t.type){const{model:n,file:i,building:r}=t.payload,s=await Zet.convertIfcToFragments(i);return tnt(n,s,r,e)}if("DELETE_MODEL"===t.type){const{model:n,building:i}=t.payload;return ent(n,i,e)}if("EXPLODE_MODEL"===t.type)return Zet.explode(t.payload);if("TOGGLE_CLIPPER"===t.type)return Zet.toggleClippingPlanes(t.payload);if("TOGGLE_DIMENSIONS"===t.type)return Zet.toggleDimensions(t.payload);if("TOGGLE_FLOORPLAN"===t.type){const{active:e,floorplan:n}=t.payload;Zet.toggleFloorplan(e,n)}})(t,s)};for(const e of Et)s.on(e,(t=>{o({type:e,payload:t})}));return(0,ps.jsxs)(int.Provider,{value:[i,o],children:[(0,ps.jsx)(fs,{}),n]})},snt=()=>(0,e.useContext)(int);var ont=n(8168),ant=n(8587),lnt=n(8387),hnt=n(4984),cnt=n(8812),unt=n(3216),pnt=n(7758);const dnt=["sx"],fnt=t=>{var e,n;const i={systemProps:{},otherProps:{}},r=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:pnt.A;return Object.keys(t).forEach((e=>{r[e]?i.systemProps[e]=t[e]:i.otherProps[e]=t[e]})),i};function mnt(t){const{sx:e}=t,n=(0,ant.A)(t,dnt),{systemProps:i,otherProps:r}=fnt(n);let s;return s=Array.isArray(e)?[i,...e]:"function"===typeof e?function(){const t=e(...arguments);return(0,unt.Q)(t)?(0,ont.A)({},i,t):i}:(0,ont.A)({},i,e),(0,ont.A)({},r,{sx:s})}var gnt=n(8653);const ynt=["className","component"];var _nt=n(5430),vnt=n(8279),Tnt=n(3375),Ent=n(7056);const xnt=(0,Ent.A)("MuiBox",["root"]),Int=(0,vnt.A)(),bnt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:i,defaultClassName:r="MuiBox-root",generateClassName:s}=t,o=(0,hnt.Ay)("div",{shouldForwardProp:t=>"theme"!==t&&"sx"!==t&&"as"!==t})(cnt.A),a=e.forwardRef((function(t,e){const a=(0,gnt.A)(i),l=mnt(t),{className:h,component:c="div"}=l,u=(0,ant.A)(l,ynt);return(0,ps.jsx)(o,(0,ont.A)({as:c,ref:e,className:(0,lnt.A)(h,s?s(r):r),theme:n&&a[n]||a},u))}));return a}({themeId:Tnt.A,defaultTheme:Int,defaultClassName:xnt.root,generateClassName:_nt.A.generate}),wnt=bnt;var Snt=n(2018),Ant=n(8606),Cnt=n(3650),Rnt=n(5658),Dnt=n(1070),Ont=n(5849),Nnt=n(3319),Mnt=n(2191);function Pnt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Fnt(t,e){return Fnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fnt(t,e)}function Lnt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Fnt(t,e)}const knt=e.createContext(null);function Unt(t,n){var i=Object.create(null);return t&&e.Children.map(t,(function(t){return t})).forEach((function(t){i[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),i}function Bnt(t,e,n){return null!=n[e]?n[e]:t.props[e]}function znt(t,n,i){var r=Unt(t.children),s=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var i,r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var a={};for(var l in e){if(r[l])for(i=0;i<r[l].length;i++){var h=r[l][i];a[r[l][i]]=n(h)}a[l]=n(l)}for(i=0;i<s.length;i++)a[s[i]]=n(s[i]);return a}(n,r);return Object.keys(s).forEach((function(o){var a=s[o];if((0,e.isValidElement)(a)){var l=o in n,h=o in r,c=n[o],u=(0,e.isValidElement)(c)&&!c.props.in;!h||l&&!u?h||!l||u?h&&l&&(0,e.isValidElement)(c)&&(s[o]=(0,e.cloneElement)(a,{onExited:i.bind(null,a),in:c.props.in,exit:Bnt(a,"exit",t),enter:Bnt(a,"enter",t)})):s[o]=(0,e.cloneElement)(a,{in:!1}):s[o]=(0,e.cloneElement)(a,{onExited:i.bind(null,a),in:!0,exit:Bnt(a,"exit",t),enter:Bnt(a,"enter",t)})}})),s}var Gnt=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},Hnt=function(t){function n(e,n){var i,r=(i=t.call(this,e,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}Lnt(n,t);var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var i,r,s=n.children,o=n.handleExited;return{children:n.firstRender?(i=t,r=o,Unt(i.children,(function(t){return(0,e.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:Bnt(t,"appear",i),enter:Bnt(t,"enter",i),exit:Bnt(t,"exit",i)})}))):znt(t,s,o),firstRender:!1}},i.handleExited=function(t,e){var n=Unt(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,ont.A)({},e.children);return delete n[t.key],{children:n}})))},i.render=function(){var t=this.props,n=t.component,i=t.childFactory,r=(0,ant.A)(t,["component","childFactory"]),s=this.state.contextValue,o=Gnt(this.state.children).map(i);return delete r.appear,delete r.enter,delete r.exit,null===n?e.createElement(knt.Provider,{value:s},o):e.createElement(knt.Provider,{value:s},e.createElement(n,r,o))},n}(e.Component);Hnt.propTypes={},Hnt.defaultProps={component:"div",childFactory:function(t){return t}};const Vnt=Hnt;var jnt=n(5025),Wnt=n(1722),Ynt=n(9436),qnt=n(2830),Xnt=(n(5513),n(219),(0,jnt.w)((function(t,n){var i=t.styles,r=(0,qnt.J)([i],void 0,e.useContext(jnt.T));if(!jnt.i){for(var s,o=r.name,a=r.styles,l=r.next;void 0!==l;)o+=" "+l.name,a+=l.styles,l=l.next;var h=!0===n.compat,c=n.insert("",{name:o,styles:a},n.sheet,h);return h?null:e.createElement("style",((s={})["data-emotion"]=n.key+"-global "+o,s.dangerouslySetInnerHTML={__html:c},s.nonce=n.sheet.nonce,s))}var u=e.useRef();return(0,Ynt.i)((function(){var t=n.key+"-global",e=new n.sheet.constructor({key:t,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),i=!1,s=document.querySelector('style[data-emotion="'+t+" "+r.name+'"]');return n.sheet.tags.length&&(e.before=n.sheet.tags[0]),null!==s&&(i=!0,s.setAttribute("data-emotion",t),e.hydrate([s])),u.current=[e,i],function(){e.flush()}}),[n]),(0,Ynt.i)((function(){var t=u.current,e=t[0];if(t[1])t[1]=!1;else{if(void 0!==r.next&&(0,Wnt.sk)(n,r.next,!0),e.tags.length){var i=e.tags[e.tags.length-1].nextElementSibling;e.before=i,e.flush()}n.insert("",r,e,!1)}}),[n,r.name]),null})));function Znt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,qnt.J)(e)}var Knt=function(){var t=Znt.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Qnt=n(1140);const Jnt=function(t){const{className:n,classes:i,pulsate:r=!1,rippleX:s,rippleY:o,rippleSize:a,in:l,onExited:h,timeout:c}=t,[u,p]=e.useState(!1),d=(0,lnt.A)(n,i.ripple,i.rippleVisible,r&&i.ripplePulsate),f={width:a,height:a,top:-a/2+o,left:-a/2+s},m=(0,lnt.A)(i.child,u&&i.childLeaving,r&&i.childPulsate);return l||u||p(!0),e.useEffect((()=>{if(!l&&null!=h){const t=setTimeout(h,c);return()=>{clearTimeout(t)}}}),[h,l,c]),(0,ps.jsx)("span",{className:d,style:f,children:(0,ps.jsx)("span",{className:m})})};const $nt=(0,Ent.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var tit,eit,nit,iit;const rit=["center","classes","className"];let sit,oit,ait,lit;const hit=Knt(sit||(sit=tit||(tit=Pnt(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),cit=Knt(oit||(oit=eit||(eit=Pnt(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),uit=Knt(ait||(ait=nit||(nit=Pnt(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),pit=(0,Rnt.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),dit=(0,Rnt.Ay)(Jnt,{name:"MuiTouchRipple",slot:"Ripple"})(lit||(lit=iit||(iit=Pnt(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),$nt.rippleVisible,hit,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),$nt.ripplePulsate,(t=>{let{theme:e}=t;return e.transitions.duration.shorter}),$nt.child,$nt.childLeaving,cit,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),$nt.childPulsate,uit,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut})),fit=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:o}=i,a=(0,ant.A)(i,rit),[l,h]=e.useState([]),c=e.useRef(0),u=e.useRef(null);e.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[l]);const p=e.useRef(!1),d=(0,Qnt.A)(),f=e.useRef(null),m=e.useRef(null),g=e.useCallback((t=>{const{pulsate:e,rippleX:n,rippleY:i,rippleSize:r,cb:o}=t;h((t=>[...t,(0,ps.jsx)(dit,{classes:{ripple:(0,lnt.A)(s.ripple,$nt.ripple),rippleVisible:(0,lnt.A)(s.rippleVisible,$nt.rippleVisible),ripplePulsate:(0,lnt.A)(s.ripplePulsate,$nt.ripplePulsate),child:(0,lnt.A)(s.child,$nt.child),childLeaving:(0,lnt.A)(s.childLeaving,$nt.childLeaving),childPulsate:(0,lnt.A)(s.childPulsate,$nt.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:i,rippleSize:r},c.current)])),c.current+=1,u.current=o}),[s]),y=e.useCallback((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:s=r||e.pulsate,fakeElement:o=!1}=e;if("mousedown"===(null==t?void 0:t.type)&&p.current)return void(p.current=!1);"touchstart"===(null==t?void 0:t.type)&&(p.current=!0);const a=o?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let h,c,u;if(s||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)h=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:e,clientY:n}=t.touches&&t.touches.length>0?t.touches[0]:t;h=Math.round(e-l.left),c=Math.round(n-l.top)}if(s)u=Math.sqrt((2*l.width**2+l.height**2)/3),u%2===0&&(u+=1);else{const t=2*Math.max(Math.abs((a?a.clientWidth:0)-h),h)+2,e=2*Math.max(Math.abs((a?a.clientHeight:0)-c),c)+2;u=Math.sqrt(t**2+e**2)}null!=t&&t.touches?null===f.current&&(f.current=()=>{g({pulsate:i,rippleX:h,rippleY:c,rippleSize:u,cb:n})},d.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:i,rippleX:h,rippleY:c,rippleSize:u,cb:n})}),[r,g,d]),_=e.useCallback((()=>{y({},{pulsate:!0})}),[y]),v=e.useCallback(((t,e)=>{if(d.clear(),"touchend"===(null==t?void 0:t.type)&&f.current)return f.current(),f.current=null,void d.start(0,(()=>{v(t,e)}));f.current=null,h((t=>t.length>0?t.slice(1):t)),u.current=e}),[d]);return e.useImperativeHandle(n,(()=>({pulsate:_,start:y,stop:v})),[_,y,v]),(0,ps.jsx)(pit,(0,ont.A)({className:(0,lnt.A)($nt.root,s.root,o),ref:m},a,{children:(0,ps.jsx)(Vnt,{component:null,exit:!0,children:l})}))})),mit=fit;var git=n(2400);function yit(t){return(0,git.Ay)("MuiButtonBase",t)}const _it=(0,Ent.A)("MuiButtonBase",["root","disabled","focusVisible"]),vit=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Tit=(0,Rnt.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(_it.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Eit=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:h=!1,disableRipple:c=!1,disableTouchRipple:u=!1,focusRipple:p=!1,LinkComponent:d="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:y,onFocus:_,onFocusVisible:v,onKeyDown:T,onKeyUp:E,onMouseDown:x,onMouseLeave:I,onMouseUp:b,onTouchEnd:w,onTouchMove:S,onTouchStart:A,tabIndex:C=0,TouchRippleProps:R,touchRippleRef:D,type:O}=i,N=(0,ant.A)(i,vit),M=e.useRef(null),P=e.useRef(null),F=(0,Ont.A)(P,D),{isFocusVisibleRef:L,onFocus:k,onBlur:U,ref:B}=(0,Mnt.A)(),[z,G]=e.useState(!1);h&&z&&G(!1),e.useImperativeHandle(r,(()=>({focusVisible:()=>{G(!0),M.current.focus()}})),[]);const[H,V]=e.useState(!1);e.useEffect((()=>{V(!0)}),[]);const j=H&&!c&&!h;function W(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return(0,Nnt.A)((i=>{e&&e(i);return!n&&P.current&&P.current[t](i),!0}))}e.useEffect((()=>{z&&p&&!c&&H&&P.current.pulsate()}),[c,p,z,H]);const Y=W("start",x),q=W("stop",g),X=W("stop",y),Z=W("stop",b),K=W("stop",(t=>{z&&t.preventDefault(),I&&I(t)})),Q=W("start",A),J=W("stop",w),$=W("stop",S),tt=W("stop",(t=>{U(t),!1===L.current&&G(!1),f&&f(t)}),!1),et=(0,Nnt.A)((t=>{M.current||(M.current=t.currentTarget),k(t),!0===L.current&&(G(!0),v&&v(t)),_&&_(t)})),nt=()=>{const t=M.current;return l&&"button"!==l&&!("A"===t.tagName&&t.href)},it=e.useRef(!1),rt=(0,Nnt.A)((t=>{p&&!it.current&&z&&P.current&&" "===t.key&&(it.current=!0,P.current.stop(t,(()=>{P.current.start(t)}))),t.target===t.currentTarget&&nt()&&" "===t.key&&t.preventDefault(),T&&T(t),t.target===t.currentTarget&&nt()&&"Enter"===t.key&&!h&&(t.preventDefault(),m&&m(t))})),st=(0,Nnt.A)((t=>{p&&" "===t.key&&P.current&&z&&!t.defaultPrevented&&(it.current=!1,P.current.stop(t,(()=>{P.current.pulsate(t)}))),E&&E(t),m&&t.target===t.currentTarget&&nt()&&" "===t.key&&!t.defaultPrevented&&m(t)}));let ot=l;"button"===ot&&(N.href||N.to)&&(ot=d);const at={};"button"===ot?(at.type=void 0===O?"button":O,at.disabled=h):(N.href||N.to||(at.role="button"),h&&(at["aria-disabled"]=h));const lt=(0,Ont.A)(n,B,M);const ht=(0,ont.A)({},i,{centerRipple:s,component:l,disabled:h,disableRipple:c,disableTouchRipple:u,focusRipple:p,tabIndex:C,focusVisible:z}),ct=(t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,s={root:["root",e&&"disabled",n&&"focusVisible"]},o=(0,Ant.A)(s,yit,r);return n&&i&&(o.root+=" ".concat(i)),o})(ht);return(0,ps.jsxs)(Tit,(0,ont.A)({as:ot,className:(0,lnt.A)(ct.root,a),ownerState:ht,onBlur:tt,onClick:m,onContextMenu:q,onFocus:et,onKeyDown:rt,onKeyUp:st,onMouseDown:Y,onMouseLeave:K,onMouseUp:Z,onDragLeave:X,onTouchEnd:J,onTouchMove:$,onTouchStart:Q,ref:lt,tabIndex:h?-1:C,type:O},at,N,{children:[o,j?(0,ps.jsx)(mit,(0,ont.A)({ref:F,center:s},R)):null]}))})),xit=Eit;var Iit=n(6803);function bit(t){return(0,git.Ay)("MuiButton",t)}const wit=(0,Ent.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const Sit=e.createContext({});const Ait=e.createContext(void 0),Cit=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Rit=t=>(0,ont.A)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Dit=(0,Rnt.Ay)(xit,{shouldForwardProp:t=>(0,Rnt.ep)(t)||"classes"===t,name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e["".concat(n.variant).concat((0,Iit.A)(n.color))],e["size".concat((0,Iit.A)(n.size))],e["".concat(n.variant,"Size").concat((0,Iit.A)(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((t=>{let{theme:e,ownerState:n}=t;var i,r;const s="light"===e.palette.mode?e.palette.grey[300]:e.palette.grey[800],o="light"===e.palette.mode?e.palette.grey.A100:e.palette.grey[700];return(0,ont.A)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,ont.A)({textDecoration:"none",backgroundColor:e.vars?"rgba(".concat(e.vars.palette.text.primaryChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Cnt.X4)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Cnt.X4)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((e.vars||e).palette[n.color].main),backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Cnt.X4)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}}),"&:active":(0,ont.A)({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[8]}),["&.".concat(wit.focusVisible)]:(0,ont.A)({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[6]}),["&.".concat(wit.disabled)]:(0,ont.A)({color:(e.vars||e).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.action.disabledBackground)},"contained"===n.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main,border:e.vars?"1px solid rgba(".concat(e.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,Cnt.X4)(e.palette[n.color].main,.5))},"contained"===n.variant&&{color:e.vars?e.vars.palette.text.primary:null==(i=(r=e.palette).getContrastText)?void 0:i.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:s,boxShadow:(e.vars||e).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(t=>{let{ownerState:e}=t;return e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(wit.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(wit.disabled)]:{boxShadow:"none"}}})),Oit=(0,Rnt.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e["iconSize".concat((0,Iit.A)(n.size))]]}})((t=>{let{ownerState:e}=t;return(0,ont.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Rit(e))})),Nit=(0,Rnt.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e["iconSize".concat((0,Iit.A)(n.size))]]}})((t=>{let{ownerState:e}=t;return(0,ont.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Rit(e))})),Mit=e.forwardRef((function(t,n){const i=e.useContext(Sit),r=e.useContext(Ait),s=(0,Snt.A)(i,t),o=(0,Dnt.A)({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:h="button",className:c,disabled:u=!1,disableElevation:p=!1,disableFocusRipple:d=!1,endIcon:f,focusVisibleClassName:m,fullWidth:g=!1,size:y="medium",startIcon:_,type:v,variant:T="text"}=o,E=(0,ant.A)(o,Cit),x=(0,ont.A)({},o,{color:l,component:h,disabled:u,disableElevation:p,disableFocusRipple:d,fullWidth:g,size:y,type:v,variant:T}),I=(t=>{const{color:e,disableElevation:n,fullWidth:i,size:r,variant:s,classes:o}=t,a={root:["root",s,"".concat(s).concat((0,Iit.A)(e)),"size".concat((0,Iit.A)(r)),"".concat(s,"Size").concat((0,Iit.A)(r)),"inherit"===e&&"colorInherit",n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,Iit.A)(r))],endIcon:["endIcon","iconSize".concat((0,Iit.A)(r))]},l=(0,Ant.A)(a,bit,o);return(0,ont.A)({},o,l)})(x),b=_&&(0,ps.jsx)(Oit,{className:I.startIcon,ownerState:x,children:_}),w=f&&(0,ps.jsx)(Nit,{className:I.endIcon,ownerState:x,children:f}),S=r||"";return(0,ps.jsxs)(Dit,(0,ont.A)({ownerState:x,className:(0,lnt.A)(i.className,I.root,c,S),component:h,disabled:u,focusRipple:!d,focusVisibleClassName:(0,lnt.A)(I.focusVisible,m),ref:n,type:v},E,{classes:I,children:[b,a,w]}))})),Pit=Mit,Fit=()=>{const t=snt()[1];return(0,ps.jsxs)(wnt,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,ps.jsx)("img",{className:"landing-logo",alt:"ifcjs logo",src:"ifcjs-logo.png"}),(0,ps.jsx)(Pit,{variant:"outlined",onClick:()=>{t({type:"LOGIN"})},children:"Click here to log in."})]})},Lit=()=>{const[t]=snt();return t.user?(0,ps.jsx)(pt,{to:"/map"}):(0,ps.jsx)(Fit,{})};function kit(t){return(0,git.Ay)("MuiToolbar",t)}(0,Ent.A)("MuiToolbar",["root","gutters","regular","dense"]);const Uit=["className","component","disableGutters","variant"],Bit=(0,Rnt.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(t=>{let{theme:e,ownerState:n}=t;return"regular"===n.variant&&e.mixins.toolbar})),zit=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiToolbar"}),{className:i,component:r="div",disableGutters:s=!1,variant:o="regular"}=n,a=(0,ant.A)(n,Uit),l=(0,ont.A)({},n,{component:r,disableGutters:s,variant:o}),h=(t=>{const{classes:e,disableGutters:n,variant:i}=t,r={root:["root",!n&&"gutters",i]};return(0,Ant.A)(r,kit,e)})(l);return(0,ps.jsx)(Bit,(0,ont.A)({as:r,className:(0,lnt.A)(h.root,i),ref:e,ownerState:l},a))})),Git=zit;function Hit(t){return(0,git.Ay)("MuiIconButton",t)}const Vit=(0,Ent.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),jit=["edge","children","className","color","disabled","disableFocusRipple","size"],Wit=(0,Rnt.Ay)(xit,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"default"!==n.color&&e["color".concat((0,Iit.A)(n.color))],n.edge&&e["edge".concat((0,Iit.A)(n.edge))],e["size".concat((0,Iit.A)(n.size))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Cnt.X4)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(t=>{let{theme:e,ownerState:n}=t;var i;const r=null==(i=(e.vars||e).palette)?void 0:i[n.color];return(0,ont.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,ont.A)({color:null==r?void 0:r.main},!n.disableRipple&&{"&:hover":(0,ont.A)({},r&&{backgroundColor:e.vars?"rgba(".concat(r.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Cnt.X4)(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{["&.".concat(Vit.disabled)]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})})),Yit=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiIconButton"}),{edge:i=!1,children:r,className:s,color:o="default",disabled:a=!1,disableFocusRipple:l=!1,size:h="medium"}=n,c=(0,ant.A)(n,jit),u=(0,ont.A)({},n,{edge:i,color:o,disabled:a,disableFocusRipple:l,size:h}),p=(t=>{const{classes:e,disabled:n,color:i,edge:r,size:s}=t,o={root:["root",n&&"disabled","default"!==i&&"color".concat((0,Iit.A)(i)),r&&"edge".concat((0,Iit.A)(r)),"size".concat((0,Iit.A)(s))]};return(0,Ant.A)(o,Hit,e)})(u);return(0,ps.jsx)(Wit,(0,ont.A)({className:(0,lnt.A)(p.root,s),centerRipple:!0,focusRipple:!l,disabled:a,ref:e,ownerState:u},c,{children:r}))})),qit=Yit;var Xit=n(9611);function Zit(t){return(0,git.Ay)("MuiTypography",t)}(0,Ent.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Kit=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Qit=(0,Rnt.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat((0,Iit.A)(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Jit={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},$it={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},trt=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiTypography"}),i=(t=>$it[t]||t)(n.color),r=mnt((0,ont.A)({},n,{color:i})),{align:s="inherit",className:o,component:a,gutterBottom:l=!1,noWrap:h=!1,paragraph:c=!1,variant:u="body1",variantMapping:p=Jit}=r,d=(0,ant.A)(r,Kit),f=(0,ont.A)({},r,{align:s,color:i,className:o,component:a,gutterBottom:l,noWrap:h,paragraph:c,variant:u,variantMapping:p}),m=a||(c?"p":p[u]||Jit[u])||"span",g=(t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:s,classes:o}=t,a={root:["root",s,"inherit"!==t.align&&"align".concat((0,Iit.A)(e)),n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return(0,Ant.A)(a,Zit,o)})(f);return(0,ps.jsx)(Qit,(0,ont.A)({as:m,ref:e,ownerState:f,className:(0,lnt.A)(g.root,o)},d))})),ert=trt,nrt=t=>{let e;return e=t<1?5.11916*t**2:4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function irt(t){return(0,git.Ay)("MuiPaper",t)}(0,Ent.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rrt=["className","component","elevation","square","variant"],srt=(0,Rnt.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((t=>{let{theme:e,ownerState:n}=t;var i;return(0,ont.A)({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.divider)},"elevation"===n.variant&&(0,ont.A)({boxShadow:(e.vars||e).shadows[n.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Cnt.X4)("#fff",nrt(n.elevation)),", ").concat((0,Cnt.X4)("#fff",nrt(n.elevation)),")")},e.vars&&{backgroundImage:null==(i=e.vars.overlays)?void 0:i[n.elevation]}))})),ort=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiPaper"}),{className:i,component:r="div",elevation:s=1,square:o=!1,variant:a="elevation"}=n,l=(0,ant.A)(n,rrt),h=(0,ont.A)({},n,{component:r,elevation:s,square:o,variant:a}),c=(t=>{const{square:e,elevation:n,variant:i,classes:r}=t,s={root:["root",i,!e&&"rounded","elevation"===i&&"elevation".concat(n)]};return(0,Ant.A)(s,irt,r)})(h);return(0,ps.jsx)(srt,(0,ont.A)({as:r,ownerState:h,className:(0,lnt.A)(c.root,i),ref:e},l))})),art=ort;function lrt(t){return(0,git.Ay)("MuiAppBar",t)}(0,Ent.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const hrt=["className","color","enableColorOnDark","position"],crt=(t,e)=>t?"".concat(null==t?void 0:t.replace(")",""),", ").concat(e,")"):e,urt=(0,Rnt.Ay)(art,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["position".concat((0,Iit.A)(n.position))],e["color".concat((0,Iit.A)(n.color))]]}})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return(0,ont.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!e.vars&&(0,ont.A)({},"default"===n.color&&{backgroundColor:i,color:e.palette.getContrastText(i)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:e.palette[n.color].main,color:e.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===e.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,ont.A)({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"})),e.vars&&(0,ont.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette.AppBar.defaultBg:crt(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?e.vars.palette.text.primary:crt(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette[n.color].main:crt(e.vars.palette.AppBar.darkBg,e.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?e.vars.palette[n.color].contrastText:crt(e.vars.palette.AppBar.darkColor,e.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),prt=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiAppBar"}),{className:i,color:r="primary",enableColorOnDark:s=!1,position:o="fixed"}=n,a=(0,ant.A)(n,hrt),l=(0,ont.A)({},n,{color:r,position:o,enableColorOnDark:s}),h=(t=>{const{color:e,position:n,classes:i}=t,r={root:["root","color".concat((0,Iit.A)(e)),"position".concat((0,Iit.A)(n))]};return(0,Ant.A)(r,lrt,i)})(l);return(0,ps.jsx)(urt,(0,ont.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,lnt.A)(h.root,i,"fixed"===o&&"mui-fixed"),ref:e},a))})),drt=prt;var frt=n(7042);function mrt(t){return"string"===typeof t}function grt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};const n={};return Object.keys(t).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n))).forEach((e=>{n[e]=t[e]})),n}function yrt(t){if(void 0===t)return{};const e={};return Object.keys(t).filter((e=>!(e.match(/^on[A-Z]/)&&"function"===typeof t[e]))).forEach((n=>{e[n]=t[n]})),e}const _rt=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function vrt(t){var e;const{elementType:n,externalSlotProps:i,ownerState:r,skipResolvingSlotProps:s=!1}=t,o=(0,ant.A)(t,_rt),a=s?{}:function(t,e,n){return"function"===typeof t?t(e,n):t}(i,r),{props:l,internalRef:h}=function(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const t=(0,lnt.A)(null==n?void 0:n.className,s,null==r?void 0:r.className,null==i?void 0:i.className),e=(0,ont.A)({},null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),o=(0,ont.A)({},n,r,i);return t.length>0&&(o.className=t),Object.keys(e).length>0&&(o.style=e),{props:o,internalRef:void 0}}const o=grt((0,ont.A)({},r,i)),a=yrt(i),l=yrt(r),h=e(o),c=(0,lnt.A)(null==h?void 0:h.className,null==n?void 0:n.className,s,null==r?void 0:r.className,null==i?void 0:i.className),u=(0,ont.A)({},null==h?void 0:h.style,null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),p=(0,ont.A)({},h,n,l,a);return c.length>0&&(p.className=c),Object.keys(u).length>0&&(p.style=u),{props:p,internalRef:h.ref}}((0,ont.A)({},o,{externalSlotProps:a})),c=(0,frt.A)(h,null==a?void 0:a.ref,null==(e=t.additionalProps)?void 0:e.ref),u=function(t,e,n){return void 0===t||mrt(t)?e:(0,ont.A)({},e,{ownerState:(0,ont.A)({},e.ownerState,n)})}(n,(0,ont.A)({},l,{ref:c}),r);return u}var Trt=n(2144),Ert=n(4626),xrt=n(4708),Irt=n(6288);function brt(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function wrt(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function Srt(t){return parseInt((0,Irt.A)(t).getComputedStyle(t).paddingRight,10)||0}function Art(t,e,n,i,r){const s=[e,n,...i];[].forEach.call(t.children,(t=>{const e=-1===s.indexOf(t),n=!function(t){const e=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName),n="INPUT"===t.tagName&&"hidden"===t.getAttribute("type");return e||n}(t);e&&n&&wrt(t,r)}))}function Crt(t,e){let n=-1;return t.some(((t,i)=>!!e(t)&&(n=i,!0))),n}function Rrt(t,e){const n=[],i=t.container;if(!e.disableScrollLock){if(function(t){const e=(0,Trt.A)(t);return e.body===t?(0,Irt.A)(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(i)){const t=brt((0,Trt.A)(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight="".concat(Srt(i)+t,"px");const e=(0,Trt.A)(i).querySelectorAll(".mui-fixed");[].forEach.call(e,(e=>{n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Srt(e)+t,"px")}))}let t;if(i.parentNode instanceof DocumentFragment)t=(0,Trt.A)(i).body;else{const e=i.parentElement,n=(0,Irt.A)(i);t="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===n.getComputedStyle(e).overflowY?e:i}n.push({value:t.style.overflow,property:"overflow",el:t},{value:t.style.overflowX,property:"overflow-x",el:t},{value:t.style.overflowY,property:"overflow-y",el:t}),t.style.overflow="hidden"}return()=>{n.forEach((t=>{let{value:e,el:n,property:i}=t;e?n.style.setProperty(i,e):n.style.removeProperty(i)}))}}const Drt=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,e){let n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&wrt(t.modalRef,!1);const i=function(t){const e=[];return[].forEach.call(t.children,(t=>{"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);Art(e,t.mount,t.modalRef,i,!0);const r=Crt(this.containers,(t=>t.container===e));return-1!==r?(this.containers[r].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:i}),n)}mount(t,e){const n=Crt(this.containers,(e=>-1!==e.modals.indexOf(t))),i=this.containers[n];i.restore||(i.restore=Rrt(i,e))}remove(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(t);if(-1===n)return n;const i=Crt(this.containers,(e=>-1!==e.modals.indexOf(t))),r=this.containers[i];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(n,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&wrt(t.modalRef,e),Art(r.container,t.mount,t.modalRef,r.hiddenSiblings,!1),this.containers.splice(i,1);else{const t=r.modals[r.modals.length-1];t.modalRef&&wrt(t.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}};function Ort(t){const{container:n,disableEscapeKeyDown:i=!1,disableScrollLock:r=!1,manager:s=Drt,closeAfterTransition:o=!1,onTransitionEnter:a,onTransitionExited:l,children:h,onClose:c,open:u,rootRef:p}=t,d=e.useRef({}),f=e.useRef(null),m=e.useRef(null),g=(0,frt.A)(m,p),[y,_]=e.useState(!u),v=function(t){return!!t&&t.props.hasOwnProperty("in")}(h);let T=!0;"false"!==t["aria-hidden"]&&!1!==t["aria-hidden"]||(T=!1);const E=()=>(d.current.modalRef=m.current,d.current.mount=f.current,d.current),x=()=>{s.mount(E(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},I=(0,Ert.A)((()=>{const t=function(t){return"function"===typeof t?t():t}(n)||(0,Trt.A)(f.current).body;s.add(E(),t),m.current&&x()})),b=e.useCallback((()=>s.isTopModal(E())),[s]),w=(0,Ert.A)((t=>{f.current=t,t&&(u&&b()?x():m.current&&wrt(m.current,T))})),S=e.useCallback((()=>{s.remove(E(),T)}),[T,s]);e.useEffect((()=>()=>{S()}),[S]),e.useEffect((()=>{u?I():v&&o||S()}),[u,S,v,o,I]);const A=t=>e=>{var n;null==(n=t.onKeyDown)||n.call(t,e),"Escape"===e.key&&229!==e.which&&b()&&(i||(e.stopPropagation(),c&&c(e,"escapeKeyDown")))},C=t=>e=>{var n;null==(n=t.onClick)||n.call(t,e),e.target===e.currentTarget&&c&&c(e,"backdropClick")};return{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=grt(t);delete n.onTransitionEnter,delete n.onTransitionExited;const i=(0,ont.A)({},n,e);return(0,ont.A)({role:"presentation"},i,{onKeyDown:A(i),ref:g})},getBackdropProps:function(){const t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ont.A)({"aria-hidden":!0},t,{onClick:C(t),open:u})},getTransitionProps:()=>({onEnter:(0,xrt.A)((()=>{_(!1),a&&a()}),null==h?void 0:h.props.onEnter),onExited:(0,xrt.A)((()=>{_(!0),l&&l(),o&&S()}),null==h?void 0:h.props.onExited)}),rootRef:g,portalRef:w,isTopModal:b,exited:y,hasTransition:v}}const Nrt=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Mrt(t){const e=[],n=[];return Array.from(t.querySelectorAll(Nrt)).forEach(((t,i)=>{const r=function(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==r&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;const e=e=>t.ownerDocument.querySelector('input[type="radio"]'.concat(e));let n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===r?e.push(t):n.push({documentOrder:i,tabIndex:r,node:t}))})),n.sort(((t,e)=>t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex)).map((t=>t.node)).concat(e)}function Prt(){return!0}function Frt(t){const{children:n,disableAutoFocus:i=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:o=Mrt,isEnabled:a=Prt,open:l}=t,h=e.useRef(!1),c=e.useRef(null),u=e.useRef(null),p=e.useRef(null),d=e.useRef(null),f=e.useRef(!1),m=e.useRef(null),g=(0,frt.A)(n.ref,m),y=e.useRef(null);e.useEffect((()=>{l&&m.current&&(f.current=!i)}),[i,l]),e.useEffect((()=>{if(!l||!m.current)return;const t=(0,Trt.A)(m.current);return m.current.contains(t.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{s||(p.current&&p.current.focus&&(h.current=!0,p.current.focus()),p.current=null)}}),[l]),e.useEffect((()=>{if(!l||!m.current)return;const t=(0,Trt.A)(m.current),e=e=>{y.current=e,!r&&a()&&"Tab"===e.key&&t.activeElement===m.current&&e.shiftKey&&(h.current=!0,u.current&&u.current.focus())},n=()=>{const e=m.current;if(null===e)return;if(!t.hasFocus()||!a()||h.current)return void(h.current=!1);if(e.contains(t.activeElement))return;if(r&&t.activeElement!==c.current&&t.activeElement!==u.current)return;if(t.activeElement!==d.current)d.current=null;else if(null!==d.current)return;if(!f.current)return;let n=[];if(t.activeElement!==c.current&&t.activeElement!==u.current||(n=o(m.current)),n.length>0){var i,s;const t=Boolean((null==(i=y.current)?void 0:i.shiftKey)&&"Tab"===(null==(s=y.current)?void 0:s.key)),e=n[0],r=n[n.length-1];"string"!==typeof e&&"string"!==typeof r&&(t?r.focus():e.focus())}else e.focus()};t.addEventListener("focusin",n),t.addEventListener("keydown",e,!0);const i=setInterval((()=>{t.activeElement&&"BODY"===t.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),t.removeEventListener("focusin",n),t.removeEventListener("keydown",e,!0)}}),[i,r,s,a,l,o]);const _=t=>{null===p.current&&(p.current=t.relatedTarget),f.current=!0};return(0,ps.jsxs)(e.Fragment,{children:[(0,ps.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:c,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:g,onFocus:t=>{null===p.current&&(p.current=t.relatedTarget),f.current=!0,d.current=t.target;const e=n.props.onFocus;e&&e(t)}}),(0,ps.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:u,"data-testid":"sentinelEnd"})]})}var Lrt=n(3844),krt=n(9184);const Urt=e.forwardRef((function(t,n){const{children:i,container:r,disablePortal:o=!1}=t,[a,l]=e.useState(null),h=(0,frt.A)(e.isValidElement(i)?i.ref:null,n);if((0,Lrt.A)((()=>{o||l(function(t){return"function"===typeof t?t():t}(r)||document.body)}),[r,o]),(0,Lrt.A)((()=>{if(a&&!o)return(0,krt.A)(n,a),()=>{(0,krt.A)(n,null)}}),[n,a,o]),o){if(e.isValidElement(i)){const t={ref:h};return e.cloneElement(i,t)}return(0,ps.jsx)(e.Fragment,{children:i})}return(0,ps.jsx)(e.Fragment,{children:a?s.createPortal(i,a):a})}));const Brt=!1;var zrt="unmounted",Grt="exited",Hrt="entering",Vrt="entered",jrt="exiting",Wrt=function(t){function n(e,n){var i;i=t.call(this,e,n)||this;var r,s=n&&!n.isMounting?e.enter:e.appear;return i.appearStatus=null,e.in?s?(r=Grt,i.appearStatus=Hrt):r=Vrt:r=e.unmountOnExit||e.mountOnEnter?zrt:Grt,i.state={status:r},i.nextCallback=null,i}Lnt(n,t),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===zrt?{status:Grt}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Hrt&&n!==Vrt&&(e=Hrt):n!==Hrt&&n!==Vrt||(e=jrt)}this.updateStatus(!1,e)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var t,e,n,i=this.props.timeout;return t=e=n=i,null!=i&&"number"!==typeof i&&(t=i.exit,e=i.enter,n=void 0!==i.appear?i.appear:e),{exit:t,enter:e,appear:n}},i.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Hrt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Grt&&this.setState({status:zrt})},i.performEnter=function(t){var e=this,n=this.props.enter,i=this.context?this.context.isMounting:t,r=this.props.nodeRef?[i]:[s.findDOMNode(this),i],o=r[0],a=r[1],l=this.getTimeouts(),h=i?l.appear:l.enter;!t&&!n||Brt?this.safeSetState({status:Vrt},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:Hrt},(function(){e.props.onEntering(o,a),e.onTransitionEnd(h,(function(){e.safeSetState({status:Vrt},(function(){e.props.onEntered(o,a)}))}))})))},i.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:s.findDOMNode(this);e&&!Brt?(this.props.onExit(i),this.safeSetState({status:jrt},(function(){t.props.onExiting(i),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Grt},(function(){t.props.onExited(i)}))}))}))):this.safeSetState({status:Grt},(function(){t.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},i.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,e.nextCallback=null,t(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),i=null==t&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=r[0],a=r[1];this.props.addEndListener(o,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},i.render=function(){var t=this.state.status;if(t===zrt)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,ant.A)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(knt.Provider,{value:null},"function"===typeof i?i(t,r):e.cloneElement(e.Children.only(i),r))},n}(e.Component);function Yrt(){}Wrt.contextType=knt,Wrt.propTypes={},Wrt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Yrt,onEntering:Yrt,onEntered:Yrt,onExit:Yrt,onExiting:Yrt,onExited:Yrt},Wrt.UNMOUNTED=zrt,Wrt.EXITED=Grt,Wrt.ENTERING=Hrt,Wrt.ENTERED=Vrt,Wrt.EXITING=jrt;const qrt=Wrt;var Xrt=n(5170);function Zrt(){const t=(0,gnt.A)(Xrt.A);return t[Tnt.A]||t}const Krt=t=>t.scrollTop;function Qrt(t,e){var n,i;const{timeout:r,easing:s,style:o={}}=t;return{duration:null!=(n=o.transitionDuration)?n:"number"===typeof r?r:r[e.mode]||0,easing:null!=(i=o.transitionTimingFunction)?i:"object"===typeof s?s[e.mode]:s,delay:o.transitionDelay}}const Jrt=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],$rt={entering:{opacity:1},entered:{opacity:1}},tst=e.forwardRef((function(t,n){const i=Zrt(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:h,onEnter:c,onEntered:u,onEntering:p,onExit:d,onExited:f,onExiting:m,style:g,timeout:y=r,TransitionComponent:_=qrt}=t,v=(0,ant.A)(t,Jrt),T=e.useRef(null),E=(0,Ont.A)(T,a.ref,n),x=t=>e=>{if(t){const n=T.current;void 0===e?t(n):t(n,e)}},I=x(p),b=x(((t,e)=>{Krt(t);const n=Qrt({style:g,timeout:y,easing:l},{mode:"enter"});t.style.webkitTransition=i.transitions.create("opacity",n),t.style.transition=i.transitions.create("opacity",n),c&&c(t,e)})),w=x(u),S=x(m),A=x((t=>{const e=Qrt({style:g,timeout:y,easing:l},{mode:"exit"});t.style.webkitTransition=i.transitions.create("opacity",e),t.style.transition=i.transitions.create("opacity",e),d&&d(t)})),C=x(f);return(0,ps.jsx)(_,(0,ont.A)({appear:o,in:h,nodeRef:T,onEnter:b,onEntered:w,onEntering:I,onExit:A,onExited:C,onExiting:S,addEndListener:t=>{s&&s(T.current,t)},timeout:y},v,{children:(t,n)=>e.cloneElement(a,(0,ont.A)({style:(0,ont.A)({opacity:0,visibility:"exited"!==t||h?void 0:"hidden"},$rt[t],g,a.props.style),ref:E},n))}))})),est=tst;function nst(t){return(0,git.Ay)("MuiBackdrop",t)}(0,Ent.A)("MuiBackdrop",["root","invisible"]);const ist=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],rst=(0,Rnt.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})((t=>{let{ownerState:e}=t;return(0,ont.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),sst=e.forwardRef((function(t,e){var n,i,r;const s=(0,Dnt.A)({props:t,name:"MuiBackdrop"}),{children:o,className:a,component:l="div",components:h={},componentsProps:c={},invisible:u=!1,open:p,slotProps:d={},slots:f={},TransitionComponent:m=est,transitionDuration:g}=s,y=(0,ant.A)(s,ist),_=(0,ont.A)({},s,{component:l,invisible:u}),v=(t=>{const{classes:e,invisible:n}=t,i={root:["root",n&&"invisible"]};return(0,Ant.A)(i,nst,e)})(_),T=null!=(n=d.root)?n:c.root;return(0,ps.jsx)(m,(0,ont.A)({in:p,timeout:g},y,{children:(0,ps.jsx)(rst,(0,ont.A)({"aria-hidden":!0},T,{as:null!=(i=null!=(r=f.root)?r:h.Root)?i:l,className:(0,lnt.A)(v.root,a,null==T?void 0:T.className),ownerState:(0,ont.A)({},_,null==T?void 0:T.ownerState),classes:v,ref:e,children:o}))}))})),ost=sst;function ast(t){return(0,git.Ay)("MuiModal",t)}(0,Ent.A)("MuiModal",["root","hidden","backdrop"]);const lst=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],hst=(0,Rnt.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),cst=(0,Rnt.Ay)(ost,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),ust=e.forwardRef((function(t,n){var i,r,s,o,a,l;const h=(0,Dnt.A)({name:"MuiModal",props:t}),{BackdropComponent:c=cst,BackdropProps:u,className:p,closeAfterTransition:d=!1,children:f,container:m,component:g,components:y={},componentsProps:_={},disableAutoFocus:v=!1,disableEnforceFocus:T=!1,disableEscapeKeyDown:E=!1,disablePortal:x=!1,disableRestoreFocus:I=!1,disableScrollLock:b=!1,hideBackdrop:w=!1,keepMounted:S=!1,onBackdropClick:A,open:C,slotProps:R,slots:D}=h,O=(0,ant.A)(h,lst),N=(0,ont.A)({},h,{closeAfterTransition:d,disableAutoFocus:v,disableEnforceFocus:T,disableEscapeKeyDown:E,disablePortal:x,disableRestoreFocus:I,disableScrollLock:b,hideBackdrop:w,keepMounted:S}),{getRootProps:M,getBackdropProps:P,getTransitionProps:F,portalRef:L,isTopModal:k,exited:U,hasTransition:B}=Ort((0,ont.A)({},N,{rootRef:n})),z=(0,ont.A)({},N,{exited:U}),G=(t=>{const{open:e,exited:n,classes:i}=t,r={root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]};return(0,Ant.A)(r,ast,i)})(z),H={};if(void 0===f.props.tabIndex&&(H.tabIndex="-1"),B){const{onEnter:t,onExited:e}=F();H.onEnter=t,H.onExited=e}const V=null!=(i=null!=(r=null==D?void 0:D.root)?r:y.Root)?i:hst,j=null!=(s=null!=(o=null==D?void 0:D.backdrop)?o:y.Backdrop)?s:c,W=null!=(a=null==R?void 0:R.root)?a:_.root,Y=null!=(l=null==R?void 0:R.backdrop)?l:_.backdrop,q=vrt({elementType:V,externalSlotProps:W,externalForwardedProps:O,getSlotProps:M,additionalProps:{ref:n,as:g},ownerState:z,className:(0,lnt.A)(p,null==W?void 0:W.className,null==G?void 0:G.root,!z.open&&z.exited&&(null==G?void 0:G.hidden))}),X=vrt({elementType:j,externalSlotProps:Y,additionalProps:u,getSlotProps:t=>P((0,ont.A)({},t,{onClick:e=>{A&&A(e),null!=t&&t.onClick&&t.onClick(e)}})),className:(0,lnt.A)(null==Y?void 0:Y.className,null==u?void 0:u.className,null==G?void 0:G.backdrop),ownerState:z});return S||C||B&&!U?(0,ps.jsx)(Urt,{ref:L,container:m,disablePortal:x,children:(0,ps.jsxs)(V,(0,ont.A)({},q,{children:[!w&&c?(0,ps.jsx)(j,(0,ont.A)({},X)):null,(0,ps.jsx)(Frt,{disableEnforceFocus:T,disableAutoFocus:v,disableRestoreFocus:I,isEnabled:k,open:C,children:e.cloneElement(f,H)})]}))}):null})),pst=ust;var dst=n(950),fst=n(6078);const mst=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function gst(t,e,n){var i;const r=function(t,e,n){const i=e.getBoundingClientRect(),r=n&&n.getBoundingClientRect(),s=(0,fst.A)(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const t=s.getComputedStyle(e);o=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("transform")}let a=0,l=0;if(o&&"none"!==o&&"string"===typeof o){const t=o.split("(")[1].split(")")[0].split(",");a=parseInt(t[4],10),l=parseInt(t[5],10)}return"left"===t?"translateX(".concat(r?r.right+a-i.left:s.innerWidth+a-i.left,"px)"):"right"===t?"translateX(-".concat(r?i.right-r.left-a:i.left+i.width-a,"px)"):"up"===t?"translateY(".concat(r?r.bottom+l-i.top:s.innerHeight+l-i.top,"px)"):"translateY(-".concat(r?i.top-r.top+i.height-l:i.top+i.height-l,"px)")}(t,e,"function"===typeof(i=n)?i():i);r&&(e.style.webkitTransform=r,e.style.transform=r)}const yst=e.forwardRef((function(t,n){const i=Zrt(),r={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:l,container:h,direction:c="down",easing:u=r,in:p,onEnter:d,onEntered:f,onEntering:m,onExit:g,onExited:y,onExiting:_,style:v,timeout:T=s,TransitionComponent:E=qrt}=t,x=(0,ant.A)(t,mst),I=e.useRef(null),b=(0,Ont.A)(l.ref,I,n),w=t=>e=>{t&&(void 0===e?t(I.current):t(I.current,e))},S=w(((t,e)=>{gst(c,t,h),Krt(t),d&&d(t,e)})),A=w(((t,e)=>{const n=Qrt({timeout:T,style:v,easing:u},{mode:"enter"});t.style.webkitTransition=i.transitions.create("-webkit-transform",(0,ont.A)({},n)),t.style.transition=i.transitions.create("transform",(0,ont.A)({},n)),t.style.webkitTransform="none",t.style.transform="none",m&&m(t,e)})),C=w(f),R=w(_),D=w((t=>{const e=Qrt({timeout:T,style:v,easing:u},{mode:"exit"});t.style.webkitTransition=i.transitions.create("-webkit-transform",e),t.style.transition=i.transitions.create("transform",e),gst(c,t,h),g&&g(t)})),O=w((t=>{t.style.webkitTransition="",t.style.transition="",y&&y(t)})),N=e.useCallback((()=>{I.current&&gst(c,I.current,h)}),[c,h]);return e.useEffect((()=>{if(p||"down"===c||"right"===c)return;const t=(0,dst.A)((()=>{I.current&&gst(c,I.current,h)})),e=(0,fst.A)(I.current);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[c,p,h]),e.useEffect((()=>{p||N()}),[p,N]),(0,ps.jsx)(E,(0,ont.A)({nodeRef:I,onEnter:S,onEntered:C,onEntering:A,onExit:D,onExited:O,onExiting:R,addEndListener:t=>{o&&o(I.current,t)},appear:a,in:p,timeout:T},x,{children:(t,n)=>e.cloneElement(l,(0,ont.A)({ref:b,style:(0,ont.A)({visibility:"exited"!==t||p?void 0:"hidden"},v,l.props.style)},n))}))})),_st=yst;function vst(t){return(0,git.Ay)("MuiDrawer",t)}(0,Ent.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Tst=["BackdropProps"],Est=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],xst=(t,e)=>{const{ownerState:n}=t;return[e.root,("permanent"===n.variant||"persistent"===n.variant)&&e.docked,e.modal]},Ist=(0,Rnt.Ay)(pst,{name:"MuiDrawer",slot:"Root",overridesResolver:xst})((t=>{let{theme:e}=t;return{zIndex:(e.vars||e).zIndex.drawer}})),bst=(0,Rnt.Ay)("div",{shouldForwardProp:Rnt.ep,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:xst})({flex:"0 0 auto"}),wst=(0,Rnt.Ay)(art,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e["paperAnchor".concat((0,Iit.A)(n.anchor))],"temporary"!==n.variant&&e["paperAnchorDocked".concat((0,Iit.A)(n.anchor))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((e.vars||e).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((e.vars||e).palette.divider)})})),Sst={left:"right",right:"left",top:"down",bottom:"up"};const Ast=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiDrawer"}),r=Zrt(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:a,children:l,className:h,elevation:c=16,hideBackdrop:u=!1,ModalProps:{BackdropProps:p}={},onClose:d,open:f=!1,PaperProps:m={},SlideProps:g,TransitionComponent:y=_st,transitionDuration:_=s,variant:v="temporary"}=i,T=(0,ant.A)(i.ModalProps,Tst),E=(0,ant.A)(i,Est),x=e.useRef(!1);e.useEffect((()=>{x.current=!0}),[]);const I=function(t,e){return"rtl"===t.direction&&function(t){return-1!==["left","right"].indexOf(t)}(e)?Sst[e]:e}(r,o),b=o,w=(0,ont.A)({},i,{anchor:b,elevation:c,open:f,variant:v},E),S=(t=>{const{classes:e,anchor:n,variant:i}=t,r={root:["root"],docked:[("permanent"===i||"persistent"===i)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,Iit.A)(n)),"temporary"!==i&&"paperAnchorDocked".concat((0,Iit.A)(n))]};return(0,Ant.A)(r,vst,e)})(w),A=(0,ps.jsx)(wst,(0,ont.A)({elevation:"temporary"===v?c:0,square:!0},m,{className:(0,lnt.A)(S.paper,m.className),ownerState:w,children:l}));if("permanent"===v)return(0,ps.jsx)(bst,(0,ont.A)({className:(0,lnt.A)(S.root,S.docked,h),ownerState:w,ref:n},E,{children:A}));const C=(0,ps.jsx)(y,(0,ont.A)({in:f,direction:Sst[I],timeout:_,appear:x.current},g,{children:A}));return"persistent"===v?(0,ps.jsx)(bst,(0,ont.A)({className:(0,lnt.A)(S.root,S.docked,h),ownerState:w,ref:n},E,{children:C})):(0,ps.jsx)(Ist,(0,ont.A)({BackdropProps:(0,ont.A)({},a,p,{transitionDuration:_}),className:(0,lnt.A)(S.root,S.modal,h),open:f,ownerState:w,onClose:d,hideBackdrop:u,ref:n},E,T,{children:C}))})),Cst=Ast;const Rst=(t,e)=>({width:e,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),overflowX:"hidden"}),Dst=t=>({transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(t.spacing(7)," + 1px)"),[t.breakpoints.up("sm")]:{width:"calc(".concat(t.spacing(8)," + 1px)")}});function Ost(){return(0,Rnt.Ay)("div")((t=>{let{theme:e}=t;return{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),...e.mixins.toolbar}}))}const Nst=t=>{const{open:e,onOpen:n,width:i}=t,r=(s=i,(0,Rnt.Ay)(drt,{shouldForwardProp:t=>"open"!==t})((t=>{let{theme:e,open:n}=t;return{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...n&&{marginLeft:s,width:"calc(100% - ".concat(s,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}})));var s;return(0,ps.jsx)(r,{position:"fixed",open:e,children:(0,ps.jsxs)(Git,{children:[(0,ps.jsx)(qit,{color:"inherit","aria-label":"open drawer",onClick:n,edge:"start",sx:{marginRight:5,...e&&{display:"none"}},children:(0,ps.jsx)(Xit.A,{})}),(0,ps.jsx)(ert,{variant:"h6",noWrap:!0,component:"div",children:"Building viewer"})]})})};function Mst(t){const{styles:e,defaultTheme:n={}}=t,i="function"===typeof e?t=>{return e(void 0===(i=t)||null===i||0===Object.keys(i).length?n:t);var i}:e;return(0,ps.jsx)(Xnt,{styles:i})}const Pst=function(t){let{styles:e,themeId:n,defaultTheme:i={}}=t;const r=(0,gnt.A)(i),s="function"===typeof e?e(n&&r[n]||r):e;return(0,ps.jsx)(Mst,{styles:s})};const Fst=function(t){return(0,ps.jsx)(Pst,(0,ont.A)({},t,{defaultTheme:Xrt.A,themeId:Tnt.A}))},Lst=(t,e)=>(0,ont.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),kst=t=>(0,ont.A)({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}});const Ust=function(t){const n=(0,Dnt.A)({props:t,name:"MuiCssBaseline"}),{children:i,enableColorScheme:r=!1}=n;return(0,ps.jsxs)(e.Fragment,{children:[(0,ps.jsx)(Fst,{styles:t=>function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const i={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach((e=>{let[n,r]=e;var s;i[t.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(s=r.palette)?void 0:s.mode}}));let r=(0,ont.A)({html:Lst(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:(0,ont.A)({margin:0},kst(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},i);const s=null==(n=t.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return s&&(r=[r,s]),r}(t,r)}),i]})};function Bst(t){return(0,git.Ay)("MuiDivider",t)}(0,Ent.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const zst=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Gst=(0,Rnt.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,"vertical"===n.orientation&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&"vertical"===n.orientation&&e.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignLeft]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:e.vars?"rgba(".concat(e.vars.palette.dividerChannel," / 0.08)"):(0,Cnt.X4)(e.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(t=>{let{ownerState:e}=t;return(0,ont.A)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{ownerState:e}=t;return(0,ont.A)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),Hst=(0,Rnt.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,"vertical"===n.orientation&&e.wrapperVertical]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({display:"inline-block",paddingLeft:"calc(".concat(e.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(e.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(e.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(e.spacing(1)," * 1.2)")})})),Vst=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiDivider"}),{absolute:i=!1,children:r,className:s,component:o=(r?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:h="horizontal",role:c=("hr"!==o?"separator":void 0),textAlign:u="center",variant:p="fullWidth"}=n,d=(0,ant.A)(n,zst),f=(0,ont.A)({},n,{absolute:i,component:o,flexItem:a,light:l,orientation:h,role:c,textAlign:u,variant:p}),m=(t=>{const{absolute:e,children:n,classes:i,flexItem:r,light:s,orientation:o,textAlign:a,variant:l}=t,h={root:["root",e&&"absolute",l,s&&"light","vertical"===o&&"vertical",r&&"flexItem",n&&"withChildren",n&&"vertical"===o&&"withChildrenVertical","right"===a&&"vertical"!==o&&"textAlignRight","left"===a&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,Ant.A)(h,Bst,i)})(f);return(0,ps.jsx)(Gst,(0,ont.A)({as:o,className:(0,lnt.A)(m.root,s),role:c,ref:e,ownerState:f},d,{children:r?(0,ps.jsx)(Hst,{className:m.wrapper,ownerState:f,children:r}):null}))}));Vst.muiSkipListHighlight=!0;const jst=Vst;var Wst=n(5896),Yst=n(1707);const qst=e.createContext({});function Xst(t){return(0,git.Ay)("MuiList",t)}(0,Ent.A)("MuiList",["root","padding","dense","subheader"]);const Zst=["children","className","component","dense","disablePadding","subheader"],Kst=(0,Rnt.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((t=>{let{ownerState:e}=t;return(0,ont.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),Qst=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiList"}),{children:r,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:h}=i,c=(0,ant.A)(i,Zst),u=e.useMemo((()=>({dense:a})),[a]),p=(0,ont.A)({},i,{component:o,dense:a,disablePadding:l}),d=(t=>{const{classes:e,disablePadding:n,dense:i,subheader:r}=t,s={root:["root",!n&&"padding",i&&"dense",r&&"subheader"]};return(0,Ant.A)(s,Xst,e)})(p);return(0,ps.jsx)(qst.Provider,{value:u,children:(0,ps.jsxs)(Kst,(0,ont.A)({as:o,className:(0,lnt.A)(d.root,s),ref:n,ownerState:p},c,{children:[h,r]}))})})),Jst=Qst;var $st=n(154),tot=n(5013);function eot(t){return(0,git.Ay)("MuiListItem",t)}const not=(0,Ent.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function iot(t){return(0,git.Ay)("MuiListItemButton",t)}const rot=(0,Ent.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function sot(t){return(0,git.Ay)("MuiListItemSecondaryAction",t)}(0,Ent.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const oot=["className"],aot=(0,Rnt.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})((t=>{let{ownerState:e}=t;return(0,ont.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})})),lot=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiListItemSecondaryAction"}),{className:r}=i,s=(0,ant.A)(i,oot),o=e.useContext(qst),a=(0,ont.A)({},i,{disableGutters:o.disableGutters}),l=(t=>{const{disableGutters:e,classes:n}=t,i={root:["root",e&&"disableGutters"]};return(0,Ant.A)(i,sot,n)})(a);return(0,ps.jsx)(aot,(0,ont.A)({className:(0,lnt.A)(l.root,r),ownerState:a,ref:n},s))}));lot.muiName="ListItemSecondaryAction";const hot=lot,cot=["className"],uot=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],pot=(0,Rnt.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,ont.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(rot.root)]:{paddingRight:48}},{["&.".concat(not.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(not.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(not.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(not.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(not.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),dot=(0,Rnt.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),fot=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiListItem"}),{alignItems:r="center",autoFocus:s=!1,button:o=!1,children:a,className:l,component:h,components:c={},componentsProps:u={},ContainerComponent:p="li",ContainerProps:{className:d}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:y=!1,divider:_=!1,focusVisibleClassName:v,secondaryAction:T,selected:E=!1,slotProps:x={},slots:I={}}=i,b=(0,ant.A)(i.ContainerProps,cot),w=(0,ant.A)(i,uot),S=e.useContext(qst),A=e.useMemo((()=>({dense:f||S.dense||!1,alignItems:r,disableGutters:g})),[r,S.dense,f,g]),C=e.useRef(null);(0,tot.A)((()=>{s&&C.current&&C.current.focus()}),[s]);const R=e.Children.toArray(a),D=R.length&&(0,$st.A)(R[R.length-1],["ListItemSecondaryAction"]),O=(0,ont.A)({},i,{alignItems:r,autoFocus:s,button:o,dense:A.dense,disabled:m,disableGutters:g,disablePadding:y,divider:_,hasSecondaryAction:D,selected:E}),N=(t=>{const{alignItems:e,button:n,classes:i,dense:r,disabled:s,disableGutters:o,disablePadding:a,divider:l,hasSecondaryAction:h,selected:c}=t,u={root:["root",r&&"dense",!o&&"gutters",!a&&"padding",l&&"divider",s&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",h&&"secondaryAction",c&&"selected"],container:["container"]};return(0,Ant.A)(u,eot,i)})(O),M=(0,Ont.A)(C,n),P=I.root||c.Root||pot,F=x.root||u.root||{},L=(0,ont.A)({className:(0,lnt.A)(N.root,F.className,l),disabled:m},w);let k=h||"li";return o&&(L.component=h||"div",L.focusVisibleClassName=(0,lnt.A)(not.focusVisible,v),k=xit),D?(k=L.component||h?k:"div","li"===p&&("li"===k?k="div":"li"===L.component&&(L.component="div")),(0,ps.jsx)(qst.Provider,{value:A,children:(0,ps.jsxs)(dot,(0,ont.A)({as:p,className:(0,lnt.A)(N.container,d),ref:M,ownerState:O},b,{children:[(0,ps.jsx)(P,(0,ont.A)({},F,!mrt(P)&&{as:k,ownerState:(0,ont.A)({},O,F.ownerState)},L,{children:R})),R.pop()]}))})):(0,ps.jsx)(qst.Provider,{value:A,children:(0,ps.jsxs)(P,(0,ont.A)({},F,{as:k,ref:M},!mrt(P)&&{ownerState:(0,ont.A)({},O,F.ownerState)},L,{children:[R,T&&(0,ps.jsx)(hot,{children:T})]}))})})),mot=fot,got=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],yot=(0,Rnt.Ay)(xit,{shouldForwardProp:t=>(0,Rnt.ep)(t)||"classes"===t,name:"MuiListItemButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(rot.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(rot.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(rot.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,Cnt.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},["&.".concat(rot.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(rot.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),_ot=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:s=!1,component:o="div",children:a,dense:l=!1,disableGutters:h=!1,divider:c=!1,focusVisibleClassName:u,selected:p=!1,className:d}=i,f=(0,ant.A)(i,got),m=e.useContext(qst),g=e.useMemo((()=>({dense:l||m.dense||!1,alignItems:r,disableGutters:h})),[r,m.dense,l,h]),y=e.useRef(null);(0,tot.A)((()=>{s&&y.current&&y.current.focus()}),[s]);const _=(0,ont.A)({},i,{alignItems:r,dense:g.dense,disableGutters:h,divider:c,selected:p}),v=(t=>{const{alignItems:e,classes:n,dense:i,disabled:r,disableGutters:s,divider:o,selected:a}=t,l={root:["root",i&&"dense",!s&&"gutters",o&&"divider",r&&"disabled","flex-start"===e&&"alignItemsFlexStart",a&&"selected"]},h=(0,Ant.A)(l,iot,n);return(0,ont.A)({},n,h)})(_),T=(0,Ont.A)(y,n);return(0,ps.jsx)(qst.Provider,{value:g,children:(0,ps.jsx)(yot,(0,ont.A)({ref:T,href:f.href||f.to,component:(f.href||f.to)&&"div"===o?"button":o,focusVisibleClassName:(0,lnt.A)(v.focusVisible,u),ownerState:_,className:(0,lnt.A)(v.root,d)},f,{classes:v,children:a}))})})),vot=_ot;function Tot(t){return(0,git.Ay)("MuiListItemIcon",t)}(0,Ent.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const Eot=["className"],xot=(0,Rnt.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"flex-start"===n.alignItems&&e.alignItemsFlexStart]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),Iot=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiListItemIcon"}),{className:r}=i,s=(0,ant.A)(i,Eot),o=e.useContext(qst),a=(0,ont.A)({},i,{alignItems:o.alignItems}),l=(t=>{const{alignItems:e,classes:n}=t,i={root:["root","flex-start"===e&&"alignItemsFlexStart"]};return(0,Ant.A)(i,Tot,n)})(a);return(0,ps.jsx)(xot,(0,ont.A)({className:(0,lnt.A)(l.root,r),ownerState:a,ref:n},s))})),bot=Iot;function wot(t){return(0,git.Ay)("MuiListItemText",t)}const Sot=(0,Ent.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Aot=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Cot=(0,Rnt.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(Sot.primary)]:e.primary},{["& .".concat(Sot.secondary)]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})((t=>{let{ownerState:e}=t;return(0,ont.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})})),Rot=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiListItemText"}),{children:r,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:h,secondary:c,secondaryTypographyProps:u}=i,p=(0,ant.A)(i,Aot),{dense:d}=e.useContext(qst);let f=null!=l?l:r,m=c;const g=(0,ont.A)({},i,{disableTypography:o,inset:a,primary:!!f,secondary:!!m,dense:d}),y=(t=>{const{classes:e,inset:n,primary:i,secondary:r,dense:s}=t,o={root:["root",n&&"inset",s&&"dense",i&&r&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,Ant.A)(o,wot,e)})(g);return null==f||f.type===ert||o||(f=(0,ps.jsx)(ert,(0,ont.A)({variant:d?"body2":"body1",className:y.primary,component:null!=h&&h.variant?void 0:"span",display:"block"},h,{children:f}))),null==m||m.type===ert||o||(m=(0,ps.jsx)(ert,(0,ont.A)({variant:"body2",className:y.secondary,color:"text.secondary",display:"block"},u,{children:m}))),(0,ps.jsxs)(Cot,(0,ont.A)({className:(0,lnt.A)(y.root,s),ownerState:g,ref:n},p,{children:[f,m]}))})),Dot=Rot;var Oot=n(5573),Not=n(1702),Mot=n(6132),Pot=n(7981),Fot=n(2462),Lot=n(8348),kot=n(3471),Uot=n(2125);const Bot=[{name:"Info",active:!1,icon:(0,ps.jsx)(Pot.A,{}),action:t=>{let{onToggleMenu:e}=t;e(!0,"BuildingInfo")}},{name:"Models",active:!1,icon:(0,ps.jsx)(Mot.A,{}),action:t=>{let{onToggleMenu:e}=t;e(!0,"ModelList")}},{name:"Floorplans",active:!1,icon:(0,ps.jsx)(Fot.A,{}),action:t=>{let{onToggleMenu:e}=t;e(!0,"Floorplans")}},{name:"Spatialtree",active:!1,icon:(0,ps.jsx)(Uot.A,{}),action:t=>{let{onToggleMenu:e}=t;e(!0,"Spatialtree")}},{name:"Properties",active:!1,icon:(0,ps.jsx)(Lot.A,{}),action:t=>{let{onToggleMenu:e}=t;e(!0,"Properties")}},{name:"Map",active:!1,icon:(0,ps.jsx)(Oot.A,{}),action:t=>{let{dispatch:e}=t;e({type:"CLOSE_BUILDING"})}},{name:"Delete building",active:!1,icon:(0,ps.jsx)(kot.A,{}),action:t=>{let{dispatch:e,state:n}=t;e({type:"DELETE_BUILDING",payload:n.building})}},{name:"Log out",active:!1,icon:(0,ps.jsx)(Not.A,{}),action:t=>{let{dispatch:e}=t;e({type:"LOGOUT"})}}],zot=t=>{const{open:e,onToggleMenu:n}=t,[i,r]=snt();return(0,ps.jsx)(Jst,{children:Bot.map((t=>(0,ps.jsx)(mot,{onClick:()=>t.action({onToggleMenu:n,state:i,dispatch:r}),disablePadding:!0,sx:{display:"block"},children:(0,ps.jsxs)(vot,{sx:{minHeight:48,justifyContent:e?"initial":"center",px:2.5},children:[(0,ps.jsx)(bot,{sx:{minWidth:0,mr:e?3:"auto",justifyContent:"center"},children:t.icon}),(0,ps.jsx)(Dot,{primary:t.name,sx:{opacity:e?1:0}})]})},t.name)))})},Got=t=>{const e=Zrt(),{open:n,width:i,onClose:r,onToggleMenu:s}=t,o=(a=i,(0,Rnt.Ay)(Cst,{shouldForwardProp:t=>"open"!==t})((t=>{let{theme:e,open:n}=t;return{width:a,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...n&&{...Rst(e,a),"& .MuiDrawer-paper":Rst(e,a)},...!n&&{...Dst(e),"& .MuiDrawer-paper":Dst(e)}}})));var a;const l=Ost();return(0,ps.jsxs)(o,{variant:"permanent",open:n,children:[(0,ps.jsx)(l,{children:(0,ps.jsx)(qit,{onClick:r,children:"rtl"===e.direction?(0,ps.jsx)(Yst.A,{}):(0,ps.jsx)(Wst.A,{})})}),(0,ps.jsx)(zot,{onToggleMenu:s,open:n}),(0,ps.jsx)(jst,{})]})};function Hot(t){return(0,git.Ay)("MuiCard",t)}(0,Ent.A)("MuiCard",["root"]);const Vot=["className","raised"],jot=(0,Rnt.Ay)(art,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({overflow:"hidden"}))),Wot=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiCard"}),{className:i,raised:r=!1}=n,s=(0,ant.A)(n,Vot),o=(0,ont.A)({},n,{raised:r}),a=(t=>{const{classes:e}=t;return(0,Ant.A)({root:["root"]},Hot,e)})(o);return(0,ps.jsx)(jot,(0,ont.A)({className:(0,lnt.A)(a.root,i),elevation:r?8:void 0,ref:e,ownerState:o},s))})),Yot=Wot;function qot(t){return(0,git.Ay)("MuiCardContent",t)}(0,Ent.A)("MuiCardContent",["root"]);const Xot=["className","component"],Zot=(0,Rnt.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),Kot=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiCardContent"}),{className:i,component:r="div"}=n,s=(0,ant.A)(n,Xot),o=(0,ont.A)({},n,{component:r}),a=(t=>{const{classes:e}=t;return(0,Ant.A)({root:["root"]},qot,e)})(o);return(0,ps.jsx)(Zot,(0,ont.A)({as:r,className:(0,lnt.A)(a.root,i),ownerState:o,ref:e},s))})),Qot=Kot;var Jot=n(4802),$ot=n(992),tat=n(6632),eat=n(6440);const nat=["onChange","maxRows","minRows","style","value"];function iat(t){return parseInt(t,10)||0}const rat={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function sat(t){return void 0===t||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflow}const oat=e.forwardRef((function(t,n){const{onChange:i,maxRows:r,minRows:o=1,style:a,value:l}=t,h=(0,ant.A)(t,nat),{current:c}=e.useRef(null!=l),u=e.useRef(null),p=(0,frt.A)(n,u),d=e.useRef(null),f=e.useRef(0),[m,g]=e.useState({outerHeightStyle:0}),y=e.useCallback((()=>{const e=u.current,n=(0,Irt.A)(e).getComputedStyle(e);if("0px"===n.width)return{outerHeightStyle:0};const i=d.current;i.style.width=n.width,i.value=e.value||t.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");const s=n.boxSizing,a=iat(n.paddingBottom)+iat(n.paddingTop),l=iat(n.borderBottomWidth)+iat(n.borderTopWidth),h=i.scrollHeight;i.value="x";const c=i.scrollHeight;let p=h;o&&(p=Math.max(Number(o)*c,p)),r&&(p=Math.min(Number(r)*c,p)),p=Math.max(p,c);return{outerHeightStyle:p+("border-box"===s?a+l:0),overflow:Math.abs(p-h)<=1}}),[r,o,t.placeholder]),_=(t,e)=>{const{outerHeightStyle:n,overflow:i}=e;return f.current<20&&(n>0&&Math.abs((t.outerHeightStyle||0)-n)>1||t.overflow!==i)?(f.current+=1,{overflow:i,outerHeightStyle:n}):t},v=e.useCallback((()=>{const t=y();sat(t)||g((e=>_(e,t)))}),[y]);(0,Lrt.A)((()=>{const t=()=>{f.current=0,(()=>{const t=y();sat(t)||s.flushSync((()=>{g((e=>_(e,t)))}))})()};let e;const n=(0,eat.A)(t),i=u.current,r=(0,Irt.A)(i);let o;return r.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(t),o.observe(i)),()=>{n.clear(),cancelAnimationFrame(e),r.removeEventListener("resize",n),o&&o.disconnect()}}),[y]),(0,Lrt.A)((()=>{v()})),e.useEffect((()=>{f.current=0}),[l]);return(0,ps.jsxs)(e.Fragment,{children:[(0,ps.jsx)("textarea",(0,ont.A)({value:l,onChange:t=>{f.current=0,c||v(),i&&i(t)},ref:p,rows:o,style:(0,ont.A)({height:m.outerHeightStyle,overflow:m.overflow?"hidden":void 0},a)},h)),(0,ps.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,ont.A)({},rat,a,{paddingTop:0,paddingBottom:0})})]})}));function aat(t){let{props:e,states:n,muiFormControl:i}=t;return n.reduce(((t,n)=>(t[n]=e[n],i&&"undefined"===typeof e[n]&&(t[n]=i[n]),t)),{})}const lat=e.createContext(void 0);function hat(){return e.useContext(lat)}function cat(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function uat(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(cat(t.value)&&""!==t.value||e&&cat(t.defaultValue)&&""!==t.defaultValue)}function pat(t){return(0,git.Ay)("MuiInputBase",t)}const dat=(0,Ent.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),fat=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],mat=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat((0,Iit.A)(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},gat=(t,e)=>{const{ownerState:n}=t;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},yat=(0,Rnt.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:mat})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(dat.disabled)]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},n.multiline&&(0,ont.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),_at=(0,Rnt.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:gat})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode,r=(0,ont.A)({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),s={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return(0,ont.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(dat.formControl," &")]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},["&.".concat(dat.disabled)]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),vat=(0,ps.jsx)(Fst,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Tat=e.forwardRef((function(t,n){var i;const r=(0,Dnt.A)({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:h={},componentsProps:c={},defaultValue:u,disabled:p,disableInjectingGlobalStyles:d,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:y="input",inputProps:_={},inputRef:v,maxRows:T,minRows:E,multiline:x=!1,name:I,onBlur:b,onChange:w,onClick:S,onFocus:A,onKeyDown:C,onKeyUp:R,placeholder:D,readOnly:O,renderSuffix:N,rows:M,slotProps:P={},slots:F={},startAdornment:L,type:k="text",value:U}=r,B=(0,ant.A)(r,fat),z=null!=_.value?_.value:U,{current:G}=e.useRef(null!=z),H=e.useRef(),V=e.useCallback((t=>{0}),[]),j=(0,Ont.A)(H,v,_.ref,V),[W,Y]=e.useState(!1),q=hat();const X=aat({props:r,muiFormControl:q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});X.focused=q?q.focused:W,e.useEffect((()=>{!q&&p&&W&&(Y(!1),b&&b())}),[q,p,W,b]);const Z=q&&q.onFilled,K=q&&q.onEmpty,Q=e.useCallback((t=>{uat(t)?Z&&Z():K&&K()}),[Z,K]);(0,tot.A)((()=>{G&&Q({value:z})}),[z,Q,G]);e.useEffect((()=>{Q(H.current)}),[]);let J=y,$=_;x&&"input"===J&&($=M?(0,ont.A)({type:void 0,minRows:M,maxRows:M},$):(0,ont.A)({type:void 0,maxRows:T,minRows:E},$),J=oat);e.useEffect((()=>{q&&q.setAdornedStart(Boolean(L))}),[q,L]);const tt=(0,ont.A)({},r,{color:X.color||"primary",disabled:X.disabled,endAdornment:f,error:X.error,focused:X.focused,formControl:q,fullWidth:m,hiddenLabel:X.hiddenLabel,multiline:x,size:X.size,startAdornment:L,type:k}),et=(t=>{const{classes:e,color:n,disabled:i,error:r,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:h,multiline:c,readOnly:u,size:p,startAdornment:d,type:f}=t,m={root:["root","color".concat((0,Iit.A)(n)),i&&"disabled",r&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",p&&"medium"!==p&&"size".concat((0,Iit.A)(p)),c&&"multiline",d&&"adornedStart",s&&"adornedEnd",h&&"hiddenLabel",u&&"readOnly"],input:["input",i&&"disabled","search"===f&&"inputTypeSearch",c&&"inputMultiline","small"===p&&"inputSizeSmall",h&&"inputHiddenLabel",d&&"inputAdornedStart",s&&"inputAdornedEnd",u&&"readOnly"]};return(0,Ant.A)(m,pat,e)})(tt),nt=F.root||h.Root||yat,it=P.root||c.root||{},rt=F.input||h.Input||_at;return $=(0,ont.A)({},$,null!=(i=P.input)?i:c.input),(0,ps.jsxs)(e.Fragment,{children:[!d&&vat,(0,ps.jsxs)(nt,(0,ont.A)({},it,!mrt(nt)&&{ownerState:(0,ont.A)({},tt,it.ownerState)},{ref:n,onClick:t=>{H.current&&t.currentTarget===t.target&&H.current.focus(),S&&S(t)}},B,{className:(0,lnt.A)(et.root,it.className,l,O&&"MuiInputBase-readOnly"),children:[L,(0,ps.jsx)(lat.Provider,{value:null,children:(0,ps.jsx)(rt,(0,ont.A)({ownerState:tt,"aria-invalid":X.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:u,disabled:X.disabled,id:g,onAnimationStart:t=>{Q("mui-auto-fill-cancel"===t.animationName?H.current:{value:"x"})},name:I,placeholder:D,readOnly:O,required:X.required,rows:M,value:z,onKeyDown:C,onKeyUp:R,type:k},$,!mrt(rt)&&{as:J,ownerState:(0,ont.A)({},tt,$.ownerState)},{ref:j,className:(0,lnt.A)(et.input,$.className,O&&"MuiInputBase-readOnly"),onBlur:t=>{b&&b(t),_.onBlur&&_.onBlur(t),q&&q.onBlur?q.onBlur(t):Y(!1)},onChange:function(t){if(!G){const e=t.target||H.current;if(null==e)throw new Error((0,tat.A)(1));Q({value:e.value})}for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];_.onChange&&_.onChange(t,...n),w&&w(t,...n)},onFocus:t=>{X.disabled?t.stopPropagation():(A&&A(t),_.onFocus&&_.onFocus(t),q&&q.onFocus?q.onFocus(t):Y(!0))}}))}),f,N?N((0,ont.A)({},X,{startAdornment:L})):null]}))]})})),Eat=Tat;function xat(t){return(0,git.Ay)("MuiInput",t)}const Iat=(0,ont.A)({},dat,(0,Ent.A)("MuiInput",["root","underline","input"])),bat=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],wat=(0,Rnt.Ay)(yat,{shouldForwardProp:t=>(0,Rnt.ep)(t)||"classes"===t,name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...mat(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;let i="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i="rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")")),(0,ont.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((e.vars||e).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Iat.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Iat.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Iat.disabled,", .").concat(Iat.error,"):before")]:{borderBottom:"2px solid ".concat((e.vars||e).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}},["&.".concat(Iat.disabled,":before")]:{borderBottomStyle:"dotted"}})})),Sat=(0,Rnt.Ay)(_at,{name:"MuiInput",slot:"Input",overridesResolver:gat})({}),Aat=e.forwardRef((function(t,e){var n,i,r,s;const o=(0,Dnt.A)({props:t,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:h,fullWidth:c=!1,inputComponent:u="input",multiline:p=!1,slotProps:d,slots:f={},type:m="text"}=o,g=(0,ant.A)(o,bat),y=(t=>{const{classes:e,disableUnderline:n}=t,i={root:["root",!n&&"underline"],input:["input"]},r=(0,Ant.A)(i,xat,e);return(0,ont.A)({},e,r)})(o),_={root:{ownerState:{disableUnderline:a}}},v=(null!=d?d:h)?(0,unt.A)(null!=d?d:h,_):_,T=null!=(n=null!=(i=f.root)?i:l.Root)?n:wat,E=null!=(r=null!=(s=f.input)?s:l.Input)?r:Sat;return(0,ps.jsx)(Eat,(0,ont.A)({slots:{root:T,input:E},slotProps:v,fullWidth:c,inputComponent:u,multiline:p,ref:e,type:m},g,{classes:y}))}));Aat.muiName="Input";const Cat=Aat;function Rat(t){return(0,git.Ay)("MuiFilledInput",t)}const Dat=(0,ont.A)({},dat,(0,Ent.A)("MuiFilledInput",["root","underline","input"])),Oat=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Nat=(0,Rnt.Ay)(yat,{shouldForwardProp:t=>(0,Rnt.ep)(t)||"classes"===t,name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...mat(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;var i;const r="light"===e.palette.mode,s=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,ont.A)({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},["&.".concat(Dat.focused)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},["&.".concat(Dat.disabled)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(i=(e.vars||e).palette[n.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Dat.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Dat.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")"):s),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Dat.disabled,", .").concat(Dat.error,"):before")]:{borderBottom:"1px solid ".concat((e.vars||e).palette.text.primary)},["&.".concat(Dat.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,ont.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),Mat=(0,Rnt.Ay)(_at,{name:"MuiFilledInput",slot:"Input",overridesResolver:gat})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),Pat=e.forwardRef((function(t,e){var n,i,r,s;const o=(0,Dnt.A)({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:h=!1,inputComponent:c="input",multiline:u=!1,slotProps:p,slots:d={},type:f="text"}=o,m=(0,ant.A)(o,Oat),g=(0,ont.A)({},o,{fullWidth:h,inputComponent:c,multiline:u,type:f}),y=(t=>{const{classes:e,disableUnderline:n}=t,i={root:["root",!n&&"underline"],input:["input"]},r=(0,Ant.A)(i,Rat,e);return(0,ont.A)({},e,r)})(o),_={root:{ownerState:g},input:{ownerState:g}},v=(null!=p?p:l)?(0,unt.A)(_,null!=p?p:l):_,T=null!=(n=null!=(i=d.root)?i:a.Root)?n:Nat,E=null!=(r=null!=(s=d.input)?s:a.Input)?r:Mat;return(0,ps.jsx)(Eat,(0,ont.A)({slots:{root:T,input:E},componentsProps:v,fullWidth:h,inputComponent:c,multiline:u,ref:e,type:f},m,{classes:y}))}));Pat.muiName="Input";const Fat=Pat;var Lat;const kat=["children","classes","className","label","notched"],Uat=(0,Rnt.Ay)("fieldset",{shouldForwardProp:Rnt.ep})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Bat=(0,Rnt.Ay)("legend",{shouldForwardProp:Rnt.ep})((t=>{let{ownerState:e,theme:n}=t;return(0,ont.A)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&(0,ont.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function zat(t){return(0,git.Ay)("MuiOutlinedInput",t)}const Gat=(0,ont.A)({},dat,(0,Ent.A)("MuiOutlinedInput",["root","notchedOutline","input"])),Hat=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Vat=(0,Rnt.Ay)(yat,{shouldForwardProp:t=>(0,Rnt.ep)(t)||"classes"===t,name:"MuiOutlinedInput",slot:"Root",overridesResolver:mat})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,ont.A)({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,["&:hover .".concat(Gat.notchedOutline)]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(Gat.notchedOutline)]:{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):i}},["&.".concat(Gat.focused," .").concat(Gat.notchedOutline)]:{borderColor:(e.vars||e).palette[n.color].main,borderWidth:2},["&.".concat(Gat.error," .").concat(Gat.notchedOutline)]:{borderColor:(e.vars||e).palette.error.main},["&.".concat(Gat.disabled," .").concat(Gat.notchedOutline)]:{borderColor:(e.vars||e).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,ont.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),jat=(0,Rnt.Ay)((function(t){const{className:e,label:n,notched:i}=t,r=(0,ant.A)(t,kat),s=null!=n&&""!==n,o=(0,ont.A)({},t,{notched:i,withLabel:s});return(0,ps.jsx)(Uat,(0,ont.A)({"aria-hidden":!0,className:e,ownerState:o},r,{children:(0,ps.jsx)(Bat,{ownerState:o,children:s?(0,ps.jsx)("span",{children:n}):Lat||(Lat=(0,ps.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})((t=>{let{theme:e}=t;const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),Wat=(0,Rnt.Ay)(_at,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:gat})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),Yat=e.forwardRef((function(t,n){var i,r,s,o,a;const l=(0,Dnt.A)({props:t,name:"MuiOutlinedInput"}),{components:h={},fullWidth:c=!1,inputComponent:u="input",label:p,multiline:d=!1,notched:f,slots:m={},type:g="text"}=l,y=(0,ant.A)(l,Hat),_=(t=>{const{classes:e}=t,n=(0,Ant.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},zat,e);return(0,ont.A)({},e,n)})(l),v=hat(),T=aat({props:l,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),E=(0,ont.A)({},l,{color:T.color||"primary",disabled:T.disabled,error:T.error,focused:T.focused,formControl:v,fullWidth:c,hiddenLabel:T.hiddenLabel,multiline:d,size:T.size,type:g}),x=null!=(i=null!=(r=m.root)?r:h.Root)?i:Vat,I=null!=(s=null!=(o=m.input)?o:h.Input)?s:Wat;return(0,ps.jsx)(Eat,(0,ont.A)({slots:{root:x,input:I},renderSuffix:t=>(0,ps.jsx)(jat,{ownerState:E,className:_.notchedOutline,label:null!=p&&""!==p&&T.required?a||(a=(0,ps.jsxs)(e.Fragment,{children:[p,"\u2009","*"]})):p,notched:"undefined"!==typeof f?f:Boolean(t.startAdornment||t.filled||t.focused)}),fullWidth:c,inputComponent:u,multiline:d,ref:n,type:g},y,{classes:(0,ont.A)({},_,{notchedOutline:null})}))}));Yat.muiName="Input";const qat=Yat;function Xat(t){return(0,git.Ay)("MuiFormLabel",t)}const Zat=(0,Ent.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Kat=["children","className","color","component","disabled","error","filled","focused","required"],Qat=(0,Rnt.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,ont.A)({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(Zat.focused)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(Zat.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(Zat.error)]:{color:(e.vars||e).palette.error.main}})})),Jat=(0,Rnt.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(Zat.error)]:{color:(e.vars||e).palette.error.main}}})),$at=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiFormLabel"}),{children:i,className:r,component:s="label"}=n,o=(0,ant.A)(n,Kat),a=aat({props:n,muiFormControl:hat(),states:["color","required","focused","disabled","error","filled"]}),l=(0,ont.A)({},n,{color:a.color||"primary",component:s,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),h=(t=>{const{classes:e,color:n,focused:i,disabled:r,error:s,filled:o,required:a}=t,l={root:["root","color".concat((0,Iit.A)(n)),r&&"disabled",s&&"error",o&&"filled",i&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return(0,Ant.A)(l,Xat,e)})(l);return(0,ps.jsxs)(Qat,(0,ont.A)({as:s,ownerState:l,className:(0,lnt.A)(h.root,r),ref:e},o,{children:[i,a.required&&(0,ps.jsxs)(Jat,{ownerState:l,"aria-hidden":!0,className:h.asterisk,children:["\u2009","*"]})]}))})),tlt=$at;function elt(t){return(0,git.Ay)("MuiInputLabel",t)}(0,Ent.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const nlt=["disableAnimation","margin","shrink","variant","className"],ilt=(0,Rnt.Ay)(tlt,{shouldForwardProp:t=>(0,Rnt.ep)(t)||"classes"===t,name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(Zat.asterisk)]:e.asterisk},e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&(0,ont.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,ont.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,ont.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),rlt=e.forwardRef((function(t,e){const n=(0,Dnt.A)({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:r,className:s}=n,o=(0,ant.A)(n,nlt),a=hat();let l=r;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const h=aat({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),c=(0,ont.A)({},n,{disableAnimation:i,formControl:a,shrink:l,size:h.size,variant:h.variant,required:h.required,focused:h.focused}),u=(t=>{const{classes:e,formControl:n,size:i,shrink:r,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",r&&"shrink",i&&"normal"!==i&&"size".concat((0,Iit.A)(i)),o],asterisk:[a&&"asterisk"]},h=(0,Ant.A)(l,elt,e);return(0,ont.A)({},e,h)})(c);return(0,ps.jsx)(ilt,(0,ont.A)({"data-shrink":l,ownerState:c,ref:e,className:(0,lnt.A)(u.root,s)},o,{classes:u}))})),slt=rlt;function olt(t){return(0,git.Ay)("MuiFormControl",t)}(0,Ent.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const alt=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],llt=(0,Rnt.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,ont.A)({},e.root,e["margin".concat((0,Iit.A)(n.margin))],n.fullWidth&&e.fullWidth)}})((t=>{let{ownerState:e}=t;return(0,ont.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),hlt=e.forwardRef((function(t,n){const i=(0,Dnt.A)({props:t,name:"MuiFormControl"}),{children:r,className:s,color:o="primary",component:a="div",disabled:l=!1,error:h=!1,focused:c,fullWidth:u=!1,hiddenLabel:p=!1,margin:d="none",required:f=!1,size:m="medium",variant:g="outlined"}=i,y=(0,ant.A)(i,alt),_=(0,ont.A)({},i,{color:o,component:a,disabled:l,error:h,fullWidth:u,hiddenLabel:p,margin:d,required:f,size:m,variant:g}),v=(t=>{const{classes:e,margin:n,fullWidth:i}=t,r={root:["root","none"!==n&&"margin".concat((0,Iit.A)(n)),i&&"fullWidth"]};return(0,Ant.A)(r,olt,e)})(_),[T,E]=e.useState((()=>{let t=!1;return r&&e.Children.forEach(r,(e=>{if(!(0,$st.A)(e,["Input","Select"]))return;const n=(0,$st.A)(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)})),t})),[x,I]=e.useState((()=>{let t=!1;return r&&e.Children.forEach(r,(e=>{(0,$st.A)(e,["Input","Select"])&&(uat(e.props,!0)||uat(e.props.inputProps,!0))&&(t=!0)})),t})),[b,w]=e.useState(!1);l&&b&&w(!1);const S=void 0===c||l?b:c;let A;const C=e.useMemo((()=>({adornedStart:T,setAdornedStart:E,color:o,disabled:l,error:h,filled:x,focused:S,fullWidth:u,hiddenLabel:p,size:m,onBlur:()=>{w(!1)},onEmpty:()=>{I(!1)},onFilled:()=>{I(!0)},onFocus:()=>{w(!0)},registerEffect:A,required:f,variant:g})),[T,o,l,h,x,S,u,p,A,f,m,g]);return(0,ps.jsx)(lat.Provider,{value:C,children:(0,ps.jsx)(llt,(0,ont.A)({as:a,ownerState:_,className:(0,lnt.A)(v.root,s),ref:n},y,{children:r}))})})),clt=hlt;function ult(t){return(0,git.Ay)("MuiFormHelperText",t)}const plt=(0,Ent.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var dlt;const flt=["children","className","component","disabled","error","filled","focused","margin","required","variant"],mlt=(0,Rnt.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e["size".concat((0,Iit.A)(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((t=>{let{theme:e,ownerState:n}=t;return(0,ont.A)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(plt.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(plt.error)]:{color:(e.vars||e).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),glt=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiFormHelperText"}),{children:i,className:r,component:s="p"}=n,o=(0,ant.A)(n,flt),a=aat({props:n,muiFormControl:hat(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,ont.A)({},n,{component:s,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),h=(t=>{const{classes:e,contained:n,size:i,disabled:r,error:s,filled:o,focused:a,required:l}=t,h={root:["root",r&&"disabled",s&&"error",i&&"size".concat((0,Iit.A)(i)),n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return(0,Ant.A)(h,ult,e)})(l);return(0,ps.jsx)(mlt,(0,ont.A)({as:s,ownerState:l,className:(0,lnt.A)(h.root,r),ref:e},o,{children:" "===i?dlt||(dlt=(0,ps.jsx)("span",{className:"notranslate",children:"\u200b"})):i}))})),ylt=glt;n(805);var _lt=n(2427);const vlt=brt,Tlt=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Elt(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function xlt(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Ilt(t,e){if(void 0===e)return!0;let n=t.innerText;return void 0===n&&(n=t.textContent),n=n.trim().toLowerCase(),0!==n.length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function blt(t,e,n,i,r,s){let o=!1,a=r(t,e,!!e&&n);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const e=!i&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&Ilt(a,s)&&!e)return a.focus(),!0;a=r(t,a,n)}return!1}const wlt=e.forwardRef((function(t,n){const{actions:i,autoFocus:r=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:h=!1,onKeyDown:c,variant:u="selectedMenu"}=t,p=(0,ant.A)(t,Tlt),d=e.useRef(null),f=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,tot.A)((()=>{r&&d.current.focus()}),[r]),e.useImperativeHandle(i,(()=>({adjustStyleForScrollbar:(t,e)=>{const n=!d.current.style.width;if(t.clientHeight<d.current.clientHeight&&n){const n="".concat(vlt((0,_lt.A)(t)),"px");d.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=n,d.current.style.width="calc(100% + ".concat(n,")")}return d.current}})),[]);const m=(0,Ont.A)(d,n);let g=-1;e.Children.forEach(o,((t,n)=>{e.isValidElement(t)?(t.props.disabled||("selectedMenu"===u&&t.props.selected||-1===g)&&(g=n),g===n&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(g+=1,g>=o.length&&(g=-1))):g===n&&(g+=1,g>=o.length&&(g=-1))}));const y=e.Children.map(o,((t,n)=>{if(n===g){const n={};return s&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===u&&(n.tabIndex=0),e.cloneElement(t,n)}return t}));return(0,ps.jsx)(Jst,(0,ont.A)({role:"menu",ref:m,className:a,onKeyDown:t=>{const e=d.current,n=t.key,i=(0,_lt.A)(e).activeElement;if("ArrowDown"===n)t.preventDefault(),blt(e,i,h,l,Elt);else if("ArrowUp"===n)t.preventDefault(),blt(e,i,h,l,xlt);else if("Home"===n)t.preventDefault(),blt(e,null,h,l,Elt);else if("End"===n)t.preventDefault(),blt(e,null,h,l,xlt);else if(1===n.length){const r=f.current,s=n.toLowerCase(),o=performance.now();r.keys.length>0&&(o-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&s!==r.keys[0]&&(r.repeating=!1)),r.lastTime=o,r.keys.push(s);const a=i&&!r.repeating&&Ilt(i,r);r.previousKeyMatched&&(a||blt(e,i,!1,l,Elt,r))?t.preventDefault():r.previousKeyMatched=!1}c&&c(t)},tabIndex:r?0:-1},p,{children:y}))})),Slt=wlt,Alt=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Clt(t){return"scale(".concat(t,", ").concat(t**2,")")}const Rlt={entering:{opacity:1,transform:Clt(1)},entered:{opacity:1,transform:"none"}},Dlt="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Olt=e.forwardRef((function(t,n){const{addEndListener:i,appear:r=!0,children:s,easing:o,in:a,onEnter:l,onEntered:h,onEntering:c,onExit:u,onExited:p,onExiting:d,style:f,timeout:m="auto",TransitionComponent:g=qrt}=t,y=(0,ant.A)(t,Alt),_=(0,Qnt.A)(),v=e.useRef(),T=Zrt(),E=e.useRef(null),x=(0,Ont.A)(E,s.ref,n),I=t=>e=>{if(t){const n=E.current;void 0===e?t(n):t(n,e)}},b=I(c),w=I(((t,e)=>{Krt(t);const{duration:n,delay:i,easing:r}=Qrt({style:f,timeout:m,easing:o},{mode:"enter"});let s;"auto"===m?(s=T.transitions.getAutoHeightDuration(t.clientHeight),v.current=s):s=n,t.style.transition=[T.transitions.create("opacity",{duration:s,delay:i}),T.transitions.create("transform",{duration:Dlt?s:.666*s,delay:i,easing:r})].join(","),l&&l(t,e)})),S=I(h),A=I(d),C=I((t=>{const{duration:e,delay:n,easing:i}=Qrt({style:f,timeout:m,easing:o},{mode:"exit"});let r;"auto"===m?(r=T.transitions.getAutoHeightDuration(t.clientHeight),v.current=r):r=e,t.style.transition=[T.transitions.create("opacity",{duration:r,delay:n}),T.transitions.create("transform",{duration:Dlt?r:.666*r,delay:Dlt?n:n||.333*r,easing:i})].join(","),t.style.opacity=0,t.style.transform=Clt(.75),u&&u(t)})),R=I(p);return(0,ps.jsx)(g,(0,ont.A)({appear:r,in:a,nodeRef:E,onEnter:w,onEntered:S,onEntering:b,onExit:C,onExited:R,onExiting:A,addEndListener:t=>{"auto"===m&&_.start(v.current||0,t),i&&i(E.current,t)},timeout:"auto"===m?null:m},y,{children:(t,n)=>e.cloneElement(s,(0,ont.A)({style:(0,ont.A)({opacity:0,transform:Clt(.75),visibility:"exited"!==t||a?void 0:"hidden"},Rlt[t],f,s.props.style),ref:x},n))}))}));Olt.muiSupportAuto=!0;const Nlt=Olt;function Mlt(t){return(0,git.Ay)("MuiPopover",t)}(0,Ent.A)("MuiPopover",["root","paper"]);const Plt=["onEntering"],Flt=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Llt=["slotProps"];function klt(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function Ult(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function Blt(t){return[t.horizontal,t.vertical].map((t=>"number"===typeof t?"".concat(t,"px"):t)).join(" ")}function zlt(t){return"function"===typeof t?t():t}const Glt=(0,Rnt.Ay)(pst,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Hlt=(0,Rnt.Ay)(art,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Vlt=e.forwardRef((function(t,n){var i,r,s;const o=(0,Dnt.A)({props:t,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:u="anchorEl",children:p,className:d,container:f,elevation:m=8,marginThreshold:g=16,open:y,PaperProps:_={},slots:v,slotProps:T,transformOrigin:E={vertical:"top",horizontal:"left"},TransitionComponent:x=Nlt,transitionDuration:I="auto",TransitionProps:{onEntering:b}={},disableScrollLock:w=!1}=o,S=(0,ant.A)(o.TransitionProps,Plt),A=(0,ant.A)(o,Flt),C=null!=(i=null==T?void 0:T.paper)?i:_,R=e.useRef(),D=(0,Ont.A)(R,C.ref),O=(0,ont.A)({},o,{anchorOrigin:h,anchorReference:u,elevation:m,marginThreshold:g,externalPaperSlotProps:C,transformOrigin:E,TransitionComponent:x,transitionDuration:I,TransitionProps:S}),N=(t=>{const{classes:e}=t;return(0,Ant.A)({root:["root"],paper:["paper"]},Mlt,e)})(O),M=e.useCallback((()=>{if("anchorPosition"===u)return c;const t=zlt(l),e=(t&&1===t.nodeType?t:(0,_lt.A)(R.current).body).getBoundingClientRect();return{top:e.top+klt(e,h.vertical),left:e.left+Ult(e,h.horizontal)}}),[l,h.horizontal,h.vertical,c,u]),P=e.useCallback((t=>({vertical:klt(t,E.vertical),horizontal:Ult(t,E.horizontal)})),[E.horizontal,E.vertical]),F=e.useCallback((t=>{const e={width:t.offsetWidth,height:t.offsetHeight},n=P(e);if("none"===u)return{top:null,left:null,transformOrigin:Blt(n)};const i=M();let r=i.top-n.vertical,s=i.left-n.horizontal;const o=r+e.height,a=s+e.width,h=(0,fst.A)(zlt(l)),c=h.innerHeight-g,p=h.innerWidth-g;if(null!==g&&r<g){const t=r-g;r-=t,n.vertical+=t}else if(null!==g&&o>c){const t=o-c;r-=t,n.vertical+=t}if(null!==g&&s<g){const t=s-g;s-=t,n.horizontal+=t}else if(a>p){const t=a-p;s-=t,n.horizontal+=t}return{top:"".concat(Math.round(r),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:Blt(n)}}),[l,u,M,P,g]),[L,k]=e.useState(y),U=e.useCallback((()=>{const t=R.current;if(!t)return;const e=F(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin,k(!0)}),[F]);e.useEffect((()=>(w&&window.addEventListener("scroll",U),()=>window.removeEventListener("scroll",U))),[l,w,U]);e.useEffect((()=>{y&&U()})),e.useImperativeHandle(a,(()=>y?{updatePosition:()=>{U()}}:null),[y,U]),e.useEffect((()=>{if(!y)return;const t=(0,dst.A)((()=>{U()})),e=(0,fst.A)(l);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[l,y,U]);let B=I;"auto"!==I||x.muiSupportAuto||(B=void 0);const z=f||(l?(0,_lt.A)(zlt(l)).body:void 0),G=null!=(r=null==v?void 0:v.root)?r:Glt,H=null!=(s=null==v?void 0:v.paper)?s:Hlt,V=vrt({elementType:H,externalSlotProps:(0,ont.A)({},C,{style:L?C.style:(0,ont.A)({},C.style,{opacity:0})}),additionalProps:{elevation:m,ref:D},ownerState:O,className:(0,lnt.A)(N.paper,null==C?void 0:C.className)}),j=vrt({elementType:G,externalSlotProps:(null==T?void 0:T.root)||{},externalForwardedProps:A,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:z,open:y},ownerState:O,className:(0,lnt.A)(N.root,d)}),{slotProps:W}=j,Y=(0,ant.A)(j,Llt);return(0,ps.jsx)(G,(0,ont.A)({},Y,!mrt(G)&&{slotProps:W,disableScrollLock:w},{children:(0,ps.jsx)(x,(0,ont.A)({appear:!0,in:y,onEntering:(t,e)=>{b&&b(t,e),U()},onExited:()=>{k(!1)},timeout:B},S,{children:(0,ps.jsx)(H,(0,ont.A)({},V,{children:p}))}))}))})),jlt=Vlt;function Wlt(t){return(0,git.Ay)("MuiMenu",t)}(0,Ent.A)("MuiMenu",["root","paper","list"]);const Ylt=["onEntering"],qlt=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Xlt={vertical:"top",horizontal:"right"},Zlt={vertical:"top",horizontal:"left"},Klt=(0,Rnt.Ay)(jlt,{shouldForwardProp:t=>(0,Rnt.ep)(t)||"classes"===t,name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Qlt=(0,Rnt.Ay)(Hlt,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Jlt=(0,Rnt.Ay)(Slt,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),$lt=e.forwardRef((function(t,n){var i,r;const s=(0,Dnt.A)({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:h=!1,MenuListProps:c={},onClose:u,open:p,PaperProps:d={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:y="selectedMenu",slots:_={},slotProps:v={}}=s,T=(0,ant.A)(s.TransitionProps,Ylt),E=(0,ant.A)(s,qlt),x=Zrt(),I="rtl"===x.direction,b=(0,ont.A)({},s,{autoFocus:o,disableAutoFocusItem:h,MenuListProps:c,onEntering:g,PaperProps:d,transitionDuration:m,TransitionProps:T,variant:y}),w=(t=>{const{classes:e}=t;return(0,Ant.A)({root:["root"],paper:["paper"],list:["list"]},Wlt,e)})(b),S=o&&!h&&p,A=e.useRef(null);let C=-1;e.Children.map(a,((t,n)=>{e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===y&&t.props.selected||-1===C)&&(C=n))}));const R=null!=(i=_.paper)?i:Qlt,D=null!=(r=v.paper)?r:d,O=vrt({elementType:_.root,externalSlotProps:v.root,ownerState:b,className:[w.root,l]}),N=vrt({elementType:R,externalSlotProps:D,ownerState:b,className:w.paper});return(0,ps.jsx)(Klt,(0,ont.A)({onClose:u,anchorOrigin:{vertical:"bottom",horizontal:I?"right":"left"},transformOrigin:I?Xlt:Zlt,slots:{paper:R,root:_.root},slotProps:{root:O,paper:N},open:p,ref:n,transitionDuration:m,TransitionProps:(0,ont.A)({onEntering:(t,e)=>{A.current&&A.current.adjustStyleForScrollbar(t,x),g&&g(t,e)}},T),ownerState:b},E,{classes:f,children:(0,ps.jsx)(Jlt,(0,ont.A)({onKeyDown:t=>{"Tab"===t.key&&(t.preventDefault(),u&&u(t,"tabKeyDown"))},actions:A,autoFocus:o&&(-1===C||h),autoFocusItem:S,variant:y},c,{className:(0,lnt.A)(w.list,c.className),children:a}))}))})),tht=$lt;function eht(t){return(0,git.Ay)("MuiNativeSelect",t)}const nht=(0,Ent.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),iht=["className","disabled","error","IconComponent","inputRef","variant"],rht=t=>{let{ownerState:e,theme:n}=t;return(0,ont.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,ont.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(nht.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},sht=(0,Rnt.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Rnt.ep,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{["&.".concat(nht.multiple)]:e.multiple}]}})(rht),oht=t=>{let{ownerState:e,theme:n}=t;return(0,ont.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(nht.disabled)]:{color:(n.vars||n).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},aht=(0,Rnt.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat((0,Iit.A)(n.variant))],n.open&&e.iconOpen]}})(oht),lht=e.forwardRef((function(t,n){const{className:i,disabled:r,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=t,h=(0,ant.A)(t,iht),c=(0,ont.A)({},t,{disabled:r,variant:l,error:s}),u=(t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:s,error:o}=t,a={select:["select",n,i&&"disabled",r&&"multiple",o&&"error"],icon:["icon","icon".concat((0,Iit.A)(n)),s&&"iconOpen",i&&"disabled"]};return(0,Ant.A)(a,eht,e)})(c);return(0,ps.jsxs)(e.Fragment,{children:[(0,ps.jsx)(sht,(0,ont.A)({ownerState:c,className:(0,lnt.A)(u.select,i),disabled:r,ref:a||n},h)),t.multiple?null:(0,ps.jsx)(aht,{as:o,ownerState:c,className:u.icon})]})})),hht=lht;var cht=n(5242);function uht(t){return(0,git.Ay)("MuiSelect",t)}const pht=(0,Ent.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var dht;const fht=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],mht=(0,Rnt.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["&.".concat(pht.select)]:e.select},{["&.".concat(pht.select)]:e[n.variant]},{["&.".concat(pht.error)]:e.error},{["&.".concat(pht.multiple)]:e.multiple}]}})(rht,{["&.".concat(pht.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),ght=(0,Rnt.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat((0,Iit.A)(n.variant))],n.open&&e.iconOpen]}})(oht),yht=(0,Rnt.Ay)("input",{shouldForwardProp:t=>(0,Rnt._n)(t)&&"classes"!==t,name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function _ht(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function vht(t){return null==t||"string"===typeof t&&!t.trim()}const Tht=e.forwardRef((function(t,n){var i;const{"aria-describedby":r,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:h,defaultOpen:c,defaultValue:u,disabled:p,displayEmpty:d,error:f=!1,IconComponent:m,inputRef:g,labelId:y,MenuProps:_={},multiple:v,name:T,onBlur:E,onChange:x,onClose:I,onFocus:b,onOpen:w,open:S,readOnly:A,renderValue:C,SelectDisplayProps:R={},tabIndex:D,value:O,variant:N="standard"}=t,M=(0,ant.A)(t,fht),[P,F]=(0,cht.A)({controlled:O,default:u,name:"Select"}),[L,k]=(0,cht.A)({controlled:S,default:c,name:"Select"}),U=e.useRef(null),B=e.useRef(null),[z,G]=e.useState(null),{current:H}=e.useRef(null!=S),[V,j]=e.useState(),W=(0,Ont.A)(n,g),Y=e.useCallback((t=>{B.current=t,t&&G(t)}),[]),q=null==z?void 0:z.parentNode;e.useImperativeHandle(W,(()=>({focus:()=>{B.current.focus()},node:U.current,value:P})),[P]),e.useEffect((()=>{c&&L&&z&&!H&&(j(a?null:q.clientWidth),B.current.focus())}),[z,a]),e.useEffect((()=>{o&&B.current.focus()}),[o]),e.useEffect((()=>{if(!y)return;const t=(0,_lt.A)(B.current).getElementById(y);if(t){const e=()=>{getSelection().isCollapsed&&B.current.focus()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}}),[y]);const X=(t,e)=>{t?w&&w(e):I&&I(e),H||(j(a?null:q.clientWidth),k(t))},Z=e.Children.toArray(l),K=t=>e=>{let n;if(e.currentTarget.hasAttribute("tabindex")){if(v){n=Array.isArray(P)?P.slice():[];const e=P.indexOf(t.props.value);-1===e?n.push(t.props.value):n.splice(e,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),P!==n&&(F(n),x)){const i=e.nativeEvent||e,r=new i.constructor(i.type,i);Object.defineProperty(r,"target",{writable:!0,value:{value:n,name:T}}),x(r,t)}v||X(!1,e)}},Q=null!==z&&L;let J,$;delete M["aria-invalid"];const tt=[];let et=!1,nt=!1;(uat({value:P})||d)&&(C?J=C(P):et=!0);const it=Z.map((t=>{if(!e.isValidElement(t))return null;let n;if(v){if(!Array.isArray(P))throw new Error((0,tat.A)(2));n=P.some((e=>_ht(e,t.props.value))),n&&et&&tt.push(t.props.children)}else n=_ht(P,t.props.value),n&&et&&($=t.props.children);return n&&(nt=!0),e.cloneElement(t,{"aria-selected":n?"true":"false",onClick:K(t),onKeyUp:e=>{" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:n,value:void 0,"data-value":t.props.value})}));et&&(J=v?0===tt.length?null:tt.reduce(((t,e,n)=>(t.push(e),n<tt.length-1&&t.push(", "),t)),[]):$);let rt,st=V;!a&&H&&z&&(st=q.clientWidth),rt="undefined"!==typeof D?D:p?null:0;const ot=R.id||(T?"mui-component-select-".concat(T):void 0),at=(0,ont.A)({},t,{variant:N,value:P,open:Q,error:f}),lt=(t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:s,error:o}=t,a={select:["select",n,i&&"disabled",r&&"multiple",o&&"error"],icon:["icon","icon".concat((0,Iit.A)(n)),s&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return(0,Ant.A)(a,uht,e)})(at),ht=(0,ont.A)({},_.PaperProps,null==(i=_.slotProps)?void 0:i.paper),ct=(0,$ot.A)();return(0,ps.jsxs)(e.Fragment,{children:[(0,ps.jsx)(mht,(0,ont.A)({ref:Y,tabIndex:rt,role:"combobox","aria-controls":ct,"aria-disabled":p?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[y,ot].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:t=>{if(!A){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),X(!0,t))}},onMouseDown:p||A?null:t=>{0===t.button&&(t.preventDefault(),B.current.focus(),X(!0,t))},onBlur:t=>{!Q&&E&&(Object.defineProperty(t,"target",{writable:!0,value:{value:P,name:T}}),E(t))},onFocus:b},R,{ownerState:at,className:(0,lnt.A)(R.className,lt.select,h),id:ot,children:vht(J)?dht||(dht=(0,ps.jsx)("span",{className:"notranslate",children:"\u200b"})):J})),(0,ps.jsx)(yht,(0,ont.A)({"aria-invalid":f,value:Array.isArray(P)?P.join(","):P,name:T,ref:U,"aria-hidden":!0,onChange:t=>{const e=Z.find((e=>e.props.value===t.target.value));void 0!==e&&(F(e.props.value),x&&x(t,e))},tabIndex:-1,disabled:p,className:lt.nativeInput,autoFocus:o,ownerState:at},M)),(0,ps.jsx)(ght,{as:m,className:lt.icon,ownerState:at}),(0,ps.jsx)(tht,(0,ont.A)({id:"menu-".concat(T||""),anchorEl:q,open:Q,onClose:t=>{X(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},_,{MenuListProps:(0,ont.A)({"aria-labelledby":y,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:ct},_.MenuListProps),slotProps:(0,ont.A)({},_.slotProps,{paper:(0,ont.A)({},ht,{style:(0,ont.A)({minWidth:st},null!=ht?ht.style:null)})}),children:it}))]})})),Eht=Tht;const xht=(0,n(9662).A)((0,ps.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Iht=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],bht=["root"],wht={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>(0,Rnt.ep)(t)&&"variant"!==t,slot:"Root"},Sht=(0,Rnt.Ay)(Cat,wht)(""),Aht=(0,Rnt.Ay)(qat,wht)(""),Cht=(0,Rnt.Ay)(Fat,wht)(""),Rht=e.forwardRef((function(t,n){const i=(0,Dnt.A)({name:"MuiSelect",props:t}),{autoWidth:r=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:h=!1,IconComponent:c=xht,id:u,input:p,inputProps:d,label:f,labelId:m,MenuProps:g,multiple:y=!1,native:_=!1,onClose:v,onOpen:T,open:E,renderValue:x,SelectDisplayProps:I,variant:b="outlined"}=i,w=(0,ant.A)(i,Iht),S=_?hht:Eht,A=aat({props:i,muiFormControl:hat(),states:["variant","error"]}),C=A.variant||b,R=(0,ont.A)({},i,{variant:C,classes:o}),D=(t=>{const{classes:e}=t;return e})(R),O=(0,ant.A)(D,bht),N=p||{standard:(0,ps.jsx)(Sht,{ownerState:R}),outlined:(0,ps.jsx)(Aht,{label:f,ownerState:R}),filled:(0,ps.jsx)(Cht,{ownerState:R})}[C],M=(0,Ont.A)(n,N.ref);return(0,ps.jsx)(e.Fragment,{children:e.cloneElement(N,(0,ont.A)({inputComponent:S,inputProps:(0,ont.A)({children:s,error:A.error,IconComponent:c,variant:C,type:void 0,multiple:y},_?{id:u}:{autoWidth:r,defaultOpen:l,displayEmpty:h,labelId:m,MenuProps:g,onClose:v,onOpen:T,open:E,renderValue:x,SelectDisplayProps:(0,ont.A)({id:u},I)},d,{classes:d?(0,unt.A)(O,d.classes):O},p?p.props.inputProps:{})},(y&&_||h)&&"outlined"===C?{notched:!0}:{},{ref:M,className:(0,lnt.A)(N.props.className,a,D.root)},!p&&{variant:C},w))})}));Rht.muiName="Select";const Dht=Rht;function Oht(t){return(0,git.Ay)("MuiTextField",t)}(0,Ent.A)("MuiTextField",["root"]);const Nht=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Mht={standard:Cat,filled:Fat,outlined:qat},Pht=(0,Rnt.Ay)(clt,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Fht=e.forwardRef((function(t,e){const n=(0,Dnt.A)({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:r=!1,children:s,className:o,color:a="primary",defaultValue:l,disabled:h=!1,error:c=!1,FormHelperTextProps:u,fullWidth:p=!1,helperText:d,id:f,InputLabelProps:m,inputProps:g,InputProps:y,inputRef:_,label:v,maxRows:T,minRows:E,multiline:x=!1,name:I,onBlur:b,onChange:w,onFocus:S,placeholder:A,required:C=!1,rows:R,select:D=!1,SelectProps:O,type:N,value:M,variant:P="outlined"}=n,F=(0,ant.A)(n,Nht),L=(0,ont.A)({},n,{autoFocus:r,color:a,disabled:h,error:c,fullWidth:p,multiline:x,required:C,select:D,variant:P}),k=(t=>{const{classes:e}=t;return(0,Ant.A)({root:["root"]},Oht,e)})(L);const U={};"outlined"===P&&(m&&"undefined"!==typeof m.shrink&&(U.notched=m.shrink),U.label=v),D&&(O&&O.native||(U.id=void 0),U["aria-describedby"]=void 0);const B=(0,$ot.A)(f),z=d&&B?"".concat(B,"-helper-text"):void 0,G=v&&B?"".concat(B,"-label"):void 0,H=Mht[P],V=(0,ps.jsx)(H,(0,ont.A)({"aria-describedby":z,autoComplete:i,autoFocus:r,defaultValue:l,fullWidth:p,multiline:x,name:I,rows:R,maxRows:T,minRows:E,type:N,value:M,id:B,inputRef:_,onBlur:b,onChange:w,onFocus:S,placeholder:A,inputProps:g},U,y));return(0,ps.jsxs)(Pht,(0,ont.A)({className:(0,lnt.A)(k.root,o),disabled:h,error:c,fullWidth:p,ref:e,required:C,color:a,variant:P,ownerState:L},F,{children:[null!=v&&""!==v&&(0,ps.jsx)(slt,(0,ont.A)({htmlFor:B,id:G},m,{children:v})),D?(0,ps.jsx)(Dht,(0,ont.A)({"aria-describedby":z,id:B,labelId:G,value:M,input:V},O,{children:s})):V,d&&(0,ps.jsx)(ylt,(0,ont.A)({id:z},u,{children:d}))]}))})),Lht=Fht,kht=t=>{let{onToggleMenu:e}=t;const[n,i]=snt(),{building:r}=n;if(!r)throw new Error("No building active!");return(0,ps.jsxs)(wnt,{component:"form",onSubmit:t=>{t.preventDefault();const n=new FormData(t.currentTarget),s={...r};s.name=n.get("building-name")||r.name,s.lat=n.get("building-lat")||r.lat,s.lng=n.get("building-lng")||r.lng,i({type:"UPDATE_BUILDING",payload:s}),e(!1)},className:"full-width",children:[(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Lht,{required:!0,fullWidth:!0,id:"building-id",label:"Building ID",name:"building-id",autoComplete:"building-id",value:r.uid,disabled:!0})}),(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Lht,{fullWidth:!0,id:"building-name",label:"Building Name",name:"building-name",autoComplete:"building-name",defaultValue:r.name})}),(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Lht,{fullWidth:!0,required:!0,id:"building-lng",label:"Longitude",name:"building-lng",autoComplete:"building-lng",defaultValue:r.lng})}),(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Lht,{fullWidth:!0,required:!0,id:"building-lat",label:"Latitude",name:"building-lat",autoComplete:"building-lat",defaultValue:r.lat})}),(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Pit,{type:"submit",className:"submit-button",children:"Update building"})})]})};var Uht=n(155);const Bht=()=>{const[t,e]=snt(),{building:n,user:i}=t;if(!n||!i)throw new Error("Error: building or user not found");return(0,ps.jsxs)("div",{className:"full-width",children:[n.models.length?n.models.map((t=>(0,ps.jsxs)("div",{className:"list-item",children:[(0,ps.jsx)(qit,{onClick:()=>(t=>{const i={...n},r=i.models.find((e=>e.id===t));if(!r)throw new Error("Model not found!");i.models=i.models.filter((e=>e.id!==t)),e({type:"DELETE_MODEL",payload:{building:i,model:r}})})(t.id),children:(0,ps.jsx)(Uht.A,{})}),(0,ps.jsx)("span",{className:"margin-left",children:t.name})]},t.id))):(0,ps.jsx)("p",{children:"This building has no models!"}),(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Pit,{onClick:()=>{const t=document.createElement("input");t.type="file",t.style.visibility="hidden",document.body.appendChild(t),t.onchange=()=>{if(t.files&&t.files.length){const i=t.files[0];if(!i.name.includes(".ifc"))return;const r={...n},s="".concat(i.name,"-").concat(performance.now()),o={name:i.name,id:s};r.models.push(o),e({type:"UPLOAD_MODEL",payload:{building:r,file:i,model:o}})}t.remove()},t.click()},className:"submit-button",children:"Upload model"})})]})},zht=()=>{const[t]=snt();return(0,ps.jsxs)("div",{children:[Boolean(t.properties.length)?(0,ps.jsx)(jst,{}):(0,ps.jsx)("p",{children:"No item selected."}),t.properties.map((t=>(0,ps.jsxs)("div",{children:[(0,ps.jsxs)("div",{className:"value-pair list-item",children:[(0,ps.jsx)("div",{children:t.name}),(0,ps.jsx)("p",{children:":"}),(0,ps.jsx)("div",{children:t.value})]}),(0,ps.jsx)(jst,{})]},t.name)))]})},Ght=()=>{const[t,e]=snt(),n=(t,n)=>{e({type:"TOGGLE_FLOORPLAN",payload:{active:t,floorplan:n}})};return(0,ps.jsxs)("div",{children:[t.floorplans.map((t=>(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Pit,{onClick:()=>n(!0,t),className:"wide-button",children:t.name})},t.name))),(0,ps.jsx)("div",{className:"list-item",children:(0,ps.jsx)(Pit,{onClick:()=>n(!1),className:"wide-button",children:"Exit"})},"exit")]})},Hht=t=>{let{mode:e,open:n,onToggleMenu:i}=t;if(!n)return(0,ps.jsx)(ps.Fragment,{});const r=new Map;r.set("BuildingInfo",(0,ps.jsx)(kht,{onToggleMenu:i})),r.set("ModelList",(0,ps.jsx)(Bht,{})),r.set("Properties",(0,ps.jsx)(zht,{})),r.set("Floorplans",(0,ps.jsx)(Ght,{}));const s={BuildingInfo:"Building Information",ModelList:"Model List",Properties:"Properties",Floorplans:"Floorplans"}[e];return(0,ps.jsx)(Yot,{className:"front-menu",children:(0,ps.jsxs)(Qot,{children:[(0,ps.jsxs)("div",{className:"front-menu-header",children:[(0,ps.jsx)("h2",{children:s}),(0,ps.jsx)(qit,{onClick:()=>i(!1),children:(0,ps.jsx)(Jot.A,{})})]}),(0,ps.jsx)("div",{className:"front-menu-content",children:r.get(e)})]})})},Vht=()=>{const[t,n]=snt(),i=(0,e.useRef)(null),{user:r,building:s}=t;return(0,e.useEffect)((()=>{const t=i.current;t&&r&&n({type:"START_BUILDING",payload:{container:t,building:s}})}),[]),(0,ps.jsx)(ps.Fragment,{children:(0,ps.jsx)("div",{className:"full-screen",ref:i})})};var jht=n(1271),Wht=n(611),Yht=n(1359),qht=n(7603);const Xht=function(){const t=[{name:"Clipping planes",icon:(0,ps.jsx)(Wht.A,{}),active:!1,action:t=>{const i=e("Clipping planes");n(t,"Clipping planes"),i.active=!i.active,t({type:"TOGGLE_CLIPPER",payload:i.active})}},{name:"Dimensions",icon:(0,ps.jsx)(Yht.A,{}),active:!1,action:t=>{const i=e("Dimensions");n(t,"Dimensions"),i.active=!i.active,t({type:"TOGGLE_DIMENSIONS",payload:i.active})}},{name:"Explosion",icon:(0,ps.jsx)(jht.A,{}),active:!1,action:t=>{const i=e("Explosion");n(t,"Explosion"),i.active=!i.active,t({type:"EXPLODE_MODEL",payload:i.active})}},{name:"Annotation",icon:(0,ps.jsx)(qht.A,{}),active:!1,action:t=>{const i=e("Annotation");n(t,"Annotation"),i.active=!i.active,t({type:"DRAW_MANAGER ",payload:i.active})}}],e=e=>{const n=t.find((t=>t.name===e));if(!n)throw new Error("Tool not found!");return n},n=(e,n)=>{for(const i of t)i.active&&i.name!==n&&i.action(e)};return t}(),Zht=()=>{const t=snt()[1];return(0,ps.jsx)(Yot,{className:"bottom-menu",children:Xht.map((e=>(0,ps.jsx)(qit,{color:e.active?"primary":"default",onClick:()=>e.action(t),children:e.icon},e.name)))})},Kht=()=>{const[t]=(0,e.useState)(240),[n,i]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),[o,a]=(0,e.useState)("BuildingInfo"),[{building:l,user:h}]=snt();if(!l)return(0,ps.jsx)(pt,{to:"/map"});if(!h)return(0,ps.jsx)(pt,{to:"/login"});const c=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!r,e=arguments.length>1?arguments[1]:void 0;e&&a(e),s(t)},u=t=>{i(t)},p=Ost();return(0,ps.jsxs)(wnt,{sx:{display:"flex"},children:[(0,ps.jsx)(Ust,{}),(0,ps.jsx)(Nst,{width:t,open:n,onOpen:()=>u(!0)}),(0,ps.jsx)(Got,{width:t,open:n,onClose:()=>u(!1),onToggleMenu:c}),(0,ps.jsxs)(wnt,{component:"main",sx:{flexGrow:1,p:3},children:[(0,ps.jsx)(p,{}),(0,ps.jsx)(Vht,{}),(0,ps.jsx)(Hht,{onToggleMenu:c,open:r,mode:o}),(0,ps.jsx)(Zht,{})]})]})},Qht=()=>{const[t,n]=snt(),i=(0,e.useRef)(null),r=(0,e.useRef)(null),[s,o]=(0,e.useState)(!1),{user:a,building:l}=t,h=()=>{o(!s)};if((0,e.useEffect)((()=>{const t=i.current;if(t&&a){const e=r.current;n({type:"START_MAP",payload:{container:t,user:a,thumbnail:e}})}}),[]),!a)return(0,ps.jsx)(pt,{to:"/login"});if(l){const t="/building/?id=".concat(l.uid);return(0,ps.jsx)(pt,{to:t})}return(0,ps.jsxs)(ps.Fragment,{children:[(0,ps.jsx)("div",{className:"full-screen",onContextMenu:()=>{s&&(n({type:"ADD_BUILDING",payload:a}),o(!1))},ref:i}),s&&(0,ps.jsxs)("div",{className:"overlay",children:[(0,ps.jsx)("p",{children:"Right click to create a new building or"}),(0,ps.jsx)(Pit,{onClick:h,children:"cancel"})]}),(0,ps.jsxs)("div",{className:"button-container",children:[(0,ps.jsx)(Pit,{variant:"contained",onClick:h,children:"Create building"}),(0,ps.jsx)(Pit,{onClick:()=>{n({type:"LOGOUT"})},children:"Log out"})]})]})};const Jht=function(){return(0,ps.jsx)(rnt,{children:(0,ps.jsx)(_t,{children:(0,ps.jsx)("div",{children:(0,ps.jsxs)(mt,{children:[(0,ps.jsx)(dt,{path:"/building",element:(0,ps.jsx)(Kht,{})}),(0,ps.jsx)(dt,{path:"/map",element:(0,ps.jsx)(Qht,{})}),(0,ps.jsx)(dt,{path:"/login",element:(0,ps.jsx)(Lit,{})}),(0,ps.jsx)(dt,{path:"/",element:(0,ps.jsx)(Lit,{})})]})})})})},$ht=r.createRoot(document.getElementById("root"));ze({apiKey:"AIzaSyC5qGo1lB2IZ5XsmHVhxqHJIcblFK28vGA",authDomain:"react-app-452e4.firebaseapp.com",projectId:"react-app-452e4",storageBucket:"react-app-452e4.appspot.com",messagingSenderId:"9537290639",appId:"1:9537290639:web:bd9d85b45f9cd976264bfa"}),$ht.render((0,ps.jsx)(e.StrictMode,{children:(0,ps.jsx)(Jht,{})}))})()})();
//# sourceMappingURL=main.cddc0e4b.js.map